!function i(r,o,a){function s(t,e){if(!o[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},r[t][0].call(n.exports,function(e){return s(r[t][1][e]||e)},n,n.exports,i,r,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){var i,r,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length)&&p()}function p(){if(!c){for(var e=s(f),t=(c=!0,u.length);t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,!function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return(r=clearTimeout)(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],2:[function(l,e,u){!function(n,s){!function(){var i=l("process/browser.js").nextTick,e=Function.prototype.apply,r=Array.prototype.slice,o={},a=0;function t(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof n?n:function(e){var t=a++,n=!(arguments.length<2)&&r.call(arguments,1);return o[t]=!0,i(function(){o[t]&&(n?e.apply(null,n):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof s?s:function(e){delete o[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":1,timers:2}],3:[function(e,t,n){var i,r,a=Object.create(null),o=("undefined"!=typeof window&&(window.__VUE_HOT_MAP__=a),!1),s="beforeCreate";function l(i,e){var r;e.functional?(r=e.render,e.render=function(e,t){var n=a[i].instances;return t&&n.indexOf(t.parent)<0&&n.push(t.parent),r(e,t)}):(u(e,s,function(){var e=a[i];e.Ctor||(e.Ctor=this.constructor),e.instances.push(this)}),u(e,"beforeDestroy",function(){var e=a[i].instances;e.splice(e.indexOf(this),1)}))}function u(e,t,n){var i=e[t];e[t]=i?Array.isArray(i)?i.concat(n):[i,n]:[n]}function c(n){return function(e,t){try{n(e,t)}catch(e){}}}function d(e,t){for(var n in e)n in t||delete e[n];for(var i in t)e[i]=t[i]}n.install=function(e,t){o||(o=!0,i=e.__esModule?e.default:e,r=i.version.split(".").map(Number),-1<i.config._lifecycleHooks.indexOf("init")&&(s="init"),n.compatible=2<=r[0],n.compatible)},n.createRecord=function(e,t){var n;a[e]||(n=null,l(e,t="function"==typeof t?(n=t).options:t),a[e]={Ctor:n,options:t,instances:[]})},n.isRecorded=function(e){return void 0!==a[e]},n.rerender=c(function(e,n){var i,r,o=a[e];n?("function"==typeof n&&(n=n.options),o.Ctor?(o.Ctor.options.render=n.render,o.Ctor.options.staticRenderFns=n.staticRenderFns,o.instances.slice().forEach(function(e){e.$options.render=n.render,e.$options.staticRenderFns=n.staticRenderFns,e._staticTrees&&(e._staticTrees=[]),Array.isArray(o.Ctor.options.cached)&&(o.Ctor.options.cached=[]),Array.isArray(e.$options.cached)&&(e.$options.cached=[]);var t=function(e){var n;if(e._u)return n=e._u,e._u=function(t){try{return n(t,!0)}catch(e){return n(t,null,!0)}},function(){e._u=n}}(e);e.$forceUpdate(),e.$nextTick(t)})):(o.options.render=n.render,o.options.staticRenderFns=n.staticRenderFns,o.options.functional&&(2<Object.keys(n).length?d(o.options,n):(i=o.options._injectStyles)&&(r=n.render,o.options.render=function(e,t){return i.call(t),r(e,t)}),o.options._Ctor=null,Array.isArray(o.options.cached)&&(o.options.cached=[]),o.instances.slice().forEach(function(e){e.$forceUpdate()})))):o.instances.slice().forEach(function(e){e.$forceUpdate()})}),n.reload=c(function(e,t){var n=a[e];t&&(l(e,t="function"==typeof t?t.options:t),n.Ctor?(r[1]<2&&(n.Ctor.extendOptions=t),(e=n.Ctor.super.extend(t)).options._Ctor=n.options._Ctor,n.Ctor.options=e.options,n.Ctor.cid=e.cid,n.Ctor.prototype=e.prototype,e.release&&e.release()):d(n.options,t)),n.instances.slice().forEach(function(e){e.$vnode&&e.$vnode.context&&e.$vnode.context.$forceUpdate()})})},{}],4:[function(e,Gr,t){!function(Ur,zr){!function(){"use strict";var E=Object.freeze({});function P(e){return null==e}function $(e){return null!=e}function T(e){return!0===e}function d(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function M(e){return null!==e&&"object"==typeof e}var v=Object.prototype.toString;function L(e){return v.call(e).slice(8,-1)}function O(e){return"[object Object]"===v.call(e)}function q(e){return"[object RegExp]"===v.call(e)}function y(e){var t=parseFloat(String(e));return 0<=t&&Math.floor(t)===t&&isFinite(e)}function H(e){return $(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function m(e){return null==e?"":Array.isArray(e)||O(e)&&e.toString===v?JSON.stringify(e,null,2):String(e)}function W(e){var t=parseFloat(e);return isNaN(t)?e:t}function r(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var _=r("slot,component",!0),K=r("key,ref,slot,slot-scope,is");function I(e,t){if(e.length){t=e.indexOf(t);if(-1<t)return e.splice(t,1)}}var b=Object.prototype.hasOwnProperty;function j(e,t){return b.call(e,t)}function e(t){var n=Object.create(null);return function(e){return n[e]||(n[e]=t(e))}}var w=/-(\w)/g,F=e(function(e){return e.replace(w,function(e,t){return t?t.toUpperCase():""})}),k=e(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),S=/\B([A-Z])/g,X=e(function(e){return e.replace(S,"-$1").toLowerCase()});var Z=Function.prototype.bind?function(e,t){return e.bind(t)}:function(n,i){function e(e){var t=arguments.length;return t?1<t?n.apply(i,arguments):n.call(i,e):n.call(i)}return e._length=n.length,e};function J(e,t){for(var n=e.length-(t=t||0),i=new Array(n);n--;)i[n]=e[n+t];return i}function x(e,t){for(var n in t)e[n]=t[n];return e}function Y(e){for(var t={},n=0;n<e.length;n++)e[n]&&x(t,e[n]);return t}function R(e,t,n){}function Q(e,t,n){return!1}var ee=function(e){return e};function te(t,n){if(t===n)return!0;var e=M(t),i=M(n);if(!e||!i)return!e&&!i&&String(t)===String(n);try{var r,o,a=Array.isArray(t),s=Array.isArray(n);return a&&s?t.length===n.length&&t.every(function(e,t){return te(e,n[t])}):t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!a&&!s&&(r=Object.keys(t),o=Object.keys(n),r.length===o.length)&&r.every(function(e){return te(t[e],n[e])})}catch(e){return!1}}function ne(e,t){for(var n=0;n<e.length;n++)if(te(e[n],t))return n;return-1}function ie(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var re="data-server-rendered",oe=["component","directive","filter"],t=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],D={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Q,isReservedAttr:Q,isUnknownElement:Q,getTagNamespace:R,parsePlatformTagName:ee,mustUseProp:Q,async:!0,_lifecycleHooks:t},ae=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function se(e){e=(e+"").charCodeAt(0);return 36===e||95===e}function le(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var ue=new RegExp("[^"+ae.source+".$_\\d]");var ce,de="__proto__"in{},i="undefined"!=typeof window,fe="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,pe=fe&&WXEnvironment.platform.toLowerCase(),n=i&&window.navigator.userAgent.toLowerCase(),he=n&&/msie|trident/.test(n),ge=n&&0<n.indexOf("msie 9.0"),ve=n&&0<n.indexOf("edge/"),ye=(n&&n.indexOf("android"),n&&/iphone|ipad|ipod|ios/.test(n)||"ios"===pe),pe=(n&&/chrome\/\d+/.test(n),n&&/phantomjs/.test(n),n&&n.match(/firefox\/(\d+)/)),me={}.watch,_e=!1;if(i)try{var o={};Object.defineProperty(o,"passive",{get:function(){_e=!0}}),window.addEventListener("test-passive",null,o)}catch(e){}var be=function(){return ce=void 0===ce?!i&&!fe&&void 0!==Ur&&Ur.process&&"server"===Ur.process.env.VUE_ENV:ce},we=i&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ke(e){return"function"==typeof e&&/native code/.test(e.toString())}var Se="undefined"!=typeof Symbol&&ke(Symbol)&&"undefined"!=typeof Reflect&&ke(Reflect.ownKeys),Fe="undefined"!=typeof Set&&ke(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}(),V=R,xe=R,Ce="undefined"!=typeof console,Ee=/(?:^|[-_])(\w)/g,V=function(e,t){var n=t?xe(t):"";D.warnHandler?D.warnHandler.call(null,e,t,n):Ce&&D.silent},Ie=function(e,t){Ce&&D.silent},Te=function(e,t){var n,i;return e.$root===e?"<Root>":(e="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e,i=e.name||e._componentTag,e=e.__file,((i=!i&&e?(n=e.match(/([^/\\]+)\.vue$/))&&n[1]:i)?"<"+i.replace(Ee,function(e){return e.toUpperCase()}).replace(/[-_]/g,"")+">":"<Anonymous>")+(e&&!1!==t?" at "+e:""))},xe=function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(0<t.length){var i=t[t.length-1];if(i.constructor===e.constructor){n++,e=e.$parent;continue}0<n&&(t[t.length-1]=[i,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(function(e,t){return""+(0===t?"---\x3e ":function(e,t){for(var n="";t;)t%2==1&&(n+=e),1<t&&(e+=e),t>>=1;return n}(" ",5+2*t))+(Array.isArray(e)?Te(e[0])+"... ("+e[1]+" recursive calls)":Te(e))}).join("\n")}return"\n\n(found in "+Te(e)+")"},Ae=0,c=function(){this.id=Ae++,this.subs=[]},Le=(c.prototype.addSub=function(e){this.subs.push(e)},c.prototype.removeSub=function(e){I(this.subs,e)},c.prototype.depend=function(){c.target&&c.target.addDep(this)},c.prototype.notify=function(){var e=this.subs.slice();D.async||e.sort(function(e,t){return e.id-t.id});for(var t=0,n=e.length;t<n;t++)e[t].update()},c.target=null,[]);function Oe(e){Le.push(e),c.target=e}function Pe(){Le.pop(),c.target=Le[Le.length-1]}var A=function(e,t,n,i,r,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},n={child:{configurable:!0}},$e=(n.child.get=function(){return this.componentInstance},Object.defineProperties(A.prototype,n),function(e){void 0===e&&(e="");var t=new A;return t.text=e,t.isComment=!0,t});function Me(e){return new A(void 0,void 0,void 0,String(e))}function je(e){var t=new A(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Re=Array.prototype,De=Object.create(Re),Ve=(["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(o){var a=Re[o];le(De,o,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,i=a.apply(this,e),r=this.__ob__;switch(o){case"push":case"unshift":n=e;break;case"splice":n=e.slice(2)}return n&&r.observeArray(n),r.dep.notify(),i})}),Object.getOwnPropertyNames(De)),Be=!0;function B(e){Be=e}var Ne=function(e){if(this.value=e,this.dep=new c,this.vmCount=0,le(e,"__ob__",this),Array.isArray(e)){if(de)e.__proto__=De;else for(var t=e,n=De,i=Ve,r=0,o=i.length;r<o;r++){var a=i[r];le(t,a,n[a])}this.observeArray(e)}else this.walk(e)};function Ue(e,t){var n;if(M(e)&&!(e instanceof A))return j(e,"__ob__")&&e.__ob__ instanceof Ne?n=e.__ob__:Be&&!be()&&(Array.isArray(e)||O(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ne(e)),t&&n&&n.vmCount++,n}function ze(n,e,i,r,o){var a,s,l,u=new c,t=Object.getOwnPropertyDescriptor(n,e);t&&!1===t.configurable||(a=t&&t.get,s=t&&t.set,a&&!s||2!==arguments.length||(i=n[e]),l=!o&&Ue(i),Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(n):i;return c.target&&(u.depend(),l)&&(l.dep.depend(),Array.isArray(e))&&function e(t){for(var n=void 0,i=0,r=t.length;i<r;i++)(n=t[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(e),e},set:function(e){var t=a?a.call(n):i;e===t||e!=e&&t!=t||(r&&r(),a&&!s)||(s?s.call(n,e):i=e,l=!o&&Ue(e),u.notify())}}))}function Ge(e,t,n){if((P(e)||d(e))&&V("Cannot set reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&y(t))e.length=Math.max(e.length,t),e.splice(t,1,n);else{if(t in e&&!(t in Object.prototype))return e[t]=n;var i=e.__ob__;if(e._isVue||i&&i.vmCount)V("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option.");else{if(!i)return e[t]=n;ze(i.value,t,n),i.dep.notify()}}return n}function qe(e,t){var n;(P(e)||d(e))&&V("Cannot delete reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&y(t)?e.splice(t,1):(n=e.__ob__,e._isVue||n&&n.vmCount?V("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):j(e,t)&&(delete e[t],n)&&n.dep.notify())}Ne.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)ze(e,t[n])},Ne.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ue(e[t])};var C=D.optionMergeStrategies;function He(e,t){if(t)for(var n,i,r,o=Se?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(i=e[n],r=t[n],j(e,n)?i!==r&&O(i)&&O(r)&&He(i,r):Ge(e,n,r));return e}function We(n,i,r){return r?function(){var e="function"==typeof i?i.call(r,r):i,t="function"==typeof n?n.call(r,r):n;return e?He(e,t):t}:i?n?function(){return He("function"==typeof i?i.call(this,this):i,"function"==typeof n?n.call(this,this):n)}:i:n}function Ke(e,t){t=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return t&&function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(t)}function Xe(e,t,n,i){e=Object.create(e||null);return t?(Ye(i,t,n),x(e,t)):e}C.el=C.propsData=function(e,t,n,i){return n||V('option "'+i+'" can only be used during instance creation with the `new` keyword.'),Ze(e,t)},C.data=function(e,t,n){return n?We(e,t,n):t&&"function"!=typeof t?(V('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):We(e,t)},t.forEach(function(e){C[e]=Ke}),oe.forEach(function(e){C[e+"s"]=Xe}),C.watch=function(e,t,n,i){if(e===me&&(e=void 0),!(t=t===me?void 0:t))return Object.create(e||null);if(Ye(i,t,n),!e)return t;var r,o={};for(r in x(o,e),t){var a=o[r],s=t[r];a&&!Array.isArray(a)&&(a=[a]),o[r]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},C.props=C.methods=C.inject=C.computed=function(e,t,n,i){return t&&Ye(i,t,n),e?(x(i=Object.create(null),e),t&&x(i,t),i):t},C.provide=We;var Ze=function(e,t){return void 0===t?e:t};function Je(e){new RegExp("^[a-zA-Z][\\-\\.0-9_"+ae.source+"]*$").test(e)||V('Invalid component name: "'+e+'". Component names should conform to valid custom element name in html5 specification.'),(_(e)||D.isReservedTag(e))&&V("Do not use built-in or reserved HTML elements as component id: "+e)}function Ye(e,t,n){O(t)||V('Invalid value for option "'+e+'": expected an Object, but got '+L(t)+".",n)}function Qe(n,i,r){for(var e in i.components)Je(e);var t=i="function"==typeof i?i.options:i,o=r,a=t.props;if(a){var s,l,u={};if(Array.isArray(a))for(s=a.length;s--;)"string"==typeof(l=a[s])?u[F(l)]={type:null}:V("props must be strings when using array syntax.");else if(O(a))for(var c in a)l=a[c],u[F(c)]=O(l)?l:{type:l};else V('Invalid value for option "props": expected an Array or an Object, but got '+L(a)+".",o);t.props=u}var o=i,t=r,d=o.inject;if(d){var f=o.inject={};if(Array.isArray(d))for(var p=0;p<d.length;p++)f[d[p]]={from:d[p]};else if(O(d))for(var h in d){var g=d[h];f[h]=O(g)?x({from:h},g):{from:g}}else V('Invalid value for option "inject": expected an Array or an Object, but got '+L(d)+".",t)}var v=i.directives;if(v)for(var y in v){var m=v[y];"function"==typeof m&&(v[y]={bind:m,update:m})}if(!i._base&&(i.extends&&(n=Qe(n,i.extends,r)),i.mixins))for(var _=0,b=i.mixins.length;_<b;_++)n=Qe(n,i.mixins[_],r);var w,k={};for(w in n)S(w);for(w in i)j(n,w)||S(w);function S(e){var t=C[e]||Ze;k[e]=t(n[e],i[e],r,e)}return k}function et(e,t,n,i){var r,o,a;if("string"==typeof n)return j(r=e[t],n)?r[n]:j(r,a=F(n))?r[a]:j(r,o=k(a))?r[o]:(a=r[n]||r[a]||r[o],i&&!a&&V("Failed to resolve "+t.slice(0,-1)+": "+n,e),a)}function tt(e,t,n,i){var t=t[e],r=!j(n,e),n=n[e],o=ot(Boolean,t.type),a=(-1<o&&(r&&!j(t,"default")?n=!1:""!==n&&n!==X(e)||!((a=ot(String,t.type))<0||o<a)||(n=!0)),void 0===n&&(n=function(e,t,n){if(!j(t,"default"))return;var i=t.default;M(i)&&V('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e);if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof i&&"Function"!==it(t.type)?i.call(e):i}(i,t,e),o=Be,B(!0),Ue(n),B(o)),t),o=e,s=n,t=i,e=r;if(a.required&&e)V('Missing required prop: "'+o+'"',t);else if(null!=s||a.required){var l=a.type,u=!l||!0===l,c=[];if(l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length&&!u;d++){var f=function(e,t){var n,i=it(t);{var r;nt.test(i)?(n=(r=typeof e)===i.toLowerCase())||"object"!=r||(n=e instanceof t):n="Object"===i?O(e):"Array"===i?Array.isArray(e):e instanceof t}return{valid:n,expectedType:i}}(s,l[d]);c.push(f.expectedType||""),u=f.valid}}u?(e=a.validator)&&!e(s)&&V('Invalid prop: custom validator check failed for prop "'+o+'".',t):V(function(e,t,n){var e='Invalid prop: type check failed for prop "'+e+'". Expected '+n.map(k).join(", "),i=n[0],r=L(t),o=at(t,i),t=at(t,r);1===n.length&&st(i)&&!function(){var e=[],t=arguments.length;for(;t--;)e[t]=arguments[t];return e.some(function(e){return"boolean"===e.toLowerCase()})}(i,r)&&(e+=" with value "+o);e+=", got "+r+" ",st(r)&&(e+="with value "+t+".");return e}(o,s,c),t)}return n}var nt=/^(String|Number|Boolean|Function|Symbol)$/;function it(e){e=e&&e.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function rt(e,t){return it(e)===it(t)}function ot(e,t){if(!Array.isArray(t))return rt(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(rt(t[n],e))return n;return-1}function at(e,t){return"String"===t?'"'+e+'"':"Number"===t?""+Number(e):""+e}function st(t){return["string","number","boolean"].some(function(e){return t.toLowerCase()===e})}function N(e,t,n){Oe();try{if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(i,e,t,n))return}catch(e){ut(e,i,"errorCaptured hook")}}ut(e,t,n)}finally{Pe()}}function lt(e,t,n,i,r){var o;try{(o=n?e.apply(t,n):e.call(t))&&!o._isVue&&H(o)&&!o._handled&&(o.catch(function(e){return N(e,i,r+" (Promise/async)")}),o._handled=!0)}catch(e){N(e,i,r)}return o}function ut(t,e,n){if(D.errorHandler)try{return D.errorHandler.call(null,t,e,n)}catch(e){e!==t&&ct(e,null,"config.errorHandler")}ct(t,e,n)}function ct(e,t,n){if(V("Error in "+n+': "'+e.toString()+'"',t),!i&&!fe||"undefined"==typeof console)throw e}var dt,ft,pt,ht,o=!1,gt=[],vt=!1;function yt(){vt=!1;for(var e=gt.slice(0),t=gt.length=0;t<e.length;t++)e[t]()}function mt(e,t){var n;if(gt.push(function(){if(e)try{e.call(t)}catch(e){N(e,t,"nextTick")}else n&&n(t)}),vt||(vt=!0,ft()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}"undefined"!=typeof Promise&&ke(Promise)?(dt=Promise.resolve(),ft=function(){dt.then(yt),ye&&setTimeout(R)},o=!0):he||"undefined"==typeof MutationObserver||!ke(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString()?ft=void 0!==zr&&ke(zr)?function(){zr(yt)}:function(){setTimeout(yt,0)}:(pt=1,n=new MutationObserver(yt),ht=document.createTextNode(String(pt)),n.observe(ht,{characterData:!0}),ft=function(){pt=(pt+1)%2,ht.data=String(pt)},o=!0);function _t(e,t){V('Property or method "'+t+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',e)}function bt(e,t){V('Property "'+t+'" must be accessed with "$data.'+t+'" because properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://vuejs.org/v2/api/#data',e)}var wt,p,kt,St=r("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),Ft="undefined"!=typeof Proxy&&ke(Proxy),xt=(Ft&&(wt=r("stop,prevent,self,ctrl,shift,alt,meta,exact"),D.keyCodes=new Proxy(D.keyCodes,{set:function(e,t,n){return wt(t)?(V("Avoid overwriting built-in modifier in config.keyCodes: ."+t),!1):(e[t]=n,!0)}})),{has:function(e,t){var n=t in e,i=St(t)||"string"==typeof t&&"_"===t.charAt(0)&&!(t in e.$data);return n||i||(t in e.$data?bt:_t)(e,t),n||!i}}),Ct={get:function(e,t){return"string"!=typeof t||t in e||(t in e.$data?bt:_t)(e,t),e[t]}},Et=function(e){var t;Ft?(t=(t=e.$options).render&&t.render._withStripped?Ct:xt,e._renderProxy=new Proxy(e,t)):e._renderProxy=e},It=new Fe;function Tt(e){!function e(t,n){var i,r;var o=Array.isArray(t);if(!o&&!M(t)||Object.isFrozen(t)||t instanceof A)return;if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(i=t.length;i--;)e(t[i],n);else for(r=Object.keys(t),i=r.length;i--;)e(t[r[i]],n)}(e,It),It.clear()}var a=i&&window.performance,At=(a&&a.mark&&a.measure&&a.clearMarks&&a.clearMeasures&&(p=function(e){return a.mark(e)},kt=function(e,t,n){a.measure(e,t,n),a.clearMarks(t),a.clearMarks(n)}),e(function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:n,capture:i,passive:t}}));function Lt(e,r){function o(){var e=arguments,t=o.fns;if(!Array.isArray(t))return lt(t,null,arguments,r,"v-on handler");for(var n=t.slice(),i=0;i<n.length;i++)lt(n[i],null,e,r,"v-on handler")}return o.fns=e,o}function Ot(e,t,n,i,r,o){var a,s,l,u;for(a in e)s=e[a],l=t[a],u=At(a),P(s)?V('Invalid handler for event "'+u.name+'": got '+String(s),o):P(l)?(P(s.fns)&&(s=e[a]=Lt(s,o)),T(u.once)&&(s=e[a]=r(u.name,s,u.capture)),n(u.name,s,u.capture,u.passive,u.params)):s!==l&&(l.fns=s,e[a]=l);for(a in t)P(e[a])&&i((u=At(a)).name,t[a],u.capture)}function U(e,t,n){var i,r=(e=e instanceof A?e.data.hook||(e.data.hook={}):e)[t];function o(){n.apply(this,arguments),I(i.fns,o)}P(r)?i=Lt([o]):$(r.fns)&&T(r.merged)?(i=r).fns.push(o):i=Lt([r,o]),i.merged=!0,e[t]=i}function Pt(e,t,n,i,r){if($(t)){if(j(t,n))return e[n]=t[n],r||delete t[n],1;if(j(t,i))return e[n]=t[i],r||delete t[i],1}}function $t(e){return d(e)?[Me(e)]:Array.isArray(e)?function e(t,n){var i=[];var r,o,a,s;for(r=0;r<t.length;r++)P(o=t[r])||"boolean"==typeof o||(a=i.length-1,s=i[a],Array.isArray(o)?0<o.length&&(Mt((o=e(o,(n||"")+"_"+r))[0])&&Mt(s)&&(i[a]=Me(s.text+o[0].text),o.shift()),i.push.apply(i,o)):d(o)?Mt(s)?i[a]=Me(s.text+o):""!==o&&i.push(Me(o)):Mt(o)&&Mt(s)?i[a]=Me(s.text+o.text):(T(t._isVList)&&$(o.tag)&&P(o.key)&&$(n)&&(o.key="__vlist"+n+"_"+r+"__"),i.push(o)));return i}(e):void 0}function Mt(e){return $(e)&&$(e.text)&&!1===e.isComment}function jt(e,t){if(e){for(var n=Object.create(null),i=Se?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){for(var a,s=e[o].from,l=t;l;){if(l._provided&&j(l._provided,s)){n[o]=l._provided[s];break}l=l.$parent}l||("default"in e[o]?(a=e[o].default,n[o]="function"==typeof a?a.call(t):a):V('Injection "'+o+'" not found',t))}}return n}}function Rt(e,t){if(!e||!e.length)return{};for(var n,i={},r=0,o=e.length;r<o;r++){var a=e[r],s=a.data;s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,a.context!==t&&a.fnContext!==t||!s||null==s.slot?(i.default||(i.default=[])).push(a):(s=i[s=s.slot]||(i[s]=[]),"template"===a.tag?s.push.apply(s,a.children||[]):s.push(a))}for(n in i)i[n].every(Dt)&&delete i[n];return i}function Dt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Vt(e,t,n){var i,r,o=0<Object.keys(t).length,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==E&&s===n.$key&&!o&&!n.$hasNormal)return n;for(var l in i={},e)e[l]&&"$"!==l[0]&&(i[l]=function(e,t,n){function i(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:$t(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e}n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0});return i}(t,l,e[l]))}else i={};for(r in t)r in i||(i[r]=function(e,t){return function(){return e[t]}}(t,r));return e&&Object.isExtensible(e)&&(e._normalized=i),le(i,"$stable",a),le(i,"$key",s),le(i,"$hasNormal",o),i}function Bt(e,t){var n,i,r,o;if(Array.isArray(e)||"string"==typeof e)for(a=new Array(e.length),n=0,i=e.length;n<i;n++)a[n]=t(e[n],n);else if("number"==typeof e)for(a=new Array(e),n=0;n<e;n++)a[n]=t(n+1,n);else if(M(e))if(Se&&e[Symbol.iterator])for(var a=[],s=e[Symbol.iterator](),l=s.next();!l.done;)a.push(t(l.value,a.length)),l=s.next();else for(r=Object.keys(e),a=new Array(r.length),n=0,i=r.length;n<i;n++)o=r[n],a[n]=t(e[o],o,n);return(a=$(a)?a:[])._isVList=!0,a}function Nt(e,t,n,i){var r=this.$scopedSlots[e],i=r?(n=n||{},i&&(M(i)||V("slot v-bind without argument expects an Object",this),n=x(x({},i),n)),r(n)||t):this.$slots[e]||t,r=n&&n.slot;return r?this.$createElement("template",{slot:r},i):i}function Ut(e){return et(this.$options,"filters",e,!0)||ee}function zt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Gt(e,t,n,i,r){n=D.keyCodes[t]||n;return r&&i&&!D.keyCodes[t]?zt(r,i):n?zt(n,e):i?X(i)!==t:void 0}function qt(i,r,o,a,s){if(o)if(M(o)){var l,e;for(e in o=Array.isArray(o)?Y(o):o)!function(t){l="class"===t||"style"===t||K(t)?i:(e=i.attrs&&i.attrs.type,a||D.mustUseProp(r,e,t)?i.domProps||(i.domProps={}):i.attrs||(i.attrs={}));var e=F(t),n=X(t);e in l||n in l||(l[t]=o[t],s&&((i.on||(i.on={}))["update:"+t]=function(e){o[t]=e}))}(e)}else V("v-bind without argument expects an Object or Array value",this);return i}function Ht(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||Kt(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i}function Wt(e,t,n){return Kt(e,"__once__"+t+(n?"_"+n:""),!0),e}function Kt(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&Xt(e[i],t+"_"+i,n);else Xt(e,t,n)}function Xt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Zt(e,t){if(t)if(O(t)){var n,i=e.on=e.on?x({},e.on):{};for(n in t){var r=i[n],o=t[n];i[n]=r?[].concat(r,o):o}}else V("v-on without argument expects an Object value",this);return e}function Jt(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?Jt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function Yt(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"==typeof i&&i?e[t[n]]=t[n+1]:""!==i&&null!==i&&V("Invalid value for dynamic directive argument (expected string or null): "+i,this)}return e}function Qt(e,t){return"string"==typeof e?t+e:e}function en(e){e._o=Wt,e._n=W,e._s=m,e._l=Bt,e._t=Nt,e._q=te,e._i=ne,e._m=Ht,e._f=Ut,e._k=Gt,e._b=qt,e._v=Me,e._e=$e,e._u=Jt,e._g=Zt,e._d=Yt,e._p=Qt}function tn(e,t,n,r,i){var o,a=this,s=i.options,i=(j(r,"_uid")?(o=Object.create(r))._original=r:r=(o=r)._original,T(s._compiled)),l=!i;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||E,this.injections=jt(s.inject,r),this.slots=function(){return a.$slots||Vt(e.scopedSlots,a.$slots=Rt(n,r)),a.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Vt(e.scopedSlots,this.slots())}}),i&&(this.$options=s,this.$slots=this.slots(),this.$scopedSlots=Vt(e.scopedSlots,this.$slots)),s._scopeId?this._c=function(e,t,n,i){e=cn(o,e,t,n,i,l);return e&&!Array.isArray(e)&&(e.fnScopeId=s._scopeId,e.fnContext=r),e}:this._c=function(e,t,n,i){return cn(o,e,t,n,i,l)}}function nn(e,t,n,i,r){e=je(e);return e.fnContext=n,e.fnOptions=i,(e.devtoolsMeta=e.devtoolsMeta||{}).renderContext=r,t.slot&&((e.data||(e.data={})).slot=t.slot),e}function rn(e,t){for(var n in t)e[F(n)]=t[n]}en(tn.prototype);var on={init:function(e,t){e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive?on.prepatch(e,e):(e.componentInstance=function(e,t){var t={_isComponent:!0,_parentVnode:e,parent:t},n=e.data.inlineTemplate;$(n)&&(t.render=n.render,t.staticRenderFns=n.staticRenderFns);return new e.componentOptions.Ctor(t)}(e,bn)).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance,r=n.propsData,e=n.listeners,n=n.children,o=(wn=!0,t.data.scopedSlots),a=i.$scopedSlots,a=!!(o&&!o.$stable||a!==E&&!a.$stable||o&&i.$scopedSlots.$key!==o.$key),o=!!(n||i.$options._renderChildren||a);if(i.$options._parentVnode=t,i.$vnode=t,i._vnode&&(i._vnode.parent=t),i.$options._renderChildren=n,i.$attrs=t.data.attrs||E,i.$listeners=e||E,r&&i.$options.props){B(!1);for(var s=i._props,l=i.$options._propKeys||[],u=0;u<l.length;u++){var c=l[u],d=i.$options.props;s[c]=tt(c,d,r,i)}B(!0),i.$options.propsData=r}e=e||E,a=i.$options._parentListeners,i.$options._parentListeners=e,_n(i,e,a),o&&(i.$slots=Rt(n,t.context),i.$forceUpdate()),wn=!1},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,h(n,"mounted")),e.data.keepAlive&&(t._isMounted?((e=n)._inactive=!1,Cn.push(e)):Fn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(n&&(t._directInactive=!0,Sn(t)))return;if(!t._inactive){t._inactive=!0;for(var i=0;i<t.$children.length;i++)e(t.$children[i]);h(t,"deactivated")}}(t,!0):t.$destroy())}},an=Object.keys(on);function sn(e,t,n,i,r){if(!P(e)){var o,a,s,l=n.$options._base;if("function"!=typeof(e=M(e)?l.extend(e):e))V("Invalid Component definition: "+String(e),n);else{if(P(e.cid)&&void 0===(e=function(t,n){if(T(t.error)&&$(t.errorComp))return t.errorComp;if($(t.resolved))return t.resolved;var e=fn;e&&$(t.owners)&&-1===t.owners.indexOf(e)&&t.owners.push(e);if(T(t.loading)&&$(t.loadingComp))return t.loadingComp;{var i,r,o,a,s,l,u,c;if(e&&!$(t.owners))return i=t.owners=[e],r=!0,a=o=null,e.$on("hook:destroyed",function(){return I(i,e)}),s=function(e){for(var t=0,n=i.length;t<n;t++)i[t].$forceUpdate();e&&(i.length=0,null!==o&&(clearTimeout(o),o=null),null!==a)&&(clearTimeout(a),a=null)},l=ie(function(e){t.resolved=pn(e,n),r?i.length=0:s(!0)}),u=ie(function(e){V("Failed to resolve async component: "+String(t)+(e?"\nReason: "+e:"")),$(t.errorComp)&&(t.error=!0,s(!0))}),M(c=t(l,u))&&(H(c)?P(t.resolved)&&c.then(l,u):H(c.component)&&(c.component.then(l,u),$(c.error)&&(t.errorComp=pn(c.error,n)),$(c.loading)&&(t.loadingComp=pn(c.loading,n),0===c.delay?t.loading=!0:o=setTimeout(function(){o=null,P(t.resolved)&&P(t.error)&&(t.loading=!0,s(!1))},c.delay||200)),$(c.timeout))&&(a=setTimeout(function(){a=null,P(t.resolved)&&u("timeout ("+c.timeout+"ms)")},c.timeout))),r=!1,t.loading?t.loadingComp:t.resolved}}(m=e,l)))return l=m,o=t,a=n,s=i,u=r,(c=$e()).asyncFactory=l,c.asyncMeta={data:o,context:a,children:s,tag:u},c;t=t||{},Hn(e),$(t.model)&&(l=e.options,o=t,a=l.model&&l.model.prop||"value",l=l.model&&l.model.event||"input",(o.attrs||(o.attrs={}))[a]=o.model.value,a=o.on||(o.on={}),s=a[l],o=o.model.callback,$(s)?(Array.isArray(s)?-1===s.indexOf(o):s!==o)&&(a[l]=[o].concat(s)):a[l]=o);var u=function(e,t,n){var i=t.options.props;if(!P(i)){var r={},o=e.attrs,a=e.props;if($(o)||$(a))for(var s in i){var l=X(s),u=s.toLowerCase();s!==u&&o&&j(o,u)&&Ie(Te(n||t)),Pt(r,a,s,l,!0)||Pt(r,o,s,l,!1)}return r}}(t,e,r);if(!T(e.options.functional)){for(var c=t.on,l=(t.on=t.nativeOn,T(e.options.abstract)&&(l=t.slot,t={},l)&&(t.slot=l),t),d=l.hook||(l.hook={}),f=0;f<an.length;f++){var p=an[f],h=d[p],g=on[p];h===g||h&&h._merged||(d[p]=h?function(n,i){function e(e,t){n(e,t),i(e,t)}return e._merged=!0,e}(g,h):g)}l=e.options.name||r;return new A("vue-component-"+e.cid+(l?"-"+l:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:u,listeners:c,tag:r,children:i},m)}var l=e,v=u,y=t,r=n,m=i,_=l.options,b={},w=_.props;if($(w))for(var k in w)b[k]=tt(k,w,v||E);else $(y.attrs)&&rn(b,y.attrs),$(y.props)&&rn(b,y.props);var S=new tn(y,b,m,r,l);if((m=_.render.call(null,S._c,S))instanceof A)return nn(m,y,S.parent,_,S);if(Array.isArray(m)){for(var F=$t(m)||[],x=new Array(F.length),C=0;C<F.length;C++)x[C]=nn(F[C],y,S.parent,_,S);return x}}}}var ln=1,un=2;function cn(e,t,n,i,r,o){(Array.isArray(n)||d(n))&&(r=i,i=n,n=void 0),T(o)&&(r=un);var a,o=e,e=t,t=n,n=i,i=r;if($(t)&&$(t.__ob__))return V("Avoid using observed data object as vnode data: "+JSON.stringify(t)+"\nAlways create fresh vnode data objects in each render!",o),$e();if(!(e=$(t)&&$(t.is)?t.is:e))return $e();return($(t)&&$(t.key)&&!d(t.key)&&V("Avoid using non-primitive value as key, use string/number value instead.",o),Array.isArray(n)&&"function"==typeof n[0]&&((t=t||{}).scopedSlots={default:n[0]},n.length=0),i===un?n=$t(n):i===ln&&(n=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(n)),i="string"==typeof e?(a=o.$vnode&&o.$vnode.ns||D.getTagNamespace(e),D.isReservedTag(e)?($(t)&&$(t.nativeOn)&&V("The .native modifier for v-on is only valid on components but it was used on <"+e+">.",o),new A(D.parsePlatformTagName(e),t,n,void 0,void 0,o)):t&&t.pre||!$(i=et(o.$options,"components",e))?new A(e,t,n,void 0,void 0,o):sn(i,t,o,n,e)):sn(e,t,o,n),Array.isArray(i))?i:$(i)?($(a)&&function e(t,n,i){t.ns=n;"foreignObject"===t.tag&&(i=!(n=void 0));if($(t.children))for(var r=0,o=t.children.length;r<o;r++){var a=t.children[r];$(a.tag)&&(P(a.ns)||T(i)&&"svg"!==a.tag)&&e(a,n,i)}}(i,a),$(t)&&(M((r=t).style)&&Tt(r.style),M(r.class))&&Tt(r.class),i):$e()}var dn,fn=null;function pn(e,t){return M(e=e.__esModule||Se&&"Module"===e[Symbol.toStringTag]?e.default:e)?t.extend(e):e}function hn(e){return e.isComment&&e.asyncFactory}function gn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if($(n)&&($(n.componentOptions)||hn(n)))return n}}function vn(e,t){dn.$on(e,t)}function yn(e,t){dn.$off(e,t)}function mn(t,n){var i=dn;return function e(){null!==n.apply(null,arguments)&&i.$off(t,e)}}function _n(e,t,n){Ot(t,n||{},vn,yn,mn,dn=e),dn=void 0}var bn=null,wn=!1;function kn(e){var t=bn;return bn=e,function(){bn=t}}function Sn(e){for(;e=e&&e.$parent;)if(e._inactive)return!0;return!1}function Fn(e,t){if(t){if(e._directInactive=!1,Sn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Fn(e.$children[n]);h(e,"activated")}}function h(e,t){Oe();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,o=n.length;r<o;r++)lt(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),Pe()}var xn=100,f=[],Cn=[],En={},In={},Tn=!1,An=!1,Ln=0;var On,Pn=0,$n=Date.now;function Mn(){var e,t;for(Pn=$n(),An=!0,f.sort(function(e,t){return e.id-t.id}),Ln=0;Ln<f.length;Ln++)if((e=f[Ln]).before&&e.before(),t=e.id,En[t]=null,e.run(),null!=En[t]&&(In[t]=(In[t]||0)+1,In[t]>xn)){V("You may have an infinite update loop "+(e.user?'in watcher with expression "'+e.expression+'"':"in a component render function."),e.vm);break}for(var n=Cn.slice(),i=f.slice(),r=(Ln=f.length=Cn.length=0,En={},Tn=An=!(In={}),n),o=0;o<r.length;o++)r[o]._inactive=!0,Fn(r[o],!0);for(var a=i,s=a.length;s--;){var l=a[s],u=l.vm;u._watcher===l&&u._isMounted&&!u._isDestroyed&&h(u,"updated")}we&&D.devtools&&we.emit("flush")}i&&!he&&(On=window.performance)&&"function"==typeof On.now&&$n()>document.createEvent("Event").timeStamp&&($n=function(){return On.now()});function z(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++jn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Fe,this.newDepIds=new Fe,this.expression=t.toString(),"function"==typeof t?this.getter=t:(this.getter=function(e){var n;if(!ue.test(e))return n=e.split("."),function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}(t),this.getter||(this.getter=R,V('Failed watching path: "'+t+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',e))),this.value=this.lazy?void 0:this.get()}var jn=0,s=(z.prototype.get=function(){Oe(this);var e,t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;N(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Tt(e),Pe(),this.cleanupDeps()}return e},z.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t))||e.addSub(this)},z.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},z.prototype.update=function(){if(this.lazy)this.dirty=!0;else if(this.sync)this.run();else{var e=this,t=e.id;if(null==En[t]){if(En[t]=!0,An){for(var n=f.length-1;Ln<n&&f[n].id>e.id;)n--;f.splice(n+1,0,e)}else f.push(e);Tn||(Tn=!0,D.async?mt(Mn):Mn())}}},z.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||M(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){N(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},z.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},z.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},z.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||I(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}},{enumerable:!0,configurable:!0,get:R,set:R});function Rn(e,t,n){s.get=function(){return this[t][n]},s.set=function(e){this[t][n]=e},Object.defineProperty(e,n,s)}function Dn(e){e._watchers=[];var t=e.$options;if(t.props){var n,i=e,r=t.props,o=i.$options.propsData||{},a=i._props={},s=i.$options._propKeys=[],l=!i.$parent;for(n in l||B(!1),r)!function(e){s.push(e);var t=tt(e,r,o,i),n=X(e);(K(n)||D.isReservedAttr(n))&&V('"'+n+'" is a reserved attribute and cannot be used as component prop.',i),ze(a,e,t,function(){l||wn||V("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+e+'"',i)}),e in i||Rn(i,"_props",e)}(n);B(!0)}if(t.methods){var u,c=e,d=t.methods,f=c.$options.props;for(u in d)"function"!=typeof d[u]&&V('Method "'+u+'" has type "'+typeof d[u]+'" in the component definition. Did you reference the function correctly?',c),f&&j(f,u)&&V('Method "'+u+'" has already been defined as a prop.',c),u in c&&se(u)&&V('Method "'+u+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),c[u]="function"!=typeof d[u]?R:Z(d[u],c)}if(t.data){for(var p=e,h=p.$options.data,g=(O(h=p._data="function"==typeof h?function(e,t){Oe();try{return e.call(t,t)}catch(e){return N(e,t,"data()"),{}}finally{Pe()}}(h,p):h||{})||(h={},V("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",p)),Object.keys(h)),v=p.$options.props,y=p.$options.methods,m=g.length;m--;){var _=g[m];y&&j(y,_)&&V('Method "'+_+'" has already been defined as a data property.',p),v&&j(v,_)?V('The data property "'+_+'" is already declared as a prop. Use prop default value instead.',p):se(_)||Rn(p,"_data",_)}Ue(h,!0)}else Ue(e._data={},!0);if(t.computed){var b,w=e,k=t.computed,S=w._computedWatchers=Object.create(null),F=be();for(b in k){var x=k[b],C="function"==typeof x?x:x.get;null==C&&V('Getter is missing for computed property "'+b+'".',w),F||(S[b]=new z(w,C||R,R,Vn)),b in w?b in w.$data?V('The computed property "'+b+'" is already defined in data.',w):w.$options.props&&b in w.$options.props&&V('The computed property "'+b+'" is already defined as a prop.',w):Bn(w,b,x)}}if(t.watch&&t.watch!==me){var E,I=e,T=t.watch;for(E in T){var A=T[E];if(Array.isArray(A))for(var L=0;L<A.length;L++)zn(I,E,A[L]);else zn(I,E,A)}}}var Vn={lazy:!0};function Bn(e,t,n){var i=!be();"function"==typeof n?(s.get=i?Nn(t):Un(n),s.set=R):(s.get=n.get?i&&!1!==n.cache?Nn(t):Un(n.get):R,s.set=n.set||R),s.set===R&&(s.set=function(){V('Computed property "'+t+'" was assigned to but it has no setter.',this)}),Object.defineProperty(e,t,s)}function Nn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),c.target&&e.depend(),e.value}}function Un(e){return function(){return e.call(this,this)}}function zn(e,t,n,i){return"string"==typeof(n=O(n)?(i=n).handler:n)&&(n=e[n]),e.$watch(t,n,i)}var Gn,qn=0;function Hn(e){var t,n,i=e.options;return e.super&&(t=Hn(e.super))!==e.superOptions&&(e.superOptions=t,(n=function(e){var t,n,i=e.options,r=e.sealedOptions;for(n in i)i[n]!==r[n]&&((t=t||{})[n]=i[n]);return t}(e))&&x(e.extendOptions,n),(i=e.options=Qe(t,e.extendOptions)).name)&&(i.components[i.name]=e),i}function l(e){this instanceof l||V("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function Wn(e){e.cid=0;var d=1;e.extend=function(e){var t=this,n=t.cid,i=(e=e||{})._Ctor||(e._Ctor={});if(i[n])return i[n];function r(e){this._init(e)}var o=e.name||t.options.name;o&&Je(o);if(((r.prototype=Object.create(t.prototype)).constructor=r).cid=d++,r.options=Qe(t.options,e),r.super=t,r.options.props){var a,s=r;for(a in s.options.props)Rn(s.prototype,"_props",a)}if(r.options.computed){var l,u=r,c=u.options.computed;for(l in c)Bn(u.prototype,l,c[l])}return r.extend=t.extend,r.mixin=t.mixin,r.use=t.use,oe.forEach(function(e){r[e]=t[e]}),o&&(r.options.components[o]=r),r.superOptions=t.options,r.extendOptions=e,r.sealedOptions=x({},r.options),i[n]=r}}function Kn(e){return e&&(e.Ctor.options.name||e.tag)}function Xn(e,t){return Array.isArray(e)?-1<e.indexOf(t):"string"==typeof e?-1<e.split(",").indexOf(t):!!q(e)&&e.test(t)}function Zn(e,t){var n,i=e.cache,r=e.keys,o=e._vnode;for(n in i){var a=i[n];a&&(a=Kn(a.componentOptions))&&!t(a)&&Jn(i,n,r,o)}}function Jn(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,I(n,t)}l.prototype._init=function(e){var t,n,i,r,o,a,s,l,u=this,c=(u._uid=qn++,D.performance&&p&&(t="vue-perf-start:"+u._uid,n="vue-perf-end:"+u._uid,p(t)),u._isVue=!0,e&&e._isComponent?(i=e,d=(d=u).$options=Object.create(d.constructor.options),c=i._parentVnode,d.parent=i.parent,c=(d._parentVnode=c).componentOptions,d.propsData=c.propsData,d._parentListeners=c.listeners,d._renderChildren=c.children,d._componentTag=c.tag,i.render&&(d.render=i.render,d.staticRenderFns=i.staticRenderFns)):u.$options=Qe(Hn(u.constructor),e||{},u),Et(u),u._self=u),d=c.$options,f=d.parent;if(f&&!d.abstract){for(;f.$options.abstract&&f.$parent;)f=f.$parent;f.$children.push(c)}c.$parent=f,c.$root=f?f.$root:c,c.$children=[],c.$refs={},c._watcher=null,c._inactive=null,c._directInactive=!1,c._isMounted=!1,c._isDestroyed=!1,c._isBeingDestroyed=!1,(i=u)._events=Object.create(null),i._hasHookEvent=!1,(e=i.$options._parentListeners)&&_n(i,e),(r=u)._vnode=null,r._staticTrees=null,e=r.$options,s=r.$vnode=e._parentVnode,l=s&&s.context,r.$slots=Rt(e._renderChildren,l),r.$scopedSlots=E,r._c=function(e,t,n,i){return cn(r,e,t,n,i,!1)},r.$createElement=function(e,t,n,i){return cn(r,e,t,n,i,!0)},l=s&&s.data,ze(r,"$attrs",l&&l.attrs||E,function(){wn||V("$attrs is readonly.",r)},!0),ze(r,"$listeners",e._parentListeners||E,function(){wn||V("$listeners is readonly.",r)},!0),h(u,"beforeCreate"),(a=jt((o=u).$options.inject,o))&&(B(!1),Object.keys(a).forEach(function(e){ze(o,e,a[e],function(){V('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+e+'"',o)})}),B(!0)),Dn(u),(l=(s=u).$options.provide)&&(s._provided="function"==typeof l?l.call(s):l),h(u,"created"),D.performance&&p&&(u._name=Te(u,!1),p(n),kt("vue "+u._name+" init",t,n)),u.$options.el&&u.$mount(u.$options.el)},t=l,n={get:function(){return this._data},set:function(){V("Avoid replacing instance root $data. Use nested data properties instead.",this)}},g={get:function(){return this._props},set:function(){V("$props is readonly.",this)}},Object.defineProperty(t.prototype,"$data",n),Object.defineProperty(t.prototype,"$props",g),t.prototype.$set=Ge,t.prototype.$delete=qe,t.prototype.$watch=function(e,t,n){if(O(t))return zn(this,e,t,n);(n=n||{}).user=!0;var i=new z(this,e,t,n);if(n.immediate)try{t.call(this,i.value)}catch(e){N(e,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}},Gn=/^hook:/,(n=l).prototype.$on=function(e,t){var n=this;if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n.$on(e[i],t);else(n._events[e]||(n._events[e]=[])).push(t),Gn.test(e)&&(n._hasHookEvent=!0);return n},n.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},n.prototype.$off=function(e,t){var n=this;if(arguments.length)if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);else{var o=n._events[e];if(o)if(t){for(var a,s=o.length;s--;)if((a=o[s])===t||a.fn===t){o.splice(s,1);break}}else n._events[e]=null}else n._events=Object.create(null);return n},n.prototype.$emit=function(e){var t=this,n=e.toLowerCase();if(n!==e&&t._events[n]&&Ie((Te(t),X(e))),i=t._events[e])for(var i=1<i.length?J(i):i,r=J(arguments,1),o='event handler for "'+e+'"',a=0,s=i.length;a<s;a++)lt(i[a],t,r,t,o);return t},(g=l).prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,o=kn(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},g.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},g.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){h(e,"beforeDestroy"),e._isBeingDestroyed=!0;for(var t=e.$parent,n=(!t||t._isBeingDestroyed||e.$options.abstract||I(t.$children,e),e._watcher&&e._watcher.teardown(),e._watchers.length);n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),h(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}},en((t=l).prototype),t.prototype.$nextTick=function(e){return mt(e,this)},t.prototype._render=function(){var t,n=this,e=n.$options,i=e.render,e=e._parentVnode;e&&(n.$scopedSlots=Vt(e.data.scopedSlots,n.$slots,n.$scopedSlots)),n.$vnode=e;try{fn=n,t=i.call(n._renderProxy,n.$createElement)}catch(e){if(N(e,n,"render"),n.$options.renderError)try{t=n.$options.renderError.call(n._renderProxy,n.$createElement,e)}catch(e){N(e,n,"renderError"),t=n._vnode}else t=n._vnode}finally{fn=null}return(t=Array.isArray(t)&&1===t.length?t[0]:t)instanceof A||(Array.isArray(t)&&V("Multiple root nodes returned from render function. Render function should return a single root node.",n),t=$e()),t.parent=e,t};var u,Yn,n=[String,RegExp,Array],g={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:n,exclude:n,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Jn(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){Zn(e,function(e){return Xn(t,e)})}),this.$watch("exclude",function(t){Zn(e,function(e){return!Xn(t,e)})})},render:function(){var e=this.$slots.default,t=gn(e),n=t&&t.componentOptions;if(n){var i=Kn(n),r=this.include,o=this.exclude;if(r&&(!i||!Xn(r,i))||o&&i&&Xn(o,i))return t;r=this.cache,o=this.keys,i=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;r[i]?(t.componentInstance=r[i].componentInstance,I(o,i),o.push(i)):(r[i]=t,o.push(i),this.max&&o.length>parseInt(this.max)&&Jn(r,o[0],o,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};u=l,t={get:function(){return D},set:function(){V("Do not replace the Vue.config object, set individual fields instead.")}},Object.defineProperty(u,"config",t),u.util={warn:V,extend:x,mergeOptions:Qe,defineReactive:ze},u.set=Ge,u.delete=qe,u.nextTick=mt,u.observable=function(e){return Ue(e),e},u.options=Object.create(null),oe.forEach(function(e){u.options[e+"s"]=Object.create(null)}),x((u.options._base=u).options.components,g),u.use=function(e){var t,n=this._installedPlugins||(this._installedPlugins=[]);return-1<n.indexOf(e)||((t=J(arguments,1)).unshift(this),"function"==typeof e.install?e.install.apply(e,t):"function"==typeof e&&e.apply(null,t),n.push(e)),this},u.mixin=function(e){return this.options=Qe(this.options,e),this},Wn(u),Yn=u,oe.forEach(function(n){Yn[n]=function(e,t){return t?("component"===n&&Je(e),"component"===n&&O(t)&&(t.name=t.name||e,t=this.options._base.extend(t)),this.options[n+"s"][e]=t="directive"===n&&"function"==typeof t?{bind:t,update:t}:t):this.options[n+"s"][e]}}),Object.defineProperty(l.prototype,"$isServer",{get:be}),Object.defineProperty(l.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(l,"FunctionalRenderContext",{value:tn}),l.version="2.6.12";var n=r("style,class"),Qn=r("input,textarea,option,select,progress"),ei=r("contenteditable,draggable,spellcheck"),ti=r("events,caret,typing,plaintext-only"),ni=function(e,t){return si(t)||"false"===t?"false":"contenteditable"===e&&ti(t)?t:"true"},ii=r("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),ri="http://www.w3.org/1999/xlink",oi=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},ai=function(e){return oi(e)?e.slice(6,e.length):""},si=function(e){return null==e||!1===e};function li(e){for(var t=e.data,n=e,i=e;$(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(t=ui(i.data,t));for(;$(n=n.parent);)n&&n.data&&(t=ui(t,n.data));var e=t.staticClass,r=t.class;return $(e)||$(r)?ci(e,di(r)):""}function ui(e,t){return{staticClass:ci(e.staticClass,t.staticClass),class:$(e.class)?[e.class,t.class]:t.class}}function ci(e,t){return e?t?e+" "+t:e:t||""}function di(e){if(Array.isArray(e)){for(var t,n=e,i="",r=0,o=n.length;r<o;r++)$(t=di(n[r]))&&""!==t&&(i&&(i+=" "),i+=t);return i}if(M(e)){var a,s=e,l="";for(a in s)s[a]&&(l&&(l+=" "),l+=a);return l}return"string"==typeof e?e:""}function fi(e){return hi(e)||gi(e)}var pi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},hi=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),gi=r("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0);var vi=Object.create(null);var yi=r("text,number,password,search,email,tel,url");t=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"===e&&t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(pi[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),g={create:function(e,t){mi(t)},update:function(e,t){e.data.ref!==t.data.ref&&(mi(e,!0),mi(t))},destroy:function(e){mi(e,!0)}};function mi(e,t){var n,i,r=e.data.ref;$(r)&&(i=e.context,n=e.componentInstance||e.elm,i=i.$refs,t?Array.isArray(i[r])?I(i[r],n):i[r]===n&&(i[r]=void 0):e.data.refInFor?Array.isArray(i[r])?i[r].indexOf(n)<0&&i[r].push(n):i[r]=[n]:i[r]=n)}var _i=new A("",{},[]),bi=["create","activate","update","remove","destroy"];function wi(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&$(e.data)===$(t.data)&&function(e,t){if("input"!==e.tag)return 1;var n=$(e=e.data)&&$(e=e.attrs)&&e.type,t=$(e=t.data)&&$(e=e.attrs)&&e.type;return n===t||yi(n)&&yi(t)}(e,t)||T(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&P(t.asyncFactory.error))}var ki={create:Si,update:Si,destroy:function(e){Si(e,_i)}};function Si(e,t){if(e.data.directives||t.data.directives){var n,i,r,o=e,a=t,e=o===_i,s=a===_i,l=xi(o.data.directives,o.context),u=xi(a.data.directives,a.context),c=[],d=[];for(n in u)i=l[n],r=u[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Ci(r,"update",a,o),r.def&&r.def.componentUpdated&&d.push(r)):(Ci(r,"bind",a,o),r.def&&r.def.inserted&&c.push(r));if(c.length&&(t=function(){for(var e=0;e<c.length;e++)Ci(c[e],"inserted",a,o)},e?U(a,"insert",t):t()),d.length&&U(a,"postpatch",function(){for(var e=0;e<d.length;e++)Ci(d[e],"componentUpdated",a,o)}),!e)for(n in l)u[n]||Ci(l[n],"unbind",o,o,s)}}var Fi=Object.create(null);function xi(e,t){var n=Object.create(null);if(e)for(var i,r,o=0;o<e.length;o++)(i=e[o]).modifiers||(i.modifiers=Fi),(n[(r=i).rawName||r.name+"."+Object.keys(r.modifiers||{}).join(".")]=i).def=et(t.$options,"directives",i.name,!0);return n}function Ci(t,n,i,e,r){var o=t.def&&t.def[n];if(o)try{o(i.elm,t,i,e,r)}catch(e){N(e,i.context,"directive "+t.name+" "+n+" hook")}}g=[g,ki];function Ei(e,t){var n=t.componentOptions;if(!($(n)&&!1===n.Ctor.options.inheritAttrs||P(e.data.attrs)&&P(t.data.attrs))){var i,r,o=t.elm,a=e.data.attrs||{},s=t.data.attrs||{};for(i in s=$(s.__ob__)?t.data.attrs=x({},s):s)r=s[i],a[i]!==r&&Ii(o,i,r);for(i in(he||ve)&&s.value!==a.value&&Ii(o,"value",s.value),a)P(s[i])&&(oi(i)?o.removeAttributeNS(ri,ai(i)):ei(i)||o.removeAttribute(i))}}function Ii(e,t,n){-1<e.tagName.indexOf("-")?Ti(e,t,n):ii(t)?si(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):ei(t)?e.setAttribute(t,ni(t,n)):oi(t)?si(n)?e.removeAttributeNS(ri,ai(t)):e.setAttributeNS(ri,t,n):Ti(e,t,n)}function Ti(t,e,n){var i;si(n)?t.removeAttribute(e):(!he||ge||"TEXTAREA"!==t.tagName||"placeholder"!==e||""===n||t.__ieph||(t.addEventListener("input",i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)}),t.__ieph=!0),t.setAttribute(e,n))}ki={create:Ei,update:Ei};function Ai(e,t){var n=t.elm,i=t.data,e=e.data;P(i.staticClass)&&P(i.class)&&(P(e)||P(e.staticClass)&&P(e.class))||(i=li(t),(i=$(e=n._transitionClasses)?ci(i,di(e)):i)!==n._prevClass&&(n.setAttribute("class",i),n._prevClass=i))}var Li,Oi={create:Ai,update:Ai},Pi="__r",$i="__c";function Mi(t,n,i){var r=Li;return function e(){null!==n.apply(null,arguments)&&Di(t,e,i,r)}}var ji=o&&!(pe&&Number(pe[1])<=53);function Ri(e,t,n,i){var r,o;ji&&(r=Pn,t=(o=t)._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}),Li.addEventListener(e,t,_e?{capture:n,passive:i}:n)}function Di(e,t,n,i){(i||Li).removeEventListener(e,t._wrapper||t,n)}function Vi(e,t){var n,i,r;P(e.data.on)&&P(t.data.on)||(n=t.data.on||{},e=e.data.on||{},Li=t.elm,$((i=n)[Pi])&&(i[r=he?"change":"input"]=[].concat(i[Pi],i[r]||[]),delete i[Pi]),$(i[$i])&&(i.change=[].concat(i[$i],i.change||[]),delete i[$i]),Ot(n,e,Ri,Di,Mi,t.context),Li=void 0)}var Bi,o={create:Vi,update:Vi};function Ni(e,t){if(!P(e.data.domProps)||!P(t.data.domProps)){var n,i,r,o,a=t.elm,s=e.data.domProps||{},l=t.data.domProps||{};for(n in $(l.__ob__)&&(l=t.data.domProps=x({},l)),s)n in l||(a[n]="");for(n in l){if(i=l[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),i===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){var u=P(a._value=i)?"":String(i);o=u,(r=a).composing||"OPTION"!==r.tagName&&!function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(r,o)&&!function(e,t){var n=e.value,e=e._vModifiers;if($(e)){if(e.number)return W(n)!==W(t);if(e.trim)return n.trim()!==t.trim()}return n!==t}(r,o)||(a.value=u)}else if("innerHTML"===n&&gi(a.tagName)&&P(a.innerHTML)){(Bi=Bi||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var c=Bi.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}else if(i!==s[n])try{a[n]=i}catch(e){}}}}var pe={create:Ni,update:Ni},Ui=e(function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){e&&1<(e=e.split(n)).length&&(t[e[0].trim()]=e[1].trim())}),t});function zi(e){var t=Gi(e.style);return e.staticStyle?x(e.staticStyle,t):t}function Gi(e){return Array.isArray(e)?Y(e):"string"==typeof e?Ui(e):e}function qi(e,t,n){if(Wi.test(t))e.style.setProperty(t,n);else if(Ki.test(n))e.style.setProperty(X(t),n.replace(Ki,""),"important");else{var i=Zi(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)e.style[i]=n[r];else e.style[i]=n}}var Hi,Wi=/^--/,Ki=/\s*!important$/,Xi=["Webkit","Moz","ms"],Zi=e(function(e){if(Hi=Hi||document.createElement("div").style,"filter"!==(e=F(e))&&e in Hi)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Xi.length;n++){var i=Xi[n]+t;if(i in Hi)return i}});function Ji(e,t){var n=t.data,e=e.data;if(!(P(n.staticStyle)&&P(n.style)&&P(e.staticStyle)&&P(e.style))){var i,r,o=t.elm,n=e.staticStyle,e=e.normalizedStyle||e.style||{},a=n||e,n=Gi(t.data.style)||{},s=(t.data.normalizedStyle=$(n.__ob__)?x({},n):n,function(e,t){var n,i={};if(t)for(var r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=zi(r.data))&&x(i,n);(n=zi(e.data))&&x(i,n);for(var o=e;o=o.parent;)o.data&&(n=zi(o.data))&&x(i,n);return i}(t,!0));for(r in a)P(s[r])&&qi(o,r,"");for(r in s)(i=s[r])!==a[r]&&qi(o,r,null==i?"":i)}}var Yi={create:Ji,update:Ji},Qi=/\s+/;function er(t,e){var n;(e=e&&e.trim())&&(t.classList?-1<e.indexOf(" ")?e.split(Qi).forEach(function(e){return t.classList.add(e)}):t.classList.add(e):(n=" "+(t.getAttribute("class")||"")+" ").indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim()))}function tr(t,e){if(e&&(e=e.trim()))if(t.classList)-1<e.indexOf(" ")?e.split(Qi).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";0<=n.indexOf(i);)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function nr(e){var t;if(e)return"object"==typeof e?(!(t={})!==e.css&&x(t,ir(e.name||"v")),x(t,e),t):"string"==typeof e?ir(e):void 0}var ir=e(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),rr=i&&!ge,or="transition",ar="animation",sr="transition",lr="transitionend",ur="animation",cr="animationend",dr=(rr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(sr="WebkitTransition",lr="webkitTransitionEnd"),void 0===window.onanimationend)&&void 0!==window.onwebkitanimationend&&(ur="WebkitAnimation",cr="webkitAnimationEnd"),i?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()});function fr(e){dr(function(){dr(e)})}function pr(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),er(e,t))}function G(e,t){e._transitionClasses&&I(e._transitionClasses,t),tr(e,t)}function hr(t,e,n){var e=vr(t,e),i=e.type,r=e.timeout,o=e.propCount;if(!i)return n();function a(e){e.target===t&&++l>=o&&u()}var s=i===or?lr:cr,l=0,u=function(){t.removeEventListener(s,a),n()};setTimeout(function(){l<o&&u()},r+1),t.addEventListener(s,a)}var gr=/\b(transform|all)(,|$)/;function vr(e,t){var n,e=window.getComputedStyle(e),i=(e[sr+"Delay"]||"").split(", "),r=(e[sr+"Duration"]||"").split(", "),i=yr(i,r),o=(e[ur+"Delay"]||"").split(", "),a=(e[ur+"Duration"]||"").split(", "),o=yr(o,a),s=0,l=0,t=(t===or?0<i&&(n=or,s=i,l=r.length):t===ar?0<o&&(n=ar,s=o,l=a.length):l=(n=0<(s=Math.max(i,o))?o<i?or:ar:null)?(n===or?r:a).length:0,n===or&&gr.test(e[sr+"Property"]));return{type:n,timeout:s,propCount:l,hasTransform:t}}function yr(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map(function(e,t){return mr(e)+mr(n[t])}))}function mr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function _r(t,e){var n=t.elm,i=($(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb()),nr(t.data.transition));if(!P(i)&&!$(n._enterCb)&&1===n.nodeType){for(var r=i.css,o=i.type,a=i.enterClass,s=i.enterToClass,l=i.enterActiveClass,u=i.appearClass,c=i.appearToClass,d=i.appearActiveClass,f=i.beforeEnter,p=i.enter,h=i.afterEnter,g=i.enterCancelled,v=i.beforeAppear,y=i.appear,m=i.afterAppear,_=i.appearCancelled,i=i.duration,b=bn,w=bn.$vnode;w&&w.parent;)b=w.context,w=w.parent;var k,S,F,x,C,E,I,T,A,L,O=!b._isMounted||!t.isRootInsert;O&&!y&&""!==y||(k=O&&u?u:a,S=O&&d?d:l,F=O&&c?c:s,u=O&&v||f,x=O&&"function"==typeof y?y:p,C=O&&m||h,E=O&&_||g,null!=(I=W(M(i)?i.enter:i))&&wr(I,"enter",t),T=!1!==r&&!ge,A=Sr(x),L=n._enterCb=ie(function(){T&&(G(n,F),G(n,S)),L.cancelled?(T&&G(n,k),E&&E(n)):C&&C(n),n._enterCb=null}),t.data.show||U(t,"insert",function(){var e=n.parentNode,e=e&&e._pending&&e._pending[t.key];e&&e.tag===t.tag&&e.elm._leaveCb&&e.elm._leaveCb(),x&&x(n,L)}),u&&u(n),T&&(pr(n,k),pr(n,S),fr(function(){G(n,k),L.cancelled||(pr(n,F),A)||(kr(I)?setTimeout(L,I):hr(n,o,L))})),t.data.show&&(e&&e(),x)&&x(n,L),T)||A||L()}}function br(e,t){var n,i,r,o,a,s,l,u,c,d,f,p,h,g,v=e.elm,y=($(v._enterCb)&&(v._enterCb.cancelled=!0,v._enterCb()),nr(e.data.transition));if(P(y)||1!==v.nodeType)return t();function m(){g.cancelled||(!e.data.show&&v.parentNode&&((v.parentNode._pending||(v.parentNode._pending={}))[e.key]=e),s&&s(v),f&&(pr(v,r),pr(v,a),fr(function(){G(v,r),g.cancelled||(pr(v,o),p)||(kr(h)?setTimeout(g,h):hr(v,i,g))})),l&&l(v,g),f)||p||g()}$(v._leaveCb)||(n=y.css,i=y.type,r=y.leaveClass,o=y.leaveToClass,a=y.leaveActiveClass,s=y.beforeLeave,l=y.leave,u=y.afterLeave,c=y.leaveCancelled,d=y.delayLeave,y=y.duration,f=!1!==n&&!ge,p=Sr(l),$(h=W(M(y)?y.leave:y))&&wr(h,"leave",e),g=v._leaveCb=ie(function(){v.parentNode&&v.parentNode._pending&&(v.parentNode._pending[e.key]=null),f&&(G(v,o),G(v,a)),g.cancelled?(f&&G(v,r),c&&c(v)):(t(),u&&u(v)),v._leaveCb=null}),d?d(m):m())}function wr(e,t,n){"number"!=typeof e?V("<transition> explicit "+t+" duration is not a valid number - got "+JSON.stringify(e)+".",n.context):isNaN(e)&&V("<transition> explicit "+t+" duration is NaN - the duration expression might be incorrect.",n.context)}function kr(e){return"number"==typeof e&&!isNaN(e)}function Sr(e){var t;return!P(e)&&($(t=e.fns)?Sr(Array.isArray(t)?t[0]:t):1<(e._length||e.length))}function Fr(e,t){!0!==t.data.show&&_r(t)}var t=function(e){for(var t,p={},n=e.modules,y=e.nodeOps,i=0;i<bi.length;++i)for(p[bi[i]]=[],t=0;t<n.length;++t)$(n[t][bi[i]])&&p[bi[i]].push(n[t][bi[i]]);function o(e,t){function n(){0==--n.listeners&&a(e)}return n.listeners=t,n}function a(e){var t=y.parentNode(e);$(t)&&y.removeChild(t,e)}function v(t,e){return!e&&!t.ns&&(!D.ignoredElements.length||!D.ignoredElements.some(function(e){return q(e)?e.test(t.tag):e===t.tag}))&&D.isUnknownElement(t.tag)}var s=0;function m(e,t,n,i,r,o,a){(e=$(e.elm)&&$(o)?o[a]=je(e):e).isRootInsert=!r,function(e,t,n,i){var r=e.data;{var o;if($(r))return o=$(e.componentInstance)&&r.keepAlive,$(r=r.hook)&&$(r=r.init)&&r(e,!1),$(e.componentInstance)?(_(e,t),l(n,e.elm,i),T(o)&&function(e,t,n,i){var r,o=e;for(;o.componentInstance;)if(o=o.componentInstance._vnode,$(r=o.data)&&$(r=r.transition)){for(r=0;r<p.activate.length;++r)p.activate[r](_i,o);t.push(o);break}l(n,e.elm,i)}(e,t,n,i),1):void 0}}(e,t,n,i)||(o=e.data,a=e.children,$(r=e.tag)?(o&&o.pre&&s++,v(e,s)&&V("Unknown custom element: <"+r+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?y.createElementNS(e.ns,r):y.createElement(r,e),u(e),b(e,a,t),$(o)&&w(e,t),l(n,e.elm,i),o&&o.pre&&s--):(T(e.isComment)?e.elm=y.createComment(e.text):e.elm=y.createTextNode(e.text),l(n,e.elm,i)))}function _(e,t){$(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,h(e)?(w(e,t),u(e)):(mi(e),t.push(e))}function l(e,t,n){$(e)&&($(n)?y.parentNode(n)===e&&y.insertBefore(e,t,n):y.appendChild(e,t))}function b(e,t,n){if(Array.isArray(t)){F(t);for(var i=0;i<t.length;++i)m(t[i],n,e.elm,null,!0,t,i)}else d(e.text)&&y.appendChild(e.elm,y.createTextNode(String(e.text)))}function h(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return $(e.tag)}function w(e,t){for(var n=0;n<p.create.length;++n)p.create[n](_i,e);$(i=e.data.hook)&&($(i.create)&&i.create(_i,e),$(i.insert))&&t.push(e)}function u(e){var t;if($(t=e.fnScopeId))y.setStyleScope(e.elm,t);else for(var n=e;n;)$(t=n.context)&&$(t=t.$options._scopeId)&&y.setStyleScope(e.elm,t),n=n.parent;$(t=bn)&&t!==e.context&&t!==e.fnContext&&$(t=t.$options._scopeId)&&y.setStyleScope(e.elm,t)}function k(e,t,n,i,r,o){for(;i<=r;++i)m(n[i],o,e,t,!1,n,i)}function g(e){var t,n,i=e.data;if($(i))for($(t=i.hook)&&$(t=t.destroy)&&t(e),t=0;t<p.destroy.length;++t)p.destroy[t](e);if($(t=e.children))for(n=0;n<e.children.length;++n)g(e.children[n])}function S(e,t,n){for(;t<=n;++t){var i=e[t];$(i)&&($(i.tag)?(function e(t,n){if($(n)||$(t.data)){var i,r=p.remove.length+1;for($(n)?n.listeners+=r:n=o(t.elm,r),$(i=t.componentInstance)&&$(i=i._vnode)&&$(i.data)&&e(i,n),i=0;i<p.remove.length;++i)p.remove[i](t,n);$(i=t.data.hook)&&$(i=i.remove)?i(t,n):n()}else a(t.elm)}(i),g(i)):a(i.elm))}}function c(e,t,n,i,r){var o,a,s,l=0,u=0,c=t.length-1,d=t[0],f=t[c],p=n.length-1,h=n[0],g=n[p],v=!r;for(F(n);l<=c&&u<=p;)P(d)?d=t[++l]:P(f)?f=t[--c]:wi(d,h)?(x(d,h,i,n,u),d=t[++l],h=n[++u]):wi(f,g)?(x(f,g,i,n,p),f=t[--c],g=n[--p]):wi(d,g)?(x(d,g,i,n,p),v&&y.insertBefore(e,d.elm,y.nextSibling(f.elm)),d=t[++l],g=n[--p]):h=(wi(f,h)?(x(f,h,i,n,u),v&&y.insertBefore(e,f.elm,d.elm),f=t[--c]):(P(o)&&(o=function(e,t,n){for(var i,r={},o=t;o<=n;++o)$(i=e[o].key)&&(r[i]=o);return r}(t,l,c)),!P(a=$(h.key)?o[h.key]:function(e,t,n,i){for(var r=n;r<i;r++){var o=t[r];if($(o)&&wi(e,o))return r}}(h,t,l,c))&&wi(s=t[a],h)?(x(s,h,i,n,u),t[a]=void 0,v&&y.insertBefore(e,s.elm,d.elm)):m(h,i,e,d.elm,!1,n,u)),n[++u]);c<l?k(e,P(n[p+1])?null:n[p+1].elm,n,u,p,i):p<u&&S(t,l,c)}function F(e){for(var t={},n=0;n<e.length;n++){var i=e[n],r=i.key;$(r)&&(t[r]?V("Duplicate keys detected: '"+r+"'. This may cause an update error.",i.context):t[r]=!0)}}function x(e,t,n,i,r,o){if(e!==t){i=(t=$(t.elm)&&$(i)?i[r]=je(t):t).elm=e.elm;if(T(e.isAsyncPlaceholder))$(t.asyncFactory.resolved)?I(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(T(t.isStatic)&&T(e.isStatic)&&t.key===e.key&&(T(t.isCloned)||T(t.isOnce)))t.componentInstance=e.componentInstance;else{var a,r=t.data,s=($(r)&&$(a=r.hook)&&$(a=a.prepatch)&&a(e,t),e.children),l=t.children;if($(r)&&h(t)){for(a=0;a<p.update.length;++a)p.update[a](e,t);$(a=r.hook)&&$(a=a.update)&&a(e,t)}P(t.text)?$(s)&&$(l)?s!==l&&c(i,s,l,n,o):$(l)?(F(l),$(e.text)&&y.setTextContent(i,""),k(i,null,l,0,l.length-1,n)):$(s)?S(s,0,s.length-1):$(e.text)&&y.setTextContent(i,""):e.text!==t.text&&y.setTextContent(i,t.text),$(r)&&$(a=r.hook)&&$(a=a.postpatch)&&a(e,t)}}}function C(e,t,n){if(T(n)&&$(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var E=r("attrs,class,staticClass,staticStyle,key");function I(e,t,n,i){var r,o,a,s,l=t.tag,u=t.data,c=t.children;if(i=i||u&&u.pre,t.elm=e,T(t.isComment)&&$(t.asyncFactory))return t.isAsyncPlaceholder=!0;if(o=e,s=i,$((a=t).tag)?0===a.tag.indexOf("vue-component")||!v(a,s)&&a.tag.toLowerCase()===(o.tagName&&o.tagName.toLowerCase()):o.nodeType===(a.isComment?8:3)){if($(u)&&($(r=u.hook)&&$(r=r.init)&&r(t,!0),$(r=t.componentInstance)))_(t,n);else if($(l)){if($(c))if(e.hasChildNodes())if($(r=u)&&$(r=r.domProps)&&$(r=r.innerHTML)){if(r!==e.innerHTML)return void("undefined"!=typeof console&&0)}else{for(var d=!0,f=e.firstChild,p=0;p<c.length;p++){if(!f||!I(f,c[p],n,i)){d=!1;break}f=f.nextSibling}if(!d||f)return void("undefined"!=typeof console&&0)}else b(t,c,n);if($(u)){var h,g=!1;for(h in u)if(!E(h)){g=!0,w(t,n);break}!g&&u.class&&Tt(u.class)}}else e.data!==t.text&&(e.data=t.text);return 1}}return function(e,t,n,i){if(!P(t)){var r=!1,o=[];if(P(e))r=!0,m(t,o);else{var a=$(e.nodeType);if(!a&&wi(e,t))x(e,t,o,null,null,i);else{if(a){if(1===e.nodeType&&e.hasAttribute(re)&&(e.removeAttribute(re),n=!0),T(n)){if(I(e,t,o))return C(t,o,!0),e;V("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}i=e,e=new A(y.tagName(i).toLowerCase(),{},[],void 0,i)}a=e.elm,n=y.parentNode(a);if(m(t,o,a._leaveCb?null:n,y.nextSibling(a)),$(t.parent))for(var s=t.parent,l=h(t);s;){for(var u=0;u<p.destroy.length;++u)p.destroy[u](s);if(s.elm=t.elm,l){for(var c=0;c<p.create.length;++c)p.create[c](_i,s);var d=s.data.hook.insert;if(d.merged)for(var f=1;f<d.fns.length;f++)d.fns[f]()}else mi(s);s=s.parent}$(n)?S([e],0,0):$(e.tag)&&g(e)}}return C(t,o,r),t.elm}$(e)&&g(e)}}({nodeOps:t,modules:[ki,Oi,o,pe,Yi,i?{create:Fr,activate:Fr,remove:function(e,t){!0!==e.data.show?br(e,t):t()}}:{}].concat(g)}),xr=(ge&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&Or(e,"input")}),{inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?U(n,"postpatch",function(){xr.componentUpdated(e,t,n)}):Cr(e,t,n.context),e._vOptions=[].map.call(e.options,Tr)):"textarea"!==n.tag&&!yi(e.type)||(e._vModifiers=t.modifiers,t.modifiers.lazy)||(e.addEventListener("compositionstart",Ar),e.addEventListener("compositionend",Lr),e.addEventListener("change",Lr),ge&&(e.vmodel=!0))},componentUpdated:function(e,t,n){var i,r;"select"===n.tag&&(Cr(e,t,n.context),i=e._vOptions,(r=e._vOptions=[].map.call(e.options,Tr)).some(function(e,t){return!te(e,i[t])}))&&(e.multiple?t.value.some(function(e){return Ir(e,r)}):t.value!==t.oldValue&&Ir(t.value,r))&&Or(e,"change")}});function Cr(e,t,n){Er(e,t,n),(he||ve)&&setTimeout(function(){Er(e,t,n)},0)}function Er(e,t,n){var i=t.value,r=e.multiple;if(r&&!Array.isArray(i))V('<select multiple v-model="'+t.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(i).slice(8,-1),n);else{for(var o,a,s=0,l=e.options.length;s<l;s++)if(a=e.options[s],r)o=-1<ne(i,Tr(a)),a.selected!==o&&(a.selected=o);else if(te(Tr(a),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));r||(e.selectedIndex=-1)}}function Ir(t,e){return e.every(function(e){return!te(e,t)})}function Tr(e){return"_value"in e?e._value:e.value}function Ar(e){e.target.composing=!0}function Lr(e){e.target.composing&&(e.target.composing=!1,Or(e.target,"input"))}function Or(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Pr(e){return!e.componentInstance||e.data&&e.data.transition?e:Pr(e.componentInstance._vnode)}ki={model:xr,show:{bind:function(e,t,n){var t=t.value,i=(n=Pr(n)).data&&n.data.transition,r=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;t&&i?(n.data.show=!0,_r(n,function(){e.style.display=r})):e.style.display=t?r:"none"},update:function(e,t,n){var i=t.value;!i!=!t.oldValue&&((n=Pr(n)).data&&n.data.transition?(n.data.show=!0,i?_r(n,function(){e.style.display=e.__vOriginalDisplay}):br(n,function(){e.style.display="none"})):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},Oi={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function $r(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?$r(gn(t.children)):e}function Mr(e){var t,n={},i=e.$options;for(t in i.propsData)n[t]=e[t];var r,o=i._parentListeners;for(r in o)n[F(r)]=o[r];return n}function jr(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Rr(e){return e.tag||hn(e)}function Dr(e){return"show"===e.name}o={name:"transition",props:Oi,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Rr)).length){1<n.length&&V("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var i=this.mode,n=(i&&"in-out"!==i&&"out-in"!==i&&V("invalid <transition> mode: "+i,this.$parent),n[0]);if(!function(e){for(;e=e.parent;)if(e.data.transition)return 1}(this.$vnode)){var r=$r(n);if(r){if(this._leaving)return jr(e,n);var o="__transition-"+this._uid+"-",o=(r.key=null==r.key?r.isComment?o+"comment":o+r.tag:!d(r.key)||0===String(r.key).indexOf(o)?r.key:o+r.key,(r.data||(r.data={})).transition=Mr(this)),a=this._vnode,s=$r(a);if(r.data.directives&&r.data.directives.some(Dr)&&(r.data.show=!0),s&&s.data&&(c=r,(l=s).key!==c.key||l.tag!==c.tag)&&!hn(s)&&(!s.componentInstance||!s.componentInstance._vnode.isComment)){var l=s.data.transition=x({},o);if("out-in"===i)return this._leaving=!0,U(l,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),jr(e,n);if("in-out"===i){if(hn(r))return a;var u,c=function(){u()};U(o,"afterEnter",c),U(o,"enterCancelled",c),U(l,"delayLeave",function(e){u=e})}}}}return n}}},pe=x({tag:String,moveClass:String},Oi);function Vr(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Br(e){e.data.newPos=e.elm.getBoundingClientRect()}function Nr(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,t=t.top-n.top;(i||t)&&(e.data.moved=!0,(n=e.elm.style).transform=n.WebkitTransform="translate("+i+"px,"+t+"px)",n.transitionDuration="0s")}delete pe.mode;Yi={Transition:o,TransitionGroup:{props:pe,beforeMount:function(){var i=this,r=this._update;this._update=function(e,t){var n=kn(i);i.__patch__(i._vnode,i.kept,!1,!0),i._vnode=i.kept,n(),r.call(i,e,t)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],a=Mr(this),s=0;s<r.length;s++){var l,u=r[s];u.tag&&(null!=u.key&&0!==String(u.key).indexOf("__vlist")?(o.push(u),((n[u.key]=u).data||(u.data={})).transition=a):(l=(l=u.componentOptions)?l.Ctor.options.name||l.tag||"":u.tag,V("<transition-group> children must be keyed: <"+l+">")))}if(i){for(var c=[],d=[],f=0;f<i.length;f++){var p=i[f];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),(n[p.key]?c:d).push(p)}this.kept=e(t,null,c),this.removed=d}return e(t,null,o)},updated:function(){var e=this.prevChildren,i=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,i)&&(e.forEach(Vr),e.forEach(Br),e.forEach(Nr),this._reflow=document.body.offsetHeight,e.forEach(function(e){var n;e.data.moved&&(e=(n=e.elm).style,pr(n,i),e.transform=e.WebkitTransform=e.transitionDuration="",n.addEventListener(lr,n._moveCb=function e(t){t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener(lr,e),n._moveCb=null,G(n,i))}))}))},methods:{hasMove:function(e,t){var n;return!!rr&&(this._hasMove||(n=e.cloneNode(),e._transitionClasses&&e._transitionClasses.forEach(function(e){tr(n,e)}),er(n,t),n.style.display="none",this.$el.appendChild(n),e=vr(n),this.$el.removeChild(n),this._hasMove=e.hasTransform))}}}};l.config.mustUseProp=function(e,t,n){return"value"===n&&Qn(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},l.config.isReservedTag=fi,l.config.isReservedAttr=n,l.config.getTagNamespace=function(e){return gi(e)?"svg":"math"===e?"math":void 0},l.config.isUnknownElement=function(e){var t;return!i||!fi(e)&&(e=e.toLowerCase(),null!=vi[e]?vi[e]:(t=document.createElement(e),-1<e.indexOf("-")?vi[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:vi[e]=/HTMLUnknownElement/.test(t.toString())))},x(l.options.directives,ki),x(l.options.components,Yi),l.prototype.__patch__=i?t:R,l.prototype.$mount=function(e,t){var r,n,o;return e=e&&i?"string"==typeof(n=e)?document.querySelector(n)||(V("Cannot find element: "+n),document.createElement("div")):n:void 0,n=e,o=t,(r=this).$el=n,r.$options.render||(r.$options.render=$e,r.$options.template&&"#"!==r.$options.template.charAt(0)||r.$options.el||n?V("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",r):V("Failed to mount component: template or render function not defined.",r)),h(r,"beforeMount"),n=D.performance&&p?function(){var e=r._name,t=r._uid,n="vue-perf-start:"+t,t="vue-perf-end:"+t,i=(p(n),r._render());p(t),kt("vue "+e+" render",n,t),p(n),r._update(i,o),p(t),kt("vue "+e+" patch",n,t)}:function(){r._update(r._render(),o)},new z(r,n,R,{before:function(){r._isMounted&&!r._isDestroyed&&h(r,"beforeUpdate")}},!0),o=!1,null==r.$vnode&&(r._isMounted=!0,h(r,"mounted")),r},i&&setTimeout(function(){D.devtools&&we&&we.emit("init",l),D.productionTip},0),Gr.exports=l}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:2}],5:[function(t,n,e){!function(e){!function(){"production"===e.env.NODE_ENV?n.exports=t("./vue.runtime.common.prod.js"):n.exports=t("./vue.runtime.common.dev.js")}.call(this)}.call(this,t("_process"))},{"./vue.runtime.common.dev.js":4,"./vue.runtime.common.prod.js":6,_process:1}],6:[function(e,dr,t){!function(ur,cr){!function(){"use strict";var D=Object.freeze({});function V(e){return null==e}function B(e){return null!=e}function N(e){return!0===e}function _(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function U(e){return null!==e&&"object"==typeof e}var g=Object.prototype.toString;function O(e){return"[object Object]"===g.call(e)}function v(e){var t=parseFloat(String(e));return 0<=t&&Math.floor(t)===t&&isFinite(e)}function X(e){return B(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function y(e){return null==e?"":Array.isArray(e)||O(e)&&e.toString===g?JSON.stringify(e,null,2):String(e)}function Z(e){var t=parseFloat(e);return isNaN(t)?e:t}function r(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var m=r("key,ref,slot,slot-scope,is");function z(e,t){if(e.length){t=e.indexOf(t);if(-1<t)return e.splice(t,1)}}var b=Object.prototype.hasOwnProperty;function P(e,t){return b.call(e,t)}function e(t){var n=Object.create(null);return function(e){return n[e]||(n[e]=t(e))}}var w=/-(\w)/g,k=e(function(e){return e.replace(w,function(e,t){return t?t.toUpperCase():""})}),C=e(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),E=/\B([A-Z])/g,J=e(function(e){return e.replace(E,"-$1").toLowerCase()}),Y=Function.prototype.bind?function(e,t){return e.bind(t)}:function(n,i){function e(e){var t=arguments.length;return t?1<t?n.apply(i,arguments):n.call(i,e):n.call(i)}return e._length=n.length,e};function I(e,t){for(var n=e.length-(t=t||0),i=new Array(n);n--;)i[n]=e[n+t];return i}function S(e,t){for(var n in t)e[n]=t[n];return e}function T(e){for(var t={},n=0;n<e.length;n++)e[n]&&S(t,e[n]);return t}function $(e,t,n){}function A(e,t,n){return!1}var L=function(e){return e};function l(t,n){if(t===n)return!0;var e=U(t),i=U(n);if(!e||!i)return!e&&!i&&String(t)===String(n);try{var r,o,a=Array.isArray(t),s=Array.isArray(n);return a&&s?t.length===n.length&&t.every(function(e,t){return l(e,n[t])}):t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!a&&!s&&(r=Object.keys(t),o=Object.keys(n),r.length===o.length)&&r.every(function(e){return l(t[e],n[e])})}catch(t){return!1}}function Q(e,t){for(var n=0;n<e.length;n++)if(l(e[n],t))return n;return-1}function ee(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var te="data-server-rendered",ne=["component","directive","filter"],t=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],c={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:A,isReservedAttr:A,isUnknownElement:A,getTagNamespace:$,parsePlatformTagName:L,mustUseProp:A,async:!0,_lifecycleHooks:t};function ie(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var re,oe=new RegExp("[^"+/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source+".$_\\d]"),ae="__proto__"in{},o="undefined"!=typeof window,se="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,n=se&&WXEnvironment.platform.toLowerCase(),i=o&&window.navigator.userAgent.toLowerCase(),le=i&&/msie|trident/.test(i),ue=i&&0<i.indexOf("msie 9.0"),ce=i&&0<i.indexOf("edge/"),de=(i&&i.indexOf("android"),i&&/iphone|ipad|ipod|ios/.test(i)||"ios"===n),n=(i&&/chrome\/\d+/.test(i),i&&/phantomjs/.test(i),i&&i.match(/firefox\/(\d+)/)),fe={}.watch,pe=!1;if(o)try{var a={};Object.defineProperty(a,"passive",{get:function(){pe=!0}}),window.addEventListener("test-passive",null,a)}catch(D){}var he=function(){return re=void 0===re?!o&&!se&&void 0!==ur&&ur.process&&"server"===ur.process.env.VUE_ENV:re},ge=o&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ve(e){return"function"==typeof e&&/native code/.test(e.toString())}var ye="undefined"!=typeof Symbol&&ve(Symbol)&&"undefined"!=typeof Reflect&&ve(Reflect.ownKeys);function me(){this.set=Object.create(null)}var _e="undefined"!=typeof Set&&ve(Set)?Set:(me.prototype.has=function(e){return!0===this.set[e]},me.prototype.add=function(e){this.set[e]=!0},me.prototype.clear=function(){this.set=Object.create(null)},me),i=$,be=0,d=function(){this.id=be++,this.subs=[]},we=(d.prototype.addSub=function(e){this.subs.push(e)},d.prototype.removeSub=function(e){z(this.subs,e)},d.prototype.depend=function(){d.target&&d.target.addDep(this)},d.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},d.target=null,[]);function ke(e){we.push(e),d.target=e}function Se(){we.pop(),d.target=we[we.length-1]}var G=function(e,t,n,i,r,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},a={child:{configurable:!0}},Fe=(a.child.get=function(){return this.componentInstance},Object.defineProperties(G.prototype,a),function(e){void 0===e&&(e="");var t=new G;return t.text=e,t.isComment=!0,t});function xe(e){return new G(void 0,void 0,void 0,String(e))}function Ce(e){var t=new G(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ee=Array.prototype,Ie=Object.create(Ee),Te=(["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(o){var a=Ee[o];ie(Ie,o,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,i=a.apply(this,e),r=this.__ob__;switch(o){case"push":case"unshift":n=e;break;case"splice":n=e.slice(2)}return n&&r.observeArray(n),r.dep.notify(),i})}),Object.getOwnPropertyNames(Ie)),Ae=!0;function M(e){Ae=e}var Le=function(e){if(this.value=e,this.dep=new d,this.vmCount=0,ie(e,"__ob__",this),Array.isArray(e)){if(ae)e.__proto__=Ie;else for(var t=e,n=Ie,i=Te,r=0,o=i.length;r<o;r++){var a=i[r];ie(t,a,n[a])}this.observeArray(e)}else this.walk(e)};function j(e,t){var n;if(U(e)&&!(e instanceof G))return P(e,"__ob__")&&e.__ob__ instanceof Le?n=e.__ob__:Ae&&!he()&&(Array.isArray(e)||O(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Le(e)),t&&n&&n.vmCount++,n}function R(n,e,i,t,r){var o,a,s,l=new d,u=Object.getOwnPropertyDescriptor(n,e);u&&!1===u.configurable||(o=u&&u.get,a=u&&u.set,o&&!a||2!==arguments.length||(i=n[e]),s=!r&&j(i),Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(n):i;return d.target&&(l.depend(),s)&&(s.dep.depend(),Array.isArray(e))&&function e(t){for(var n=void 0,i=0,r=t.length;i<r;i++)(n=t[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(e),e},set:function(e){var t=o?o.call(n):i;e===t||e!=e&&t!=t||o&&!a||(a?a.call(n,e):i=e,s=!r&&j(e),l.notify())}}))}function Oe(e,t,n){var i;return Array.isArray(e)&&v(t)?(e.length=Math.max(e.length,t),e.splice(t,1,n)):t in e&&!(t in Object.prototype)?e[t]=n:(i=e.__ob__,e._isVue||i&&i.vmCount||(i?(R(i.value,t,n),i.dep.notify()):e[t]=n)),n}function Pe(e,t){var n;Array.isArray(e)&&v(t)?e.splice(t,1):(n=e.__ob__,e._isVue||n&&n.vmCount||P(e,t)&&(delete e[t],n)&&n.dep.notify())}Le.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)R(e,t[n])},Le.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)j(e[t])};var F=c.optionMergeStrategies;function $e(e,t){if(t)for(var n,i,r,o=ye?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(i=e[n],r=t[n],P(e,n)?i!==r&&O(i)&&O(r)&&$e(i,r):Oe(e,n,r));return e}function Me(n,i,r){return r?function(){var e="function"==typeof i?i.call(r,r):i,t="function"==typeof n?n.call(r,r):n;return e?$e(e,t):t}:i?n?function(){return $e("function"==typeof i?i.call(this,this):i,"function"==typeof n?n.call(this,this):n)}:i:n}function je(e,t){t=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return t&&function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(t)}function Re(e,t,n,i){e=Object.create(e||null);return t?S(e,t):e}F.data=function(e,t,n){return n?Me(e,t,n):t&&"function"!=typeof t?e:Me(e,t)},t.forEach(function(e){F[e]=je}),ne.forEach(function(e){F[e+"s"]=Re}),F.watch=function(e,t,n,i){if(e===fe&&(e=void 0),!(t=t===fe?void 0:t))return Object.create(e||null);if(!e)return t;var r,o={};for(r in S(o,e),t){var a=o[r],s=t[r];a&&!Array.isArray(a)&&(a=[a]),o[r]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},F.props=F.methods=F.inject=F.computed=function(e,t,n,i){var r;return e?(S(r=Object.create(null),e),t&&S(r,t),r):t},F.provide=Me;var De=function(e,t){return void 0===t?e:t};function x(n,i,r){var e=i="function"==typeof i?i.options:i,t=e.props;if(t){var o,a,s={};if(Array.isArray(t))for(o=t.length;o--;)"string"==typeof(a=t[o])&&(s[k(a)]={type:null});else if(O(t))for(var l in t)a=t[l],s[k(l)]=O(a)?a:{type:a};e.props=s}var e=i,u=e.inject;if(u){var c=e.inject={};if(Array.isArray(u))for(var d=0;d<u.length;d++)c[u[d]]={from:u[d]};else if(O(u))for(var f in u){var p=u[f];c[f]=O(p)?S({from:f},p):{from:p}}}var h=i.directives;if(h)for(var g in h){var v=h[g];"function"==typeof v&&(h[g]={bind:v,update:v})}if(!i._base&&(i.extends&&(n=x(n,i.extends,r)),i.mixins))for(var y=0,m=i.mixins.length;y<m;y++)n=x(n,i.mixins[y],r);var _,b={};for(_ in n)w(_);for(_ in i)P(n,_)||w(_);function w(e){var t=F[e]||De;b[e]=t(n[e],i[e],r,e)}return b}function Ve(e,t,n){var i;if("string"==typeof n)return P(e=e[t],n)?e[n]:P(e,t=k(n))?e[t]:!P(e,i=C(t))&&(e[n]||e[t])||e[i]}function Be(e,t,n,i){var t=t[e],r=!P(n,e),n=n[e],o=ze(Boolean,t.type);return-1<o&&(r&&!P(t,"default")?n=!1:""!==n&&n!==J(e)||!((r=ze(String,t.type))<0||o<r)||(n=!0)),void 0===n&&(n=function(e,t,n){var i;if(P(t,"default"))return i=t.default,e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof i&&"Function"!==Ne(t.type)?i.call(e):i}(i,t,e),o=Ae,M(!0),j(n),M(o)),n}function Ne(e){e=e&&e.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Ue(e,t){return Ne(e)===Ne(t)}function ze(e,t){if(!Array.isArray(t))return Ue(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(Ue(t[n],e))return n;return-1}function q(e,t,n){ke();try{if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(i,e,t,n))return}catch(e){qe(e,i,"errorCaptured hook")}}qe(e,t,n)}finally{Se()}}function Ge(e,t,n,i,r){var o;try{(o=n?e.apply(t,n):e.call(t))&&!o._isVue&&X(o)&&!o._handled&&(o.catch(function(e){return q(e,i,r+" (Promise/async)")}),o._handled=!0)}catch(e){q(e,i,r)}return o}function qe(e,t,n){if(c.errorHandler)try{return c.errorHandler.call(null,e,t,n)}catch(t){t!==e&&He(t)}He(e)}function He(e){if(!o&&!se||"undefined"==typeof console)throw e}var We,Ke,Xe,Ze,a=!1,Je=[],Ye=!1;function Qe(){Ye=!1;for(var e=Je.slice(0),t=Je.length=0;t<e.length;t++)e[t]()}function et(e,t){var n;if(Je.push(function(){if(e)try{e.call(t)}catch(e){q(e,t,"nextTick")}else n&&n(t)}),Ye||(Ye=!0,Ke()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}"undefined"!=typeof Promise&&ve(Promise)?(We=Promise.resolve(),Ke=function(){We.then(Qe),de&&setTimeout($)},a=!0):le||"undefined"==typeof MutationObserver||!ve(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString()?Ke=void 0!==cr&&ve(cr)?function(){cr(Qe)}:function(){setTimeout(Qe,0)}:(Xe=1,t=new MutationObserver(Qe),Ze=document.createTextNode(String(Xe)),t.observe(Ze,{characterData:!0}),Ke=function(){Xe=(Xe+1)%2,Ze.data=String(Xe)},a=!0);var tt=new _e;function nt(e){!function e(t,n){var i,r,o=Array.isArray(t);if(!(!o&&!U(t)||Object.isFrozen(t)||t instanceof G)){if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(i=t.length;i--;)e(t[i],n);else for(i=(r=Object.keys(t)).length;i--;)e(t[r[i]],n)}}(e,tt),tt.clear()}var it=e(function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:n,capture:i,passive:t}});function rt(e,r){function o(){var e=arguments,t=o.fns;if(!Array.isArray(t))return Ge(t,null,arguments,r,"v-on handler");for(var n=t.slice(),i=0;i<n.length;i++)Ge(n[i],null,e,r,"v-on handler")}return o.fns=e,o}function ot(e,t,n,i,r,o){var a,s,l,u;for(a in e)s=e[a],l=t[a],u=it(a),V(s)||(V(l)?(V(s.fns)&&(s=e[a]=rt(s,o)),N(u.once)&&(s=e[a]=r(u.name,s,u.capture)),n(u.name,s,u.capture,u.passive,u.params)):s!==l&&(l.fns=s,e[a]=l));for(a in t)V(e[a])&&i((u=it(a)).name,t[a],u.capture)}function H(e,t,n){var i,r=(e=e instanceof G?e.data.hook||(e.data.hook={}):e)[t];function o(){n.apply(this,arguments),z(i.fns,o)}V(r)?i=rt([o]):B(r.fns)&&N(r.merged)?(i=r).fns.push(o):i=rt([r,o]),i.merged=!0,e[t]=i}function at(e,t,n,i,r){if(B(t)){if(P(t,n))return e[n]=t[n],r||delete t[n],1;if(P(t,i))return e[n]=t[i],r||delete t[i],1}}function st(e){return _(e)?[xe(e)]:Array.isArray(e)?function e(t,n){for(var i,r,o,a=[],s=0;s<t.length;s++)V(i=t[s])||"boolean"==typeof i||(o=a[r=a.length-1],Array.isArray(i)?0<i.length&&(lt((i=e(i,(n||"")+"_"+s))[0])&&lt(o)&&(a[r]=xe(o.text+i[0].text),i.shift()),a.push.apply(a,i)):_(i)?lt(o)?a[r]=xe(o.text+i):""!==i&&a.push(xe(i)):lt(i)&&lt(o)?a[r]=xe(o.text+i.text):(N(t._isVList)&&B(i.tag)&&V(i.key)&&B(n)&&(i.key="__vlist"+n+"_"+s+"__"),a.push(i)));return a}(e):void 0}function lt(e){return B(e)&&B(e.text)&&!1===e.isComment}function ut(e,t){if(e){for(var n=Object.create(null),i=ye?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){for(var a,s=e[o].from,l=t;l;){if(l._provided&&P(l._provided,s)){n[o]=l._provided[s];break}l=l.$parent}!l&&"default"in e[o]&&(a=e[o].default,n[o]="function"==typeof a?a.call(t):a)}}return n}}function ct(e,t){if(!e||!e.length)return{};for(var n,i={},r=0,o=e.length;r<o;r++){var a=e[r],s=a.data;s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,a.context!==t&&a.fnContext!==t||!s||null==s.slot?(i.default||(i.default=[])).push(a):(s=i[s=s.slot]||(i[s]=[]),"template"===a.tag?s.push.apply(s,a.children||[]):s.push(a))}for(n in i)i[n].every(dt)&&delete i[n];return i}function dt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function ft(e,t,n){var i,r,o=0<Object.keys(t).length,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==D&&s===n.$key&&!o&&!n.$hasNormal)return n;for(var l in i={},e)e[l]&&"$"!==l[0]&&(i[l]=function(e,t,n){function i(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:st(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e}return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}(t,l,e[l]))}else i={};for(r in t)r in i||(i[r]=function(e,t){return function(){return e[t]}}(t,r));return e&&Object.isExtensible(e)&&(e._normalized=i),ie(i,"$stable",a),ie(i,"$key",s),ie(i,"$hasNormal",o),i}function pt(e,t){var n,i,r,o;if(Array.isArray(e)||"string"==typeof e)for(a=new Array(e.length),n=0,i=e.length;n<i;n++)a[n]=t(e[n],n);else if("number"==typeof e)for(a=new Array(e),n=0;n<e;n++)a[n]=t(n+1,n);else if(U(e))if(ye&&e[Symbol.iterator])for(var a=[],s=e[Symbol.iterator](),l=s.next();!l.done;)a.push(t(l.value,a.length)),l=s.next();else for(r=Object.keys(e),a=new Array(r.length),n=0,i=r.length;n<i;n++)o=r[n],a[n]=t(e[o],o,n);return(a=B(a)?a:[])._isVList=!0,a}function ht(e,t,n,i){var r=this.$scopedSlots[e],r=r?(n=n||{},r(n=i?S(S({},i),n):n)||t):this.$slots[e]||t,i=n&&n.slot;return i?this.$createElement("template",{slot:i},r):r}function gt(e){return Ve(this.$options,"filters",e)||L}function vt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function yt(e,t,n,i,r){n=c.keyCodes[t]||n;return r&&i&&!c.keyCodes[t]?vt(r,i):n?vt(n,e):i?J(i)!==t:void 0}function mt(i,r,o,a,s){if(o&&U(o)){var l,e;for(e in o=Array.isArray(o)?T(o):o)!function(t){l="class"===t||"style"===t||m(t)?i:(e=i.attrs&&i.attrs.type,a||c.mustUseProp(r,e,t)?i.domProps||(i.domProps={}):i.attrs||(i.attrs={}));var e=k(t),n=J(t);e in l||n in l||(l[t]=o[t],s&&((i.on||(i.on={}))["update:"+t]=function(e){o[t]=e}))}(e)}return i}function _t(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||wt(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i}function bt(e,t,n){return wt(e,"__once__"+t+(n?"_"+n:""),!0),e}function wt(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&kt(e[i],t+"_"+i,n);else kt(e,t,n)}function kt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function St(e,t){if(t&&O(t)){var n,i=e.on=e.on?S({},e.on):{};for(n in t){var r=i[n],o=t[n];i[n]=r?[].concat(r,o):o}}return e}function Ft(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?Ft(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function xt(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"==typeof i&&i&&(e[t[n]]=t[n+1])}return e}function Ct(e,t){return"string"==typeof e?t+e:e}function Et(e){e._o=bt,e._n=Z,e._s=y,e._l=pt,e._t=ht,e._q=l,e._i=Q,e._m=_t,e._f=gt,e._k=yt,e._b=mt,e._v=xe,e._e=Fe,e._u=Ft,e._g=St,e._d=xt,e._p=Ct}function It(e,t,n,r,i){var o,a=this,s=i.options,i=(P(r,"_uid")?(o=Object.create(r))._original=r:r=(o=r)._original,N(s._compiled)),l=!i;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||D,this.injections=ut(s.inject,r),this.slots=function(){return a.$slots||ft(e.scopedSlots,a.$slots=ct(n,r)),a.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ft(e.scopedSlots,this.slots())}}),i&&(this.$options=s,this.$slots=this.slots(),this.$scopedSlots=ft(e.scopedSlots,this.$slots)),s._scopeId?this._c=function(e,t,n,i){e=jt(o,e,t,n,i,l);return e&&!Array.isArray(e)&&(e.fnScopeId=s._scopeId,e.fnContext=r),e}:this._c=function(e,t,n,i){return jt(o,e,t,n,i,l)}}function Tt(e,t,n,i){e=Ce(e);return e.fnContext=n,e.fnOptions=i,t.slot&&((e.data||(e.data={})).slot=t.slot),e}function At(e,t){for(var n in t)e[k(n)]=t[n]}Et(It.prototype);var Lt={init:function(e,t){var n,i,r;e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive?Lt.prepatch(e,e):(e.componentInstance=(i={_isComponent:!0,_parentVnode:n=e,parent:Ht},B(r=n.data.inlineTemplate)&&(i.render=r.render,i.staticRenderFns=r.staticRenderFns),new n.componentOptions.Ctor(i))).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance,r=n.propsData,e=n.listeners,n=n.children,o=t.data.scopedSlots,a=i.$scopedSlots,a=!!(o&&!o.$stable||a!==D&&!a.$stable||o&&i.$scopedSlots.$key!==o.$key),o=!!(n||i.$options._renderChildren||a);if(i.$options._parentVnode=t,i.$vnode=t,i._vnode&&(i._vnode.parent=t),i.$options._renderChildren=n,i.$attrs=t.data.attrs||D,i.$listeners=e||D,r&&i.$options.props){M(!1);for(var s=i._props,l=i.$options._propKeys||[],u=0;u<l.length;u++){var c=l[u],d=i.$options.props;s[c]=Be(c,d,r,i)}M(!0),i.$options.propsData=r}e=e||D,a=i.$options._parentListeners,i.$options._parentListeners=e,qt(i,e,a),o&&(i.$slots=ct(n,t.context),i.$forceUpdate())},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,f(n,"mounted")),e.data.keepAlive&&(t._isMounted?(n._inactive=!1,Jt.push(n)):Xt(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(!(n&&(t._directInactive=!0,Kt(t))||t._inactive)){t._inactive=!0;for(var i=0;i<t.$children.length;i++)e(t.$children[i]);f(t,"deactivated")}}(t,!0):t.$destroy())}},Ot=Object.keys(Lt);function Pt(s,e,t,n,i){if(!V(s)){var r,o=t.$options._base;if("function"==typeof(s=U(s)?o.extend(s):s)){if(V(s.cid)&&void 0===(C=r=s,E=o,s=N(C.error)&&B(C.errorComp)?C.errorComp:B(C.resolved)?C.resolved:((I=Dt)&&B(C.owners)&&-1===C.owners.indexOf(I)&&C.owners.push(I),N(C.loading)&&B(C.loadingComp)?C.loadingComp:I&&!B(C.owners)?(T=C.owners=[I],A=!0,O=L=null,I.$on("hook:destroyed",function(){return z(T,I)}),P=function(e){for(var t=0,n=T.length;t<n;t++)T[t].$forceUpdate();e&&(T.length=0,null!==L&&(clearTimeout(L),L=null),null!==O)&&(clearTimeout(O),O=null)},o=ee(function(e){C.resolved=Vt(e,E),A?T.length=0:P(!0)}),$=ee(function(e){B(C.errorComp)&&(C.error=!0,P(!0))}),U(M=C(o,$))&&(X(M)?V(C.resolved)&&M.then(o,$):X(M.component)&&(M.component.then(o,$),B(M.error)&&(C.errorComp=Vt(M.error,E)),B(M.loading)&&(C.loadingComp=Vt(M.loading,E),0===M.delay?C.loading=!0:L=setTimeout(function(){L=null,V(C.resolved)&&V(C.error)&&(C.loading=!0,P(!1))},M.delay||200)),B(M.timeout))&&(O=setTimeout(function(){O=null,V(C.resolved)&&$(null)},M.timeout))),A=!1,C.loading?C.loadingComp:C.resolved):void 0)))return o=r,M=e,k=t,S=n,F=i,(x=Fe()).asyncFactory=o,x.asyncMeta={data:M,context:k,children:S,tag:F},x;e=e||{},vn(s),B(e.model)&&(o=s.options,k=e,S=o.model&&o.model.prop||"value",o=o.model&&o.model.event||"input",(k.attrs||(k.attrs={}))[S]=k.model.value,S=k.on||(k.on={}),F=S[o],k=k.model.callback,B(F)?(Array.isArray(F)?-1===F.indexOf(k):F!==k)&&(S[o]=[k].concat(F)):S[o]=k);x=function(e){var t=s.options.props;if(!V(t)){var n={},i=e.attrs,r=e.props;if(B(i)||B(r))for(var o in t){var a=J(o);at(n,r,o,a,!0)||at(n,i,o,a,!1)}return n}}(e);if(!N(s.options.functional)){for(var o=e.on,a=(e.on=e.nativeOn,N(s.options.abstract)&&(a=e.slot,e={},a)&&(e.slot=a),e),l=a.hook||(a.hook={}),u=0;u<Ot.length;u++){var c=Ot[u],d=l[c],f=Lt[c];d===f||d&&d._merged||(l[c]=d?function(n,i){function e(e,t){n(e,t),i(e,t)}return e._merged=!0,e}(f,d):f)}var p=s.options.name||i;return new G("vue-component-"+s.cid+(p?"-"+p:""),e,void 0,void 0,void 0,t,{Ctor:s,propsData:x,listeners:o,tag:i,children:n},r)}var p=s,j=x,h=e,o=t,i=n,g=p.options,v={},y=g.props;if(B(y))for(var m in y)v[m]=Be(m,y,j||D);else B(h.attrs)&&At(v,h.attrs),B(h.props)&&At(v,h.props);var _=new It(h,v,i,o,p);if((i=g.render.call(null,_._c,_))instanceof G)return Tt(i,h,_.parent,g);if(Array.isArray(i)){for(var b=st(i)||[],R=new Array(b.length),w=0;w<b.length;w++)R[w]=Tt(b[w],h,_.parent,g);return R}}}var k,S,F,x,C,E,I,T,A,L,O,P,$,M}var $t=1,Mt=2;function jt(e,t,n,i,r,o){return(Array.isArray(n)||_(n))&&(r=i,i=n,n=void 0),N(o)&&(r=Mt),o=e,e=t,t=i,i=r,(!B(r=n)||!B(r.__ob__))&&(e=B(r)&&B(r.is)?r.is:e)?(Array.isArray(t)&&"function"==typeof t[0]&&((r=r||{}).scopedSlots={default:t[0]},t.length=0),i===Mt?t=st(t):i===$t&&(t=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(t)),i="string"==typeof e?(a=o.$vnode&&o.$vnode.ns||c.getTagNamespace(e),c.isReservedTag(e)?new G(c.parsePlatformTagName(e),r,t,void 0,void 0,o):r&&r.pre||!B(i=Ve(o.$options,"components",e))?new G(e,r,t,void 0,void 0,o):Pt(i,r,o,t,e)):Pt(e,r,o,t),Array.isArray(i)?i:B(i)?(B(a)&&function e(t,n,i){if(t.ns=n,"foreignObject"===t.tag&&(i=!(n=void 0)),B(t.children))for(var r=0,o=t.children.length;r<o;r++){var a=t.children[r];B(a.tag)&&(V(a.ns)||N(i)&&"svg"!==a.tag)&&e(a,n,i)}}(i,a),B(r)&&(U((e=r).style)&&nt(e.style),U(e.class)&&nt(e.class)),i):Fe()):Fe();var a}var Rt,Dt=null;function Vt(e,t){return U(e=e.__esModule||ye&&"Module"===e[Symbol.toStringTag]?e.default:e)?t.extend(e):e}function Bt(e){return e.isComment&&e.asyncFactory}function Nt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(B(n)&&(B(n.componentOptions)||Bt(n)))return n}}function Ut(e,t){Rt.$on(e,t)}function zt(e,t){Rt.$off(e,t)}function Gt(t,n){var i=Rt;return function e(){null!==n.apply(null,arguments)&&i.$off(t,e)}}function qt(e,t,n){ot(t,n||{},Ut,zt,Gt,Rt=e),Rt=void 0}var Ht=null;function Wt(e){var t=Ht;return Ht=e,function(){Ht=t}}function Kt(e){for(;e=e&&e.$parent;)if(e._inactive)return 1}function Xt(e,t){if(t){if(e._directInactive=!1,Kt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Xt(e.$children[n]);f(e,"activated")}}function f(e,t){ke();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,o=n.length;r<o;r++)Ge(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),Se()}var Zt,p=[],Jt=[],Yt={},Qt=!1,en=!1,tn=0,nn=0,rn=Date.now;function on(){var e,t;for(nn=rn(),en=!0,p.sort(function(e,t){return e.id-t.id}),tn=0;tn<p.length;tn++)(e=p[tn]).before&&e.before(),t=e.id,Yt[t]=null,e.run();for(var n=Jt.slice(),i=p.slice(),r=(tn=p.length=Jt.length=0,Qt=en=!(Yt={}),n),o=0;o<r.length;o++)r[o]._inactive=!0,Xt(r[o],!0);for(var a=i,s=a.length;s--;){var l=a[s],u=l.vm;u._watcher===l&&u._isMounted&&!u._isDestroyed&&f(u,"updated")}ge&&c.devtools&&ge.emit("flush")}o&&!le&&(Zt=window.performance)&&"function"==typeof Zt.now&&rn()>document.createEvent("Event").timeStamp&&(rn=function(){return Zt.now()});function W(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++an,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new _e,this.newDepIds=new _e,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){var n;if(!oe.test(e))return n=e.split("."),function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}(t),this.getter||(this.getter=$)),this.value=this.lazy?void 0:this.get()}var an=0,s=(W.prototype.get=function(){ke(this);var e,t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;q(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&nt(e),Se(),this.cleanupDeps()}return e},W.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t))||e.addSub(this)},W.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},W.prototype.update=function(){if(this.lazy)this.dirty=!0;else if(this.sync)this.run();else{var e=this,t=e.id;if(null==Yt[t]){if(Yt[t]=!0,en){for(var n=p.length-1;tn<n&&p[n].id>e.id;)n--;p.splice(n+1,0,e)}else p.push(e);Qt||(Qt=!0,et(on))}}},W.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||U(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){q(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},W.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},W.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},W.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||z(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}},{enumerable:!0,configurable:!0,get:$,set:$});function sn(e,t,n){s.get=function(){return this[t][n]},s.set=function(e){this[t][n]=e},Object.defineProperty(e,n,s)}function ln(e){e._watchers=[];var t=e.$options;if(t.props){var n=e,i=t.props,r,o,a,s=n.$options.propsData||{},l=n._props={},u=n.$options._propKeys=[];for(r in n.$parent&&M(!1),i)o=r,a=void 0,u.push(o),a=Be(o,i,s,n),R(l,o,a),o in n||sn(n,"_props",o);M(!0)}if(t.methods){var c=e,d=t.methods,f;for(f in c.$options.props,d)c[f]="function"!=typeof d[f]?$:Y(d[f],c)}if(t.data){for(var p=e,h,g=p.$options.data,v=(O(g=p._data="function"==typeof g?function(e,t){ke();try{return e.call(t,t)}catch(e){return q(e,t,"data()"),{}}finally{Se()}}(g,p):g||{})||(g={}),Object.keys(g)),y=p.$options.props,m=(p.$options.methods,v.length);m--;){var _=v[m];y&&P(y,_)||36!==(h=(_+"").charCodeAt(0))&&95!==h&&sn(p,"_data",_)}j(g,!0)}else j(e._data={},!0);if(t.computed){var b=e,w=t.computed,k,S=b._computedWatchers=Object.create(null),F=he();for(k in w){var x=w[k],C="function"==typeof x?x:x.get;F||(S[k]=new W(b,C||$,$,un)),k in b||cn(b,k,x)}}if(t.watch&&t.watch!==fe){var E,I=e,T=t.watch;for(E in T){var A=T[E];if(Array.isArray(A))for(var L=0;L<A.length;L++)pn(I,E,A[L]);else pn(I,E,A)}}}var un={lazy:!0};function cn(e,t,n){var i=!he();"function"==typeof n?(s.get=i?dn(t):fn(n),s.set=$):(s.get=n.get?i&&!1!==n.cache?dn(t):fn(n.get):$,s.set=n.set||$),Object.defineProperty(e,t,s)}function dn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),d.target&&e.depend(),e.value}}function fn(e){return function(){return e.call(this,this)}}function pn(e,t,n,i){return"string"==typeof(n=O(n)?(i=n).handler:n)&&(n=e[n]),e.$watch(t,n,i)}var hn,gn=0;function vn(r){var e,t,n=r.options;return r.super&&(e=vn(r.super))!==r.superOptions&&(r.superOptions=e,(t=function(){var e,t,n=r.options,i=r.sealedOptions;for(t in n)n[t]!==i[t]&&(e=e||{},e[t]=n[t]);return e}())&&S(r.extendOptions,t),(n=r.options=x(e,r.extendOptions)).name)&&(n.components[n.name]=r),n}function u(e){this._init(e)}function yn(e){e.cid=0;var d=1;e.extend=function(e){var t=this,n=t.cid,i=(e=e||{})._Ctor||(e._Ctor={});if(i[n])return i[n];function r(e){this._init(e)}var o=e.name||t.options.name;if(((r.prototype=Object.create(t.prototype)).constructor=r).cid=d++,r.options=x(t.options,e),r.super=t,r.options.props){var a=r,s;for(s in a.options.props)sn(a.prototype,"_props",s)}if(r.options.computed){var l=r,u,c=l.options.computed;for(u in c)cn(l.prototype,u,c[u])}return r.extend=t.extend,r.mixin=t.mixin,r.use=t.use,ne.forEach(function(e){r[e]=t[e]}),o&&(r.options.components[o]=r),r.superOptions=t.options,r.extendOptions=e,r.sealedOptions=S({},r.options),i[n]=r}}function mn(e){return e&&(e.Ctor.options.name||e.tag)}function _n(e,t){return Array.isArray(e)?-1<e.indexOf(t):"string"==typeof e?-1<e.split(",").indexOf(t):"[object RegExp]"===g.call(e)&&e.test(t)}function bn(e,t){var n,i=e.cache,r=e.keys,o=e._vnode;for(n in i){var a=i[n];a&&(a=mn(a.componentOptions))&&!t(a)&&wn(i,n,r,o)}}function wn(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,z(n,t)}u.prototype._init=function(e){var t,n,r,i,o,a,s=this,l=(s._uid=gn++,s._isVue=!0,e&&e._isComponent?(a=e,u=(u=s).$options=Object.create(u.constructor.options),l=a._parentVnode,u.parent=a.parent,l=(u._parentVnode=l).componentOptions,u.propsData=l.propsData,u._parentListeners=l.listeners,u._renderChildren=l.children,u._componentTag=l.tag,a.render&&(u.render=a.render,u.staticRenderFns=a.staticRenderFns)):s.$options=x(vn(s.constructor),e||{},s),(s._renderProxy=s)._self=s),u=l.$options,c=u.parent;if(c&&!u.abstract){for(;c.$options.abstract&&c.$parent;)c=c.$parent;c.$children.push(l)}l.$parent=c,l.$root=c?c.$root:l,l.$children=[],l.$refs={},l._watcher=null,l._inactive=null,l._directInactive=!1,l._isMounted=!1,l._isDestroyed=!1,l._isBeingDestroyed=!1,(a=s)._events=Object.create(null),a._hasHookEvent=!1,(e=a.$options._parentListeners)&&qt(a,e),(r=s)._vnode=null,r._staticTrees=null,e=r.$options,i=r.$vnode=e._parentVnode,o=i&&i.context,r.$slots=ct(e._renderChildren,o),r.$scopedSlots=D,r._c=function(e,t,n,i){return jt(r,e,t,n,i,!1)},r.$createElement=function(e,t,n,i){return jt(r,e,t,n,i,!0)},o=i&&i.data,R(r,"$attrs",o&&o.attrs||D,null,!0),R(r,"$listeners",e._parentListeners||D,null,!0),f(s,"beforeCreate"),(n=ut((t=s).$options.inject,t))&&(M(!1),Object.keys(n).forEach(function(e){R(t,e,n[e])}),M(!0)),ln(s),(o=(i=s).$options.provide)&&(i._provided="function"==typeof o?o.call(i):o),f(s,"created"),s.$options.el&&s.$mount(s.$options.el)},t=u,Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Oe,t.prototype.$delete=Pe,t.prototype.$watch=function(e,t,n){if(O(t))return pn(this,e,t,n);(n=n||{}).user=!0;var i=new W(this,e,t,n);if(n.immediate)try{t.call(this,i.value)}catch(e){q(e,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}},hn=/^hook:/,(t=u).prototype.$on=function(e,t){var n=this;if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n.$on(e[i],t);else(n._events[e]||(n._events[e]=[])).push(t),hn.test(e)&&(n._hasHookEvent=!0);return n},t.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},t.prototype.$off=function(e,t){var n=this;if(arguments.length)if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);else{var o,a=n._events[e];if(a)if(t){for(var s=a.length;s--;)if((o=a[s])===t||o.fn===t){a.splice(s,1);break}}else n._events[e]=null}else n._events=Object.create(null);return n},t.prototype.$emit=function(e){if(t=this._events[e])for(var t=1<t.length?I(t):t,n=I(arguments,1),i='event handler for "'+e+'"',r=0,o=t.length;r<o;r++)Ge(t[r],this,n,this,i);return this},(t=u).prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,o=Wt(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){f(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||z(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),f(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}},Et((t=u).prototype),t.prototype.$nextTick=function(e){return et(e,this)},t.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,r=n._parentVnode;r&&(t.$scopedSlots=ft(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{Dt=t,e=i.call(t._renderProxy,t.$createElement)}catch(n){q(n,t,"render"),e=t._vnode}finally{Dt=null}return(e=(e=Array.isArray(e)&&1===e.length?e[0]:e)instanceof G?e:Fe()).parent=r,e};var h,kn,t=[String,RegExp,Array],t={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:t,exclude:t,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)wn(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){bn(e,function(e){return _n(t,e)})}),this.$watch("exclude",function(t){bn(e,function(e){return!_n(t,e)})})},render:function(){var e=this.$slots.default,t=Nt(e),n=t&&t.componentOptions;if(n){var i=mn(n),r=this.include,o=this.exclude;if(r&&(!i||!_n(r,i))||o&&i&&_n(o,i))return t;r=this.cache,o=this.keys,i=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;r[i]?(t.componentInstance=r[i].componentInstance,z(o,i),o.push(i)):(r[i]=t,o.push(i),this.max&&o.length>parseInt(this.max)&&wn(r,o[0],o,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}},i=(h=u,Object.defineProperty(h,"config",{get:function(){return c}}),h.util={warn:i,extend:S,mergeOptions:x,defineReactive:R},h.set=Oe,h.delete=Pe,h.nextTick=et,h.observable=function(e){return j(e),e},h.options=Object.create(null),ne.forEach(function(e){h.options[e+"s"]=Object.create(null)}),S((h.options._base=h).options.components,t),h.use=function(e){var t,n=this._installedPlugins||(this._installedPlugins=[]);return-1<n.indexOf(e)||((t=I(arguments,1)).unshift(this),"function"==typeof e.install?e.install.apply(e,t):"function"==typeof e&&e.apply(null,t),n.push(e)),this},h.mixin=function(e){return this.options=x(this.options,e),this},yn(h),kn=h,ne.forEach(function(n){kn[n]=function(e,t){return t?("component"===n&&O(t)&&(t.name=t.name||e,t=this.options._base.extend(t)),this.options[n+"s"][e]=t="directive"===n&&"function"==typeof t?{bind:t,update:t}:t):this.options[n+"s"][e]}}),Object.defineProperty(u.prototype,"$isServer",{get:he}),Object.defineProperty(u.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(u,"FunctionalRenderContext",{value:It}),u.version="2.6.12",r("style,class")),Sn=r("input,textarea,option,select,progress"),Fn=r("contenteditable,draggable,spellcheck"),xn=r("events,caret,typing,plaintext-only"),Cn=function(e,t){return Ln(t)||"false"===t?"false":"contenteditable"===e&&xn(t)?t:"true"},En=r("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),In="http://www.w3.org/1999/xlink",Tn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},An=function(e){return Tn(e)?e.slice(6,e.length):""},Ln=function(e){return null==e||!1===e};function On(e,t){return{staticClass:Pn(e.staticClass,t.staticClass),class:B(e.class)?[e.class,t.class]:t.class}}function Pn(e,t){return e?t?e+" "+t:e:t||""}function $n(e){if(Array.isArray(e)){for(var t,n=e,i="",r=0,o=n.length;r<o;r++)B(t=$n(n[r]))&&""!==t&&(i&&(i+=" "),i+=t);return i}if(U(e)){var a,s=e,l="";for(a in s)s[a]&&(l&&(l+=" "),l+=a);return l}return"string"==typeof e?e:""}function Mn(e){return Rn(e)||Dn(e)}var jn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Rn=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Dn=r("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Vn=Object.create(null),Bn=r("text,number,password,search,email,tel,url"),t=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(jn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Nn={create:function(e,t){Un(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Un(e,!0),Un(t))},destroy:function(e){Un(e,!0)}};function Un(e,t){var n,i,r=e.data.ref;B(r)&&(i=e.context,n=e.componentInstance||e.elm,i=i.$refs,t?Array.isArray(i[r])?z(i[r],n):i[r]===n&&(i[r]=void 0):e.data.refInFor?Array.isArray(i[r])?i[r].indexOf(n)<0&&i[r].push(n):i[r]=[n]:i[r]=n)}var zn=new G("",{},[]),Gn=["create","activate","update","remove","destroy"];function qn(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&B(e.data)===B(t.data)&&("input"!==e.tag||(n=B(i=e.data)&&B(i=i.attrs)&&i.type)===(i=B(i=t.data)&&B(i=i.attrs)&&i.type)||Bn(n)&&Bn(i))||N(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&V(t.asyncFactory.error));var n,i}var Hn={create:Wn,update:Wn,destroy:function(e){Wn(e,zn)}};function Wn(e,t){if(e.data.directives||t.data.directives){var n,i,r,o=e,a=t,e=o===zn,s=a===zn,l=Xn(o.data.directives,o.context),u=Xn(a.data.directives,a.context),c=[],d=[];for(n in u)i=l[n],r=u[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Zn(r,"update",a,o),r.def&&r.def.componentUpdated&&d.push(r)):(Zn(r,"bind",a,o),r.def&&r.def.inserted&&c.push(r));if(c.length&&(t=function(){for(var e=0;e<c.length;e++)Zn(c[e],"inserted",a,o)},e?H(a,"insert",t):t()),d.length&&H(a,"postpatch",function(){for(var e=0;e<d.length;e++)Zn(d[e],"componentUpdated",a,o)}),!e)for(n in l)u[n]||Zn(l[n],"unbind",o,o,s)}}var Kn=Object.create(null);function Xn(e,t){var n,i,r,o=Object.create(null);if(e)for(n=0;n<e.length;n++)(i=e[n]).modifiers||(i.modifiers=Kn),(o[(r=i).rawName||r.name+"."+Object.keys(r.modifiers||{}).join(".")]=i).def=Ve(t.$options,"directives",i.name);return o}function Zn(e,t,n,i,r){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,i,r)}catch(i){q(i,n.context,"directive "+e.name+" "+t+" hook")}}Nn=[Nn,Hn];function Jn(e,t){var n=t.componentOptions;if(!(B(n)&&!1===n.Ctor.options.inheritAttrs||V(e.data.attrs)&&V(t.data.attrs))){var i,r,o=t.elm,a=e.data.attrs||{},s=t.data.attrs||{};for(i in s=B(s.__ob__)?t.data.attrs=S({},s):s)r=s[i],a[i]!==r&&Yn(o,i,r);for(i in(le||ce)&&s.value!==a.value&&Yn(o,"value",s.value),a)V(s[i])&&(Tn(i)?o.removeAttributeNS(In,An(i)):Fn(i)||o.removeAttribute(i))}}function Yn(e,t,n){-1<e.tagName.indexOf("-")?Qn(e,t,n):En(t)?Ln(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Fn(t)?e.setAttribute(t,Cn(t,n)):Tn(t)?Ln(n)?e.removeAttributeNS(In,An(t)):e.setAttributeNS(In,t,n):Qn(e,t,n)}function Qn(t,e,n){var i;Ln(n)?t.removeAttribute(e):(!le||ue||"TEXTAREA"!==t.tagName||"placeholder"!==e||""===n||t.__ieph||(t.addEventListener("input",i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)}),t.__ieph=!0),t.setAttribute(e,n))}Hn={create:Jn,update:Jn};function ei(e,t){var n=t.elm,i=t.data,e=e.data;V(i.staticClass)&&V(i.class)&&(V(e)||V(e.staticClass)&&V(e.class))||(i=function(e){for(var t,n=e.data,i=e,r=e;B(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(n=On(r.data,n));for(;B(i=i.parent);)i&&i.data&&(n=On(n,i.data));return e=n.staticClass,t=n.class,B(e)||B(t)?Pn(e,$n(t)):""}(t),(i=B(e=n._transitionClasses)?Pn(i,$n(e)):i)!==n._prevClass&&(n.setAttribute("class",i),n._prevClass=i))}var ti,ni={create:ei,update:ei};function ii(t,n,i){var r=ti;return function e(){null!==n.apply(null,arguments)&&ai(t,e,i,r)}}var ri=a&&!(n&&Number(n[1])<=53);function oi(e,t,n,i){var r,o;ri&&(r=nn,t=(o=t)._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}),ti.addEventListener(e,t,pe?{capture:n,passive:i}:n)}function ai(e,t,n,i){(i||ti).removeEventListener(e,t._wrapper||t,n)}function si(e,t){var n,i,r;V(e.data.on)&&V(t.data.on)||(n=t.data.on||{},e=e.data.on||{},ti=t.elm,B((i=n).__r)&&(i[r=le?"change":"input"]=[].concat(i.__r,i[r]||[]),delete i.__r),B(i.__c)&&(i.change=[].concat(i.__c,i.change||[]),delete i.__c),ot(n,e,oi,ai,ii,t.context),ti=void 0)}var li,a={create:si,update:si};function ui(e,t){if(!V(e.data.domProps)||!V(t.data.domProps)){var n,i,r=t.elm,o=e.data.domProps||{},a=t.data.domProps||{};for(n in B(a.__ob__)&&(a=t.data.domProps=S({},a)),o)n in a||(r[n]="");for(n in a){if(i=a[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),i===o[n])continue;1===r.childNodes.length&&r.removeChild(r.childNodes[0])}if("value"===n&&"PROGRESS"!==r.tagName){var s=V(r._value=i)?"":String(i);c=s,(u=r).composing||"OPTION"!==u.tagName&&!function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(u,c)&&!function(e){var t=u.value,n=u._vModifiers;if(B(n)){if(n.number)return Z(t)!==Z(e);if(n.trim)return t.trim()!==e.trim()}return t!==e}(c)||(r.value=s)}else if("innerHTML"===n&&Dn(r.tagName)&&V(r.innerHTML)){(li=li||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var l=li.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;l.firstChild;)r.appendChild(l.firstChild)}else if(i!==o[n])try{r[n]=i}catch(e){}}}var u,c}var n={create:ui,update:ui},ci=e(function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){e&&1<(e=e.split(n)).length&&(t[e[0].trim()]=e[1].trim())}),t});function di(e){var t=fi(e.style);return e.staticStyle?S(e.staticStyle,t):t}function fi(e){return Array.isArray(e)?T(e):"string"==typeof e?ci(e):e}function pi(e,t,n){if(gi.test(t))e.style.setProperty(t,n);else if(vi.test(n))e.style.setProperty(J(t),n.replace(vi,""),"important");else{var i=mi(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)e.style[i]=n[r];else e.style[i]=n}}var hi,gi=/^--/,vi=/\s*!important$/,yi=["Webkit","Moz","ms"],mi=e(function(e){if(hi=hi||document.createElement("div").style,"filter"!==(e=k(e))&&e in hi)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<yi.length;n++){var i=yi[n]+t;if(i in hi)return i}});function _i(e,t){var n=t.data,e=e.data;if(!(V(n.staticStyle)&&V(n.style)&&V(e.staticStyle)&&V(e.style))){var i,r,o=t.elm,n=e.staticStyle,e=e.normalizedStyle||e.style||{},a=n||e,n=fi(t.data.style)||{},s=(t.data.normalizedStyle=B(n.__ob__)?S({},n):n,function(e){for(var t,n={},i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(t=di(i.data))&&S(n,t);(t=di(e.data))&&S(n,t);for(var r=e;r=r.parent;)r.data&&(t=di(r.data))&&S(n,t);return n}(t));for(r in a)V(s[r])&&pi(o,r,"");for(r in s)(i=s[r])!==a[r]&&pi(o,r,null==i?"":i)}}var bi={create:_i,update:_i},wi=/\s+/;function ki(t,e){var n;(e=e&&e.trim())&&(t.classList?-1<e.indexOf(" ")?e.split(wi).forEach(function(e){return t.classList.add(e)}):t.classList.add(e):(n=" "+(t.getAttribute("class")||"")+" ").indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim()))}function Si(t,e){if(e=e&&e.trim())if(t.classList)-1<e.indexOf(" ")?e.split(wi).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";0<=n.indexOf(i);)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Fi(e){var t;if(e)return"object"==typeof e?(!(t={})!==e.css&&S(t,xi(e.name||"v")),S(t,e),t):"string"==typeof e?xi(e):void 0}var xi=e(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),Ci=o&&!ue,Ei="transition",Ii="animation",Ti="transition",Ai="transitionend",Li="animation",Oi="animationend",Pi=(Ci&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ti="WebkitTransition",Ai="webkitTransitionEnd"),void 0===window.onanimationend)&&void 0!==window.onwebkitanimationend&&(Li="WebkitAnimation",Oi="webkitAnimationEnd"),o?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()});function $i(e){Pi(function(){Pi(e)})}function Mi(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),ki(e,t))}function K(e,t){e._transitionClasses&&z(e._transitionClasses,t),Si(e,t)}function ji(t,e,n){var e=Di(t,e),i=e.type,r=e.timeout,o=e.propCount;if(!i)return n();function a(e){e.target===t&&++l>=o&&u()}var s=i===Ei?Ai:Oi,l=0,u=function(){t.removeEventListener(s,a),n()};setTimeout(function(){l<o&&u()},r+1),t.addEventListener(s,a)}var Ri=/\b(transform|all)(,|$)/;function Di(e,t){var n,e=window.getComputedStyle(e),i=(e[Ti+"Delay"]||"").split(", "),r=(e[Ti+"Duration"]||"").split(", "),i=Vi(i,r),o=(e[Li+"Delay"]||"").split(", "),a=(e[Li+"Duration"]||"").split(", "),o=Vi(o,a),s=0,l=0;return t===Ei?0<i&&(n=Ei,s=i,l=r.length):t===Ii?0<o&&(n=Ii,s=o,l=a.length):l=(n=0<(s=Math.max(i,o))?o<i?Ei:Ii:null)?(n===Ei?r:a).length:0,{type:n,timeout:s,propCount:l,hasTransform:n===Ei&&Ri.test(e[Ti+"Property"])}}function Vi(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map(function(e,t){return Bi(e)+Bi(n[t])}))}function Bi(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ni(t,e){var n=t.elm,i=(B(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb()),Fi(t.data.transition));if(!V(i)&&!B(n._enterCb)&&1===n.nodeType){for(var r=i.css,o=i.type,a=i.enterClass,s=i.enterToClass,l=i.enterActiveClass,u=i.appearClass,c=i.appearToClass,d=i.appearActiveClass,f=i.beforeEnter,p=i.enter,h=i.afterEnter,g=i.enterCancelled,v=i.beforeAppear,y=i.appear,m=i.afterAppear,_=i.appearCancelled,i=i.duration,b=Ht,w=Ht.$vnode;w&&w.parent;)b=w.context,w=w.parent;var k,S,F,x,C,E,I,T,A,L,O=!b._isMounted||!t.isRootInsert;O&&!y&&""!==y||(k=O&&u?u:a,S=O&&d?d:l,F=O&&c?c:s,u=O&&v||f,x=O&&"function"==typeof y?y:p,C=O&&m||h,E=O&&_||g,I=Z(U(i)?i.enter:i),T=!1!==r&&!ue,A=Gi(x),L=n._enterCb=ee(function(){T&&(K(n,F),K(n,S)),L.cancelled?(T&&K(n,k),E&&E(n)):C&&C(n),n._enterCb=null}),t.data.show||H(t,"insert",function(){var e=n.parentNode,e=e&&e._pending&&e._pending[t.key];e&&e.tag===t.tag&&e.elm._leaveCb&&e.elm._leaveCb(),x&&x(n,L)}),u&&u(n),T&&(Mi(n,k),Mi(n,S),$i(function(){K(n,k),L.cancelled||(Mi(n,F),A)||(zi(I)?setTimeout(L,I):ji(n,o,L))})),t.data.show&&(e&&e(),x)&&x(n,L),T)||A||L()}}function Ui(e,t){var n,i,r,o,a,s,l,u,c,d,f,p,h,g,v=e.elm,y=(B(v._enterCb)&&(v._enterCb.cancelled=!0,v._enterCb()),Fi(e.data.transition));if(V(y)||1!==v.nodeType)return t();function m(){g.cancelled||(!e.data.show&&v.parentNode&&((v.parentNode._pending||(v.parentNode._pending={}))[e.key]=e),s&&s(v),f&&(Mi(v,r),Mi(v,a),$i(function(){K(v,r),g.cancelled||(Mi(v,o),p)||(zi(h)?setTimeout(g,h):ji(v,i,g))})),l&&l(v,g),f)||p||g()}B(v._leaveCb)||(n=y.css,i=y.type,r=y.leaveClass,o=y.leaveToClass,a=y.leaveActiveClass,s=y.beforeLeave,l=y.leave,u=y.afterLeave,c=y.leaveCancelled,d=y.delayLeave,y=y.duration,f=!1!==n&&!ue,p=Gi(l),h=Z(U(y)?y.leave:y),g=v._leaveCb=ee(function(){v.parentNode&&v.parentNode._pending&&(v.parentNode._pending[e.key]=null),f&&(K(v,o),K(v,a)),g.cancelled?(f&&K(v,r),c&&c(v)):(t(),u&&u(v)),v._leaveCb=null}),d?d(m):m())}function zi(e){return"number"==typeof e&&!isNaN(e)}function Gi(e){var t;return!V(e)&&(B(t=e.fns)?Gi(Array.isArray(t)?t[0]:t):1<(e._length||e.length))}function qi(e,t){!0!==t.data.show&&Ni(t)}var t=function(e){for(var t,x={},n=e.modules,C=e.nodeOps,i=0;i<Gn.length;++i)for(x[Gn[i]]=[],t=0;t<n.length;++t)B(n[t][Gn[i]])&&x[Gn[i]].push(n[t][Gn[i]]);function o(e){var t=C.parentNode(e);B(t)&&C.removeChild(t,e)}function E(e,t,n,i,r,o,a){(e=B(e.elm)&&B(o)?o[a]=Ce(e):e).isRootInsert=!r,function(e,t,n,i){var r=e.data;if(B(r)){var o=B(e.componentInstance)&&r.keepAlive;if(B(r=r.hook)&&B(r=r.init)&&r(e,!1),B(e.componentInstance)){if(p(e,t),u(n,e.elm,i),N(o)){for(var a,r=e,s=t,o=n,e=i,l=r;l.componentInstance;)if(B(a=(l=l.componentInstance._vnode).data)&&B(a=a.transition)){for(a=0;a<x.activate.length;++a)x.activate[a](zn,l);s.push(l);break}u(o,r.elm,e)}return 1}}}(e,t,n,i)||(o=e.data,a=e.children,B(r=e.tag)?(e.elm=e.ns?C.createElementNS(e.ns,r):C.createElement(r,e),s(e),h(e,a,t),B(o)&&g(e,t)):N(e.isComment)?e.elm=C.createComment(e.text):e.elm=C.createTextNode(e.text),u(n,e.elm,i))}function p(e,t){B(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,I(e)?(g(e,t),s(e)):(Un(e),t.push(e))}function u(e,t,n){B(e)&&(B(n)?C.parentNode(n)===e&&C.insertBefore(e,t,n):C.appendChild(e,t))}function h(e,t,n){if(Array.isArray(t))for(var i=0;i<t.length;++i)E(t[i],n,e.elm,null,!0,t,i);else _(e.text)&&C.appendChild(e.elm,C.createTextNode(String(e.text)))}function I(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return B(e.tag)}function g(e,t){for(var n=0;n<x.create.length;++n)x.create[n](zn,e);B(i=e.data.hook)&&(B(i.create)&&i.create(zn,e),B(i.insert))&&t.push(e)}function s(e){var t;if(B(t=e.fnScopeId))C.setStyleScope(e.elm,t);else for(var n=e;n;)B(t=n.context)&&B(t=t.$options._scopeId)&&C.setStyleScope(e.elm,t),n=n.parent;B(t=Ht)&&t!==e.context&&t!==e.fnContext&&B(t=t.$options._scopeId)&&C.setStyleScope(e.elm,t)}function T(e,t,n,i,r,o){for(;i<=r;++i)E(n[i],o,e,t,!1,n,i)}function v(e){var t,n,i=e.data;if(B(i))for(B(t=i.hook)&&B(t=t.destroy)&&t(e),t=0;t<x.destroy.length;++t)x.destroy[t](e);if(B(t=e.children))for(n=0;n<e.children.length;++n)v(e.children[n])}function A(e,t,n){for(;t<=n;++t){var i=e[t];B(i)&&(B(i.tag)?(function e(t,n){if(B(n)||B(t.data)){var i,r=x.remove.length+1;for(B(n)?n.listeners+=r:n=function(e,t){function n(){0==--n.listeners&&o(e)}return n.listeners=t,n}(t.elm,r),B(i=t.componentInstance)&&B(i=i._vnode)&&B(i.data)&&e(i,n),i=0;i<x.remove.length;++i)x.remove[i](t,n);B(i=t.data.hook)&&B(i=i.remove)?i(t,n):n()}else o(t.elm)}(i),v(i)):o(i.elm))}}function L(e,t,n,i,r,o){if(e!==t){i=(t=B(t.elm)&&B(i)?i[r]=Ce(t):t).elm=e.elm;if(N(e.isAsyncPlaceholder))B(t.asyncFactory.resolved)?O(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(N(t.isStatic)&&N(e.isStatic)&&t.key===e.key&&(N(t.isCloned)||N(t.isOnce)))t.componentInstance=e.componentInstance;else{var a,r=t.data,s=(B(r)&&B(a=r.hook)&&B(a=a.prepatch)&&a(e,t),e.children),l=t.children;if(B(r)&&I(t)){for(a=0;a<x.update.length;++a)x.update[a](e,t);B(a=r.hook)&&B(a=a.update)&&a(e,t)}if(V(t.text))if(B(s)&&B(l)){if(s!==l){var u=i;var c=s;var d=l;var f=n;for(var p,h,g,v=0,y=0,m=c.length-1,_=c[0],b=c[m],w=d.length-1,k=d[0],S=d[w],F=!o;v<=m&&y<=w;)V(_)?_=c[++v]:V(b)?b=c[--m]:qn(_,k)?(L(_,k,f,d,y),_=c[++v],k=d[++y]):qn(b,S)?(L(b,S,f,d,w),b=c[--m],S=d[--w]):qn(_,S)?(L(_,S,f,d,w),F&&C.insertBefore(u,_.elm,C.nextSibling(b.elm)),_=c[++v],S=d[--w]):k=(qn(b,k)?(L(b,k,f,d,y),F&&C.insertBefore(u,b.elm,_.elm),b=c[--m]):(V(p)&&(p=function(e,t,n){for(var i,r={},o=t;o<=n;++o)B(i=e[o].key)&&(r[i]=o);return r}(c,v,m)),!V(h=B(k.key)?p[k.key]:function(e,t,n,i){for(var r=n;r<i;r++){var o=t[r];if(B(o)&&qn(e,o))return r}}(k,c,v,m))&&qn(g=c[h],k)?(L(g,k,f,d,y),c[h]=void 0,F&&C.insertBefore(u,g.elm,_.elm)):E(k,f,u,_.elm,!1,d,y)),d[++y]);m<v?T(u,V(d[w+1])?null:d[w+1].elm,d,y,w,f):w<y&&A(c,v,m)}}else B(l)?(B(e.text)&&C.setTextContent(i,""),T(i,null,l,0,l.length-1,n)):B(s)?A(s,0,s.length-1):B(e.text)&&C.setTextContent(i,"");else e.text!==t.text&&C.setTextContent(i,t.text);B(r)&&B(a=r.hook)&&B(a=a.postpatch)&&a(e,t)}}}function y(e,t,n){if(N(n)&&B(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var m=r("attrs,class,staticClass,staticStyle,key");function O(e,t,n,i){var r,o=t.tag,a=t.data,s=t.children;if(i=i||a&&a.pre,t.elm=e,N(t.isComment)&&B(t.asyncFactory))t.isAsyncPlaceholder=!0;else if(B(a)&&(B(r=a.hook)&&B(r=r.init)&&r(t,!0),B(r=t.componentInstance)))p(t,n);else if(B(o)){if(B(s))if(e.hasChildNodes())if(B(r=a)&&B(r=r.domProps)&&B(r=r.innerHTML)){if(r!==e.innerHTML)return}else{for(var l=!0,u=e.firstChild,c=0;c<s.length;c++){if(!u||!O(u,s[c],n,i)){l=!1;break}u=u.nextSibling}if(!l||u)return}else h(t,s,n);if(B(a)){var d,f=!1;for(d in a)if(!m(d)){f=!0,g(t,n);break}!f&&a.class&&nt(a.class)}}else e.data!==t.text&&(e.data=t.text);return 1}return function(e,t,n,i){if(!V(t)){var r=!1,o=[];if(V(e))r=!0,E(t,o);else{var a=B(e.nodeType);if(!a&&qn(e,t))L(e,t,o,null,null,i);else{if(a){if(1===e.nodeType&&e.hasAttribute(te)&&(e.removeAttribute(te),n=!0),N(n)&&O(e,t,o))return y(t,o,!0),e;i=e,e=new G(C.tagName(i).toLowerCase(),{},[],void 0,i)}a=e.elm,n=C.parentNode(a);if(E(t,o,a._leaveCb?null:n,C.nextSibling(a)),B(t.parent))for(var s=t.parent,l=I(t);s;){for(var u=0;u<x.destroy.length;++u)x.destroy[u](s);if(s.elm=t.elm,l){for(var c=0;c<x.create.length;++c)x.create[c](zn,s);var d=s.data.hook.insert;if(d.merged)for(var f=1;f<d.fns.length;f++)d.fns[f]()}else Un(s);s=s.parent}B(n)?A([e],0,0):B(e.tag)&&v(e)}}return y(t,o,r),t.elm}B(e)&&v(e)}}({nodeOps:t,modules:[Hn,ni,a,n,bi,o?{create:qi,activate:qi,remove:function(e,t){!0!==e.data.show?Ui(e,t):t()}}:{}].concat(Nn)}),Hi=(ue&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&Qi(e,"input")}),{inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?H(n,"postpatch",function(){Hi.componentUpdated(e,t,n)}):Wi(e,t,n.context),e._vOptions=[].map.call(e.options,Zi)):"textarea"!==n.tag&&!Bn(e.type)||(e._vModifiers=t.modifiers,t.modifiers.lazy)||(e.addEventListener("compositionstart",Ji),e.addEventListener("compositionend",Yi),e.addEventListener("change",Yi),ue&&(e.vmodel=!0))},componentUpdated:function(e,t,n){var i,r;"select"===n.tag&&(Wi(e,t,n.context),i=e._vOptions,(r=e._vOptions=[].map.call(e.options,Zi)).some(function(e,t){return!l(e,i[t])}))&&(e.multiple?t.value.some(function(e){return Xi(e,r)}):t.value!==t.oldValue&&Xi(t.value,r))&&Qi(e,"change")}});function Wi(e,t){Ki(e,t),(le||ce)&&setTimeout(function(){Ki(e,t)},0)}function Ki(e,t){var n=t.value,i=e.multiple;if(!i||Array.isArray(n)){for(var r,o,a=0,s=e.options.length;a<s;a++)if(o=e.options[a],i)r=-1<Q(n,Zi(o)),o.selected!==r&&(o.selected=r);else if(l(Zi(o),n))return e.selectedIndex!==a&&(e.selectedIndex=a);i||(e.selectedIndex=-1)}}function Xi(t,e){return e.every(function(e){return!l(e,t)})}function Zi(e){return"_value"in e?e._value:e.value}function Ji(e){e.target.composing=!0}function Yi(e){e.target.composing&&(e.target.composing=!1,Qi(e.target,"input"))}function Qi(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function er(e){return!e.componentInstance||e.data&&e.data.transition?e:er(e.componentInstance._vnode)}Hn={model:Hi,show:{bind:function(e,t,n){var t=t.value,i=(n=er(n)).data&&n.data.transition,r=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;t&&i?(n.data.show=!0,Ni(n,function(){e.style.display=r})):e.style.display=t?r:"none"},update:function(e,t,n){var i=t.value;!i!=!t.oldValue&&((n=er(n)).data&&n.data.transition?(n.data.show=!0,i?Ni(n,function(){e.style.display=e.__vOriginalDisplay}):Ui(n,function(){e.style.display="none"})):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},ni={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function tr(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?tr(Nt(t.children)):e}function nr(e){var t,n={},i=e.$options;for(t in i.propsData)n[t]=e[t];var r,o=i._parentListeners;for(r in o)n[k(r)]=o[r];return n}function ir(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function rr(e){return e.tag||Bt(e)}function or(e){return"show"===e.name}a={name:"transition",props:ni,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(rr)).length){var i=this.mode,n=n[0];if(!function(e){for(;e=e.parent;)if(e.data.transition)return 1}(this.$vnode)){var r=tr(n);if(r){if(this._leaving)return ir(e,n);var o="__transition-"+this._uid+"-",o=(r.key=null==r.key?r.isComment?o+"comment":o+r.tag:!_(r.key)||0===String(r.key).indexOf(o)?r.key:o+r.key,(r.data||(r.data={})).transition=nr(this)),a=this._vnode,s=tr(a);if(r.data.directives&&r.data.directives.some(or)&&(r.data.show=!0),s&&s.data&&(s.key!==r.key||s.tag!==r.tag)&&!Bt(s)&&(!s.componentInstance||!s.componentInstance._vnode.isComment)){s=s.data.transition=S({},o);if("out-in"===i)return this._leaving=!0,H(s,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),ir(e,n);if("in-out"===i){if(Bt(r))return a;var l,e=function(){l()};H(o,"afterEnter",e),H(o,"enterCancelled",e),H(s,"delayLeave",function(e){l=e})}}}}return n}}},n=S({tag:String,moveClass:String},ni);function ar(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function sr(e){e.data.newPos=e.elm.getBoundingClientRect()}function lr(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,t=t.top-n.top;(i||t)&&(e.data.moved=!0,(n=e.elm.style).transform=n.WebkitTransform="translate("+i+"px,"+t+"px)",n.transitionDuration="0s")}delete n.mode;bi={Transition:a,TransitionGroup:{props:n,beforeMount:function(){var i=this,r=this._update;this._update=function(e,t){var n=Wt(i);i.__patch__(i._vnode,i.kept,!1,!0),i._vnode=i.kept,n(),r.call(i,e,t)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],a=nr(this),s=0;s<r.length;s++){var l=r[s];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(o.push(l),((n[l.key]=l).data||(l.data={})).transition=a)}if(i){for(var u=[],c=[],d=0;d<i.length;d++){var f=i[d];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),(n[f.key]?u:c).push(f)}this.kept=e(t,null,u),this.removed=c}return e(t,null,o)},updated:function(){var e=this.prevChildren,i=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,i)&&(e.forEach(ar),e.forEach(sr),e.forEach(lr),this._reflow=document.body.offsetHeight,e.forEach(function(e){var n;e.data.moved&&(e=(n=e.elm).style,Mi(n,i),e.transform=e.WebkitTransform=e.transitionDuration="",n.addEventListener(Ai,n._moveCb=function e(t){t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener(Ai,e),n._moveCb=null,K(n,i))}))}))},methods:{hasMove:function(e,t){var n;return!!Ci&&(this._hasMove||(n=e.cloneNode(),e._transitionClasses&&e._transitionClasses.forEach(function(e){Si(n,e)}),ki(n,t),n.style.display="none",this.$el.appendChild(n),e=Di(n),this.$el.removeChild(n),this._hasMove=e.hasTransform))}}}};u.config.mustUseProp=function(e,t,n){return"value"===n&&Sn(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},u.config.isReservedTag=Mn,u.config.isReservedAttr=i,u.config.getTagNamespace=function(e){return Dn(e)?"svg":"math"===e?"math":void 0},u.config.isUnknownElement=function(e){var t;return!o||!Mn(e)&&(e=e.toLowerCase(),null!=Vn[e]?Vn[e]:(t=document.createElement(e),-1<e.indexOf("-")?Vn[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Vn[e]=/HTMLUnknownElement/.test(t.toString())))},S(u.options.directives,Hn),S(u.options.components,bi),u.prototype.__patch__=o?t:$,u.prototype.$mount=function(e,t){return n=this,r=e=e&&o?"string"==typeof(r=e)?document.querySelector(r)||document.createElement("div"):r:void 0,i=t,n.$el=r,n.$options.render||(n.$options.render=Fe),f(n,"beforeMount"),new W(n,function(){n._update(n._render(),i)},$,{before:function(){n._isMounted&&!n._isDestroyed&&f(n,"beforeUpdate")}},!0),i=!1,null==n.$vnode&&(n._isMounted=!0,f(n,"mounted")),n;var n,i,r},o&&setTimeout(function(){c.devtools&&ge&&ge.emit("init",u)},0),dr.exports=u}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:2}],7:[function(e,t,n){var i=n.cache={};function r(){}n.insert=function(e){if(i[e])return r;i[e]=!0;var t=document.createElement("style");return t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e,document.getElementsByTagName("head")[0].appendChild(t),function(){document.getElementsByTagName("head")[0].removeChild(t),i[e]=!1}}},{}],8:[function(e,t,n){var i,r,o=e("vueify/lib/insert-css").insert(".choose-and-zoom-to-feature[data-v-3c5d6465]{\n display: flex;\n flex-direction: column;\n justify-content: space-between;\n}\n\n#editing-layers-choose-feature .editing-choose-feature-radio-input[data-v-3c5d6465]{\n  align-items: center;\n  padding: 5px;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #eeeeee;\n}"),n=(Object.defineProperty(n,"__esModule",{value:!0}),i=g3wsdk.gui.GUI,n.default={name:"choosefeature",data:function(){return{feature:this.$options.feature}},methods:{selectFeature:function(e){this.feature.splice(0),this.feature.push(e)},getAttributesFeature:function(e){var n=e.getProperties();return this.$options.attributes.map(function(e){var t=e.label,e=e.name;return{attribute:t,value:n[e]}})},zoomToFeature:function(e){i.getService("map").zoomToFeatures([e],{highlight:!0,duration:1e3})}},mounted:function(){i.closeContent()}},t.exports.__esModule&&(t.exports=t.exports.default),"function"==typeof t.exports?t.exports.options:t.exports);n.functional,n.render=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",{attrs:{id:"editing-layers-choose-feature"}},n._l(n.$options.features,function(t,e){return i("div",{staticClass:"editing-choose-feature-radio-input"},[i("section",{staticClass:"choose-and-zoom-to-feature"},[i("div",[i("input",{staticClass:"magic-radio",attrs:{id:"choose_feature_"+e,name:"radio",type:"radio"},on:{click:function(e){return e.stopPropagation(),n.selectFeature(t)}}}),n._v(" "),i("label",{staticStyle:{color:"transparent"},attrs:{for:"choose_feature_"+e}},[n._v("id\n        ")])]),n._v(" "),i("div",{staticClass:"skin-color",class:n.g3wtemplate.font.marker,staticStyle:{"padding-left":"3px","font-size":"1.3em",cursor:"pointer","margin-top":"10px"},on:{click:function(e){return e.stopPropagation(),n.zoomToFeature(t)}}})]),n._v(" "),i("section",{staticStyle:{"overflow-x":"auto",display:"flex"}},n._l(n.getAttributesFeature(t),function(e){var t=e.attribute,e=e.value;return i("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",padding:"5px"}},[i("span",{staticStyle:{"font-weight":"bold","margin-bottom":"10px"}},[n._v(n._s(t))]),n._v(" "),i("span",{staticStyle:{"align-self":"start","white-space":"nowrap"}},[n._v(n._s(e))])])}),0)])}),0)},n.staticRenderFns=[],n._scopeId="data-v-3c5d6465",t.hot&&((r=e("vue-hot-reload-api")).install(e("vue"),!0),r.compatible)&&(t.hot.accept(),t.hot.dispose(o),t.hot.data?r.reload("data-v-3c5d6465",n):r.createRecord("data-v-3c5d6465",n))},{vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],9:[function(e,t,n){var r,i,o,a,s,l=e("vueify/lib/insert-css").insert(".g3w-editing-other-layers-features[data-v-0a61c6b7] {\n  overflow: auto;\n}"),n=(Object.defineProperty(n,"__esModule",{value:!0}),r=g3wsdk.constant.G3W_FID,i=g3wsdk.gui.GUI,o=g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature,a=g3wsdk.core.map.MapLayersStoreRegistry,s=g3wsdk.gui.vue.Mixins.resizeMixin,n.default={name:"Copyfeaturesfromotherlayers",mixins:[s],data:function(){return{selectedFeatures:this.$options.selectedFeatures,disabled:!0,_height:0}},computed:{showEditAttributes:function(){return 1<Object.values(this.$options.layers).reduce(function(e,t){t=t.features;return e+=t.length},0)}},methods:{resize:function(){var e=this;this.$nextTick(function(){return e.$data._height=window.innerHeight-200})},getAttributesFeature:function(e,t){var t=this.$options.layers[t],n=t.external,i=t.fields;return o(e.getProperties()).filter(function(e){return e!==r}).map(function(t){return{attribute:n?t:i.find(function(e){return e.name===t}).label,value:e.get(t)}})},selectFeature:function(t){this.selectedFeatures.find(function(e){return e===t})?this.selectedFeatures=this.selectedFeatures.filter(function(e){return e!==t}):this.selectedFeatures.push(t),this.disabled=this.selectedFeatures.length<2,this.$options.editAttributes.state=!this.disabled&&this.$options.editAttributes.state},getLayerTitle:function(e){var t=a.getLayerById(e);return t?t.getTitle():i.getService("map").getLayerById(e).get("name")},zoomToFeature:function(e){i.getService("map").zoomToFeatures([e],{highlight:!0,duration:1e3})}},beforeCreate:function(){this.delayType="debounce"},mounted:function(){i.closeContent()}},t.exports.__esModule&&(t.exports=t.exports.default),"function"==typeof t.exports?t.exports.options:t.exports);n.functional,n.render=function(){var r=this,e=r.$createElement,i=r._self._c||e;return i("div",{staticClass:"editing-layers-features"},[r.showEditAttributes?i("div",{directives:[{name:"disabled",rawName:"v-disabled",value:r.disabled,expression:"disabled"}],staticStyle:{display:"flex","justify-content":"flex-end"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:r.$options.editAttributes.state,expression:"$options.editAttributes.state"}],staticClass:"magic-checkbox",attrs:{id:"g3w_edit_attributes_of_select_feature_from_layer",type:"checkbox"},domProps:{checked:Array.isArray(r.$options.editAttributes.state)?-1<r._i(r.$options.editAttributes.state,null):r.$options.editAttributes.state},on:{change:function(e){var t,n=r.$options.editAttributes.state,e=e.target,i=!!e.checked;Array.isArray(n)?(t=r._i(n,null),e.checked?t<0&&r.$set(r.$options.editAttributes,"state",n.concat([null])):-1<t&&r.$set(r.$options.editAttributes,"state",n.slice(0,t).concat(n.slice(t+1)))):r.$set(r.$options.editAttributes,"state",i)}}}),r._v(" "),i("label",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.modal.tools.copyfeaturefromotherlayer.edit_attributes",expression:"'editing.modal.tools.copyfeaturefromotherlayer.edit_attributes'"}],staticStyle:{color:"#000000"},attrs:{for:"g3w_edit_attributes_of_select_feature_from_layer"}})]):r._e(),r._v(" "),i("section",{staticClass:"g3w-editing-other-layers-features",style:{height:r.$data._height+"px"}},r._l(Object.keys(r.$options.layers),function(n){return i("div",[i("div",{staticClass:"skin-color",staticStyle:{"font-weight":"bold","font-size":"1.2em"}},[r._v(r._s(r.getLayerTitle(n)))]),r._v(" "),i("divider"),r._v(" "),i("div",{staticClass:"copy-features-for-layer-content",staticStyle:{"overflow-x":"auto"}},r._l(r.$options.layers[n].features,function(t,e){return i("div",{staticStyle:{padding:"5px",position:"relative",display:"flex","align-items":"baseline","border-bottom":"1px solid #eee"}},[i("div",{staticStyle:{display:"flex","flex-direction":"column","border-right":"1px solid #eee"}},[i("div",{staticClass:"skin-color",class:r.g3wtemplate.font.marker,staticStyle:{padding:"0 5px 15px 5px","font-size":"1.1em",cursor:"pointer","margin-right":"5px"},on:{click:function(e){return e.stopPropagation(),r.zoomToFeature(t)}}}),r._v(" "),i("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.steps.help.select_elements",expression:"'plugins.editing.steps.help.select_elements'",arg:"right",modifiers:{create:!0}}]},[i("input",{staticClass:"magic-checkbox",attrs:{id:n+"_"+e+"_select_feature_from_layer",type:"checkbox"},on:{click:function(e){return e.stopPropagation(),r.selectFeature(t)}}}),r._v(" "),i("label",{staticStyle:{color:"#FFF"},attrs:{for:n+"_"+e+"_select_feature_from_layer"}},[r._v(" "+r._s(t.getId()||0)+"\n                  ")])])]),r._v(" "),r._l(r.getAttributesFeature(t,n),function(e){var t=e.attribute,e=e.value;return i("div",{staticStyle:{display:"flex","flex-direction":"column",padding:"10px"}},[i("span",{staticStyle:{"font-weight":"bold","margin-bottom":"10px"}},[r._v(r._s(t))]),r._v(" "),i("span",{staticStyle:{"align-self":"start"}},[r._v(r._s(e))])])})],2)}),0)],1)}),0)])},n.staticRenderFns=[],n._scopeId="data-v-0a61c6b7",t.hot&&((s=e("vue-hot-reload-api")).install(e("vue"),!0),s.compatible)&&(t.hot.accept(),t.hot.dispose(l),t.hot.data?s.reload("data-v-0a61c6b7",n):s.createRecord("data-v-0a61c6b7",n))},{vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),i=g3wsdk.constant.G3W_FID,r=g3wsdk.gui.GUI,o=g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature,a=g3wsdk.core.map.MapLayersStoreRegistry,n.default={name:"Copyfeaturesfromotherlayers",data:function(){return{features:this.$options.features,selectfeature:null,selectedFeatures:this.$options.selectedFeatures}},methods:{getAttributesFeature:function(e){var n=this.$options.fields;return o(e.getProperties()).filter(function(e){return e!==i}).map(function(t){return{attribute:n?n.find(function(e){return e.name===t}).label:t,value:e.get(t)}})},getLayerTitle:function(e){return a.getLayerById(e).getTitle()},zoomToFeature:function(e){r.getService("map").zoomToFeatures([e],{highlight:!0,duration:1e3})}},watch:{selectfeature:function(e){this.selectedFeatures.splice(0,1,e)}}},t.exports.__esModule&&(t.exports=t.exports.default);var i,r,o,a,s,n="function"==typeof t.exports?t.exports.options:t.exports;n.functional,n.render=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",{staticClass:"editing-layers-features"},[i("div",{staticClass:"copy-features-for-layer-content",staticStyle:{"overflow-x":"auto"}},n._l(n.features,function(t,e){return i("div",{staticStyle:{padding:"5px",position:"relative",display:"flex","align-items":"baseline","border-bottom":"1px solid #eee"}},[i("div",{staticStyle:{display:"flex","flex-direction":"column","border-right":"1px solid #eee"}},[i("div",{staticClass:"skin-color",class:n.g3wtemplate.font.marker,staticStyle:{padding:"0 5px 15px 5px","font-size":"1.1em",cursor:"pointer","margin-right":"5px"},on:{click:function(e){return e.stopPropagation(),n.zoomToFeature(t)}}}),n._v(" "),i("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.steps.help.select_elements",expression:"'plugins.editing.steps.help.select_elements'",arg:"right",modifiers:{create:!0}}]},[i("input",{directives:[{name:"model",rawName:"v-model",value:n.selectfeature,expression:"selectfeature"}],staticClass:"magic-radio",attrs:{id:n.layerId+"_"+e+"_select_feature_from_layer",name:"radio",type:"radio"},domProps:{value:t,checked:n._q(n.selectfeature,t)},on:{change:function(e){n.selectfeature=t}}}),n._v(" "),i("label",{staticStyle:{color:"#FFF"},attrs:{for:n.layerId+"_"+e+"_select_feature_from_layer"}},[n._v(n._s(e))])])]),n._v(" "),n._l(n.getAttributesFeature(t),function(e){var t=e.attribute,e=e.value;return i("div",{staticStyle:{display:"flex","flex-direction":"column",padding:"10px"}},[i("span",{staticStyle:{"font-weight":"bold","margin-bottom":"10px"}},[n._v(n._s(t))]),n._v(" "),i("span",{staticStyle:{"align-self":"start"}},[n._v(n._s(e))])])})],2)}),0)])},n.staticRenderFns=[],t.hot&&((s=e("vue-hot-reload-api")).install(e("vue"),!0),s.compatible)&&(t.hot.accept(),t.hot.data?s.reload("data-v-9d236326",n):s.createRecord("data-v-9d236326",n))},{vue:5,"vue-hot-reload-api":3}],11:[function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}Object.defineProperty(n,"__esModule",{value:!0}),c=i(e("./Toolbox.vue")),o=i(e("./SelectEditingLayers.vue")),l=g3wsdk.gui.GUI,u=g3wsdk.core.ApplicationState,n.default={name:"Editing",data:function(){return{saving:!1}},components:{toolbox:c.default,selectlayers:o.default},transitions:{addremovetransition:"showhide"},methods:{undo:function(){this.$options.service.undo()},redo:function(){this.$options.service.redo()},commit:function(e){var t=this;this.saving=!0,this.$options.service.commit({toolbox:this.$options.service.getToolBoxById(e),modal:!1}).always(function(){return t.saving=!1})},saveAll:function(){},startToolBox:(s=r(function*(e){var t=this,e=this._getToolBoxById(e);if(u.online&&e.canEdit()){var n=e.getDependencies().find(function(e){return t._getToolBoxById(e).isDirty()});if(n)try{yield this.$options.service.commitDirtyToolBoxes(n)}catch(e){}e.start()}}),function(e){return s.apply(this,arguments)}),stopToolBox:function(e){var t=this._getToolBoxById(e);t.state.editing.history.commit?this.$options.service.commit().always(function(){return t.stop()}):t.stop()},saveToolBox:function(e){this._getToolBoxById(e).save()},_setActiveToolOfToolbooxSelected:function(e,t){var n=this._getToolBoxById(t);this.state.toolboxidactivetool=t,n.setActiveTool(n.getToolById(e))},startActiveTool:function(t,n){var i=this;this.state.toolboxidactivetool&&n!==this.state.toolboxidactivetool?this._checkDirtyToolBoxes(this.state.toolboxidactivetool).then(function(e){e&&e.stopActiveTool(),i._setActiveToolOfToolbooxSelected(t,n)}):this._setActiveToolOfToolbooxSelected(t,n)},stopActiveTool:function(e){this._getToolBoxById(e).stopActiveTool()},setSelectedToolbox:(a=r(function*(e){var e=this._getToolBoxById(e),t=this.$options.service.getToolBoxes().find(function(e){return e.isSelected()});t&&(t.setSelected(!1),t.clearMessage()),e.setSelected(!0),this.state.toolboxselected=e}),function(e){return a.apply(this,arguments)}),_checkDirtyToolBoxes:function(e){return this.$options.service.commitDirtyToolBoxes(e)},_getToolBoxById:function(e){return this.$options.service.getToolBoxById(e)},_enableEditingButtons:function(e){this.editingButtonsEnabled=!e}},computed:{message:function(){return""},canCommit:function(){return"default"===this.$options.service.getSaveConfig().mode&&this.state.toolboxselected&&this.state.toolboxselected.state.editing.history.commit&&this.editingButtonsEnabled},canUndo:function(){var e=this.state.toolboxselected&&this.state.toolboxselected.state.editing.history.undo&&this.editingButtonsEnabled;return this.$options.service.fireEvent("canUndo",e),e},canRedo:function(){var e=this.state.toolboxselected&&this.state.toolboxselected.state.editing.history.redo&&this.editingButtonsEnabled;return this.$options.service.fireEvent("canRedo",e),e}},watch:{canCommit:function(e){this.$options.service.registerLeavePage(e)}},created:function(){this.appState=u,this.$options.service.registerOnLineOffLineEvent(),l.closeContent(),this.$options.service.setOpenEditingPanel(!0),l.on("opencontent",this._enableEditingButtons),l.on("closeform",this._enableEditingButtons),l.on("closecontent",this._enableEditingButtons)},beforeDestroy:function(){this.$options.service.setOpenEditingPanel(!1),l.off("opencontent",this._enableEditingButtons),l.off("closeform",this._enableEditingButtons),l.off("closecontent",this._enableEditingButtons),this.$options.service.unregisterOnLineOffLineEvent(),this.$options.service.fireEvent("closeeditingpanel"),this.$options.service.onCloseEditingPanel(),this.$options.service.clearAllLayersUniqueFieldsValues()}},t.exports.__esModule&&(t.exports=t.exports.default);var o,a,s,l,u,c,n="function"==typeof t.exports?t.exports.options:t.exports;n.functional,n.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"g3w-editing-panel"},[n("bar-loader",{attrs:{loading:t.saving}}),t._v(" "),t.appState.online?t._e():n("div",{staticStyle:{"margin-bottom":"5px",padding:"5px","border-radius":"3px","background-color":"orange",color:"white","font-weight":"bold"},attrs:{id:"onlineofflinemessage"}},[n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.messages.offline",expression:"'editing.messages.offline'"}]})]),t._v(" "),t.showcommitbar?n("div",{directives:[{name:"disabled",rawName:"v-disabled",value:t.saving,expression:"saving"}],staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"5px"}},[n("div",{staticClass:"editing-button",class:{enabled:t.canCommit},staticStyle:{"margin-right":"auto"},on:{click:function(e){e.stopPropagation(),t.canCommit&&t.commit()}}},[n("span",{staticClass:"editing-icon",class:t.g3wtemplate.font.save})]),t._v(" "),n("div",{staticClass:"editing-button",class:{enabled:t.canUndo},on:{click:function(e){e.stopPropagation(),t.canUndo&&t.undo()}}},[n("span",{staticClass:"editing-icon",class:t.g3wtemplate.font["arrow-left"]})]),t._v(" "),n("div",{staticClass:"editing-button",class:{enabled:t.canRedo},on:{click:function(e){e.stopPropagation(),t.canRedo&&t.redo()}}},[n("span",{staticClass:"editing-icon",class:t.g3wtemplate.font["arrow-right"]})])]):n("div",{staticStyle:{height:"10px"}}),t._v(" "),t.state.showselectlayers&&1<t.state.toolboxes.length?n("selectlayers"):t._e(),t._v(" "),n("div",{attrs:{id:"toolboxes"}},t._l(t.state.toolboxes,function(e){return n("toolbox",{key:e.id,attrs:{state:e,resourcesurl:t.resourcesurl},on:{setselectedtoolbox:t.setSelectedToolbox,starttoolbox:t.startToolBox,stoptoolbox:t.stopToolBox,savetoolbox:t.saveToolBox,setactivetool:t.startActiveTool,stopactivetool:t.stopActiveTool}})}),1)],1)},n.staticRenderFns=[],t.hot&&((c=e("vue-hot-reload-api")).install(e("vue"),!0),c.compatible)&&(t.hot.accept(),t.hot.data?c.reload("data-v-cb98e6ce",n):c.createRecord("data-v-cb98e6ce",n))},{"./SelectEditingLayers.vue":14,"./Toolbox.vue":17,vue:5,"vue-hot-reload-api":3}],12:[function(g,e,t){var n,i,r,o,a,v,y,s,l,u=g("vueify/lib/insert-css").insert(".g3w-editing-new-relation-vector-type[data-v-112912af] {\n  margin-bottom: 5px;\n  font-weight: bold;\n}");function c(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),o=g3wsdk.core.i18n.tPlugin,a=g3wsdk.core.utils.toRawType,v=g("../services/relationservice"),y=g3wsdk.core.layer.Layer,d=g3wsdk.gui.vue.Mixins,s=d.fieldsMixin,l=d.resizeMixin,d=d.mediaMixin,t.default={mixins:[d,s,l],name:"g3w-relation",data:function(){return{loading:!1,showAddVectorRelationTools:!1,copylayerid:null,active:!1,showallfieldsindex:null,tooltips:{add_relation:"plugins.editing.form.relations.tooltips.add_relation",link_relation:"plugins.editing.form.relations.tooltips.link_relation",open_relation_tool:"plugins.editing.form.relations.tooltips.open_relation_tools",unlink_relation:"plugins.editing.form.relations.tooltips.unlink_relation"},value:null,placeholdersearch:o("editing.search")+" ..."}},methods:{resize:function(){this.active&&"none"!==this.$el.style.display&&($(this.$refs.relation_body).find("div.dataTables_scrollBody").height($(".g3wform_body:visible").height()-$(".g3wform_footer:visible").height()-$(this.$refs.relation_header_title).outerHeight()-$(this.$refs.relation_header_tools).outerHeight()-$(this.$el).find(".dataTables_scrollHead").outerHeight()-$(this.$el).find(".dataTables_paginate.paging_simple_numbers").outerHeight()-$(".editing-save-all-form:visible").outerHeight()-(this.isVectorRelation&&this.showAddVectorRelationTools?$(this.$refs.relation_vector_tools).outerHeight():0)),this.relationsTable)&&this.relationsTable.columns.adjust()},unlinkRelation:function(e){this._service.unlinkRelation(e)},copyFeatureFromOtherLayer:function(){var t=this,e=g("../services/editingservice"),n=this.copyFeatureLayers.find(function(e){return e.id===t.copylayerid});this._service.addRelationFromOtherLayer({layer:n.external?e.getMapService().getLayerById(this.copylayerid):e.getProjectLayerById(this.copylayerid),external:n.external})},addVectorRelation:function(){this._service.addRelation(),this.showAddVectorRelationTools=!1},addRelationAndLink:(r=c(function*(){this.isVectorRelation&&this.copyFeatureLayers.length?(this.showAddVectorRelationTools=!this.showAddVectorRelationTools,yield this.$nextTick(),this.resize()):this._service.addRelation()}),function(){return r.apply(this,arguments)}),startTool:function(e,t){this._service.startTool(e,t).then(function(){}).catch(console.warn)},linkRelation:function(){this._service.linkRelation()},updateExternalKeyValueRelations:function(e){this._service.updateExternalKeyValueRelations(e)},isRequired:function(){return this._service.isRequired()},relationAttributesSubset:function(e){return this.relationsFields(e).flatMap(function(e){var t=e.name,n=e.label,e=e.value;return Array.isArray(e)?[]:[{name:t,label:n,value:e}]})},relationsAttributesSubsetLength:function(e){return 0<this.relationAttributesSubset(e).length},relationsFields:function(e){return this._service.relationFields(e)},showAllRelationFields:function(e){this.showallfieldsindex=this.showallfieldsindex==e?null:e},showAllFields:function(e){return this.showallfieldsindex==e},getRelationTools:function(){return this._service.getRelationTools()},isLink:function(e){return-1!==["photo","link"].indexOf(this.getFieldType(e))},getValue:function(e){return e&&"Object"===a(e)?e=e.value:"string"==typeof e&&0===e.indexOf("_new_")&&(e=null),this.value=e},getFileName:function(e){return this.getValue(e).split("/").pop()},_setDataTableSearch:function(){var e=this.relationsTable;$("#filterRelation").on("keyup",function(){e.search($(this).val()).draw()})},_createDataTable:function(){this.relationsTable=$(this.$refs.relationTable).DataTable({scrollX:!0,order:[2,"asc"],destroy:!0,scrollResize:!0,scrollCollapse:!0,pageLength:10,columnDefs:[{orderable:!1,targets:[0,1]}]}),$(".dataTables_filter, .dataTables_length").hide(),this._setDataTableSearch()},destroyTable:function(){this.relationsTable&&(this.relationsTable=this.relationsTable.destroy(),this.relationsTable=null,$("#filterRelation").off())},updateTable:(i=c(function*(){this.destroyTable(),this.show=!1,yield this.$nextTick(),this.show=!0,yield this.$nextTick(),this._createDataTable()}),function(){return i.apply(this,arguments)})},computed:{relationsLength:function(){return 0<this.relations.length},fieldrequired:function(){return this._service.isRequired()},enableAddLinkButtons:function(){return 0===this.relations.length||"ONE"!==this.relation.type}},watch:{relations:function(){var i=this;0===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).length?this.destroyTable():(this._new_relations_ids=this._new_relations_ids.filter(function(e){var t=e.clientid,e=e.id,n=i.relations.find(function(e){return t===e.id});if(n)return n.id=e,!1}),this.updateTable())}},beforeCreate:function(){this.delayType="debounce"},created:function(){var t=this,e=g("../services/editingservice"),n=e.getLayerById(this.relation.child);if(this._new_relations_ids=[],this.listenNewCommitRelations=function(e){e=e.new_relations,e=void 0===e?{}:e;e[n.getId()]&&(t._new_relations_ids=t._new_relations_ids.concat((e[n.getId()].new||[]).map(function(e){return{clientid:e.clientid,id:e.id}})))},e.on("commit",this.listenNewCommitRelations),this.isVectorRelation=n.getType()===y.LayerTypes.VECTOR,this.isVectorRelation){var i=e.getProjectLayersWithSameGeometryOfLayer(n,{exclude:[this.relation.father]}),e=e.getExternalLayersWithSameGeometryOfLayer(n),r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push({id:c.getId(),name:c.getName(),external:!1})}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var d=!0,i=!1,a=void 0;try{for(var f,p=e[Symbol.iterator]();!(d=(f=p.next()).done);d=!0){var h=f.value;r.push({id:h.get("id"),name:h.get("name"),external:!0})}}catch(e){i=!0,a=e}finally{try{!d&&p.return&&p.return()}finally{if(i)throw a}}this.copyFeatureLayers=r.sort(function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}),this.copylayerid=this.copyFeatureLayers.length?this.copyFeatureLayers[0].id:null}this.loadEventuallyRelationValuesForInputs=!1,this._service=new v(this.layerId,{relation:this.relation,relations:this.relations}),this.capabilities=this._service.getEditingCapabilities(),this.formeventbus.$on("changeinput",this.updateExternalKeyValueRelations)},activated:(n=c(function*(){if(this.showAddVectorRelationTools=!1,!this.loadEventuallyRelationValuesForInputs){var e=g("../services/editingservice");this.loading=!0;try{yield e.runEventHandler({type:"show-relation-editing",id:e._getRelationId({layerId:this.layerId,relation:this.relation}),component:this})}catch(e){}this.loading=!1,this.loadEventuallyRelationValuesForInputs=!0}this.active=!0,yield this.$nextTick(),!this.relationsTable&&this.relationsLength&&this._createDataTable(),this.resize()}),function(){return n.apply(this,arguments)}),deactivated:function(){this.destroyTable(),this.active=!1},beforeDestroy:function(){var e=g("../services/editingservice");this.loadEventuallyRelationValuesForInputs=!0,this._new_relations_ids=null,e.off("commit",this.listenNewCommitRelations)}},e.exports.__esModule&&(e.exports=e.exports.default);var d,t="function"==typeof e.exports?e.exports.options:e.exports;t.functional,t.render=function(){var i=this,e=i.$createElement,r=i._self._c||e;return i.active?r("div",{staticStyle:{"margin-bottom":"5px"}},[r("div",{ref:"relation_header_title",staticClass:"box-header with-border skin-color",staticStyle:{width:"100%",display:"flex","font-weight":"bold","font-size":"1.3em","align-items":"center","background-color":"#fff"}},[r("span",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.edit_relation",expression:"'editing.edit_relation'"}]}),i._v(" "),r("span",{staticStyle:{"margin-left":"2px"}},[i._v(": "+i._s(i.relation.name.toUpperCase()))])]),i._v(" "),r("div",{ref:"relation_header_tools",staticClass:"box-header with-border",staticStyle:{width:"100%",display:"flex","background-color":"#fff"}},[r("div",{staticStyle:{"margin-right":"auto"},attrs:{id:"search-box"}},[i.relationsLength?r("input",{staticClass:"form-control",attrs:{type:"text",id:"filterRelation",placeholder:i.placeholdersearch}}):i._e()]),i._v(" "),r("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[void 0!==i.capabilities.relation.find(function(e){return"change_attr_feature"===e})?r("span",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:bottom.create",value:i.tooltips.link_relation,expression:"tooltips.link_relation",arg:"bottom",modifiers:{create:!0}}],staticClass:"g3w-icon add-link",class:[{disabled:!i.enableAddLinkButtons},i.g3wtemplate.font.link],attrs:{align:"center"},on:{click:function(e){e.stopPropagation(),i.enableAddLinkButtons&&i.linkRelation()}}}):i._e(),i._v(" "),void 0!==i.capabilities.relation.find(function(e){return"add_feature"===e})?r("span",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:bottom.create",value:i.tooltips.add_relation,expression:"tooltips.add_relation",arg:"bottom",modifiers:{create:!0}}],staticClass:"g3w-icon add-link pull-right",class:[{disabled:!i.enableAddLinkButtons},i.g3wtemplate.font.plus],on:{click:function(e){i.enableAddLinkButtons&&i.addRelationAndLink()}}}):i._e()])]),i._v(" "),i.showAddVectorRelationTools?r("section",{ref:"relation_vector_tools",staticStyle:{display:"flex","flex-direction":"column",border:"2px solid #eee","background-color":"#fff",padding:"10px"}},[r("div",[r("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.draw_new_feature",expression:"'editing.relation.draw_new_feature'"}],staticClass:"g3w-editing-new-relation-vector-type"}),i._v(" "),r("button",{staticClass:"btn skin-button",staticStyle:{width:"100%"},on:{click:function(e){return e.stopPropagation(),i.addVectorRelation(e)}}},[r("i",{class:i.g3wtemplate.font.pencil})])]),i._v(" "),r("divider"),i._v(" "),r("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.draw_or_copy",expression:"'editing.relation.draw_or_copy'"}],staticStyle:{"align-self":"center"}}),i._v(" "),r("divider"),i._v(" "),r("div",{staticStyle:{"flex-grow":"1",display:"flex","flex-direction":"column"},attrs:{id:"g3w-select-editable-layers-content"}},[r("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.copy_feature_from_other_layer",expression:"'editing.relation.copy_feature_from_other_layer'"}],staticClass:"g3w-editing-new-relation-vector-type"}),i._v(" "),r("select",{directives:[{name:"select2",rawName:"v-select2",value:"copylayerid",expression:"'copylayerid'"}],attrs:{id:"g3w-select-editable-layers-to-copy"}},i._l(i.copyFeatureLayers,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[i._v("\n              "+i._s(e.name)+"\n          ")])}),0),i._v(" "),r("button",{staticClass:"btn skin-button",on:{click:function(e){return e.stopPropagation(),i.copyFeatureFromOtherLayer(e)}}},[r("i",{class:i.g3wtemplate.font.clipboard})])])],1):i._e(),i._v(" "),r("div",{ref:"relation_body",staticClass:"box-body",staticStyle:{padding:"0"}},[i.relationsLength?r("table",{ref:"relationTable",staticClass:"table g3wform-relation-table table-striped",staticStyle:{width:"100%"}},[r("thead",[r("tr",[r("th",{directives:[{name:"t",rawName:"v-t",value:"tools",expression:"'tools'"}]}),i._v(" "),r("th"),i._v(" "),i._l(i.relationAttributesSubset(i.relations[0]),function(e){return r("th",[i._v("\n                "+i._s(e.label)+"\n              ")])})],2)]),i._v(" "),r("tbody",i._l(i.relations,function(t,n){return r("tr",{staticClass:"featurebox-header"},[r("td",[r("div",{staticStyle:{display:"flex"}},i._l(i.getRelationTools(),function(t){return r("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:plugin",value:t.state.name,expression:"relationtool.state.name",arg:"plugin"}],key:t.state.name,staticClass:"skin-tooltip-right editbtn enabled",attrs:{"data-toggle":"tooltip","data-placement":"right"},on:{click:function(e){return e.stopPropagation(),i.startTool(t,n)}}},[r("img",{attrs:{height:"20px",width:"20px",src:i.resourcesurl+"images/"+t.state.icon}})])}),0)]),i._v(" "),r("td",{staticClass:"action-cell"},[i.fieldrequired||void 0===i.capabilities.relation.find(function(e){return"change_attr_feature"===e})?i._e():r("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:i.tooltips.unlink_relation,expression:"tooltips.unlink_relation",arg:"right",modifiers:{create:!0}}],staticClass:"g3w-mini-relation-icon g3w-icon",class:i.g3wtemplate.font.unlink,attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),i.unlinkRelation(n)}}})]),i._v(" "),i._l(i.relationAttributesSubset(t),function(e){return r("td",{directives:[{name:"show",rawName:"v-show",value:!i.showAllFields(n),expression:"!showAllFields(index)"}]},[i.isMedia(e.value)&&i.getValue(e.value)?r("div",{staticClass:"preview"},[r("a",{attrs:{href:i.getValue(e.value),target:"_blank"}},[r("div",{staticClass:"previewtype",class:i.getMediaType(e.value.mime_type).type},[r("i",{staticClass:"fa-2x",class:i.g3wtemplate.font[i.getMediaType(e.value.mime_type).type]})])]),i._v(" "),r("div",{staticClass:"filename"},[i._v(i._s(i.getFileName(e.value)))])]):i.isLink(e)?r("a",{attrs:{href:i.getValue(e.value),target:"_blank"}},[i._v(i._s(i.getValue(e.value))+"\n                ")]):r("span",[i._v(i._s(i.getValue(i._service.getRelationFeatureValue(t.id,e.name))))])])})],2)}),0)]):i._e()])]):i._e()},t.staticRenderFns=[],t._scopeId="data-v-112912af",e.hot&&((d=g("vue-hot-reload-api")).install(g("vue"),!0),d.compatible)&&(e.hot.accept(),e.hot.dispose(u),e.hot.data?d.reload("data-v-112912af",t):d.createRecord("data-v-112912af",t))},{"../services/editingservice":49,"../services/relationservice":50,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],13:[function(i,e,t){Object.defineProperty(t,"__esModule",{value:!0}),r=g3wsdk.core.workflow.WorkflowsStack,o=g3wsdk.gui.vue.services.FormService,t.default={name:"Saveall",props:{update:{type:Boolean},valid:{type:Boolean}},data:function(){return{loading:!1,enabled:!1}},computed:{disabled:function(){return!(this.enabled||this.valid&&this.update)}},methods:{save:function(){var e=this,t=i("../services/editingservice"),n=(this.loading=!0,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r._workflows)).reverse());Promise.allSettled(n.filter(function(e){return"function"==typeof e.getLastStep().getTask().saveAll}).map(function(e){return e.getLastStep().getTask().saveAll(e.getContext().service.state.fields)})).then(function(){t.commit({modal:!1}).then(function(){r._workflows.forEach(function(e){return e.getContext().service.setUpdate(!1,{force:!1})})}).fail(function(){}).always(function(){e.loading=!1})})}},created:function(){r.getLength()<2||(this.enabled=r._workflows.slice(0,r.getLength()-1).reduce(function(e,t){var t=t.getContext().service,t=t instanceof o?t.getState():{},n=t.valid,t=t.update;return(void 0===n||n)&&(void 0!==t&&t)&&e},!0))}},e.exports.__esModule&&(e.exports=e.exports.default);var r,o,n,t="function"==typeof e.exports?e.exports.options:e.exports;t.functional,t.render=function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("section",{staticClass:"editing-save-all-form"},[e("bar-loader",{attrs:{loading:t.loading}}),t._v(" "),e("div",{staticClass:"editing-button",staticStyle:{"background-color":"#fff",display:"flex",width:"100%"}},[e("span",{directives:[{name:"disabled",rawName:"v-disabled",value:t.disabled,expression:"disabled"}],on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.save(e)}}},[e("i",{staticClass:"skin-color",class:t.g3wtemplate.font.save,staticStyle:{"font-size":"1.8em",padding:"5px","border-radius":"5px",cursor:"pointer","box-shadow":"0 3px 5px rgba(0,0,0,0.5)",margin:"5px"}})])])],1)},t.staticRenderFns=[],e.hot&&((n=i("vue-hot-reload-api")).install(i("vue"),!0),n.compatible)&&(e.hot.accept(),e.hot.data?n.reload("data-v-0c0483e5",t):n.createRecord("data-v-0c0483e5",t))},{"../services/editingservice":49,vue:5,"vue-hot-reload-api":3}],14:[function(e,t,n){var i,o,r,a=e("vueify/lib/insert-css").insert("#g3w-select-editable-layers-content[data-v-45d7f042] {\n  margin-bottom: 10px;\n  font-weight: bold;\n}\n#g3w-select-editable-layers-content label[data-v-45d7f042] {\n  color: #fff !important;\n}\n#g3w-select-editable-layers-to-show[data-v-45d7f042] {\n  cursor: pointer;\n}"),n=(Object.defineProperty(n,"__esModule",{value:!0}),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e("../services/editingservice"),n.default={name:"Selecteditinglayers",data:function(){return{selectedlayers:[],editinglayers:Object.entries(o.getEditableLayers()).map(function(e){var e=i(e,2),t=e[0],e=e[1];return{id:t,name:e.getName(),title:e.getTitle()}})}},watch:{selectedlayers:function(i){var r=0<i.length;this.editinglayers.forEach(function(e){var e=e.id,t=o.getToolBoxById(e),n=r&&t.state.editing.history.commit,e=-1!==i.indexOf(e);t.setShow(!r||e),r&&!e&&n&&o.commit({toolbox:t}).always(function(){return t.stop()}),!r||e||n||t.stop()})}}},t.exports.__esModule&&(t.exports=t.exports.default),"function"==typeof t.exports?t.exports.options:t.exports);n.functional,n.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"skin-color",attrs:{id:"g3w-select-editable-layers-content"}},[n("label",{directives:[{name:"t",rawName:"v-t",value:"Layers",expression:"'Layers'"}],attrs:{for:"g3w-select-editable-layers-to-show"}}),t._v(" "),n("select",{directives:[{name:"select2",rawName:"v-select2",value:"selectedlayers",expression:"'selectedlayers'"}],attrs:{id:"g3w-select-editable-layers-to-show",multiple:"multiple",clear:"true"}},t._l(t.editinglayers,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)])},n.staticRenderFns=[],n._scopeId="data-v-45d7f042",t.hot&&((r=e("vue-hot-reload-api")).install(e("vue"),!0),r.compatible)&&(t.hot.accept(),t.hot.dispose(a),t.hot.data?r.reload("data-v-45d7f042",n):r.createRecord("data-v-45d7f042",n))},{"../services/editingservice":49,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],15:[function(e,t,n){var i,r,o,a,s,l,u=e("vueify/lib/insert-css").insert("#table-editing-tools[data-v-13f4ce0f] {\n  display:flex;\n  justify-content: space-between;\n}\n\n#table-editing-tools i[data-v-13f4ce0f] {\n    margin: 5px;\n}\n\n.table_editing_footer_buttons[data-v-13f4ce0f] {\n  position: absolute;\n  bottom: 10px;\n  width: 100%;\n  display:flex;\n  justify-content: center;\n}\n\n.editing_table_header_content[data-v-13f4ce0f] {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n}\n.editing_table_relation_messagge[data-v-13f4ce0f] {\n  font-weight: bold\n}");function c(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}Object.defineProperty(n,"__esModule",{value:!0}),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=g3wsdk.gui.vue.Mixins.resizeMixin,l=g3wsdk.gui.vue.Fields.media_field,n.default={name:"Table",mixins:[d],components:{"g3w-media":l},data:function(){return{state:this.dataTable=null,show:!0}},methods:{changeSize:(s=c(function*(){var e=this;yield this.$nextTick(),setTimeout(function(){return e.resize()})}),function(){return s.apply(this,arguments)}),showTool:function(t){return void 0!==this.state.capabilities.find(function(e){return e===t})},resize:(a=c(function*(){"none"!==this.$el.style.display&&(yield this.$nextTick(),$("#editing_table  div.dataTables_scrollBody").height($(".content").height()-$(".close-panel-block").outerHeight()-$("#editing_table  div.dataTables_scrollHeadInner").outerHeight()-$(".editing_table_title").outerHeight()-$(".editing_table_header").outerHeight()-$(".editing_table_relation_messagge").outerHeight()-$(".dataTables_length").outerHeight()-$(".dataTables_paginate.paging_simple_numbers").outerHeight()-$(".dataTables_info").outerHeight()-$(".dataTables_filter").outerHeight()-$(".table_editing_footer_buttons").outerHeight()-$("#editing_table .dataTables_paginate.paging_simple_numbers").outerHeight()),this.dataTable)&&this.dataTable.columns.adjust()}),function(){return a.apply(this,arguments)}),showValue:function(t){return!!this.state.headers.find(function(e){return e.name===t})},isMediaField:function(e){return this.$options.service.isMediaField(e)},stop:function(){this.$options.service.cancel()},save:function(){this.state.isrelation?this.$options.service.linkFeatures(this._linkFeatures):this.$options.service.save()},cancel:function(){this.$options.service.cancel()},deleteFeature:(o=c(function*(e){var t=this,n=$("#editing_table table tr#"+e);this.$options.service.deleteFeature(e).then(c(function*(){t.dataTable.row(n).remove().draw(),yield t.$nextTick()})).catch(function(){})}),function(e){return o.apply(this,arguments)}),copyFeature:function(e){var t,n=this;this.$options.service.copyFeature(e).then((t=c(function*(e){n.show=!1,n.dataTable.destroy(),yield n.$nextTick(),n.show=!0,yield n.$nextTick(),n.setDataTable()}),function(e){return t.apply(this,arguments)}))},editFeature:function(e){this.$options.service.editFeature(e)},linkFeature:function(t,e){e.target.checked?this._linkFeatures.push(t):this._linkFeatures=this._linkFeatures.filter(function(e){return e!==t})},_setLayout:function(){return this.$options.service._setLayout()},getValue:function(e){return e&&"object"===(void 0===e?"undefined":i(e))&&Object===e.constructor?e=e.value:"string"==typeof e&&0===e.indexOf("_new_")&&(e=null),e},setDataTable:function(){this.dataTable=$("#editing_table table").DataTable({pageLength:10,scrollX:!0,scrollCollapse:!0,scrollResize:!0,order:[1,"asc"],columnDefs:[{orderable:!1,targets:0}]}),this.resize()}},watch:{"state.features":function(e){}},beforeCreate:function(){this.delayType="debounce"},mounted:(r=c(function*(){yield this.$nextTick(),this.state.isrelation&&(this._linkFeatures=[]),this.setDataTable(),$("#table-editing-tools i").tooltip(),this.$options.service.emit("ready"),this.resize()}),function(){return r.apply(this,arguments)}),beforeDestroy:function(){this._linkFeatures&&(this._linkFeatures=null),this.dataTable.destroy()}},t.exports.__esModule&&(t.exports=t.exports.default);var d,n="function"==typeof t.exports?t.exports.options:t.exports;n.functional,n.render=function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",{staticClass:"g3w-editing-table",attrs:{id:"editing_table"}},[r("div",{ref:"editing_table_header",staticClass:"editing_table_header"},[r("div",{staticClass:"editing_table_header_content"},[r("h3",{staticClass:"editing_table_title"},[i._v(i._s(i.state.title))]),i._v(" "),r("h-resize",{on:{h_size_change:i.changeSize}})],1),i._v(" "),i.state.isrelation?r("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.table.info",expression:"'editing.relation.table.info'"}],staticClass:"editing_table_relation_messagge"}):i._e()]),i._v(" "),i.show?r("table",{staticClass:"display",staticStyle:{width:"100%"}},[r("thead",[r("tr",[i.state.isrelation?i._e():r("th",{staticStyle:{"max-width":"60px"}}),i._v(" "),i.state.isrelation?r("th"):i._e(),i._v(" "),i._l(i.state.headers,function(e){return r("th",[i._v(i._s(e.label))])})],2)]),i._v(" "),r("tbody",i._l(i.state.features,function(t,n){return r("tr",{key:t.__gis3w_feature_uid,attrs:{id:t.__gis3w_feature_uid}},[i.state.isrelation?i._e():r("td",[r("div",{attrs:{id:"table-editing-tools"}},[i.showTool("change_attr_feature")?r("i",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:"editing.table.edit",expression:"'editing.table.edit'",arg:"plugin"}],staticClass:"g3w-icon skin-tooltip-right",class:i.g3wtemplate.font.pencil,staticStyle:{color:"#30cce7"},attrs:{"data-placement":"right","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),i.editFeature(t.__gis3w_feature_uid)}}}):i._e(),i._v(" "),i.showTool("add_feature")?r("i",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:"editing.table.copy",expression:"'editing.table.copy'",arg:"plugin"}],staticClass:"g3w-icon skin-tooltip-right",class:i.g3wtemplate.font["copy-paste"],staticStyle:{color:"#d98b14",padding:"5px 7px 5px 7px"},attrs:{"data-placement":"right","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),i.copyFeature(t.__gis3w_feature_uid)}}}):i._e(),i._v(" "),i.showTool("delete_feature")?r("i",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:"editing.table.delete",expression:"'editing.table.delete'",arg:"plugin"}],staticClass:"g3w-icon skin-tooltip-right",class:i.g3wtemplate.font["trash-o"],staticStyle:{color:"red"},attrs:{"data-placement":"right","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),i.deleteFeature(t.__gis3w_feature_uid)}}}):i._e()])]),i._v(" "),i.state.isrelation?r("td",[r("input",{staticClass:"magic-checkbox",attrs:{id:"relation__"+n,type:"checkbox"},on:{change:function(e){return i.linkFeature(n,e)}}}),i._v(" "),r("label",{attrs:{for:"relation__"+n}})]):i._e(),i._v(" "),i._l(t,function(e,t){return i.showValue(t)?r("td",{key:t},[i.getValue(e)&&i.isMediaField(t)?r("g3w-media",{attrs:{state:e}}):r("p",[i._v(i._s(i.getValue(e)))])],1):i._e()})],2)}),0)]):i._e(),i._v(" "),r("div",{ref:"table_editing_footer_buttons",staticClass:"table_editing_footer_buttons",attrs:{id:"buttons"}},[r("button",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:i.state.isrelation?"editing.form.buttons.save_and_back":"editing.form.buttons.save",expression:"state.isrelation ? 'editing.form.buttons.save_and_back' : 'editing.form.buttons.save'"}],staticClass:"btn btn-success",staticStyle:{"margin-right":"10px"},on:{click:function(e){return e.stopPropagation(),i.save(e)}}}),i._v(" "),r("button",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.form.buttons.cancel",expression:"'editing.form.buttons.cancel'"}],staticClass:"btn btn-danger",on:{click:function(e){return e.stopPropagation(),i.cancel(e)}}})])])},n.staticRenderFns=[],n._scopeId="data-v-13f4ce0f",t.hot&&((d=e("vue-hot-reload-api")).install(e("vue"),!0),d.compatible)&&(t.hot.accept(),t.hot.dispose(u),t.hot.data?d.reload("data-v-13f4ce0f",n):d.createRecord("data-v-13f4ce0f",n))},{vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],16:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"Tool",props:["state","resourcesurl"],data:function(){return{}},methods:{toggletool:function(){this.state.active?this.$emit("stopactivetool"):this.$emit("setactivetool",this.state.id)}}},t.exports.__esModule&&(t.exports=t.exports.default);var i,n="function"==typeof t.exports?t.exports.options:t.exports;n.functional,n.render=function(){var t=this,e=t.$createElement,e=t._self._c||e;return t.state.visible?e("div",{staticClass:"editbtn",class:{enabled:t.state.enabled,toggled:t.state.active},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.state.enabled&&t.toggletool()}}},[e("img",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:""+t.state.name,expression:"`${state.name}`",arg:"plugin"}],attrs:{height:"25",width:"25",src:t.resourcesurl+"images/"+t.state.icon}})]):t._e()},n.staticRenderFns=[],t.hot&&((i=e("vue-hot-reload-api")).install(e("vue"),!0),i.compatible)&&(t.hot.accept(),t.hot.data?i.reload("data-v-7f742067",n):i.createRecord("data-v-7f742067",n))},{vue:5,"vue-hot-reload-api":3}],17:[function(e,t,n){var i,r,o,a=e("vueify/lib/insert-css").insert(".toolbox[data-v-c4a84298] {\n  padding-bottom: 5px;\n}\n.panel:not(.toolboxselected) .has-relations[data-v-c4a84298] {\n  opacity: .4;\n}");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}Object.defineProperty(n,"__esModule",{value:!0}),u=s(e("./Tool.vue")),o=s(e("./ToolsOfTool.vue")),n.default={name:"Toolbox",props:["state","resourcesurl"],data:function(){return{active:!1,currenttoolhelpmessage:null}},components:{tool:u.default,toolsoftool:o.default},computed:{editDisabled:function(){return this.state.loading&&!this.state.startstopediting},hasRelations:function(){return 0<this.state.editing.dependencies.length},loading:function(){return this.state.loading||this.state.changingtools},toolsrow1:function(){return this.state.tools.filter(function(e){return 1===e.row})},toolsrow2:function(){return this.state.tools.filter(function(e){return 2===e.row})},toolsrow3:function(){return this.state.tools.filter(function(e){return 3===e.row})},canEdit:function(){return this.state.editing.canEdit},father:function(){return this.state.editing.father&&!!this.state.editing.dependencies.length},showtoolsoftool:function(){return!!this.state.toolsoftool.length},isLayerReady:function(){return this.state.layerstate.editing.ready}},methods:{select:function(){this.isLayerReady&&!this.state.selected&&this.$emit("setselectedtoolbox",this.state.id)},toggleEditing:function(){this.select(),this.state.layerstate.editing.ready&&!this.state.loading&&this.$emit(this.state.editing.on?"stoptoolbox":"starttoolbox",this.state.id)},saveEdits:function(){this.$emit("savetoolbox",this.state.id)},stopActiveTool:function(){this.$emit("stopactivetool",this.state.id),this.select()},setActiveTool:function(e){this.$emit("setactivetool",e,this.state.id),this.select()}},watch:{"state.activetool":(r=l(function*(e){yield this.$nextTick(),this.currenttoolhelpmessage=e&&e.getHelpMessage()}),function(e){return r.apply(this,arguments)})},created:function(){this.edit_layer_tooltip="editing.tooltip.edit_layer",this.$emit("canEdit",{id:this.state.id})},mounted:(i=l(function*(){yield this.$nextTick(),$(this.$refs.editingbutton).tooltip()}),function(){return i.apply(this,arguments)})},t.exports.__esModule&&(t.exports=t.exports.default);var u,n="function"==typeof t.exports?t.exports.options:t.exports;n.functional,n.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.state.show,expression:"state.show"}],staticClass:"toolbox"},[n("div",{class:{disableddiv:!t.isLayerReady||!t.canEdit},attrs:{id:"id_toolbox_"+t.state.id}},[n("div",{staticClass:"panel",class:{mobile:t.isMobile(),toolboxselected:t.state.selected},staticStyle:{"margin-bottom":"8px"},on:{click:function(e){return e.stopPropagation(),t.select(e)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLayerReady,expression:"!isLayerReady"}],staticClass:"bar-loader"}),t._v(" "),t.state.toolboxheader?n("div",{staticClass:"panel-heading container",staticStyle:{width:"100%"},style:{background:t.state.color}},[t.father?n("div",{staticClass:"pull-left enabled dropdown",staticStyle:{"margin-right":"5px",cursor:"pointer"}},[n("span",{class:t.g3wtemplate.font.relation}),t._v(" "),n("div",{staticClass:"dropdown-content skin-background-color",staticStyle:{padding:"5px","border-radius":"3px"}},t._l(t.state.editing.dependencies,function(e){return n("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e))])}),0)]):t._e(),t._v(" "),n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin:pre",value:"editing.toolbox.title",expression:"'editing.toolbox.title'",arg:"pre"}],staticClass:"panel-title",class:[t.father?"col-md-6":"col-md-8"]},[t._v(t._s(t.state.title))]),t._v(" "),n("div",{directives:[{name:"disabled",rawName:"v-disabled",value:t.editDisabled,expression:"editDisabled"},{name:"t-title",rawName:"v-t-title:plugin",value:t.edit_layer_tooltip,expression:"edit_layer_tooltip",arg:"plugin"}],ref:"editingbutton",staticClass:"start-editing editbtn skin-tooltip-left",class:{"pull-right":!t.isMobile(),enabled:t.isLayerReady,"g3w-icon-toggled":t.state.editing.on},attrs:{"data-placement":"left","data-toggle":"tooltip"},on:{click:function(e){return e.stopPropagation(),t.toggleEditing(e)}}},[n("span",{class:t.g3wtemplate.font.pencil,staticStyle:{"font-size":"1.1em",padding:"5px"}})])]):t._e(),t._v(" "),n("bar-loader",{attrs:{loading:t.loading}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.state.changingtools,expression:"!state.changingtools"}],staticClass:"panel-body"},[t.hasRelations?n("div",{staticClass:"has-relations",staticStyle:{color:"#000000"}},[n("span",{class:t.g3wtemplate.font.info,staticStyle:{color:"#007bff","padding-right":"2px"}}),t._v(" "),n("span",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.messages.toolbox_has_relation",expression:"'editing.messages.toolbox_has_relation'"}]}),t._v(" "),n("divider")],1):t._e(),t._v(" "),t.state.message?n("div",{staticStyle:{color:"#000"}},[n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:t.state.message,expression:"state.message"}],staticClass:"text-justify"}),t._v(" "),n("divider")],1):t._e(),t._v(" "),n("div",{staticClass:"tools-content row1",staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.toolsrow1,function(e){return n("tool",{key:e.id,attrs:{state:e,resourcesurl:t.resourcesurl},on:{stopactivetool:t.stopActiveTool,setactivetool:t.setActiveTool}})}),1),t._v(" "),n("div",{staticClass:"tools-content row2",staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.toolsrow2,function(e){return n("tool",{key:e.id,attrs:{state:e,resourcesurl:t.resourcesurl},on:{stopactivetool:t.stopActiveTool,setactivetool:t.setActiveTool}})}),1),t._v(" "),n("div",{staticClass:"tools-content row3",staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.toolsrow3,function(e){return n("tool",{key:e.id,attrs:{state:e,resourcesurl:t.resourcesurl},on:{stopactivetool:t.stopActiveTool,setactivetool:t.setActiveTool}})}),1),t._v(" "),n("div",{staticClass:"message",staticStyle:{"margin-top":"5px"},attrs:{id:"id_toolbox_messages_"+t.state.id}},[n("transition",{attrs:{name:"fade"}},[t.showtoolsoftool?n("toolsoftool",{attrs:{tools:t.state.toolsoftool}}):t._e()],1),t._v(" "),t.currenttoolhelpmessage?n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:t.currenttoolhelpmessage,expression:"currenttoolhelpmessage"}],staticClass:"toolbox_help_message"}):t._e()],1)])],1)])])},n.staticRenderFns=[],n._scopeId="data-v-c4a84298",t.hot&&((u=e("vue-hot-reload-api")).install(e("vue"),!0),u.compatible)&&(t.hot.accept(),t.hot.dispose(a),t.hot.data?u.reload("data-v-c4a84298",n):u.createRecord("data-v-c4a84298",n))},{"./Tool.vue":16,"./ToolsOfTool.vue":18,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],18:[function(e,t,n){var i,r=e("vueify/lib/insert-css").insert("#toolsoftoolcontainer[data-v-21f6c16a] {\n  display: flex;\n  flex-direction: column;\n  margin: 5px;\n  padding: 5px;\n  border-radius: 5px;\n}");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),a=o(e("./ToolsOfToolSnap.vue")),i=o(e("./ToolsOfToolMeasure.vue")),n.default={name:"Toolsoftool",props:["tools"],components:{snap:a.default,measure:i.default},data:function(){return{}}},t.exports.__esModule&&(t.exports=t.exports.default);var a,n="function"==typeof t.exports?t.exports.options:t.exports;n.functional,n.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","flex-direction":"column",margin:"5px",padding:"5px","border-radius":"5px"},attrs:{id:"toolsoftoolcontainer"}},[t._l(t.tools,function(e){return[n(e.type,{tag:"component",attrs:{options:e.options}}),t._v(" "),n("divider")]})],2)},n.staticRenderFns=[],n._scopeId="data-v-21f6c16a",t.hot&&((a=e("vue-hot-reload-api")).install(e("vue"),!0),a.compatible)&&(t.hot.accept(),t.hot.dispose(r),t.hot.data?a.reload("data-v-21f6c16a",n):a.createRecord("data-v-21f6c16a",n))},{"./ToolsOfToolMeasure.vue":19,"./ToolsOfToolSnap.vue":20,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],19:[function(e,t,n){var i,r=e("vueify/lib/insert-css").insert("label span[data-v-0b8314c3] {\n  color: #222d32 !important;\n}"),n=(Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"measure",props:["options"],data:function(){return{checked:this.options.checked}},watch:{checked:function(e){this.options.onChange(e)}},beforeDestroy:function(){this.options.onBeforeDestroy()}},t.exports.__esModule&&(t.exports=t.exports.default),"function"==typeof t.exports?t.exports.options:t.exports);n.functional,n.render=function(){var r=this,e=r.$createElement,e=r._self._c||e;return e("div",{staticStyle:{display:"flex"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:r.checked,expression:"checked"}],staticClass:"magic-checkbox snap_tools_of_tools",attrs:{id:"g3w_editing_show_measure_tool",type:"checkbox"},domProps:{checked:Array.isArray(r.checked)?-1<r._i(r.checked,null):r.checked},on:{change:function(e){var t,n=r.checked,e=e.target,i=!!e.checked;Array.isArray(n)?(t=r._i(n,null),e.checked?t<0&&(r.checked=n.concat([null])):-1<t&&(r.checked=n.slice(0,t).concat(n.slice(t+1)))):r.checked=i}}}),r._v(" "),e("label",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.toolsoftool.measure",expression:"'plugins.editing.toolsoftool.measure'",arg:"right",modifiers:{create:!0}}],attrs:{for:"g3w_editing_show_measure_tool"}},[e("span",{class:r.g3wtemplate.font.measure,staticStyle:{"font-weight":"bold"}})])])},n.staticRenderFns=[],n._scopeId="data-v-0b8314c3",t.hot&&((i=e("vue-hot-reload-api")).install(e("vue"),!0),i.compatible)&&(t.hot.accept(),t.hot.dispose(r),t.hot.data?i.reload("data-v-0b8314c3",n):i.createRecord("data-v-0b8314c3",n))},{vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],20:[function(e,t,n){var o,i,a,r,s=e("vueify/lib/insert-css").insert("label span[data-v-66af2696] {\n  color: #222d32 !important;\n}"),l=(Object.defineProperty(n,"__esModule",{value:!0}),l=g3wsdk.gui.GUI,o=g3wsdk.core.layer.Layer,i=l.getService("map"),a=e("../services/editingservice"),r=void 0,n.default={name:"snap",props:["options"],data:function(){return{id:"snap_"+Date.now(),idAll:"snap_"+Date.now()+"_all",checked:!1,checkedAll:!1,showSnapAll:!1}},computed:{add:function(){return(this.checked||this.checkedAll)&&this.options.active}},methods:{addFeatures:function(e){this.features.extend(e)},addFeature:function(e){this.addFeatures([e])},removeFeatures:function(e){var t=this;e.forEach(function(e){return t.features.remove(e)})},setShowSnapAll:function(){this.showSnapAll=!!this.vectorToolboxesEditingState.find(function(e){return e.on}),this.checkedAll=!!this.showSnapAll&&this.checkedAll},activeSnapInteraction:function(){r&&i.removeInteraction(r),r=null,this.add&&(r=new ol.interaction.Snap({source:!this.checkedAll&&this.checked&&this.options.source,features:this.checkedAll&&this.features}),i.addInteraction(r))},enableSnapInteraction:function(e){e?this.activeSnapInteraction():r&&i.removeInteraction(r)}},watch:{checked:function(e){this.options.checked=e,this.activeSnapInteraction()},checkedAll:function(e){this.options.checkedAll=e,this.activeSnapInteraction()},"options.active":function(e){this.enableSnapInteraction(e)}},created:function(){var r=this;this.features=new ol.Collection,this.sourcesAndEventsKeys=[],this.vectorToolboxesEditingState=[],this.unwatches=[],a.getLayers().forEach(function(e){var t,n,i=e.getId();o.LayerTypes.VECTOR===e.getType()&&(e=a.getToolBoxById(i),t=e.getLayer().getEditingSource(),r.features.extend(t.readFeatures()),r.sourcesAndEventsKeys.push({source:t,olKey:t.getFeaturesCollection().on("add",function(e){return r.addFeature(e.element)}),settersAndKeys:{addFeatures:t.onbefore("addFeatures",r.addFeatures),addFeature:t.onbefore("addFeature",r.addFeatures),clear:t.onbefore("clear",function(){r.removeFeatures(t.readFeatures())})}}),r.options.layerId!==i)&&(n=e.getState().editing,r.unwatches.push(r.$watch(function(){return n.on},r.setShowSnapAll)),r.vectorToolboxesEditingState.push(n))}),this.setShowSnapAll()},beforeDestroy:function(){this.sourcesAndEventsKeys.forEach(function(t){Object.keys(t.settersAndKeys).forEach(function(e){t.source.un(e,t.settersAndKeys[e])}),ol.Observable.unByKey(t.olKey)}),this.unwatches.forEach(function(e){return e()}),r=null,this.unwatches=null,this.vectorToolboxesEditingState=null,this.sourcesAndEventsKeys=null}},t.exports.__esModule&&(t.exports=t.exports.default),"function"==typeof t.exports?t.exports.options:t.exports);l.functional,l.render=function(){var r=this,e=r.$createElement,e=r._self._c||e;return e("div",{staticStyle:{display:"flex",width:"100%","justify-content":"space-between"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:r.checked,expression:"checked"}],staticClass:"magic-checkbox snap_tools_of_tools",attrs:{type:"checkbox",id:r.id},domProps:{checked:Array.isArray(r.checked)?-1<r._i(r.checked,null):r.checked},on:{change:function(e){var t,n=r.checked,e=e.target,i=!!e.checked;Array.isArray(n)?(t=r._i(n,null),e.checked?t<0&&(r.checked=n.concat([null])):-1<t&&(r.checked=n.slice(0,t).concat(n.slice(t+1)))):r.checked=i}}}),r._v(" "),e("label",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.toolsoftool.snap",expression:"'plugins.editing.toolsoftool.snap'",arg:"right",modifiers:{create:!0}}],attrs:{for:r.id}},[e("span",{class:r.g3wtemplate.font.magnete})]),r._v(" "),r.showSnapAll?[e("input",{directives:[{name:"model",rawName:"v-model",value:r.checkedAll,expression:"checkedAll"}],staticClass:"magic-checkbox snap_tools_of_tools",attrs:{type:"checkbox",id:r.idAll},domProps:{checked:Array.isArray(r.checkedAll)?-1<r._i(r.checkedAll,null):r.checkedAll},on:{change:function(e){var t,n=r.checkedAll,e=e.target,i=!!e.checked;Array.isArray(n)?(t=r._i(n,null),e.checked?t<0&&(r.checkedAll=n.concat([null])):-1<t&&(r.checkedAll=n.slice(0,t).concat(n.slice(t+1)))):r.checkedAll=i}}}),r._v(" "),e("label",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:left.create",value:"plugins.editing.toolsoftool.snapall",expression:"'plugins.editing.toolsoftool.snapall'",arg:"left",modifiers:{create:!0}}],attrs:{for:r.idAll}},[e("span",{class:r.g3wtemplate.font.magnete}),r._v(" "),e("span",{class:r.g3wtemplate.font.layers,staticStyle:{"font-weight":"bold"}})])]:r._e()],2)},l.staticRenderFns=[],l._scopeId="data-v-66af2696",t.hot&&((n=e("vue-hot-reload-api")).install(e("vue"),!0),n.compatible)&&(t.hot.accept(),t.hot.dispose(s),t.hot.data?n.reload("data-v-66af2696",l):n.createRecord("data-v-66af2696",l))},{"../services/editingservice":49,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],21:[function(e,t,n){function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).steps,t=void 0===e?{}:e;return{data:function(){return{steps:t,currentStep:0}},watch:{steps:{handler:function(e){var n=this;Object.values(e).find(function(e,t){if(!e.done)return n.currentStep=t,!0})},deep:!1}},render:function(i){var r=this;return i("ul",{style:{alignSelf:"flex-start",listStyle:"none",padding:(s.ismobile?5:10)+"px !important",marginBottom:0}},Object.values(this.steps).map(function(e,t){var n={current:!e.done&&t===r.currentStep,done:e.done,todo:!e.done&&t!==r.currentStep};return i("li",{style:{fontWeight:e.done||!e.done&&t===r.currentStep?"bold":null,marginBottom:"5px",color:e.done&&"green",display:e.buttonnext&&"inline-flex"}},[i("i",{style:{marginRight:"5px",fontWeight:e.done&&"bold"},class:(o(t={},a.getFontClass("arrow-right"),n.current),o(t,a.getFontClass("empty-circle"),n.todo),o(t,a.getFontClass("success"),n.done),t)}),i("span",{directives:[{name:e.directive,value:e.description}],style:{display:e.buttonnext?"inline-flex":"inline",flexDirection:e.buttonnext&&"row-reverse"}}),void 0!==e.dynamic&&i("span",{style:{alignSelf:"center",padding:"3px"}},e.dynamic),e.buttonnext&&i("button",{on:{click:function(){e.done=!0,e.buttonnext.done()}},directives:[{name:"t-plugin",value:"editing.workflow.next"}],style:{fontWeight:"bold"},class:{btn:!0,"btn-success":!0,"g3w-disabled":e.buttonnext.disabled}})])}))}}};var a=g3wsdk.gui.GUI,s=g3wsdk.core.ApplicationState},{}],22:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"Es tritt ein Fehler auf. Es ist nicht möglich, Layer zu bearbeiten",some_layers:"Es tritt ein Fehler auf: Es ist nicht möglich, einige Layer zu bearbeiten"},search:"Suche",editing_changes:"Änderungen bearbeiten",editing_data:"Layer bearbeiten",editing_attributes:"Attribute bearbeiten",relations:"Relationen",edit_relation:"Relation bearbeiten",back_to_relations:"Zurück zu Relationen",no_relations_found:"Keine Relationen gefunden",relation_data:"Relationsdaten",relation_already_added:"Relation bereits hinzugefügt",list_of_relations_feature:"Liste der Relations-Features ",tooltip:{edit_layer:"Layer bearbeiten"},toolbox:{title:"bearbeiten"},table:{edit:"Feature bearbeiten",copy:"Kopie erstellen",delete:"Feature löschen"},tools:{copy:"Features kopieren",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Teil zu Multipart hinzufügen",deletepart:"Teil aus Multipart löschen",merge:"Feature auflösen",split:"Feature trennen",add_feature:"Feature hinzufügen",delete_feature:"Feature löschen",move_feature:"Feature verschieben",update_vertex:"Feature vertex aktualisieren",update_feature:"Feature-Attribut aktualisieren",update_multi_features:"Attribute ausgewählter Features aktualisieren",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Messung anzeigen",snap:"Snap Layer",snapall:"Snap auf alle Layer"},steps:{help:{select_elements:"Features auswählen",select_element:"Feature auswählen",copy:"Neue Kopie der ausgewählten Features erstellen",merge:"Features auflösen",split:"Feature trennen",new:"Neues Feature erstellen",edit_table:"Features der Tabelle bearbeiten",draw_new_feature:"Feature auf Karte zeichnen",action_confirm:"Aktion bestätigen",double_click_delete:"Zu löschendes Feature auf der Karte auswählen",edit_feature_vertex:"Ändern oder Hinzufügen eines Eckpunktes auf dem ausgewählten Feature",move:"Ausgewähltes Feature verschieben",select_feature_to_relation:"Feature auswählen, welches die Relation verknüpft",show_edit_feature_form:"Feature-Formular zum Bearbeiten von Attributen anzeigen",pick_feature:"Zu änderndes Feature auf der Karte auswählen",insert_attributes_feature:"Attribute des Features einfügen"}},workflow:{steps:{select:"Zum Auswählen auf ein Feature klicken",draw_part:"Neues Teil zeichnen",merge:"Feature zum Auflösen auswählen",selectSHIFT:"Features auswählen indem ein Rechteck mit SHIFT gezeichnet wird",selectDrawBox:"Features auswählen, indem man ein Rechteck mit zwei gegenüberliegenden Eckpunkten zeichnet",selectDrawBoxAtLeast2Feature:"Mindestens Features auswählen, indem man ein Rechteck mit zwei gegenüberliegenden Eckpunkten zeichnet",selectPoint:"Zum Auswählen auf ein Feature klicken",selectPointSHIFT:"Features auswählen, indem ein Rechteck mit SHIFT gezeichnet wird (Multifeatures) oder auf ein Feature klicken",selectMultiPointSHIFT:"Features auswählen, indem man ein Rechteck zeichnet und SHIFT drückt oder auf ein Feature klickt",selectMultiPointSHIFTAtLeast2Feature:"Mindestens 2 Features auswählen und mit SHIFT ein Rechteck zeichnen oder auf ein Feature klicken",copyCTRL:"Kopieren ausgewählter Features mit CTRL+C",selectStartVertex:"Start-Eckpunkt der ausgewählten Features auswählen",selectToPaste:"Den Punkt auswählen, an dem die ausgewählten Features eingefügt werden sollen",draw_split_line:"Eine Linie zeichnen, um das ausgewählte Feature zu teilen"},title:{steps:"Schritte"},next:"Weiter"},messages:{featureslockbyotheruser:"Einige Geometrien/Datensätze können nicht bearbeitet werden, da sie von anderen Benutzern bearbeitet werden",splitted:"Getrennt",nosplittedfeature:"Feature nicht getrennt",press_esc:"Mit ESC zurück",online:"Wieder ONLINE. Jetzt kann man die Änderungen in der Datenbank speichern",offline:"OFFLINE. Alle Änderungen werden lokal gespeichert",delete_feature:"Soll das ausgewählte Feature gelöscht werden?",delete_feature_relations:"Wenn ein Feature Verknüpfungen beinhaltet, werden diese Relationen verwaist. Wir schlagen vor, diese Relationen zu behandeln, bevor das Feature gelöscht wird",unlink_relation:"Soll die Verknüpfung aufgehoben werden?",commit_feature:"Änderungen speichern?",toolbox_has_relation:"Diese Ebene ist Teil einer Beziehung",saved:"Daten erfolgreich gespeichert",saved_local:"Daten erfolgreich lokal gespeichert",loading_data:"Daten laden",saving:"Daten werden gespeichert. Bitte warten ...",constraints:{enable_editing:"Bitte zoomen Sie hinein, um die Editier-Tools zu aktivieren \nAktivierungsskala bei 1:"},pdf:"Dokumentenvorschau nicht verfügbar. Bitte hier klicken ",commit:{header:"Die folgende Liste zeigt alle zu übernehmenden Änderungen.",header_add:"<b>Hinzufgefügt</b> Die Anzahl der hinzugefügten Features anzeigen",header_update_delete:"<b>Bearbeitet</b> und <b>Gelöscht</b> Die Liste der Feature-ID anzeigen",add:"Hinzugefügt(n. Features)",delete:"Gelöscht(id)",update:"Bearbeitet(id)"},loading_table_data:"Datentabelle wird erstellt. Bitte warten ...",copy_and_paste_from_other_layer_mandatory_fields:"Vor dem Speichern müssen alle Pflichtfelder des eingegebenen features ausgefüllt werden",no_feature_selected:"Keine feature ausgewählt",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Wählen Sie Relationen aus, um sie mit dem aktuellen Feature zu verknüpfen.</div>"},draw_new_feature:"Zeichnen Sie eine neue feature",draw_or_copy:"oder",copy_feature_from_other_layer:"Kopieren Sie feature aus einer anderen layer"},form:{relations:{tooltips:{back_to_father:"Zurück zur Bearbeitung des Vaters",add_relation:"Neue Relation erstellen und verknüpfen",link_relation:"Eine Relation zu diesem Feature herstellen",open_relation_tools:"Relationstools anzeigen",unlink_relation:"Relation trennen"}},buttons:{save:"Einfügung/Bearbeiten",save_and_back:"Speichern und zurück",save_and_back_table:"Speichern und zurück",cancel:"Änderungen ignorieren"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s",edit_attributes:"Edit attributes of pasted features in multiple mode"},copyfeaturefromprojectlayer:{title:"Select one feature"}}}}},{}],23:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"An error occurs. It's no possible to edit layers",some_layers:"An error occurs: It's no possible to edit some layers"},search:"Search",editing_changes:"Editing Changes",editing_data:"Editing Layers",editing_attributes:"Editing attributes",relations:"Relations",edit_relation:"Edit relation",back_to_relations:"Back to Relations",no_relations_found:"No relations found",relation_data:"Relation data",relation_already_added:"Relation already added",list_of_relations_feature:"List of relations feature ",tooltip:{edit_layer:"Edit Layer"},toolbox:{title:"Edit"},table:{edit:"Edit feature",copy:"Create a copy",delete:"Delete feature"},tools:{copy:"Copy features",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Add part to multipart",deletepart:"Delete part from multipart",merge:"Dissolve features",split:"Split Feature",add_feature:"Add feature",delete_feature:"Delete feature",move_feature:"Move feature",update_vertex:"Update feature vertex",update_feature:"Update feature attribute",update_multi_features:"Update attributes of selected features",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Select features",select_element:"Select feature",copy:"Create new copy of selected features",merge:"Dissolve features",split:"Split Feature",new:"Create new feature",edit_table:"Edit table features",draw_new_feature:"Draw feature on map",action_confirm:"Confirm action",double_click_delete:"Select feature on map to delete",edit_feature_vertex:"Modify or add a vertex on selected feature",move:"Move selected feature",select_feature_to_relation:"Select feature that you bind relation",show_edit_feature_form:"Show feature form to edit attributes",pick_feature:"Select feature on map to modify",insert_attributes_feature:"Insert attributes of the feature"}},workflow:{steps:{select:"Click on feature to select",draw_part:"Draw new part",merge:"Select featurewhere dissolve",selectSHIFT:"Select features drawing a rectangle pressing SHIFT",selectDrawBox:"Select features drawing a rectangle by two point of opposite corners",selectDrawBoxAtLeast2Feature:"Select at least features drawing a rectangle by two point of opposite corners",selectPoint:"Click on feature to select",selectPointSHIFT:"Select features drawing a rectangle pressing SHIFT (multifeatures) or click on one feature",selectMultiPointSHIFT:"Select features drawing a rectangle pressing SHIFT or click on feature",selectMultiPointSHIFTAtLeast2Feature:"Select at least 2 features drawing a rectangle pressing SHIFT or click on feature",copyCTRL:"Copy selected features using CTRL+C",selectStartVertex:"Select starting vertex of selected features",selectToPaste:"Select the point where paste the features selected",draw_split_line:"Draw a line to split selected feature"},title:{steps:"Steps"},next:"Next"},messages:{featureslockbyotheruser:"Some geometries/records are not editable because in editing by other user",splitted:"Splitted",nosplittedfeature:"Feature not spitted",press_esc:"Press ESC to back",online:"Back ONLINE. Now you can save your changes on database",offline:"You are OFFLINE. All changes are saved locally",delete_feature:"Do you want delete selected feature ?",delete_feature_relations:"If feature has bindings relations, these relations become orphans. We suggest to handle these relations before detele this feature",unlink_relation:"Do you want unlink relation?",commit_feature:"Do you want to save the changes",toolbox_has_relation:"this layer is part of a relation",saved:"Data saved successfully",saved_local:"Data saved locally successfully",loading_data:"Loading data",saving:"Saving data. Please wait ...",constraints:{enable_editing:"Please Zoom In to enable editing tools \nActivation scale at 1:"},pdf:"Document preview not available. Please click here ",commit:{header:"The following list show all changes to commit.",header_add:"<b>Added</b> show the number of features added",header_update_delete:"<b>Modified</b> and <b>Deleted</b> show the list of features id",add:"Added(n. features)",delete:"Deleted(id)",update:"Modified(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"It is necessary to fill in any mandatory fields on the features pasted before saving",no_feature_selected:"No feature selected",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Select relations to link it to current editing feature.</div>"},draw_new_feature:"Draw new feature",draw_or_copy:"or",copy_feature_from_other_layer:"Copy feature from other layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Create and link new relation",link_relation:"Join a relation to this feature",open_relation_tools:"Show relation tools",unlink_relation:"Unlink relation"}},buttons:{save:"Insert/Edit",save_and_back:"Save and Back",save_and_back_table:"Save and Back",cancel:"Ignore Changes"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s",edit_attributes:"Edit attributes of pasted features in multiple mode"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],24:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"Tapahtui virhe. Tasoja ei ole mahdollista muokata.",some_layers:"Tapahtui virhe. Jotkin tasot eivät ole muokattavissa."},search:"Haku",editing_changes:"Editing Changes",editing_data:"Muokataan tasoja",editing_attributes:"Muokataan attribuutteja",relations:"Relaatiot",edit_relation:"Muokkaa relaatiota",back_to_relations:"Takaisin relaatioihin",no_relations_found:"Relaatioita ei löytynyt",relation_data:"Relaation tiedot",relation_already_added:"Relaatio on jo lisätty",list_of_relations_feature:"Lista relaation ominaisuuksista",tooltip:{edit_layer:"Muokkaa tasoa"},toolbox:{title:"Muokkaa"},table:{edit:"Muokkaa ominaisuutta",copy:"Luo kopio",delete:"Poista ominaisuus"},tools:{copy:"Kopio ominaisuuksia",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Lisää osa",deletepart:"Poista osa",merge:"Yhdistä ominaisuudet",split:"Leikkaa ominaisuus",add_feature:"Lisää ominaisuus",delete_feature:"Poista ominaisuus",move_feature:"Siirrä ominaisuutta",update_vertex:"Päivitä pisteen ominaisuutta",update_feature:"Päivitä ominaisuus",update_multi_features:"Muokkaa valittujen ominaisuuksien attribuutteja",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Valitse ominaisuudet",select_element:"Valitse ominaisuus",copy:"Luo kopio valituista ominaisuuksista",merge:"Yhdistä ominaisuudet",split:"Leikkaa ominaisuus",new:"Luo uusi ominaisuus",edit_table:"Muuta taulun ominaisuuksia",draw_new_feature:"Piirrä ominaisuus kartalle",action_confirm:"Hyväksy toiminto",double_click_delete:"Valitse poistettava ominaisuus kartalta",edit_feature_vertex:"Muuta pistettä tai lisää piste valittuun ominaisuuteen",move:"Siirrä valittu ominaisuus",select_feature_to_relation:"Valitse relaatio",show_edit_feature_form:"Näytä ominaisuuslomake muokataksesi attribuutteja",pick_feature:"Valitse muokattava ominaisuus kartalta",insert_attributes_feature:"Lisää ominaisuuden attribuutit"}},workflow:{steps:{select:"Valitse ominaisuus",draw_part:"Piirrä uusi osa",merge:"Valitse ominaisuus yhdistääksesi",selectSHIFT:"Paina SHIFT, jos haluat valita kohteita suorakulmiovalinnalla.",selectDrawBox:"Piirrä suorakulmio, jonka siältä kohteet valitaan ",selectDrawBoxAtLeast2Feature:"Piirrä suorakulmio, jonka siältä kohteet vähintään 2 valitaan ",selectPoint:"Valitse ominaisuus",selectPointSHIFT:"Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksittäinen ominaisuus.",selectMultiPointSHIFT:"Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksittäinen ominaisuus.",selectMultiPointSHIFTAtLeast2Feature:"Paina SHIFT, jos haluat valita vähintään 2 ominaisuuksia suorakulmiovalinnalla, tai valitse yksittäinen ominaisuus.",copyCTRL:"CTRL+C, voit kopioida valitut ominaisuudet.",selectStartVertex:"Osoita valittujen ominaisuuksien alkupiste.",selectToPaste:"Valitse kohta, johon liität valitut ominaisuudet.",draw_split_line:"Piirrä viiva, jonka mukaan valittu ominaisuus jaetaan."},title:{steps:"Vaiheet"},next:"Seuraava"},messages:{featureslockbyotheruser:"Some features are locked by another user",splitted:"Jaettu",nosplittedfeature:"Ominaisuutta ei jaettu",press_esc:"Paina ESC palataksesi",online:"Yhteys muodostettu. Muutokset voidaan tallentaa tietokantaan.",offline:"Olet offline-tilassa. Muutokset tallennetaan paikallisesti",delete_feature:"Haluatko poistaa valitun ominaisuuden?",delete_feature_relations:"Mikäli ominaisuudella on sitovia relaatioita, näistä relaatiosta tulee orpoja. Suosittelemme käsittelemään nämä relaatiot ennen poistamista",unlink_relation:"Haluatko poistaa relaation?",commit_feature:"Tallennetaanko muutokset?",toolbox_has_relation:"tämä kerros on osa relaatiota",saved:"Tiedot tallennettu onnistuneesti",saved_local:"Tiedot on tallennettu onnistuneesti paikallisesti.",loading_data:"Ladataan tietoja",saving:"Tallentaan tietoja. Odota...",constraints:{enable_editing:"Lähennä ottaaksesi muokkaustyökalut käyttöön \nAktivointi mittakaava 1:"},pdf:"Dokumentin esikatselu ei ole saatavilla. Paina tästä ",commit:{header:"Seuraava luettelo näyttää kaikki muutokset.",header_add:"<b>Lisätty</b> näytä lisättyjen ominaisuuksien lukumäärä",header_update_delete:"<b>Muokattu</b> ja <b>Poistettu</b> Näytä listä ominaisuuksien id:stä",add:"Lisätty(n. ominaisuutta)",delete:"Poistettu(id)",update:"Muokattu(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"It is necessary to fill in any mandatory fields on the features pasted before saving",no_feature_selected:"No feature selected",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Valitse relaatiota linkittääksesi ne muokattavaan ominaisuuteen.</div>"},draw_new_feature:"Draw new feature",draw_or_copy:"or",copy_feature_from_other_layer:"Copy feature from other layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Luo ja linkitä uusi relaatio",link_relation:"Liitä relaatio tähän ominaisuuteen",open_relation_tools:"Näytä relaatiotyökalut",unlink_relation:"Poista relaatio"}},buttons:{save:"Lisää/muokkaa",save_and_back:"Tallenna ja palaa",save_and_back_table:"Tallenna ja palaa",cancel:"Peruuta"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s",edit_attributes:"Edit attributes of pasted features in multiple mode"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],25:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"Une erreur s'est produite lors du chargement des layers dans l'édition.",some_layers:"Une erreur s'est produite lors du chargement de certaines layers dans l'édition."},search:"Recherche",editing_changes:"Editing Changes",editing_data:"Modifier les donnes",editing_attributes:"Modifier les attributs",relations:"Relations",edit_relation:"Modifier la relation",back_to_relations:"Retour aux relations",no_relations_found:"Il n'y a pas de relations",relation_data:"Données sur les relations",relation_already_added:"Relation déjà présente",list_of_relations_feature:"Lister les relations de la fonctionnalité",tooltip:{edit_layer:"Modifier le layer"},toolbox:{title:"Modifier"},table:{edit:"Modifier fonctionnalités",copy:"Créer une copie",delete:"Supprimer la fonctionnalité"},tools:{copy:"Copier les fonctionnalités",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Ajouter une pièce à la géométrie",deletepart:"Supprimer la partie de la géométrie",merge:"Dissoudre les fonctionnalités",split:"Couper la fonctionnalité",add_feature:"Ajouter une fonctionnalité",delete_feature:"Supprimer la fonctionnalité",move_feature:"Déplacez la fonctionnalité",update_vertex:"Mettre à jour les sommets des fonctionnalités",update_feature:"Modifier les attributs des fonctionnalités",update_multi_features:"Modifier les attributs des fonctionnalités sélectionnées",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Sélectionner les fonctionnalités",select_element:"Sélectionner une fonctionnalité",copy:"Créer une copie des fonctionnalités sélectionnées",merge:"Dissoudre les fonctionnalités",split:"Couper la fonctionnalité",new:"Créer une nouvelle fonctionnalité",edit_table:"Modifier les fonctionnalités de la table",draw_new_feature:"Dessiner une fonctionnalité sur la carte",action_confirm:"Confirmer l'action",double_click_delete:"Sélectionner la fonctionnalité sur la carte à supprimer",edit_feature_vertex:"Modifier ou ajouter un sommet à la fonctionnalité sélectionnée",move:"Déplacer la fonctionnalité sélectionnée",select_feature_to_relation:"Sélectionner la fonctionnalité que vous souhaitez mettre en relation",show_edit_feature_form:"Afficher le formulaire de la fonctionnalité permettant de modifier les attributs",pick_feature:"Sélectionner l'élément de la carte à modifier",insert_attributes_feature:"Insérer les attributs de la fonctionnalité"}},workflow:{steps:{select:"Cliquer sur la fonctionnalité à sélectionner",draw_part:"Dessiner la nouvelle partie",merge:"Sélectionner la fonction à introduire en fondu",selectPoint:"Cliquer sur la fonctionnalité pour la sélectionner",selectSHIFT:"Sélectionner des fonctionnalités en maintenant la touche SHIFT enfoncée",selectDrawBox:"Sélectionner les fonctionnalités en dessinant un rectangle par la création des deux points de la diagonale",selectDrawBoxAtLeast2Feature:"Sélectionner au moins 2 fonctionnalités en dessinant un rectangle par la création des deux points de la diagonale",selectPointSHIFT:"Sélectionner des caractéristiques en maintenant la touche SHIFT enfoncée (multi-sélection) ou en cliquant sur une seule caractéristique",selectMultiPointSHIFT:"Sélectionner des fonctionnalités en maintenant la touche SHIFT appuyée ou en cliquant sur la fonctionnalité individuelle",selectMultiPointSHIFTAtLeast2Feature:"Sélectionner au moins 2 fonctionnalités en maintenant la touche SHIFT appuyée ou en cliquant sur la fonctionnalité individuelle",copyCTRL:"Copier les fonctionnalités sélectionnées avec CTRL+C",selectStartVertex:"Sélectionner le sommet de départ des fonctionnalités choisies",selectToPaste:"Sélectionner le point où les fonctionnalités sélectionnées seront collées",draw_split_line:"Tracez une ligne pour couper la fonctionnalité sélectionnée"},title:{steps:"Étapes"},next:"Suivant"},messages:{featureslockbyotheruser:"Certaines géométries/enregistrements ne sont pas modifiables car ils ont été modifiés par un autre utilisateur",splitted:"Fonctionnalité(s) divisé(es)",nosplittedfeature:"La (les) fonctionnalité(s) n’a (n'ont) pas été divisé(es)",press_esc:"Appuyez sur ESC pour revenir",online:"Vous êtes à nouveau EN LIGNE. Vous pouvez enregistrer les modifications de façon permanente",offline:"Vous êtes HORS LIGNE. Toutes les modifications seront enregistrées temporairement en local",delete_feature:"Voulez-vous supprimer la fonctionnalité sélectionnée ?",delete_feature_relations:"La suppression d'une fonctionnalité avec des relations associées laissera ces relations orphelines. Il est recommandé de gérer ces relations avant de supprimer la fonctionnalité",unlink_relation:"Voulez-vous détacher la relation ?",commit_feature:"Voulez-vous enregistrer définitivement les changements ?",toolbox_has_relation:"cette couche fait partie d'une relation",saved:"Les données ont été enregistrées correctement",saved_local:"Les données ont été correctement sauvegardées localement",loading_data:"Chargement des données",saving:"Sauvegarde des données. Veuillez patienter ...",constraints:{enable_editing:"Augmenter le niveau de zoom pour permettre l'édition \nEchelle de déclenchement 1 :"},pdf:"Aperçu du document non disponible. Cliquez ici ",commit:{header:"La liste ci-dessous montre toutes les modifications qui seront enregistrées.",header_add:"<b>Ajouts</b> indique le nombre de fonctionnalités ajoutées",header_update_delete:"<b>Modifié</b> e <b>Supprimé</b> liste les ids",add:"Ajouté (n. fonctionnalités)",delete:"Supprimé(id)",update:"Modifié(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"Avant d'enregistrer, il est nécessaire de remplir tous les champs obligatoires du features saisi",no_feature_selected:"Aucune feature sélectionnée",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Sélectionner les relations pour les associer à l'élément en cours d'édition.</div>"},draw_new_feature:"Dessiner une nouvelle feature",draw_or_copy:"ou",copy_feature_from_other_layer:"Copier feature d'une autre layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Créer et ajouter une nouvelle relation",link_relation:"Associer une relation existante à cette fonctionnalité",open_relation_tools:"Outils de relation ouverte",unlink_relation:"Annuler la relation"}},buttons:{save:"Insérer/Modifier",save_and_back:"Sauvegarder et retourner au parent",save_and_back_table:"Sauvegarder et et revenir en arrière",cancel:"Ignorer modifications"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s",edit_attributes:"Edit attributes of pasted features in multiple mode"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],26:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=u(e("./it")),r=u(e("./en")),o=u(e("./fi")),a=u(e("./se")),s=u(e("./fr")),l=u(e("./de")),e=u(e("./ro"));function u(e){return e&&e.__esModule?e:{default:e}}n.default={it:i.default,en:r.default,fi:o.default,se:a.default,fr:s.default,de:l.default,ro:e.default}},{"./de":22,"./en":23,"./fi":24,"./fr":25,"./it":27,"./ro":28,"./se":29}],27:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"Si è verificato un errore nel caricamento dei layers in editing.",some_layers:"Si è verificato un errore nel caricamento di alcuni layers in editing"},search:"Cerca",editing_changes:"Modifiche Editing",editing_data:"Edita Dati",editing_attributes:"Edita attributi",relations:"Relazioni",edit_relation:"Edita relazione",back_to_relations:"Ritorna alle Relazioni",no_relations_found:"Non ci sono relazioni",relation_data:"Dati relativi alla relazione",relation_already_added:"Relazione già presente",list_of_relations_feature:"Elenco Relazioni della feature ",tooltip:{edit_layer:"Modifica Layer"},toolbox:{title:"Edita"},table:{edit:"Edita feature",copy:"Crea una copia",delete:"Cancella feature"},tools:{copy:"Copia features",pastefeaturesfromotherlayers:"Incolla features da altro layer",addpart:"Aggiungi parte alla geometria",deletepart:"Cancella parte dalla geometria",merge:"Dissolvi features",split:"Taglia Feature",add_feature:"Aggiungi feature",delete_feature:"Elimina feature",move_feature:"Muovi feature",update_vertex:"Aggiorna vertici feature",update_feature:"Modifica attributi feature",update_multi_features:"Modifica gli attributi delle features selezionate",copyfeaturefromexternallayer:"Crea feature dal layer aggiunto"},toolsoftool:{measure:"Visualizza misura",snap:"Snap sul layer",snapall:"Snap su tutti i layer"},steps:{help:{select_elements:"Seleziona le features",select_element:"Seleziona la feature",copy:"Crea una copia delle feature selezionate",merge:"Dissolvi features",split:"Taglia Feature",new:"Creo una nuova feature",edit_table:"Edita le features della tabella",draw_new_feature:"Disegna sulla mappa la feature",action_confirm:"Conferma azione",double_click_delete:"Seleziona la feature sulla mappa da cancellare",edit_feature_vertex:"Modifica o aggiungi un vertice alla feature selezionata",move:"Muovi la feature selezionata",select_feature_to_relation:"Seleziona la feature che vuoi mettere in relazione",show_edit_feature_form:"Mostra il form della feature per poter editare gli attributi",pick_feature:"Seleziona la feature sulla mappa da modificare",insert_attributes_feature:"Inserisci gli attributi della feature"}},workflow:{steps:{select:"Clicca sulla feature da selezionare",draw_part:"Disegna la nuova parte",merge:"Seleziona la feature su cui dissolvere",selectPoint:"Clicca sulla feature per selezionarla",selectSHIFT:"Seleziona le features tenedo premuto il tasto SHIFT",selectDrawBox:"Seleziona le features disegnando un rettangolo mediante la creazione dei due punti della diagonale",selectDrawBoxAtLeast2Feature:"Seleziona almeno 2 features disegnando un rettangolo mediante la creazione dei due punti della diagonale",selectPointSHIFT:"Seleziona le features tenedo premuto il tasto SHIFT (multiselezione) oppure cliccando sulla singola feature",selectMultiPointSHIFT:"Seleziona le features tenedo premuto il tasto SHIFT oppure cliccando sulla singola feature",selectMultiPointSHIFTAtLeast2Feature:"Seleziona almeno 2 features tenedo premuto il tasto SHIFT oppure cliccando sulla singola feature",copyCTRL:"Copia le features selezionate con CTRL+C",selectStartVertex:"Seleziona il vertice di partenza delle feature selezionate",selectToPaste:"Seleziona il punto dove verranno incollate le features selezionate",draw_split_line:"Disegna una linea per tagliare la feature selezionata"},title:{steps:"Passi"},next:"Avanti"},messages:{featureslockbyotheruser:"Ci sono alcune geometrie/records non editabili perchè in modifica da altri utenti",splitted:"Feature(s) splittata(e)",nosplittedfeature:"La(e) feature(s) non è stata splittata",press_esc:"Premi ESC per tornare indietro",online:"Ora sei di nuovo ONLINE. Puoi slavare le modifiche in modo permanente",offline:"Sei OFFLINE. Tutte le modifiche saranno salvate temporaneamente in locale",delete_feature:"Vuoi eliminare l'elemento selezionato?",delete_feature_relations:"Cancellando una feature con relazioni associate, tale relazioni rimarranno orfane. Si consiglia di gestire tali relazioni prima di cancellare la feature",unlink_relation:"Vuoi staccare la relazione?",commit_feature:"Vuoi salvare definitivamente le modifiche",toolbox_has_relation:"questo livello fa parte di una relazione",saved:"I dati sono stati salvati correttamente",saved_local:"I dati sono stati salvati correttamente in locale",loading_data:"Caricamento dati",saving:"Salvataggio dati in corso. Attendere ...",constraints:{enable_editing:"Aumentare il livello di zoom per abilitare l'editing \nScala di attivazione 1:"},pdf:"Anteprima del documento non disponibile. Clicca qui ",commit:{header:"La lista sotto riporta tutte le modifiche che verranno salvate.",header_add:"<b>Aggiunte</b> riporta il numero delle features aggiunte",header_update_delete:"<b>Modificate</b> e <b>Cancellate</b> riporta la lista degli id",add:"Aggiunte (n. features)",delete:"Cancellate(id)",update:"Modificate(id)"},loading_table_data:"Costruzione tabella dati in corso. Attendere ...",copy_and_paste_from_other_layer_mandatory_fields:"Necessario compilare eventuali campi obbligatori sulle features incollate prima del salvataggio",no_feature_selected:"Nessuna feature selezionata",select_min_2_features:"Seleziona come minimo due features"},relation:{table:{info:"<div>Seleziona le relazioni per associarle alla feature in editing.</div>"},draw_new_feature:"Disegna nuova geometria",draw_or_copy:"oppure",copy_feature_from_other_layer:"Copia geometria da altro layer"},form:{relations:{tooltips:{back_to_father:"Torna ad editare il padre",add_relation:"Crea ed aggiungi nuova relazione",link_relation:"Associa una relazione esistente a questa feature",open_relation_tools:"Apri strumenti relatione",unlink_relation:"Annulla relazione"}},buttons:{save:"Inserisci/Modifica",save_table:"Modifica",save_and_back:"Salva e torna al padre",save_and_back_table:"Salva e torna indietro",cancel:"Ignora Modifiche"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Seleziona feature/s",edit_attributes:"Edita attributi delle features in multiple mode"},copyfeaturefromprojectlayer:{title:"Seleziona una feature"}}}}},{}],28:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"Avem o eroare. Straturile nu sunt editabile",some_layers:"Avem o eroare: Anumite straturi nu se pot edita"},search:"Caută",editing_changes:"Modificare schimbări",editing_data:"Modificare straturi",editing_attributes:"Modificare atribute",relations:"Relații",edit_relation:"Modifică relația",back_to_relations:"Înapoi la Relații",no_relations_found:"Nu am găsit relații",relation_data:"Date relații",relation_already_added:"Relație adăugată deja",list_of_relations_feature:"Lista relații entitatea ",tooltip:{edit_layer:"Modifică strat"},toolbox:{title:"Modifică"},table:{edit:"Modifică entitate",copy:"Creează o copie",delete:"Elimină entitatea"},tools:{copy:"Copiază entitățile",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Adaugă o parte la multiparte",deletepart:"Elimină partea din multiparte",merge:"Dizolvare entități",split:"Divizare Entitate",add_feature:"Adaugă entitate",delete_feature:"Eliminare entitate",move_feature:"Mută entitate",update_vertex:"Actualizează vertecșii entității",update_feature:"Actualizează atributul entității",update_multi_features:"Actualizează atributele entităților selectate",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Arată măsurătorile",snap:"Acroșare strat",snapall:"Acroșare pe toate straturile"},steps:{help:{select_elements:"Selectează entități",select_element:"Selectează entitate",copy:"Creează o nouă copie a entităților selectate",merge:"Dizolvă entitățile",split:"Divizare Entitate",new:"Creează o entitate",edit_table:"Modifică entitățile tabelare",draw_new_feature:"Desenează entitate pe hartă",action_confirm:"Confirmă acțiunea",double_click_delete:"Selectează entitatea de eliminat din hartă",edit_feature_vertex:"Modifică sau adaugă un vertex la entitatea selectată",move:"Mută entitatea selectată",select_feature_to_relation:"Selectează entitate pentru relaționare",show_edit_feature_form:"Arată formularul entității pentru modificări",pick_feature:"Selectează entitățile de modificat din hartă",insert_attributes_feature:"Inserează atributele entității"}},workflow:{steps:{select:"Click pe entitate pentru a o selecta",draw_part:"Desenează o parte nouă",merge:"Selectează partea de dizolvat",selectSHIFT:"Selectează entități prin desen triunghi apăsând SHIFT",selectDrawBox:"Selectează entități desenând un dreptunghi prin două puncte opuse",selectDrawBoxAtLeast2Feature:"Selectează cel puțin 2 entități prin desenul unui dreptunghi",selectPoint:"Click pe entitate pentru selectare",selectPointSHIFT:"Selectează entități prin desen dreptunghi apăsând SHIFT (multientități) sau prin click pe entitate",selectMultiPointSHIFT:"Selectează entități prin desen dreptunghi apăsând SHIFT sau prin click pe entitate",selectMultiPointSHIFTAtLeast2Feature:"Selectează cel puțin 2 entități prin desen dreptunghi apăsând SHIFT sau prin click pe entitate",copyCTRL:"Copiază entitățile selectate folosint CTRL+C",selectStartVertex:"Selectează vertexul de start a entităților selectate",selectToPaste:"Selectează punctul unde să lipim entitățile selectate",draw_split_line:"Desenează o linie pentru a diviza entitatea selectată"},title:{steps:"Pași"},next:"Următorul"},messages:{featureslockbyotheruser:"Unele geometrii/înregistrări nu sunt editabile deoarece sunt editate de către alt utilizator",splitted:"Divizat",nosplittedfeature:"Entitate nedivizată",press_esc:"ESC pentru înapoi",online:"Înapoi ONLINE. Acum se pot salva schimbările",offline:"OFFLINE. Schimbările sunt salvate local",delete_feature:"Șterg entitatea selectată?",delete_feature_relations:"Dacă entitatea are relații care trimit la ea, acele relații devin orfane. Sugerăm să vă ocupați de acele elemente înainte să eliminați această entitate.",unlink_relation:"Dorești să eliminați legătura cu relația?",commit_feature:"Salvăm?",toolbox_has_relation:"acest strat face parte dintr-o relație",saved:"Datele sunt salvate",saved_local:"Datele s-au salvat local",loading_data:"Datele se încarcă.",saving:"Salvăm datele. Așteptați ...",constraints:{enable_editing:"Pentru a activa Modificare faceți zoom la \nScara de activare 1:"},pdf:"Previzualizarea documentului nu este disponibilă. Click aici ",commit:{header:"Lista cu toate modificările.",header_add:"<b>Adăugate</b> arată nr. de entități adăugate",header_update_delete:"<b>Modificate</b> și <b>Șterse</b> arată lista de id-uri de entități",add:"Adăugate(n. entități)",delete:"Eliminate(id)",update:"Modificate(id)"},loading_table_data:"Încărcăm tabelul de date ...",copy_and_paste_from_other_layer_mandatory_fields:"Înainte de a salva, este necesar să completați toate câmpurile obligatorii ale entități introduse",no_feature_selected:"Nicio feature selectată",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Selectează relațiile pentru a face legătura cu entitatea curentă.</div>"},draw_new_feature:"Desenați o nouă feature",draw_or_copy:"sau",copy_feature_from_other_layer:"Copiați feature dintr-un alt layer"},form:{relations:{tooltips:{back_to_father:"Înapoi la modificările entității părinte",add_relation:"Creează și fă legătura unei relații noi",link_relation:"Leagă o relație de entitate",open_relation_tools:"Arată instrumentele pentru relații",unlink_relation:"Elimină legătura la relație"}},buttons:{save:"Inserați/Editați",save_and_back:"Salvează și dă înapoi",save_and_back_table:"Salvează și dă înapoi",cancel:"Ignorați modificările"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s",edit_attributes:"Edit attributes of pasted features in multiple mode"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],29:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={errors:{no_layers:"Ett fel uppstod. Nivåerna kan inte redigeras.",some_layers:"Ett fel uppstod. Vissa nivåer kan inte redigeras."},search:"Sökning",editing_changes:"Editing Changes",editing_data:"Nivåerna redigeras",editing_attributes:"Attributen redigeras",relations:"Relationer",edit_relation:"Redigera relationen",back_to_relations:"Tillbaka till relationerna",no_relations_found:"Inga relationer hittades",relation_data:"Relationsuppgifter",relation_already_added:"Relationen har redan lagts till",list_of_relations_feature:"Lista på relationens egenskaper",tooltip:{edit_layer:"Redigera nivån"},toolbox:{title:"Redigera"},table:{edit:"Redigera egenskap",copy:"Skapa en kopia",delete:"Ta bort egenskap"},tools:{copy:"Kopiera egenskaper",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Lägg till del",deletepart:"Ta bort del",merge:"Slå samman egenskaper",split:"Dela upp egenskap",add_feature:"Lägg till egenskap",delete_feature:"Ta bort egenskap",move_feature:"Flytta egenskap",update_vertex:"Uppdatera punktens egenskap",update_feature:"Uppdatera egenskap",update_multi_features:"Ändra attributen för de valda funktionerna",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Välj egenskaper",select_element:"Välj egenskapalitse ominaisuus",copy:"Skapa kopia av valda egenskaper",merge:"Slå samman egenskaper",split:"Dela upp egenskap",new:"Skapa ny egenskap",edit_table:"Ändra egenskaper i tabellen",draw_new_feature:"Piirrä ominaisuus kartalle",action_confirm:"Godkänn funktionen",double_click_delete:"Välj funktionen som du vill ta bort på kartan",edit_feature_vertex:"Ändra punkten eller lägg till punkten till den valda egenskapen",move:"Flytta den valda egenskapen",select_feature_to_relation:"Välj relation",show_edit_feature_form:"Visa egenskapsformuläret för redigering av attribut",pick_feature:"Välj funktion på kartan för att ändras",insert_attributes_feature:"Lägg till egenskapens attribut"}},workflow:{steps:{select:"Välj egenskap",draw_part:"Rita ny del",merge:"Välj egenskap att slå samman",selectSHIFT:"Tryck SHIFT, om du vill välja objekt med hjälp av rektangel.",selectDrawBox:"Rita upp den rektangel inom vilken objekten väljs ",selectDrawBoxAtLeast2Feature:"Rita rektangeln inom vilken minst två objekt är markerade ",selectPoint:"Välj egenskap",selectPointSHIFT:"Tryck SHIFT, om du vill välja objekt med hjälp av rektangel, eller välj en enskild egenskap.",selectMultiPointSHIFT:"Tryck SHIFT, om du vill välja objekt med hjälp av rektangel, eller välj en enskild egenskap.",selectMultiPointSHIFTAtLeast2Feature:"Tryck på SKIFT för att välja minst två objekt med en rektangel eller välj en enda egenskap. ",copyCTRL:"CTRL+C, du kan kopiera valda egenskaper.",selectStartVertex:"Visa startpunkten för valda egenskaper.",selectToPaste:"Välj punkt till vilken de valda egenskaperna ska fogas.",draw_split_line:"Rita en linje enligt vilken den valda egenskapen ska uppdelas."},title:{steps:"Skeden"},next:"Nästa"},messages:{featureslockbyotheruser:"Jotkut geometriat/tietueet eivät ole muokattavissa, koska muut käyttäjät muokkaavat niitä",splitted:"Uppdelad",nosplittedfeature:"Egenskapen har inte delats upp",press_esc:"Tryck ESC för att gå tillbaka",online:"Förbindelsen har upprättats. Ändringar kan sparas i databasen.",offline:"Du är i offline-läge. Ändringarna sparas lokalt",delete_feature:"Vill du ta bort den valda egenskapen?",delete_feature_relations:"Om egenskapen saknar bindande relationer blir dessa relationer föräldralösa. Vi rekommenderar att du behandlar dessa relationer innan du lämnar programmet",unlink_relation:"Vill du ta bort relationen?",commit_feature:"Ska ändringarna sparas?",toolbox_has_relation:"detta lager är en del av en relation",saved:"Uppgifterna sparades",saved_local:"Uppgifterna sparades lokalt.",loading_data:"Uppgifterna laddas",saving:"Uppgifterna sparas. Vänta...",constraints:{enable_editing:"Zooma in för att börja använda redigeringsverktyg \nAktivering skala 1:"},pdf:"Förhandsgranskning av dokument är inte tillgänglig. Tryck här",commit:{header:"Följande lista visar alla ändringar.",header_add:"<b>Tillagda</b> visar antalet egenskaper som lagts till",header_update_delete:"<b>Redigerad</b> och <b>Borttagen</b> Visa en lista på egenskapernas id",add:"(n. egenskaper) har lagts till",delete:"Borttagen (id)",update:"Redigerad(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"It is necessary to fill in any mandatory fields on the features pasted before saving",no_feature_selected:"No feature selected",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Välj relation för länkning till egenskap som ska redigeras.</div>"},draw_new_feature:"Draw new feature",draw_or_copy:"or",copy_feature_from_other_layer:"Copy feature from other layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Skapa och länka ny relation",link_relation:"Foga relationen till denna egenskap",open_relation_tools:"Visa relationsverktyg",unlink_relation:"Ta bort relation"}},buttons:{save:"Infoga/Redigera",save_and_back:"Spara och gå tillbaka",save_and_back_table:"Spara och gå tillbaka",cancel:"Ignorera ändringar"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s",edit_attributes:"Edit attributes of pasted features in multiple mode"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],30:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var e=e("./i18n"),e=(e=e)&&e.__esModule?e:{default:e};n.default={i18n:e.default}},{"./i18n":26}],31:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=n.VM=new Vue;n.default={VM:i}},{}],32:[function(n,e,t){function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}var i=g3wsdk.core.utils,u=i.base,i=i.inherit,c=g3wsdk.gui.GUI,r=g3wsdk.gui.vue.FormComponent,d=n("./editingformservice");function o(){var i=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=(u(this,r),n("../services/editingservice")),a=r.context_inputs||null,s=r.layer.getId(),e=r.layer.getLayerEditingFormStructure(),t=a&&a.inputs&&a.inputs.features&&a.inputs.features[a.inputs.features.length-1];e&&t&&(t.isNew()?Promise.resolve():o.getLayersDependencyFeatures(s,{relations:r.layer.getRelations().getArray().filter(function(e){return s===e.getFather()&&o.getLayerById(e.getChild())&&"ONE"!==e.getType()}),feature:t,filterType:"fid"})).then(function(){a.formEventBus=i.getService().getEventBus();var t,e=new d(a).buildRelationComponents(),n=o.getFormComponentsById(s);0<n.length&&i.addFormComponents(n),0<e.length&&i.addFormComponents(e),i.getService().handleRelation=(t=l(function*(e){e=e.relation;c.setLoadingContent(!0),yield o.setLayerUniqueFieldValues(r.layer.getRelationById(e.name).getChild()),this.setCurrentComponentById(e.name),c.setLoadingContent(!1)}),function(e){return t.apply(this,arguments)})})}i(o,r),e.exports=o},{"../services/editingservice":49,"./editingformservice":33}],33:[function(r,e,t){var s=g3wsdk.gui.GUI,l=r("../components/FormRelation.vue");e.exports=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=r("../services/editingservice"),n=(this.state={relations:[]},e.inputs||{}),i=n.layer,n=n.features,o=(this._formEventBus=e.formEventBus||null,i.getId()),a=i.getRelations().getArray().filter(function(e){return"ONE"!==e.getType()&&e.getFather()===o}),a=t.getRelationsInEditing({layerId:o,relations:a,feature:n[n.length-1]});this.hasRelations=function(){return 0<a.length},this.buildRelationComponents=function(){var i=this,r=[];return a.forEach(function(e){var t=e.relation,n=e.relations,e=Vue.extend({mixins:[l],name:"relation_"+Date.now(),methods:{getService:function(){return i._relationsService}},data:function(){return{layerId:o,relation:t,relations:n,resourcesurl:s.getResourcesUrl(),formeventbus:i._formEventBus}}});r.push({title:"plugins.editing.edit_relation",name:t.name,id:t.id,header:!1,component:e})}),r}}},{"../components/FormRelation.vue":12,"../services/editingservice":49}],34:[function(e,t,n){function o(){this.execute=function(t,e,n){var i,r=void 0;e.forEach(function(e){r=e.feature,n&&r[o.Actions[r.getState()].opposite](),i=o.Actions[r.getState()].fnc,t[i](r)})}}Object.defineProperty(n,"__esModule",{value:!0}),o.Actions={add:{fnc:"addFeature",opposite:"delete"},delete:{fnc:"removeFeature",opposite:"add"},update:{fnc:"updateFeature",opposite:"update"}},n.default=new o},{}],35:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(e("./changesmanager")),o=r(e("./sessionsregistry"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var e=g3wsdk.core.utils,l=e.base,e=e.inherit,u=g3wsdk.core,c=u.ApplicationState,u=u.G3WObject,d=g3wsdk.core.layer.features,f=d.FeaturesStore,p=d.OlFeaturesStore,h=g3wsdk.core.layer.Layer;function g(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setters={save:this._save,addFeature:this._addFeature,updateFeature:this._updateFeature,deleteFeature:this._deleteFeature,setFeatures:this._setFeatures,getFeatures:this._getFeatures},l(this),this._filter={bbox:null},this._allfeatures=!1,this._layer=e.layer,this._featuresstore=new(h.LayerTypes.TABLE===this._layer.getType()?f:p),this._started=!1,this._noteditablefileds=this._layer.getEditingNotEditableFields()||[]}e(g,u);d=g.prototype;d._canDoGetFeaturesRequest=function(){var e=((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter||{}).bbox,t=e&&h.LayerTypes.VECTOR===this._layer.getType();return t&&null===this._filter.bbox?(this._filter.bbox=e,!0):!t||((t=ol.extent.containsExtent(this._filter.bbox,e))||(this._filter.bbox=ol.extent.extend(this._filter.bbox,e)),!t)},d.getEditingSource=function(){return this._featuresstore},d.getSource=function(){this._layer.getSource()},d._applyChanges=function(){i.default.execute(this._featuresstore,0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],!(1<arguments.length&&void 0!==arguments[1])||arguments[1])},d.setChanges=function(e,t){this._applyChanges(e,t)},d.getLayer=function(){return this._layer},d.setLayer=function(e){return this._layer=e},d.removeNotEditablePropriertiesFromFeature=function(t){this._noteditablefileds.forEach(function(e){return t.unset([e])})},d._cloneFeatures=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return e.clone()})},d._addFeaturesFromServer=function(){this._featuresstore.addFeatures(this._cloneFeatures(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]))},d._doGetFeaturesRequest=function(){return!(!c.online||this._allfeatures)&&this._canDoGetFeaturesRequest(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},d._getFeatures=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=$.Deferred();return this._doGetFeaturesRequest(n)?this._layer.getFeatures(n).then(function(e){e.then(function(e){return t._addFeaturesFromServer(e),t._allfeatures=!n.filter,i.resolve(e)}).fail(i.reject)}).fail(i.reject):i.resolve(),i.promise()},d.revert=function(){var e=$.Deferred();return this._featuresstore.setFeatures(this._cloneFeatures(this._layer.readFeatures())),e.resolve(),e.promise()},d.rollback=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=$.Deferred();return this._applyChanges(e,!0),t.resolve(),t.promise()},d.applyChangesToNewRelationsAfterCommit=function(e){var t,n=void 0,i=void 0,r=void 0;for(t in e)n=this.getLayerById(t),(r=(i=this.getEditingLayer(t).getEditingSource()).readFeatures()).forEach(function(e){return e.clearState()}),n.getSource().setFeatures(r),n.applyCommitResponse({response:e[t],result:!0}),i.setFeatures(n.getSource().readFeatures())},d.setFieldValueToRelationField=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.ids,n=void 0===n?[]:n,i=e.field,r=o.default.getSession(t).getEditor().getEditingSource();n.forEach(function(e){e=r.getFeatureById(e);e&&e.set(i.name,i.value)})},d.applyCommitResponse=function(){var e,o=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];t&&t.result&&(e=t.response.new,t=t.response.new_lockids,e.forEach(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.clientid,r=e.id,e=e.properties,t=o._featuresstore.getFeatureById(i);t.setId(r),t.setProperties(e),n.forEach(function(e){Object.entries(e).forEach(function(e){var e=a(e,2),t=e[0],e=e[1],e=void 0===e?{}:e,n=e.fatherField.find(function(e){return o._layer.isPkField(e)});n&&o.setFieldValueToRelationField({layerId:t,ids:e.ids,field:e.childField[e.fatherField.indexOf(n)],values:[i,r]})})})}),(e=this.readEditingFeatures()).forEach(function(e){return e.clearState()}),this._layer.setFeatures([].concat(s(e))),this.addLockIds(t))},d.addLockIds=function(e){this._layer.getSource().addLockIds(e)},d.getLockIds=function(){return this._layer.getSource().getLockIds()},d.commit=function(r){var o=this,t=$.Deferred(),n=[];return r.add.length&&(n=Object.keys(r.relations).map(function(e){var t,n,i=o._layer.getRelations().getRelationByFatherChildren(o._layer.getId(),e);return t={},n=e,e={ids:[].concat(s(r.relations[e].add.map(function(e){return e.id})),s(r.relations[e].update.map(function(e){return e.id}))),fatherField:i.getFatherField(),childField:i.getChildField()},n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t})),this._layer.commit(r).then(function(e){e.then(function(e){o.applyCommitResponse(e,n),t.resolve(e)}).fail(function(e){return t.reject(e)})}).fail(function(e){return t.reject(e)}),t.promise()},d.start=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=$.Deferred();return this.getFeatures(e).then(function(e){e.then(function(e){n.resolve(e),t._started=!0}).fail(n.reject)}).fail(n.reject),n.promise()},d._addFeature=function(e){this._featuresstore.addFeature(e)},d._deleteFeature=function(e){this._featuresstore.deleteFeature(e)},d._updateFeature=function(e){this._featuresstore.updateFeature(e)},d._setFeatures=function(){this._featuresstore.setFeatures(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[])},d.readFeatures=function(){return this._layer.readFeatures()},d.readEditingFeatures=function(){return this._featuresstore.readFeatures()},d.stop=function(){var t=this,n=$.Deferred();return this._layer.unlock().then(function(e){t.clear(),n.resolve(e)}).fail(n.reject),n.promise()},d._save=function(){this._layer.save()},d.isStarted=function(){return this._started},d.clear=function(){this._started=!1,this._filter.bbox=null,this._allfeatures=!1,this._featuresstore.clear(),this._layer.getFeaturesStore().clear(),this._layer.getType()===h.LayerTypes.VECTOR&&this._layer.resetEditingSource(this._featuresstore.getFeaturesCollection())},n.default=g},{"./changesmanager":34,"./sessionsregistry":38}],36:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=g3wsdk.core.utils,r=i.base;function o(){this.id=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).id,r(this),this._maxSteps=10,this._states=[],this.state={commit:!1,undo:!1,redo:!1},this._current=null}(0,i.inherit)(o,g3wsdk.core.G3WObject);i=o.prototype;i.add=function(e,t){var n=this,i=$.Deferred();return null===this._current?this._states=[{id:e,items:t}]:(0<this._states.length&&this._current<this.getLastState().id&&(this._states=this._states.filter(function(e){return e.id<=n._current})),this._states.push({id:e,items:t})),this._current=e,this._setState(),i.resolve(e),i.promise()},i.getRelationStates=function(t){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).clear;for(var e=[],n=0;n<this._states.length;n++){var i=this._states[n],r=i.items.filter(function(e){return(Array.isArray(e)?e[0]:e).layerId===t});0<r.length&&e.push({id:i.id,items:r})}return e},i.insertState=function(e){for(var t=e.id,n=this._states.length,i=0;i<this._states.length;i++){var r=this._states[i];if(r.id>t){n=i;break}if(r.id===t){n=-1;break}}-1<n&&(this._current<t&&(this._current=t),this._states.splice(n,0,e))},i.removeState=function(e){for(var t=void 0,n=0;n<this._states.length;n++)if(this._states[n].id===e){t=n;break}this._current===e&&(this._current=1<this._states.length?this._states[t-1].id:null),this._states.splice(t,1)},i.removeStates=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++){var n=e[t];this.removeState(n)}},i.insertStates=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++)this.insertState(e[t]);this.canCommit()},i._setState=function(){this.canUndo(),this.canCommit(),this.canRedo()},i._checkItems=function(e,t){var n=this,i={own:[],dependencies:{}};return e.forEach(function(e){Array.isArray(e)&&(e=e[t]),(n.id===e.layerId?i:(i.dependencies[e.layerId]||(i.dependencies[e.layerId]={own:[],dependencies:{}}),i.dependencies[e.layerId])).own.push(e)}),i},i.undo=function(){var n=this,i=void 0;return this._current===this.getFirstState().id?(this._current=null,i=this._states[0].items):this._states.find(function(e,t){if(e.id===n._current)return i=n._states[t].items,n._current=n._states[t-1].id,!0}),i=this._checkItems(i,0),this._setState(),i},i.redo=function(){var n=this,i=void 0;return this._current?this._states.find(function(e,t){if(n._current===e.id)return n._current=n._states[t+1].id,i=n._states[t+1].items,!0}):(i=this._states[0].items,this._current=this._states[0].id),i=this._checkItems(i,1),this._setState(),i},i.setItemsFeatureIds=function(){var i=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){var t=e.id,n=e.clientid;i._states.forEach(function(e){e.items.forEach(function(e){e=e.feature.getId()===n&&e.feature;e&&e.setId(t)})})})},i.clear=function(n){var i=this;n?this._states.forEach(function(e,t){-1!==n.indexOf(e.id)&&(i._current&&i._current===e.id()&&i.undo(),i._states.splice(t,1))}):this._clearAll()},i._clearAll=function(){this._states=[],this._current=null,this.state.commit=!1,this.state.redo=!1,this.state.undo=!1},i.getState=function(t){return this._states.find(function(e){return e.id===t})},i.getFirstState=function(){return this._states.length?this._states[0]:null},i.getLastState=function(){var e=this._states.length;return e?this._states[e-1]:null},i.getCurrentState=function(){var t=this,e=null;return e=this._current&&this._states.length?this._states.find(function(e){return t._current===e.id}):e},i.getCurrentStateIndex=function(){var n=this,i=null;return this._current&&this._states.length&&this._states.forEach(function(e,t){if(n._current===e.id)return i=t,!1}),i},i.canCommit=function(){var e,t=this.commit(),n=!1;for(e in t)var i=t[e],n=n||0<i.length;return this.state.commit=n,this.state.commit},i.canUndo=function(){var e=this._states.length-1-this.getCurrentStateIndex();return this.state.undo=null!==this._current&&this._maxSteps>e,this.state.undo},i.canRedo=function(){return this.state.redo=this.getLastState()&&this.getLastState().id!=this._current||null===this._current&&0<this._states.length,this.state.redo},i._getStatesToCommit=function(){var t=this;return this._states.filter(function(e){return e.id<=t._current})},i.commit=function(){var r={};return this._getStatesToCommit().forEach(function(e){e.items.forEach(function(n){var e,t,i=!0;Array.isArray(n)&&(n=n[1]),r[n.layerId]&&r[n.layerId].forEach(function(e,t){if(e.getUid()===n.feature.getUid())return n.feature.isNew()&&!e.isDeleted()&&n.feature.isUpdated()?((e=n.feature.clone()).add(),r[n.layerId][t]=e):n.feature.isNew()&&n.feature.isDeleted()?r[n.layerId].splice(t,1):(n.feature.isUpdated()||n.feature.isDeleted())&&(r[n.layerId][t]=n.feature),i=!1}),i&&(e=n.feature,t=n.layerId,!e.isNew()&&e.isAdded()||(r[t]||(r[t]=[]),r[t].push(e)))})}),r},n.default=o},{}],37:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=r(e("./sessionsregistry")),i=r(e("./history"));function r(e){return e&&e.__esModule?e:{default:e}}var e=g3wsdk.core.utils,o=e.base,e=e.inherit,a=g3wsdk.core.G3WObject,s=g3wsdk.core.layer.Layer,l=g3wsdk.core.geoutils.Geometry.is3DGeometry;function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setters={start:function(){return this._start(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},getFeatures:function(){return this._getFeatures(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},stop:function(){return this._stop()},saveChangesOnServer:function(e){}},o(this,e),this.state={id:e.id,started:!1,getfeatures:!1},this._editor=e.editor,this._history=new i.default({id:this.state.id}),this._temporarychanges=[],this.register()}e(u,a);e=u.prototype;e.getId=function(){return this.state.id},e.getLastHistoryState=function(){return this._history.getLastState()},e.getLastStateId=function(){return this._history.getLastState().id},e.deleteState=function(e){this._history.removeState(e)},e.register=function(){f.default.register(this)},e.unregister=function(){f.default.unregister(this.getId())},e._start=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=$.Deferred();return this._editor.start(e).then(function(e){t.state.started=!0,n.resolve(e)}).fail(function(e){n.reject(e)}),n.promise()},e._getFeatures=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=$.Deferred();return this._allfeatures?n.resolve([]):(this._allfeatures=!e.filter,this._editor.getFeatures(e).then(function(e){e.then(function(e){t.state.getfeatures=!0,n.resolve(e)}).fail(function(e){return n.reject(e)})})),n.promise()},e.isStarted=function(){return this.state.started},e.getEditor=function(){return this._editor},e.setEditor=function(e){this._editor=e},e.save=function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=$.Deferred();return this._temporarychanges.length?(e=n.id||Date.now(),this._history.add(e,this._temporarychanges).then(function(){t._temporarychanges=[],i.resolve(e)})):i.resolve(null),i.promise()},e.updateTemporaryChanges=function(t){this._temporarychanges.forEach(function(e){return e.feature.setProperties(t.getProperties())})},e.pushAdd=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=e===this.getId()?this._editor:f.default.getSession(e).getEditor(),n=(n&&i.removeNotEditablePropriertiesFromFeature(t),t.clone());return this.push({layerId:e,feature:n.add()}),n},e.pushDelete=function(e,t){return this.push({layerId:e,feature:t.delete()}),t},e.pushUpdate=function(t,n,e){if(n.isNew()){var i,r=this._temporarychanges.findIndex(function(e){return t===e.layerId&&e.feature.getId()===n.getId()});if(-1!==r)return(i=n.clone()).add(),void(this._temporarychanges[r].feature=i)}this.push({layerId:t,feature:n.update()},{layerId:t,feature:e.update()})},e.removeChangesFromHistory=function(){this._history.removeStates(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[])},e.moveRelationStatesOwnSession=function(){var e,t={};for(e in this.getCommitItems().relations){var n=this._history.getRelationStates(e);f.default.getSession(e)._history.insertStates(n),t[e]=n.map(function(e){return e.id})}return t},e.push=function(e,t){this._temporarychanges.push(t?[t,e]:e)},e.revert=function(){var e=this,t=$.Deferred();return this._editor.revert().then(function(){e._history.clear(),t.resolve()}),t.promise()},e._filterChanges=function(){var t=this.getId(),n={own:[],dependencies:{}};return this._temporarychanges.forEach(function(e){e=Array.isArray(e)?e[0]:e;e.layerId===t?n.own.push(e):(n.dependencies[e.layerId]||(n.dependencies[e.layerId]=[]),n.dependencies[e.layerId].unshift(e))}),n},e.rollback=function(e){var n,i;return e?this._editor.rollback(e):(n=$.Deferred(),i=this._filterChanges(),this._editor.rollback(i.own).then(function(){var e,t=i.dependencies;for(e in t)f.default.getSession(e).rollback(t[e]);n.resolve(t)}),this._temporarychanges=[],n.promise())},e.rollbackDependecies=function(){var e=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){var n=[];e._temporarychanges=e._temporarychanges.filter(function(e){if(e.layerId===t)return n.push(e),!1}),n.length&&f.default.getSession(t).rollback(n)})},e.undo=function(e){return e=e||this._history.undo(),this._editor.setChanges(e.own,!0),this._history.canCommit(),e.dependencies},e.redo=function(e){return e=e||this._history.redo(),this._editor.setChanges(e.own,!0),this._history.canCommit(),e.dependencies},e._serializeCommit=function(e){var t,n=this,i=this.getId(),o=void 0,a=void 0,r={add:[],update:[],delete:[],relations:{}};for(t in e){var s,l=!1,u=e[t],a=t!==i?(l=!0,s=(s=f.default.getSession(t))?s.getEditor().getLockIds():[],r.relations[t]={lockids:s,add:[],update:[],delete:[],relations:{}},r.relations[t]):r;u.forEach(function(e){o=e.getState();var t=new ol.format.GeoJSON;if("delete"===o)e.isNew()||a.delete.push(e.getId());else{var n,i=t.writeFeatureObject(e),r=e.getProperties();for(n in i.properties)i.properties[n]&&"object"===d(i.properties[n])&&i.properties[n].constructor===Object&&(i.properties[n]=i.properties[n].value),void 0===i.properties[n]&&r[n]&&(i.properties[n]=r[n]);a[e.isNew()?"add":e.getState()].push(i)}}),l&&0===a.add.length&&0===a.update.length&&0===a.delete.length&&delete r.relations[t]}var c=Object.keys(r.relations||{});return c.filter(function(t){return void 0===n._editor.getLayer().getRelations().getArray().find(function(e){return t===e.getChild()})}).map(function(e){return r.relations[f.default.getSession(e).getEditor().getLayer().getRelations().getArray().find(function(e){return-1!==c.indexOf(e.getFather())}).getFather()].relations[e]=r.relations[e],e}).forEach(function(e){return delete r.relations[e]}),r},e.getCommitItems=function(){return this._serializeCommit(this._history.commit())},e.set3DGeometryType=function(){var t,n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.layerId,i=void 0===i?this.getId():i,r=e.commitItems,o=r.relations,e=MapLayersStoresRegistry.getLayerById(i).getEditingLayer();e&&s.LayerTypes.VECTOR===e.getType()&&(t=e.getGeometryType(),l(t))&&["add","update"].forEach(function(e){return r[e].forEach(function(e){return e.geometry.type=t})}),Object.keys(o).forEach(function(e){return n.set3DGeometryType({layerId:e,commitItems:o[e]})})},e.commit=function(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.ids,t=void 0===t?null:t,n=e.items,e=e.relations,e=void 0===e||e,o=$.Deferred(),a=void 0;return t?(a=this._history.commit(t),this._history.clear(t)):(a=n||this._serializeCommit(this._history.commit()),e||(a.relations={}),this._editor.commit(a).then(function(e){if(e&&e.result){var t,n=e.response.new_relations,i=void 0===n?{}:n;for(t in i)f.default.getSession(t).getEditor().applyCommitResponse({response:i[t],result:!0});r._history.clear(),r.saveChangesOnServer(a),o.resolve(a,e)}else o.reject(e)}).fail(function(e){return o.reject(e)})),o.promise()},e._canStop=function(){return this.state.started||this.state.getfeatures},e._stop=function(){var e=this,t=$.Deferred();return this._canStop()?this._editor.stop().then(function(){e.clear(),t.resolve()}).fail(function(e){return t.reject(e)}):t.resolve(),t.promise()},e.clear=function(){this._allfeatures=!1,this.state.started=!1,this.state.getfeatures=!1,this.clearHistory()},e.getHistory=function(){return this._history},e.clearHistory=function(){this._history.clear()},n.default=u},{"./history":36,"./sessionsregistry":38}],38:[function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});(function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)})(o,[{key:"register",value:function(e){var t=e.getId();this._sessions[t]=e}},{key:"unregister",value:function(e){delete this._sessions[e]}},{key:"getSession",value:function(e){return this._sessions[e]}},{key:"setSession",value:function(e,t){this._sessions[e]=t}},{key:"getSessions",value:function(){return this._sessions}},{key:"clear",value:function(){this._sessions={}}}]);var r=o;function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._sessions={}}n.default=new r},{}],39:[function(e,t,n){var i=d(e("./editing/editor")),r=d(e("./editing/changesmanager")),o=d(e("./editing/sessionsregistry")),a=d(e("./editing/session")),s=d(e("./workflow/task")),l=d(e("./workflow/step")),u=d(e("./workflow/flow")),c=d(e("./workflow/workflow")),e=d(e("./workflow/stack"));function d(e){return e&&e.__esModule?e:{default:e}}window.g3wsdk.core.editing||window.g3wsdk.core.workflow||window.g3wsdk.constant.DEFAULT_EDITING_CAPABILITIES||g3wsdk.version,window.g3wsdk.core.editing={Session:a.default,SessionsRegistry:o.default,Editor:i.default,ChangesManager:r.default},window.g3wsdk.constant.DEFAULT_EDITING_CAPABILITIES=["add_feature","change_feature","change_attr_feature","delete_feature"],window.g3wsdk.core.workflow={Task:s.default,Step:l.default,Flow:u.default,Workflow:c.default,WorkflowsStack:e.default}},{"./editing/changesmanager":34,"./editing/editor":35,"./editing/session":37,"./editing/sessionsregistry":38,"./workflow/flow":40,"./workflow/stack":42,"./workflow/step":43,"./workflow/task":44,"./workflow/workflow":45}],40:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var e=e("./queque"),s=(e=e)&&e.__esModule?e:{default:e};var e=g3wsdk.core.G3WObject,i=g3wsdk.core.utils,l=i.base;function r(){var t,n=[],i=0,r=null,o=void 0,a=void 0;this.queques={end:new s.default,micro:new s.default},this.start=function(e){return o=$.Deferred(),t=(a=e).getInputs(),r=e.getContext(),(n=e.getSteps())&&n.length&&this.runStep(n[0],t,r),o.promise()},this.runStep=function(e,t){var n=this,i=(a.setMessages({help:e.state.help}),this.queques.micro.getLength());e.run(t,r,this.queques).then(function(e){i&&n.queques.micro.run(),n.onDone(e)}).fail(function(e){return n.onError(e)})},this.onDone=function(e){++i===n.length?(i=0,o.resolve(e)):this.runStep(n[i],e)},this.onError=function(e){i=0,this.clearQueques(),o.reject(e)},this.stop=function(){var e=$.Deferred();return n[i].isRunning()&&n[i].stop(),this.clearQueques(),0<i?(i=0,e.reject()):e.resolve(),e.promise()},l(this)}(0,i.inherit)(r,e),r.prototype.clearQueques=function(){this.queques.micro.clear(),this.queques.end.clear()},n.default=r},{"./queque":41}],41:[function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.tasks=[]}Object.defineProperty(n,"__esModule",{value:!0}),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(r,[{key:"addTask",value:function(e){this.tasks.push(e)}},{key:"run",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.tasks.length;)(e?this.tasks.pop():this.tasks.shift())()}},{key:"flush",value:function(){return this.tasks.splice(0)}},{key:"getLength",value:function(){return this.tasks.length}},{key:"clear",value:function(){this.run(),this.tasks=[]}}]),n.default=r},{}],42:[function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});(function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)})(o,[{key:"push",value:function(e){return-1===this._workflows.indexOf(e)?this._workflows.push(e)-1:this._workflows.indexOf(e)}},{key:"getParent",value:function(){var e=this._getCurrentIndex();return 0<e&&this._workflows[e-1]}},{key:"getParents",value:function(){var e=this._getCurrentIndex();return 0<e&&this._workflows.slice(0,e)}},{key:"pop",value:function(){return this._workflows.pop()}},{key:"getLength",value:function(){return this._workflows.length}},{key:"_getCurrentIndex",value:function(){var t=this.getCurrent();return this._workflows.findIndex(function(e){return e===t})}},{key:"getCurrent",value:function(){return this.getLast()}},{key:"getLast",value:function(){var e=this._workflows.length;return e?this._workflows[e-1]:null}},{key:"getFirst",value:function(){return this._workflows[0]}},{key:"removeAt",value:function(e){this._workflows.splice(e,1)}},{key:"getAt",value:function(e){return this._workflows[e]}},{key:"insertAt",value:function(e,t){this._workflows[e]=t}},{key:"clear",value:function(){for(;this._workflows.length;)this.pop().stop()}}]);var r=o;function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._workflows=[]}n.default=new r},{}],43:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=g3wsdk.core.G3WObject,r=g3wsdk.core.utils,a=r.base;function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this),e.inputs),n=e.context,n=void 0===n?null:n,i=e.task,i=void 0===i?null:i,r=e.outputs,r=void 0===r?null:r,o=e.escKeyPressEventHandler;this._inputs=void 0===t?null:t,this._context=n,this._task=i,this._outputs=r,this.state={id:e.id||null,name:e.name||null,help:e.help||null,running:!1,error:null,message:e.message||null},o&&this.registerEscKeyEvent(o)}(0,r.inherit)(o,i);r=o.prototype;r.escKeyUpHandler=function(e){"Escape"===e.key&&e.data.callback({task:e.data.task})},r.unbindEscKeyUp=function(){$(document).unbind("keyup",this.escKeyUpHandler)},r.bindEscKeyUp=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};$(document).on("keyup",{callback:e,task:this.getTask()},this.escKeyUpHandler)},r.registerEscKeyEvent=function(e){var t=this;this.on("run",function(){return t.bindEscKeyUp(e)}),this.on("stop",function(){return t.unbindEscKeyUp()})},r.run=function(e,t,n){var i=this,r=$.Deferred();if(this.emit("run",{inputs:e,context:t}),this._task)try{this.state.running=!0,this._task.setInputs(e),this._task.setContext(t),this._task.run(e,t,n).then(function(e){i.stop(),r.resolve(e)}).fail(function(e){i.stop(),r.reject(e)})}catch(e){this.state.error=e,this.state.error="Problem ..",this.stop(),r.reject(e)}return r.promise()},r.stop=function(){this._task.stop(this._inputs,this._context),this.state.running=!1,this.emit("stop"),this._task.setInputs(null),this._task.setContext(null)},r.revert=function(){this._task&&this._task.revert&&this._task.revert()},r.panic=function(){this._task&&this._task.panic&&this._task.panic()},r.getId=function(){return this.state.id},r.getName=function(){return this.state.name},r.getHelp=function(){return this.state.help},r.getError=function(){return this.state.error},r.getMessage=function(){return this.state.message},r.isRunning=function(){return this.state.running},r.setInputs=function(e){this._inputs=e},r.getInputs=function(){return this._inputs},r.setTask=function(e){this._task=e},r.getTask=function(){return this._task},r.setOutputs=function(e){this._outputs=e},r.getOutputs=function(){return this._outputs},o.MESSAGES={help:null},n.default=o},{}],44:[function(n,e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=g3wsdk.core.G3WObject,a=g3wsdk.core.utils,s=a.base,a=a.inherit,l=g3wsdk.gui.GUI;function u(){s(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),this.state={usermessagesteps:{}}}a(u,o);a=u.prototype;a.setInputs=function(e){this.inputs=e},a.getInputs=function(){return this.inputs},a.setContext=function(e){return this.context=e},a.getContext=function(){return this.context},a.revert=function(){},a.panic=function(){},a.stop=function(){},a.run=function(){},a.setRoot=function(e){this.state.root=e},a.getUserMessageSteps=function(){return this.state.usermessagesteps},a.setUserMessageSteps=function(){this.state.usermessagesteps=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}},a.setUserMessageStepDone=function(e){e&&(this.state.usermessagesteps[e].done=!0)},t.default=u,t.EditingTask=function(){var e=i,t=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=i;if(t instanceof n)return(t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)))._editingService,t._mapService=l.getService("map"),t.addInteraction=function(e){this._mapService.addInteraction(e)},t.removeInteraction=function(e){var t=this;setTimeout(function(){return t._mapService.removeInteraction(e)})},t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r(i,[{key:"getEditingType",value:function(){return null}},{key:"registerPointerMoveCursor",value:function(){this._mapService.getMap().on("pointermove",this._pointerMoveCursor)}},{key:"unregisterPointerMoveCursor",value:function(){this._mapService.getMap().un("pointermove",this._pointerMoveCursor)}},{key:"_pointerMoveCursor",value:function(e){this.getTargetElement().style.cursor=this.forEachFeatureAtPixel(e.pixel,function(){return!0})?"pointer":""}},{key:"setSteps",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._steps=e,this.setUserMessageSteps(e)}},{key:"getSteps",value:function(){return this._steps}},{key:"getMapService",value:function(){return this._mapService}},{key:"getMap",value:function(){return this._mapService.getMap()}},{key:"disableSidebar",value:function(){this._isContentChild||l.disableSideBar(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])}},{key:"getEditingService",value:function(){return this._editingService=this._editingService||n("../../services/editingservice"),this._editingService}},{key:"fireEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getEditingService().fireEvent(e,t)}},{key:"run",value:function(e,t){}},{key:"stop",value:function(){}},{key:"saveSingle",value:function(e,t){var n=this;t.session.save().then(function(){return n.getEditingService().saveChange()})}},{key:"cancelSingle",value:function(e,t){t.session.rollback()}},{key:"setContextGetDefaultValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.getContext().get_default_value=e}}]),i}()},{"../../services/editingservice":49}],45:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.EditingWorkflow=void 0;var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u=s(e("./flow")),o=s(e("./stack")),c=s(e("./step")),a=s(e("../../components/UserMessageSteps"));function s(e){return e&&e.__esModule?e:{default:e}}var d=g3wsdk.gui.GUI,e=g3wsdk.core.G3WObject,f=g3wsdk.core.utils,p=f.base,h=f.inherit,g=f.resolve,v=g3wsdk.core.geoutils.Geometry.isPointGeometryType,y=g3wsdk.core.layer.Layer;function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,t=void 0===t?null:t,n=e.inputs,n=void 0===n?null:n,i=e.context,i=void 0===i?null:i,r=e.flow,r=void 0===r?new u.default:r,o=e.steps,o=void 0===o?[]:o,a=e.runOnce,a=void 0!==a&&a,s=e.backbuttonlabel,s=void 0===s?null:s;p(this),this._type=t,this._options=e,this._promise=null,this._inputs=n,this._context=i,this._flow=r,this._steps=o,this._child=null,this._stackIndex=null,this.runOnce=a,this._messages=c.default.MESSAGES,this._userMessageSteps=this._steps.reduce(function(e,t){return l({},e,t.getTask().getUserMessageSteps()||{})},{}),this.backbuttonlabel=s}h(m,e);f=m.prototype;f.isType=function(e){var t=this;return Array.isArray(e)?Boolean(e.find(function(e){return e===t._type})):e===this._type},f.getContextService=function(){return this.getContext().service},f.setContextService=function(e){this.getContext().service=e},f.getStackIndex=function(){return this._stackIndex},f.addChild=function(e){this._child?this._child.addChild(e):this._child=e},f.removeChild=function(){this._child&&o.default.removeAt(this._child.getStackIndex()),this._child=null},f.setInput=function(e){var t=e.key,e=e.value;this._inputs[t]=e},f._setInputs=function(e){this._inputs=e},f.getInputs=function(){return this._inputs},f.setContext=function(e){this._context=e},f.getContext=function(){return this._context},f.getFlow=function(){return this._flow},f.setFlow=function(e){this._flow=e},f.addStep=function(e){this._steps.push(e)},f.setSteps=function(e){this._steps=e},f.getSteps=function(){return this._steps},f.getStep=function(e){return this._steps[e]},f.setMessages=function(e){Object.assign(this._messages,e)},f.getMessages=function(){return this._messages},f.clearMessages=function(){this._messages.help=null,this._isThereUserMessaggeSteps()&&this.clearUserMessagesSteps()},f.getLastStep=function(){return this._steps.length?this._steps[this._steps.length-1]:null},f.getRunningStep=function(){return this._steps.find(function(e){return e.isRunning()})},f._stopChild=function(){return this._child?this._child.stop():g()},f._isThereUserMessaggeSteps=function(){return Object.keys(this._userMessageSteps).length},f.reject=function(){this._promise&&this._promise.reject()},f.resolve=function(){this._promise&&this._promise.resolve()},f.start=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=$.Deferred();this._promise=n,this._inputs=e.inputs,this._context=e.context||{};!this._context.isChild&&1&&o.default.getLength()&&o.default.getCurrent()!==this&&o.default.getCurrent().addChild(this),this._stackIndex=o.default.push(this),this._flow=e.flow||this._flow,this._steps=e.steps||this._steps;var i=this._isThereUserMessaggeSteps();return i&&d.showUserMessage({title:"plugins.editing.workflow.title.steps",type:"tool",position:"left",size:"small",closable:!1,hooks:{body:(0,a.default)({steps:this._userMessageSteps})}}),this._flow.start(this).then(function(e){i?setTimeout(function(){t.clearUserMessagesSteps(),n.resolve(e)},500):n.resolve(e)}).fail(function(e){i&&t.clearUserMessagesSteps(),n.reject(e)}).always(function(){t.runOnce&&t.stop()}),this.emit("start"),n.promise()},f.stop=function(){var e=this,t=$.Deferred();return this._promise=null,this._stopChild().always(function(){e.removeChild(),o.default.removeAt(e.getStackIndex()),e._flow.stop().then(t.resolve).fail(t.reject).always(function(){return e.clearMessages()})}),this.emit("stop"),t.promise()},f.clearUserMessagesSteps=function(){this._resetUserMessaggeStepsDone(),d.closeUserMessage()},f._resetUserMessaggeStepsDone=function(){var t=this;Object.keys(this._userMessageSteps).forEach(function(e){e=t._userMessageSteps[e];e.done=!1,e.buttonnext&&(e.buttonnext.disabled=!0)})},f.setBackButtonLabel=function(){this.backbuttonlabel=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null},f.getBackButtonLabel=function(){return this.backbuttonlabel},n.default=m,n.EditingWorkflow=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=i;if(t instanceof n)return(t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e))).helpMessage=e.helpMessage?{help:e.helpMessage}:null,t._toolsoftool=[],!0===e.registerEscKeyEvent&&t.registerEscKeyEvent(),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r(i,[{key:"addToolsOfTools",value:function(e){var n=this,t=e.step,e=e.tools,i=void 0===e?[]:e,r={snap:{type:"snap",options:{checkedAll:!1,checked:!1,active:!0,run:function(e){e=e.layer;this.active=!0,this.layerId=e.getId(),this.source=e.getEditingLayer().getSource()},stop:function(){this.active=!1}}},measure:{type:"measure",options:{checked:!1,run:function(){var e=this;setTimeout(function(){e.onChange(e.checked)})},stop:function(){t.getTask().removeMeasureInteraction()},onChange:function(e){this.checked=e,t.getTask()[e?"addMeasureInteraction":"removeMeasureInteraction"]()},onBeforeDestroy:function(){this.onChange(!1)}}}};t.on("run",function(e){var t=e.inputs;e.context;0===n._toolsoftool.length&&i.forEach(function(e){"measure"===e&&(y.LayerTypes.VECTOR!==t.layer.getType()||v(t.layer.getGeometryType()))||n._toolsoftool.push(r[e])}),n._toolsoftool.forEach(function(e){return e.options.run({layer:t.layer})}),n.emit("settoolsoftool",n._toolsoftool)}),t.on("stop",function(){n._toolsoftool.forEach(function(e){return e.options.stop()})})}},{key:"setHelpMessage",value:function(e){this.helpMessage={help:e}}},{key:"getHelpMessage",value:function(){return this.helpMessage}},{key:"getFeatures",value:function(){return this.getInputs().features}},{key:"startFromLastStep",value:function(e){return this.setSteps([this.getSteps().pop()]),this.start(e)}},{key:"getCurrentFeature",value:function(){var e=this.getFeatures();return e[e.length-1]}},{key:"getLayer",value:function(){return this.getSession().getEditor().getLayer()}},{key:"getSession",value:function(){return this.getContext().session}},{key:"escKeyUpHandler",value:function(e){27===e.keyCode&&(e.data.workflow.reject(),e.data.callback())}},{key:"unbindEscKeyUp",value:function(){$(document).unbind("keyup",this.escKeyUpHandler)}},{key:"bindEscKeyUp",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};$(document).on("keyup",{workflow:this,callback:e},this.escKeyUpHandler)}},{key:"registerEscKeyEvent",value:function(e){var t=this;this.on("start",function(){return t.bindEscKeyUp(e)}),this.on("stop",function(){return t.unbindEscKeyUp()})}}]),i}()},{"../../components/UserMessageSteps":21,"./flow":40,"./stack":42,"./step":43}],46:[function(e,t,n){e("./g3wsdk");var i=e("./config"),r=(i=i)&&i.__esModule?i:{default:i};function o(){var e=this,t=(a(this,{name:"editing",i18n:r.default.i18n,service:u,fontClasses:[{name:"measure",className:"fas fa-ruler-combined"},{name:"magnete",className:"fas fa-magnet"},{name:"clipboard",className:"fas fa-clipboard"}]}),{position:0,title:"EDITING"}),n={some_layers:!1};this.panel=null,this.service.loadPlugin()&&(this.setHookLoading({loading:!0}),this.service.once("ready",function(){e.registerPlugin(e.config.gid)&&(l.isready?e.setupGui():l.on("ready",e.setupGui.bind(e))),e.setHookLoading({loading:!1}),e.setApi(e.service.getApi()),e.setReady(!0)}),this.service.init(this.config)),this.setupGui=function(){if(!1===this.config.visible)return!1;this.config.name=this.config.name||"plugins.editing.editing_data",this.addToolGroup(t),this.addTools({action:this.showEditingPanel,offline:!1,icon:"pencil"},t)},this.showEditingPanel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return 0<this.service.getLayers().length?(this.panel=new c(e),l.showPanel(this.panel),!n.some_layers&&this.service.getLayersInError()&&(l.showUserMessage({type:"warning",message:"plugins.editing.errors.some_layers",closable:!0}),n.some_layers=!0)):l.showUserMessage({type:"alert",message:"plugins.editing.errors.no_layers"}),this.panel},this.hideEditingPanel=function(){null!==this.panel&&(l.closePanel(),this.panel=null)},this.unload=function(){this.hideEditingPanel(),this.config.visible&&this.removeTools(),this.service.clear()}}var i=g3wsdk.core.utils,a=i.base,i=i.inherit,s=g3wsdk.core.plugin.Plugin,l=g3wsdk.gui.GUI,u=e("./services/editingservice"),c=e("./panel");i(o,s),new o},{"./config":30,"./g3wsdk":39,"./panel":48,"./services/editingservice":49}],47:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,i){this.type=e,this.features=i,this.coordinate=t,this.layer=n}var r="picked",n=n.PickFeaturesInteraction=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ol.interaction.Pointer.call(this,{handleDownEvent:e.handleDownEvent_,handleUpEvent:e.handleUpEvent_,handleMoveEvent:e.handleMoveEvent_}),this.layer=t.layer,this.pickedFeatures=[]};ol.inherits(n,ol.interaction.Pointer),n.handleDownEvent_=function(e){return this.pickedFeatures=this.featuresAtPixel(e),this.pickedFeatures},n.handleUpEvent_=function(e){return this.pickedFeatures&&this.pickedFeatures.length&&this.dispatchEvent(new i(r,e.coordinate,this.layer,this.pickedFeatures)),!0},n.prototype.featuresAtPixel=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.pixel;return e.map.getFeaturesAtPixel(n,{layerFilter:function(e){return e===t.layer},hitTolerance:isMobile&&isMobile.any?10:0})},n.handleMoveEvent_=function(e){var t=e.map.getTargetElement(),e=this.featuresAtPixel(e);t.style.cursor=e?"pointer":""},n.prototype.shouldStopEvent=function(){return!1},n.prototype.setMap=function(e){e||(this.getMap().getTargetElement().style.cursor=""),ol.interaction.Pointer.prototype.setMap.call(this,e)}},{}],48:[function(e,t,n){var i=e("./components/Editing.vue"),r=(i=i)&&i.__esModule?i:{default:i};var i=g3wsdk.core.utils,o=i.base,a=i.inherit,s=i.merge,l=g3wsdk.gui.GUI,i=g3wsdk.gui.vue.Component,u=e("./services/editingservice");function c(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(t.id="editing-panel",t.title=t.title||"plugins.editing.editing_data",t.name="Editing Layer",t.toolboxes=t.toolboxes||null,t.showcommitbar=void 0===t.showcommitbar||t.showcommitbar,o(this,t),this.vueComponent=r.default,this.name=void 0!==t.name?t.name:"Editing data",s(this,t),this._resourcesUrl=t.resourcesUrl||l.getResourcesUrl(),this._service=t.service||u,Vue.extend(this.vueComponent));this.internalComponent=new n({service:this._service,data:function(){return{state:e._service.state,resourcesurl:e._resourcesUrl,showcommitbar:t.showcommitbar,editingButtonsEnabled:!0}}}),this.mount=function(e){return o(this,"mount",e,!0)},this.unmount=function(){var e=this,t=$.Deferred();return this._service.stop().finally(function(){e.unmount=function(){o(this,"unmount").then(function(){return t.resolve()})},e.unmount()}),t.promise()}}a(c,i),t.exports=c},{"./components/Editing.vue":11,"./services/editingservice":49}],49:[function(e,t,D){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=e("../g3wsdk/workflow/workflow"),d=e("../workflows");function n(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.entries({EditingWorkflow:c.EditingWorkflow,OpenFormStep:d.OpenFormStep,ConfirmStep:d.ConfirmStep}).forEach(function(e){e=p(e,2);e[0],e[1]});var l=g3wsdk.constant.G3W_FID,i=g3wsdk.core,m=i.ApplicationState,f=i.ApplicationService,o=g3wsdk.core.data.DataRouterService,i=g3wsdk.core.utils,a=i.base,s=i.inherit,u=i.XHR,h=i.noop,g=g3wsdk.core.geometry.Geometry,i=g3wsdk.core.geoutils,v=i.getFeaturesFromResponseVectorApi,b=i.isSameBaseGeometryType,w=g3wsdk.core.workflow.WorkflowsStack,i=g3wsdk.core.plugin.PluginService,k=g3wsdk.core.editing.SessionsRegistry,S=g3wsdk.core.catalog.CatalogLayersStoresRegistry,F=g3wsdk.core.map.MapLayersStoreRegistry,x=g3wsdk.core.layer,C=x.Layer,E=x.LayersStore,I=g3wsdk.core.layer.features.Feature,T=g3wsdk.gui.GUI,A=g3wsdk.core.errors.parsers.Server,L=g3wsdk.core.i18n.tPlugin,x=g3wsdk.ol.utils,V=x.getScaleFromResolution,B=x.getResolutionFromScale,N=e("../toolboxes/toolbox"),O="mapcontrol:toggled",P={CHANGES:"EDITING_CHANGES"};function M(){var t=this;a(this),this._sessions={},this.constraints={},this._vectorUrl,this._projectType,this._unByKeys=[],this.setterKeys=[],this._events={layer:{start_editing:{before:{},after:{}}}},this.layersUniqueFieldsValues={},this.saveConfig={mode:"default",modal:!1,messages:void 0,cb:{done:void 0,error:void 0}},this.applicationEditingConstraints={toolboxes:{},showToolboxesExcluded:!0},this.state={open:!1,toolboxes:[],toolboxselected:null,toolboxidactivetool:null,showselectlayers:!0,message:null,relations:[]},this.loadLayersFeaturesToResultWhenCloseEditing={},this._layers_in_error=!1,this._mapService=T.getService("map"),this.mapControlToggleEventHandler=function(e){e.target.isToggled()&&e.target.isClickMap()&&t.state.toolboxselected&&t.state.toolboxselected.getActiveTool()&&t.state.toolboxselected.stopActiveTool()},this._mapService.on(O,this.mapControlToggleEventHandler),this._formComponents={},this._subscribers={},this.init=function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(this._vectorUrl=e.vectorurl,this._projectType=e.project_type,this._layersstore=new E({id:"editing",queryable:!1}),F.addLayersStore(this._layersstore),this.config=e,this._editableLayers={},this._toolboxes=[],this.state.toolboxes=[],this._getEditableLayersFromCatalog()),t=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t.push(l.getLayerForEditing({vectorurl:this._vectorUrl,project_type:this._projectType}))}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}Promise.allSettled(t).then(function(e){e.forEach(function(e){var t;"fulfilled"===e.status?(t=e.value.getId(),n._editableLayers[t]=e.value,n._attachLayerWidgetsEvent(e.value),n._sessions[t]=null):n._layers_in_error=!0}),n._ready()})},this._ready=function(){this.setRelations1_1FieldsEditable(),this.setLayersColor(),this._layersstore.addLayers(this.getLayers());var e=!0,t=!1,n=void 0;try{for(var i,r=this.getLayers()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.addToolBox(N.create(o))}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}this._createToolBoxDependencies(),this.setApi({api:{getSession:this.getSession,getFeature:this.getFeature,subscribe:this.subscribe,unsubscribe:this.unsubscribe,getToolBoxById:this.getToolBoxById,setSaveConfig:this.setSaveConfig,addNewFeature:this.addNewFeature,addFormComponents:this.addFormComponents,commitChanges:this.commit,setApplicationEditingConstraints:this.setApplicationEditingConstraints,getMapService:this.getMapService,updateLayerFeature:h,deleteLayerFeature:h,addLayerFeature:this.addLayerFeature,showPanel:this.showPanel,hidePanel:this.hidePanel,resetDefault:this.resetAPIDefault,startEditing:this.startEditing,stopEditing:this.stopEditing}}),this.registerResultEditingAction(),this.emit("ready")}}s(M,i);var j,R,x=M.prototype;x.getAppState=function(){return m},x.getFormComponentsById=function(e){return this._formComponents[e]||[]},x.getFormComponents=function(){return this._formComponents},x.addFormComponents=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,e=e.components,n=void 0===e?[]:e;this._formComponents[t]||(this._formComponents[t]=[]);for(var i=0;i<n.length;i++)this._formComponents[t].push(n[i])},x.getSession=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).layerId;return this.getToolBoxById(e).getSession()},x.getFeature=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).layerId;return this.getToolBoxById(e).getActiveTool().getFeature()},x.subscribe=function(e,t){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e].find(function(e){return e===t})||this._subscribers[e].push(t),t},x.unsubscribe=function(e,t){this._subscribers[e]=this._subscribers[e].filter(function(e){return e!==t})},x.setRelations1_1FieldsEditable=function(){var i=this;this.getLayers().forEach(function(e){var n=e.getId();i.getRelation1_1ByLayerId(n).forEach(function(e){var t;n===e.getFather()&&(t=void 0!==i.getLayerById(e.getChild()),i.getRelation1_1EditingLayerFieldsReferredToChildRelation(e).forEach(function(e){e.editable=e.editable&&t}))})})},x.getRelation1_1EditingLayerFieldsReferredToChildRelation=function(t){return this.getLayerById(t.getFather()).getEditingFields().filter(function(e){return e.vectorjoin_id&&e.vectorjoin_id===t.getId()})},x.getRelation1_1ByLayerId=function(e){return S.getLayerById(e).getRelations().getArray().filter(function(e){return"ONE"===e.getType()})},x.setShowSelectLayers=function(){this.state.showselectlayers=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},x.registerResultEditingAction=function(){var n=this,e=T.getService("queryresults");this.setterKeys.push({setter:"editFeature",key:e.onafter("editFeature",function(e){var t=e.layer,e=e.feature;n.editResultLayerFeature({layer:t,feature:e})})})},x.unregisterResultEditingAction=function(){var n=T.getService("queryresults");this.setterKeys.forEach(function(e){var t=e.setter,e=e.key;return n.un(t,e)})},x.editResultLayerFeature=function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,e=e.feature,r=e.attributes[l],o=(this.getToolBoxes().forEach(function(e){return e.setShow(e.getId()===t.id)}),this.getPlugin().showEditingPanel(),this.getToolBoxById(t.id)),a=o.getEditingConstraints().scale,s=e.geometry&&void 0!==a;o.start({filter:{fids:r}}).then(function(e){e.features;var t,e=o.getLayer(),n=e.getEditingLayer().getSource(),n=(e.getType()===C.LayerTypes.VECTOR?n.getFeatures():n.readFeatures()).find(function(e){return e.getId()==r});n&&(n.getGeometry()&&(i._mapService.zoomToGeometry(n.getGeometry()),s)?i._mapService.getMap().once("moveend",function(){var e=i._mapService.getMapUnits(),t=i._mapService.getMap(),n=parseInt(V(t.getView().getResolution(),e));a<n&&t.getView().setResolution(B(a,e)),o.setSelected(!0)}):o.setSelected(!0),t=o.getSession(),i.setSelectedToolbox(o),new c.EditingWorkflow({type:"editnopickmapfeatureattributes",runOnce:!0,helpMessage:"editing.tools.update_feature",steps:[new d.OpenFormStep]}).start({inputs:{layer:e,features:[n]},context:{session:t}}).then(function(){return t.save().then(function(){return i.saveChange()})}).fail(function(){return t.rollback()}))}).fail(function(e){})},x.disableMapControlsConflict=function(){this._mapService.disableClickMapControls(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])},x.setSelectedToolbox=function(e){this.state.toolboxselected=e},x.getToolboxSelected=function(){return this.state.toolboxselected},x.addNewFeature=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=new I,t=(t.geometry&&n.setGeometry(new ol.geom[t.geometry.type](t.geometry.coordinates)),n.setProperties(t.properties),n.setTemporaryId(),this.getToolBoxById(e)),i=t.getLayer().getEditingLayer(),t=t.getSession();return i.getSource().addFeature(n),t.pushAdd(e,n,!1),n},x.getLayersInError=function(){return this._layers_in_error},x.getMapService=function(){return this._mapService},x._initOffLineItems=function(){for(var e in P)this.getOfflineItem(P[e])||f.setOfflineItem(P[e])},x._handleOfflineChangesBeforeSave=function(e){function t(e){var n=e.layerId,i=e.current,e=e.previous;i[n].add=[].concat(y(e[n].add),y(i[n].add)),i[n].delete=[].concat(y(e[n].delete),y(i[n].delete)),e[n].update.forEach(function(e){var t=e.id;i[n].update.find(function(e){return e.id===t})||i[n].update.unshift(e)}),(e[n].lockids||[]).forEach(function(e){var t=e.featureid;i[n].lockids.find(function(e){return e.featureid===t})||i[n].update.unshift(e)})}var n,i=f.getOfflineItem(P.CHANGES);for(n in i){var r,o=e[n]?e:e[Object.keys(e)[0]].relations[n]?e[Object.keys(e)[0]].relations:null;o?t({layerId:n,current:o,previous:i}):(o=Object.keys(e)[0],(r=Object.keys(i[n].relations)).length?-1!==r.indexOf(o)&&(t({layerId:o,current:e,previous:i[n].relations}),i[n].relations[o]=e[o],e=i):e[n]=i[n])}return e},x.saveOfflineItem=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.id,e=e.data;return t===P.CHANGES&&(e=this._handleOfflineChangesBeforeSave(e)),f.setOfflineItem(t,e)},x.setOfflineItem=function(e,t){f.setOfflineItem(e,t)},x.getOfflineItem=function(e){return f.getOfflineItem(e)},x.checkOfflineChanges=function(){var s=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.modal,l=void 0===t||t,t=e.unlock,u=void 0!==t&&t;return new Promise(function(n,i){var r,o,a=f.getOfflineItem(P.CHANGES);a&&(r=[],o=[],setTimeout(function(){for(var e in a){o.push(e);var t=s.getToolBoxById(e),e=a[e];r.push(s.commit({toolbox:t,commitItems:e,modal:l}))}$.when.apply(s,r).then(function(){return n()}).fail(function(e){return i(e)}).always(function(){u&&o.forEach(function(e){s.getLayerById(e).unlock()}),s.setOfflineItem(P.CHANGES)})},1e3))})},x.registerOnLineOffLineEvent=function(){var e=this,t=(m.online&&this.checkOfflineChanges({unlock:!0}),f.onafter("offline",function(){})),n=f.onafter("online",function(){e.checkOfflineChanges({modal:!1}).then(function(){}).catch(function(e){return T.notify.error(e)})});this._unByKeys.push({owner:f,setter:"offline",key:t}),this._unByKeys.push({owner:f,setter:"online",key:n})},x.unregisterOnLineOffLineEvent=function(){this.unregisterSettersEvents(["online","offline"])},x.unregisterSettersEvents=function(){this._unByKeys.forEach(function(e){var t=e.owner,n=e.setter,e=e.key;t.un(n,e)})},x.fireEvent=function(n){var i=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e){i._subscribers[n]&&i._subscribers[n].forEach(function(e){var t=e(r);t&&t.once&&i.unsubscribe(n,e)}),e()})},x.activeQueryInfo=function(){this._mapService.activeMapControl("query")},x.setLayersColor=function(){var e=["#C43C39","#d95f02","#91522D","#7F9801","#0B2637","#8D5A99","#85B66F","#8D2307","#2B83BA","#7D8B8F","#E8718D","#1E434C","#9B4F07","#1b9e77","#FF9E17","#7570b3","#204B24","#9795A3","#C94F44","#7B9F35","#373276","#882D61","#AA9039","#F38F3A","#712333","#3B3A73","#9E5165","#A51E22","#261326","#e4572e","#29335c","#f3a712","#669bbc","#eb6841","#4f372d","#cc2a36","#00a0b0","#00b159","#f37735","#ffc425"],t=!0,n=!1,i=void 0;try{for(var r,o=this.getLayers()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.getColor()||a.setColor(e.splice(0,1)[0])}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}},x._layerChildrenRelationInEditing=function(e){var t=this;return e.getChildren().filter(function(e){return t.getLayerById(e)})},x.undo=function(){var e=this.state.toolboxselected.getSession(),t=e.getId(),n=e.getLastHistoryState().items,t=(this.undoRedoLayerUniqueFieldValues({layerId:t,sessionItems:n,action:"undo"}),e.undo());this.undoRedoRelationUniqueFieldValues({relationSessionItems:t,action:"undo"}),this.undoRelations(t)},x.undoRelations=function(e){var n=this;Object.entries(e).forEach(function(e){var e=p(e,2),t=e[0],e=e[1];n.getToolBoxById(t).getSession().undo(e)})},x.rollbackRelations=function(e){var n=this;Object.entries(e).forEach(function(e){var e=p(e,2),t=e[0],e=e[1];n.getToolBoxById(t).getSession().rollback(e)})},x.redo=function(){var e=this.state.toolboxselected.getSession(),t=e.getId(),n=e.getLastHistoryState().items,t=(this.undoRedoLayerUniqueFieldValues({layerId:t,sessionItems:n,action:"redo"}),e.redo());this.undoRedoRelationUniqueFieldValues({relationSessionItems:t,action:"redo"}),this.redoRelations(t)},x.redoRelations=function(e){var n=this;Object.entries(e).forEach(function(e){var e=p(e,2),t=e[0],e=e[1];n.getToolBoxById(t).getSession().redo(e)})},x.getEditingLayer=function(e){return this._editableLayers[e].getEditingLayer()},x.addToolBox=function(e){this._toolboxes.push(e),this._sessions[e.getId()]=e.getSession(),this.state.toolboxes.push(e.state)},x.setOpenEditingPanel=function(t){this.state.open=t,this._getEditableLayersFromCatalog().forEach(function(e){return e.setInEditing(t)})},x.addEvent=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.id,e=e.fnc;this._events[t]||(this._events[t]={}),this._events[t][n]||(this._events[t][n]=[]),this._events[t][n].push(e)},x.addEvents=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.types,n=void 0===n?[]:n,i=e.id,r=e.fnc;n.forEach(function(e){return t.addEvent({type:e,id:i,fnc:r})})},x.runEventHandler=n(function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,e=e.id;yield this._events[t]&&this._events[t][e]&&Promise.allSettled(this._events[t][e].map(function(e){return e()}))}),x.setSaveConfig=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,n=e.cb,n=void 0===n?{}:n,i=e.modal,i=void 0!==i&&i,e=e.messages;this.saveConfig.mode=void 0===t?"default":t,this.saveConfig.modal=i,this.saveConfig.messages=e,this.saveConfig.cb=r({},this.saveConfig.cb,n)},x.getSaveConfig=function(){return this.saveConfig},x.resetDefault=function(){this.saveConfig={mode:"default",modal:!1,messages:null,cb:{done:null,error:null}},this.disableMapControlsConflict(!1)},x.resetAPIDefault=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.plugin,t=void 0===t||t,e=e.toolboxes;void 0!==e&&!e||this.getToolBoxes().forEach(function(e){e.resetDefault()}),t&&this.resetDefault()},x._attachLayerWidgetsEvent=function(d){for(var i=this,f=d.getEditingFields(),e=0;e<f.length;e++)!function(e){var r,o,t,n,a,s,l,u,c=f[e];!c.input||"select_autocomplete"!==c.input.type||c.input.options.filter_expression||(e=c.input.options,r=e.key,e.values,o=e.value,t=e.usecompleter,n=e.layer_id,a=e.loading,e.relation_id,s=e.relation_reference,e=e.filter_fields,l=void 0===e?[]:e,u=i,t)||i.addEvents({types:["start-editing","show-relation-editing"],id:d.getId(),fnc:function(){return new Promise(function(i,t){var e;a.state="loading",c.input.options.values=[],s&&(-1<[void 0,null].indexOf(l)||0===l.length)?d.getFilterData({fformatter:c.name}).then(function(e){e&&e.data&&(e.data.forEach(function(e){var e=p(e,2),t=e[0],e=e[1];c.input.options.values.push({key:e,value:t})}),a.state="ready",u.fireEvent("autocomplete",{field:c,data:[e.data]}),i(c.input.options.values))}).catch(function(e){a.state="error",t(e)}):n?(e=S.getLayerById(n))&&e.getDataTable({ordering:r}).then(function(e){if(e&&e.features){for(var t=e.features,n=0;n<t.length;n++)c.input.options.values.push({key:t[n].properties[r],value:t[n].properties[o]});a.state="ready",u.fireEvent("autocomplete",{field:c,features:t}),i(c.input.options.values)}}).fail(function(e){a.state="error",t(e)}):(e=[],a.state="ready",u.fireEvent("autocomplete",{field:c,features:e}),i(e))})}})}(e)},x._createToolBoxDependencies=function(){var o=this;this._toolboxes.forEach(function(e){var t=e.getLayer();if(e.setFather(t.isFather()),e.state.editing.dependencies=o._getToolBoxEditingDependencies(t),t.isFather()&&e.hasDependencies()){var n,i=t.getRelations().getRelations();for(n in i){var r=i[n];e.addRelation(r)}}})},x.isFieldRequired=function(e,t){return this.getLayerById(e).isFieldRequired(t)},x._getToolBoxEditingDependencies=function(e){var t=this;return[].concat(y(e.getChildren()),y(e.getFathers())).filter(function(e){return void 0!==t.getLayerById(e)})},x._hasEditingDependencies=function(e){return 0<this._getToolBoxEditingDependencies(e).length},x.handleToolboxDependencies=function(e){var t=this;e.isFather()&&this.getLayersDependencyFeatures(e.getId()),e.getDependencies().forEach(function(e){t.getToolBoxById(e).setEditing(!1)})},x._getEditableLayersFromCatalog=function(){return S.getLayers({EDITABLE:!0})},x.getLayers=function(){return Object.values(this._editableLayers)},x.getCurrentWorkflow=function(){return w.getCurrent()},x.getCurrentWorkflowData=function(){var e=w.getCurrent();return{session:e.getSession(),inputs:e.getInputs(),context:e.getContext(),feature:e.getCurrentFeature(),layer:e.getLayer()}},x.getRelationsAttributesByFeature=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation,e=e.feature,i=this.getToolBoxById(t).getLayer();return this.getRelationsByFeature({layerId:t,relation:n,feature:e}).map(function(e){return{fields:i.getFieldsWithValues(e,{relation:!0}),id:e.getId()}})},x._getRelationLayerId=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,e=e.relation,n=e.getChild?e.getChild():e.child,e=e.getFatherField?e.getFatherField():e.fatherField;return n===t?e:n},x.getRelationsByFeature=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation,i=e.feature,e=this._getRelationFieldsFromRelation({layerId:t,relation:n}),r=e.ownField,o=e.relationField.map(function(e){return i.get(e)});return this._getFeaturesByLayerId(t).filter(function(n){return r.every(function(e,t){return n.get(e)==o[t]})})},x.registerLeavePage=function(e){f.registerLeavePage({bool:e})},x.loadPlugin=function(){return this._load=!!this._getEditableLayersFromCatalog().length},x.getLayerById=function(e){return this._editableLayers[e]},x.beforeEditingStart=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).layer;this._checkLayerWidgets(e)},x.afterEditingStart=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).layer},x.getToolBoxById=function(t){return this._toolboxes.find(function(e){return e.getId()===t})},x.getSessionById=function(e){return this._sessions[e]},x.setApplicationEditingConstraints=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{showToolboxesExcluded:!0,toolboxes:{}},n=(this.applicationEditingConstraints=r({},this.applicationEditingConstraints,e),e.toolboxes),e=e.showToolboxesExcluded,i=Object.keys(n);!1===e&&this.state.toolboxes.forEach(function(e){return e.show=-1!==i.indexOf(e.id)}),i.forEach(function(e){return t.getToolBoxById(e).setEditingConstraints(n[e])})},x.getApplicationEditingConstraints=function(){return this.applicationEditingConstraints},x.getApplicationEditingConstraintById=function(e){return this.applicationEditingConstraints.toolboxes[e]},x.getToolBoxes=function(){return this._toolboxes},x.getEditableLayers=function(){return this._editableLayers},x.getEditableLayersId=function(){return Object.keys(this.getEditableLayers())},x._cancelOrSave=function(){return resolve()},x.stop=function(){var i=this;return new Promise(function(e,t){var n=[];i._toolboxes.forEach(function(e){e.getSession().getHistory().state.commit&&n.push(i.commit({toolbox:e,modal:!0}))}),$.when.apply(i,n).always(function(){i._toolboxes.forEach(function(e){return e.stop()}),i.clearState(),i._mapService.refreshMap(),e()})})},x.clear=function(){F.removeLayersStore(this._layersstore),k.clear(),this._mapService.off(O,this.mapControlToggleEventHandler),this.unregisterResultEditingAction()},x.clearState=function(){this.state.toolboxselected=null,this.state.toolboxidactivetool=null,this.state.message=null},x.getRelationsInEditing=function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.layerId,t=e.relations,t=void 0===t?[]:t,r=e.feature,o=[],a=void 0;return t.forEach(function(e){var t=n._getRelationLayerId({layerId:i,relation:e});n.getLayerById(t)&&(a={relation:e.getState(),relations:n.getRelationsAttributesByFeature({layerId:t,relation:e,feature:r}),validate:{valid:!0}},o.push(a))}),o},x._filterRelationsInEditing=function(e){var t=this,n=e.layerId,e=e.relations;return(void 0===e?[]:e).filter(function(e){return t.getToolBoxById(t._getRelationId({layerId:n,relation:e}))})},x.stopToolboxesChildren=function(t){var n=this,e=this.getLayerById(t);this._filterRelationsInEditing({relations:e.getRelations()?e.getRelations().getArray():[],layerId:t}).filter(function(e){return e.getFather()===t}).forEach(function(e){e=n._getRelationId({layerId:t,relation:e});n.getToolBoxById(e).inEditing()&&n.getToolBoxById(e).stop()})},x.stopSessionChildren=function(t){var n=this,e=this.getLayerById(t);this._filterRelationsInEditing({relations:e.getRelations()?e.getRelations().getArray():[],layerId:t}).filter(function(e){return e.getFather()===t}).forEach(function(e){e=n._getRelationId({layerId:t,relation:e});n.getToolBoxById(e).inEditing()||n._sessions[e].stop()})},x.fathersInEditing=function(t){var n=this;return this.getLayerById(t).getFathers().filter(function(e){var e=n.getToolBoxById(e);if(e&&e.inEditing()&&e.isDirty())return e=e.getSession().getCommitItems().relations,Object.keys(void 0===e?{}:e).find(function(e){return t===e})})},x._getRelationFieldsFromRelation=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,e=e.relation,t=(e.getChild?e.getChild():e.child)!==t,n=e.getFatherField?e.getFatherField():e.fatherField,e=e.getChildField?e.getChildField():e.childField;return{ownField:t?n:e,relationField:t?e:n}},x.createEditingDataOptions=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=void 0;switch(e){case"all":n=void 0;break;case"bbox":n={bbox:this._mapService.getMapBBOX()};break;case"field":n={field:{field:t.field,type:"editing"}};break;case"fid":"not"!==t.operator&&(n={fid:{fid:t.feature.getId(),layer:{id:t.layerId},type:"editing",relation:t.relation.state,formatter:0}});break;case"1:1":n={field:t.relation.getChildField()[0]+"|eq|"+t.feature.get(t.relation.getFatherField()[0]),type:"editing"}}return{registerEvents:!0,editing:!0,filter:n}},x._getFeaturesByLayerId=function(e){return this.getLayerById(e).readEditingFeatures()},x.getLayersDependencyFeaturesFromSource=function(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.layerId,s=e.relation,l=e.feature,e=e.operator,u=void 0===e?"eq":e;return new Promise(function(e){if("eq"!==u)return e(!1);var t=o._getRelationFieldsFromRelation({layerId:a,relation:s}),n=t.ownField,t=t.relationField,i=o._getFeaturesByLayerId(a),r=t.map(function(e){return l.get(e)});e(n.every(function(t,n){return i.find(function(e){return e.get(t)==r[n]})}))})},x._getRelationId=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,e=e.relation,n=e.getFather?e.getFather():e.father,e=e.getChild?e.getChild():e.child;return n===t?e:n},x.getLayersDependencyFeatures=function(s){var l=this,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=[],e=this.getLayerById(s),n=u.relations||(e.getChildren().length&&e.getRelations()?this._filterRelationsInEditing({relations:e.getRelations().getArray().filter(function(e){return e.getFather()===s}),layerId:s}):[]),c=m.online;return n.forEach(function(o){o.setLoading?o.setLoading(!0):o.loading=!0;var a=l._getRelationId({layerId:s,relation:o}),e=new Promise(function(t){u.relation=o,u.layerId=s,u.filterType="ONE"===o.getType()?"1:1":u.filterType;var e=u.filterType||"fid",n=l.createEditingDataOptions(e,u),i=l._sessions[a],r=l.getToolBoxById(a);c&&i?(r.startLoading(),i.isStarted()?l.getLayersDependencyFeaturesFromSource({layerId:a,relation:o,feature:u.feature,operator:u.operator}).then(function(e){e?(t(a),r.stopLoading()):i.getFeatures(n).always(function(e){e.always(function(){r.stopLoading(),t(a)})})}):i.start(n).always(function(e){e.always(function(){r.stopLoading(),t(a)})})):l.getLayersDependencyFeaturesFromSource({layerId:a,relation:o,feature:u.feature,operator:u.operator}).then(function(){return t(a)})});t.push(e)}),Promise.all(t).finally(function(){return n.forEach(function(e){e.setLoading?e.setLoading(!1):e.loading=!1})}),Promise.all(t)},x.commitDirtyToolBoxes=function(i){var r=this;return new Promise(function(e,t){var n=r.getToolBoxById(i);n.isDirty()&&n.hasDependencies()?r.commit({toolbox:n}).then(function(){e(n)}).fail(function(){n.revert().then(function(){n.getDependencies().forEach(function(e){-1!==r.getLayerById(e).getChildren().indexOf(e)&&r.getToolBoxById(e).revert()})}),t(n)}):e(n)})},x._createCommitMessage=function(e){function n(e,t,n){var i={},r=(i[""+L("editing.messages.commit.add")]=e.length,i[""+L("editing.messages.commit.update")]="["+t.map(function(e){return e.id}).join(",")+"]",i[""+L("editing.messages.commit.delete")]="["+n.join(",")+"]","<h4>"+L("editing.messages.commit.header")+"</h4>"),r=(r+="<h5>"+L("editing.messages.commit.header_add")+"</h5>")+("<h5>"+L("editing.messages.commit.header_update_delete")+"</h5>")+"<ul style='border-bottom-color: #f4f4f4;'>";return Object.entries(i).forEach(function(e){var e=p(e,2),t=e[0],e=e[1];r+="<li>"+t+" : "+e+" </li>"}),r+="</ul>"}var i="";return i+=n(e.add,e.update,e.delete),_.isEmpty(e.relations)||(i=(i+="<div style='height:1px; background:#f4f4f4;border-bottom:1px solid #f4f4f4;'></div>")+"<div style='margin-left: 40%'><h4>"+L("editing.relations")+"</h4></div>",Object.entries(e.relations).forEach(function(e){var e=p(e,2),t=e[0],e=e[1];i=(i+="<div><span style='font-weight: bold'>"+t+"</span></div>")+n(e.add,e.update,e.delete)})),i},x.showCommitModalWindow=function(e){var i=this,r=e.layer,o=e.commitItems,a=e.close,s=e.commitPromise,l={success:{message:"plugins.editing.messages.saved",autoclose:!0},error:{}};return new Promise(function(t,n){var e=new c.EditingWorkflow({type:"commitfeatures",steps:[new d.ConfirmStep({type:"commit"})]});e.start({inputs:{layer:r,message:i._createCommitMessage(o),close:a}}).then(function(){var e=T.dialog.dialog({message:'<h4 class="text-center"><i style="margin-right: 5px;" class='+T.getFontClass("spinner")+"></i>"+L("editing.messages.saving")+"</h4>",closeButton:!1});t(l),s.always(function(){return e.modal("hide")})}).fail(function(e){return n(e)}).always(function(){return e.stop()})})},x.saveChange=n(function*(){if("autosave"===this.saveConfig.mode)return this.commit({modal:!1})}),x.addLayersFeaturesToShowOnResult=function(e){var t=this,n=e.layerId,e=e.fids,e=void 0===e?[]:e;void 0===this.loadLayersFeaturesToResultWhenCloseEditing[n]&&(this.loadLayersFeaturesToResultWhenCloseEditing[n]=new Set),e.forEach(function(e){return t.loadLayersFeaturesToResultWhenCloseEditing[n].add(e)})},x.onCloseEditingPanel=n(function*(){yield this.showChangesToResult(),this.getToolBoxes().forEach(function(e){return e.resetDefault()})}),x.showChangesToResult=n(function*(){var n=this,e=Object.keys(this.loadLayersFeaturesToResultWhenCloseEditing);if(e.length){var i={layers:[],fids:[],formatter:1},e=(e.forEach(function(e){var t=[].concat(y(n.loadLayersFeaturesToResultWhenCloseEditing[e]));t.length&&(e=S.getLayerById(e),i.layers.push(e),i.fids.push(t))}),i.layers.length?o.getData("search:layersfids",{inputs:i,outputs:{title:"plugins.editing.editing_changes",show:{loading:!1}}}):Promise.resolve());try{yield e}catch(e){}}this.loadLayersFeaturesToResultWhenCloseEditing={}}),x.commit=function(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.toolbox,i=e.commitItems,t=e.modal,t=void 0===t||t,e=e.close,e=void 0!==e&&e,s=$.Deferred(),n=s.promise(),r=this.saveConfig,l=r.cb,u=void 0===l?{}:l,l=r.messages,r=void 0===l?{success:{},error:{}}:l,c=(a=a||this.state.toolboxselected).getSession(),l=a.getLayer(),d=l.getType(),f=i,p=(i=i||c.getCommitItems()).add,h=i.delete,h=void 0===h?[]:h,g=i.update,g=void 0===g?[]:g,v=i.relations,v=void 0===v?{}:v;return 0===[].concat(y(void 0===p?[]:p),y(h),y(g),y(Object.keys(v))).length?(T.showUserMessage({type:"info",message:"Nothing to save",autoclose:!0,closable:!1}),s.resolve(a),s.promise()):((t?this.showCommitModalWindow({layer:l,commitItems:i,close:e,commitPromise:n}):Promise.resolve(r)).then(function(r){var e,t,n;m.online?c.commit({items:f||i}).then(function(e,t){var n,i;m.online&&(t.result?(i=(n=r.success).autoclose,n=n.message,r&&r.success&&T.showUserMessage({type:"success",message:void 0===n?"plugins.editing.messages.saved":n,duration:3e3,autoclose:void 0===i||i}),d===C.LayerTypes.VECTOR&&o._mapService.refreshMap({force:!0}),u.done&&u.done instanceof Function&&u.done(a),o.addLayersFeaturesToShowOnResult({layerId:a.getId(),fids:[].concat(y(t.response.new.map(function(e){return e.id})),y(e.update.map(function(e){return e.id})))}),o.emit("commit",t.response)):(n=new A({error:t.errors}).parse({type:"String"}),e=(i=r.error).autoclose,t=i.message,T.showUserMessage({type:"alert",message:t||n,textMessage:!t,autoclose:void 0!==e&&e}),u.error&&u.error instanceof Function&&u.error(a,t||n)),s.resolve(a))}).fail(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new A({error:e.errors||e}).parse({type:"String"}),t=r.error,n=t.autoclose,t=t.message;T.showUserMessage({type:"alert",message:t||e,textMessage:!t,autoclose:void 0!==n&&n}),s.reject(a),u.error&&u.error instanceof Function&&u.error(a,t||e)}):o.saveOfflineItem({data:(e={},t=c.getId(),n=i,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),id:P.CHANGES}).then(function(){T.showUserMessage({type:"success",message:"plugins.editing.messages.saved_local",autoclose:!0}),c.clearHistory(),s.resolve(a)}).catch(function(e){T.showUserMessage({type:"alert",message:e,textMessage:!0}),s.reject(a)})}).catch(function(){s.reject(a)}),n)},x.clearAllLayersUniqueFieldsValues=function(){this.layersUniqueFieldsValues={}},x.clearLayerUniqueFieldsValues=function(e){this.layersUniqueFieldsValues[e]={}},x.removeLayerUniqueFieldValuesFromFeature=function(e){var t=e.layerId,n=e.feature,i=this.layersUniqueFieldsValues[t];i&&Object.keys(n.getProperties()).filter(function(e){return void 0!==i[e]}).forEach(function(e){return i[e].delete(n.get(e))})},x.removeRelationLayerUniqueFieldValuesFromFeature=function(e){var n=e.layerId,t=e.relationLayerId,i=e.feature,r=this.layersUniqueFieldsValues[t],o=this.layersUniqueFieldsValues[n];void 0!==r&&void 0!==o&&(void 0===r.__uniqueFieldsValuesRelations&&(r.__uniqueFieldsValuesRelations={}),Object.keys(i.getProperties()).forEach(function(e){var t;void 0===r.__uniqueFieldsValuesRelations[n]&&(r.__uniqueFieldsValuesRelations[n]={}),void 0!==o[e]&&((t=new Set(o[e])).delete(i.get(e)),r.__uniqueFieldsValuesRelations[n][e]=t)}))},x.setLayerUniqueFieldValues=(j=n(function*(n){var i=this,e=[],r=S.getLayerById(n);return r.getEditingFields().forEach(function(t){t.validate.unique&&void 0===i.getLayerUniqueFieldValues({layerId:n,field:t})&&e.push(r.getFilterData({unique:t.name}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];void 0===i.layersUniqueFieldsValues[n]&&(i.layersUniqueFieldsValues[n]={}),i.layersUniqueFieldsValues[n][t.name]=new Set(e)}))}),yield Promise.allSettled(e),this.layersUniqueFieldsValues[n]}),function(e){return j.apply(this,arguments)}),x.saveTemporaryRelationsUniqueFieldsValues=function(e){var i=this,t=this.layersUniqueFieldsValues[e]&&this.layersUniqueFieldsValues[e].__uniqueFieldsValuesRelations;void 0!==t&&(Object.keys(t).forEach(function(n){Object.entries(t[n]).forEach(function(e){var e=p(e,2),t=e[0],e=e[1];i.layersUniqueFieldsValues[n][t]=e})}),this.clearTemporaryRelationsUniqueFieldsValues(e))},x.clearTemporaryRelationsUniqueFieldsValues=function(e){this.layersUniqueFieldsValues[e]&&delete this.layersUniqueFieldsValues[e].__uniqueFieldsValuesRelations},x.getLayerUniqueFieldValues=function(e){var t=e.layerId,e=e.field;return this.layersUniqueFieldsValues[t]?this.layersUniqueFieldsValues[t][e.name]:[]},x.getChildLayerUniqueFieldValues=function(e){var t=e.layerId,n=e.relationLayerId,e=e.field,n=this.layersUniqueFieldsValues[n]&&this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations;return void 0!==n&&void 0!==n[t]&&void 0!==n[t][e.name]?n[t][e.name]:this.getLayerUniqueFieldValues({layerId:t,field:e})},x.changeLayerUniqueFieldValues=function(e){var t=e.layerId,n=e.field,i=e.oldValue,e=e.newValue;void 0!==this.layersUniqueFieldsValues[t]&&void 0!==this.layersUniqueFieldsValues[t][n.name]&&((t=this.layersUniqueFieldsValues[t][n.name]).delete(i),t.add(e))},x.changeRelationLayerUniqueFieldValues=function(e){var t,n=e.layerId,i=e.relationLayerId,r=e.field,o=e.oldValue,e=e.newValue,i=this.layersUniqueFieldsValues[i];void 0!==i&&(void 0===i.__uniqueFieldsValuesRelations&&(i.__uniqueFieldsValuesRelations={}),void 0===i.__uniqueFieldsValuesRelations[n]&&(i.__uniqueFieldsValuesRelations[n]={}),(t=new Set(this.layersUniqueFieldsValues[n][r.name])).delete(o),t.add(e),i.__uniqueFieldsValuesRelations[n][r.name]=t)},x.addLayerUniqueFieldValue=function(e){var t=e.layerId,n=e.field,e=e.value;this.layersUniqueFieldsValues[t][n.name].add(e)},x.deleteLayerUniqueFieldValue=function(e){var t=e.layerId,n=e.field,e=e.value;this.layersUniqueFieldsValues[t][n.name].delete(e)},x.undoRedoLayerUniqueFieldValues=function(e){var o=this,a=e.layerId,t=e.sessionItems,t=void 0===t?[]:t,s=e.action;void 0!==this.layersUniqueFieldsValues[a]&&t.forEach(function(r){Object.keys(o.layersUniqueFieldsValues[a]).forEach(function(e){var t,n=void 0,i=void 0;i=Array.isArray(r)?(n=(t=r[1].feature.get(e)!=r[0].feature.get(e))?("undo"===s?r[1]:r[0]).feature.get(e):void 0,t?("undo"===s?r[0]:r[1]).feature.get(e):void 0):(n="add"===r.feature.getState()?r.feature.get(e):void 0,"delete"===r.feature.getState()?r.feature.get(e):void 0),void 0!==n&&o.deleteLayerUniqueFieldValue({layerId:a,field:{name:e},value:n}),void 0!==i&&o.addLayerUniqueFieldValue({layerId:a,field:{name:e},value:i})})})},x.undoRedoRelationUniqueFieldValues=function(e){var i=this,t=e.relationSessionItems,r=e.action;Object.entries(t).forEach(function(e){var e=p(e,2),t=e[0],e=e[1],n=e.own,e=e.dependencies;i.undoRedoLayerUniqueFieldValues({layerId:t,sessionItems:n,action:r}),i.undoRedoRelationUniqueFieldValues({relationSessionItems:e,action:r})})},x.getProjectLayerById=function(e){return S.getLayerById(e)},x.getProjectLayerFeatureById=(R=n(function*(e){var t=e.layerId,e=e.fid,n=void 0;try{var i=yield u.get({url:this.getProjectLayerById(t).getUrl("data"),params:{fids:e}}),r=v(i);0<r.length&&(n=r[0])}catch(e){}return n}),function(e){return R.apply(this,arguments)}),x.getProjectLayersWithSameGeometryOfLayer=function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{exclude:[]}).exclude,n=void 0===t?[]:t,i=e.getGeometryType();return S.getLayers().filter(function(e){return e.isGeoLayer()&&e.getGeometryType&&e.getGeometryType()&&-1===n.indexOf(e.getId())&&(e.getGeometryType()===i||b(e.getGeometryType(),i)&&g.isMultiGeometry(i))})},x.getExternalLayersWithSameGeometryOfLayer=function(e){var t=e.getGeometryType();return this._mapService.getExternalLayers().filter(function(e){var e=e.getSource().getFeatures();return!(!(e&&0<e.length)||e&&e[0]&&!e[0].getGeometry())&&(e=e[0].getGeometry().getType(),t===e||b(t,e))})},x.getFeatureTableFieldValue=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.feature,e=e.property,t=this.getLayerById(t).config.editing.fields,i=n.get(e),n=null!==i&&(t.filter(function(e){return["select_autocomplete","select"].includes(e.input.type)})||[]).reduce(function(e,t){return e[t.name]=t.input.options.values,e},{}),t=n&&n[e]&&n[e].find(function(e){return i==e.value});return t?t.key:i},x.showPanel=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.toolboxes&&Array.isArray(t.toolboxes)&&this.getToolBoxes().forEach(function(e){return e.setShow(-1!==t.toolboxes.indexOf(e.getId()))}),this.getPlugin().showEditingPanel(t)},x.hidePanel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.getPlugin().hideEditingPanel(e)},x.startEditing=function(i){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return o.selected=void 0===o.selected||o.selected,o.showselectlayers=void 0===o.showselectlayers||o.showselectlayers,o.disablemapcontrols=void 0!==o.disablemapcontrols&&o.showselectlayers,new Promise(function(t,e){var n=r.getToolBoxById(i);if(r.setShowSelectLayers(o.showselectlayers),!n)return e();n.setSelected(o.selected),o.selected&&r.setSelectedToolbox(n),o.title&&n.setTitle(o.title),n.start(o).then(function(e){o.disablemapcontrols&&r.disableMapControlsConflict(!0),t(e?{toolbox:n,data:e}:n)}).fail(e)})},x.stopEditing=function(n){var i=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,t){i.getToolBoxById(n).stop(r).then(e).fail(t)})},x.addLayerFeature=function(){var s=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},l=e.layerId,u=e.feature;return void 0===u||void 0===l?Promise.reject():new Promise(function(e,t){function n(e){return a.stop(),r.stop(),e()}var i=s.getLayerById(l),r=s.getSessionById(l),o=i.getEditingFields().filter(function(e){return!(e.pk&&!e.editable)}),a=(r.start({filter:{nofeatures:!0,nofeatures_field:o[0].name},editing:!0}),new c.EditingWorkflow({type:"addfeature",steps:[new d.OpenFormStep({push:!0,showgoback:!1,saveAll:!1})]}));try{o.forEach(function(e){void 0===u.get(e.name)&&u.set(e.name,null)}),(u=new I({feature:u,properties:o.map(function(e){return e.name})})).setTemporaryId(),r.pushAdd(l,u,!1),i.getEditingLayer().getSource().addFeature(u),a.start({inputs:{layer:i,features:[u]},context:{session:r}}).then(function(){r.save(),s.commit({modal:!1,toolbox:s.getToolBoxById(l)}).then(function(){return n(e)}).fail(function(){return n(t)})}).fail(function(){return n(t)})}catch(e){t()}})},M.EDITING_FIELDS_TYPE=["unique"],t.exports=new M},{"../g3wsdk/workflow/workflow":45,"../toolboxes/toolbox":53,"../workflows":70}],50:[function(e,t,n){var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u=e("../g3wsdk/workflow/workflow"),c=e("../workflows");function f(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function i(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(this._parentLayerId=e,this._parentWorkFlow=this.getCurrentWorkflow(),this._parentLayer=this._parentWorkFlow.getLayer(),t.relation),t=t.relations,i=(this.relation=i,this.relations=t,this._editingService,this._isExternalFieldRequired=!1,this._relationLayerId=this.relation.child===this._parentLayerId?this.relation.father:this.relation.child,this.getLayer()),r=(this._layerType=i.getType(),g.LayerTypes.VECTOR===this._layerType?i.getGeometryType():g.LayerTypes.TABLE),t=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._parentLayerId,relation:this.relation}).ownField;this._fatherRelationFields={editable:t.filter(function(e){return n._parentLayer.isEditingFieldEditable(e)}),pk:t.find(function(e){return n._parentLayer.isPkField(e)&&!n._parentLayer.isEditingFieldEditable(e)})},this._isExternalFieldRequired=this._checkIfExternalFieldRequired(),this._currentParentFeatureRelationFieldsValue=t.reduce(function(e,t){return e[t]=t===n._fatherRelationFields.pk?n.getCurrentWorkflowData().feature.getId():n.getCurrentWorkflowData().feature.get(t),e},{}),this._relationTools=[],this._add_link_workflow=null,this.capabilities={parent:this._parentLayer.getEditingCapabilities(),relation:this._parentLayer.getEditingCapabilities()},g.LayerTypes.TABLE===r?(void 0!==this.capabilities.relation.find(function(e){return"delete_feature"===e})&&this._relationTools.push({state:{icon:"deleteTableRow.png",id:"deletefeature",name:"editing.tools.delete_feature"}}),void 0!==this.capabilities.relation.find(function(e){return"change_attr_feature"===e})&&this._relationTools.push({state:{icon:"editAttributes.png",id:"editattributes",name:"editing.tools.update_feature"}})):this.getEditingService().getToolBoxById(this._relationLayerId).getTools().forEach(function(e){-1!==_.concat(s[r],s.default).indexOf(e.getId())&&n._relationTools.push(_.cloneDeep(e))}),this._add_link_workflow=(a(i={},g.LayerTypes.TABLE,{link:function(){return new u.EditingWorkflow(o({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"edittable",backbuttonlabel:"plugins.editing.form.buttons.save_and_back_table",steps:[new c.OpenTableStep]}))},add:function(){return new u.EditingWorkflow(o({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"addtablefeature",steps:[new c.AddTableFeatureStep,new c.OpenFormStep]}))}}),a(i,g.LayerTypes.VECTOR,{link:function(){return new u.EditingWorkflow({type:"linkrelation",steps:[new c.LinkRelationStep]})},add:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new u.EditingWorkflow(o({},e,{type:"addfeature",steps:[new c.AddFeatureStep(e),new c.OpenFormStep(e)]}));return e.addToolsOfTools({step:e.getStep(0),tools:["snap","measure"]}),e},selectandcopy:function(e){return new u.EditingWorkflow({type:"selectandcopyfeaturesfromotherlayer",steps:[new c.PickProjectLayerFeaturesStep(e),new c.CopyFeaturesFromOtherProjectLayerStep(e),new c.OpenFormStep(e)],registerEscKeyEvent:!0})}}),i[this._layerType])}var p=g3wsdk.gui.GUI,h=g3wsdk.core.i18n.tPlugin,g=g3wsdk.core.layer.Layer,r=g3wsdk.core.workflow.WorkflowsStack,s={default:["editattributes","deletefeature"],table:[],Point:["movefeature"],LineString:["movevertex"],Polygon:["movefeature","movevertex"]},l=i.prototype;l.getEditingCapabilities=function(){return this.capabilities},l.getRelationTools=function(){return this._relationTools},l._highlightRelationSelect=function(e){var t=this.getLayer().getEditingLayer().getStyle(),n=this.getLayer().getGeometryType(),i=void 0;return"LineString"===n||"MultiLineString"===n?i=new ol.style.Style({stroke:new ol.style.Stroke({color:"rgb(255,255,0)",width:4})}):"Point"===n||"MultiPoint"===n?i=new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:"rgb(255,255,0)"})})}):"Polygon"!==n&&"MultiPolygon"!==n||(i=new ol.style.Style({stroke:new ol.style.Stroke({color:"rgb(255,255,0)",width:4}),fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.5)"})})),e.setStyle(i),t},l.startTool=function(n,i){var r=this;return"movefeature"===n.state.id&&p.hideContent(!0),new Promise(function(e,t){(g.LayerTypes.VECTOR===r._layerType&&r.startVectorTool(n,i)||g.LayerTypes.TABLE===r._layerType&&r.startTableTool(n,i)).then(function(){r.emitEventToParentWorkFlow(),e()}).fail(function(e){return t(e)}).always(function(){return p.hideContent(!1)})})},l.forceParentsFromServiceWorkflowToUpdated=function(){(r.getParents()||[this.getCurrentWorkflow()]).forEach(function(e){e.getContextService()&&e.getContextService().setUpdate(!0,{force:!0})})},l.startTableTool=function(e,t){var n,i=this,r=$.Deferred(),o=this.relations[t],a=this.getLayer().getEditingSource(),s=a.getFeatureById(o.id),l=this._createWorkflowOptions({features:[s]});return"deletefeature"===e.state.id&&p.dialog.confirm(h("editing.messages.delete_feature"),function(e){e?(i.getCurrentWorkflowData().session.pushDelete(i._relationLayerId,s),i.relations.splice(t,1),i.getEditingService().removeRelationLayerUniqueFieldValuesFromFeature({layerId:i._relationLayerId,relationLayerId:i._parentLayerId,feature:s}),a.removeFeature(s),i.forceParentsFromServiceWorkflowToUpdated(),r.resolve(e)):r.reject(e)}),"editattributes"===e.state.id&&(n=new u.EditingWorkflow({type:"edittablefeature",steps:[new c.OpenFormStep]})).start(l).then(function(){i._getRelationFieldsValue(s).forEach(function(t){o.fields.forEach(function(e){e.name===t.name&&(e.value=t.value)})}),r.resolve(!0)}).fail(function(e){return r.reject(!1)}).always(function(){return n.stop()}),r.promise()},l.startVectorTool=function(t,n){var i=this,r=$.Deferred(),o=this.relations[n],a=this._getRelationFeature(o.id),e=this._createWorkflowOptions({features:[a]}),s=Object.create(Object.getPrototypeOf(t.getOperator())),l=this._highlightRelationSelect(a);return p.setModal(!1),s.bindEscKeyUp(function(){return a.setStyle(i._originalLayerStyle)}),(s.isType(["deletefeature","editattributes"])&&s.startFromLastStep(e)||s.start(e)).then(function(e){"deletefeature"===t.getId()&&(a.setStyle(i._originalLayerStyle),i.getCurrentWorkflowData().session.pushDelete(i._relationLayerId,a),i.relations.splice(n,1),i.forceParentsFromServiceWorkflowToUpdated()),"editattributes"===t.getId()&&i._getRelationFieldsValue(a).forEach(function(t){o.fields.forEach(function(e){e.name===t.name&&(e.value=t.value)})}),r.resolve(e)}).fail(function(e){return r.reject(e)}).always(function(){s.stop(),p.hideContent(!1),s.unbindEscKeyUp(),p.setModal(!0),a.setStyle(l)}),r.promise()},l.getLayer=function(){return this.getEditingService().getLayerById(this._relationLayerId)},l.getEditingLayer=function(){return this.getEditingService().getEditingLayer(this._relationLayerId)},l.getEditingService=function(){return this._editingService=this._editingService||e("./editingservice"),this._editingService},l.updateExternalKeyValueRelations=function(i){var r=this,o=this.getEditingService().getToolBoxById(this._relationLayerId).getSession(),e=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),a=e.ownField,e=e.relationField;0<this._fatherRelationFields.editable.length&&e.find(function(e){return e===i.name})&&(this._currentParentFeatureRelationFieldsValue[i.name]=i.value,this.relations.forEach(function(e){var t,n=e.fields.find(function(e){return-1!==a.indexOf(e.name)});n&&(n.value=r._currentParentFeatureRelationFieldsValue[n.name],t=(e=r._getRelationFeature(e.id)).clone(),e.set(n.name,i.value),e.isNew()||o.pushUpdate(r._relationLayerId,e,t))}))},l._getRelationFieldsValue=function(e){return this.getLayer().getFieldsWithValues(e,{relation:!0})},l._createRelationObj=function(e){return{fields:this._getRelationFieldsValue(e),id:e.getId()}},l.emitEventToParentWorkFlow=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e&&this._parentWorkFlow.getContextService().getEventBus().$emit(e,t)},l._getRelationAsFatherStyleColor=function(e){var t=this.getEditingLayer(this._parentLayerId).getStyle(),n=void 0;switch(e){case"Point":n=t.getImage()&&t.getImage().getFill();break;case"Line":n=t.getStroke()||t.getFill();break;case"Polygon":n=t.getFill()||t.getStroke()}return n&&n.getColor()||"#000000"},l.addRelationFromOtherLayer=function(e){var t=e.layer,e=e.external,n=void 0,i=!1;(e||t.isGeoLayer())&&(n=new this._add_link_workflow.selectandcopy({copyLayer:t,isVector:i=!0,external:e,help:"editing.steps.help.copy"})),this.runAddRelationWorkflow({workflow:n,isVector:i})},l.addRelation=function(){this.runAddRelationWorkflow({workflow:new this._add_link_workflow.add,isVector:g.LayerTypes.VECTOR===this._layerType})},l.runAddRelationWorkflow=function(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.workflow,e=e.isVector,n=void 0!==e&&e,e=(n&&(p.setModal(!1),p.hideContent(!0)),this._createWorkflowOptions()),a=e.context.session,i=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),s=i.ownField,l=i.relationField,u=e.parentFeature,i=t.start(e);n&&t.bindEscKeyUp(),i.then(function(e){function n(e){var n=e.oIndex,i=e.value;t.forEach(function(e,t){t=r[t];e.set(s[n],i),u.isNew()&&t.set(s[n],i),o.getLayer().getEditingSource().updateFeature(e),a.pushUpdate(o._relationLayerId,e,t)})}var i,e=e.relationFeatures,t=e.newFeatures,r=e.originalFeatures;Object.entries(o._currentParentFeatureRelationFieldsValue).forEach(function(e){var e=d(e,2),t=e[0],e=e[1];n({oIndex:l.findIndex(function(e){return t===e}),value:e})}),u.isNew()&&0<o._fatherRelationFields.editable.length&&(i=u.on("propertychange",function(t){var e;u.isNew()?-1!==l.indexOf(t.key)&&(e=t.target.get(t.key),n({oIndex:l.findIndex(function(e){return t.key===e}),value:e})):ol.Observable.unByKey(i)})),t.forEach(function(e){o.relations.push(o._createRelationObj(e))}),o.emitEventToParentWorkFlow()}).fail(function(e){e&&e.relationFeatures&&(void 0===(e=e.relationFeatures.newFeatures)?[]:e).forEach(function(e){o.relations.push(o._createRelationObj(e))}),a.rollbackDependecies([o._relationLayerId])}).always(function(){t.stop(),n&&(t.unbindEscKeyUp(),p.hideContent(!1),p.setModal(!0))})},l.linkRelation=function(){var r=this,e=g.LayerTypes.VECTOR===this._layerType,o=new this._add_link_workflow.link,a=this._createWorkflowOptions(),s=a.context.session,t=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),l=t.ownField,u=t.relationField;a.context.excludeFeatures=u.reduce(function(e,t,n){return e[l[n]]=r._currentParentFeatureRelationFieldsValue[t],e},{}),e&&(p.setModal(!1),p.hideContent(!0),a.context.style=this.getUnlinkedStyle());function n(){return r.getEditingService().getLayersDependencyFeatures(r._parentLayerId,c)}var i,t=this.getCurrentWorkflowData().feature,c={relations:[this.relation],feature:t,operator:"not",filterType:e?"bbox":"fid"};(e?(i=this.getEditingService().getMapService(),a.context.beforeRun=f(function*(){i.showMapSpinner(),yield new Promise(function(e){return setTimeout(e)}),yield n(),i.hideMapSpinner(),p.showUserMessage({type:"info",size:"small",message:h("editing.messages.press_esc"),closable:!1})}),new Promise(function(e){o.bindEscKeyUp(),e({promise:o.start(a),showContent:!0})})):new Promise(function(e){n().then(function(){return e({})})})).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.promise,e=e.showContent,n=void 0!==e&&e,i=!1;(t=t||o.start(a)).then(function(e){0<e.features.length&&e.features.forEach(function(n){var e;void 0===r.relations.find(function(e){return e.id===n.getId()})?(i=i||!0,e=n.clone(),Object.entries(r._currentParentFeatureRelationFieldsValue).forEach(function(e){var e=d(e,2),t=e[0],e=e[1];n.set(l[u.findIndex(function(e){return t===e})],e)}),r.getCurrentWorkflowData().session.pushUpdate(r._relationLayerId,n,e),r.relations.push(r._createRelationObj(n)),r.emitEventToParentWorkFlow()):p.notify.warning(h("editing.relation_already_added"))})}).fail(function(){return s.rollbackDependecies([r._relationLayerId])}).always(function(){n&&(p.closeUserMessage(),p.hideContent(!1),o.unbindEscKeyUp()),i&&r.forceParentsFromServiceWorkflowToUpdated(),o.stop()})})},l._checkIfExternalFieldRequired=function(){var t=this;return this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}).ownField.some(function(e){return t.getEditingService().isFieldRequired(t._relationLayerId,e)})},l.isRequired=function(){return this._isExternalFieldRequired},l._getRelationFeature=function(e){return this.getLayer().getEditingSource().getFeatureById(e)},l.getRelationFeatureValue=function(e,t){return this.getEditingService().getFeatureTableFieldValue({layerId:this._relationLayerId,feature:this._getRelationFeature(e),property:t})},l.unlinkRelation=function(n){function t(){var e=i.relations[n],t=i.getLayer().getEditingSource().getFeatureById(e.id),e=t.clone();o.forEach(function(e){return t.set(e,null)}),i.getCurrentWorkflowData().session.pushUpdate(i._relationLayerId,t,e),i.relations.splice(n,1),i.forceParentsFromServiceWorkflowToUpdated(),r.resolve(!0)}var i=this,e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=$.Deferred(),o=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}).ownField;return e?p.dialog.confirm(h("editing.messages.unlink_relation"),function(e){e?t():r.reject(!1)}):t(),r.promise()},l.getCurrentWorkflow=function(){return this.getEditingService().getCurrentWorkflow()},l.getCurrentWorkflowData=function(){return this.getEditingService().getCurrentWorkflowData()},l._createWorkflowOptions=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),i=t.ownField,r=t.relationField,t=this.getCurrentWorkflowData(),n=t.feature,t=t.session,o=[],a=[];return Object.entries(this._currentParentFeatureRelationFieldsValue).forEach(function(e){var e=d(e,2),t=e[0],e=e[1],n=r.findIndex(function(e){return t===e});a.push(i[n]),o.push(e)}),{parentFeature:n,context:{session:t,excludeFields:i,fatherValue:o,fatherField:a},inputs:{features:e.features||[],layer:this.getLayer()}}},l.getUnlinkedStyle=function(){var e=void 0;switch(this.getLayer().getGeometryType()){case"Point":case"MultiPoint":e=new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:this._getRelationAsFatherStyleColor("Point")}),stroke:new ol.style.Stroke({width:5,color:"yellow"})})});break;case"Line":case"MultiLine":e=new ol.style.Style({fill:new ol.style.Fill({color:this._getRelationAsFatherStyleColor("Line")}),stroke:new ol.style.Stroke({width:5,color:"yellow"})});break;case"Polygon":case"MultiPolygon":e=new ol.style.Style({stroke:new ol.style.Stroke({color:"yellow",width:5}),fill:new ol.style.Fill({color:this._getRelationAsFatherStyleColor("Polygon"),opacity:.5})})}return e},l.relationFields=function(e){return e.fields.map(function(e){var t=e.label;return{name:e.name,label:t,value:e.value}})},t.exports=i},{"../g3wsdk/workflow/workflow":45,"../workflows":70,"./editingservice":49}],51:[function(l,e,t){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(this._features=e.features||[],this._promise=e.promise,this._context=e.context,this._inputs=e.inputs,this._layerId=e.inputs.layer.getId(),this._fatherValue=e.fatherValue,this._foreignKey=e.foreignKey,this._workflow=null,this._deleteFeaturesIndexes=[],this._isrelation=e.isrelation||!1,e.capabilities),n=e.headers,i=e.title,e=e.push;this.state={headers:void 0===n?[]:n,features:[],title:void 0===i?"Link relation":i,isrelation:e,capabilities:t},this.init=function(){var t,e,n,i=this,r=l("./editingservice");this._isrelation&&this._features.filter(function(e){return e.get(i._foreignKey)!==i._fatherValue}),0<this._features.length&&(n=this._features[0],t=Object.keys(n.getProperties()),this.state.headers=this.state.headers.filter(function(e){return-1!==t.indexOf(e.name)}),e=this.state.headers.map(function(e){return e.name}),n=this._features,this.state.features=n.map(function(t){var n={};return e.forEach(function(e){n[e]=r.getFeatureTableFieldValue({layerId:i._layerId,feature:t,property:e})}),n.__gis3w_feature_uid=t.getUid(),n}))},this.init(),r(this)}var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=l("../g3wsdk/workflow/workflow"),u=l("../utils/cloneFeature"),c=l("../workflows"),i=(Object.entries({cloneFeature:u.cloneFeature,EditingWorkflow:s.EditingWorkflow,OpenFormStep:c.OpenFormStep,AddTableFeatureStep:c.AddTableFeatureStep}).forEach(function(e){e=a(e,2);e[0],e[1]}),g3wsdk.core.utils),r=i.base,i=i.inherit,o=g3wsdk.core.G3WObject,d=g3wsdk.gui.GUI,f=g3wsdk.core.i18n.tPlugin,i=(i(n,o),n.prototype);i.isMediaField=function(e){for(var t=!1,n=0;n<this.state.headers.length;n++){var i=this.state.headers[n];if(i.name===e&&"media"===i.input.type){t=!0;break}}return t},i.save=function(){this._promise.resolve()},i.cancel=function(){this._promise.reject()},i.deleteFeature=function(a){var s=this,e=l("./editingservice"),t=this._inputs.layer,n=t.getId(),i=t.getChildren().length&&0<e._filterRelationsInEditing({layerId:n,relations:t.getRelations().getArray()}).length;return new Promise(function(r,o){d.dialog.confirm("<h4>"+f("editing.messages.delete_feature")+'</h4>\n      <div style="font-size:1.2em;">'+(i?f("editing.messages.delete_feature_relations"):"")+"</div>",function(e){var t,n,i;(e?(e=s._features.findIndex(function(e){return e.getUid()===a}),t=s._features[e],n=s._context.session,i=s._inputs.layer.getId(),s._inputs.layer.getEditingSource().removeFeature(t),n.pushDelete(i,t),s.state.features.splice(e,1),r):o)()})})},i.copyFeature=function(i){var r=this,o=l("./editingservice");return new Promise(function(t,e){var n=(0,u.cloneFeature)(r._features.find(function(e){return e.getUid()===i}),r._inputs.layer.getEditingLayer());r._workflow=new s.EditingWorkflow({type:"addtablefeature",steps:[new c.AddTableFeatureStep,new c.OpenFormStep]}),r._inputs.features.push(n),r._workflow.start({context:r._context,inputs:r._inputs}).then(function(e){var n=e.features[e.features.length-1],i={};Object.entries(r.state.features[0]).forEach(function(e){var e=a(e,2),t=e[0];e[1];i[t]=o.getFeatureTableFieldValue({layerId:r._layerId,feature:n,property:t})}),i.__gis3w_feature_uid=n.getUid(),r.state.features.push(i),t(i)}).fail(e).always(function(){})})},i.editFeature=function(t){var i=this,r=l("./editingservice"),o=this._features.findIndex(function(e){return e.getUid()===t}),e=this._features[o],n=(this._workflow=new s.EditingWorkflow({type:"edittablefeature",steps:[new c.OpenFormStep]}),this._inputs);n.features.push(e),this._workflow.start({context:this._context,inputs:n}).then(function(e){var n=e.features[e.features.length-1];Object.entries(i.state.features[o]).forEach(function(e){var e=a(e,2),t=e[0];e[1];i.state.features[o][t]=r.getFeatureTableFieldValue({layerId:i._layerId,feature:n,property:t})})}).fail(console.warn).always(function(){return i._workflow.stop()})},i.linkFeatures=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this._promise.resolve({features:e.map(function(e){return t._features[e]})})},i.linkFeature=function(e){this._promise.resolve({features:[this._features[e]]})},e.exports=n},{"../g3wsdk/workflow/workflow":45,"../utils/cloneFeature":56,"../workflows":70,"./editingservice":49}],52:[function(f,e,t){var n=g3wsdk.core.utils,p=n.base,n=n.inherit,r=g3wsdk.gui.GUI,i=g3wsdk.core.G3WObject,o=g3wsdk.core.layer.Layer;function a(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(p(this),this.editingService=f("../services/editingservice"),t.name),i=t.row,r=t.id,o=t.icon,a=t.session,s=t.layer,l=t.once,l=void 0!==l&&l,u=t.type,u=void 0===u?[]:u,c=t.visible,c=void 0===c||c,d=t.conditions,d=void 0===d?{}:d;this._options=null,this._session=a,this._layer=s,this._op=new t.op({layer:s}),this._once=l,this.type=u,this.conditions=d,this.disabledtoolsoftools=[],this.state={id:r,name:n,enabled:!1,visible:c instanceof Function?c(e):c,active:!1,icon:o,message:null,row:i||1,messages:this._op.getMessages()}}n(a,i);n=a.prototype;n.setOptions=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.messages,n=e.enabled,n=void 0!==n&&n,i=e.visible,i=void 0===i||i,e=e.disabledtoolsoftools,e=void 0===e?[]:e;this.state.messages=t||this.state.messages,this.state.visible=i,this.state.enabled=n,this.disabledtoolsoftools=e},n.getLayer=function(){return this._layer},n.getType=function(){return this.type},n.getFeature=function(){return this._options.inputs.features[0]},n.createOperatorOptions=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{features:[]}).features;return{inputs:{layer:this._layer,features:void 0===e?[]:e},context:{session:this._session}}},n.start=function(){function t(e){n._op.once("settoolsoftool",function(e){(e=e.filter(function(e){return!n.disabledtoolsoftools.includes(e.type)})).length&&n.emit("settoolsoftool",e)}),n._op.once("active",function(e){return n.emit("active",e)}),n._op.once("deactive",function(e){return n.emit("deactive",e)}),e.inputs.features=[],i&&r.hideSidebar(),n._op.start(e).then(function(){n._session.save().then(function(){return n.editingService.saveChange()})}).fail(function(){i&&r.showSidebar(),n._session.rollback().then(function(){})}).always(function(){n._once||o.LayerTypes.TABLE===n._layer.getType()?n.stop():t(e)})}var n=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.createOperatorOptions();this._options=e;this._op&&(this.state.active=!0,setTimeout(function(){t(e)}))},n.stop=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=$.Deferred();return this._op?this._op.stop(t).then(function(){}).fail(function(){return e._session.rollback()}).always(function(){e._options=null,e.state.active=!1,e.emit("stop",{session:e._session}),n.resolve()}):(this.emit("stop",{session:this._session}),n.resolve()),n.promise()},n.getState=function(){return this.state},n.setState=function(e){this.state=e},n.getId=function(){return this.state.id},n.setId=function(e){this.state.id=e},n.getName=function(){return this.state.name},n.setActive=function(){this.state.active=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},n.isActive=function(){return this.state.active},n.getIcon=function(){return this.state.icon},n.setIcon=function(e){this.state.icon=e},n.setEnabled=function(){this.state.enabled=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},n.isEnabled=function(){return this.state.enabled},n.setVisible=function(){this.state.visible=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},n.isVisible=function(){return this.state.visible},n.getOperator=function(){return this._op},n.getSession=function(){return this._session},n.setSession=function(e){this._session=e},n.clear=function(){this.state.enabled=!1,this.state.active=!1},n.getMessage=function(){var e=this.getOperator();return e.getHelpMessage()||e.getRunningStep()?this.state.messages:null},n.getHelpMessage=function(){return this.state.messages.help||this.getName()},n.setMessage=function(e){this.state.message=e},n.clearMessage=function(){this.state.message=null},n.resetDefault=function(){this.state.visible=!0,this.state.enabled=!1,this.state.messages=this._op.getMessages(),this.disabledtoolsoftools=[]},e.exports=a},{"../services/editingservice":49}],53:[function(n,e,t){var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=n("../g3wsdk/workflow/workflow"),v=n("../workflows");function y(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}var m=n("../toolboxes/tool"),i=(Object.entries({EditingWorkflow:g.EditingWorkflow,OpenFormStep:v.OpenFormStep,ConfirmStep:v.ConfirmStep,CopyFeaturesFromOtherLayerStep:v.CopyFeaturesFromOtherLayerStep,SelectElementsStep:v.SelectElementsStep,PickFeatureStep:v.PickFeatureStep,ChooseFeatureStep:v.ChooseFeatureStep,AddPartToMultigeometriesStep:v.AddPartToMultigeometriesStep,GetVertexStep:v.GetVertexStep,MoveElementsStep:v.MoveElementsStep,DeletePartFromMultigeometriesStep:v.DeletePartFromMultigeometriesStep,MergeFeaturesStep:v.MergeFeaturesStep,SplitFeatureStep:v.SplitFeatureStep,MoveFeatureStep:v.MoveFeatureStep,ModifyGeometryVertexStep:v.ModifyGeometryVertexStep,Tool:m,AddTableFeatureStep:v.AddTableFeatureStep,OpenTableStep:v.OpenTableStep,AddFeatureStep:v.AddFeatureStep}).forEach(function(e){e=r(e,2);e[0],e[1]}),g3wsdk.core),_=i.ApplicationState,i=i.G3WObject,o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=o.debounce,u=o.toRawType,b=g3wsdk.gui.GUI,c=g3wsdk.core.i18n.tPlugin,w=g3wsdk.core.layer.Layer,d=g3wsdk.core.editing.Session,f=g3wsdk.ol.utils.getScaleFromResolution,k=g3wsdk.core.geometry.Geometry,S=g3wsdk.core.geoutils.isSameBaseGeometryType;function F(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a(this),this.editingService=n("../services/editingservice"),this._mapService=b.getService("map"),this._start=!1,this._constraints=e.constraints||{},this._layer=e.layer,this.uniqueFields=this.getUniqueFieldsType(this._layer.getEditingFields()),this._layerType=e.type||w.LayerTypes.VECTOR,this._loadedExtent=null,this._tools=e.tools,this._getFeaturesOption={},this.constraints={filter:null,show:null,tools:[]},this._session=new d({id:e.id,editor:this._layer.getEditor()}),this._getFeaturesOption={},this._enabledtools,this._disabledtools,this.uniqueFields&&(this.getFieldUniqueValuesFromServer(),this._session.onafter("saveChangesOnServer",function(){t._resetUniqueValues()})),this.state={id:e.id,changingtools:!1,show:!0,color:e.color||"blue",title:e.title||"Edit Layer",customTitle:!1,loading:!1,enabled:!1,toolboxheader:!0,startstopediting:!0,message:null,toolmessages:{help:null},toolsoftool:[],tools:this._tools.map(function(e){return e.getState()}),selected:!1,activetool:null,editing:{session:this._session.state,history:this._session.getHistory().state,on:!1,dependencies:[],relations:[],father:!1,canEdit:!0},layerstate:this._layer.state},this.originalState={title:this.state.title,toolsoftool:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.state.toolsoftool))},this._unregisterStartSettersEventsKey=[],this._tools.forEach(function(e){return e.setSession(t._session)}),this._session.onafter("stop",function(){t.inEditing()&&(_.online&&t.editingService.stopSessionChildren(t.state.id),t._getFeaturesOption.registerEvents)&&t._unregisterGetFeaturesEvent()}),this._session.onafter("start",function(e){e.registerEvents&&(t._getFeaturesEvent={event:null,fnc:null},t._getFeaturesOption=e,t._registerGetFeaturesEvent(t._getFeaturesOption),w.LayerTypes.VECTOR===e.type)&&b.getContentLength()&&b.once("closecontent",function(){setTimeout(function(){t._mapService.getMap().dispatchEvent(t._getFeaturesEvent.event)})})})}s(F,i);o=F.prototype;o.getState=function(){return this.state},o.setShow=function(){this.state.show=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},o.getLayer=function(){return this._layer},o.setFather=function(e){this.state.editing.father=e},o.isFather=function(){return this.state.editing.father},o.addRelations=function(){var t=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){return t.addRelation(e)})},o.revert=function(){return this._session.revert()},o.addRelation=function(e){this.state.editing.relations.push(e)},o.getDependencies=function(){return this.state.editing.dependencies},o.hasDependencies=function(){return 0<this.state.editing.dependencies.length},o.addDependencies=function(e){var t=this;e.forEach(function(e){return t.addDependency(e)})},o.addDependency=function(e){this.state.editing.dependencies.push(e)},o.getFieldUniqueValuesFromServer=function(){var n=this,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).reset,i=void 0!==e&&e;this._layer.getWidgetData({type:"unique",fields:Object.values(this.uniqueFields).map(function(e){return e.name}).join()}).then(function(e){Object.entries(e.data).forEach(function(e){var e=r(e,2),t=e[0],e=e[1];i&&n.uniqueFields[t].input.options.values.splice(0),e.forEach(function(e){return n.uniqueFields[t].input.options.values.push(e)})})}).fail(console.warn)},o.getUniqueFieldsType=function(e){var t={},n=!1;return e.forEach(function(e){e.input&&"unique"===e.input.type&&(t[e.name]=e,n=!0)}),n&&t||null},o._resetUniqueValues=function(){this.getFieldUniqueValuesFromServer({reset:!0})},o.isVectorLayer=function(){return w.LayerTypes.VECTOR===this._layerType},o.setFeaturesOptions=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter;e?(e.nofeatures&&(e.nofeatures_field=e.nofeatures_field||this._layer.getEditingFields()[0].name),this._getFeaturesOption={filter:e,editing:!0,registerEvents:!1},e.constraint&&this.setConstraintFeaturesFilter(e)):this._getFeaturesOption=this.editingService.createEditingDataOptions(w.LayerTypes.TABLE===this._layerType?"all":"bbox",{layerId:this.getId()})},o.setEditingConstraints=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.keys(n).forEach(function(e){return t.constraints[e]=n[e]})},o.setLayerUniqueFieldValues=y(function*(){yield this.editingService.setLayerUniqueFieldValues(this.getId())}),o.clearLayerUniqueFieldsValues=function(){this.editingService.clearLayerUniqueFieldsValues(this.getId())},o.start=function(){function e(e){i.emit(a),i.setLayerUniqueFieldValues().then(y(function*(){var t,n;yield i.editingService.runEventHandler({type:a,id:o}),e.then((n=y(function*(e){i.stopLoading(),i.setEditing(!0),yield i.editingService.runEventHandler({type:"get-features-editing",id:o,options:{features:e}}),r.resolve({features:e})}),function(e){return n.apply(this,arguments)})).fail((t=y(function*(e){b.notify.error(e.message),yield i.editingService.runEventHandler({type:"error-editing",id:o,error:e}),i.stop(),i.stopLoading(),r.reject(e)}),function(e){return t.apply(this,arguments)}))}))}var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=$.Deferred(),o=this.getId(),n=this.editingService.getApplicationEditingConstraintById(o),a="start-editing",s=t.toolboxheader,s=void 0===s||s,l=t.startstopediting,l=void 0===l||l,u=(t.showtools,t.changingtools),c=t.tools,d=t.filter,f=(this.state.changingtools=void 0!==u&&u,c&&this.setEnablesDisablesTools(c),this.state.toolboxheader=s,this.state.startstopediting=l,d=n&&n.filter||this.constraints.filter||d,this.setFeaturesOptions({filter:d}),"featuresLockedByOtherUser"),p=this._layer.getFeaturesStore().onceafter(f,function(){b.showUserMessage({type:"warning",subtitle:i._layer.getName().toUpperCase(),message:"plugins.editing.messages.featureslockbyotheruser"})});this._unregisterStartSettersEventsKey.push(function(){return i._layer.getFeaturesStore().un(f,p)});return this._session&&(this._session.isStarted()?(this._start||(this.startLoading(),this._session.getFeatures(this._getFeaturesOption).then(e),this._start=!0),this.setEditing(!0)):_.ismobile&&this._mapService.isMapHidden()&&w.LayerTypes.VECTOR===this._layerType?(this.setEditing(!0),b.getService("map").onceafter("setHidden",function(){setTimeout(function(){i._start=!0,i.startLoading(),i.setFeaturesOptions({filter:d}),i._session.start(i._getFeaturesOption).then(e).fail(function(){return i.setEditing(!1)})},300)})):(this._start=!0,this.startLoading(),this._session.start(this._getFeaturesOption).then(e))),r.promise()},o.startLoading=function(){this.state.loading=!0},o.stopLoading=function(){this.state.loading=!1},o.getFeaturesOption=function(){return this._getFeaturesOption},o.stop=function(){var t=this,n=$.Deferred();return this.disableCanEditEvent&&this.disableCanEditEvent(),this._unregisterStartSettersEventsKey.forEach(function(e){return e()}),this._unregisterStartSettersEventsKey=[],this._session&&this._session.isStarted()?_.online&&(0<this.editingService.fathersInEditing(this.state.id).length?(this.stopActiveTool(),this.state.editing.on=!1,this.enableTools(!1),this.clearToolboxMessages(),this._unregisterGetFeaturesEvent(),this.editingService.stopSessionChildren(this.state.id),this.setSelected(!1),this.clearLayerUniqueFieldsValues()):this._session.stop().then(function(e){e.then(function(){t._start=!1,t.state.editing.on=!1,t.state.enabled=!1,t.stopLoading(),t._getFeaturesOption={},t.stopActiveTool(),t.enableTools(!1),t.clearToolboxMessages(),t.setSelected(!1),t.emit("stop-editing"),t.clearLayerUniqueFieldsValues(),n.resolve(!0)})}).fail(function(e){return n.reject(e)}).always(function(){return t.setSelected(!1)})):(this.setSelected(!1),n.resolve(!0)),n.promise()},o.save=function(){this._session.commit()},o._unregisterGetFeaturesEvent=function(){this._layerType===w.LayerTypes.VECTOR&&this._mapService.getMap().un(this._getFeaturesEvent.event,this._getFeaturesEvent.fnc)},o._registerGetFeaturesEvent=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._layerType===w.LayerTypes.VECTOR&&n.filter.bbox&&(this._getFeaturesEvent.event="moveend",this._getFeaturesEvent.fnc=l(function(){var e=t.state.editing.canEdit;t._layer.getEditingLayer().setVisible(e),_.online&&e&&0===b.getContentLength()&&(n.filter.bbox=t._mapService.getMapBBOX(),t.state.loading=!0,t._session.getFeatures(n).then(function(e){e.then(function(){return t.state.loading=!1})}))},300),this._mapService.getMap().on("moveend",this._getFeaturesEvent.fnc))},o.setConstraintFeaturesFilter=function(e){this.constraintFeatureFilter=e},o.getEditingConstraints=function(){return this._constraints},o.getEditingConstraint=function(e){return this.getEditingConstraints()[e]},o.canEdit=function(){return this.state.editing.canEdit},o._canEdit=function(){var t,n,e,i=this;this._constraints.scale&&(t=this._constraints.scale,n=(""+c("editing.messages.constraints.enable_editing")+t).toUpperCase(),this.state.editing.canEdit=f(this._mapService.getMap().getView().getResolution())<=t,b.setModal(!this.state.editing.canEdit,n),e=function(e){i.state.editing.canEdit=f(e.target.getResolution())<=t,b.setModal(!i.state.editing.canEdit,n)},this._mapService.getMap().getView().on("change:resolution",e),this.disableCanEditEvent=function(){b.setModal(!1),i._mapService.getMap().getView().un("change:resolution",e)})},o._disableCanEdit=function(){this.state.editing.canEdit=!0,this.disableCanEditEvent&&this.disableCanEditEvent()},o.setMessage=function(e){this.state.message=e},o.getMessage=function(){return this.state.message},o.clearMessage=function(){this.setMessage(null)},o.clearToolboxMessages=function(){this.clearToolMessage(),this.clearMessage()},o.getId=function(){return this.state.id},o.setId=function(e){this.state.id=e},o.getTitle=function(){return this.state.title},o.setTitle=function(e){this.state.customTitle=!0,this.state.title=e},o.getColor=function(){return this.state.color},o.setEditing=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.setEnable(e),this.state.editing.on=e,this.enableTools(e)},o.inEditing=function(){return this.state.editing.on},o.isEnabled=function(){return this.state.enabled},o.setEnable=function(){return this.state.enabled=0<arguments.length&&void 0!==arguments[0]&&arguments[0],this.state.enabled},o.isLoading=function(){return this.state.loading},o.isDirty=function(){return this.state.editing.history.commit},o.isSelected=function(){return this.state.selected},o.setSelected=function(){this.state.selected=0<arguments.length&&void 0!==arguments[0]&&arguments[0],this.state.selected?this._canEdit():this._disableCanEdit()},o.getTools=function(){return this._tools},o.getToolById=function(t){return this._tools.find(function(e){return t===e.getId()})},o.setEnableTool=function(t){this._tools.find(function(e){return e.getId()===t}).setEnabled(!0)},o.setAddEnableTools=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.tools,n=void 0===t?{}:t,t=e.options,e=(void 0===t?{editing_constraints:!0}:t).editing_constraints,i=void 0!==e&&e,r=["addfeature","editattributes","movefeature","movevertex"],t=this._tools.filter(function(e){return i?e.getType().find(function(e){return"add_feature"===e}):-1!==r.indexOf(e.getId())}).map(function(e){e=e.getId();return{id:e,options:n[e]}});this.setEnablesDisablesTools({enabled:t}),this.enableTools(!0)},o.setUpdateEnableTools=function(e){var t=e.tools,n=void 0===t?{}:t,t=e.excludetools,i=void 0===t?[]:t,t=e.options,e=(void 0===t?{editing_constraints:!0}:t).editing_constraints,r=void 0!==e&&e,o=["editattributes","movefeature","movevertex"],t=this._tools.filter(function(e){return-1===i.indexOf(e.getId())&&(r?e.getType().find(function(e){return"change_feature"===e||"change_attr_feature"===e}):-1!==o.indexOf(e.getId()))}).map(function(e){e=e.getId();return{id:e,options:n[e]}});this.setEnablesDisablesTools({enabled:t}),this.enableTools(!0)},o.setDeleteEnableTools=function(){},o.setEnablesDisablesTools=function(e){var t,r,o=this;e&&(this.state.changingtools=!0,t=e.enabled,e=void 0===(e=e.disabled)?[]:e,r=(t=void 0===t?[]:t).length?[]:this._tools.map(function(e){return e.getId()}),t.forEach(function(e){var t,n=e.id,e=e.options,e=void 0===e?{}:e,i=o.getToolById(n);i&&(t=void 0!==(t=e.active)&&t,i.setOptions(e),i.isVisible()&&r.push(n),t&&o.setActiveTool(i),void 0===o._enabledtools&&(o._enabledtools=[]),o._enabledtools.push(i))}),e.forEach(function(e){var t=e.id;e.options;o.getToolById(t)&&(void 0===o._disabledtools&&(o._disabledtools=[]),o._disabledtools.push(t),r.push(t))}),this._tools.forEach(function(e){return!r.includes(e.getId())&&e.setVisible(!1)}),this.state.changingtools=!1)},o.enableTools=function(){var n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this._enabledtools||this._tools,i=this._disabledtools||[];e.forEach(function(e){var t=e.conditions.enabled,t=void 0===t?n:t,t=n&&i.length?-1===i.indexOf(e.getId()):"Boolean"===u(t)?t:t({bool:n,tool:e});e.setEnabled(t),n||e.setActive(n)})},o.setActiveTool=function(t){var i=this;this.stopActiveTool(t).then(function(){i.clearToolsOfTool(),(i.state.activetool=t).once("settoolsoftool",function(e){return e.forEach(function(e){return i.state.toolsoftool.push(e)})});function e(t,n){i.state.toolsoftool.forEach(function(e){-1!==t.indexOf(e.type)&&(e.options.active=n)})}t.on("active",function(){return e(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],!0)}),t.on("deactive",function(){return e(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],!1)}),t.start(i._mapService.isMapHidden()),i.setToolMessage(i.getToolMessage())})},o.clearToolsOfTool=function(){this.state.toolsoftool.splice(0)},o.getActiveTool=function(){return this.state.activetool},o.restartActiveTool=function(){var e=this.getActiveTool();this.stopActiveTool(),this.setActiveTool(e)},o.stopActiveTool=function(e){var t=this,n=$.Deferred(),i=this.getActiveTool();return i&&e!==i?(i.removeAllListeners(),i.stop(!0).then(function(){t.clearToolsOfTool(),t.clearToolMessage(),t.state.activetool=null,setTimeout(n.resolve)})):(e&&e.removeAllListeners(),n.resolve()),n.promise()},o.clearToolMessage=function(){this.state.toolmessages.help=null},o.getToolMessage=function(){return this.getActiveTool().getMessage()},o.setToolMessage=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.state.toolmessages.help=e&&e.help||null},o.getSession=function(){return this._session},o.getEditor=function(){return this._editor},o.setEditor=function(e){this._editor=e},o.hasChildren=function(){return this._layer.hasChildren()},o.hasFathers=function(){return this._layer.hasFathers()},o.hasRelations=function(){return this._layer.hasRelations()},o.resetDefault=function(){this.state.title=this.originalState.title,this.state.toolboxheader=!0,this.state.startstopediting=!0,this.constraints={filter:null,show:null,tools:[]},this._enabledtools&&(this._enabledtools=void 0,this.enableTools(),this._tools.forEach(function(e){return e.resetDefault()})),this._disabledtools=null,this.setShow(!0)},F.create=function(e){var n,i,r,o,t=e.getEditingCapabilities(),a=e.getType(),s=void 0===a||w.LayerTypes.VECTOR===a,l=s&&e.getGeometryType(),u=s&&k.isPointGeometryType(l),c=s&&k.isLineGeometryType(l),d=s&&k.isPolygonGeometryType(l),f=w.LayerTypes.TABLE===a,l=l&&k.isMultiGeometry(l),u=s&&(u?"Point":c?"Line":"Polygon");return new F({id:e.getId(),color:e.getColor(),type:a,layer:e,lngTitle:"editing.toolbox.title",title:" "+e.getTitle(),constraints:e.getEditingConstrains(),tools:[s&&{id:"addfeature",type:["add_feature"],name:"editing.tools.add_feature",icon:"add"+u+".png",layer:e,row:1,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new g.EditingWorkflow(h({},e,{type:"addfeature",steps:[new v.AddFeatureStep(e),new v.OpenFormStep(e)]}));return e.addToolsOfTools({step:e.getStep(0),tools:["snap","measure"]}),e}},s&&{id:"editattributes",type:["change_attr_feature"],name:"editing.tools.update_feature",icon:"editAttributes.png",layer:e,row:1,op:function(){return new g.EditingWorkflow(h({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{helpMessage:"editing.tools.update_feature",type:"editfeatureattributes",steps:[new v.PickFeatureStep,new v.ChooseFeatureStep,new v.OpenFormStep]}))}},s&&{id:"deletefeature",type:["delete_feature"],name:"editing.tools.delete_feature",icon:"delete"+u+".png",layer:e,row:1,op:function(){return new g.EditingWorkflow(h({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"deletefeature",steps:[new v.PickFeatureStep,new v.ChooseFeatureStep,new v.DeleteFeatureStep,new v.ConfirmStep({type:"delete"})]}))}},(c||d)&&{id:"movevertex",type:["change_feature"],name:"editing.tools.update_vertex",icon:"moveVertex.png",layer:e,row:1,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new g.EditingWorkflow(h({},e,{type:"modifygeometryvertex",helpMessage:"editing.tools.update_vertex",steps:[new v.PickFeatureStep(e),new v.ChooseFeatureStep,new v.ModifyGeometryVertexStep]}));return e.addToolsOfTools({step:e.getStep(2),tools:["snap","measure"]}),e}},s&&{id:"editmultiattributes",type:["change_attr_feature"],name:"editing.tools.update_multi_features",icon:"multiEditAttributes.png",layer:e,row:2,once:!0,op:function(){return new g.EditingWorkflow(h({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"editmultiattributes",helpMessage:"editing.tools.update_multi_features",registerEscKeyEvent:!0,steps:[new v.SelectElementsStep({type:"multiple",steps:{select:{description:"editing.workflow.steps."+(_.ismobile?"selectDrawBoxAtLeast2Feature":"selectMultiPointSHIFTAtLeast2Feature"),buttonnext:{disabled:!0,condition:function(e){e=e.features;return(void 0===e?[]:e).length<2},done:function(){}},directive:"t-plugin",dynamic:0,done:!1}}}),new v.OpenFormStep({multi:!0})]}))}},s&&{id:"movefeature",type:["change_feature"],name:"editing.tools.move_feature",icon:"move"+u+".png",layer:e,row:2,op:function(){return new g.EditingWorkflow(h({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"movefeature",helpMessage:"editing.tools.move_feature",steps:[new v.PickFeatureStep,new v.ChooseFeatureStep,new v.MoveFeatureStep]}))}},s&&{id:"copyfeaturesfromotherlayer",type:["add_feature"],name:"editing.tools.pastefeaturesfromotherlayers",icon:"pasteFeaturesFromOtherLayers.png",layer:e,once:!0,conditions:{enabled:(a=b.getService("map"),n=e.getId(),i=e.getGeometryType(),r=a.defaultsLayers.selectionLayer.getSource(),o={bool:!1,tool:void 0},function(e){var t=e.bool,e=e.tool;return o.tool=void 0===e?{}:e,r[(o.bool=t)?"on":"un"]("addfeature",p),r[t?"on":"un"]("removefeature",p),p()})},row:2,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new v.OpenFormStep(h({},e,{help:"editing.steps.help.copy"}));return new g.EditingWorkflow(h({},e,{type:"copyfeaturesfromotherlayer",steps:[new v.CopyFeaturesFromOtherLayerStep(h({},e,{help:"editing.steps.help.copy",openFormTask:t.getTask()})),t],registerEscKeyEvent:!0}))}},s&&{id:"copyfeatures",type:["add_feature"],name:"editing.tools.copy",icon:"copy"+u+".png",layer:e,once:!0,row:2,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new g.EditingWorkflow(h({},e,{type:"copyfeatures",steps:[new v.SelectElementsStep(h({},e,{help:"editing.steps.help.copy",type:_.ismobile?"single":"multiple",steps:{select:{description:"editing.workflow.steps."+(_.ismobile?"selectPoint":"selectPointSHIFT"),directive:"t-plugin",done:!1}}}),!0),0<=e.layer.getGeometryType().indexOf("Point")?void 0:new v.GetVertexStep(h({},e,{help:"editing.steps.help.copy",steps:{from:{description:"editing.workflow.steps.selectStartVertex",directive:"t-plugin",done:!1}}}),!0),new v.MoveElementsStep(h({},e,{help:"editing.steps.help.copy",steps:{to:{description:"editing.workflow.steps.selectToPaste",directive:"t-plugin",done:!1}}}),!0)].filter(Boolean),registerEscKeyEvent:!0}))}},s&&l&&{id:"addPart",type:["add_feature","change_feature"],name:"editing.tools.addpart",icon:"addPart.png",layer:e,once:!0,row:3,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=new g.EditingWorkflow(h({},e,{type:"addparttomultigeometries",helpMessage:"editing.tools.addpart",steps:[new v.PickFeatureStep({steps:{select:{description:"editing.workflow.steps.select",directive:"t-plugin",done:!1}}}),new v.ChooseFeatureStep({help:"editing.steps.help.select_element"}),new v.AddFeatureStep(h({},e,{help:"editing.steps.help.select_element",add:!1,steps:{addfeature:{description:"editing.workflow.steps.draw_part",directive:"t-plugin",done:!1}},onRun:function(e){var t=e.inputs;e.context;n.emit("settoolsoftool",[{type:"snap",options:{layerId:t.layer.getId(),source:t.layer.getEditingLayer().getSource(),active:!0}}]),n.emit("active",["snap"])},onStop:function(){n.emit("deactive",["snap"])}})),new v.AddPartToMultigeometriesStep(h({},e,{help:"editing.steps.help.select_element"}))],registerEscKeyEvent:!0}));return n}},s&&l&&{id:"deletePart",type:["change_feature"],name:"editing.tools.deletepart",icon:"deletePart.png",layer:e,row:3,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new g.EditingWorkflow(h({},e,{type:"deletepartfrommultigeometries",steps:[new v.PickFeatureStep,new v.ChooseFeatureStep,new v.DeletePartFromMultigeometriesStep(e)],helpMessage:"editing.tools.deletepart"}))}},(c||d)&&{id:"splitfeature",type:["change_feature"],name:"editing.tools.split",icon:"splitFeatures.png",layer:e,row:3,once:!0,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new g.EditingWorkflow(h({},e,{type:"splitfeature",steps:[new v.SelectElementsStep(h({},e,{help:"editing.steps.help.split",type:_.ismobile?"single":"multiple",steps:{select:{description:"editing.workflow.steps."+(_.ismobile?"selectPoint":"selectPointSHIFT"),directive:"t-plugin",done:!1}}}),!0),new v.SplitFeatureStep(h({},e,{help:"editing.steps.help.split",steps:{draw_line:{description:"editing.workflow.steps.draw_split_line",directive:"t-plugin",done:!1}}}),!0)],registerEscKeyEvent:!0}))}},(c||d)&&{id:"mergefeatures",type:["change_feature"],name:"editing.tools.merge",icon:"mergeFeatures.png",layer:e,row:3,once:!0,op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new g.EditingWorkflow(h({},e,{type:"mergefeatures",steps:[new v.SelectElementsStep(h({},e,{type:"bbox",help:"editing.steps.help.merge",steps:{select:{description:"editing.workflow.steps."+(_.ismobile?"selectDrawBox":"selectSHIFT"),directive:"t-plugin",done:!1}}}),!0),new v.MergeFeaturesStep(h({},e,{help:"editing.steps.help.merge",steps:{choose:{description:"editing.workflow.steps.merge",directive:"t-plugin",done:!1}}}),!0)],registerEscKeyEvent:!0}))}},(c||d)&&{id:"copyfeaturefromexternallayer",type:["add_feature"],name:"editing.tools.copyfeaturefromexternallayer",icon:"copyPolygonFromFeature.png",layer:e,row:3,once:!0,visible:function(t){function n(e){return!(e="VECTOR"===e.getType()&&e.getSource().getFeatures())||!e.length||S(e[0].getGeometry().getType(),r)}var i=b.getService("map"),r=t.getLayer().getGeometryType();return i.onbefore("loadExternalLayer",function(e){return!t.isVisible()&&t.setVisible(n(e))}),i.onafter("unloadExternalLayer",function(e){e=t.isVisible()&&"VECTOR"===e.getType()&&e.getSource().getFeatures();e&&e.length&&S(e[0].getGeometry().getType(),r)&&t.setVisible(i.getExternalLayers().find(function(e){return void 0!==n(e)}))}),!1},op:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new g.EditingWorkflow(h({},e,{type:"addfeaturefrommapvectorlayers",steps:[new v.SelectElementsStep(h({},e,{type:"external",help:"editing.steps.help.copy"}),!1),new v.OpenFormStep(h({},e,{help:"editing.steps.help.copy"}))],registerEscKeyEvent:!0}))}},f&&{id:"addfeature",type:["add_feature"],name:"editing.tools.add_feature",icon:"addTableRow.png",layer:e,op:function(){return new g.EditingWorkflow(h({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"addtablefeature",steps:[new v.AddTableFeatureStep,new v.OpenFormStep]}))}},f&&{id:"edittable",type:["delete_feature","change_attr_feature"],name:"editing.tools.update_feature",icon:"editAttributes.png",layer:e,once:!0,op:function(){return new g.EditingWorkflow(h({type:"edittable"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{backbuttonlabel:"plugins.editing.form.buttons.save_and_back_table",steps:[new v.OpenTableStep]}))}}].filter(function(e){return!(!e||t&&0<!e.type.filter(function(e){return t.includes(e)}).length||(t&&(e.row=1),0))}).map(function(e){return new m(e)})});function p(){var e=o.bool&&0<r.getFeatures().filter(function(e){var t=e.getGeometry()&&e.getGeometry().getType();return e.__layerId!==n&&S(i,t)&&(i===t||k.isMultiGeometry(i)||!k.isMultiGeometry(t))}).length;return o.tool.setEnabled(e),e}},e.exports=F},{"../g3wsdk/workflow/workflow":45,"../services/editingservice":49,"../toolboxes/tool":52,"../workflows":70}],54:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.areCoordinatesEqual=function(e){function t(e){return g3wsdk.core.geoutils.areCoordinatesEqual(i,e)}var n=e.feature,i=e.coordinates,r=n.getGeometry(),e=r.getType();switch(e){case"Polygon":case"MultiLineString":return _.flatMap(r.getCoordinates()).some(t);case"LineString":case"MultiPoint":return r.getCoordinates().some(t);case"MultiPolygon":return r.getPolygons().some(function(e){return _.flatMap(e.getCoordinates()).some(t)});case"Point":return g3wsdk.core.geoutils.areCoordinatesEqual(i,r.getCoordinates());default:return!1}}},{}],55:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.chooseFeatureFromFeatures=function(e){var t=e.features,a=void 0===t?[]:t,s=e.inputs;return new Promise(function(e,t){var n=[],i=new(Vue.extend(l.default))({features:Array.isArray(a)?a:[],feature:n,attributes:s.layer.getEditingFields().map(function(e){return{name:e.name,label:e.label}})}),r=i.$mount().$el,o=g3wsdk.gui.GUI.showModalDialog({title:u("editing.modal.tools.copyfeaturefromprojectlayer.title"),className:"modal-left",closeButton:!1,message:r,buttons:{cancel:{label:"Cancel",className:"btn-danger",callback:function(){t()}},ok:{label:"Ok",className:"btn-success",callback:function(){e(n[0])}}}});o.find("button.btn-success").prop("disabled",!0),i.$watch("feature",function(e){return o.find("button.btn-success").prop("disabled",null===e)})})};var n=e("../components/ChooseFeatureToEdit.vue"),l=(e=n)&&e.__esModule?e:{default:e};var u=g3wsdk.core.i18n.tPlugin},{"../components/ChooseFeatureToEdit.vue":8}],56:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.cloneFeature=function(e,t){e=e.cloneNew(),t=t&&t.getEditingFields().find(function(e){return e.pk});t&&!1===t.editable&&e.set(t.name,null);return e}},{}],57:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertFeaturesGeometryToGeometryTypeOfLayer=function(e){var t=e.features,t=void 0===t?[]:t,n=e.geometryType,i=[];return t.forEach(function(e){var t=e.getGeometry()&&e.getGeometry().getType();n===t?i.push(e):!g3wsdk.core.geoutils.isSameBaseGeometryType(t,n)||!g3wsdk.core.geometry.Geometry.isMultiGeometry(n)&&g3wsdk.core.geometry.Geometry.isMultiGeometry(t)||((t=e.clone()).__layerId=e.__layerId,t.setGeometry(g3wsdk.core.geoutils.convertSingleMultiGeometry(e.getGeometry(),n)),i.push(t))}),i}},{}],58:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateExpressionFields=void 0;n.evaluateExpressionFields=(i=u(function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=e.inputs,t=e.context,a=e.feature,s=[];return o.layer.getFieldsWithValues(a,{exclude:t.excludeFields,get_default_value:void 0!==t.get_default_value&&t.get_default_value}).forEach(function(n){var i,r;n.input.options.default_expression&&(n.input.options.default_expression.apply_on_update||a.isNew())&&s.push(new Promise((i=u(function*(e,t){try{yield g3wsdk.core.input.inputService.handleDefaultExpressionFormInput({field:n,feature:a,qgs_layer_id:o.layer.getId(),parentData:(0,l.getParentFormData)()}),a.set(n.name,n.value),e(a)}catch(e){t(e)}}),function(e,t){return i.apply(this,arguments)}))),n.input.options.filter_expression&&s.push(new Promise((r=u(function*(e,t){try{yield g3wsdk.core.input.inputService.handleFilterExpressionFormInput({field:n,feature:a,qgs_layer_id:o.layer.getId(),parentData:(0,l.getParentFormData)()}),a.set(n.name,n.value),e(a)}catch(e){t(e)}}),function(e,t){return r.apply(this,arguments)})))}),yield Promise.allSettled(s),a}),function(){return i.apply(this,arguments)});var i,l=e("./getParentFormData");function u(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}},{"./getParentFormData":63}],59:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getChildFieldNameFromRelation1_1=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.relation,e=e.field;return t.getPrefix()?e.name.split(t.getPrefix())[1]:e.name}},{}],60:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFeaturesFromSelectionFeatures=function(e){var t=e.layerId,e=e.geometryType;return(0,i.convertFeaturesGeometryToGeometryTypeOfLayer)({geometryType:e,features:g3wsdk.gui.GUI.getService("map").defaultsLayers.selectionLayer.getSource().getFeatures().filter(function(e){return e.__layerId!==t})})};var i=e("./convertFeaturesGeometryToGeometryTypeOfLayer")},{"./convertFeaturesGeometryToGeometryTypeOfLayer":57}],61:[function(d,e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,i;t.getFormFields=(n=function*(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.inputs,n=t.context,r=t.feature,t=t.isChild,o=void 0!==t&&t,a=!1,s=d("../services/editingservice"),l=g3wsdk.core.workflow.WorkflowsStack.getFirst().getInputs().layer.getId(),u=i.layer.getId(),c=[],t=i.layer.getFieldsWithValues(r,{exclude:n.excludeFields,get_default_value:void 0!==n.get_default_value&&n.get_default_value});return t.forEach(function(e){e.validate.unique&&e.editable&&(a=!0,c.push({field:e,_value:r.get(e.name)}))}),c.forEach(function(e){var t=e._value,n=e.field;(o?s.getChildLayerUniqueFieldValues({layerId:u,relationLayerId:l,field:n}):s.getLayerUniqueFieldValues({layerId:u,field:n})).forEach(function(e){n.validate.exclude_values.add(-1===[null,void 0].indexOf(e)?""+e:e)}),i.features.forEach(function(e){e=e.get(n.name);-1===[null,void 0].indexOf(e)&&n.validate.exclude_values.add(""+e)}),n.validate.exclude_values.delete(t)}),a&&(s.subscribe("savedfeature_"+u,e=function(){return c.forEach(function(e){var t=e._value,e=e.field;t!==e.value&&(o?s.changeRelationLayerUniqueFieldValues({layerId:u,relationLayerId:l,field:e,oldValue:t,newValueconvertSingleMultiGeometry:e.value}):s.changeLayerUniqueFieldValues({layerId:u,field:e,oldValue:t,newValue:e.value}))}),!1===o&&s.saveTemporaryRelationsUniqueFieldsValues(u),{once:!0}}),s.subscribe("closeform_"+u,function(){return s.unsubscribe("savedfeature_"+u,e),s.clearTemporaryRelationsUniqueFieldsValues(u),{once:!0}})),t},i=function(){var s=n.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})},function(){return i.apply(this,arguments)})},{"../services/editingservice":49}],62:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotEditableFieldsNoPkValues=function(e){var n=e.layer,i=e.feature;return n.getEditingNotEditableFields().reduce(function(e,t){return e[t]=n.isPkField(t)?null:i.get(t),e},{})}},{}],63:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getParentFormData=function(){var e,t,n,i;if(1<g3wsdk.core.workflow.WorkflowsStack.getLength())return n=g3wsdk.core.workflow.WorkflowsStack.getParent().getInputs(),e=n.features,t=n.layer,n=n.fields,n=void 0===n?[]:n,i=e[e.length-1].clone(),n.forEach(function(e){var t=e.name,e=e.value;i.set(t,e)}),{feature:i,qgs_layer_id:t.getId()}}},{}],64:[function(f,e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,i;t.getRelation1_1ChildFeature=(n=function*(e){var t,n,i=e.relation,r=e.fatherFormRelationField,e=f("../services/editingservice"),o=i.getFather(),a=i.getChild(),s=i.getChildField()[0],l=!1,u=e.getLayerById(a).getEditingSource().readFeatures().find(function(e){return e.get(s)===r.value});if(void 0===(u=void 0===u&&(n=(t=e.getLayerById(a).getFeaturesStore()).oncebefore("featuresLockedByOtherUser",function(e){u=e[0]}),yield e.getLayersDependencyFeatures(o,{feature:new ol.Feature(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},r.name,r.value)),relations:[i]}),t.un("featuresLockedByOtherUser",n),void 0===u)?e.getLayerById(a).getEditingSource().readFeatures().find(function(e){return e.get(s)===r.value}):u))try{var c=e.getProjectLayerById(a),d=(yield g3wsdk.core.data.DataRouterService.getData("search:features",{inputs:{layer:c,formatter:0,filter:g3wsdk.core.utils.createFilterFormInputs({layer:c,search_endpoint:"api",inputs:[{attribute:s,value:r.value}]}),search_endpoint:"api"},outputs:!1})).data;d&&d[0]&&1===d[0].features.length&&(l=!0,u=d[0].features[0])}catch(e){}return{feature:u,locked:l}},i=function(){var s=n.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})},function(e){return i.apply(this,arguments)})},{"../services/editingservice":49}],65:[function(n,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.handleRelation1_1LayerFields=void 0;t.handleRelation1_1LayerFields=(i=r(function*(){var d,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},f=e.layerId,t=e.features,p=void 0===t?[]:t,t=e.fields,h=void 0===t?[]:t,g=e.task;0!==p.length&&(t=(d=n("../services/editingservice")).getRelation1_1ByLayerId(f).map(function(c){return new Promise((t=r(function*(e){var t,n,i,r,o,a,s,l,u;f===c.getFather()&&(t=c.getFatherField()[0],null!==(n=p[0].get(t)))&&(i=c.getChild(),r=c.getChildField()[0],o=d.getLayerById(i).getEditingSource(),a=s=void 0,s=o.readFeatures().find(function(e){return e.get(r)===n}),l=void 0!==d.getRelation1_1EditingLayerFieldsReferredToChildRelation(c).find(function(e){var t=e.name;return h.find(function(e){return e.name==t}).update}),u=void 0===s,l&&(u?((s=new g3wsdk.core.layer.features.Feature).setTemporaryId(),d.getProjectLayerById(i).getEditingFields().forEach(function(e){return s.set(e.name,null)}),s.set(r,h.find(function(e){return t===e.name}).value),o.addFeature(s),a=s):s&&(a=s.clone()),s)&&(d.getRelation1_1EditingLayerFieldsReferredToChildRelation(c).filter(function(e){return e.editable}).forEach(function(e){return a.set((0,v.getChildFieldNameFromRelation1_1)({relation:c,field:e}),p[0].get(e.name))}),u?(d.getLayerById(f).isPkField(t)&&s.set(r,p[0].getId()),g.getContext().session.pushAdd(i,a,!1)):(o.updateFeature(a),g.getContext().session.pushUpdate(i,a,s))),e())}),function(e){return t.apply(this,arguments)}));var t}),yield Promise.allSettled(t))}),function(){return i.apply(this,arguments)});var i,v=n("./getChildFieldNameFromRelation1_1");function r(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}},{"../services/editingservice":49,"./getChildFieldNameFromRelation1_1":59}],66:[function(c,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listenRelation1_1FieldChange=void 0;var n,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=(t.listenRelation1_1FieldChange=(n=h(function*(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.layerId,t=t.fields,l=void 0===t?[]:t,i=[],u=c("../services/editingservice"),n=!0,t=!1,r=void 0;try{for(var o,a=u.getRelation1_1ByLayerId(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=yield*function*(r){var e=r.getChild(),t=r.getFatherField(),o={},a=l.find(function(e){return t.includes(e.name)});if(!a||!u.getLayerById(e))return{v:void 0};var n,s=u.getRelation1_1EditingLayerFieldsReferredToChildRelation(r).reduce(function(e,t){var n=l.find(function(e){return e.name===t.name});return e[n.name]=n.editable,e},{});a.input.options.loading.state="loading",o[a.value]=yield(0,f.getRelation1_1ChildFeature)({relation:r,fatherFormRelationField:a}),a.input.options.loading.state=null,o[a.value].locked&&Object.keys(s).forEach(function(t){return l.find(function(e){return e.name===t}).editable=!1}),i.push(VM.$watch(function(){return a.value},(n=h(function*(e){if(e){if(a.editable=!1,a.input.options.loading.state="loading",void 0===o[a.value])try{o[a.value]=yield(0,f.getRelation1_1ChildFeature)({relation:r,fatherFormRelationField:a})}catch(e){}var e,n=(e=o[a.value]).feature,i=e.locked;Object.keys(s).forEach(function(t){var e=l.find(function(e){return e.name===t});e.editable=!i&&s[t],e.value=n?n.get((0,p.getChildFieldNameFromRelation1_1)({relation:r,field:e})):null})}a.input.options.loading.state=null,a.editable=!0}),function(e){return n.apply(this,arguments)})))}(o.value);if("object"===(void 0===s?"undefined":d(s)))return s.v}}catch(e){t=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(t)throw r}}return i}),function(){return n.apply(this,arguments)}),c("./getRelation1_1ChildFeature")),p=c("./getChildFieldNameFromRelation1_1");function h(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}},{"../services/editingservice":49,"./getChildFieldNameFromRelation1_1":59,"./getRelation1_1ChildFeature":64}],67:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setAndUnsetSelectedFeaturesStyle=function(){function e(){var t=(0,o.setFeaturesSelectedStyle)(r);n.always(function(){r.flat().forEach(function(e){return e.setStyle(t)})})}var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.promise,t=t.inputs,i=t.layer,t=t.features,r=void 0===t?[]:t,t=s.LayerTypes.VECTOR===i.getType(),i=a.getLength();t&&i?setTimeout(function(){e()}):t&&e()};var o=e("./setFeaturesSelectedStyle"),a=g3wsdk.core.workflow.WorkflowsStack,s=g3wsdk.core.layer.Layer},{"./setFeaturesSelectedStyle":68}],68:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setFeaturesSelectedStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];{var t;if(0<e.length)return e=e.flat(),t=function(e){return{originalStyle:e.getStyle(),selectedStyle:g3wsdk.core.geoutils.createSelectedStyle({geometryType:e.getGeometry().getType()})}}(e[0]),e.forEach(function(e){return e.setStyle(t.selectedStyle)}),t.originalStyle}}},{}],69:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setNullMediaFields=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=e.feature;t.getEditingMediaFields({}).forEach(function(e){return n.set(e,null)})}},{}],70:[function(c,R,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SplitFeatureStep=e.SelectElementsStep=e.PickProjectLayerFeaturesStep=e.PickFeatureStep=e.OpenTableStep=e.OpenFormStep=e.MoveFeatureStep=e.MoveElementsStep=e.ModifyGeometryVertexStep=e.MergeFeaturesStep=e.LinkRelationStep=e.GetVertexStep=e.DeletePartFromMultigeometriesStep=e.DeleteFeatureStep=e.CopyFeaturesFromOtherProjectLayerStep=e.CopyFeaturesFromOtherLayerStep=e.ConfirmStep=e.ChooseFeatureStep=e.AddPartToMultigeometriesStep=e.AddFeatureStep=e.AddTableFeatureStep=void 0;var D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},V=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,i=[],r=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(e){t=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(t)throw o}}return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t=function(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e};function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}c("../eventbus");var N=c("../utils/cloneFeature"),U=c("../utils/areCoordinatesEqual"),_=c("../utils/evaluateExpressionFields"),z=c("../utils/getParentFormData"),G=c("../utils/setFeaturesSelectedStyle"),b=c("../utils/setAndUnsetSelectedFeaturesStyle"),q=c("../utils/getFormFields"),H=c("../utils/convertFeaturesGeometryToGeometryTypeOfLayer"),W=c("../utils/setNullMediaFields"),K=c("../utils/getNotEditableFieldsNoPkValues"),X=c("../utils/getFeaturesFromSelectionFeatures"),Z=c("../utils/chooseFeatureFromFeatures"),J=c("../utils/handleRelation1_1LayerFields"),Y=c("../utils/listenRelation1_1FieldChange"),Q=re(c("../components/CopyFeaturesFromOtherLayers.vue")),ee=re(c("../components/CopyFeaturesFromOtherProjectLayer.vue")),te=re(c("../components/SaveAll.vue")),ne=re(c("../components/Table.vue")),ie=c("../interactions/pickfeaturesinteraction"),n=c("../g3wsdk/workflow/task");function re(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var i=s[e](n),r=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}function oe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ae=g3wsdk.core.ApplicationState,se=g3wsdk.core.geometry.Geometry,r=g3wsdk.core.geoutils,le=r.convertSingleMultiGeometry,ue=r.isSameBaseGeometryType,ce=r.multiGeometryToSingleGeometries,de=r.singleGeometriesToMultiGeometry,fe=r.dissolve,pe=r.splitFeatures,he=g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry,ge=g3wsdk.core.layer.Layer,y=g3wsdk.core.layer.features.Feature,ve=g3wsdk.core.project.ProjectsRegistry,m=g3wsdk.gui.GUI,r=g3wsdk.core.workflow,l=r.Step,f=r.WorkflowsStack,r=g3wsdk.core.i18n,ye=r.t,me=r.tPlugin,_e=g3wsdk.core.data.DataRouterService,r=g3wsdk.ol.interactions.measure,be=r.AreaInteraction,we=r.LengthInteraction,r=g3wsdk.ol.interactions,ke=r.PickFeatureInteraction,Se=r.PickCoordinatesInteraction,r=g3wsdk.ol.utils,Fe=r.createMeasureTooltip,xe=r.removeMeasureTooltip,Ce=g3wsdk.constant.G3W_FID,Ee=g3wsdk.core.catalog.CatalogLayersStoresRegistry,r=g3wsdk.gui.vue.Component,Ie=c("../form/editingform");e.AddTableFeatureStep=(i(o,n.EditingTask),t(o,[{key:"run",value:function(e,t){var n=$.Deferred(),i=0<e.features.length?e.features[e.features.length-1]:e.layer.createNewFeature();return i.setTemporaryId(),e.layer.getEditingLayer().getEditingSource().addFeature(i),t.session.pushAdd(e.layer.getId(),i,!1),e.features.push(i),this.setContextGetDefaultValue(!0),n.resolve(e,t),n.promise()}}]),o);function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,o),e.help="editing.steps.help.new",s(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)));return s(e.task=t,new l(e))}e.AddFeatureStep=(i(u,n.EditingTask),t(u,[{key:"run",value:function(n,e){var i,r,o,a=this,s=(this._stopPromise=$.Deferred(),$.Deferred()),t=n.layer,l=t.getEditingLayer(),u=e.session,c=t.getId();return ge.LayerTypes.VECTOR===t.getType()&&((0,b.setAndUnsetSelectedFeaturesStyle)({promise:this._stopPromise,inputs:n}),i=t.getEditingGeometryType(),this.geometryType=se.getOLGeometry(i),r=l.getSource(),o=t.getEditingFields(),e=new ol.source.Vector,this.drawInteraction=new ol.interaction.Draw({type:this.geometryType,source:e,condition:this._condition,freehandCondition:ol.events.condition.never,finishCondition:this._finishCondition}),this.addInteraction(this.drawInteraction),this.drawInteraction.setActive(!0),this.drawInteraction.on("drawstart",function(e){e=e.feature;a.drawingFeature=e,document.addEventListener("keydown",a._delKeyRemoveLastPoint)}),this.drawInteraction.on("drawend",function(t){var e=void 0;a._add?(o.forEach(function(e){t.feature.set(e.name,null)}),(e=new y({feature:t.feature})).setTemporaryId(),r.addFeature(e),u.pushAdd(c,e,!1)):e=t.feature,e=se.addZValueToOLFeatureGeometry({feature:e,geometryType:i}),n.features.push(e),a.setContextGetDefaultValue(!0),a.fireEvent("addfeature",e),s.resolve(n)})),s.promise()}},{key:"addMeasureInteraction",value:function(){var e={projection:this.getMapService().getProjection(),drawColor:"transparent",feature:this.drawingFeature};se.isLineGeometryType(this.geometryType)?this.measureInteraction=new we(e):se.isPolygonGeometryType(this.geometryType)&&(this.measureInteraction=new be(e)),this.measureInteraction&&(this.measureInteraction.setActive(!0),this.addInteraction(this.measureInteraction))}},{key:"removeMeasureInteraction",value:function(){this.measureInteraction&&(this.measureInteraction.clear(),this.removeInteraction(this.measureInteraction),this.measureInteraction=null)}},{key:"removeLastPoint",value:function(){if(this.drawInteraction)try{this.drawInteraction.removeLastPoint()}catch(e){}}},{key:"stop",value:function(){return this.removeInteraction(this.drawInteraction),this.removeMeasureInteraction(),this.drawInteraction=null,this.drawingFeature=null,document.removeEventListener("keydown",this._delKeyRemoveLastPoint),this._stopPromise.resolve(!0),!0}}]),u);function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,u),e.help="editing.steps.help.draw_new_feature",s(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e))),n=(t._add=void 0===e.add||e.add,t._busy=!1,t.drawInteraction,t.measeureInteraction,t.drawingFeature,t._snap=!1!==e.snap,t._finishCondition=e.finishCondition||function(){return!0},t._condition=e.condition||function(){return!0},t._stopPromise,t._delKeyRemoveLastPoint=function(e){return 46===e.keyCode&&t.removeLastPoint()},e.task=t,new l(e));return e.steps&&t.setSteps(e.steps),e.onRun&&t.on("run",e.onRun),e.onStop&&t.on("run",e.onStop),s(t,n)}e.AddPartToMultigeometriesStep=(i(d,n.EditingTask),t(d,[{key:"run",value:function(e,t){var n=$.Deferred(),i=e.layer.getId(),r=e.features[0],o=r.getGeometry(),a=r.clone();return o.setCoordinates([].concat(oe(o.getCoordinates()),oe(e.features[1].getGeometry().getCoordinates()))),(0,_.evaluateExpressionFields)({inputs:e,context:t,feature:r}).finally(function(){t.session.pushUpdate(i,r,a),e.features=[r],n.resolve(e)}),n.promise()}}]),d);function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,d),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e)));return s(e.task=t,new l(e))}e.ChooseFeatureStep=(i(p,n.EditingTask),t(p,[{key:"run",value:function(t){var n=$.Deferred();return 1===t.features.length?n.resolve(t):(0,Z.chooseFeatureFromFeatures)({features:t.features,inputs:t}).then(function(e){t.features=[e],n.resolve(t)}).catch(function(e){n.reject(e)}),n.promise()}},{key:"stop",value:function(){return!0}}]),p);function p(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e)));return s(e.task=t,new l(e))}var Te={delete:{fnc:function(t){var n=c("../services/editingservice"),i=$.Deferred(),e=t.layer,r=e.getEditingLayer(),o=t.features[0],a=e.getId(),e=e.getChildren().length&&0<n._filterRelationsInEditing({layerId:a,relations:e.getRelations().getArray()}).length;return m.dialog.confirm("<h4>"+me("editing.messages.delete_feature")+'</h4>\n                  <div style="font-size:1.2em;">'+(e?me("editing.messages.delete_feature_relations"):"")+"</div>",function(e){e?(r.getSource().removeFeature(o),n.removeLayerUniqueFieldValuesFromFeature({layerId:a,feature:o}),i.resolve(t)):i.reject(t)}),i.promise()}},commit:{fnc:function(e){var t=$.Deferred(),n=e.close,i={SAVE:{label:ye("save"),className:"btn-success",callback:function(){t.resolve(e)}},CANCEL:{label:ye(n?"exitnosave":"annul"),className:"btn-danger",callback:function(){t.reject()}}},r=(n&&(i.CLOSEMODAL={label:ye("annul"),className:"btn-primary",callback:function(){r.modal("hide")}}),m.dialog.dialog({message:e.message,title:me("editing.messages.commit_feature")+" "+e.layer.getName()+"?",buttons:i}));return t.promise()}}};e.ConfirmStep=(i(h,n.EditingTask),t(h,[{key:"run",value:function(e,t){t=this._dialog.fnc(e,t);return e.features&&(0,b.setAndUnsetSelectedFeaturesStyle)({promise:t,inputs:e}),t}},{key:"stop",value:function(){return!0}}]),h);function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,h),s(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e)));return t._dialog=Te[e.type||"default"],s(e.task=t,new l(e))}e.CopyFeaturesFromOtherLayerStep=(i(g,n.EditingTask),t(g,[{key:"run",value:function(n,e){var t,i=this,r=$.Deferred(),s=n.layer,o=s.getGeometryType(),l=s.getId(),u=s.getEditingFields().filter(function(e){return!e.pk}),c=e.session,d=s.getEditingLayer().getSource(),e=(0,X.getFeaturesFromSelectionFeatures)({layerId:l,geometryType:o}),f=[],a={},p=((e||[]).forEach(function(e){var t;void 0===a[e.__layerId]&&(t=!Ee.getLayerById(e.__layerId),a[e.__layerId]={external:t,fields:!t&&Ee.getLayerById(e.__layerId).getFields(),features:[]}),a[e.__layerId].features.push(e)}),Vue.observable({state:!1})),h=new(Vue.extend(Q.default))({layers:a,selectedFeatures:f,editAttributes:p}),o=h.$mount().$el,g=m.showModalDialog({title:me("editing.modal.tools.copyfeaturefromotherlayer.title"),className:"modal-left",closeButton:!1,message:o,buttons:{cancel:{label:"Cancel",className:"btn-danger",callback:function(){r.reject()}},ok:{label:"Ok",className:"btn-success",callback:(t=v(function*(){var o=[],a=!1,t=[];f.forEach(function(e){i.getEditingService().getProjectLayerById(e.__layerId)?t.push(i.getEditingService().getProjectLayerFeatureById({layerId:e.__layerId,fid:e.get(Ce)})):t.push({properties:e.getProperties()})}),(yield Promise.allSettled(t)).forEach(function(e,t){var n,i=e.status,r=e.value;"fulfilled"===i&&(e=f[t],a=void 0!==u.find(function(e){var t=e.name,e=e.validate.required;return void 0===r.properties[t]&&(void 0!==e&&e)}),n=new y({feature:e,properties:u.map(function(e){return e.name})}),u.forEach(function(e){e=e.name;void 0===n.get(e)&&n.set(e,null)}),s.getEditingNotEditableFields().find(function(e){s.isPkField(e)&&n.set(e,null)}),he({feature:n}),n.setTemporaryId(),d.addFeature(n),o.push(n),c.pushAdd(l,n,!1))}),1<o.length&&(p.state&&i.openFormTask?i.openFormTask.updateMulti(!0):a&&m.showUserMessage({type:"warning",message:"plugins.editing.messages.copy_and_paste_from_other_layer_mandatory_fields",autoclose:!0,duration:2e3})),o.forEach(function(e){n.features.push(e),i.fireEvent("addfeature",e)}),h.$destroy(),r.resolve(n)}),function(){return t.apply(this,arguments)})}}});return g.find("button.btn-success").prop("disabled",!0),h.$watch("selectedFeatures",function(e){return g.find("button.btn-success").prop("disabled",0===e.length)}),r.promise()}},{key:"stop",value:function(){return!0}}]),g);function g(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,g),e.help="editing.steps.help.draw_new_feature",s(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e)));return t.openFormTask=e.openFormTask,s(e.task=t,new l(e))}e.CopyFeaturesFromOtherProjectLayerStep=(i(w,n.EditingTask),t(w,[{key:"run",value:function(i,e){var t,a=this,s=$.Deferred(),n=i.features,l=i.layer,u=l.getId(),c=l.getEditingFields().filter(function(e){return!e.pk}),d=e.session,f=l.getEditingLayer().getSource(),p=[],e=new(Vue.extend(ee.default))({fields:this.external?null:Ee.getLayerById(this.copyLayer.getId()).getFields(),features:void 0!==n?n:[],selectedFeatures:p}),n=e.$mount().$el,r=m.showModalDialog({title:me("editing.modal.tools.copyfeaturefromprojectlayer.title"),className:"modal-left",closeButton:!1,message:n,buttons:{cancel:{label:"Cancel",className:"btn-danger",callback:function(){s.reject()}},ok:{label:"Ok",className:"btn-success",callback:(t=v(function*(){var e=[],r=!1;if(p.length){function t(i){c.forEach(function(e){var t=e.name,e=e.validate.required,n=i[t]||null;r=r||null===n&&(void 0!==e&&e),o.set(t,n)});var t=new y({feature:o,properties:c.map(function(e){return e.name})});l.getEditingNotEditableFields().find(function(e){l.isPkField(e)&&t.set(e,null)}),he({feature:t}),t.setTemporaryId(),f.addFeature(t),e.push(t),d.pushAdd(u,t,!1)}var o=p[0];if(a.isVector)if(a.external)t(o.getProperties());else try{var n=yield a.getEditingService().getProjectLayerFeatureById({layerId:a.copyLayer.getId(),fid:o.get(Ce)});n&&t(n.properties)}catch(e){}}e.length&&1===e.length?i.features.push(e[0]):(r&&m.showUserMessage({type:"warning",message:"plugins.editing.messages.copy_and_paste_from_other_layer_mandatory_fields",autoclose:!0,duration:2e3}),i.features.push(e)),e.forEach(function(e){return a.fireEvent("addfeature",e)}),s.resolve(i)}),function(){return t.apply(this,arguments)})}}});return r.find("button.btn-success").prop("disabled",!0),e.$watch("selectedFeatures",function(e){return r.find("button.btn-success").prop("disabled",0===e.length)}),s.promise()}},{key:"stop",value:function(){return!0}}]),w);function w(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,w),e.help="editing.steps.help.draw_new_feature",s(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,e)));return t.copyLayer=e.copyLayer,t.external=e.external,t.isVector=e.isVector,s(e.task=t,new l(e))}e.DeleteFeatureStep=(i(k,n.EditingTask),t(k,[{key:"run",value:function(t,e){var r=c("../services/editingservice"),o=c("../services/relationservice"),n=$.Deferred(),i=t.layer,a=i.getId(),s=e.session,l=t.features[0],u=r._filterRelationsInEditing({layerId:a,relations:i.getRelations()?i.getRelations().getArray():[]}).filter(function(e){var t=r._getRelationId({layerId:a,relation:e}),n=r.getLayerById(t),i=r._getRelationFieldsFromRelation({layerId:t,relation:e}).ownField;return n.getEditingFields().filter(function(e){return i.includes(e.name)}).every(function(e){return!e.validate.required})});return(0<u.length?r.getLayersDependencyFeatures(a,{feature:l,relations:u}):Promise.resolve()).then(function(){var e=r.getRelationsInEditing({layerId:a,relations:u,feature:l});t.features=[l],e.forEach(function(e){for(var t=e.relation,e=e.relations,n=new o(a,{relation:t,relations:e}),i=e.length,r=0;r<i;r++)n.unlinkRelation(0,!1)}),s.pushDelete(a,l),n.resolve(t)}),n.promise()}},{key:"stop",value:function(){return Promise.resolve(!0)}}]),k);function k(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,k),e.help="editing.steps.help.double_click_delete",s(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,e)));return t.drawInteraction=null,t._selectInteraction=null,s(e.task=t,new l(e))}e.DeletePartFromMultigeometriesStep=(i(S,n.EditingTask),t(S,[{key:"run",value:function(n,i){var r=$.Deferred(),e=n.layer,o=n.layer.getEditingLayer(),a=e.getId(),s=i.session,e=n.features,t=n.coordinate,l=e[0],u=l.clone(),e=l.getGeometry(),e=ce(e),c=new ol.source.Vector({features:e.map(function(e){return new ol.Feature(e)})}),d=this.getMap(),f=d.getPixelFromCoordinate(t),p=new ol.layer.Vector({source:c,style:o.getStyle()});return d.addLayer(p),d.once("postrender",function(){var t=!1;d.forEachFeatureAtPixel(f,function(e){t||(c.removeFeature(e),c.getFeatures().length?(e=de(c.getFeatures().map(function(e){return e.getGeometry()})),l.setGeometry(e),(0,_.evaluateExpressionFields)({inputs:n,context:i,feature:l}).finally(function(){s.pushUpdate(a,l,u),r.resolve(n)})):(o.getSource().removeFeature(l),s.pushDelete(a,l),r.resolve(n)),t=!0)},{layerFilter:function(e){return e===p},hitTolerance:1}),d.removeLayer(p),p=null}),r.promise()}}]),S);function S(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,S),s(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,e)));return t.pickFeatureInteraction=null,s(e.task=t,new l(e))}e.GetVertexStep=(i(F,n.EditingTask),t(F,[{key:"run",value:function(t){var n=this,i=$.Deferred(),r=t.features;if(r.length)return this._stopPromise=$.Deferred(),(0,b.setAndUnsetSelectedFeaturesStyle)({promise:this._stopPromise,inputs:t}),this._snapIteraction=new ol.interaction.Snap({features:new ol.Collection(r),edge:!1}),this._drawIteraction=new ol.interaction.Draw({type:"Point",condition:function(e){var t=e.coordinate;return!!r.find(function(e){return(0,U.areCoordinatesEqual)({feature:e,coordinates:t})})}}),this._drawIteraction.on("drawend",function(e){t.coordinates=e.feature.getGeometry().getCoordinates(),n.setUserMessageStepDone("from"),i.resolve(t)}),this.addInteraction(this._drawIteraction),this.addInteraction(this._snapIteraction),i.promise()}},{key:"stop",value:function(){this.removeInteraction(this._drawIteraction),this.removeInteraction(this._snapIteraction),this._snapIteraction=null,this._drawIteraction=null,this._stopPromise.resolve(!0)}}]),F);function F(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,F),e.help="editing.steps.help.select",s(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,e))),n=(t._drawInteraction,t._snapIteraction,t._stopPromise,e.task=t,new l(e));return e.steps&&t.setSteps(e.steps),s(t,n)}e.LinkRelationStep=(i(x,n.EditingTask),t(x,[{key:"run",value:function(t,e){var n=this,i=(m.setModal(!1),$.Deferred()),r=t.layer.getEditingLayer(),o=(this._originalLayerStyle=r.getStyle(),e.beforeRun),o=o&&"function"==typeof o?o():Promise.resolve(),a=e.excludeFeatures,s=e.style;return this._features=r.getSource().getFeatures(),a&&(this._features=this._features.filter(function(i){return Object.entries(a).reduce(function(e,t){var t=V(t,2),n=t[0],t=t[1];return e&&i.get(n)!=t},!0)})),s&&this._features.forEach(function(e){return e.setStyle(s)}),o.then(function(){n.pickFeatureInteraction=new ke({layers:[r],features:n._features}),n.addInteraction(n.pickFeatureInteraction),n.pickFeatureInteraction.on("picked",function(e){e=e.feature;t.features.push(e),m.setModal(!0),i.resolve(t)})}).catch(function(e){return i.reject(e)}),i.promise()}},{key:"stop",value:function(){var t=this;return m.setModal(!0),this.removeInteraction(this.pickFeatureInteraction),this._features.forEach(function(e){return e.setStyle(t._originalLayerStyle)}),this.pickFeatureInteraction=null,this._features=null,!(this._originalLayerStyle=null)}}]),x);function x(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,x),e.help="editing.steps.help.select_feature_to_relation",s(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,e)));return s(e.task=t,new l(e))}e.MergeFeaturesStep=(i(C,n.EditingTask),t(C,[{key:"run",value:function(i,r){var t,o=$.Deferred(),e=i.layer,a=i.features,s=e.getEditingLayer().getSource(),l=e.getId(),u=r.session;return a.length<2?(m.showUserMessage({type:"warning",message:"plugins.editing.messages.select_min_2_features",autoclose:!0}),o.reject()):(0,Z.chooseFeatureFromFeatures)({features:a,inputs:i}).then((t=v(function*(t){var e=a.findIndex(function(e){return t===e}),n=t.clone(),e=fe({features:a,index:e});if(e){try{yield(0,_.evaluateExpressionFields)({inputs:i,context:r,feature:e})}catch(e){}u.pushUpdate(l,e,n),a.filter(function(e){return e!==t}).forEach(function(e){u.pushDelete(l,e),s.removeFeature(e)}),i.features=[t],o.resolve(i)}else m.showUserMessage({type:"warning",message:"plugins.editing.messages.no_feature_selected",autoclose:!0}),o.reject()}),function(e){return t.apply(this,arguments)})).catch(function(){o.reject()}),o.promise()}},{key:"stop",value:function(){this.removeInteraction(this._pickInteraction)}}]),C);function C(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,C),e.help="editing.steps.help.merge",s(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,e))),n=(e.task=t,new l(e));return e.steps&&t.setSteps(e.steps),s(t,n)}e.ModifyGeometryVertexStep=(i(E,n.EditingTask),t(E,[{key:"run",value:function(n,i){var r,o=void 0,a=$.Deferred(),e=n.layer,t=e.getEditingLayer(),s=i.session,l=e.getId(),e=this._feature=n.features[0],t=(this._originalStyle=t.getStyle(),this.deleteVertexKey,e.setStyle(function(){var e=new ol.style.Circle({radius:5,fill:null,stroke:new ol.style.Stroke({color:"orange",width:2})});return[new ol.style.Style({image:e,geometry:function(e){e=e.getGeometry().getCoordinates()[0];return new ol.geom.MultiPoint(e)}}),new ol.style.Style({stroke:new ol.style.Stroke({color:"yellow",width:4})})]}),new ol.Collection(n.features));return this._modifyInteraction=new ol.interaction.Modify({features:t,deleteCondition:this._deleteCondition}),this._modifyInteraction.on("modifystart",function(e){e=e.features.getArray()[0];o=e.clone()}),this.addInteraction(this._modifyInteraction),this._modifyInteraction.on("modifyend",function(e){var t=e.features.getArray()[0];t.getGeometry().getExtent()!==o.getGeometry().getExtent()&&(0,_.evaluateExpressionFields)({inputs:n,context:i,feature:t}).finally(function(){r=t.clone(),s.pushUpdate(l,r,o),n.features.push(r),a.resolve(n)})}),a.promise()}},{key:"addMeasureInteraction",value:function(){var t=this,n=this.getMap();this._modifyInteraction.on("modifystart",function(e){e=e.features.getArray()[0];t.tooltip=Fe({map:n,feature:e})})}},{key:"removeMeasureInteraction",value:function(){var e=this.getMap();this.tooltip&&xe(D({map:e},this.tooltip)),this.tooltip=null}},{key:"stop",value:function(){return this._feature.setStyle(this._originalStyle),this.removeInteraction(this._modifyInteraction),!0}}]),E);function E(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,E),e.snap=void 0===e.snap||e.snap,e.help="editing.steps.help.edit_feature_vertex",s(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,e)));return t.drawInteraction=null,t._originalStyle=null,t._feature=null,t._deleteCondition=e.deleteCondition,t.tooltip,s(e.task=t,new l(e))}e.MoveElementsStep=(i(I,n.EditingTask),t(I,[{key:"getDeltaXY",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,e=function e(t){return Array.isArray(t[0])?e(t[0]):{x:t[0],y:t[1]}}(e.coordinates);return{x:t-e.x,y:n-e.y}}},{key:"run",value:function(u,c){var d=this,f=$.Deferred(),p=u.layer,h=u.features,g=u.coordinates,v=p.getEditingLayer().getSource(),y=p.getId(),m=c.session;return(0,b.setAndUnsetSelectedFeaturesStyle)({promise:f,inputs:u}),this._snapIteraction=new ol.interaction.Snap({source:v,edge:!1}),this._drawInteraction=new ol.interaction.Draw({type:"Point",features:new ol.Collection}),this._drawInteraction.on("drawend",function(e){for(var e=e.feature.getGeometry().getCoordinates(),e=V(e,2),t=e[0],n=e[1],i=g?d.getDeltaXY({x:t,y:n,coordinates:g}):null,r=h.length,o=[],a=0;a<r;a++){var s,l=(0,N.cloneFeature)(h[a],p);i?l.getGeometry().translate(i.x,i.y):(s=l.getGeometry().getCoordinates(),s=d.getDeltaXY({x:t,y:n,coordinates:s}),l.getGeometry().translate(s.x,s.y)),(0,W.setNullMediaFields)({feature:l,layer:p}),o.push((0,_.evaluateExpressionFields)({inputs:u,context:c,feature:l}))}Promise.allSettled(o).then(function(e){return e.forEach(function(e){e.status;var e=e.value,t=(0,K.getNotEditableFieldsNoPkValues)({layer:p,feature:e}),n=m.pushAdd(y,e);Object.entries(t).length&&Object.entries(t).forEach(function(e){var e=V(e,2),t=e[0],e=e[1];return n.set(t,e)}),v.addFeature(n),u.features.push(n)})}).finally(function(){d._steps.to.done=!0,f.resolve(u)})}),this.addInteraction(this._drawInteraction),this.addInteraction(this._snapIteraction),f.promise()}},{key:"stop",value:function(){return this.removeInteraction(this._drawInteraction),this.removeInteraction(this._snapIteraction),this._drawInteraction=null,!(this._snapIteraction=null)}}]),I);function I(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,I),e.help="editing.steps.help.select_vertex_to_paste",s(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,e))),n=(e.task=t,new l(e));return e.steps&&t.setSteps(e.steps),s(t,n)}e.MoveFeatureStep=(i(T,n.EditingTask),t(T,[{key:"run",value:function(n,i){var r=this,o=(this.promise=$.Deferred(),$.Deferred()),e=n.layer,a=i.session,s=e.getId(),e=new ol.Collection(n.features),l=null,u=(this.changeKey=null,!1);return(0,b.setAndUnsetSelectedFeaturesStyle)({promise:this.promise,inputs:n}),this._translateInteraction=new ol.interaction.Translate({features:e,hitTolerance:isMobile&&isMobile.any?10:0}),this.addInteraction(this._translateInteraction),this._translateInteraction.on("translatestart",function(e){e=e.features.getArray()[0];r.changeKey=e.once("change",function(){return u=!0}),l=e.clone()}),this._translateInteraction.on("translateend",function(e){ol.Observable.unByKey(r.changeKey);var t=e.features.getArray()[0];u?(0,_.evaluateExpressionFields)({inputs:n,context:i,feature:t}).finally(function(){var e=t.clone();a.pushUpdate(s,e,l),o.resolve(n)}):o.resolve(n)}),o.promise()}},{key:"stop",value:function(){this.promise.resolve(),this.removeInteraction(this._translateInteraction),this._translateInteraction=null,this.changeKey=null}}]),T);function T(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,T),e.help="editing.steps.help.move",s(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,e)));return t.drawInteraction=null,t.promise,s(e.task=t,new l(e))}var Ae,Le,Oe;e.OpenFormStep=(i(A,n.EditingTask),t(A,[{key:"updateMulti",value:function(){this._multi=0<arguments.length&&void 0!==arguments[0]&&arguments[0]}},{key:"_getForm",value:(Oe=v(function*(e,t){var n,i,r=this,o=(this._session=t.session,this._originalLayer=e.layer,this._editingLayer=this._originalLayer.getEditingLayer(),this._layerName=this._originalLayer.getName(),this._features=this._multi?e.features:[e.features[e.features.length-1]],this._originalFeatures=this._features.map(function(e){return e.clone()}),this._features[0]);return this._isContentChild&&(i=t.fatherValue,n=void 0===i?[]:i,(void 0===(i=t.fatherField)?[]:i).forEach(function(e,t){o.set(e,n[t]),r._originalFeatures[0].set(e,n[t])})),this._fields=yield(0,q.getFormFields)({inputs:e,context:t,feature:o,isChild:this._isContentChild}),this._fields=this._multi?this._fields.map(function(e){e=JSON.parse(JSON.stringify(e));return e.value=null,e.forceNull=!0,e.validate.required=!1,e}).filter(function(e){return!e.pk}):this._fields,this._originalLayer.hasFormStructure()&&(i=this._originalLayer.getEditorFormStructure(),this._editorFormStructure=i.length?i:null),m.showContentFactory("form")}),function(e,t){return Oe.apply(this,arguments)})},{key:"saveAll",value:function(o){var n,a=this;return new Promise((n=v(function*(e,t){var n,i=a.getContext().session,r=a.getInputs();(o=a._multi?o.filter(function(e){return null!==e.value}):o).length&&(yield f.getCurrent().getContextService().saveDefaultExpressionFieldsNotDependencies(),n=[],a._features.forEach(function(e){a._originalLayer.setFieldsWithValues(e,o),n.push(e.clone())}),a._isContentChild&&(r.relationFeatures={newFeatures:n,originalFeatures:a._originalFeatures}),a.fireEvent("saveform",{newFeatures:n,originalFeatures:a._originalFeatures}).then(function(){n.forEach(function(e,t){i.pushUpdate(a.layerId,e,a._originalFeatures[t])}),(0,J.handleRelation1_1LayerFields)({layerId:a.layerId,features:n,fields:o,task:a}).then(function(){a.fireEvent("savedfeature",n),a.fireEvent("savedfeature_"+a.layerId,n),i.save(),e({promise:a.promise})})}))}),function(e,t){return n.apply(this,arguments)}))}},{key:"_saveFeatures",value:(Le=v(function*(e){var t,n=this,i=e.fields,r=e.promise,o=e.session,a=e.inputs;(i=this._multi?i.filter(function(e){return null!==e.value}):i).length?(t=[],m.setLoadingContent(!0),m.disableContent(!0),yield f.getCurrent().getContextService().saveDefaultExpressionFieldsNotDependencies(),m.setLoadingContent(!1),m.disableContent(!1),this._features.forEach(function(e){n._originalLayer.setFieldsWithValues(e,i),t.push(e.clone())}),this._isContentChild&&(a.relationFeatures={newFeatures:t,originalFeatures:this._originalFeatures}),this.fireEvent("saveform",{newFeatures:t,originalFeatures:this._originalFeatures}).then(function(){t.forEach(function(e,t){return o.pushUpdate(n.layerId,e,n._originalFeatures[t])}),(0,J.handleRelation1_1LayerFields)({layerId:n.layerId,features:t,fields:i,task:n}).then(function(){m.setModal(!1),n.fireEvent("savedfeature",t),n.fireEvent("savedfeature_"+n.layerId,t),n._isContentChild&&f.getParents().forEach(function(e){return e.getContextService().setUpdate(!0,{force:!0})}),r.resolve(a)})})):(m.setModal(!1),r.resolve(a))}),function(e){return Le.apply(this,arguments)})},{key:"startForm",value:(Ae=v(function*(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(this.getEditingService().setCurrentLayout(),e.inputs),i=e.context,r=e.promise,o=i.session,e=e.formComponent||Ie,a=yield this._getForm(n,i),s=this._originalFeatures[0],a=(f.getCurrent().setInput({key:"fields",value:this._fields}),a({formComponent:e,title:"plugins.editing.editing_attributes",name:this._layerName,crumb:{title:this._layerName},id:this._generateFormId(this._layerName),dataid:this._layerName,layer:this._originalLayer,isnew:!(1<this._originalFeatures.length)&&s.isNew(),feature:s,parentData:(0,z.getParentFormData)(),fields:this._fields,context_inputs:!this._multi&&this._edit_relations&&{context:i,inputs:n},formStructure:this._editorFormStructure,modal:!0,push:this.push||this._isContentChild,showgoback:void 0!==this.showgoback?this.showgoback:!this._isContentChild,headerComponent:this._saveAll&&te.default,buttons:[{id:"save",title:this._isContentChild?f.getParent().getBackButtonLabel()||"plugins.editing.form.buttons.save_and_back":"plugins.editing.form.buttons.save",type:"save",class:"btn-success",cbk:function(e){t._saveFeatures({fields:e,promise:r,inputs:n,session:i.session})}},{id:"cancel",title:"plugins.editing.form.buttons.cancel",type:"cancel",class:"btn-danger",eventButtons:{update:{false:{id:"close",title:"close",type:"cancel",class:"btn-danger"}}},cbk:function(){t._isContentChild||(m.setModal(!1),t.fireEvent("cancelform",n.features)),r.reject(n)}}]})),e=(this.fireEvent("openform",{layerId:this.layerId,session:o,feature:this._originalFeature,formService:a}),f.getCurrent());e&&e.setContextService(a),this._unwatchs=yield(0,Y.listenRelation1_1FieldChange)({layerId:this.layerId,fields:this._fields})}),function(){return Ae.apply(this,arguments)})},{key:"run",value:function(e,t){var n=$.Deferred(),i=e.layer,r=e.features;return this.promise=n,this._isContentChild=1<f.getLength(),this.layerId=i.getId(),m.setLoadingContent(!1),this.getEditingService().disableMapControlsConflict(!0),(0,b.setAndUnsetSelectedFeaturesStyle)({promise:n,inputs:e}),!this._multi&&Array.isArray(r[r.length-1])?n.resolve():(this.startForm({inputs:e,context:t,promise:n}),this.disableSidebar(!0)),n.promise()}},{key:"_generateFormId",value:function(e){return this._formIdPrefix+e}},{key:"stop",value:function(){this.disableSidebar(!1);var e=this.getEditingService(),t=void 0;(!1===this._isContentChild||2===f.getLength()&&f.getParent().isType("edittable"))&&(e.disableMapControlsConflict(!1),t=f.getCurrent().getContextService()),t&&!1===this._isContentChild&&t.setUpdate(!1,{force:!1}),m.closeForm({pop:this.push||this._isContentChild}),e.resetCurrentLayout(),this.fireEvent("closeform"),this.fireEvent("closeform_"+this.layerId),this.layerId=null,this.promise=null,this._unwatchs.forEach(function(e){return e()}),this._unwatchs=[]}}]),A);function A(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,A),e.help="editing.steps.help.insert_attributes_feature",e.push),t=void 0!==t&&t,n=e.saveAll,n=void 0===n||n,i=e.multi,i=void 0!==i&&i,r=e.showgoback,o=s(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,e));return o.showgoback=r,o.push=t,o._saveAll=n,o._multi=i,o._edit_relations=void 0===e.edit_relations||e._edit_relations,o._formIdPrefix="form_",o.layerId,o._isContentChild=!1,o._features,o._originalLayer,o._editingLayer,o._layerName,o._originalFeatures,o._fields,o._session,o._editorFormStructure,o.promise,o._unwatchs=[],s(e.task=o,new l(e))}function Pe(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=c("../services/tableservice"),i=(g3wsdk.core.utils.base(this),t.service||new n(D({},t))),n=(this.setService(i),new $e({service:i}));this.setInternalComponent(n),n.state=i.state,i.once("ready",function(){return e.emit("ready")}),this.unmount=function(){return i.cancel(),g3wsdk.core.utils.base(this,"unmount")}}var $e=Vue.extend(ne.default);g3wsdk.core.utils.inherit(Pe,r),e.OpenTableStep=(i(L,n.EditingTask),t(L,[{key:"run",value:function(e,t){var n,i=this,r=(this.getEditingService().setCurrentLayout(),$.Deferred()),o=e.layer,a=o.getName(),s=o.getEditingFields(),l=(this._isContentChild=1<f.getLength(),this._isContentChild&&t.excludeFields?t.excludeFields[0]:null),u=this._isContentChild&&t.exclude,c=o.getEditingCapabilities(),o=o.getEditingLayer().readEditingFeatures(),d=(u&&0<o.length&&(n=u.value,o=o.filter(function(e){return e.get(l)!=n})),new Pe({title:""+a,features:o,promise:r,push:this._isContentChild,headers:s,context:t,inputs:e,capabilities:c,fatherValue:t.fatherValue,foreignKey:l}));return m.disableSideBar(!0),m.showUserMessage({type:"loading",message:"plugins.editing.messages.loading_table_data",autoclose:!1,closable:!1}),setTimeout(function(){d.once("ready",function(){return setTimeout(function(){m.closeUserMessage()})}),m.showContent({content:d,push:i._isContentChild,showgoback:!1,closable:!1})},300),r.promise()}},{key:"stop",value:function(){this.disableSidebar(!1),m[this._isContentChild?"popContent":"closeContent"](),this.getEditingService().resetCurrentLayout()}}]),L);function L(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,L),e.help="editing.steps.help.edit_table",s(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,e)));return t._formIdPrefix="form_",s(e.task=t,new l(e))}e.PickFeatureStep=(i(O,n.EditingTask),t(O,[{key:"run",value:function(n,e){var i=this,r=$.Deferred(),t=n.layer.getEditingLayer();return this.pickFeatureInteraction=new ie.PickFeaturesInteraction({layer:t}),this.addInteraction(this.pickFeatureInteraction),this.pickFeatureInteraction.on("picked",function(e){var t=e.features,e=e.coordinate;0===n.features.length&&(n.features=t,n.coordinate=e),(0,b.setAndUnsetSelectedFeaturesStyle)({promise:r,inputs:n}),i._steps&&i.setUserMessageStepDone("select"),r.resolve(n)}),r.promise()}},{key:"stop",value:function(){return this.removeInteraction(this.pickFeatureInteraction),!(this.pickFeatureInteraction=null)}}]),O);function O(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,O),e.help="editing.steps.help.pick_feature",s(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,e))),n=(t._options={highlight:e.highlight||!1,multi:e.multi||!1},t.pickFeatureInteraction=null,t._busy=!1,t._tools=e.tools||[],e.task=t,new l(e));return e.steps&&t.setSteps(e.steps),s(t,n)}var Me;e.PickProjectLayerFeaturesStep=(i(P,n.EditingTask),t(P,[{key:"run",value:function(e,t){var n=$.Deferred();return this.copyLayer&&this.getFeaturesFromLayer({inputs:e,promise:n}),n.promise()}},{key:"getFeaturesFromLayer",value:(Me=v(function*(){var n,o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.inputs,a=e.promise,s=[],l=t.layer.getGeometryType();yield new Promise((n=v(function*(i,e){var r,t;o.isVector&&(o.external?(o.pickInteraction=new ie.PickFeaturesInteraction({layer:o.copyLayer}),o.addInteraction(o.pickInteraction),o.pickInteraction.on("picked",function(e){e=e.features;s=(0,H.convertFeaturesGeometryToGeometryTypeOfLayer)({features:e,geometryType:l}),i()})):(o.pickInteraction=new Se,o.addInteraction(o.pickInteraction),r=ve.getCurrentProject(),o.pickInteraction.once("picked",(t=v(function*(e){e=e.coordinate;try{var t=(yield _e.getData("query:coordinates",{inputs:{coordinates:e,query_point_tolerance:r.getQueryPointTolerance(),layerIds:[o.copyLayer.getId()],multilayers:!1},outputs:null})).data,n=void 0===t?[]:t;n.length&&(s=(0,H.convertFeaturesGeometryToGeometryTypeOfLayer)({features:n[0].features,geometryType:l}))}catch(e){a.reject(e)}finally{i()}}),function(e){return t.apply(this,arguments)}))))}),function(e,t){return n.apply(this,arguments)})),s.length?(t.features=s,a.resolve(t)):(m.showUserMessage({type:"warning",message:"plugins.editing.messages.no_feature_selected",closable:!1,autoclose:!0}),a.reject())}),function(){return Me.apply(this,arguments)})},{key:"stop",value:function(){return this.removeInteraction(this.pickInteraction),!(this.pickInteraction=null)}}]),P);function P(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,P),e.help="editing.steps.help.pick_feature",s(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,e)));return t.copyLayer=e.copyLayer,t.external=e.external,t.isVector=e.isVector,t.pickInteraction=null,s(e.task=t,new l(e))}e.SelectElementsStep=(i(M,n.EditingTask),t(M,[{key:"addSingleSelectInteraction",value:function(){var t,n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.layer,r=e.inputs,o=e.promise,e=e.buttonnext,a=void 0!==e&&e,e=new ie.PickFeaturesInteraction({layer:i.getEditingLayer()});e.on("picked",(t=v(function*(e){var e=e.features,t=void 0;if(1<e.length)try{t=yield(0,Z.chooseFeatureFromFeatures)({features:e,inputs:n.getInputs()})}catch(e){}else t=e[0];t&&(r.features=e=[t],a?n.addRemoveToMultipleSelectFeatures([t],r):(n._originalStyle=(0,G.setFeaturesSelectedStyle)(e),n._steps&&n.setUserMessageStepDone("select"),o.resolve(r)))}),function(e){return t.apply(this,arguments)})),this._selectInteractions.push(e),this.addInteraction(e)}},{key:"addExternalSelectInteraction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.layer,o=e.inputs,a=e.context,s=e.promise,l=(e.buttonnext,r.getGeometryType()),u=r.getId(),c=r.getEditingLayer().getSource(),d=this.getContext().session,e=this.getMapService().getExternalLayers().filter(function(e){var t=!0;return"VECTOR"==e.getType()&&0<(e=e.getSource().getFeatures()).length&&(e=e[0].getGeometry().getType(),t=ue(e,l)),t}),e=new ie.PickFeaturesInteraction({layers:e});e.on("picked",function(t){var e,n,i;0<t.features.length?(e=r.getEditingFields(),(n=t.features[0].getGeometry()).getType()!==l&&t.feature.setGeometry(le(n,l)),i=new y({feature:t.feature,properties:e.map(function(e){return"media"!==e.input.type&&void 0!==t.feature.get(e.name)&&!e.pk||t.feature.set(e.name,null),e.name})}),(0,_.evaluateExpressionFields)({inputs:o,context:a,feature:i}).finally(function(){he({feature:i}),i.setTemporaryId(),c.addFeature(i),d.pushAdd(u,i,!1),o.features.push(i),s.resolve(o)})):s.reject()}),this._selectInteractions.push(e),this.addInteraction(e)}},{key:"addRemoveToMultipleSelectFeatures",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=arguments[1];e.forEach(function(e){var t=n.multipleselectfeatures.indexOf(e);t<0?(n._originalStyle=(0,G.setFeaturesSelectedStyle)([e]),n.multipleselectfeatures.push(e)):(n.multipleselectfeatures.splice(t,1),e.setStyle(n._originalStyle)),i.features=n.multipleselectfeatures}),this._steps.select.buttonnext.disabled=this._steps.select.buttonnext.condition?this._steps.select.buttonnext.condition({features:this.multipleselectfeatures}):0===this.multipleselectfeatures.length,void 0!==this._steps.select.dynamic&&(this._steps.select.dynamic=this.multipleselectfeatures.length)}},{key:"addMultipleSelectInteraction",value:function(){var e,i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.layer,o=t.inputs,a=t.promise,t=t.buttonnext,s=void 0!==t&&t,l=void 0;ae.ismobile?(t=ol.interaction.Draw.createBox(),e=new ol.source.Vector({}),this._vectorLayer=new ol.layer.Vector({source:e}),this.getMap().addLayer(this._vectorLayer),(l=new ol.interaction.Draw({type:"Circle",source:e,geometryFunction:t})).on("drawend",function(e){e=e.feature.getGeometry().getExtent(),e=r.getEditingLayer().getSource().getFeaturesInExtent(e);s?i.addRemoveToMultipleSelectFeatures(e,o):0<e.length?(o.features=e,i._originalStyle=(0,G.setFeaturesSelectedStyle)(e),i._steps&&i.setUserMessageStepDone("select"),setTimeout(function(){return a.resolve(o)},500)):a.reject()})):(l=new ol.interaction.DragBox({condition:ol.events.condition.shiftKeyOnly})).on("boxend",function(e){var t=[],n=l.getGeometry().getExtent();r.getEditingLayer().getSource().forEachFeatureIntersectingExtent(n,function(e){t.push(e)}),s?i.addRemoveToMultipleSelectFeatures(t,o):0<t.length?(o.features=t,i._originalStyle=(0,G.setFeaturesSelectedStyle)(t),i._steps&&i.setUserMessageStepDone("select"),a.resolve(o)):a.reject()}),this._selectInteractions.push(l),this.addInteraction(l)}},{key:"run",value:function(e,t){var n=e.layer,i=$.Deferred();switch(this._type){case"single":this.addSingleSelectInteraction({layer:n,inputs:e,promise:i});break;case"multiple":var r=!!this._steps.select.buttonnext;r&&(this._steps.select.buttonnext.done=function(){return i.resolve(e)}),this.addSingleSelectInteraction({layer:n,inputs:e,promise:i,buttonnext:r}),this.addMultipleSelectInteraction({layer:n,inputs:e,promise:i,buttonnext:r});break;case"bbox":this.addMultipleSelectInteraction({layer:n,inputs:e,promise:i});break;case"external":this.addExternalSelectInteraction({layer:n,inputs:e,context:t,promise:i})}return i.promise()}},{key:"stop",value:function(){var t=this;this._selectInteractions.forEach(function(e){return t.removeInteraction(e)}),this._vectorLayer&&this.getMap().removeLayer(this._vectorLayer),this.getInputs().features.forEach(function(e){return e.setStyle(t._originalStyle)}),this._originalStyle=null,this._vectorLayer=null,this._selectInteractions=[],this.multipleselectfeatures=[]}}]),M);function M(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=(a(this,M),e.help=e.help||"editing.steps.help.select_elements",s(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,e))),i=(n._type=e.type||"bbox",n._selectInteractions=[],n.multipleselectfeatures=[],n._originalStyle,n._vectorLayer,e.task=n,new l(e));return t&&i.on("run",function(){i.emit("next-step",g3wsdk.core.i18n.tPlugin("editing.steps.help.select_elements"))}),e.steps&&n.setSteps(e.steps),s(n,i)}var je;e.SplitFeatureStep=(i(j,n.EditingTask),t(j,[{key:"run",value:function(o,a){var t,s=this,l=$.Deferred(),e=o.layer,u=o.features,e=e.getEditingLayer().getSource(),c=a.session;return this._snapIteraction=new ol.interaction.Snap({source:e,edge:!0}),this._stopPromise=$.Deferred(),(0,b.setAndUnsetSelectedFeaturesStyle)({promise:this._stopPromise,inputs:o}),this._drawInteraction=new ol.interaction.Draw({type:"LineString",features:new ol.Collection,freehandCondition:ol.events.condition.never}),this._drawInteraction.on("drawend",(t=v(function*(e){for(var e=e.feature,i=!1,r=pe({splitfeature:e,features:u}),t=r.length,n=0;n<t;n++)yield*function*(e){var t,e=r[e],n=e.uid,e=e.geometries;1<e.length&&(i=!0,t=u.find(function(e){return e.getUid()===n}),yield s._handleSplitFeature({feature:t,context:a,splittedGeometries:e,inputs:o,session:c}))}(n);i?(m.showUserMessage({type:"success",message:"plugins.editing.messages.splitted",autoclose:!0}),l.resolve(o)):(m.showUserMessage({type:"warning",message:"plugins.editing.messages.nosplittedfeature",autoclose:!0}),l.reject())}),function(e){return t.apply(this,arguments)})),this.addInteraction(this._drawInteraction),this.addInteraction(this._snapIteraction),l.promise()}},{key:"_handleSplitFeature",value:(je=v(function*(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,n=e.inputs,i=e.context,e=e.splittedGeometries,r=void 0===e?[]:e,o=[],a=n.layer,s=i.session,l=a.getEditingLayer().getSource(),u=a.getId(),c=t.clone(),d=(n.features=r.length?[]:n.features,r.length),f=0;f<d;f++){var p=r[f];if(0===f){t.setGeometry(p);try{yield(0,_.evaluateExpressionFields)({inputs:n,context:i,feature:t})}catch(e){}s.pushUpdate(u,t,c)}else{var h=(0,N.cloneFeature)(c,a);h.setGeometry(p),(0,W.setNullMediaFields)({layer:a,feature:h}),(t=new y({feature:h})).setTemporaryId();try{yield(0,_.evaluateExpressionFields)({inputs:n,context:i,feature:t})}catch(e){}var g=(0,K.getNotEditableFieldsNoPkValues)({layer:a,feature:t});Object.entries(g).length?function(){var n=s.pushAdd(u,t);Object.entries(g).forEach(function(e){var e=V(e,2),t=e[0],e=e[1];return n.set(t,e)}),o.push(n),l.addFeature(n)}():(o.push(s.pushAdd(u,t)),l.addFeature(t))}n.features.push(t)}return o}),function(){return je.apply(this,arguments)})},{key:"stop",value:function(){this.removeInteraction(this._drawInteraction),this.removeInteraction(this._snapIteraction),this._drawInteraction=null,this._snapIteraction=null,this._stopPromise.resolve(!0)}}]),j);function j(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(a(this,j),e.help="",s(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,e))),n=(t._stopPromise,e.task=t,new l(e));return e.steps&&t.setSteps(e.steps),s(t,n)}},{"../components/CopyFeaturesFromOtherLayers.vue":9,"../components/CopyFeaturesFromOtherProjectLayer.vue":10,"../components/SaveAll.vue":13,"../components/Table.vue":15,"../eventbus":31,"../form/editingform":32,"../g3wsdk/workflow/task":44,"../interactions/pickfeaturesinteraction":47,"../services/editingservice":49,"../services/relationservice":50,"../services/tableservice":51,"../utils/areCoordinatesEqual":54,"../utils/chooseFeatureFromFeatures":55,"../utils/cloneFeature":56,"../utils/convertFeaturesGeometryToGeometryTypeOfLayer":57,"../utils/evaluateExpressionFields":58,"../utils/getFeaturesFromSelectionFeatures":60,"../utils/getFormFields":61,"../utils/getNotEditableFieldsNoPkValues":62,"../utils/getParentFormData":63,"../utils/handleRelation1_1LayerFields":65,"../utils/listenRelation1_1FieldChange":66,"../utils/setAndUnsetSelectedFeaturesStyle":67,"../utils/setFeaturesSelectedStyle":68,"../utils/setNullMediaFields":69}]},{},[46]);