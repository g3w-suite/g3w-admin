!function(){function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}return e}()({1:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&h&&(g=!1,h.length?v=h.concat(v):m=-1,v.length&&l())}function l(){if(!g){var e=o(s);g=!0;for(var t=v.length;t;){for(h=v,v=[];++m<t;)h&&h[m].run();m=-1,t=v.length}h=null,g=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,v=[],g=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new u(e,t)),1!==v.length||g||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],2:[function(e,t,n){(function(t,i){(function(){function r(e,t){this._id=e,this._clearFn=t}var o=e("process/browser.js").nextTick,a=Function.prototype.apply,s=Array.prototype.slice,l={},u=0;n.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=u++,i=!(arguments.length<2)&&s.call(arguments,1);return l[t]=!0,o(function(){l[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof i?i:function(e){delete l[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:2}],3:[function(e,t,n){function i(e,t){if(t.functional){var n=t.render;t.render=function(t,i){var r=c[e].instances;return i&&r.indexOf(i.parent)<0&&r.push(i.parent),n(t,i)}}else r(t,p,function(){var t=c[e];t.Ctor||(t.Ctor=this.constructor),t.instances.push(this)}),r(t,"beforeDestroy",function(){var t=c[e].instances;t.splice(t.indexOf(this),1)})}function r(e,t,n){var i=e[t];e[t]=i?Array.isArray(i)?i.concat(n):[i,n]:[n]}function o(e){return function(t,n){try{e(t,n)}catch(i){}}}function a(e,t){for(var n in e)n in t||delete e[n];for(var i in t)e[i]=t[i]}function s(e){if(e._u){var t=e._u;return e._u=function(e){try{return t(e,!0)}catch(n){return t(e,null,!0)}},function(){e._u=t}}}var l,u,c=Object.create(null);"undefined"!=typeof window&&(window.__VUE_HOT_MAP__=c);var d=!1,f=!1,p="beforeCreate";n.install=function(e,t){d||(d=!0,l=e.__esModule?e["default"]:e,u=l.version.split(".").map(Number),f=t,l.config._lifecycleHooks.indexOf("init")>-1&&(p="init"),n.compatible=u[0]>=2,!n.compatible)},n.createRecord=function(e,t){if(!c[e]){var n=null;"function"==typeof t&&(n=t,t=n.options),i(e,t),c[e]={Ctor:n,options:t,instances:[]}}},n.isRecorded=function(e){return"undefined"!=typeof c[e]},n.rerender=o(function(e,t){var n=c[e];if(!t)return void n.instances.slice().forEach(function(e){e.$forceUpdate()});if("function"==typeof t&&(t=t.options),n.Ctor)n.Ctor.options.render=t.render,n.Ctor.options.staticRenderFns=t.staticRenderFns,n.instances.slice().forEach(function(e){e.$options.render=t.render,e.$options.staticRenderFns=t.staticRenderFns,e._staticTrees&&(e._staticTrees=[]),Array.isArray(n.Ctor.options.cached)&&(n.Ctor.options.cached=[]),Array.isArray(e.$options.cached)&&(e.$options.cached=[]);var i=s(e);e.$forceUpdate(),e.$nextTick(i)});else if(n.options.render=t.render,n.options.staticRenderFns=t.staticRenderFns,n.options.functional){if(Object.keys(t).length>2)a(n.options,t);else{var i=n.options._injectStyles;if(i){var r=t.render;n.options.render=function(e,t){return i.call(t),r(e,t)}}}n.options._Ctor=null,Array.isArray(n.options.cached)&&(n.options.cached=[]),n.instances.slice().forEach(function(e){e.$forceUpdate()})}}),n.reload=o(function(e,t){var n=c[e];if(t)if("function"==typeof t&&(t=t.options),i(e,t),n.Ctor){u[1]<2&&(n.Ctor.extendOptions=t);var r=n.Ctor["super"].extend(t);r.options._Ctor=n.options._Ctor,n.Ctor.options=r.options,n.Ctor.cid=r.cid,n.Ctor.prototype=r.prototype,r.release&&r.release()}else a(n.options,t);n.instances.slice().forEach(function(e){e.$vnode&&e.$vnode.context&&e.$vnode.context.$forceUpdate()})})},{}],4:[function(e,t,n){(function(e,n){(function(){"use strict";function i(e){return void 0===e||null===e}function r(e){return void 0!==e&&null!==e}function o(e){return e===!0}function a(e){return e===!1}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function l(e){return null!==e&&"object"==typeof e}function u(e){return Hi.call(e).slice(8,-1)}function c(e){return"[object Object]"===Hi.call(e)}function d(e){return"[object RegExp]"===Hi.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return r(e)&&"function"==typeof e.then&&"function"==typeof e["catch"]}function h(e){return null==e?"":Array.isArray(e)||c(e)&&e.toString===Hi?JSON.stringify(e,null,2):String(e)}function v(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function m(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function y(e,t){return Zi.call(e,t)}function _(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}function b(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function w(e,t){return e.bind(t)}function k(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function x(e,t){for(var n in t)e[n]=t[n];return e}function S(e){for(var t={},n=0;n<e.length;n++)e[n]&&x(t,e[n]);return t}function F(e,t,n){}function C(e,t){if(e===t)return!0;var n=l(e),i=l(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),o=Array.isArray(t);if(r&&o)return e.length===t.length&&e.every(function(e,n){return C(e,t[n])});if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every(function(n){return C(e[n],t[n])})}catch(u){return!1}}function E(e,t){for(var n=0;n<e.length;n++)if(C(e[n],t))return n;return-1}function T(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function I(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function A(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function L(e){if(!ur.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}function O(e){return"function"==typeof e&&/native code/.test(e.toString())}function $(e){Vr.push(e),Dr.target=e}function R(){Vr.pop(),Dr.target=Vr[Vr.length-1]}function P(e){return new Br((void 0),(void 0),(void 0),String(e))}function M(e){var t=new Br(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}function j(e){Wr=e}function D(e,t){e.__proto__=t}function V(e,t,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];A(e,o,t[o])}}function B(e,t){if(l(e)&&!(e instanceof Br)){var n;return y(e,"__ob__")&&e.__ob__ instanceof Kr?n=e.__ob__:Wr&&!Cr()&&(Array.isArray(e)||c(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Kr(e)),t&&n&&n.vmCount++,n}}function N(e,t,n,i,r){var o=new Dr,a=Object.getOwnPropertyDescriptor(e,t);if(!a||a.configurable!==!1){var s=a&&a.get,l=a&&a.set;s&&!l||2!==arguments.length||(n=e[t]);var u=!r&&B(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return Dr.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(t)&&q(t))),t},set:function(t){var a=s?s.call(e):n;t===a||t!==t&&a!==a||(i&&i(),s&&!l||(l?l.call(e,t):n=t,u=!r&&B(t),o.notify()))}})}}function U(e,t,n){if((i(e)||s(e))&&Ir("Cannot set reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?(Ir("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):r?(N(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function z(e,t){if((i(e)||s(e))&&Ir("Cannot delete reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&f(t))return void e.splice(t,1);var n=e.__ob__;return e._isVue||n&&n.vmCount?void Ir("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):void(y(e,t)&&(delete e[t],n&&n.dep.notify()))}function q(e){for(var t=void 0,n=0,i=e.length;n<i;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&q(t)}function G(e,t){if(!t)return e;for(var n,i,r,o=Tr?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(i=e[n],r=t[n],y(e,n)?i!==r&&c(i)&&c(r)&&G(i,r):U(e,n,r));return e}function H(e,t,n){return n?function(){var i="function"==typeof t?t.call(n,n):t,r="function"==typeof e?e.call(n,n):e;return i?G(i,r):r}:t?e?function(){return G("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function W(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?K(n):n}function K(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t}function Z(e,t,n,i){var r=Object.create(e||null);return t?(te(i,t,n),x(r,t)):r}function X(e){for(var t in e.components)Y(t)}function Y(e){new RegExp("^[a-zA-Z][\\-\\.0-9_"+lr.source+"]*$").test(e)||Ir('Invalid component name: "'+e+'". Component names should conform to valid custom element name in html5 specification.'),(Wi(e)||sr.isReservedTag(e))&&Ir("Do not use built-in or reserved HTML elements as component id: "+e)}function J(e,t){var n=e.props;if(n){var i,r,o,a={};if(Array.isArray(n))for(i=n.length;i--;)r=n[i],"string"==typeof r?(o=Yi(r),a[o]={type:null}):Ir("props must be strings when using array syntax.");else if(c(n))for(var s in n)r=n[s],o=Yi(s),a[o]=c(r)?r:{type:r};else Ir('Invalid value for option "props": expected an Array or an Object, but got '+u(n)+".",t);e.props=a}}function Q(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(c(n))for(var o in n){var a=n[o];i[o]=c(a)?x({from:o},a):{from:a}}else Ir('Invalid value for option "inject": expected an Array or an Object, but got '+u(n)+".",t)}}function ee(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"==typeof i&&(t[n]={bind:i,update:i})}}function te(e,t,n){c(t)||Ir('Invalid value for option "'+e+'": expected an Object, but got '+u(t)+".",n)}function ne(e,t,n){function i(i){var r=Zr[i]||Yr;s[i]=r(e[i],t[i],n,i)}if(X(t),"function"==typeof t&&(t=t.options),J(t,n),Q(t,n),ee(t),!t._base&&(t["extends"]&&(e=ne(e,t["extends"],n)),t.mixins))for(var r=0,o=t.mixins.length;r<o;r++)e=ne(e,t.mixins[r],n);var a,s={};for(a in e)i(a);for(a in t)y(e,a)||i(a);return s}function ie(e,t,n,i){if("string"==typeof n){var r=e[t];if(y(r,n))return r[n];var o=Yi(n);if(y(r,o))return r[o];var a=Ji(o);if(y(r,a))return r[a];var s=r[n]||r[o]||r[a];return i&&!s&&Ir("Failed to resolve "+t.slice(0,-1)+": "+n,e),s}}function re(e,t,n,i){var r=t[e],o=!y(n,e),a=n[e],s=ce(Boolean,r.type);if(s>-1)if(o&&!y(r,"default"))a=!1;else if(""===a||a===er(e)){var l=ce(String,r.type);(l<0||s<l)&&(a=!0)}if(void 0===a){a=oe(i,r,e);var u=Wr;j(!0),B(a),j(u)}return ae(r,e,a,i,o),a}function oe(e,t,n){if(y(t,"default")){var i=t["default"];return l(i)&&Ir('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof i&&"Function"!==le(t.type)?i.call(e):i}}function ae(e,t,n,i,r){if(e.required&&r)return void Ir('Missing required prop: "'+t+'"',i);if(null!=n||e.required){var o=e.type,a=!o||o===!0,s=[];if(o){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length&&!a;l++){var u=se(n,o[l]);s.push(u.expectedType||""),a=u.valid}}if(!a)return void Ir(de(t,n,s),i);var c=e.validator;c&&(c(n)||Ir('Invalid prop: custom validator check failed for prop "'+t+'".',i))}}function se(e,t){var n,i=le(t);if(Jr.test(i)){var r=typeof e;n=r===i.toLowerCase(),n||"object"!==r||(n=e instanceof t)}else n="Object"===i?c(e):"Array"===i?Array.isArray(e):e instanceof t;return{valid:n,expectedType:i}}function le(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function ue(e,t){return le(e)===le(t)}function ce(e,t){if(!Array.isArray(t))return ue(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(ue(t[n],e))return n;return-1}function de(e,t,n){var i='Invalid prop: type check failed for prop "'+e+'". Expected '+n.map(Ji).join(", "),r=n[0],o=u(t),a=fe(t,r),s=fe(t,o);return 1===n.length&&pe(r)&&!he(r,o)&&(i+=" with value "+a),i+=", got "+o+" ",pe(o)&&(i+="with value "+s+"."),i}function fe(e,t){return"String"===t?'"'+e+'"':"Number"===t?""+Number(e):""+e}function pe(e){var t=["string","number","boolean"];return t.some(function(t){return e.toLowerCase()===t})}function he(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.some(function(e){return"boolean"===e.toLowerCase()})}function ve(e,t,n){$();try{if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{var a=r[o].call(i,e,t,n)===!1;if(a)return}catch(s){me(s,i,"errorCaptured hook")}}me(e,t,n)}finally{R()}}function ge(e,t,n,i,r){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&p(o)&&!o._handled&&(o["catch"](function(e){return ve(e,i,r+" (Promise/async)")}),o._handled=!0)}catch(a){ve(a,i,r)}return o}function me(e,t,n){if(sr.errorHandler)try{return sr.errorHandler.call(null,e,t,n)}catch(i){i!==e&&ye(i,null,"config.errorHandler")}ye(e,t,n)}function ye(e,t,n){if(Ir("Error in "+n+': "'+e.toString()+'"',t),!dr&&!fr||"undefined"==typeof console)throw e}function _e(){to=!1;var e=eo.slice(0);eo.length=0;for(var t=0;t<e.length;t++)e[t]()}function be(e,t){var n;if(eo.push(function(){if(e)try{e.call(t)}catch(i){ve(i,t,"nextTick")}else n&&n(t)}),to||(to=!0,Xr()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}function we(e){ke(e,mo),mo.clear()}function ke(e,t){var n,i,r=Array.isArray(e);if(!(!r&&!l(e)||Object.isFrozen(e)||e instanceof Br)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(r)for(n=e.length;n--;)ke(e[n],t);else for(i=Object.keys(e),n=i.length;n--;)ke(e[i[n]],t)}}function xe(e,t){function n(){var e=arguments,i=n.fns;if(!Array.isArray(i))return ge(i,null,arguments,t,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)ge(r[o],null,e,t,"v-on handler")}return n.fns=e,n}function Se(e,t,n,r,a,s){var l,u,c,d,f;for(l in e)u=c=e[l],d=t[l],f=_o(l),i(c)?Ir('Invalid handler for event "'+f.name+'": got '+String(c),s):i(d)?(i(c.fns)&&(c=e[l]=xe(c,s)),o(f.once)&&(c=e[l]=a(f.name,c,f.capture)),n(f.name,c,f.capture,f.passive,f.params)):c!==d&&(d.fns=c,e[l]=d);for(l in t)i(e[l])&&(f=_o(l),r(f.name,t[l],f.capture))}function Fe(e,t,n){function a(){n.apply(this,arguments),m(s.fns,a)}e instanceof Br&&(e=e.data.hook||(e.data.hook={}));var s,l=e[t];i(l)?s=xe([a]):r(l.fns)&&o(l.merged)?(s=l,s.fns.push(a)):s=xe([l,a]),s.merged=!0,e[t]=s}function Ce(e,t,n){var o=t.options.props;if(!i(o)){var a={},s=e.attrs,l=e.props;if(r(s)||r(l))for(var u in o){var c=er(u),d=u.toLowerCase();u!==d&&s&&y(s,d)&&Ar('Prop "'+d+'" is passed to component '+Or(n||t)+', but the declared prop name is "'+u+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+c+'" instead of "'+u+'".'),Ee(a,l,u,c,!0)||Ee(a,s,u,c,!1)}return a}}function Ee(e,t,n,i,o){if(r(t)){if(y(t,n))return e[n]=t[n],o||delete t[n],!0;if(y(t,i))return e[n]=t[i],o||delete t[i],!0}return!1}function Te(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Ie(e){return s(e)?[P(e)]:Array.isArray(e)?Le(e):void 0}function Ae(e){return r(e)&&r(e.text)&&a(e.isComment)}function Le(e,t){var n,a,l,u,c=[];for(n=0;n<e.length;n++)a=e[n],i(a)||"boolean"==typeof a||(l=c.length-1,u=c[l],Array.isArray(a)?a.length>0&&(a=Le(a,(t||"")+"_"+n),Ae(a[0])&&Ae(u)&&(c[l]=P(u.text+a[0].text),a.shift()),c.push.apply(c,a)):s(a)?Ae(u)?c[l]=P(u.text+a):""!==a&&c.push(P(a)):Ae(a)&&Ae(u)?c[l]=P(u.text+a.text):(o(e._isVList)&&r(a.tag)&&i(a.key)&&r(t)&&(a.key="__vlist"+t+"_"+n+"__"),c.push(a)));return c}function Oe(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}function $e(e){var t=Re(e.$options.inject,e);t&&(j(!1),Object.keys(t).forEach(function(n){N(e,n,t[n],function(){Ir('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',e)})}),j(!0))}function Re(e,t){if(e){for(var n=Object.create(null),i=Tr?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){for(var a=e[o].from,s=t;s;){if(s._provided&&y(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var l=e[o]["default"];n[o]="function"==typeof l?l.call(t):l}else Ir('Injection "'+o+'" not found',t)}}return n}}function Pe(e,t){if(!e||!e.length)return{};for(var n={},i=0,r=e.length;i<r;i++){var o=e[i],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n["default"]||(n["default"]=[])).push(o);else{var s=a.slot,l=n[s]||(n[s]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var u in n)n[u].every(Me)&&delete n[u];return n}function Me(e){return e.isComment&&!e.asyncFactory||" "===e.text}function je(e,t,n){var i,r=Object.keys(t).length>0,o=e?!!e.$stable:!r,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(o&&n&&n!==Gi&&a===n.$key&&!r&&!n.$hasNormal)return n;i={};for(var s in e)e[s]&&"$"!==s[0]&&(i[s]=De(t,s,e[s]))}else i={};for(var l in t)l in i||(i[l]=Ve(t,l));return e&&Object.isExtensible(e)&&(e._normalized=i),A(i,"$stable",o),A(i,"$key",a),A(i,"$hasNormal",r),i}function De(e,t,n){var i=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:Ie(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function Ve(e,t){return function(){return e[t]}}function Be(e,t){var n,i,o,a,s;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),i=0,o=e.length;i<o;i++)n[i]=t(e[i],i);else if("number"==typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(l(e))if(Tr&&e[Symbol.iterator]){n=[];for(var u=e[Symbol.iterator](),c=u.next();!c.done;)n.push(t(c.value,n.length)),c=u.next()}else for(a=Object.keys(e),n=new Array(a.length),i=0,o=a.length;i<o;i++)s=a[i],n[i]=t(e[s],s,i);return r(n)||(n=[]),n._isVList=!0,n}function Ne(e,t,n,i){var r,o=this.$scopedSlots[e];o?(n=n||{},i&&(l(i)||Ir("slot v-bind without argument expects an Object",this),n=x(x({},i),n)),r=o(n)||t):r=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},r):r}function Ue(e){return ie(this.$options,"filters",e,!0)||ir}function ze(e,t){return Array.isArray(e)?e.indexOf(t)===-1:e!==t}function qe(e,t,n,i,r){var o=sr.keyCodes[t]||n;return r&&i&&!sr.keyCodes[t]?ze(r,i):o?ze(o,e):i?er(i)!==t:void 0}function Ge(e,t,n,i,r){if(n)if(l(n)){Array.isArray(n)&&(n=S(n));var o,a=function(a){if("class"===a||"style"===a||Ki(a))o=e;else{var s=e.attrs&&e.attrs.type;o=i||sr.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=Yi(a),u=er(a);if(!(l in o||u in o)&&(o[a]=n[a],r)){var c=e.on||(e.on={});c["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else Ir("v-bind without argument expects an Object or Array value",this);return e}function He(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t?i:(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Ke(i,"__static__"+e,!1),i)}function We(e,t,n){return Ke(e,"__once__"+t+(n?"_"+n:""),!0),e}function Ke(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&Ze(e[i],t+"_"+i,n);else Ze(e,t,n)}function Ze(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Xe(e,t){if(t)if(c(t)){var n=e.on=e.on?x({},e.on):{};for(var i in t){var r=n[i],o=t[i];n[i]=r?[].concat(r,o):o}}else Ir("v-on without argument expects an Object value",this);return e}function Ye(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?Ye(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function Je(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"==typeof i&&i?e[t[n]]=t[n+1]:""!==i&&null!==i&&Ir("Invalid value for dynamic directive argument (expected string or null): "+i,this)}return e}function Qe(e,t){return"string"==typeof e?t+e:e}function et(e){e._o=We,e._n=v,e._s=h,e._l=Be,e._t=Ne,e._q=C,e._i=E,e._m=He,e._f=Ue,e._k=qe,e._b=Ge,e._v=P,e._e=Ur,e._u=Ye,e._g=Xe,e._d=Je,e._p=Qe}function tt(e,t,n,i,r){var a,s=this,l=r.options;y(i,"_uid")?(a=Object.create(i),a._original=i):(a=i,i=i._original);var u=o(l._compiled),c=!u;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||Gi,this.injections=Re(l.inject,i),this.slots=function(){return s.$slots||je(e.scopedSlots,s.$slots=Pe(n,i)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return je(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=je(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var o=ct(a,e,t,n,r,c);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,i){return ct(a,e,t,n,i,c)}}function nt(e,t,n,i,o){var a=e.options,s={},l=a.props;if(r(l))for(var u in l)s[u]=re(u,l,t||Gi);else r(n.attrs)&&rt(s,n.attrs),r(n.props)&&rt(s,n.props);var c=new tt(n,s,o,i,e),d=a.render.call(null,c._c,c);if(d instanceof Br)return it(d,n,c.parent,a,c);if(Array.isArray(d)){for(var f=Ie(d)||[],p=new Array(f.length),h=0;h<f.length;h++)p[h]=it(f[h],n,c.parent,a,c);return p}}function it(e,t,n,i,r){var o=M(e);return o.fnContext=n,o.fnOptions=i,(o.devtoolsMeta=o.devtoolsMeta||{}).renderContext=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function rt(e,t){for(var n in t)e[Yi(n)]=t[n]}function ot(e,t,n,a,s){if(!i(e)){var u=n.$options._base;if(l(e)&&(e=u.extend(e)),"function"!=typeof e)return void Ir("Invalid Component definition: "+String(e),n);var c;if(i(e.cid)&&(c=e,e=yt(c,u),void 0===e))return mt(c,t,n,a,s);t=t||{},rn(e),r(t.model)&&ut(e.options,t);var d=Ce(t,e,s);if(o(e.options.functional))return nt(e,d,t,n,a);var f=t.on;if(t.on=t.nativeOn,o(e.options["abstract"])){var p=t.slot;t={},p&&(t.slot=p)}st(t);var h=e.options.name||s,v=new Br("vue-component-"+e.cid+(h?"-"+h:""),t,(void 0),(void 0),(void 0),n,{Ctor:e,propsData:d,listeners:f,tag:s,children:a},c);return v}}function at(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new e.componentOptions.Ctor(n)}function st(e){for(var t=e.hook||(e.hook={}),n=0;n<ko.length;n++){var i=ko[n],r=t[i],o=wo[i];r===o||r&&r._merged||(t[i]=r?lt(o,r):o)}}function lt(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function ut(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),a=o[i],s=t.model.callback;r(a)?(Array.isArray(a)?a.indexOf(s)===-1:a!==s)&&(o[i]=[s].concat(a)):o[i]=s}function ct(e,t,n,i,r,a){return(Array.isArray(n)||s(n))&&(r=i,i=n,n=void 0),o(a)&&(r=So),dt(e,t,n,i,r)}function dt(e,t,n,i,o){if(r(n)&&r(n.__ob__))return Ir("Avoid using observed data object as vnode data: "+JSON.stringify(n)+"\nAlways create fresh vnode data objects in each render!",e),Ur();if(r(n)&&r(n.is)&&(t=n.is),!t)return Ur();r(n)&&r(n.key)&&!s(n.key)&&Ir("Avoid using non-primitive value as key, use string/number value instead.",e),Array.isArray(i)&&"function"==typeof i[0]&&(n=n||{},n.scopedSlots={"default":i[0]},i.length=0),o===So?i=Ie(i):o===xo&&(i=Te(i));var a,l;if("string"==typeof t){var u;l=e.$vnode&&e.$vnode.ns||sr.getTagNamespace(t),sr.isReservedTag(t)?(r(n)&&r(n.nativeOn)&&Ir("The .native modifier for v-on is only valid on components but it was used on <"+t+">.",e),a=new Br(sr.parsePlatformTagName(t),n,i,(void 0),(void 0),e)):a=n&&n.pre||!r(u=ie(e.$options,"components",t))?new Br(t,n,i,(void 0),(void 0),e):ot(u,n,e,i,t)}else a=ot(t,n,e,i);return Array.isArray(a)?a:r(a)?(r(l)&&ft(a,l),r(n)&&pt(n),a):Ur()}function ft(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),r(e.children))for(var a=0,s=e.children.length;a<s;a++){var l=e.children[a];r(l.tag)&&(i(l.ns)||o(n)&&"svg"!==l.tag)&&ft(l,t,n)}}function pt(e){l(e.style)&&we(e.style),l(e["class"])&&we(e["class"])}function ht(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=Pe(t._renderChildren,i),e.$scopedSlots=Gi,e._c=function(t,n,i,r){return ct(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return ct(e,t,n,i,r,!0)};var r=n&&n.data;N(e,"$attrs",r&&r.attrs||Gi,function(){!Eo&&Ir("$attrs is readonly.",e)},!0),N(e,"$listeners",t._parentListeners||Gi,function(){!Eo&&Ir("$listeners is readonly.",e)},!0)}function vt(e){et(e.prototype),e.prototype.$nextTick=function(e){return be(e,this)},e.prototype._render=function(){var e=this,t=e.$options,n=t.render,i=t._parentVnode;i&&(e.$scopedSlots=je(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;var r;try{Fo=e,r=n.call(e._renderProxy,e.$createElement)}catch(o){if(ve(o,e,"render"),e.$options.renderError)try{r=e.$options.renderError.call(e._renderProxy,e.$createElement,o)}catch(o){ve(o,e,"renderError"),r=e._vnode}else r=e._vnode}finally{Fo=null}return Array.isArray(r)&&1===r.length&&(r=r[0]),r instanceof Br||(Array.isArray(r)&&Ir("Multiple root nodes returned from render function. Render function should return a single root node.",e),r=Ur()),r.parent=i,r}}function gt(e,t){return(e.__esModule||Tr&&"Module"===e[Symbol.toStringTag])&&(e=e["default"]),l(e)?t.extend(e):e}function mt(e,t,n,i,r){var o=Ur();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:i,tag:r},o}function yt(e,t){if(o(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var n=Fo;if(n&&r(e.owners)&&e.owners.indexOf(n)===-1&&e.owners.push(n),o(e.loading)&&r(e.loadingComp))return e.loadingComp;if(n&&!r(e.owners)){var a=e.owners=[n],s=!0,u=null,c=null;n.$on("hook:destroyed",function(){return m(a,n)});var d=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==u&&(clearTimeout(u),u=null),null!==c&&(clearTimeout(c),c=null))},f=T(function(n){e.resolved=gt(n,t),s?a.length=0:d(!0)}),h=T(function(t){Ir("Failed to resolve async component: "+String(e)+(t?"\nReason: "+t:"")),r(e.errorComp)&&(e.error=!0,d(!0))}),v=e(f,h);return l(v)&&(p(v)?i(e.resolved)&&v.then(f,h):p(v.component)&&(v.component.then(f,h),r(v.error)&&(e.errorComp=gt(v.error,t)),r(v.loading)&&(e.loadingComp=gt(v.loading,t),0===v.delay?e.loading=!0:u=setTimeout(function(){u=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,d(!1))},v.delay||200)),r(v.timeout)&&(c=setTimeout(function(){c=null,i(e.resolved)&&h("timeout ("+v.timeout+"ms)")},v.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function _t(e){return e.isComment&&e.asyncFactory}function bt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(r(n)&&(r(n.componentOptions)||_t(n)))return n}}function wt(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Ft(e,t)}function kt(e,t){bo.$on(e,t)}function xt(e,t){bo.$off(e,t)}function St(e,t){var n=bo;return function i(){var r=t.apply(null,arguments);null!==r&&n.$off(e,i)}}function Ft(e,t,n){bo=e,Se(t,n||{},kt,xt,St,e),bo=void 0}function Ct(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(i,arguments)}var i=this;return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var o=n._events[e];if(!o)return n;if(!t)return n._events[e]=null,n;for(var a,s=o.length;s--;)if(a=o[s],a===t||a.fn===t){o.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=e.toLowerCase();n!==e&&t._events[n]&&Ar('Event "'+n+'" is emitted in component '+Or(t)+' but the handler is registered for "'+e+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+er(e)+'" instead of "'+e+'".');var i=t._events[e];if(i){i=i.length>1?k(i):i;for(var r=k(arguments,1),o='event handler for "'+e+'"',a=0,s=i.length;a<s;a++)ge(i[a],t,r,t,o)}return t}}function Et(e){var t=Co;return Co=e,function(){Co=t}}function Tt(e){var t=e.$options,n=t.parent;if(n&&!t["abstract"]){for(;n.$options["abstract"]&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function It(e){e.prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,o=Et(n);n._vnode=e,r?n.$el=n.__patch__(r,e):n.$el=n.__patch__(n.$el,e,t,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Pt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options["abstract"]||m(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();
e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Pt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function At(e,t,n){e.$el=t,e.$options.render||(e.$options.render=Ur,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||t?Ir("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):Ir("Failed to mount component: template or render function not defined.",e)),Pt(e,"beforeMount");var i;return i=sr.performance&&vo?function(){var t=e._name,i=e._uid,r="vue-perf-start:"+i,o="vue-perf-end:"+i;vo(r);var a=e._render();vo(o),go("vue "+t+" render",r,o),vo(r),e._update(a,n),vo(o),go("vue "+t+" patch",r,o)}:function(){e._update(e._render(),n)},new Bo(e,i,F,{before:function(){e._isMounted&&!e._isDestroyed&&Pt(e,"beforeUpdate")}},(!0)),n=!1,null==e.$vnode&&(e._isMounted=!0,Pt(e,"mounted")),e}function Lt(e,t,n,i,r){Eo=!0;var o=i.data.scopedSlots,a=e.$scopedSlots,s=!!(o&&!o.$stable||a!==Gi&&!a.$stable||o&&e.$scopedSlots.$key!==o.$key),l=!!(r||e.$options._renderChildren||s);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=r,e.$attrs=i.data.attrs||Gi,e.$listeners=n||Gi,t&&e.$options.props){j(!1);for(var u=e._props,c=e.$options._propKeys||[],d=0;d<c.length;d++){var f=c[d],p=e.$options.props;u[f]=re(f,p,t,e)}j(!0),e.$options.propsData=t}n=n||Gi;var h=e.$options._parentListeners;e.$options._parentListeners=n,Ft(e,n,h),l&&(e.$slots=Pe(r,i.context),e.$forceUpdate()),Eo=!1}function Ot(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function $t(e,t){if(t){if(e._directInactive=!1,Ot(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)$t(e.$children[n]);Pt(e,"activated")}}function Rt(e,t){if(!(t&&(e._directInactive=!0,Ot(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Rt(e.$children[n]);Pt(e,"deactivated")}}function Pt(e,t){$();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,o=n.length;r<o;r++)ge(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),R()}function Mt(){Po=Io.length=Ao.length=0,Lo={},Oo={},$o=Ro=!1}function jt(){Mo=jo(),Ro=!0;var e,t;for(Io.sort(function(e,t){return e.id-t.id}),Po=0;Po<Io.length;Po++)if(e=Io[Po],e.before&&e.before(),t=e.id,Lo[t]=null,e.run(),null!=Lo[t]&&(Oo[t]=(Oo[t]||0)+1,Oo[t]>To)){Ir("You may have an infinite update loop "+(e.user?'in watcher with expression "'+e.expression+'"':"in a component render function."),e.vm);break}var n=Ao.slice(),i=Io.slice();Mt(),Bt(n),Dt(i),Er&&sr.devtools&&Er.emit("flush")}function Dt(e){for(var t=e.length;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Pt(i,"updated")}}function Vt(e){e._inactive=!1,Ao.push(e)}function Bt(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,$t(e[t],!0)}function Nt(e){var t=e.id;if(null==Lo[t]){if(Lo[t]=!0,Ro){for(var n=Io.length-1;n>Po&&Io[n].id>e.id;)n--;Io.splice(n+1,0,e)}else Io.push(e);if(!$o){if($o=!0,!sr.async)return void jt();be(jt)}}}function Ut(e,t,n){No.get=function(){return this[t][n]},No.set=function(e){this[t][n]=e},Object.defineProperty(e,n,No)}function zt(e){e._watchers=[];var t=e.$options;t.props&&qt(e,t.props),t.methods&&Yt(e,t.methods),t.data?Gt(e):B(e._data={},!0),t.computed&&Wt(e,t.computed),t.watch&&t.watch!==br&&Jt(e,t.watch)}function qt(e,t){var n=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[],o=!e.$parent;o||j(!1);var a=function(a){r.push(a);var s=re(a,t,n,e),l=er(a);(Ki(l)||sr.isReservedAttr(l))&&Ir('"'+l+'" is a reserved attribute and cannot be used as component prop.',e),N(i,a,s,function(){o||Eo||Ir("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+a+'"',e)}),a in e||Ut(e,"_props",a)};for(var s in t)a(s);j(!0)}function Gt(e){var t=e.$options.data;t=e._data="function"==typeof t?Ht(t,e):t||{},c(t)||(t={},Ir("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));for(var n=Object.keys(t),i=e.$options.props,r=e.$options.methods,o=n.length;o--;){var a=n[o];r&&y(r,a)&&Ir('Method "'+a+'" has already been defined as a data property.',e),i&&y(i,a)?Ir('The data property "'+a+'" is already declared as a prop. Use prop default value instead.',e):I(a)||Ut(e,"_data",a)}B(t,!0)}function Ht(e,t){$();try{return e.call(t,t)}catch(n){return ve(n,t,"data()"),{}}finally{R()}}function Wt(e,t){var n=e._computedWatchers=Object.create(null),i=Cr();for(var r in t){var o=t[r],a="function"==typeof o?o:o.get;null==a&&Ir('Getter is missing for computed property "'+r+'".',e),i||(n[r]=new Bo(e,a||F,F,Uo)),r in e?r in e.$data?Ir('The computed property "'+r+'" is already defined in data.',e):e.$options.props&&r in e.$options.props&&Ir('The computed property "'+r+'" is already defined as a prop.',e):Kt(e,r,o)}}function Kt(e,t,n){var i=!Cr();"function"==typeof n?(No.get=i?Zt(t):Xt(n),No.set=F):(No.get=n.get?i&&n.cache!==!1?Zt(t):Xt(n.get):F,No.set=n.set||F),No.set===F&&(No.set=function(){Ir('Computed property "'+t+'" was assigned to but it has no setter.',this)}),Object.defineProperty(e,t,No)}function Zt(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Dr.target&&t.depend(),t.value}}function Xt(e){return function(){return e.call(this,this)}}function Yt(e,t){var n=e.$options.props;for(var i in t)"function"!=typeof t[i]&&Ir('Method "'+i+'" has type "'+typeof t[i]+'" in the component definition. Did you reference the function correctly?',e),n&&y(n,i)&&Ir('Method "'+i+'" has already been defined as a prop.',e),i in e&&I(i)&&Ir('Method "'+i+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),e[i]="function"!=typeof t[i]?F:tr(t[i],e)}function Jt(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)Qt(e,n,i[r]);else Qt(e,n,i)}}function Qt(e,t,n,i){return c(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,i)}function en(e){var t={};t.get=function(){return this._data};var n={};n.get=function(){return this._props},t.set=function(){Ir("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){Ir("$props is readonly.",this)},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=U,e.prototype.$delete=z,e.prototype.$watch=function(e,t,n){var i=this;if(c(t))return Qt(i,e,t,n);n=n||{},n.user=!0;var r=new Bo(i,e,t,n);if(n.immediate)try{t.call(i,r.value)}catch(o){ve(o,i,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}function tn(e){e.prototype._init=function(e){var t=this;t._uid=zo++;var n,i;sr.performance&&vo&&(n="vue-perf-start:"+t._uid,i="vue-perf-end:"+t._uid,vo(n)),t._isVue=!0,e&&e._isComponent?nn(t,e):t.$options=ne(rn(t.constructor),e||{},t),ao(t),t._self=t,Tt(t),wt(t),ht(t),Pt(t,"beforeCreate"),$e(t),zt(t),Oe(t),Pt(t,"created"),sr.performance&&vo&&(t._name=Or(t,!1),vo(i),go("vue "+t._name+" init",n,i)),t.$options.el&&t.$mount(t.$options.el)}}function nn(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function rn(e){var t=e.options;if(e["super"]){var n=rn(e["super"]),i=e.superOptions;if(n!==i){e.superOptions=n;var r=on(e);r&&x(e.extendOptions,r),t=e.options=ne(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function on(e){var t,n=e.options,i=e.sealedOptions;for(var r in n)n[r]!==i[r]&&(t||(t={}),t[r]=n[r]);return t}function an(e){this instanceof an||Ir("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function sn(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=k(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}function ln(e){e.mixin=function(e){return this.options=ne(this.options,e),this}}function un(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var o=e.name||n.options.name;o&&Y(o);var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=ne(n.options,e),a["super"]=n,a.options.props&&cn(a),a.options.computed&&dn(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,or.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=x({},a.options),r[i]=a,a}}function cn(e){var t=e.options.props;for(var n in t)Ut(e.prototype,"_props",n)}function dn(e){var t=e.options.computed;for(var n in t)Kt(e.prototype,n,t[n])}function fn(e){or.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&Y(e),"component"===t&&c(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}function pn(e){return e&&(e.Ctor.options.name||e.tag)}function hn(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function vn(e,t){var n=e.cache,i=e.keys,r=e._vnode;for(var o in n){var a=n[o];if(a){var s=pn(a.componentOptions);s&&!t(s)&&gn(n,o,i,r)}}}function gn(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,m(n,t)}function mn(e){var t={};t.get=function(){return sr},t.set=function(){Ir("Do not replace the Vue.config object, set individual fields instead.")},Object.defineProperty(e,"config",t),e.util={warn:Ir,extend:x,mergeOptions:ne,defineReactive:N},e.set=U,e["delete"]=z,e.nextTick=be,e.observable=function(e){return B(e),e},e.options=Object.create(null),or.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,x(e.options.components,Ho),sn(e),ln(e),un(e),fn(e)}function yn(e){for(var t=e.data,n=e,i=e;r(i.componentInstance);)i=i.componentInstance._vnode,i&&i.data&&(t=_n(i.data,t));for(;r(n=n.parent);)n&&n.data&&(t=_n(t,n.data));return bn(t.staticClass,t["class"])}function _n(e,t){return{staticClass:wn(e.staticClass,t.staticClass),"class":r(e["class"])?[e["class"],t["class"]]:t["class"]}}function bn(e,t){return r(e)||r(t)?wn(e,kn(t)):""}function wn(e,t){return e?t?e+" "+t:e:t||""}function kn(e){return Array.isArray(e)?xn(e):l(e)?Sn(e):"string"==typeof e?e:""}function xn(e){for(var t,n="",i=0,o=e.length;i<o;i++)r(t=kn(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Sn(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function Fn(e){return ua(e)?"svg":"math"===e?"math":void 0}function Cn(e){if(!dr)return!0;if(ca(e))return!1;if(e=e.toLowerCase(),null!=da[e])return da[e];var t=document.createElement(e);return e.indexOf("-")>-1?da[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:da[e]=/HTMLUnknownElement/.test(t.toString())}function En(e){if("string"==typeof e){var t=document.querySelector(e);return t?t:(Ir("Cannot find element: "+e),document.createElement("div"))}return e}function Tn(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function In(e,t){return document.createElementNS(sa[e],t)}function An(e){return document.createTextNode(e)}function Ln(e){return document.createComment(e)}function On(e,t,n){e.insertBefore(t,n)}function $n(e,t){e.removeChild(t)}function Rn(e,t){e.appendChild(t)}function Pn(e){return e.parentNode}function Mn(e){return e.nextSibling}function jn(e){return e.tagName}function Dn(e,t){e.textContent=t}function Vn(e,t){e.setAttribute(t,"")}function Bn(e,t){var n=e.data.ref;if(r(n)){var i=e.context,o=e.componentInstance||e.elm,a=i.$refs;t?Array.isArray(a[n])?m(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}function Nn(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&r(e.data)===r(t.data)&&Un(e,t)||o(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function Un(e,t){if("input"!==e.tag)return!0;var n,i=r(n=e.data)&&r(n=n.attrs)&&n.type,o=r(n=t.data)&&r(n=n.attrs)&&n.type;return i===o||fa(i)&&fa(o)}function zn(e,t,n){var i,o,a={};for(i=t;i<=n;++i)o=e[i].key,r(o)&&(a[o]=i);return a}function qn(e){function t(e){return new Br(P.tagName(e).toLowerCase(),{},[],(void 0),e)}function n(e,t){function n(){0===--n.listeners&&a(e)}return n.listeners=t,n}function a(e){var t=P.parentNode(e);r(t)&&P.removeChild(t,e)}function l(e,t){return!t&&!e.ns&&!(sr.ignoredElements.length&&sr.ignoredElements.some(function(t){return d(t)?t.test(e.tag):t===e.tag}))&&sr.isUnknownElement(e.tag)}function u(e,t,n,i,a,s,u){if(r(e.elm)&&r(s)&&(e=s[u]=M(e)),e.isRootInsert=!a,!c(e,t,n,i)){var d=e.data,f=e.children,p=e.tag;r(p)?(d&&d.pre&&j++,l(e,j)&&Ir("Unknown custom element: <"+p+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?P.createElementNS(e.ns,p):P.createElement(p,e),_(e),v(e,f,t),r(d)&&y(e,t),h(n,e.elm,i),d&&d.pre&&j--):o(e.isComment)?(e.elm=P.createComment(e.text),h(n,e.elm,i)):(e.elm=P.createTextNode(e.text),h(n,e.elm,i))}}function c(e,t,n,i){var a=e.data;if(r(a)){var s=r(e.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(e,!1),r(e.componentInstance))return f(e,t),h(n,e.elm,i),o(s)&&p(e,t,n,i),!0}}function f(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(y(e,t),_(e)):(Bn(e),t.push(e))}function p(e,t,n,i){for(var o,a=e;a.componentInstance;)if(a=a.componentInstance._vnode,r(o=a.data)&&r(o=o.transition)){for(o=0;o<$.activate.length;++o)$.activate[o](va,a);t.push(a);break}h(n,e.elm,i)}function h(e,t,n){r(e)&&(r(n)?P.parentNode(n)===e&&P.insertBefore(e,t,n):P.appendChild(e,t))}function v(e,t,n){if(Array.isArray(t)){F(t);for(var i=0;i<t.length;++i)u(t[i],n,e.elm,null,!0,t,i)}else s(e.text)&&P.appendChild(e.elm,P.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return r(e.tag)}function y(e,t){for(var n=0;n<$.create.length;++n)$.create[n](va,e);L=e.data.hook,r(L)&&(r(L.create)&&L.create(va,e),r(L.insert)&&t.push(e))}function _(e){var t;if(r(t=e.fnScopeId))P.setStyleScope(e.elm,t);else for(var n=e;n;)r(t=n.context)&&r(t=t.$options._scopeId)&&P.setStyleScope(e.elm,t),n=n.parent;r(t=Co)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&P.setStyleScope(e.elm,t)}function b(e,t,n,i,r,o){for(;i<=r;++i)u(n[i],o,e,t,!1,n,i)}function w(e){var t,n,i=e.data;if(r(i))for(r(t=i.hook)&&r(t=t.destroy)&&t(e),t=0;t<$.destroy.length;++t)$.destroy[t](e);if(r(t=e.children))for(n=0;n<e.children.length;++n)w(e.children[n])}function k(e,t,n){for(;t<=n;++t){var i=e[t];r(i)&&(r(i.tag)?(x(i),w(i)):a(i.elm))}}function x(e,t){if(r(t)||r(e.data)){var i,o=$.remove.length+1;for(r(t)?t.listeners+=o:t=n(e.elm,o),r(i=e.componentInstance)&&r(i=i._vnode)&&r(i.data)&&x(i,t),i=0;i<$.remove.length;++i)$.remove[i](e,t);r(i=e.data.hook)&&r(i=i.remove)?i(e,t):t()}else a(e.elm)}function S(e,t,n,o,a){var s,l,c,d,f=0,p=0,h=t.length-1,v=t[0],g=t[h],m=n.length-1,y=n[0],_=n[m],w=!a;for(F(n);f<=h&&p<=m;)i(v)?v=t[++f]:i(g)?g=t[--h]:Nn(v,y)?(E(v,y,o,n,p),v=t[++f],y=n[++p]):Nn(g,_)?(E(g,_,o,n,m),g=t[--h],_=n[--m]):Nn(v,_)?(E(v,_,o,n,m),w&&P.insertBefore(e,v.elm,P.nextSibling(g.elm)),v=t[++f],_=n[--m]):Nn(g,y)?(E(g,y,o,n,p),w&&P.insertBefore(e,g.elm,v.elm),g=t[--h],y=n[++p]):(i(s)&&(s=zn(t,f,h)),l=r(y.key)?s[y.key]:C(y,t,f,h),i(l)?u(y,o,e,v.elm,!1,n,p):(c=t[l],Nn(c,y)?(E(c,y,o,n,p),t[l]=void 0,w&&P.insertBefore(e,c.elm,v.elm)):u(y,o,e,v.elm,!1,n,p)),y=n[++p]);f>h?(d=i(n[m+1])?null:n[m+1].elm,b(e,d,n,p,m,o)):p>m&&k(t,f,h)}function F(e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=i.key;r(o)&&(t[o]?Ir("Duplicate keys detected: '"+o+"'. This may cause an update error.",i.context):t[o]=!0)}}function C(e,t,n,i){for(var o=n;o<i;o++){var a=t[o];if(r(a)&&Nn(e,a))return o}}function E(e,t,n,a,s,l){if(e!==t){r(t.elm)&&r(a)&&(t=a[s]=M(t));var u=t.elm=e.elm;if(o(e.isAsyncPlaceholder))return void(r(t.asyncFactory.resolved)?I(e.elm,t,n):t.isAsyncPlaceholder=!0);if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))return void(t.componentInstance=e.componentInstance);var c,d=t.data;r(d)&&r(c=d.hook)&&r(c=c.prepatch)&&c(e,t);var f=e.children,p=t.children;if(r(d)&&m(t)){for(c=0;c<$.update.length;++c)$.update[c](e,t);r(c=d.hook)&&r(c=c.update)&&c(e,t)}i(t.text)?r(f)&&r(p)?f!==p&&S(u,f,p,n,l):r(p)?(F(p),r(e.text)&&P.setTextContent(u,""),b(u,null,p,0,p.length-1,n)):r(f)?k(f,0,f.length-1):r(e.text)&&P.setTextContent(u,""):e.text!==t.text&&P.setTextContent(u,t.text),r(d)&&r(c=d.hook)&&r(c=c.postpatch)&&c(e,t)}}function T(e,t,n){if(o(n)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}function I(e,t,n,i){var a,s=t.tag,l=t.data,u=t.children;if(i=i||l&&l.pre,t.elm=e,o(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(!A(e,t,i))return!1;if(r(l)&&(r(a=l.hook)&&r(a=a.init)&&a(t,!0),r(a=t.componentInstance)))return f(t,n),!0;if(r(s)){if(r(u))if(e.hasChildNodes())if(r(a=l)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==e.innerHTML)return"undefined"==typeof console||D||(D=!0),!1}else{for(var c=!0,d=e.firstChild,p=0;p<u.length;p++){if(!d||!I(d,u[p],n,i)){c=!1;break}d=d.nextSibling}if(!c||d)return"undefined"==typeof console||D||(D=!0),!1}else v(t,u,n);if(r(l)){var h=!1;for(var g in l)if(!V(g)){h=!0,y(t,n);break}!h&&l["class"]&&we(l["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}function A(e,t,n){return r(t.tag)?0===t.tag.indexOf("vue-component")||!l(t,n)&&t.tag.toLowerCase()===(e.tagName&&e.tagName.toLowerCase()):e.nodeType===(t.isComment?8:3)}var L,O,$={},R=e.modules,P=e.nodeOps;for(L=0;L<ga.length;++L)for($[ga[L]]=[],O=0;O<R.length;++O)r(R[O][ga[L]])&&$[ga[L]].push(R[O][ga[L]]);var j=0,D=!1,V=g("attrs,class,staticClass,staticStyle,key");return function(e,n,a,s){if(i(n))return void(r(e)&&w(e));var l=!1,c=[];if(i(e))l=!0,u(n,c);else{var d=r(e.nodeType);if(!d&&Nn(e,n))E(e,n,c,null,null,s);else{if(d){if(1===e.nodeType&&e.hasAttribute(rr)&&(e.removeAttribute(rr),a=!0),o(a)){if(I(e,n,c))return T(n,c,!0),e;Ir("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}e=t(e)}var f=e.elm,p=P.parentNode(f);if(u(n,c,f._leaveCb?null:p,P.nextSibling(f)),r(n.parent))for(var h=n.parent,v=m(n);h;){for(var g=0;g<$.destroy.length;++g)$.destroy[g](h);if(h.elm=n.elm,v){for(var y=0;y<$.create.length;++y)$.create[y](va,h);var _=h.data.hook.insert;if(_.merged)for(var b=1;b<_.fns.length;b++)_.fns[b]()}else Bn(h);h=h.parent}r(p)?k([e],0,0):r(e.tag)&&w(e)}}return T(n,c,l),n.elm}}function Gn(e,t){(e.data.directives||t.data.directives)&&Hn(e,t)}function Hn(e,t){var n,i,r,o=e===va,a=t===va,s=Wn(e.data.directives,e.context),l=Wn(t.data.directives,t.context),u=[],c=[];for(n in l)i=s[n],r=l[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Zn(r,"update",t,e),r.def&&r.def.componentUpdated&&c.push(r)):(Zn(r,"bind",t,e),r.def&&r.def.inserted&&u.push(r));if(u.length){var d=function(){for(var n=0;n<u.length;n++)Zn(u[n],"inserted",t,e)};o?Fe(t,"insert",d):d()}if(c.length&&Fe(t,"postpatch",function(){for(var n=0;n<c.length;n++)Zn(c[n],"componentUpdated",t,e)}),!o)for(n in s)l[n]||Zn(s[n],"unbind",e,e,a)}function Wn(e,t){var n=Object.create(null);if(!e)return n;var i,r;for(i=0;i<e.length;i++)r=e[i],r.modifiers||(r.modifiers=ya),n[Kn(r)]=r,r.def=ie(t.$options,"directives",r.name,!0);return n}function Kn(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Zn(e,t,n,i,r){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,i,r)}catch(a){ve(a,n.context,"directive "+e.name+" "+t+" hook")}}function Xn(e,t){var n=t.componentOptions;if(!(r(n)&&n.Ctor.options.inheritAttrs===!1||i(e.data.attrs)&&i(t.data.attrs))){var o,a,s,l=t.elm,u=e.data.attrs||{},c=t.data.attrs||{};r(c.__ob__)&&(c=t.data.attrs=x({},c));for(o in c)a=c[o],s=u[o],s!==a&&Yn(l,o,a);(vr||mr)&&c.value!==u.value&&Yn(l,"value",c.value);for(o in u)i(c[o])&&(ra(o)?l.removeAttributeNS(ia,oa(o)):Qo(o)||l.removeAttribute(o))}}function Yn(e,t,n){e.tagName.indexOf("-")>-1?Jn(e,t,n):na(t)?aa(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Qo(t)?e.setAttribute(t,ta(t,n)):ra(t)?aa(n)?e.removeAttributeNS(ia,oa(t)):e.setAttributeNS(ia,t,n):Jn(e,t,n)}function Jn(e,t,n){if(aa(n))e.removeAttribute(t);else{if(vr&&!gr&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}function Qn(e,t){var n=t.elm,o=t.data,a=e.data;if(!(i(o.staticClass)&&i(o["class"])&&(i(a)||i(a.staticClass)&&i(a["class"])))){var s=yn(t),l=n._transitionClasses;r(l)&&(s=wn(s,kn(l))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}function ei(e){if(r(e[ka])){var t=vr?"change":"input";e[t]=[].concat(e[ka],e[t]||[]),delete e[ka]}r(e[xa])&&(e.change=[].concat(e[xa],e.change||[]),delete e[xa])}function ti(e,t,n){var i=Wo;return function r(){var o=t.apply(null,arguments);null!==o&&ii(e,r,n,i)}}function ni(e,t,n,i){if(Sa){var r=Mo,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Wo.addEventListener(e,t,wr?{capture:n,passive:i}:n)}function ii(e,t,n,i){(i||Wo).removeEventListener(e,t._wrapper||t,n)}function ri(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Wo=t.elm,ei(n),Se(n,r,ni,ii,ti,t.context),Wo=void 0}}function oi(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,o,a=t.elm,s=e.data.domProps||{},l=t.data.domProps||{};r(l.__ob__)&&(l=t.data.domProps=x({},l));for(n in s)n in l||(a[n]="");for(n in l){if(o=l[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var u=i(o)?"":String(o);ai(a,u)&&(a.value=u)}else if("innerHTML"===n&&ua(a.tagName)&&i(a.innerHTML)){Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+o+"</svg>";for(var c=Ko.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}else if(o!==s[n])try{a[n]=o}catch(d){}}}}function ai(e,t){return!e.composing&&("OPTION"===e.tagName||si(e,t)||li(e,t))}function si(e,t){var n=!0;try{n=document.activeElement!==e}catch(i){}return n&&e.value!==t}function li(e,t){var n=e.value,i=e._vModifiers;if(r(i)){if(i.number)return v(n)!==v(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}function ui(e){var t=ci(e.style);return e.staticStyle?x(e.staticStyle,t):t}function ci(e){return Array.isArray(e)?S(e):"string"==typeof e?Ea(e):e}function di(e,t){var n,i={};if(t)for(var r=e;r.componentInstance;)r=r.componentInstance._vnode,r&&r.data&&(n=ui(r.data))&&x(i,n);(n=ui(e.data))&&x(i,n);for(var o=e;o=o.parent;)o.data&&(n=ui(o.data))&&x(i,n);return i}function fi(e,t){var n=t.data,o=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(o.staticStyle)&&i(o.style))){var a,s,l=t.elm,u=o.staticStyle,c=o.normalizedStyle||o.style||{},d=u||c,f=ci(t.data.style)||{};t.data.normalizedStyle=r(f.__ob__)?x({},f):f;var p=di(t,!0);for(s in d)i(p[s])&&Aa(l,s,"");for(s in p)a=p[s],a!==d[s]&&Aa(l,s,null==a?"":a)}}function pi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ra).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function hi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ra).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function vi(e){if(e){if("object"==typeof e){var t={};return e.css!==!1&&x(t,Pa(e.name||"v")),x(t,e),t}return"string"==typeof e?Pa(e):void 0}}function gi(e){za(function(){za(e)})}function mi(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),pi(e,t))}function yi(e,t){e._transitionClasses&&m(e._transitionClasses,t),hi(e,t)}function _i(e,t,n){var i=bi(e,t),r=i.type,o=i.timeout,a=i.propCount;if(!r)return n();var s=r===ja?Ba:Ua,l=0,u=function(){e.removeEventListener(s,c),n()},c=function(t){t.target===e&&++l>=a&&u()};setTimeout(function(){l<a&&u()},o+1),e.addEventListener(s,c)}function bi(e,t){var n,i=window.getComputedStyle(e),r=(i[Va+"Delay"]||"").split(", "),o=(i[Va+"Duration"]||"").split(", "),a=wi(r,o),s=(i[Na+"Delay"]||"").split(", "),l=(i[Na+"Duration"]||"").split(", "),u=wi(s,l),c=0,d=0;t===ja?a>0&&(n=ja,c=a,d=o.length):t===Da?u>0&&(n=Da,c=u,d=l.length):(c=Math.max(a,u),n=c>0?a>u?ja:Da:null,d=n?n===ja?o.length:l.length:0);var f=n===ja&&qa.test(i[Va+"Property"]);return{type:n,timeout:c,propCount:d,hasTransform:f}}function wi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return ki(t)+ki(e[n])}))}function ki(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function xi(e,t){var n=e.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=vi(e.data.transition);if(!i(o)&&!r(n._enterCb)&&1===n.nodeType){for(var a=o.css,s=o.type,u=o.enterClass,c=o.enterToClass,d=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,h=o.appearActiveClass,g=o.beforeEnter,m=o.enter,y=o.afterEnter,_=o.enterCancelled,b=o.beforeAppear,w=o.appear,k=o.afterAppear,x=o.appearCancelled,S=o.duration,F=Co,C=Co.$vnode;C&&C.parent;)F=C.context,C=C.parent;var E=!F._isMounted||!e.isRootInsert;if(!E||w||""===w){var I=E&&f?f:u,A=E&&h?h:d,L=E&&p?p:c,O=E?b||g:g,$=E&&"function"==typeof w?w:m,R=E?k||y:y,P=E?x||_:_,M=v(l(S)?S.enter:S);null!=M&&Fi(M,"enter",e);var j=a!==!1&&!gr,D=Ei($),V=n._enterCb=T(function(){j&&(yi(n,L),yi(n,A)),V.cancelled?(j&&yi(n,I),P&&P(n)):R&&R(n),n._enterCb=null});e.data.show||Fe(e,"insert",function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),$&&$(n,V)}),O&&O(n),j&&(mi(n,I),mi(n,A),gi(function(){yi(n,I),V.cancelled||(mi(n,L),D||(Ci(M)?setTimeout(V,M):_i(n,s,V)))})),e.data.show&&(t&&t(),$&&$(n,V)),j||D||V()}}}function Si(e,t){function n(){x.cancelled||(!e.data.show&&o.parentNode&&((o.parentNode._pending||(o.parentNode._pending={}))[e.key]=e),p&&p(o),b&&(mi(o,c),mi(o,f),gi(function(){yi(o,c),x.cancelled||(mi(o,d),w||(Ci(k)?setTimeout(x,k):_i(o,u,x)))})),h&&h(o,x),b||w||x())}var o=e.elm;r(o._enterCb)&&(o._enterCb.cancelled=!0,o._enterCb());var a=vi(e.data.transition);if(i(a)||1!==o.nodeType)return t();if(!r(o._leaveCb)){var s=a.css,u=a.type,c=a.leaveClass,d=a.leaveToClass,f=a.leaveActiveClass,p=a.beforeLeave,h=a.leave,g=a.afterLeave,m=a.leaveCancelled,y=a.delayLeave,_=a.duration,b=s!==!1&&!gr,w=Ei(h),k=v(l(_)?_.leave:_);r(k)&&Fi(k,"leave",e);var x=o._leaveCb=T(function(){o.parentNode&&o.parentNode._pending&&(o.parentNode._pending[e.key]=null),b&&(yi(o,d),yi(o,f)),x.cancelled?(b&&yi(o,c),m&&m(o)):(t(),g&&g(o)),o._leaveCb=null});y?y(n):n()}}function Fi(e,t,n){"number"!=typeof e?Ir("<transition> explicit "+t+" duration is not a valid number - got "+JSON.stringify(e)+".",n.context):isNaN(e)&&Ir("<transition> explicit "+t+" duration is NaN - the duration expression might be incorrect.",n.context)}function Ci(e){return"number"==typeof e&&!isNaN(e)}function Ei(e){if(i(e))return!1;var t=e.fns;return r(t)?Ei(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ti(e,t){t.data.show!==!0&&xi(t)}function Ii(e,t,n){Ai(e,t,n),(vr||mr)&&setTimeout(function(){Ai(e,t,n)},0)}function Ai(e,t,n){var i=t.value,r=e.multiple;if(r&&!Array.isArray(i))return void Ir('<select multiple v-model="'+t.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(i).slice(8,-1),n);for(var o,a,s=0,l=e.options.length;s<l;s++)if(a=e.options[s],r)o=E(i,Oi(a))>-1,a.selected!==o&&(a.selected=o);else if(C(Oi(a),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));r||(e.selectedIndex=-1)}function Li(e,t){return t.every(function(t){return!C(t,e)})}function Oi(e){return"_value"in e?e._value:e.value}function $i(e){e.target.composing=!0}function Ri(e){e.target.composing&&(e.target.composing=!1,Pi(e.target,"input"))}function Pi(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Mi(e){return!e.componentInstance||e.data&&e.data.transition?e:Mi(e.componentInstance._vnode)}function ji(e){var t=e&&e.componentOptions;return t&&t.Ctor.options["abstract"]?ji(bt(t.children)):e}function Di(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var o in r)t[Yi(o)]=r[o];return t}function Vi(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Bi(e){for(;e=e.parent;)if(e.data.transition)return!0}function Ni(e,t){return t.key===e.key&&t.tag===e.tag}function Ui(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function zi(e){e.data.newPos=e.elm.getBoundingClientRect()}function qi(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}var Gi=Object.freeze({}),Hi=Object.prototype.toString,Wi=g("slot,component",!0),Ki=g("key,ref,slot,slot-scope,is"),Zi=Object.prototype.hasOwnProperty,Xi=/-(\w)/g,Yi=_(function(e){return e.replace(Xi,function(e,t){return t?t.toUpperCase():""})}),Ji=_(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),Qi=/\B([A-Z])/g,er=_(function(e){return e.replace(Qi,"-$1").toLowerCase()}),tr=Function.prototype.bind?w:b,nr=function(e,t,n){return!1},ir=function(e){return e},rr="data-server-rendered",or=["component","directive","filter"],ar=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],sr={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:nr,isReservedAttr:nr,isUnknownElement:nr,getTagNamespace:F,parsePlatformTagName:ir,mustUseProp:nr,async:!0,_lifecycleHooks:ar},lr=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/,ur=new RegExp("[^"+lr.source+".$_\\d]"),cr="__proto__"in{},dr="undefined"!=typeof window,fr="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,pr=fr&&WXEnvironment.platform.toLowerCase(),hr=dr&&window.navigator.userAgent.toLowerCase(),vr=hr&&/msie|trident/.test(hr),gr=hr&&hr.indexOf("msie 9.0")>0,mr=hr&&hr.indexOf("edge/")>0,yr=(hr&&hr.indexOf("android")>0||"android"===pr,hr&&/iphone|ipad|ipod|ios/.test(hr)||"ios"===pr),_r=(hr&&/chrome\/\d+/.test(hr)&&!mr,hr&&/phantomjs/.test(hr),hr&&hr.match(/firefox\/(\d+)/)),br={}.watch,wr=!1;if(dr)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){wr=!0}}),window.addEventListener("test-passive",null,kr)}catch(xr){}
var Sr,Fr,Cr=function(){return void 0===Sr&&(Sr=!dr&&!fr&&"undefined"!=typeof e&&(e.process&&"server"===e.process.env.VUE_ENV)),Sr},Er=dr&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Tr="undefined"!=typeof Symbol&&O(Symbol)&&"undefined"!=typeof Reflect&&O(Reflect.ownKeys);Fr="undefined"!=typeof Set&&O(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return this.set[e]===!0},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var Ir=F,Ar=F,Lr=F,Or=F,$r="undefined"!=typeof console,Rr=/(?:^|[-_])(\w)/g,Pr=function(e){return e.replace(Rr,function(e){return e.toUpperCase()}).replace(/[-_]/g,"")};Ir=function(e,t){var n=t?Lr(t):"";sr.warnHandler?sr.warnHandler.call(null,e,t,n):$r&&!sr.silent},Ar=function(e,t){$r&&!sr.silent},Or=function(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e,i=n.name||n._componentTag,r=n.__file;if(!i&&r){var o=r.match(/([^/\\]+)\.vue$/);i=o&&o[1]}return(i?"<"+Pr(i)+">":"<Anonymous>")+(r&&t!==!1?" at "+r:"")};var Mr=function(e,t){for(var n="";t;)t%2===1&&(n+=e),t>1&&(e+=e),t>>=1;return n};Lr=function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var i=t[t.length-1];if(i.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[i,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(function(e,t){return""+(0===t?"---> ":Mr(" ",5+2*t))+(Array.isArray(e)?Or(e[0])+"... ("+e[1]+" recursive calls)":Or(e))}).join("\n")}return"\n\n(found in "+Or(e)+")"};var jr=0,Dr=function(){this.id=jr++,this.subs=[]};Dr.prototype.addSub=function(e){this.subs.push(e)},Dr.prototype.removeSub=function(e){m(this.subs,e)},Dr.prototype.depend=function(){Dr.target&&Dr.target.addDep(this)},Dr.prototype.notify=function(){var e=this.subs.slice();sr.async||e.sort(function(e,t){return e.id-t.id});for(var t=0,n=e.length;t<n;t++)e[t].update()},Dr.target=null;var Vr=[],Br=function(e,t,n,i,r,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Nr={child:{configurable:!0}};Nr.child.get=function(){return this.componentInstance},Object.defineProperties(Br.prototype,Nr);var Ur=function(e){void 0===e&&(e="");var t=new Br;return t.text=e,t.isComment=!0,t},zr=Array.prototype,qr=Object.create(zr),Gr=["push","pop","shift","unshift","splice","sort","reverse"];Gr.forEach(function(e){var t=zr[e];A(qr,e,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&a.observeArray(r),a.dep.notify(),o})});var Hr=Object.getOwnPropertyNames(qr),Wr=!0,Kr=function(e){this.value=e,this.dep=new Dr,this.vmCount=0,A(e,"__ob__",this),Array.isArray(e)?(cr?D(e,qr):V(e,qr,Hr),this.observeArray(e)):this.walk(e)};Kr.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)N(e,t[n])},Kr.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)B(e[t])};var Zr=sr.optionMergeStrategies;Zr.el=Zr.propsData=function(e,t,n,i){return n||Ir('option "'+i+'" can only be used during instance creation with the `new` keyword.'),Yr(e,t)},Zr.data=function(e,t,n){return n?H(e,t,n):t&&"function"!=typeof t?(Ir('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):H(e,t)},ar.forEach(function(e){Zr[e]=W}),or.forEach(function(e){Zr[e+"s"]=Z}),Zr.watch=function(e,t,n,i){if(e===br&&(e=void 0),t===br&&(t=void 0),!t)return Object.create(e||null);if(te(i,t,n),!e)return t;var r={};x(r,e);for(var o in t){var a=r[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},Zr.props=Zr.methods=Zr.inject=Zr.computed=function(e,t,n,i){if(t&&te(i,t,n),!e)return t;var r=Object.create(null);return x(r,e),t&&x(r,t),r},Zr.provide=H;var Xr,Yr=function(e,t){return void 0===t?e:t},Jr=/^(String|Number|Boolean|Function|Symbol)$/,Qr=!1,eo=[],to=!1;if("undefined"!=typeof Promise&&O(Promise)){var no=Promise.resolve();Xr=function(){no.then(_e),yr&&setTimeout(F)},Qr=!0}else if(vr||"undefined"==typeof MutationObserver||!O(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Xr="undefined"!=typeof n&&O(n)?function(){n(_e)}:function(){setTimeout(_e,0)};else{var io=1,ro=new MutationObserver(_e),oo=document.createTextNode(String(io));ro.observe(oo,{characterData:!0}),Xr=function(){io=(io+1)%2,oo.data=String(io)},Qr=!0}var ao,so=g("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),lo=function(e,t){Ir('Property or method "'+t+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',e)},uo=function(e,t){Ir('Property "'+t+'" must be accessed with "$data.'+t+'" because properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://vuejs.org/v2/api/#data',e)},co="undefined"!=typeof Proxy&&O(Proxy);if(co){var fo=g("stop,prevent,self,ctrl,shift,alt,meta,exact");sr.keyCodes=new Proxy(sr.keyCodes,{set:function(e,t,n){return fo(t)?(Ir("Avoid overwriting built-in modifier in config.keyCodes: ."+t),!1):(e[t]=n,!0)}})}var po={has:function os(e,t){var os=t in e,n=so(t)||"string"==typeof t&&"_"===t.charAt(0)&&!(t in e.$data);return os||n||(t in e.$data?uo(e,t):lo(e,t)),os||!n}},ho={get:function(e,t){return"string"!=typeof t||t in e||(t in e.$data?uo(e,t):lo(e,t)),e[t]}};ao=function(e){if(co){var t=e.$options,n=t.render&&t.render._withStripped?ho:po;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e};var vo,go,mo=new Fr,yo=dr&&window.performance;yo&&yo.mark&&yo.measure&&yo.clearMarks&&yo.clearMeasures&&(vo=function(e){return yo.mark(e)},go=function(e,t,n){yo.measure(e,t,n),yo.clearMarks(t),yo.clearMarks(n)});var _o=_(function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var i="!"===e.charAt(0);return e=i?e.slice(1):e,{name:e,once:n,capture:i,passive:t}});et(tt.prototype);var bo,wo={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;wo.prepatch(n,n)}else{var i=e.componentInstance=at(e,Co);i.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;Lt(i,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Pt(n,"mounted")),e.data.keepAlive&&(t._isMounted?Vt(n):$t(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Rt(t,!0):t.$destroy())}},ko=Object.keys(wo),xo=1,So=2,Fo=null,Co=null,Eo=!1,To=100,Io=[],Ao=[],Lo={},Oo={},$o=!1,Ro=!1,Po=0,Mo=0,jo=Date.now;if(dr&&!vr){var Do=window.performance;Do&&"function"==typeof Do.now&&jo()>document.createEvent("Event").timeStamp&&(jo=function(){return Do.now()})}var Vo=0,Bo=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Vo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Fr,this.newDepIds=new Fr,this.expression=t.toString(),"function"==typeof t?this.getter=t:(this.getter=L(t),this.getter||(this.getter=F,Ir('Failed watching path: "'+t+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',e))),this.value=this.lazy?void 0:this.get()};Bo.prototype.get=function(){$(this);var e,t=this.vm;try{e=this.getter.call(t,t)}catch(n){if(!this.user)throw n;ve(n,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&we(e),R(),this.cleanupDeps()}return e},Bo.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Bo.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Bo.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Nt(this)},Bo.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(n){ve(n,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},Bo.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Bo.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Bo.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var No={enumerable:!0,configurable:!0,get:F,set:F},Uo={lazy:!0},zo=0;tn(an),en(an),Ct(an),It(an),vt(an);var qo=[String,RegExp,Array],Go={name:"keep-alive","abstract":!0,props:{include:qo,exclude:qo,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)gn(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){vn(e,function(e){return hn(t,e)})}),this.$watch("exclude",function(t){vn(e,function(e){return!hn(t,e)})})},render:function(){var e=this.$slots["default"],t=bt(e),n=t&&t.componentOptions;if(n){var i=pn(n),r=this,o=r.include,a=r.exclude;if(o&&(!i||!hn(o,i))||a&&i&&hn(a,i))return t;var s=this,l=s.cache,u=s.keys,c=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;l[c]?(t.componentInstance=l[c].componentInstance,m(u,c),u.push(c)):(l[c]=t,u.push(c),this.max&&u.length>parseInt(this.max)&&gn(l,u[0],u,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Ho={KeepAlive:Go};mn(an),Object.defineProperty(an.prototype,"$isServer",{get:Cr}),Object.defineProperty(an.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(an,"FunctionalRenderContext",{value:tt}),an.version="2.6.12";var Wo,Ko,Zo,Xo=g("style,class"),Yo=g("input,textarea,option,select,progress"),Jo=function(e,t,n){return"value"===n&&Yo(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Qo=g("contenteditable,draggable,spellcheck"),ea=g("events,caret,typing,plaintext-only"),ta=function(e,t){return aa(t)||"false"===t?"false":"contenteditable"===e&&ea(t)?t:"true"},na=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),ia="http://www.w3.org/1999/xlink",ra=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},oa=function(e){return ra(e)?e.slice(6,e.length):""},aa=function(e){return null==e||e===!1},sa={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},la=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ua=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ca=function(e){return la(e)||ua(e)},da=Object.create(null),fa=g("text,number,password,search,email,tel,url"),pa=Object.freeze({createElement:Tn,createElementNS:In,createTextNode:An,createComment:Ln,insertBefore:On,removeChild:$n,appendChild:Rn,parentNode:Pn,nextSibling:Mn,tagName:jn,setTextContent:Dn,setStyleScope:Vn}),ha={create:function(e,t){Bn(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Bn(e,!0),Bn(t))},destroy:function(e){Bn(e,!0)}},va=new Br("",{},[]),ga=["create","activate","update","remove","destroy"],ma={create:Gn,update:Gn,destroy:function(e){Gn(e,va)}},ya=Object.create(null),_a=[ha,ma],ba={create:Xn,update:Xn},wa={create:Qn,update:Qn},ka="__r",xa="__c",Sa=Qr&&!(_r&&Number(_r[1])<=53),Fa={create:ri,update:ri},Ca={create:oi,update:oi},Ea=_(function(e){var t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}),Ta=/^--/,Ia=/\s*!important$/,Aa=function(e,t,n){if(Ta.test(t))e.style.setProperty(t,n);else if(Ia.test(n))e.style.setProperty(er(t),n.replace(Ia,""),"important");else{var i=Oa(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)e.style[i]=n[r];else e.style[i]=n}},La=["Webkit","Moz","ms"],Oa=_(function(e){if(Zo=Zo||document.createElement("div").style,e=Yi(e),"filter"!==e&&e in Zo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<La.length;n++){var i=La[n]+t;if(i in Zo)return i}}),$a={create:fi,update:fi},Ra=/\s+/,Pa=_(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),Ma=dr&&!gr,ja="transition",Da="animation",Va="transition",Ba="transitionend",Na="animation",Ua="animationend";Ma&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Va="WebkitTransition",Ba="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Na="WebkitAnimation",Ua="webkitAnimationEnd"));var za=dr?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()},qa=/\b(transform|all)(,|$)/,Ga=dr?{create:Ti,activate:Ti,remove:function(e,t){e.data.show!==!0?Si(e,t):t()}}:{},Ha=[ba,wa,Fa,Ca,$a,Ga],Wa=Ha.concat(_a),Ka=qn({nodeOps:pa,modules:Wa});gr&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&Pi(e,"input")});var Za={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?Fe(n,"postpatch",function(){Za.componentUpdated(e,t,n)}):Ii(e,t,n.context),e._vOptions=[].map.call(e.options,Oi)):("textarea"===n.tag||fa(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",$i),e.addEventListener("compositionend",Ri),e.addEventListener("change",Ri),gr&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Ii(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,Oi);if(r.some(function(e,t){return!C(e,i[t])})){var o=e.multiple?t.value.some(function(e){return Li(e,r)}):t.value!==t.oldValue&&Li(t.value,r);o&&Pi(e,"change")}}}},Xa={bind:function(e,t,n){var i=t.value;n=Mi(n);var r=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,xi(n,function(){e.style.display=o})):e.style.display=i?o:"none"},update:function(e,t,n){var i=t.value,r=t.oldValue;if(!i!=!r){n=Mi(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,i?xi(n,function(){e.style.display=e.__vOriginalDisplay}):Si(n,function(){e.style.display="none"})):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}},Ya={model:Za,show:Xa},Ja={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},Qa=function(e){return e.tag||_t(e)},es=function(e){return"show"===e.name},ts={name:"transition",props:Ja,"abstract":!0,render:function(e){var t=this,n=this.$slots["default"];if(n&&(n=n.filter(Qa),n.length)){n.length>1&&Ir("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var i=this.mode;i&&"in-out"!==i&&"out-in"!==i&&Ir("invalid <transition> mode: "+i,this.$parent);var r=n[0];if(Bi(this.$vnode))return r;var o=ji(r);if(!o)return r;if(this._leaving)return Vi(e,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=Di(this),u=this._vnode,c=ji(u);if(o.data.directives&&o.data.directives.some(es)&&(o.data.show=!0),c&&c.data&&!Ni(o,c)&&!_t(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var d=c.data.transition=x({},l);if("out-in"===i)return this._leaving=!0,Fe(d,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),Vi(e,r);if("in-out"===i){if(_t(o))return u;var f,p=function(){f()};Fe(l,"afterEnter",p),Fe(l,"enterCancelled",p),Fe(d,"delayLeave",function(e){f=e})}}return r}}},ns=x({tag:String,moveClass:String},Ja);delete ns.mode;var is={props:ns,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var r=Et(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots["default"]||[],o=this.children=[],a=Di(this),s=0;s<r.length;s++){var l=r[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else{var u=l.componentOptions,c=u?u.Ctor.options.name||u.tag||"":l.tag;Ir("<transition-group> children must be keyed: <"+c+">")}}if(i){for(var d=[],f=[],p=0;p<i.length;p++){var h=i[p];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?d.push(h):f.push(h)}this.kept=e(t,null,d),this.removed=f}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Ui),e.forEach(zi),e.forEach(qi),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var n=e.elm,i=n.style;mi(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Ba,n._moveCb=function r(e){e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener(Ba,r),n._moveCb=null,yi(n,t))})}}))},methods:{hasMove:function(e,t){if(!Ma)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){hi(n,e)}),pi(n,t),n.style.display="none",this.$el.appendChild(n);var i=bi(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}},rs={Transition:ts,TransitionGroup:is};an.config.mustUseProp=Jo,an.config.isReservedTag=ca,an.config.isReservedAttr=Xo,an.config.getTagNamespace=Fn,an.config.isUnknownElement=Cn,x(an.options.directives,Ya),x(an.options.components,rs),an.prototype.__patch__=dr?Ka:F,an.prototype.$mount=function(e,t){return e=e&&dr?En(e):void 0,At(this,e,t)},dr&&setTimeout(function(){sr.devtools&&Er&&Er.emit("init",an),sr.productionTip!==!1&&"undefined"!=typeof console},0),t.exports=an}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:2}],5:[function(e,t,n){(function(n){(function(){"production"===n.env.NODE_ENV?t.exports=e("./vue.runtime.common.prod.js"):t.exports=e("./vue.runtime.common.dev.js")}).call(this)}).call(this,e("_process"))},{"./vue.runtime.common.dev.js":4,"./vue.runtime.common.prod.js":6,_process:1}],6:[function(e,t,n){(function(e,n){(function(){"use strict";function i(e){return null==e}function r(e){return null!=e}function o(e){return!0===e}function a(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Object]"===rn.call(e)}function u(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function c(e){return r(e)&&"function"==typeof e.then&&"function"==typeof e["catch"]}function d(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===rn?JSON.stringify(e,null,2):String(e)}function f(e){var t=parseFloat(e);return isNaN(t)?e:t}function p(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function h(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function v(e,t){return an.call(e,t)}function g(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}function m(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function y(e,t){for(var n in t)e[n]=t[n];return e}function _(e){for(var t={},n=0;n<e.length;n++)e[n]&&y(t,e[n]);return t}function b(e,t,n){}function w(e,t){if(e===t)return!0;var n=s(e),i=s(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),o=Array.isArray(t);if(r&&o)return e.length===t.length&&e.every(function(e,n){return w(e,t[n])});if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||o)return!1;var a=Object.keys(e),l=Object.keys(t);return a.length===l.length&&a.every(function(n){return w(e[n],t[n])})}catch(e){return!1}}function k(e,t){for(var n=0;n<e.length;n++)if(w(e[n],t))return n;return-1}function x(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function S(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function F(e){return"function"==typeof e&&/native code/.test(e.toString())}function C(e){Bn.push(e),Vn.target=e}function E(){Bn.pop(),Vn.target=Bn[Bn.length-1]}function T(e){return new Nn((void 0),(void 0),(void 0),String(e))}function I(e){var t=new Nn(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}function A(e){Wn=e}function L(e,t){var n;if(s(e)&&!(e instanceof Nn))return v(e,"__ob__")&&e.__ob__ instanceof Kn?n=e.__ob__:Wn&&!Rn()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Kn(e)),t&&n&&n.vmCount++,n}function O(e,t,n,i,r){var o=new Vn,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,l=a&&a.set;s&&!l||2!==arguments.length||(n=e[t]);var u=!r&&L(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return Vn.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(t)&&function i(e){for(var t=void 0,n=0,r=e.length;n<r;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&i(t)}(t))),t},set:function(t){var i=s?s.call(e):n;t===i||t!=t&&i!=i||s&&!l||(l?l.call(e,t):n=t,u=!r&&L(t),o.notify())}})}}function $(e,t,n){if(Array.isArray(e)&&u(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(O(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}function R(e,t){if(Array.isArray(e)&&u(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||v(e,t)&&(delete e[t],n&&n.dep.notify())}}function P(e,t){if(!t)return e;for(var n,i,r,o=Mn?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(i=e[n],r=t[n],v(e,n)?i!==r&&l(i)&&l(r)&&P(i,r):$(e,n,r));return e}function M(e,t,n){return n?function(){var i="function"==typeof t?t.call(n,n):t,r="function"==typeof e?e.call(n,n):e;return i?P(i,r):r}:t?e?function(){return P("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function j(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function D(e,t,n,i){var r=Object.create(e||null);return t?y(r,t):r}function V(e,t,n){function i(i){var r=Zn[i]||Yn;s[i]=r(e[i],t[i],n,i)}if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var i,r,o={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(r=n[i])&&(o[ln(r)]={type:null});else if(l(n))for(var a in n)r=n[a],o[ln(a)]=l(r)?r:{type:r};e.props=o}}(t),function(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(l(n))for(var o in n){var a=n[o];i[o]=l(a)?y({from:o},a):{from:a}}}}(t),function(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"==typeof i&&(t[n]={bind:i,update:i})}}(t),!t._base&&(t["extends"]&&(e=V(e,t["extends"],n)),t.mixins))for(var r=0,o=t.mixins.length;r<o;r++)e=V(e,t.mixins[r],n);var a,s={};for(a in e)i(a);for(a in t)v(e,a)||i(a);return s}function B(e,t,n,i){if("string"==typeof n){var r=e[t];if(v(r,n))return r[n];var o=ln(n);if(v(r,o))return r[o];var a=un(o);return v(r,a)?r[a]:r[n]||r[o]||r[a]}}function N(e,t,n,i){var r=t[e],o=!v(n,e),a=n[e],s=q(Boolean,r.type);if(s>-1)if(o&&!v(r,"default"))a=!1;else if(""===a||a===dn(e)){var l=q(String,r.type);(l<0||s<l)&&(a=!0)}if(void 0===a){a=function(e,t,n){if(v(t,"default")){var i=t["default"];return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof i&&"Function"!==U(t.type)?i.call(e):i}}(i,r,e);var u=Wn;A(!0),L(a),A(u)}return a}function U(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function z(e,t){return U(e)===U(t)}function q(e,t){if(!Array.isArray(t))return z(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(z(t[n],e))return n;return-1}function G(e,t,n){C();try{if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(i,e,t,n))return}catch(e){W(e,i,"errorCaptured hook")}}W(e,t,n)}finally{E()}}function H(e,t,n,i,r){var o;try{(o=n?e.apply(t,n):e.call(t))&&!o._isVue&&c(o)&&!o._handled&&(o["catch"](function(e){return G(e,i,r+" (Promise/async)")}),o._handled=!0)}catch(e){G(e,i,r)}return o}function W(e,t,n){if(yn.errorHandler)try{return yn.errorHandler.call(null,e,t,n)}catch(t){t!==e&&K(t,null,"config.errorHandler")}K(e,t,n)}function K(e,t,n){if(!wn&&!kn||"undefined"==typeof console)throw e}function Z(){ei=!1;var e=Qn.slice(0);Qn.length=0;for(var t=0;t<e.length;t++)e[t]()}function X(e,t){var n;if(Qn.push(function(){if(e)try{e.call(t)}catch(e){G(e,t,"nextTick")}else n&&n(t)}),ei||(ei=!0,Xn()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}function Y(e){!function t(e,n){var i,r,o=Array.isArray(e);if(!(!o&&!s(e)||Object.isFrozen(e)||e instanceof Nn)){if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(i=e.length;i--;)t(e[i],n);else for(r=Object.keys(e),i=r.length;i--;)t(e[r[i]],n)}}(e,oi),oi.clear()}function J(e,t){function n(){var e=arguments,i=n.fns;if(!Array.isArray(i))return H(i,null,arguments,t,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)H(r[o],null,e,t,"v-on handler")}return n.fns=e,n}function Q(e,t,n,r,a,s){var l,u,c,d;for(l in e)u=e[l],c=t[l],d=ai(l),i(u)||(i(c)?(i(u.fns)&&(u=e[l]=J(u,s)),o(d.once)&&(u=e[l]=a(d.name,u,d.capture)),n(d.name,u,d.capture,d.passive,d.params)):u!==c&&(c.fns=u,e[l]=c));for(l in t)i(e[l])&&r((d=ai(l)).name,t[l],d.capture)}function ee(e,t,n){function a(){n.apply(this,arguments),h(s.fns,a)}var s;e instanceof Nn&&(e=e.data.hook||(e.data.hook={}));var l=e[t];i(l)?s=J([a]):r(l.fns)&&o(l.merged)?(s=l).fns.push(a):s=J([l,a]),s.merged=!0,e[t]=s}function te(e,t,n,i,o){if(r(t)){if(v(t,n))return e[n]=t[n],o||delete t[n],!0;if(v(t,i))return e[n]=t[i],o||delete t[i],!0}return!1}function ne(e){return a(e)?[T(e)]:Array.isArray(e)?function t(e,n){var s,l,u,c,d=[];for(s=0;s<e.length;s++)i(l=e[s])||"boolean"==typeof l||(u=d.length-1,c=d[u],Array.isArray(l)?l.length>0&&(ie((l=t(l,(n||"")+"_"+s))[0])&&ie(c)&&(d[u]=T(c.text+l[0].text),l.shift()),d.push.apply(d,l)):a(l)?ie(c)?d[u]=T(c.text+l):""!==l&&d.push(T(l)):ie(l)&&ie(c)?d[u]=T(c.text+l.text):(o(e._isVList)&&r(l.tag)&&i(l.key)&&r(n)&&(l.key="__vlist"+n+"_"+s+"__"),d.push(l)));return d}(e):void 0}function ie(e){return r(e)&&r(e.text)&&!1===e.isComment}function re(e,t){if(e){for(var n=Object.create(null),i=Mn?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){for(var a=e[o].from,s=t;s;){if(s._provided&&v(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s&&"default"in e[o]){var l=e[o]["default"];n[o]="function"==typeof l?l.call(t):l}}}return n}}function oe(e,t){if(!e||!e.length)return{};for(var n={},i=0,r=e.length;i<r;i++){var o=e[i],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n["default"]||(n["default"]=[])).push(o);else{var s=a.slot,l=n[s]||(n[s]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var u in n)n[u].every(ae)&&delete n[u];return n}function ae(e){return e.isComment&&!e.asyncFactory||" "===e.text}function se(e,t,n){var i,r=Object.keys(t).length>0,o=e?!!e.$stable:!r,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(o&&n&&n!==nn&&a===n.$key&&!r&&!n.$hasNormal)return n;for(var s in i={},e)e[s]&&"$"!==s[0]&&(i[s]=le(t,s,e[s]))}else i={};for(var l in t)l in i||(i[l]=ue(t,l));return e&&Object.isExtensible(e)&&(e._normalized=i),S(i,"$stable",o),S(i,"$key",a),S(i,"$hasNormal",r),i}function le(e,t,n){var i=function(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:ne(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function ue(e,t){return function(){return e[t]}}function ce(e,t){var n,i,o,a,l;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),i=0,o=e.length;i<o;i++)n[i]=t(e[i],i);else if("number"==typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(s(e))if(Mn&&e[Symbol.iterator]){n=[];for(var u=e[Symbol.iterator](),c=u.next();!c.done;)n.push(t(c.value,n.length)),c=u.next()}else for(a=Object.keys(e),n=new Array(a.length),i=0,o=a.length;i<o;i++)l=a[i],n[i]=t(e[l],l,i);return r(n)||(n=[]),n._isVList=!0,n}function de(e,t,n,i){var r,o=this.$scopedSlots[e];o?(n=n||{},i&&(n=y(y({},i),n)),r=o(n)||t):r=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},r):r}function fe(e){return B(this.$options,"filters",e)||hn}function pe(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function he(e,t,n,i,r){var o=yn.keyCodes[t]||n;return r&&i&&!yn.keyCodes[t]?pe(r,i):o?pe(o,e):i?dn(i)!==t:void 0}function ve(e,t,n,i,r){if(n&&s(n)){var o;Array.isArray(n)&&(n=_(n));var a=function(a){if("class"===a||"style"===a||on(a))o=e;else{var s=e.attrs&&e.attrs.type;o=i||yn.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=ln(a),u=dn(a);l in o||u in o||(o[a]=n[a],r&&((e.on||(e.on={}))["update:"+a]=function(e){n[a]=e}))};for(var l in n)a(l)}return e}function ge(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t?i:(ye(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i)}function me(e,t,n){
return ye(e,"__once__"+t+(n?"_"+n:""),!0),e}function ye(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&_e(e[i],t+"_"+i,n);else _e(e,t,n)}function _e(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function be(e,t){if(t&&l(t)){var n=e.on=e.on?y({},e.on):{};for(var i in t){var r=n[i],o=t[i];n[i]=r?[].concat(r,o):o}}return e}function we(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?we(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function ke(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"==typeof i&&i&&(e[t[n]]=t[n+1])}return e}function xe(e,t){return"string"==typeof e?t+e:e}function Se(e){e._o=me,e._n=f,e._s=d,e._l=ce,e._t=de,e._q=w,e._i=k,e._m=ge,e._f=fe,e._k=he,e._b=ve,e._v=T,e._e=zn,e._u=we,e._g=be,e._d=ke,e._p=xe}function Fe(e,t,n,i,r){var a,s=this,l=r.options;v(i,"_uid")?(a=Object.create(i))._original=i:(a=i,i=i._original);var u=o(l._compiled),c=!u;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||nn,this.injections=re(l.inject,i),this.slots=function(){return s.$slots||se(e.scopedSlots,s.$slots=oe(n,i)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return se(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=se(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var o=Ae(a,e,t,n,r,c);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,i){return Ae(a,e,t,n,i,c)}}function Ce(e,t,n,i,r){var o=I(e);return o.fnContext=n,o.fnOptions=i,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function Ee(e,t){for(var n in t)e[ln(n)]=t[n]}function Te(e,t,n,a,l){if(!i(e)){var u=n.$options._base;if(s(e)&&(e=u.extend(e)),"function"==typeof e){var d;if(i(e.cid)&&void 0===(e=function(e,t){if(o(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var n=fi;if(n&&r(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&r(e.loadingComp))return e.loadingComp;if(n&&!r(e.owners)){var a=e.owners=[n],l=!0,u=null,d=null;n.$on("hook:destroyed",function(){return h(a,n)});var f=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==u&&(clearTimeout(u),u=null),null!==d&&(clearTimeout(d),d=null))},p=x(function(n){e.resolved=Le(n,t),l?a.length=0:f(!0)}),v=x(function(t){r(e.errorComp)&&(e.error=!0,f(!0))}),g=e(p,v);return s(g)&&(c(g)?i(e.resolved)&&g.then(p,v):c(g.component)&&(g.component.then(p,v),r(g.error)&&(e.errorComp=Le(g.error,t)),r(g.loading)&&(e.loadingComp=Le(g.loading,t),0===g.delay?e.loading=!0:u=setTimeout(function(){u=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,f(!1))},g.delay||200)),r(g.timeout)&&(d=setTimeout(function(){d=null,i(e.resolved)&&v(null)},g.timeout)))),l=!1,e.loading?e.loadingComp:e.resolved}}(d=e,u)))return function(e,t,n,i,r){var o=zn();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:i,tag:r},o}(d,t,n,a,l);t=t||{},Ze(e),r(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),a=o[i],s=t.model.callback;r(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[i]=[s].concat(a)):o[i]=s}(e.options,t);var f=function(e,t,n){var o=t.options.props;if(!i(o)){var a={},s=e.attrs,l=e.props;if(r(s)||r(l))for(var u in o){var c=dn(u);te(a,l,u,c,!0)||te(a,s,u,c,!1)}return a}}(t,e);if(o(e.options.functional))return function(e,t,n,i,o){var a=e.options,s={},l=a.props;if(r(l))for(var u in l)s[u]=N(u,l,t||nn);else r(n.attrs)&&Ee(s,n.attrs),r(n.props)&&Ee(s,n.props);var c=new Fe(n,s,o,i,e),d=a.render.call(null,c._c,c);if(d instanceof Nn)return Ce(d,n,c.parent,a);if(Array.isArray(d)){for(var f=ne(d)||[],p=new Array(f.length),h=0;h<f.length;h++)p[h]=Ce(f[h],n,c.parent,a);return p}}(e,f,t,n,a);var p=t.on;if(t.on=t.nativeOn,o(e.options["abstract"])){var v=t.slot;t={},v&&(t.slot=v)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<ui.length;n++){var i=ui[n],r=t[i],o=li[i];r===o||r&&r._merged||(t[i]=r?Ie(o,r):o)}}(t);var g=e.options.name||l;return new Nn("vue-component-"+e.cid+(g?"-"+g:""),t,(void 0),(void 0),(void 0),n,{Ctor:e,propsData:f,listeners:p,tag:l,children:a},d)}}}function Ie(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function Ae(e,t,n,l,u,c){return(Array.isArray(n)||a(n))&&(u=l,l=n,n=void 0),o(c)&&(u=di),function(e,t,n,a,l){if(r(n)&&r(n.__ob__))return zn();if(r(n)&&r(n.is)&&(t=n.is),!t)return zn();Array.isArray(a)&&"function"==typeof a[0]&&((n=n||{}).scopedSlots={"default":a[0]},a.length=0),l===di?a=ne(a):l===ci&&(a=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(a));var u,c;if("string"==typeof t){var d;c=e.$vnode&&e.$vnode.ns||yn.getTagNamespace(t),u=yn.isReservedTag(t)?new Nn(yn.parsePlatformTagName(t),n,a,(void 0),(void 0),e):n&&n.pre||!r(d=B(e.$options,"components",t))?new Nn(t,n,a,(void 0),(void 0),e):Te(d,n,e,a,t)}else u=Te(t,n,e,a);return Array.isArray(u)?u:r(u)?(r(c)&&function f(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),r(e.children))for(var a=0,s=e.children.length;a<s;a++){var l=e.children[a];r(l.tag)&&(i(l.ns)||o(n)&&"svg"!==l.tag)&&f(l,t,n)}}(u,c),r(n)&&function(e){s(e.style)&&Y(e.style),s(e["class"])&&Y(e["class"])}(n),u):zn()}(e,t,n,l,u)}function Le(e,t){return(e.__esModule||Mn&&"Module"===e[Symbol.toStringTag])&&(e=e["default"]),s(e)?t.extend(e):e}function Oe(e){return e.isComment&&e.asyncFactory}function $e(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(r(n)&&(r(n.componentOptions)||Oe(n)))return n}}function Re(e,t){si.$on(e,t)}function Pe(e,t){si.$off(e,t)}function Me(e,t){var n=si;return function i(){null!==t.apply(null,arguments)&&n.$off(e,i)}}function je(e,t,n){si=e,Q(t,n||{},Re,Pe,Me,e),si=void 0}function De(e){var t=pi;return pi=e,function(){pi=t}}function Ve(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Be(e,t){if(t){if(e._directInactive=!1,Ve(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Be(e.$children[n]);Ne(e,"activated")}}function Ne(e,t){C();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,o=n.length;r<o;r++)H(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),E()}function Ue(){var e,t;for(bi=wi(),yi=!0,hi.sort(function(e,t){return e.id-t.id}),_i=0;_i<hi.length;_i++)(e=hi[_i]).before&&e.before(),t=e.id,gi[t]=null,e.run();var n=vi.slice(),i=hi.slice();_i=hi.length=vi.length=0,gi={},mi=yi=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Be(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Ne(i,"updated")}}(i),Pn&&yn.devtools&&Pn.emit("flush")}function ze(e,t,n){Fi.get=function(){return this[t][n]},Fi.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Fi)}function qe(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[];e.$parent&&A(!1);var o=function(o){r.push(o);var a=N(o,t,n,e);O(i,o,a),o in e||ze(e,"_props",o)};for(var a in t)o(a);A(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t)e[n]="function"!=typeof t[n]?b:fn(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;l(t=e._data="function"==typeof t?function(e,t){C();try{return e.call(t,t)}catch(e){return G(e,t,"data()"),{}}finally{E()}}(t,e):t||{})||(t={});for(var n=Object.keys(t),i=e.$options.props,r=(e.$options.methods,n.length);r--;){var o=n[r];i&&v(i,o)||(a=void 0,36!==(a=(o+"").charCodeAt(0))&&95!==a&&ze(e,"_data",o))}var a;L(t,!0)}(e):L(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),i=Rn();for(var r in t){var o=t[r],a="function"==typeof o?o:o.get;i||(n[r]=new Si(e,a||b,b,Ci)),r in e||Ge(e,r,o)}}(e,t.computed),t.watch&&t.watch!==An&&function(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)Ke(e,n,i[r]);else Ke(e,n,i)}}(e,t.watch)}function Ge(e,t,n){var i=!Rn();"function"==typeof n?(Fi.get=i?He(t):We(n),Fi.set=b):(Fi.get=n.get?i&&!1!==n.cache?He(t):We(n.get):b,Fi.set=n.set||b),Object.defineProperty(e,t,Fi)}function He(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Vn.target&&t.depend(),t.value}}function We(e){return function(){return e.call(this,this)}}function Ke(e,t,n,i){return l(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,i)}function Ze(e){var t=e.options;if(e["super"]){var n=Ze(e["super"]);if(n!==e.superOptions){e.superOptions=n;var i=function(e){var t,n=e.options,i=e.sealedOptions;for(var r in n)n[r]!==i[r]&&(t||(t={}),t[r]=n[r]);return t}(e);i&&y(e.extendOptions,i),(t=e.options=V(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function Xe(e){this._init(e)}function Ye(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var o=e.name||n.options.name,a=function(e){this._init(e)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=t++,a.options=V(n.options,e),a["super"]=n,a.options.props&&function(e){var t=e.options.props;for(var n in t)ze(e.prototype,"_props",n)}(a),a.options.computed&&function(e){var t=e.options.computed;for(var n in t)Ge(e.prototype,n,t[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,gn.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=y({},a.options),r[i]=a,a}}function Je(e){return e&&(e.Ctor.options.name||e.tag)}function Qe(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:(n=e,"[object RegExp]"===rn.call(n)&&e.test(t));var n}function et(e,t){var n=e.cache,i=e.keys,r=e._vnode;for(var o in n){var a=n[o];if(a){var s=Je(a.componentOptions);s&&!t(s)&&tt(n,o,i,r)}}}function tt(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,h(n,t)}function nt(e){for(var t=e.data,n=e,i=e;r(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(t=it(i.data,t));for(;r(n=n.parent);)n&&n.data&&(t=it(t,n.data));return function(e,t){return r(e)||r(t)?rt(e,ot(t)):""}(t.staticClass,t["class"])}function it(e,t){return{staticClass:rt(e.staticClass,t.staticClass),"class":r(e["class"])?[e["class"],t["class"]]:t["class"]}}function rt(e,t){return e?t?e+" "+t:e:t||""}function ot(e){return Array.isArray(e)?function(e){for(var t,n="",i=0,o=e.length;i<o;i++)r(t=ot(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):s(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}function at(e,t){var n=e.data.ref;if(r(n)){var i=e.context,o=e.componentInstance||e.elm,a=i.$refs;t?Array.isArray(a[n])?h(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}function st(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&r(e.data)===r(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,i=r(n=e.data)&&r(n=n.attrs)&&n.type,o=r(n=t.data)&&r(n=n.attrs)&&n.type;return i===o||Ki(i)&&Ki(o)}(e,t)||o(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function lt(e,t,n){var i,o,a={};for(i=t;i<=n;++i)r(o=e[i].key)&&(a[o]=i);return a}function ut(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,i,r,o=e===Yi,a=t===Yi,s=ct(e.data.directives,e.context),l=ct(t.data.directives,t.context),u=[],c=[];for(n in l)i=s[n],r=l[n],i?(r.oldValue=i.value,r.oldArg=i.arg,ft(r,"update",t,e),r.def&&r.def.componentUpdated&&c.push(r)):(ft(r,"bind",t,e),r.def&&r.def.inserted&&u.push(r));if(u.length){var d=function(){for(var n=0;n<u.length;n++)ft(u[n],"inserted",t,e)};o?ee(t,"insert",d):d()}if(c.length&&ee(t,"postpatch",function(){for(var n=0;n<c.length;n++)ft(c[n],"componentUpdated",t,e)}),!o)for(n in s)l[n]||ft(s[n],"unbind",e,e,a)}(e,t)}function ct(e,t){var n,i,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++)(i=e[n]).modifiers||(i.modifiers=er),r[dt(i)]=i,i.def=B(t.$options,"directives",i.name);return r}function dt(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function ft(e,t,n,i,r){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,i,r)}catch(i){G(i,n.context,"directive "+e.name+" "+t+" hook")}}function pt(e,t){var n=t.componentOptions;if(!(r(n)&&!1===n.Ctor.options.inheritAttrs||i(e.data.attrs)&&i(t.data.attrs))){var o,a,s=t.elm,l=e.data.attrs||{},u=t.data.attrs||{};for(o in r(u.__ob__)&&(u=t.data.attrs=y({},u)),u)a=u[o],l[o]!==a&&ht(s,o,a);for(o in(Fn||En)&&u.value!==l.value&&ht(s,"value",u.value),l)i(u[o])&&(Bi(o)?s.removeAttributeNS(Vi,Ni(o)):Pi(o)||s.removeAttribute(o))}}function ht(e,t,n){e.tagName.indexOf("-")>-1?vt(e,t,n):Di(t)?Ui(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Pi(t)?e.setAttribute(t,ji(t,n)):Bi(t)?Ui(n)?e.removeAttributeNS(Vi,Ni(t)):e.setAttributeNS(Vi,t,n):vt(e,t,n)}function vt(e,t,n){if(Ui(n))e.removeAttribute(t);else{if(Fn&&!Cn&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}function gt(e,t){var n=t.elm,o=t.data,a=e.data;if(!(i(o.staticClass)&&i(o["class"])&&(i(a)||i(a.staticClass)&&i(a["class"])))){var s=nt(t),l=n._transitionClasses;r(l)&&(s=rt(s,ot(l))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}function mt(e,t,n){var i=Ai;return function r(){null!==t.apply(null,arguments)&&_t(e,r,n,i)}}function yt(e,t,n,i){if(ar){var r=bi,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Ai.addEventListener(e,t,Ln?{capture:n,passive:i}:n)}function _t(e,t,n,i){(i||Ai).removeEventListener(e,t._wrapper||t,n)}function bt(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},o=e.data.on||{};Ai=t.elm,function(e){if(r(e[rr])){var t=Fn?"change":"input";e[t]=[].concat(e[rr],e[t]||[]),delete e[rr]}r(e[or])&&(e.change=[].concat(e[or],e.change||[]),delete e[or])}(n),Q(n,o,yt,_t,mt,t.context),Ai=void 0}}function wt(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,o,a=t.elm,s=e.data.domProps||{},l=t.data.domProps||{};for(n in r(l.__ob__)&&(l=t.data.domProps=y({},l)),s)n in l||(a[n]="");for(n in l){if(o=l[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var u=i(o)?"":String(o);kt(a,u)&&(a.value=u)}else if("innerHTML"===n&&Gi(a.tagName)&&i(a.innerHTML)){(Li=Li||document.createElement("div")).innerHTML="<svg>"+o+"</svg>";for(var c=Li.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}else if(o!==s[n])try{a[n]=o}catch(e){}}}}function kt(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,i=e._vModifiers;if(r(i)){if(i.number)return f(n)!==f(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}function xt(e){var t=St(e.style);return e.staticStyle?y(e.staticStyle,t):t}function St(e){return Array.isArray(e)?_(e):"string"==typeof e?ur(e):e}function Ft(e,t){var n=t.data,o=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(o.staticStyle)&&i(o.style))){var a,s,l=t.elm,u=o.staticStyle,c=o.normalizedStyle||o.style||{},d=u||c,f=St(t.data.style)||{};t.data.normalizedStyle=r(f.__ob__)?y({},f):f;var p=function(e,t){var n,i={};if(t)for(var r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=xt(r.data))&&y(i,n);(n=xt(e.data))&&y(i,n);for(var o=e;o=o.parent;)o.data&&(n=xt(o.data))&&y(i,n);return i}(t,!0);for(s in d)i(p[s])&&fr(l,s,"");for(s in p)(a=p[s])!==d[s]&&fr(l,s,null==a?"":a)}}function Ct(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(gr).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Et(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(gr).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function Tt(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&y(t,mr(e.name||"v")),y(t,e),t}return"string"==typeof e?mr(e):void 0}}function It(e){Fr(function(){Fr(e)})}function At(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Ct(e,t))}function Lt(e,t){e._transitionClasses&&h(e._transitionClasses,t),Et(e,t)}function Ot(e,t,n){var i=$t(e,t),r=i.type,o=i.timeout,a=i.propCount;if(!r)return n();var s=r===_r?kr:Sr,l=0,u=function(){e.removeEventListener(s,c),n()},c=function(t){t.target===e&&++l>=a&&u()};setTimeout(function(){l<a&&u()},o+1),e.addEventListener(s,c)}function $t(e,t){var n,i=window.getComputedStyle(e),r=(i[wr+"Delay"]||"").split(", "),o=(i[wr+"Duration"]||"").split(", "),a=Rt(r,o),s=(i[xr+"Delay"]||"").split(", "),l=(i[xr+"Duration"]||"").split(", "),u=Rt(s,l),c=0,d=0;return t===_r?a>0&&(n=_r,c=a,d=o.length):t===br?u>0&&(n=br,c=u,d=l.length):d=(n=(c=Math.max(a,u))>0?a>u?_r:br:null)?n===_r?o.length:l.length:0,{type:n,timeout:c,propCount:d,hasTransform:n===_r&&Cr.test(i[wr+"Property"])}}function Rt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return Pt(t)+Pt(e[n])}))}function Pt(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Mt(e,t){var n=e.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Tt(e.data.transition);if(!i(o)&&!r(n._enterCb)&&1===n.nodeType){for(var a=o.css,l=o.type,u=o.enterClass,c=o.enterToClass,d=o.enterActiveClass,p=o.appearClass,h=o.appearToClass,v=o.appearActiveClass,g=o.beforeEnter,m=o.enter,y=o.afterEnter,_=o.enterCancelled,b=o.beforeAppear,w=o.appear,k=o.afterAppear,S=o.appearCancelled,F=o.duration,C=pi,E=pi.$vnode;E&&E.parent;)C=E.context,E=E.parent;var T=!C._isMounted||!e.isRootInsert;if(!T||w||""===w){var I=T&&p?p:u,A=T&&v?v:d,L=T&&h?h:c,O=T&&b||g,$=T&&"function"==typeof w?w:m,R=T&&k||y,P=T&&S||_,M=f(s(F)?F.enter:F),j=!1!==a&&!Cn,D=Vt($),V=n._enterCb=x(function(){j&&(Lt(n,L),Lt(n,A)),V.cancelled?(j&&Lt(n,I),P&&P(n)):R&&R(n),n._enterCb=null});e.data.show||ee(e,"insert",function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),$&&$(n,V)}),O&&O(n),j&&(At(n,I),At(n,A),It(function(){Lt(n,I),V.cancelled||(At(n,L),D||(Dt(M)?setTimeout(V,M):Ot(n,l,V)))})),e.data.show&&(t&&t(),$&&$(n,V)),j||D||V()}}}function jt(e,t){function n(){S.cancelled||(!e.data.show&&o.parentNode&&((o.parentNode._pending||(o.parentNode._pending={}))[e.key]=e),h&&h(o),b&&(At(o,c),At(o,p),It(function(){Lt(o,c),S.cancelled||(At(o,d),w||(Dt(k)?setTimeout(S,k):Ot(o,u,S)))})),v&&v(o,S),b||w||S())}var o=e.elm;r(o._enterCb)&&(o._enterCb.cancelled=!0,o._enterCb());var a=Tt(e.data.transition);if(i(a)||1!==o.nodeType)return t();if(!r(o._leaveCb)){var l=a.css,u=a.type,c=a.leaveClass,d=a.leaveToClass,p=a.leaveActiveClass,h=a.beforeLeave,v=a.leave,g=a.afterLeave,m=a.leaveCancelled,y=a.delayLeave,_=a.duration,b=!1!==l&&!Cn,w=Vt(v),k=f(s(_)?_.leave:_),S=o._leaveCb=x(function(){o.parentNode&&o.parentNode._pending&&(o.parentNode._pending[e.key]=null),b&&(Lt(o,d),Lt(o,p)),S.cancelled?(b&&Lt(o,c),m&&m(o)):(t(),g&&g(o)),o._leaveCb=null});y?y(n):n()}}function Dt(e){return"number"==typeof e&&!isNaN(e)}function Vt(e){if(i(e))return!1;var t=e.fns;return r(t)?Vt(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Bt(e,t){!0!==t.data.show&&Mt(t)}function Nt(e,t,n){Ut(e,t,n),(Fn||En)&&setTimeout(function(){Ut(e,t,n)},0)}function Ut(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var o,a,s=0,l=e.options.length;s<l;s++)if(a=e.options[s],r)o=k(i,qt(a))>-1,a.selected!==o&&(a.selected=o);else if(w(qt(a),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));r||(e.selectedIndex=-1)}}function zt(e,t){return t.every(function(t){return!w(t,e)})}function qt(e){return"_value"in e?e._value:e.value}function Gt(e){e.target.composing=!0}function Ht(e){e.target.composing&&(e.target.composing=!1,Wt(e.target,"input"))}function Wt(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Kt(e){return!e.componentInstance||e.data&&e.data.transition?e:Kt(e.componentInstance._vnode)}function Zt(e){var t=e&&e.componentOptions;return t&&t.Ctor.options["abstract"]?Zt($e(t.children)):e}function Xt(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var o in r)t[ln(o)]=r[o];return t}function Yt(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Jt(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Qt(e){e.data.newPos=e.elm.getBoundingClientRect()}function en(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}var tn,nn=Object.freeze({}),rn=Object.prototype.toString,on=p("key,ref,slot,slot-scope,is"),an=Object.prototype.hasOwnProperty,sn=/-(\w)/g,ln=g(function(e){return e.replace(sn,function(e,t){return t?t.toUpperCase():""})}),un=g(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),cn=/\B([A-Z])/g,dn=g(function(e){return e.replace(cn,"-$1").toLowerCase()}),fn=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n},pn=function(e,t,n){return!1},hn=function(e){return e},vn="data-server-rendered",gn=["component","directive","filter"],mn=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],yn={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:pn,isReservedAttr:pn,isUnknownElement:pn,getTagNamespace:b,parsePlatformTagName:hn,mustUseProp:pn,async:!0,_lifecycleHooks:mn},_n=new RegExp("[^"+/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source+".$_\\d]"),bn="__proto__"in{},wn="undefined"!=typeof window,kn="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,xn=kn&&WXEnvironment.platform.toLowerCase(),Sn=wn&&window.navigator.userAgent.toLowerCase(),Fn=Sn&&/msie|trident/.test(Sn),Cn=Sn&&Sn.indexOf("msie 9.0")>0,En=Sn&&Sn.indexOf("edge/")>0,Tn=(Sn&&Sn.indexOf("android"),Sn&&/iphone|ipad|ipod|ios/.test(Sn)||"ios"===xn),In=(Sn&&/chrome\/\d+/.test(Sn),Sn&&/phantomjs/.test(Sn),Sn&&Sn.match(/firefox\/(\d+)/)),An={}.watch,Ln=!1;if(wn)try{var On={};Object.defineProperty(On,"passive",{get:function(){Ln=!0}}),window.addEventListener("test-passive",null,On)}catch(nn){}var $n,Rn=function(){return void 0===tn&&(tn=!wn&&!kn&&"undefined"!=typeof e&&e.process&&"server"===e.process.env.VUE_ENV),tn},Pn=wn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Mn="undefined"!=typeof Symbol&&F(Symbol)&&"undefined"!=typeof Reflect&&F(Reflect.ownKeys);$n="undefined"!=typeof Set&&F(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var jn=b,Dn=0,Vn=function(){this.id=Dn++,this.subs=[]};Vn.prototype.addSub=function(e){this.subs.push(e)},Vn.prototype.removeSub=function(e){h(this.subs,e)},Vn.prototype.depend=function(){Vn.target&&Vn.target.addDep(this)},Vn.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Vn.target=null;var Bn=[],Nn=function(e,t,n,i,r,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Un={child:{configurable:!0}};Un.child.get=function(){return this.componentInstance},Object.defineProperties(Nn.prototype,Un);var zn=function(e){void 0===e&&(e="");var t=new Nn;return t.text=e,t.isComment=!0,t},qn=Array.prototype,Gn=Object.create(qn);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=qn[e];S(Gn,e,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&a.observeArray(r),a.dep.notify(),o})});var Hn=Object.getOwnPropertyNames(Gn),Wn=!0,Kn=function(e){var t;this.value=e,this.dep=new Vn,this.vmCount=0,S(e,"__ob__",this),Array.isArray(e)?(bn?(t=Gn,e.__proto__=t):function(e,t,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];S(e,o,t[o])}}(e,Gn,Hn),this.observeArray(e)):this.walk(e)};Kn.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)O(e,t[n])},Kn.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)L(e[t])};var Zn=yn.optionMergeStrategies;Zn.data=function(e,t,n){return n?M(e,t,n):t&&"function"!=typeof t?e:M(e,t)},mn.forEach(function(e){Zn[e]=j}),gn.forEach(function(e){Zn[e+"s"]=D}),Zn.watch=function(e,t,n,i){if(e===An&&(e=void 0),t===An&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var o in y(r,e),t){var a=r[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},Zn.props=Zn.methods=Zn.inject=Zn.computed=function(e,t,n,i){if(!e)return t;var r=Object.create(null);return y(r,e),t&&y(r,t),r},Zn.provide=M;var Xn,Yn=function(e,t){return void 0===t?e:t},Jn=!1,Qn=[],ei=!1;if("undefined"!=typeof Promise&&F(Promise)){var ti=Promise.resolve();Xn=function(){ti.then(Z),Tn&&setTimeout(b)},Jn=!0}else if(Fn||"undefined"==typeof MutationObserver||!F(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Xn="undefined"!=typeof n&&F(n)?function(){n(Z)}:function(){setTimeout(Z,0)};else{var ni=1,ii=new MutationObserver(Z),ri=document.createTextNode(String(ni));ii.observe(ri,{characterData:!0}),Xn=function(){ni=(ni+1)%2,ri.data=String(ni)},Jn=!0}var oi=new $n,ai=g(function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:n,capture:i,passive:t}});Se(Fe.prototype);var si,li={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;li.prepatch(n,n)}else(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new e.componentOptions.Ctor(n)}(e,pi)).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,i,r){var o=i.data.scopedSlots,a=e.$scopedSlots,s=!!(o&&!o.$stable||a!==nn&&!a.$stable||o&&e.$scopedSlots.$key!==o.$key),l=!!(r||e.$options._renderChildren||s);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=r,e.$attrs=i.data.attrs||nn,e.$listeners=n||nn,t&&e.$options.props){A(!1);for(var u=e._props,c=e.$options._propKeys||[],d=0;d<c.length;d++){var f=c[d],p=e.$options.props;u[f]=N(f,p,t,e)}A(!0),e.$options.propsData=t}n=n||nn;var h=e.$options._parentListeners;e.$options._parentListeners=n,je(e,n,h),l&&(e.$slots=oe(r,i.context),e.$forceUpdate())}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t,n=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,Ne(i,"mounted")),e.data.keepAlive&&(n._isMounted?((t=i)._inactive=!1,vi.push(t)):Be(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Ve(e))||e._inactive)){e._inactive=!0;for(var i=0;i<e.$children.length;i++)n(e.$children[i]);Ne(e,"deactivated")}}(t,!0):t.$destroy())}},ui=Object.keys(li),ci=1,di=2,fi=null,pi=null,hi=[],vi=[],gi={},mi=!1,yi=!1,_i=0,bi=0,wi=Date.now;if(wn&&!Fn){var ki=window.performance;ki&&"function"==typeof ki.now&&wi()>document.createEvent("Event").timeStamp&&(wi=function(){return ki.now()})}var xi=0,Si=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++xi,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new $n,this.newDepIds=new $n,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!_n.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=b)),this.value=this.lazy?void 0:this.get()};Si.prototype.get=function(){var e;C(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;G(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Y(e),E(),this.cleanupDeps()}return e},Si.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Si.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Si.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==gi[t]){if(gi[t]=!0,yi){for(var n=hi.length-1;n>_i&&hi[n].id>e.id;)n--;hi.splice(n+1,0,e)}else hi.push(e);mi||(mi=!0,X(Ue))}}(this)},Si.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||s(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){G(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},Si.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Si.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Si.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||h(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var Fi={enumerable:!0,configurable:!0,get:b,set:b},Ci={lazy:!0},Ei=0;!function(e){e.prototype._init=function(e){var t=this;t._uid=Ei++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=V(Ze(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,n=t.parent;if(n&&!t["abstract"]){for(;n.$options["abstract"]&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&je(e,t)}(t),function(e){
e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=oe(t._renderChildren,i),e.$scopedSlots=nn,e._c=function(t,n,i,r){return Ae(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return Ae(e,t,n,i,r,!0)};var r=n&&n.data;O(e,"$attrs",r&&r.attrs||nn,null,!0),O(e,"$listeners",t._parentListeners||nn,null,!0)}(t),Ne(t,"beforeCreate"),function(e){var t=re(e.$options.inject,e);t&&(A(!1),Object.keys(t).forEach(function(n){O(e,n,t[n])}),A(!0))}(t),qe(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),Ne(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(Xe),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=$,e.prototype.$delete=R,e.prototype.$watch=function(e,t,n){if(l(t))return Ke(this,e,t,n);(n=n||{}).user=!0;var i=new Si(this,e,t,n);if(n.immediate)try{t.call(this,i.value)}catch(e){G(e,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Xe),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(i,arguments)}var i=this;return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;for(var s=a.length;s--;)if((o=a[s])===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this._events[e];if(t){t=t.length>1?m(t):t;for(var n=m(arguments,1),i='event handler for "'+e+'"',r=0,o=t.length;r<o;r++)H(t[r],this,n,this,i)}return this}}(Xe),function(e){e.prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,o=De(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Ne(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options["abstract"]||h(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Ne(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Xe),function(e){Se(e.prototype),e.prototype.$nextTick=function(e){return X(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,r=n._parentVnode;r&&(t.$scopedSlots=se(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{fi=t,e=i.call(t._renderProxy,t.$createElement)}catch(n){G(n,t,"render"),e=t._vnode}finally{fi=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof Nn||(e=zn()),e.parent=r,e}}(Xe);var Ti=[String,RegExp,Array],Ii={KeepAlive:{name:"keep-alive","abstract":!0,props:{include:Ti,exclude:Ti,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)tt(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){et(e,function(e){return Qe(t,e)})}),this.$watch("exclude",function(t){et(e,function(e){return!Qe(t,e)})})},render:function(){var e=this.$slots["default"],t=$e(e),n=t&&t.componentOptions;if(n){var i=Je(n),r=this.include,o=this.exclude;if(r&&(!i||!Qe(r,i))||o&&i&&Qe(o,i))return t;var a=this.cache,s=this.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;a[l]?(t.componentInstance=a[l].componentInstance,h(s,l),s.push(l)):(a[l]=t,s.push(l),this.max&&s.length>parseInt(this.max)&&tt(a,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return yn}};Object.defineProperty(e,"config",t),e.util={warn:jn,extend:y,mergeOptions:V,defineReactive:O},e.set=$,e["delete"]=R,e.nextTick=X,e.observable=function(e){return L(e),e},e.options=Object.create(null),gn.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,y(e.options.components,Ii),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=m(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=V(this.options,e),this}}(e),Ye(e),function(e){gn.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}(e)}(Xe),Object.defineProperty(Xe.prototype,"$isServer",{get:Rn}),Object.defineProperty(Xe.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Xe,"FunctionalRenderContext",{value:Fe}),Xe.version="2.6.12";var Ai,Li,Oi,$i=p("style,class"),Ri=p("input,textarea,option,select,progress"),Pi=p("contenteditable,draggable,spellcheck"),Mi=p("events,caret,typing,plaintext-only"),ji=function(e,t){return Ui(t)||"false"===t?"false":"contenteditable"===e&&Mi(t)?t:"true"},Di=p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Vi="http://www.w3.org/1999/xlink",Bi=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ni=function(e){return Bi(e)?e.slice(6,e.length):""},Ui=function(e){return null==e||!1===e},zi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},qi=p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Gi=p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Hi=function(e){return qi(e)||Gi(e)},Wi=Object.create(null),Ki=p("text,number,password,search,email,tel,url"),Zi=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(e,t){return document.createElementNS(zi[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Xi={create:function(e,t){at(t)},update:function(e,t){e.data.ref!==t.data.ref&&(at(e,!0),at(t))},destroy:function(e){at(e,!0)}},Yi=new Nn("",{},[]),Ji=["create","activate","update","remove","destroy"],Qi={create:ut,update:ut,destroy:function(e){ut(e,Yi)}},er=Object.create(null),tr=[Xi,Qi],nr={create:pt,update:pt},ir={create:gt,update:gt},rr="__r",or="__c",ar=Jn&&!(In&&Number(In[1])<=53),sr={create:bt,update:bt},lr={create:wt,update:wt},ur=g(function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){if(e){var i=e.split(n);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}),cr=/^--/,dr=/\s*!important$/,fr=function(e,t,n){if(cr.test(t))e.style.setProperty(t,n);else if(dr.test(n))e.style.setProperty(dn(t),n.replace(dr,""),"important");else{var i=hr(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)e.style[i]=n[r];else e.style[i]=n}},pr=["Webkit","Moz","ms"],hr=g(function(e){if(Oi=Oi||document.createElement("div").style,"filter"!==(e=ln(e))&&e in Oi)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<pr.length;n++){var i=pr[n]+t;if(i in Oi)return i}}),vr={create:Ft,update:Ft},gr=/\s+/,mr=g(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),yr=wn&&!Cn,_r="transition",br="animation",wr="transition",kr="transitionend",xr="animation",Sr="animationend";yr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(wr="WebkitTransition",kr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(xr="WebkitAnimation",Sr="webkitAnimationEnd"));var Fr=wn?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()},Cr=/\b(transform|all)(,|$)/,Er=function(e){function t(e){var t=C.parentNode(e);r(t)&&C.removeChild(t,e)}function n(e,t,n,i,a,c,p){if(r(e.elm)&&r(c)&&(e=c[p]=I(e)),e.isRootInsert=!a,!function(e,t,n,i){var a=e.data;if(r(a)){var u=r(e.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(e,!1),r(e.componentInstance))return s(e,t),l(n,e.elm,i),o(u)&&function(e,t,n,i){for(var o,a=e;a.componentInstance;)if(a=a.componentInstance._vnode,r(o=a.data)&&r(o=o.transition)){for(o=0;o<S.activate.length;++o)S.activate[o](Yi,a);t.push(a);break}l(n,e.elm,i)}(e,t,n,i),!0}}(e,t,n,i)){var h=e.data,v=e.children,g=e.tag;r(g)?(e.elm=e.ns?C.createElementNS(e.ns,g):C.createElement(g,e),f(e),u(e,v,t),r(h)&&d(e,t),l(n,e.elm,i)):o(e.isComment)?(e.elm=C.createComment(e.text),l(n,e.elm,i)):(e.elm=C.createTextNode(e.text),l(n,e.elm,i))}}function s(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,c(e)?(d(e,t),f(e)):(at(e),t.push(e))}function l(e,t,n){r(e)&&(r(n)?C.parentNode(n)===e&&C.insertBefore(e,t,n):C.appendChild(e,t))}function u(e,t,i){if(Array.isArray(t))for(var r=0;r<t.length;++r)n(t[r],i,e.elm,null,!0,t,r);else a(e.text)&&C.appendChild(e.elm,C.createTextNode(String(e.text)))}function c(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return r(e.tag)}function d(e,t){for(var n=0;n<S.create.length;++n)S.create[n](Yi,e);r(k=e.data.hook)&&(r(k.create)&&k.create(Yi,e),r(k.insert)&&t.push(e))}function f(e){var t;if(r(t=e.fnScopeId))C.setStyleScope(e.elm,t);else for(var n=e;n;)r(t=n.context)&&r(t=t.$options._scopeId)&&C.setStyleScope(e.elm,t),n=n.parent;r(t=pi)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&C.setStyleScope(e.elm,t)}function h(e,t,i,r,o,a){for(;r<=o;++r)n(i[r],a,e,t,!1,i,r)}function v(e){var t,n,i=e.data;if(r(i))for(r(t=i.hook)&&r(t=t.destroy)&&t(e),t=0;t<S.destroy.length;++t)S.destroy[t](e);if(r(t=e.children))for(n=0;n<e.children.length;++n)v(e.children[n])}function g(e,n,i){for(;n<=i;++n){var o=e[n];r(o)&&(r(o.tag)?(m(o),v(o)):t(o.elm))}}function m(e,n){if(r(n)||r(e.data)){var i,o=S.remove.length+1;for(r(n)?n.listeners+=o:n=function(e,n){function i(){0==--i.listeners&&t(e)}return i.listeners=n,i}(e.elm,o),r(i=e.componentInstance)&&r(i=i._vnode)&&r(i.data)&&m(i,n),i=0;i<S.remove.length;++i)S.remove[i](e,n);r(i=e.data.hook)&&r(i=i.remove)?i(e,n):n()}else t(e.elm)}function y(e,t,n,i){for(var o=n;o<i;o++){var a=t[o];if(r(a)&&st(e,a))return o}}function _(e,t,a,s,l,u){if(e!==t){r(t.elm)&&r(s)&&(t=s[l]=I(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))r(t.asyncFactory.resolved)?w(e.elm,t,a):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var f,p=t.data;r(p)&&r(f=p.hook)&&r(f=f.prepatch)&&f(e,t);var v=e.children,m=t.children;if(r(p)&&c(t)){for(f=0;f<S.update.length;++f)S.update[f](e,t);r(f=p.hook)&&r(f=f.update)&&f(e,t)}i(t.text)?r(v)&&r(m)?v!==m&&function(e,t,o,a,s){for(var l,u,c,d=0,f=0,p=t.length-1,v=t[0],m=t[p],b=o.length-1,w=o[0],k=o[b],x=!s;d<=p&&f<=b;)i(v)?v=t[++d]:i(m)?m=t[--p]:st(v,w)?(_(v,w,a,o,f),v=t[++d],w=o[++f]):st(m,k)?(_(m,k,a,o,b),m=t[--p],k=o[--b]):st(v,k)?(_(v,k,a,o,b),x&&C.insertBefore(e,v.elm,C.nextSibling(m.elm)),v=t[++d],k=o[--b]):st(m,w)?(_(m,w,a,o,f),x&&C.insertBefore(e,m.elm,v.elm),m=t[--p],w=o[++f]):(i(l)&&(l=lt(t,d,p)),i(u=r(w.key)?l[w.key]:y(w,t,d,p))?n(w,a,e,v.elm,!1,o,f):st(c=t[u],w)?(_(c,w,a,o,f),t[u]=void 0,x&&C.insertBefore(e,c.elm,v.elm)):n(w,a,e,v.elm,!1,o,f),w=o[++f]);d>p?h(e,i(o[b+1])?null:o[b+1].elm,o,f,b,a):f>b&&g(t,d,p)}(d,v,m,a,u):r(m)?(r(e.text)&&C.setTextContent(d,""),h(d,null,m,0,m.length-1,a)):r(v)?g(v,0,v.length-1):r(e.text)&&C.setTextContent(d,""):e.text!==t.text&&C.setTextContent(d,t.text),r(p)&&r(f=p.hook)&&r(f=f.postpatch)&&f(e,t)}}}function b(e,t,n){if(o(n)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}function w(e,t,n,i){var a,l=t.tag,c=t.data,f=t.children;if(i=i||c&&c.pre,t.elm=e,o(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(a=c.hook)&&r(a=a.init)&&a(t,!0),r(a=t.componentInstance)))return s(t,n),!0;if(r(l)){if(r(f))if(e.hasChildNodes())if(r(a=c)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==e.innerHTML)return!1}else{for(var p=!0,h=e.firstChild,v=0;v<f.length;v++){if(!h||!w(h,f[v],n,i)){p=!1;break}h=h.nextSibling}if(!p||h)return!1}else u(t,f,n);if(r(c)){var g=!1;for(var m in c)if(!E(m)){g=!0,d(t,n);break}!g&&c["class"]&&Y(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}var k,x,S={},F=e.modules,C=e.nodeOps;for(k=0;k<Ji.length;++k)for(S[Ji[k]]=[],x=0;x<F.length;++x)r(F[x][Ji[k]])&&S[Ji[k]].push(F[x][Ji[k]]);var E=p("attrs,class,staticClass,staticStyle,key");return function(e,t,a,s){if(!i(t)){var l,u=!1,d=[];if(i(e))u=!0,n(t,d);else{var f=r(e.nodeType);if(!f&&st(e,t))_(e,t,d,null,null,s);else{if(f){if(1===e.nodeType&&e.hasAttribute(vn)&&(e.removeAttribute(vn),a=!0),o(a)&&w(e,t,d))return b(t,d,!0),e;l=e,e=new Nn(C.tagName(l).toLowerCase(),{},[],(void 0),l)}var p=e.elm,h=C.parentNode(p);if(n(t,d,p._leaveCb?null:h,C.nextSibling(p)),r(t.parent))for(var m=t.parent,y=c(t);m;){for(var k=0;k<S.destroy.length;++k)S.destroy[k](m);if(m.elm=t.elm,y){for(var x=0;x<S.create.length;++x)S.create[x](Yi,m);var F=m.data.hook.insert;if(F.merged)for(var E=1;E<F.fns.length;E++)F.fns[E]()}else at(m);m=m.parent}r(h)?g([e],0,0):r(e.tag)&&v(e)}}return b(t,d,u),t.elm}r(e)&&v(e)}}({nodeOps:Zi,modules:[nr,ir,sr,lr,vr,wn?{create:Bt,activate:Bt,remove:function(e,t){!0!==e.data.show?jt(e,t):t()}}:{}].concat(tr)});Cn&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&Wt(e,"input")});var Tr={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?ee(n,"postpatch",function(){Tr.componentUpdated(e,t,n)}):Nt(e,t,n.context),e._vOptions=[].map.call(e.options,qt)):("textarea"===n.tag||Ki(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Gt),e.addEventListener("compositionend",Ht),e.addEventListener("change",Ht),Cn&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Nt(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,qt);r.some(function(e,t){return!w(e,i[t])})&&(e.multiple?t.value.some(function(e){return zt(e,r)}):t.value!==t.oldValue&&zt(t.value,r))&&Wt(e,"change")}}},Ir={model:Tr,show:{bind:function(e,t,n){var i=t.value,r=(n=Kt(n)).data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,Mt(n,function(){e.style.display=o})):e.style.display=i?o:"none"},update:function(e,t,n){var i=t.value;!i!=!t.oldValue&&((n=Kt(n)).data&&n.data.transition?(n.data.show=!0,i?Mt(n,function(){e.style.display=e.__vOriginalDisplay}):jt(n,function(){e.style.display="none"})):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},Ar={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},Lr=function(e){return e.tag||Oe(e)},Or=function(e){return"show"===e.name},$r={name:"transition",props:Ar,"abstract":!0,render:function(e){var t=this,n=this.$slots["default"];if(n&&(n=n.filter(Lr)).length){var i=this.mode,r=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var o=Zt(r);if(!o)return r;if(this._leaving)return Yt(e,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var l=(o.data||(o.data={})).transition=Xt(this),u=this._vnode,c=Zt(u);if(o.data.directives&&o.data.directives.some(Or)&&(o.data.show=!0),c&&c.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,c)&&!Oe(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var d=c.data.transition=y({},l);if("out-in"===i)return this._leaving=!0,ee(d,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),Yt(e,r);if("in-out"===i){if(Oe(o))return u;var f,p=function(){f()};ee(l,"afterEnter",p),ee(l,"enterCancelled",p),ee(d,"delayLeave",function(e){f=e})}}return r}}},Rr=y({tag:String,moveClass:String},Ar);delete Rr.mode;var Pr={Transition:$r,TransitionGroup:{props:Rr,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var r=De(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots["default"]||[],o=this.children=[],a=Xt(this),s=0;s<r.length;s++){var l=r[s];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a)}if(i){for(var u=[],c=[],d=0;d<i.length;d++){var f=i[d];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?u.push(f):c.push(f)}this.kept=e(t,null,u),this.removed=c}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Jt),e.forEach(Qt),e.forEach(en),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var n=e.elm,i=n.style;At(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(kr,n._moveCb=function r(e){e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener(kr,r),n._moveCb=null,Lt(n,t))})}}))},methods:{hasMove:function(e,t){if(!yr)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){Et(n,e)}),Ct(n,t),n.style.display="none",this.$el.appendChild(n);var i=$t(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};Xe.config.mustUseProp=function(e,t,n){return"value"===n&&Ri(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Xe.config.isReservedTag=Hi,Xe.config.isReservedAttr=$i,Xe.config.getTagNamespace=function(e){return Gi(e)?"svg":"math"===e?"math":void 0},Xe.config.isUnknownElement=function(e){if(!wn)return!0;if(Hi(e))return!1;if(e=e.toLowerCase(),null!=Wi[e])return Wi[e];var t=document.createElement(e);return e.indexOf("-")>-1?Wi[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Wi[e]=/HTMLUnknownElement/.test(t.toString())},y(Xe.options.directives,Ir),y(Xe.options.components,Pr),Xe.prototype.__patch__=wn?Er:b,Xe.prototype.$mount=function(e,t){return function(e,t,n){var i;return e.$el=t,e.$options.render||(e.$options.render=zn),Ne(e,"beforeMount"),i=function(){e._update(e._render(),n)},new Si(e,i,b,{before:function(){e._isMounted&&!e._isDestroyed&&Ne(e,"beforeUpdate")}},(!0)),n=!1,null==e.$vnode&&(e._isMounted=!0,Ne(e,"mounted")),e}(this,e=e&&wn?function(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}(e):void 0,t)},wn&&setTimeout(function(){yn.devtools&&Pn&&Pn.emit("init",Xe)},0),t.exports=Xe}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:2}],7:[function(e,t,n){function i(){}var r=n.cache={};n.insert=function(e){if(r[e])return i;r[e]=!0;var t=document.createElement("style");return t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e,document.getElementsByTagName("head")[0].appendChild(t),function(){document.getElementsByTagName("head")[0].removeChild(t),r[e]=!1}}},{}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.service;e.plugin;this.addFormComponents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.layerId,i=e.components,r=void 0===i?[]:i;t.addFormComponents({layerId:n,components:r})},this.getEditableLayersId=function(){return Object.keys(t.getEditableLayers())},this.getSession=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getSession(e)},this.getFeature=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getFeature(e)},this.subscribe=function(e,n){return t.subscribe(e,n)},this.unsubscribe=function(e,n){return t.unsubscribe(e,n)},this.showPanel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.toolboxes;n&&Array.isArray(n)&&t.getToolBoxes().forEach(function(e){return e.setShow(n.indexOf(e.getId())!==-1)}),t.getPlugin().showEditingPanel(e)},this.hidePanel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.getPlugin().hideEditingPanel(e)},this.getToolBoxById=function(e){return t.getToolBoxById(e)},this.startEditing=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],n.tools,n.feature,n.selected),r=void 0===i||i,o=n.title,a=n.disablemapcontrols,s=void 0!==a&&a,l=n.showselectlayers,u=void 0===l||l;return new Promise(function(i,a){var l=t.getToolBoxById(e);t.setShowSelectLayers(u),l?(l.setSelected(r),r&&t.setSelectedToolbox(l),o&&l.setTitle(o),l.start(n).then(function(e){s&&t.disableMapControlsConflict(!0),i(e?{toolbox:l,data:e}:l)}).fail(function(e){a(e)})):a()})},this.setSaveConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setSaveConfig(e)},this.addNewFeature=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.addNewFeature(e,n)},this.stopEditing=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,r){var o=t.getToolBoxById(e);o.stop(n).then(i).fail(r)})},this.commitChanges=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.commit(e)},this.resetDefault=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.plugin,i=void 0===n||n,r=e.toolboxes,o=void 0===r||r;o&&t.getToolBoxes().forEach(function(e){e.resetDefault()}),i&&t.resetDefault()},this.setApplicationEditingConstraints=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setApplicationEditingConstraints(e)},this.getMapService=function(){return t.getMapService()}};n["default"]=i},{}],9:[function(e,t,n){var i=e("vueify/lib/insert-css").insert(".choose-and-zoom-to-feature[data-v-3c5d6465]{\n display: flex;\n flex-direction: column;\n justify-content: space-between;\n}\n\n#editing-layers-choose-feature .editing-choose-feature-radio-input[data-v-3c5d6465]{\n  align-items: center;\n  padding: 5px;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #eeeeee;\n}");!function(){Object.defineProperty(n,"__esModule",{value:!0});var e=(g3wsdk.constant.G3W_FID,g3wsdk.gui.GUI);g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature;n["default"]={name:"choosefeature",data:function(){return{feature:this.$options.feature}},methods:{selectFeature:function(e){this.feature.splice(0),this.feature.push(e)},getAttributesFeature:function(e){var t=e.getProperties();return this.$options.attributes.map(function(e){var n=e.label,i=e.name;return{attribute:n,value:t[i]}})},zoomToFeature:function(t){var n=e.getService("map");n.seSelectionLayerVisible(!1),n.zoomToFeatures([t],{highlight:!0,duration:1e3}).then(function(){return n.seSelectionLayerVisible(!0)})}},mounted:function(){e.closeContent()}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var r="function"==typeof t.exports?t.exports.options:t.exports;r.functional,r.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"editing-layers-choose-feature"}},e._l(e.$options.features,function(t,i){return n("div",{staticClass:"editing-choose-feature-radio-input"},[n("section",{staticClass:"choose-and-zoom-to-feature"},[n("div",[n("input",{staticClass:"magic-radio",attrs:{id:"choose_feature_"+i,name:"radio",type:"radio"},on:{click:function(n){return n.stopPropagation(),e.selectFeature(t)}}}),e._v(" "),n("label",{staticStyle:{color:"transparent"},attrs:{"for":"choose_feature_"+i}},[e._v("id\n        ")])]),e._v(" "),n("div",{staticClass:"skin-color","class":e.g3wtemplate.font.marker,staticStyle:{"padding-left":"3px","font-size":"1.3em",cursor:"pointer","margin-top":"10px"},on:{click:function(n){return n.stopPropagation(),e.zoomToFeature(t)}}})]),e._v(" "),n("section",{staticStyle:{"overflow-x":"auto",display:"flex"}},e._l(e.getAttributesFeature(t),function(t){var i=t.attribute,r=t.value;return n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",padding:"5px"}},[n("span",{staticStyle:{"font-weight":"bold","margin-bottom":"10px"}},[e._v("\n          "+e._s(i)+"\n        ")]),e._v(" "),n("span",{staticStyle:{"align-self":"start","white-space":"nowrap"}},[e._v(e._s(r)+"\n        ")])])}),0)])}),0)},r.staticRenderFns=[],r._scopeId="data-v-3c5d6465",t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.dispose(i),t.hot.data?n.reload("data-v-3c5d6465",r):n.createRecord("data-v-3c5d6465",r))}()},{vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],10:[function(e,t,n){!function(){Object.defineProperty(n,"__esModule",{value:!0});var e=g3wsdk.constant.G3W_FID,t=g3wsdk.gui.GUI,i=g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature,r=g3wsdk.core.map.MapLayersStoreRegistry;n["default"]={name:"Copyfeaturesfromotherlayers",data:function(){return{selectedFeatures:this.$options.selectedFeatures}},methods:{getAttributesFeature:function(t,n){var r=this.$options.layers[n],o=r.external,a=r.fields;return i(t.getProperties()).filter(function(t){return t!==e}).map(function(e){return{attribute:o?e:a.find(function(t){return t.name===e}).label,value:t.get(e)}})},selectFeature:function(e){var t=this.selectedFeatures.find(function(t){return t===e});t?this.selectedFeatures=this.selectedFeatures.filter(function(t){return t!==e}):this.selectedFeatures.push(e)},getLayerTitle:function(e){return r.getLayerById(e)?r.getLayerById(e).getTitle():t.getService("map").getLayerById(e).get("name")},zoomToFeature:function(e){var n=t.getService("map");n.seSelectionLayerVisible(!1),n.zoomToFeatures([e],{highlight:!0,duration:1e3}).then(function(){return n.seSelectionLayerVisible(!0)})}},mounted:function(){t.closeContent()}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editing-layers-features"},e._l(Object.keys(e.$options.layers),function(t){return n("div",[n("div",{staticClass:"skin-color",staticStyle:{"font-weight":"bold","font-size":"1.2em"}},[e._v(e._s(e.getLayerTitle(t)))]),e._v(" "),n("divider"),e._v(" "),n("div",{staticClass:"copy-features-for-layer-content",staticStyle:{"overflow-x":"auto"}},e._l(e.$options.layers[t].features,function(i,r){return n("div",{staticStyle:{padding:"5px",position:"relative",display:"flex","align-items":"baseline","border-bottom":"1px solid #eeeeee"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","border-right":"1px solid #eeeeee"}},[n("div",{staticClass:"skin-color","class":e.g3wtemplate.font.marker,staticStyle:{padding:"0 5px 15px 5px","font-size":"1.1em",cursor:"pointer","margin-right":"5px"},on:{click:function(t){return t.stopPropagation(),e.zoomToFeature(i)}}}),e._v(" "),n("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.steps.help.select_elements",expression:"'plugins.editing.steps.help.select_elements'",arg:"right",modifiers:{create:!0}}]},[n("input",{staticClass:"magic-checkbox",attrs:{id:t+"_"+r+"_select_feature_from_layer",type:"checkbox"},on:{click:function(t){return t.stopPropagation(),e.selectFeature(i)}}}),e._v(" "),n("label",{staticStyle:{color:"#FFFFFF"},attrs:{"for":t+"_"+r+"_select_feature_from_layer"}},[e._v(" "+e._s(i.getId()||0)+" ")])])]),e._v(" "),e._l(e.getAttributesFeature(i,t),function(t){var i=t.attribute,r=t.value;return n("div",{staticStyle:{display:"flex","flex-direction":"column",padding:"10px"}},[n("span",{staticStyle:{"font-weight":"bold","margin-bottom":"10px"}},[e._v(e._s(i))]),e._v(" "),n("span",{staticStyle:{"align-self":"start"}},[e._v(e._s(r))])])})],2)}),0)],1)}),0)},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-0a61c6b7",i):n.createRecord("data-v-0a61c6b7",i))}()},{vue:5,"vue-hot-reload-api":3}],11:[function(e,t,n){!function(){Object.defineProperty(n,"__esModule",{value:!0});var e=g3wsdk.constant.G3W_FID,t=g3wsdk.gui.GUI,i=g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature,r=g3wsdk.core.map.MapLayersStoreRegistry;n["default"]={name:"Copyfeaturesfromotherlayers",data:function(){return{features:this.$options.features,selectfeature:null,selectedFeatures:this.$options.selectedFeatures}},methods:{getAttributesFeature:function(t){var n=this.$options.fields;return i(t.getProperties()).filter(function(t){return t!==e}).map(function(e){return{attribute:n?n.find(function(t){return t.name===e}).label:e,value:t.get(e)}})},getLayerTitle:function(e){return r.getLayerById(e).getTitle()},zoomToFeature:function(e){var n=t.getService("map");n.seSelectionLayerVisible(!1),n.zoomToFeatures([e],{highlight:!0,duration:1e3}).then(function(){return n.seSelectionLayerVisible(!0)})}},watch:{selectfeature:function(e){this.selectedFeatures.splice(0,1,e)}}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editing-layers-features"},[n("div",{staticClass:"copy-features-for-layer-content",staticStyle:{"overflow-x":"auto"}},e._l(e.features,function(t,i){return n("div",{staticStyle:{padding:"5px",position:"relative",
display:"flex","align-items":"baseline","border-bottom":"1px solid #eeeeee"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","border-right":"1px solid #eeeeee"}},[n("div",{staticClass:"skin-color","class":e.g3wtemplate.font.marker,staticStyle:{padding:"0 5px 15px 5px","font-size":"1.1em",cursor:"pointer","margin-right":"5px"},on:{click:function(n){return n.stopPropagation(),e.zoomToFeature(t)}}}),e._v(" "),n("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.steps.help.select_elements",expression:"'plugins.editing.steps.help.select_elements'",arg:"right",modifiers:{create:!0}}]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectfeature,expression:"selectfeature"}],staticClass:"magic-radio",attrs:{id:e.layerId+"_"+i+"_select_feature_from_layer",name:"radio",type:"radio"},domProps:{value:t,checked:e._q(e.selectfeature,t)},on:{change:function(n){e.selectfeature=t}}}),e._v(" "),n("label",{staticStyle:{color:"#FFFFFF"},attrs:{"for":e.layerId+"_"+i+"_select_feature_from_layer"}},[e._v(e._s(i))])])]),e._v(" "),e._l(e.getAttributesFeature(t),function(t){var i=t.attribute,r=t.value;return n("div",{staticStyle:{display:"flex","flex-direction":"column",padding:"10px"}},[n("span",{staticStyle:{"font-weight":"bold","margin-bottom":"10px"}},[e._v(e._s(i))]),e._v(" "),n("span",{staticStyle:{"align-self":"start"}},[e._v(e._s(r))])])})],2)}),0)])},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-9d236326",i):n.createRecord("data-v-9d236326",i))}()},{vue:5,"vue-hot-reload-api":3}],12:[function(e,t,n){!function(){function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Toolbox.vue"),r=t(i),o=e("./SelectEditingLayers.vue"),a=t(o),s=g3wsdk.gui.GUI,l=g3wsdk.core.i18n.tPlugin,u=g3wsdk.core.ApplicationState;n["default"]={name:"Editing",data:function(){return{saving:!1}},components:{toolbox:r["default"],selectlayers:a["default"]},transitions:{addremovetransition:"showhide"},methods:{undo:function(){this.$options.service.undo()},redo:function(){this.$options.service.redo()},commit:function(e){var t=this;this.saving=!0;var n=this.$options.service.getToolBoxById(e);this.$options.service.commit({toolbox:n,modal:!1}).always(function(){return t.saving=!1})},saveAll:function(){},startToolBox:function(e){var t=this._getToolBoxById(e);u.online&&t.canEdit()&&t.start()},stopToolBox:function(e){var t=this._getToolBoxById(e);t.state.editing.history.commit?this.$options.service.commit().always(function(){return t.stop()}):t.stop()},saveToolBox:function(e){var t=this._getToolBoxById(e);t.save()},_setActiveToolOfToolbooxSelected:function(e,t){var n=this._getToolBoxById(t);this.state.toolboxidactivetool=t;var i=n.getToolById(e);n.setActiveTool(i)},startActiveTool:function(e,t){var n=this;if(this.state.toolboxidactivetool&&t!==this.state.toolboxidactivetool){var i=this.state.toolboxidactivetool;this._checkDirtyToolBoxes(i).then(function(i){i&&i.stopActiveTool(),n._setActiveToolOfToolbooxSelected(e,t)})}else this._setActiveToolOfToolbooxSelected(e,t)},stopActiveTool:function(e){var t=this._getToolBoxById(e);t.stopActiveTool()},setSelectedToolbox:function(e){var t=this.$options.service,n=this._getToolBoxById(e),i=t.getToolBoxes(),r=i.find(function(e){return e.isSelected()});r&&r.setSelected(!1),n.setSelected(!0),this.state.toolboxselected=n,n.getDependencies().length?this.state.message="<div>\n"+l("editing.messages.change_toolbox_relation")+"\n</div>":this.state.message=null},_checkDirtyToolBoxes:function(e){return this.$options.service.commitDirtyToolBoxes(e)},_getToolBoxById:function(e){var t=this.$options.service,n=t.getToolBoxById(e);return n},_enableEditingButtons:function(e){this.editingButtonsEnabled=!e}},computed:{message:function c(){var c="";return c},canCommit:function(){return"default"===this.$options.service.getSaveConfig().mode&&this.state.toolboxselected&&this.state.toolboxselected.state.editing.history.commit&&this.editingButtonsEnabled},canUndo:function d(){var e=this.state.toolboxselected,d=e&&e.state.editing.history.undo&&this.editingButtonsEnabled;return this.$options.service.fireEvent("canUndo",d),d},canRedo:function f(){var e=this.state.toolboxselected,f=e&&e.state.editing.history.redo&&this.editingButtonsEnabled;return this.$options.service.fireEvent("canRedo",f),f}},watch:{canCommit:function(e){this.$options.service.registerLeavePage(e)}},created:function(){this.appState=u,this.$options.service.registerOnLineOffLineEvent(),s.closeContent(),this.$options.service.setOpenEditingPanel(!0),s.on("opencontent",this._enableEditingButtons),s.on("closeform",this._enableEditingButtons),s.on("closecontent",this._enableEditingButtons)},beforeDestroy:function(){this.$options.service.setOpenEditingPanel(!1),s.off("opencontent",this._enableEditingButtons),s.off("closeform",this._enableEditingButtons),s.off("closecontent",this._enableEditingButtons),this.$options.service.unregisterOnLineOffLineEvent(),this.$options.service.fireEvent("closeeditingpanel"),this.$options.service.onCloseEditingPanel(),this.$options.service.clearAllLayersUniqueFieldsValues()}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"g3w-editing-panel"},[n("bar-loader",{attrs:{loading:e.saving}}),e._v(" "),e.appState.online?e._e():n("div",{staticStyle:{"margin-bottom":"5px",padding:"5px","border-radius":"3px","background-color":"orange",color:"white","font-weight":"bold"},attrs:{id:"onlineofflinemessage"}},[n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.messages.offline",expression:"'editing.messages.offline'"}]})]),e._v(" "),e.showcommitbar?n("div",{directives:[{name:"disabled",rawName:"v-disabled",value:e.saving,expression:"saving"}],staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"5px"}},[n("div",{staticClass:"editing-button","class":{enabled:e.canCommit},staticStyle:{"margin-right":"auto"},on:{click:function(t){e.canCommit?e.commit():null}}},[n("span",{staticClass:"editing-icon","class":e.g3wtemplate.font.save})]),e._v(" "),n("div",{staticClass:"editing-button ","class":{enabled:e.canUndo},on:{click:function(t){e.canUndo?e.undo():null}}},[n("span",{staticClass:"editing-icon","class":e.g3wtemplate.font["arrow-left"]})]),e._v(" "),n("div",{staticClass:"editing-button ","class":{enabled:e.canRedo},on:{click:function(t){e.canRedo?e.redo():null}}},[n("span",{staticClass:"editing-icon","class":e.g3wtemplate.font["arrow-right"]})])]):n("div",{staticStyle:{height:"10px"}}),e._v(" "),e.state.showselectlayers&&e.state.toolboxes.length>1?n("selectlayers"):e._e(),e._v(" "),n("div",{attrs:{id:"toolboxes"}},e._l(e.state.toolboxes,function(t){return n("toolbox",{key:t.id,attrs:{state:t,resourcesurl:e.resourcesurl},on:{setselectedtoolbox:e.setSelectedToolbox,starttoolbox:e.startToolBox,stoptoolbox:e.stopToolBox,savetoolbox:e.saveToolBox,setactivetool:e.startActiveTool,stopactivetool:e.stopActiveTool}})}),1)],1)},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-cb98e6ce",i):n.createRecord("data-v-cb98e6ce",i))}()},{"./SelectEditingLayers.vue":15,"./Toolbox.vue":18,vue:5,"vue-hot-reload-api":3}],13:[function(e,t,n){var i=e("vueify/lib/insert-css").insert(".g3w-editing-new-relation-vector-type[data-v-112912af] {\n  margin-bottom: 5px;\n  font-weight: bold\n}");!function(){function t(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var i=g3wsdk.core.i18n.tPlugin,r=g3wsdk.core.utils.toRawType,o=e("../services/relationservice"),a=g3wsdk.core.layer.Layer,s=g3wsdk.gui.vue.Mixins,l=s.fieldsMixin,u=s.resizeMixin,c=s.mediaMixin,d=void 0;n["default"]={mixins:[c,l,u],name:"g3w-relation",data:function(){return{showAddVectorRelationTools:!1,copylayerid:null,active:!1,showallfieldsindex:null,tooltips:{add_relation:"plugins.editing.form.relations.tooltips.add_relation",link_relation:"plugins.editing.form.relations.tooltips.link_relation",open_relation_tool:"plugins.editing.form.relations.tooltips.open_relation_tools",unlink_relation:"plugins.editing.form.relations.tooltips.unlink_relation"},value:null,placeholdersearch:i("editing.search")+" ..."}},methods:{resize:function(){if(this.active&&"none"!==this.$el.style.display){var e=$(".g3wform_body").height(),t=$(".g3wform_footer").height(),n=$(this.$refs.relation_header_title).outerHeight(),i=$(this.$refs.relation_header_tools).outerHeight(),r=$(this.$el).find(".dataTables_scrollHead").outerHeight(),o=$(this.$el).find(".dataTables_paginate.paging_simple_numbers").outerHeight(),a=$(".editing-save-all-form").outerHeight(),s=e-t-n-i-r-o-a;this.isVectorRelation&&this.showAddVectorRelationTools&&(s-=$(this.$refs.relation_vector_tools).outerHeight()),$(this.$refs.relation_body).find("div.dataTables_scrollBody").height(s),d&&d.columns.adjust()}},unlinkRelation:function(e){this._service.unlinkRelation(e)},copyFeatureFromOtherLayer:function(){var t=this,n=e("../services/editingservice"),i=this.copyFeatureLayers.find(function(e){return e.id===t.copylayerid});if(i.external){var r=n.getMapService().getLayerById(this.copylayerid);this._service.addRelationFromOtherLayer({layer:r,external:!0})}else{var o=n.getProjectLayerById(this.copylayerid);this._service.addRelationFromOtherLayer({layer:o,external:!1})}},addVectorRelation:function(){this._service.addRelation(),this.showAddVectorRelationTools=!1},addRelationAndLink:function(){function e(){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isVectorRelation||!this.copyFeatureLayers.length){e.next=7;break}return this.showAddVectorRelationTools=!this.showAddVectorRelationTools,e.next=4,this.$nextTick();case 4:this.resize(),e.next=8;break;case 7:this._service.addRelation();case 8:case"end":return e.stop()}},i,this)}));return e}(),startTool:function(e,t){this._service.startTool(e,t).then(function(){})["catch"](function(e){})},linkRelation:function(){this._service.linkRelation()},updateExternalKeyValueRelations:function(e){this._service.updateExternalKeyValueRelations(e)},isRequired:function(){return this._service.isRequired()},relationAttributesSubset:function(e){var t=[],n=this.relationsFields(e);return n.forEach(function(e){if(!Array.isArray(e.value)){var n=e.label,i=e.value;t.push({label:n,value:i})}}),t},relationsAttributesSubsetLength:function(e){return this.relationAttributesSubset(e).length},relationsFields:function(e){return this._service.relationFields(e)},showAllRelationFields:function(e){this.showallfieldsindex=this.showallfieldsindex==e?null:e},showAllFieds:function(e){return this.showallfieldsindex==e},getRelationTools:function(){return this._service.getRelationTools()},isLink:function(e){return["photo","link"].indexOf(this.getFieldType(e))!==-1},getValue:function(e){return e&&"Object"===r(e)?e=e.value:"string"==typeof e&&0===e.indexOf("_new_")&&(e=null),this.value=e,e},getFileName:function(e){return this.getValue(e).split("/").pop()},_setDataTableSearch:function(){$("#filterRelation").on("keyup",function(){d.search($(this).val()).draw()})},_createDataTable:function(){d=$(".g3wform-relation-table").DataTable({scrollX:!0,order:[2,"asc"],destroy:!0,scrollResize:!0,scrollCollapse:!0,pageLength:10,columnDefs:[{orderable:!1,targets:[0,1]}]}),$(".dataTables_filter, .dataTables_length").hide(),this._setDataTableSearch()},destroyTable:function(){d&&(d=d.destroy(),d=null,$("#filterRelation").off())}},computed:{relationsLength:function(){return this.relations.length},fieldrequired:function(){return this._service.isRequired()},enableAddLinkButtons:function(){return!this.relations.length||this.relations.length&&"ONE"!==this.relation.type}},watch:{relations:function(e){0===e.length&&this.destroyTable()}},beforeCreate:function(){this.delayType="debounce"},created:function(){var t=this,n=e("../services/editingservice"),i=n.getLayerById(this.relation.child);if(this.isVectorRelation=i.getType()===a.LayerTypes.VECTOR,this.isVectorRelation){this.copyFeatureLayers=n.getProjectLayersWithSameGeometryOfLayer(i,{exclude:[this.relation.father]}).map(function(e){return{id:e.getId(),name:e.getName(),external:!1}});var r=n.getExternalLayersWithSameGeometryOfLayer(i);r.forEach(function(e){t.copyFeatureLayers.push({id:e.get("id"),name:e.get("name"),external:!0})}),this.copyFeatureLayers.length?(this.copyFeatureLayers.sort(function(e,t){var n=e.name,i=t.name;return n=n.toLowerCase(),i=i.toLowerCase(),n<i?-1:n>i?1:0}),this.copylayerid=this.copyFeatureLayers[0].id):this.copylayerid=null}this.loadEventuallyRelationValuesForInputs=!1,this._service=new o(this.layerId,{relation:this.relation,relations:this.relations}),this.capabilities=this._service.getEditingCapabilities(),this.formeventbus.$on("changeinput",this.updateExternalKeyValueRelations)},activated:function(){function n(){return i.apply(this,arguments)}var i=t(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.active=!0,this.showAddVectorRelationTools=!1,this.loadEventuallyRelationValuesForInputs||(t=e("../services/editingservice"),t.runEventHandler({type:"show-relation-editing",id:t._getRelationId({layerId:this.layerId,relation:this.relation}),component:this}),this.loadEventuallyRelationValuesForInputs=!0),n.next=5,this.$nextTick();case 5:!d&&this.relationsLength&&this._createDataTable(),this.resize();case 7:case"end":return n.stop()}},r,this)}));return n}(),deactivated:function(){this.destroyTable(),this.active=!1},beforeDestroy:function(){this.loadEventuallyRelationValuesForInputs=!0}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var r="function"==typeof t.exports?t.exports.options:t.exports;r.functional,r.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.active?n("div",{staticStyle:{"margin-bottom":"5px"}},[n("div",{ref:"relation_header_title",staticClass:"box-header with-border skin-color",staticStyle:{width:"100%",display:"flex","font-weight":"bold","font-size":"1.3em","align-items":"center","margin-button":"3px","background-color":"#ffffff"}},[n("span",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.edit_relation",expression:"'editing.edit_relation'"}]}),e._v(" "),n("span",{staticStyle:{"margin-left":"2px"}},[e._v(": "+e._s(e.relation.name.toUpperCase()))])]),e._v(" "),n("div",{ref:"relation_header_tools",staticClass:"box-header with-border",staticStyle:{width:"100%",display:"flex","margin-button":"3px","background-color":"#ffffff"}},[n("div",{staticStyle:{"margin-right":"auto"},attrs:{id:"search-box"}},[e.relationsLength?n("input",{staticClass:"form-control",attrs:{type:"text",id:"filterRelation",placeholder:e.placeholdersearch}}):e._e()]),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[void 0!==e.capabilities.relation.find(function(e){return"change_attr_feature"===e})?n("span",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:bottom.create",value:e.tooltips.link_relation,expression:"tooltips.link_relation",arg:"bottom",modifiers:{create:!0}}],staticClass:"g3w-icon add-link","class":[{disabled:!e.enableAddLinkButtons},e.g3wtemplate.font.link],attrs:{align:"center"},on:{click:function(t){t.stopPropagation(),e.enableAddLinkButtons?e.linkRelation():null}}}):e._e(),e._v(" "),void 0!==e.capabilities.relation.find(function(e){return"add_feature"===e})?n("span",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:bottom.create",value:e.tooltips.add_relation,expression:"tooltips.add_relation",arg:"bottom",modifiers:{create:!0}}],staticClass:"g3w-icon add-link pull-right","class":[{disabled:!e.enableAddLinkButtons},e.g3wtemplate.font.plus],on:{click:function(t){e.enableAddLinkButtons?e.addRelationAndLink():null}}}):e._e()])]),e._v(" "),e.showAddVectorRelationTools?n("section",{ref:"relation_vector_tools",staticStyle:{display:"flex","flex-direction":"column",border:"2px solid #eeeeee","background-color":"#ffffff",padding:"10px"}},[n("div",[n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.draw_new_feature",expression:"'editing.relation.draw_new_feature'"}],staticClass:"g3w-editing-new-relation-vector-type"}),e._v(" "),n("button",{staticClass:"btn skin-button",staticStyle:{width:"100%"},on:{click:function(t){return t.stopPropagation(),e.addVectorRelation(t)}}},[n("i",{"class":e.g3wtemplate.font.pencil})])]),e._v(" "),n("divider"),e._v(" "),n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.draw_or_copy",expression:"'editing.relation.draw_or_copy'"}],staticStyle:{"align-self":"center"}}),e._v(" "),n("divider"),e._v(" "),n("div",{staticStyle:{"flex-grow":"1",display:"flex","flex-direction":"column"},attrs:{id:"g3w-select-editable-layers-content"}},[n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.copy_feature_from_other_layer",expression:"'editing.relation.copy_feature_from_other_layer'"}],staticClass:"g3w-editing-new-relation-vector-type"}),e._v(" "),n("select",{directives:[{name:"select2",rawName:"v-select2",value:"copylayerid",expression:"'copylayerid'"}],attrs:{id:"g3w-select-editable-layers-to-copy"}},e._l(e.copyFeatureLayers,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name)+"\n        ")])}),0),e._v(" "),n("button",{staticClass:"btn skin-button",on:{click:function(t){return t.stopPropagation(),e.copyFeatureFromOtherLayer(t)}}},[n("i",{"class":e.g3wtemplate.font.clipboard})])])],1):e._e(),e._v(" "),n("div",{ref:"relation_body",staticClass:"box-body",staticStyle:{padding:"0"}},[e.relationsLength?[n("table",{staticClass:"table g3wform-relation-table table-striped",staticStyle:{width:"100%"}},[n("thead",[n("tr",[n("th",{directives:[{name:"t",rawName:"v-t",value:"tools",expression:"'tools'"}]}),e._v(" "),n("th"),e._v(" "),e._l(e.relationAttributesSubset(e.relations[0]),function(t){return n("th",[e._v(e._s(t.label))])})],2)]),e._v(" "),n("tbody",e._l(e.relations,function(t,i){return n("tr",{staticClass:"featurebox-header"},[n("td",[n("div",{staticStyle:{display:"flex"}},e._l(e.getRelationTools(),function(t){return n("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:plugin",value:t.state.name,expression:"relationtool.state.name",arg:"plugin"}],key:t.state.name,staticClass:"skin-tooltip-right editbtn enabled",attrs:{"data-toggle":"tooltip","data-placement":"right"},on:{click:function(n){return e.startTool(t,i)}}},[n("img",{attrs:{height:"20px",width:"20px",src:e.resourcesurl+"images/"+t.state.icon}})])}),0)]),e._v(" "),n("td",{staticClass:"action-cell"},[e.fieldrequired||void 0===e.capabilities.relation.find(function(e){return"change_attr_feature"===e})?e._e():n("div",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:e.tooltips.unlink_relation,expression:"tooltips.unlink_relation",arg:"right",modifiers:{create:!0}}],staticClass:"g3w-mini-relation-icon g3w-icon","class":e.g3wtemplate.font.unlink,attrs:{"aria-hidden":"true"},on:{click:function(t){return e.unlinkRelation(i)}}})]),e._v(" "),e._l(e.relationAttributesSubset(t),function(t){return n("td",{directives:[{name:"show",rawName:"v-show",value:!e.showAllFieds(i),expression:"!showAllFieds(index)"}]},[e.isMedia(t.value)&&e.getValue(t.value)?[n("div",{staticClass:"preview"},[n("a",{attrs:{href:e.getValue(t.value),target:"_blank"}},[n("div",{staticClass:"previewtype","class":e.getMediaType(t.value.mime_type).type},[n("i",{staticClass:"fa-2x","class":e.g3wtemplate.font[e.getMediaType(t.value.mime_type).type]})])]),e._v(" "),n("div",{staticClass:"filename"},[e._v(e._s(e.getFileName(t.value)))])])]:e.isLink(t)?n("a",{attrs:{href:e.getValue(t.value),target:"_blank"}},[e._v(e._s(e.getValue(t.value)))]):n("span",[e._v(e._s(e.getValue(t.value)))])],2)})],2)}),0)])]:e._e()],2)]):e._e()},r.staticRenderFns=[],r._scopeId="data-v-112912af",t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.dispose(i),t.hot.data?n.reload("data-v-112912af",r):n.createRecord("data-v-112912af",r))}()},{"../services/editingservice":42,"../services/relationservice":43,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],14:[function(e,t,n){!function(){function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0});var i=g3wsdk.core.workflow.WorkflowsStack,r=g3wsdk.gui.vue.services.FormService;n["default"]={props:{update:{type:Boolean},valid:{type:Boolean}},name:"Saveall",data:function(){return{loading:!1,enabled:!1}},computed:{disabled:function(){return!(this.enabled||this.valid&&this.update)}},methods:{save:function(){var n=this,r=e("../services/editingservice");this.loading=!0;var o=[].concat(t(i._workflows)).reverse().map(function(e){return e.getLastStep().getTask().saveAll(e.getContext().service.state.fields)});Promise.allSettled(o).then(function(){r.commit({modal:!1}).then(function(){i._workflows.forEach(function(e){return e.getContext().service.setUpdate(!1,{force:!1})})}).fail(function(){}).always(function(){n.loading=!1})})}},created:function(){i.getLength()>1&&(this.enabled=i._workflows.slice(0,i.getLength()-1).reduce(function(e,t){var n=t.getContext().service instanceof r?t.getContext().service.getState():{},i=n.valid,o=void 0===i||i,a=n.update,s=void 0!==a&&a;return o&&s&&e},!0))}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"editing-save-all-form"},[n("bar-loader",{attrs:{loading:e.loading}}),e._v(" "),n("div",{staticClass:"editing-button",staticStyle:{"background-color":"#ffffff",display:"flex","justify-content":"flex-end",width:"100%"}},[n("span",{directives:[{name:"disabled",rawName:"v-disabled",value:e.disabled,expression:"disabled"}],on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.save(t)}}},[n("i",{staticClass:"skin-color","class":e.g3wtemplate.font.save,staticStyle:{"font-size":"1.8em",padding:"5px","border-radius":"5px",cursor:"pointer","box-shadow":"0 3px 5px rgba(0,0,0,0.5)",margin:"5px"}})])])],1)},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-0c0483e5",i):n.createRecord("data-v-0c0483e5",i))}()},{"../services/editingservice":42,vue:5,"vue-hot-reload-api":3}],15:[function(e,t,n){var i=e("vueify/lib/insert-css").insert("#g3w-select-editable-layers-content[data-v-45d7f042] {\n  margin-bottom: 10px;\n  font-weight: bold;\n}\n#g3w-select-editable-layers-content label[data-v-45d7f042] {\n  color: #ffffff !important;\n}\n#g3w-select-editable-layers-to-show[data-v-45d7f042] {\n  cursor: pointer;\n}");!function(){Object.defineProperty(n,"__esModule",{value:!0});var t=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=e("../services/editingservice");n["default"]={name:"Selecteditinglayers",data:function(){var e=Object.entries(i.getEditableLayers()).map(function(e){var n=t(e,2),i=n[0],r=n[1];return{id:i,name:r.getName(),title:r.getTitle()}});return{selectedlayers:[],editinglayers:e}},watch:{selectedlayers:function(e){e.length>0?this.editinglayers.forEach(function(t){var n=t.id,r=e.indexOf(n)!==-1,o=i.getToolBoxById(n);o.setShow(r),r||(o.state.editing.history.commit?i.commit({toolbox:o}).always(function(){return o.stop()}):o.stop())}):this.editinglayers.forEach(function(e){var t=e.id;return i.getToolBoxById(t).setShow(!0)})}}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var r="function"==typeof t.exports?t.exports.options:t.exports;r.functional,r.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"skin-color",attrs:{id:"g3w-select-editable-layers-content"}},[n("label",{directives:[{name:"t",rawName:"v-t",value:"Layers",expression:"'Layers'"}],attrs:{"for":"g3w-select-editable-layers-to-show"}}),e._v(" "),n("select",{directives:[{name:"select2",rawName:"v-select2",value:"selectedlayers",expression:"'selectedlayers'"}],attrs:{id:"g3w-select-editable-layers-to-show",multiple:"multiple",clear:"true"}},e._l(e.editinglayers,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}),0)])},r.staticRenderFns=[],r._scopeId="data-v-45d7f042",t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.dispose(i),t.hot.data?n.reload("data-v-45d7f042",r):n.createRecord("data-v-45d7f042",r))}()},{"../services/editingservice":42,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],16:[function(e,t,n){!function(){function t(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=g3wsdk.core.utils,o=(r.base,r.inherit,g3wsdk.gui.vue.Mixins.resizeMixin),a=g3wsdk.gui.vue.Fields.media_field;e("../services/tableservice");n["default"]={name:"Table",mixins:[o],components:{"g3w-media":a},data:function(){return this.dataTable=null,{state:null,show:!0}},methods:{changeSize:function(){function e(){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function i(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:setTimeout(function(){return e.resize()});case 3:case"end":return t.stop()}},i,this)}));return e}(),showTool:function(e){return void 0!==this.state.capabilities.find(function(t){return t===e})},resize:function(){function e(){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function i(){var e,t,n,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("none"===this.$el.style.display){i.next=9;break}return i.next=3,this.$nextTick();case 3:e=$(".content").height(),t=$(".close-panel-block").outerHeight(),n=$("#editing_table  div.dataTables_scrollHeadInner").outerHeight(),r=$(".editing_table_title").outerHeight()+$(".editing_table_header").outerHeight()+$(".editing_table_relation_messagge").outerHeight()+$(".dataTables_length").outerHeight()+$(".dataTables_paginate.paging_simple_numbers").outerHeight()+$(".dataTables_info").outerHeight()+$(".dataTables_filter").outerHeight()+$(".table_editing_footer_buttons").outerHeight()+$("#editing_table .dataTables_paginate.paging_simple_numbers").outerHeight(),$("#editing_table  div.dataTables_scrollBody").height(e-t-n-r),this.dataTable&&this.dataTable.columns.adjust();case 9:case"end":return i.stop()}},i,this)}));return e}(),showValue:function(e){return!!this.state.headers.find(function(t){return t.name===e})},isMediaField:function(e){return this.$options.service.isMediaField(e)},stop:function(){this.$options.service.cancel()},save:function(){this.state.isrelation?this.$options.service.linkFeatures(this._linkFeatures):this.$options.service.save()},cancel:function(){this.$options.service.cancel()},deleteFeature:function(){function e(e){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function i(e){var n,r=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=$("#editing_table table tr#"+e),this.$options.service.deleteFeature(e).then(t(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.dataTable.row(n).remove().draw(),e.next=3,r.$nextTick();case 3:case"end":return e.stop()}},o,r)})))["catch"](function(){});case 2:case"end":return i.stop()}},i,this)}));return e}(),copyFeature:function(e){var n=this;this.$options.service.copyFeature(e).then(function(){var e=t(regeneratorRuntime.mark(function i(e){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.show=!1,n.dataTable.destroy(),e.next=4,n.$nextTick();case 4:return n.show=!0,e.next=7,n.$nextTick();case 7:n.setDataTable();case 8:case"end":return e.stop()}},i,n)}));return function(t){return e.apply(this,arguments)}}())},editFeature:function(e){this.$options.service.editFeature(e)},linkFeature:function(e,t){t.target.checked?this._linkFeatures.push(e):this._linkFeatures=this._linkFeatures.filter(function(t){return t!==e})},_setLayout:function(){return this.$options.service._setLayout()},getValue:function(e){return e&&"object"===("undefined"==typeof e?"undefined":i(e))&&e.constructor===Object?e=e.value:"string"==typeof e&&0===e.indexOf("_new_")&&(e=null),e},setDataTable:function(){this.dataTable=$("#editing_table table").DataTable({pageLength:10,scrollX:!0,scrollCollapse:!0,scrollResize:!0,order:[1,"asc"],columnDefs:[{orderable:!1,targets:0}]}),this.resize()}},watch:{"state.features":function(e){}},beforeCreate:function(){this.delayType="debounce"},mounted:function(){function e(){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:this.state.isrelation&&(this._linkFeatures=[]),this.setDataTable(),$("#table-editing-tools i").tooltip(),this.$options.service.emit("ready"),this.resize();case 7:case"end":return e.stop()}},i,this)}));return e}(),beforeDestroy:function(){this._linkFeatures&&(this._linkFeatures=null),this.dataTable.destroy()}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"g3w-editing-table",attrs:{id:"editing_table"}},[n("div",{ref:"editing_table_header",staticClass:"editing_table_header"},[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"baseline"}},[n("h3",{staticClass:"editing_table_title"},[e._v(e._s(e.state.title))]),e._v(" "),n("h-resize",{on:{h_size_change:e.changeSize}})],1),e._v(" "),e.state.isrelation?n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.relation.table.info",expression:"'editing.relation.table.info'"}],staticClass:"editing_table_relation_messagge",staticStyle:{"font-weight":"bold"}}):e._e()]),e._v(" "),e.show?n("table",{staticClass:"display",staticStyle:{width:"100%"}},[n("thead",[n("tr",[e.state.isrelation?e._e():n("th",{staticStyle:{"max-width":"60px"}}),e._v(" "),e.state.isrelation?n("th"):e._e(),e._v(" "),e._l(e.state.headers,function(t){return n("th",[e._v(e._s(t.label))])})],2)]),e._v(" "),n("tbody",e._l(e.state.features,function(t,i){return n("tr",{key:t.__gis3w_feature_uid,attrs:{id:t.__gis3w_feature_uid}},[e.state.isrelation?e._e():n("td",[n("div",{staticStyle:{display:"flex","justify-content":"space-between"
},attrs:{id:"table-editing-tools"}},[e.showTool("change_attr_feature")?n("i",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:"editing.table.edit",expression:"'editing.table.edit'",arg:"plugin"}],staticClass:"g3w-icon skin-tooltip-right","class":e.g3wtemplate.font.pencil,staticStyle:{color:"#30cce7"},attrs:{"data-placement":"right","aria-hidden":"true"},on:{click:function(n){return n.stopPropagation(),e.editFeature(t.__gis3w_feature_uid)}}}):e._e(),e._v(" "),e.showTool("add_feature")?n("i",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:"editing.table.copy",expression:"'editing.table.copy'",arg:"plugin"}],staticClass:"g3w-icon skin-tooltip-right","class":e.g3wtemplate.font["copy-paste"],staticStyle:{color:"#d98b14",padding:"5px 7px 5px 7px"},attrs:{"data-placement":"right","aria-hidden":"true"},on:{click:function(n){return n.stopPropagation(),e.copyFeature(t.__gis3w_feature_uid)}}}):e._e(),e._v(" "),e.showTool("delete_feature")?n("i",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:"editing.table.delete",expression:"'editing.table.delete'",arg:"plugin"}],staticClass:"g3w-icon skin-tooltip-right","class":e.g3wtemplate.font["trash-o"],staticStyle:{color:"red"},attrs:{"data-placement":"right","aria-hidden":"true"},on:{click:function(n){return n.stopPropagation(),e.deleteFeature(t.__gis3w_feature_uid)}}}):e._e()])]),e._v(" "),e.state.isrelation?n("td",[n("input",{staticClass:"magic-checkbox",attrs:{id:"relation__"+i,type:"checkbox"},on:{change:function(t){return e.linkFeature(i,t)}}}),e._v(" "),n("label",{attrs:{"for":"relation__"+i}})]):e._e(),e._v(" "),e._l(t,function(t,i){return e.showValue(i)?n("td",{key:i},[e.getValue(t)&&e.isMediaField(i)?n("g3w-media",{attrs:{state:t}}):n("p",[e._v(e._s(e.getValue(t)))])],1):e._e()})],2)}),0)]):e._e(),e._v(" "),n("div",{ref:"table_editing_footer_buttons",staticClass:"table_editing_footer_buttons",staticStyle:{position:"absolute",bottom:"10px",width:"100%",display:"flex","justify-content":"center"},attrs:{id:"buttons"}},[n("button",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:e.state.isrelation?"editing.form.buttons.save_and_back":"editing.form.buttons.save",expression:"state.isrelation ? 'editing.form.buttons.save_and_back' : 'editing.form.buttons.save'"}],staticClass:"btn btn-success",staticStyle:{"margin-right":"10px"},on:{click:e.save}}),e._v(" "),n("button",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:"editing.form.buttons.cancel",expression:"'editing.form.buttons.cancel'"}],staticClass:"btn btn-danger",on:{click:e.cancel}})])])},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-13f4ce0f",i):n.createRecord("data-v-13f4ce0f",i))}()},{"../services/tableservice":44,vue:5,"vue-hot-reload-api":3}],17:[function(e,t,n){!function(){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={name:"Tool",props:["state","resourcesurl"],data:function(){return{}},methods:{toggletool:function(){this.state.active?this.$emit("stopactivetool"):this.$emit("setactivetool",this.state.id)}}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.state.visible?n("div",{staticClass:"editbtn","class":{enabled:e.state.enabled,toggled:e.state.active},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.state.enabled&&e.toggletool()}}},[n("img",{directives:[{name:"t-title",rawName:"v-t-title:plugin",value:""+e.state.name,expression:"`${state.name}`",arg:"plugin"}],attrs:{height:"25px",width:"25px",src:e.resourcesurl+"images/"+e.state.icon}})]):e._e()},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-7f742067",i):n.createRecord("data-v-7f742067",i))}()},{vue:5,"vue-hot-reload-api":3}],18:[function(e,t,n){var i=e("vueify/lib/insert-css").insert(".toolbox[data-v-c4a84298] {\n  padding-bottom: 5px;\n}");!function(){function t(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Tool.vue"),o=t(r),a=e("./ToolsOfTool.vue"),s=t(a);g3wsdk.core.ApplicationState;n["default"]={name:"Toolbox",props:["state","resourcesurl"],data:function(){return{active:!1,currenttoolhelpmessage:null}},components:{tool:o["default"],toolsoftool:s["default"]},methods:{select:function(){this.isLayerReady&&(this.state.selected||this.$emit("setselectedtoolbox",this.state.id))},toggleEditing:function(){this.select(),this.state.layerstate.editing.ready&&!this.state.loading&&(this.state.editing.on?this.$emit("stoptoolbox",this.state.id):this.$emit("starttoolbox",this.state.id))},saveEdits:function(){this.$emit("savetoolbox",this.state.id)},stopActiveTool:function(){this.$emit("stopactivetool",this.state.id)},setActiveTool:function(e){this.$emit("setactivetool",e,this.state.id)}},computed:{toolsrow1:function(){return this.state.tools.filter(function(e){return 1===e.row})},toolsrow2:function(){return this.state.tools.filter(function(e){return 2===e.row})},toolsrow3:function(){return this.state.tools.filter(function(e){return 3===e.row})},canEdit:function(){return this.state.editing.canEdit},father:function(){return this.state.editing.father&&!!this.state.editing.dependencies.length},showtoolsoftool:function(){return!!this.state.toolsoftool.length},isLayerReady:function(){return this.state.layerstate.editing.ready}},created:function(){this.edit_layer_tooltip="editing.tooltip.edit_layer",this.$emit("canEdit",{id:this.state.id})},mounted:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:$(this.$refs.editingbutton).tooltip();case 3:case"end":return e.stop()}},n,this)}));return e}(),watch:{"state.activetool":function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:this.currenttoolhelpmessage=e&&e.getHelpMessage();case 3:case"end":return t.stop()}},n,this)}));return e}()}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var r="function"==typeof t.exports?t.exports.options:t.exports;r.functional,r.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.state.show,expression:"state.show"}],staticClass:"toolbox"},[n("div",{"class":{disableddiv:!e.isLayerReady||!e.canEdit},attrs:{id:"id_toolbox_"+e.state.id}},[n("div",{staticClass:"panel","class":{mobile:e.isMobile(),toolboxselected:e.state.selected},staticStyle:{"margin-bottom":"8px"},on:{click:e.select}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLayerReady,expression:"!isLayerReady"}],staticClass:"bar-loader"}),e._v(" "),e.state.toolboxheader?n("div",{staticClass:"panel-heading container",staticStyle:{width:"100%"},style:{background:e.state.color}},[e.father?n("div",{staticClass:"pull-left enabled dropdown",staticStyle:{"margin-right":"5px",cursor:"pointer"}},[n("span",{"class":e.g3wtemplate.font.relation}),e._v(" "),n("div",{staticClass:"dropdown-content skin-background-color",staticStyle:{padding:"5px","border-radius":"3px"}},e._l(e.state.editing.dependencies,function(t){return n("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t))])}),0)]):e._e(),e._v(" "),n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin:pre",value:"editing.toolbox.title",expression:"'editing.toolbox.title'",arg:"pre"}],staticClass:"panel-title","class":[e.father?"col-md-6":"col-md-8"]},[e._v(e._s(e.state.title))]),e._v(" "),n("div",{directives:[{name:"disabled",rawName:"v-disabled",value:!e.state.startstopediting,expression:"!state.startstopediting"},{name:"t-title",rawName:"v-t-title:plugin",value:e.edit_layer_tooltip,expression:"edit_layer_tooltip",arg:"plugin"}],ref:"editingbutton",staticClass:"start-editing editbtn skin-tooltip-left","class":{"pull-right":!e.isMobile(),enabled:e.isLayerReady,"g3w-icon-toggled":e.state.editing.on},attrs:{"data-placement":"left","data-toggle":"tooltip"},on:{click:function(t){return t.stopPropagation(),e.toggleEditing(t)}}},[n("span",{"class":e.g3wtemplate.font.pencil,staticStyle:{"font-size":"1.1em",padding:"5px"}})])]):e._e(),e._v(" "),n("bar-loader",{attrs:{loading:e.state.loading||e.state.changingtools}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.state.changingtools,expression:"!state.changingtools"}],staticClass:"panel-body"},[n("div",{staticClass:"tools-content row1",staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.toolsrow1,function(t){return n("tool",{key:t.id,attrs:{state:t,resourcesurl:e.resourcesurl},on:{stopactivetool:e.stopActiveTool,setactivetool:e.setActiveTool}})}),1),e._v(" "),n("div",{staticClass:"tools-content row2",staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.toolsrow2,function(t){return n("tool",{key:t.id,attrs:{state:t,resourcesurl:e.resourcesurl},on:{stopactivetool:e.stopActiveTool,setactivetool:e.setActiveTool}})}),1),e._v(" "),n("div",{staticClass:"tools-content row3",staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.toolsrow3,function(t){return n("tool",{key:t.id,attrs:{state:t,resourcesurl:e.resourcesurl},on:{stopactivetool:e.stopActiveTool,setactivetool:e.setActiveTool}})}),1),e._v(" "),n("div",{staticClass:"message",staticStyle:{"margin-top":"5px"},attrs:{id:"id_toolbox_messages_"+e.state.id}},[n("div",{domProps:{innerHTML:e._s(e.state.message)}}),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showtoolsoftool?n("toolsoftool",{attrs:{tools:e.state.toolsoftool}}):e._e()],1),e._v(" "),e.currenttoolhelpmessage?n("div",{directives:[{name:"t-plugin",rawName:"v-t-plugin",value:e.currenttoolhelpmessage,expression:"currenttoolhelpmessage"}],staticClass:"toolbox_help_message"}):e._e()],1)])],1)])])},r.staticRenderFns=[],r._scopeId="data-v-c4a84298",t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.dispose(i),t.hot.data?n.reload("data-v-c4a84298",r):n.createRecord("data-v-c4a84298",r))}()},{"./Tool.vue":17,"./ToolsOfTool.vue":19,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],19:[function(e,t,n){!function(){function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./ToolsOfToolSnap.vue"),r=t(i),o=e("./ToolsOfToolMeasure.vue"),a=t(o);n["default"]={name:"Toolsoftool",props:["tools"],components:{snap:r["default"],measure:a["default"]},data:function(){return{}}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var i="function"==typeof t.exports?t.exports.options:t.exports;i.functional,i.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","flex-direction":"column",margin:"5px",padding:"5px","border-radius":"5px"},attrs:{id:"toolsoftoolcontainer"}},[e._l(e.tools,function(t){return[n(t.type,{tag:"component",attrs:{options:t.options}}),e._v(" "),n("divider")]})],2)},i.staticRenderFns=[],t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.data?n.reload("data-v-21f6c16a",i):n.createRecord("data-v-21f6c16a",i))}()},{"./ToolsOfToolMeasure.vue":20,"./ToolsOfToolSnap.vue":21,vue:5,"vue-hot-reload-api":3}],20:[function(e,t,n){var i=e("vueify/lib/insert-css").insert("label span[data-v-0b8314c3] {\n  color: #222d32 !important;\n}");!function(){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={name:"measure",props:["options"],data:function(){return{checked:this.options.checked}},watch:{checked:function(e){this.options.onChange(e)}},beforeDestroy:function(){this.options.onBeforeDestroy()}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var r="function"==typeof t.exports?t.exports.options:t.exports;r.functional,r.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],staticClass:"magic-checkbox snap_tools_of_tools",attrs:{type:"checkbox",id:"g3w_editing_show_measure_tool"},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{change:function(t){var n=e.checked,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&(e.checked=n.concat([o])):a>-1&&(e.checked=n.slice(0,a).concat(n.slice(a+1)))}else e.checked=r}}}),e._v(" "),n("label",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.toolsoftool.measure",expression:"'plugins.editing.toolsoftool.measure'",arg:"right",modifiers:{create:!0}}],attrs:{"for":"g3w_editing_show_measure_tool"}},[n("span",{"class":e.g3wtemplate.font.measure,staticStyle:{"font-weight":"bold"}})])])},r.staticRenderFns=[],r._scopeId="data-v-0b8314c3",t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.dispose(i),t.hot.data?n.reload("data-v-0b8314c3",r):n.createRecord("data-v-0b8314c3",r))}()},{vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],21:[function(e,t,n){var i=e("vueify/lib/insert-css").insert("label span[data-v-66af2696] {\n  color: #222d32 !important;\n}");!function(){Object.defineProperty(n,"__esModule",{value:!0});var t=g3wsdk.gui.GUI,i=g3wsdk.core.layer.Layer,r=void 0,o=t.getService("map"),a=e("../services/editingservice");n["default"]={name:"snap",props:["options"],data:function(){return{id:"snap_"+Date.now(),idAll:"snap_"+Date.now()+"_all",checked:!1,checkedAll:!1,showSnapAll:!1}},computed:{add:function(){return(this.checked||this.checkedAll)&&this.options.active}},methods:{addFeatures:function(e){this.features.extend(e)},addFeature:function(e){this.addFeatures([e])},removeFeatures:function(e){var t=this;e.forEach(function(e){return t.features.remove(e)})},setShowSnapAll:function(){this.showSnapAll=this.vectorToolboxesEditingState.find(function(e){return e.on})&&!0||!1,this.checkedAll=!!this.showSnapAll&&this.checkedAll},activeSnapInteraction:function(){var e=this.add;r&&o.removeInteraction(r),r=null,e&&(r=new ol.interaction.Snap({source:this.checked&&!this.checkedAll&&this.options.source,features:this.checkedAll&&this.features}),o.addInteraction(r))},enableSnapInteraction:function(e){e?this.activeSnapInteraction():r&&o.removeInteraction(r)}},watch:{checked:function(e){this.options.checked=e,this.activeSnapInteraction()},checkedAll:function(e){this.options.checkedAll=e,this.activeSnapInteraction()},"options.active":function(e){this.enableSnapInteraction(e)}},created:function(){var e=this;this.features=new ol.Collection,this.sourcesAndEventsKeys=[],this.vectorToolboxesEditingState=[],this.unwatches=[],a.getLayers().forEach(function(t){var n=t.getId();if(t.getType()===i.LayerTypes.VECTOR){var r=a.getToolBoxById(n),o=r.getLayer().getEditingSource();e.features.extend(o.readFeatures());var s=o.onbefore("addFeatures",e.addFeatures),l=o.onbefore("addFeature",e.addFeatures),u=o.onbefore("clear",function(){var t=o.readFeatures();e.removeFeatures(t)}),c=o.getFeaturesCollection().on("add",function(t){return e.addFeature(t.element)});if(e.sourcesAndEventsKeys.push({source:o,settersAndKeys:{addFeatures:s,addFeature:l,clear:u},olKey:c}),e.options.layerId!==n){var d=r.getState().editing,f=e.$watch(function(){return d.on},e.setShowSnapAll);e.unwatches.push(f),e.vectorToolboxesEditingState.push(d)}}}),this.setShowSnapAll()},beforeDestroy:function(){this.sourcesAndEventsKeys.forEach(function(e){var t=e.source,n=e.settersAndKeys,i=e.olKey;Object.keys(n).forEach(function(e){var i=n[e];t.un(e,i)}),ol.Observable.unByKey(i)}),this.unwatches.forEach(function(e){return e()}),r=null,this.unwatches=null,this.vectorToolboxesEditingState=null,this.sourcesAndEventsKeys=null}}}(),t.exports.__esModule&&(t.exports=t.exports["default"]);var r="function"==typeof t.exports?t.exports.options:t.exports;r.functional,r.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex",width:"100%","justify-content":"space-between"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],staticClass:"magic-checkbox snap_tools_of_tools",attrs:{type:"checkbox",id:e.id},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{change:function(t){var n=e.checked,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&(e.checked=n.concat([o])):a>-1&&(e.checked=n.slice(0,a).concat(n.slice(a+1)))}else e.checked=r}}}),e._v(" "),n("label",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:right.create",value:"plugins.editing.toolsoftool.snap",expression:"'plugins.editing.toolsoftool.snap'",arg:"right",modifiers:{create:!0}}],attrs:{"for":e.id}},[n("span",{"class":e.g3wtemplate.font.magnete})]),e._v(" "),e.showSnapAll?[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedAll,expression:"checkedAll"}],staticClass:"magic-checkbox snap_tools_of_tools",attrs:{type:"checkbox",id:e.idAll},domProps:{checked:Array.isArray(e.checkedAll)?e._i(e.checkedAll,null)>-1:e.checkedAll},on:{change:function(t){var n=e.checkedAll,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&(e.checkedAll=n.concat([o])):a>-1&&(e.checkedAll=n.slice(0,a).concat(n.slice(a+1)))}else e.checkedAll=r}}}),e._v(" "),n("label",{directives:[{name:"t-tooltip",rawName:"v-t-tooltip:left.create",value:"plugins.editing.toolsoftool.snapall",expression:"'plugins.editing.toolsoftool.snapall'",arg:"left",modifiers:{create:!0}}],attrs:{"for":e.idAll}},[n("span",{"class":e.g3wtemplate.font.magnete}),e._v(" "),n("span",{"class":e.g3wtemplate.font.layers,staticStyle:{"font-weight":"bold"}})])]:e._e()],2)},r.staticRenderFns=[],r._scopeId="data-v-66af2696",t.hot&&!function(){var n=e("vue-hot-reload-api");n.install(e("vue"),!0),n.compatible&&(t.hot.accept(),t.hot.dispose(i),t.hot.data?n.reload("data-v-66af2696",r):n.createRecord("data-v-66af2696",r))}()},{"../services/editingservice":42,vue:5,"vue-hot-reload-api":3,"vueify/lib/insert-css":7}],22:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"Es tritt ein Fehler auf. Es ist nicht möglich, Layer zu bearbeiten",some_layers:"Es tritt ein Fehler auf: Es ist nicht möglich, einige Layer zu bearbeiten"},search:"Suche",editing_changes:"Änderungen bearbeiten",editing_data:"Layer bearbeiten",editing_attributes:"Attribute bearbeiten",relations:"Relationen",edit_relation:"Relation bearbeiten",back_to_relations:"Zurück zu Relationen",no_relations_found:"Keine Relationen gefunden",relation_data:"Relationsdaten",relation_already_added:"Relation bereits hinzugefügt",list_of_relations_feature:"Liste der Relations-Features ",tooltip:{edit_layer:"Layer bearbeiten"},toolbox:{title:"bearbeiten"},table:{edit:"Feature bearbeiten",copy:"Kopie erstellen","delete":"Feature löschen"},tools:{copy:"Features kopieren",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Teil zu Multipart hinzufügen",deletepart:"Teil aus Multipart löschen",merge:"Feature auflösen",split:"Feature trennen",add_feature:"Feature hinzufügen",delete_feature:"Feature löschen",move_feature:"Feature verschieben",update_vertex:"Feature vertex aktualisieren",update_feature:"Feature-Attribut aktualisieren",update_multi_features:"Attribute ausgewählter Features aktualisieren",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Messung anzeigen",snap:"Snap Layer",snapall:"Snap auf alle Layer"},steps:{help:{select_elements:"Features auswählen",select_element:"Feature auswählen",copy:"Neue Kopie der ausgewählten Features erstellen",merge:"Features auflösen",split:"Feature trennen","new":"Neues Feature erstellen",edit_table:"Features der Tabelle bearbeiten",draw_new_feature:"Feature auf Karte zeichnen",action_confirm:"Aktion bestätigen",double_click_delete:"Zu löschendes Feature auf der Karte auswählen",edit_feature_vertex:"Ändern oder Hinzufügen eines Eckpunktes auf dem ausgewählten Feature",move:"Ausgewähltes Feature verschieben",select_feature_to_relation:"Feature auswählen, welches die Relation verknüpft",show_edit_feature_form:"Feature-Formular zum Bearbeiten von Attributen anzeigen",pick_feature:"Zu änderndes Feature auf der Karte auswählen",insert_attributes_feature:"Attribute des Features einfügen"}},workflow:{steps:{select:"Zum Auswählen auf ein Feature klicken",draw_part:"Neues Teil zeichnen",merge:"Feature zum Auflösen auswählen",selectSHIFT:"Features auswählen indem ein Rechteck mit SHIFT gezeichnet wird",selectDrawBox:"Features auswählen, indem man ein Rechteck mit zwei gegenüberliegenden Eckpunkten zeichnet",selectDrawBoxAtLeast2Feature:"Mindestens Features auswählen, indem man ein Rechteck mit zwei gegenüberliegenden Eckpunkten zeichnet",selectPoint:"Zum Auswählen auf ein Feature klicken",selectPointSHIFT:"Features auswählen, indem ein Rechteck mit SHIFT gezeichnet wird (Multifeatures) oder auf ein Feature klicken",selectMultiPointSHIFT:"Features auswählen, indem man ein Rechteck zeichnet und SHIFT drückt oder auf ein Feature klickt",selectMultiPointSHIFTAtLeast2Feature:"Mindestens 2 Features auswählen und mit SHIFT ein Rechteck zeichnen oder auf ein Feature klicken",copyCTRL:"Kopieren ausgewählter Features mit CTRL+C",selectStartVertex:"Start-Eckpunkt der ausgewählten Features auswählen",selectToPaste:"Den Punkt auswählen, an dem die ausgewählten Features eingefügt werden sollen",draw_split_line:"Eine Linie zeichnen, um das ausgewählte Feature zu teilen"}},messages:{featureslockbyotheruser:"Einige Geometrien/Datensätze können nicht bearbeitet werden, da sie von anderen Benutzern bearbeitet werden",splitted:"Getrennt",nosplittedfeature:"Feature nicht getrennt",press_esc:"Mit ESC zurück",online:"Wieder ONLINE. Jetzt kann man die Änderungen in der Datenbank speichern",offline:"OFFLINE. Alle Änderungen werden lokal gespeichert",delete_feature:"Soll das ausgewählte Feature gelöscht werden?",delete_feature_relations:"Wenn ein Feature Verknüpfungen beinhaltet, werden diese Relationen verwaist. Wir schlagen vor, diese Relationen zu behandeln, bevor das Feature gelöscht wird",unlink_relation:"Soll die Verknüpfung aufgehoben werden?",commit_feature:"Änderungen speichern?",change_toolbox_relation:"Layer hat Relation(en). Bevor man zur Bearbeitung wechselt, muss man die Änderungen speichern.",saved:"Daten erfolgreich gespeichert",saved_local:"Daten erfolgreich lokal gespeichert",loading_data:"Daten laden",saving:"Daten werden gespeichert. Bitte warten ...",constraints:{enable_editing:"Bitte zoomen Sie hinein, um die Editier-Tools zu aktivieren \nAktivierungsskala bei 1:"},pdf:"Dokumentenvorschau nicht verfügbar. Bitte hier klicken ",commit:{header:"Die folgende Liste zeigt alle zu übernehmenden Änderungen.",header_add:"<b>Hinzufgefügt</b> Die Anzahl der hinzugefügten Features anzeigen",header_update_delete:"<b>Bearbeitet</b> und <b>Gelöscht</b> Die Liste der Feature-ID anzeigen",add:"Hinzugefügt(n. Features)","delete":"Gelöscht(id)",update:"Bearbeitet(id)"},loading_table_data:"Datentabelle wird erstellt. Bitte warten ...",copy_and_paste_from_other_layer_mandatory_fields:"Vor dem Speichern müssen alle Pflichtfelder des eingegebenen features ausgefüllt werden",no_feature_selected:"Keine feature ausgewählt",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Wählen Sie Relationen aus, um sie mit dem aktuellen Feature zu verknüpfen.</div>"},draw_new_feature:"Zeichnen Sie eine neue feature",draw_or_copy:"oder",copy_feature_from_other_layer:"Kopieren Sie feature aus einer anderen layer"},form:{relations:{tooltips:{back_to_father:"Zurück zur Bearbeitung des Vaters",add_relation:"Neue Relation erstellen und verknüpfen",link_relation:"Eine Relation zu diesem Feature herstellen",open_relation_tools:"Relationstools anzeigen",unlink_relation:"Relation trennen"}},buttons:{save:"Einfügung/Bearbeiten",save_and_back:"Speichern und zurück",cancel:"Änderungen ignorieren"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s"},copyfeaturefromprojectlayer:{title:"Select one feature"}}}}},{}],23:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"An error occurs. It's no possible to edit layers",some_layers:"An error occurs: It's no possible to edit some layers"},search:"Search",editing_changes:"Editing Changes",editing_data:"Editing Layers",editing_attributes:"Editing attributes",relations:"Relations",edit_relation:"Edit relation",back_to_relations:"Back to Relations",no_relations_found:"No relations found",relation_data:"Relation data",relation_already_added:"Relation already added",list_of_relations_feature:"List of relations feature ",tooltip:{edit_layer:"Edit Layer"},toolbox:{title:"Edit"},table:{edit:"Edit feature",copy:"Create a copy","delete":"Delete feature"},tools:{copy:"Copy features",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Add part to multipart",deletepart:"Delete part from multipart",merge:"Dissolve features",split:"Split Feature",add_feature:"Add feature",delete_feature:"Delete feature",move_feature:"Move feature",update_vertex:"Update feature vertex",update_feature:"Update feature attribute",update_multi_features:"Update attributes of selected features",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Select features",select_element:"Select feature",copy:"Create new copy of selected features",merge:"Dissolve features",split:"Split Feature","new":"Create new feature",edit_table:"Edit table features",draw_new_feature:"Draw feature on map",action_confirm:"Confirm action",double_click_delete:"Select feature on map to delete",edit_feature_vertex:"Modify or add a vertex on selected feature",move:"Move selected feature",select_feature_to_relation:"Select feature that you bind relation",show_edit_feature_form:"Show feature form to edit attributes",pick_feature:"Select feature on map to modify",insert_attributes_feature:"Insert attributes of the feature"}},workflow:{steps:{select:"Click on feature to select",draw_part:"Draw new part",merge:"Select featurewhere dissolve",selectSHIFT:"Select features drawing a rectangle pressing SHIFT",selectDrawBox:"Select features drawing a rectangle by two point of opposite corners",selectDrawBoxAtLeast2Feature:"Select at least features drawing a rectangle by two point of opposite corners",selectPoint:"Click on feature to select",selectPointSHIFT:"Select features drawing a rectangle pressing SHIFT (multifeatures) or click on one feature",selectMultiPointSHIFT:"Select features drawing a rectangle pressing SHIFT or click on feature",selectMultiPointSHIFTAtLeast2Feature:"Select at least 2 features drawing a rectangle pressing SHIFT or click on feature",copyCTRL:"Copy selected features using CTRL+C",selectStartVertex:"Select starting vertex of selected features",selectToPaste:"Select the point where paste the features selected",draw_split_line:"Draw a line to split selected feature"}},messages:{featureslockbyotheruser:"Some geometries/records are not editable because in editing by other user",splitted:"Splitted",nosplittedfeature:"Feature not spitted",press_esc:"Press ESC to back",online:"Back ONLINE. Now you can save your changes on database",offline:"You are OFFLINE. All changes are saved locally",delete_feature:"Do you want delete selected feature ?",delete_feature_relations:"If feature has bindings relations, these relations become orphans. We suggest to handle these relations before detele this feature",unlink_relation:"Do you want unlink relation?",commit_feature:"Do you want to save the changes",change_toolbox_relation:"Layer has relation/relations. Before switch editing you need to save changes done.",saved:"Data saved successfully",saved_local:"Data saved locally successfully",loading_data:"Loading data",saving:"Saving data. Please wait ...",constraints:{enable_editing:"Please Zoom In to enable editing tools \nActivation scale at 1:"},pdf:"Document preview not available. Please click here ",commit:{header:"The following list show all changes to commit.",header_add:"<b>Added</b> show the number of features added",header_update_delete:"<b>Modified</b> and <b>Deleted</b> show the list of features id",add:"Added(n. features)","delete":"Deleted(id)",update:"Modified(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"It is necessary to fill in any mandatory fields on the features pasted before saving",no_feature_selected:"No feature selected",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Select relations to link it to current editing feature.</div>"},draw_new_feature:"Draw new feature",draw_or_copy:"or",copy_feature_from_other_layer:"Copy feature from other layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Create and link new relation",link_relation:"Join a relation to this feature",open_relation_tools:"Show relation tools",unlink_relation:"Unlink relation"}},buttons:{save:"Insert/Edit",save_and_back:"Save and Back",cancel:"Ignore Changes"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],24:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"Tapahtui virhe. Tasoja ei ole mahdollista muokata.",some_layers:"Tapahtui virhe. Jotkin tasot eivät ole muokattavissa."},search:"Haku",editing_changes:"Editing Changes",editing_data:"Muokataan tasoja",editing_attributes:"Muokataan attribuutteja",relations:"Relaatiot",edit_relation:"Muokkaa relaatiota",back_to_relations:"Takaisin relaatioihin",no_relations_found:"Relaatioita ei löytynyt",relation_data:"Relaation tiedot",relation_already_added:"Relaatio on jo lisätty",list_of_relations_feature:"Lista relaation ominaisuuksista",tooltip:{edit_layer:"Muokkaa tasoa"},toolbox:{title:"Muokkaa"},table:{edit:"Muokkaa ominaisuutta",copy:"Luo kopio","delete":"Poista ominaisuus"},tools:{copy:"Kopio ominaisuuksia",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Lisää osa",deletepart:"Poista osa",merge:"Yhdistä ominaisuudet",split:"Leikkaa ominaisuus",add_feature:"Lisää ominaisuus",delete_feature:"Poista ominaisuus",move_feature:"Siirrä ominaisuutta",update_vertex:"Päivitä pisteen ominaisuutta",update_feature:"Päivitä ominaisuus",update_multi_features:"Muokkaa valittujen ominaisuuksien attribuutteja",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Valitse ominaisuudet",select_element:"Valitse ominaisuus",copy:"Luo kopio valituista ominaisuuksista",merge:"Yhdistä ominaisuudet",split:"Leikkaa ominaisuus","new":"Luo uusi ominaisuus",edit_table:"Muuta taulun ominaisuuksia",draw_new_feature:"Piirrä ominaisuus kartalle",action_confirm:"Hyväksy toiminto",double_click_delete:"Valitse poistettava ominaisuus kartalta",edit_feature_vertex:"Muuta pistettä tai lisää piste valittuun ominaisuuteen",move:"Siirrä valittu ominaisuus",select_feature_to_relation:"Valitse relaatio",show_edit_feature_form:"Näytä ominaisuuslomake muokataksesi attribuutteja",pick_feature:"Valitse muokattava ominaisuus kartalta",
insert_attributes_feature:"Lisää ominaisuuden attribuutit"}},workflow:{steps:{select:"Valitse ominaisuus",draw_part:"Piirrä uusi osa",merge:"Valitse ominaisuus yhdistääksesi",selectSHIFT:"Paina SHIFT, jos haluat valita kohteita suorakulmiovalinnalla.",selectDrawBox:"Piirrä suorakulmio, jonka siältä kohteet valitaan ",selectDrawBoxAtLeast2Feature:"Piirrä suorakulmio, jonka siältä kohteet vähintään 2 valitaan ",selectPoint:"Valitse ominaisuus",selectPointSHIFT:"Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksittäinen ominaisuus.",selectMultiPointSHIFT:"Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksittäinen ominaisuus.",selectMultiPointSHIFTAtLeast2Feature:"Paina SHIFT, jos haluat valita vähintään 2 ominaisuuksia suorakulmiovalinnalla, tai valitse yksittäinen ominaisuus.",copyCTRL:"CTRL+C, voit kopioida valitut ominaisuudet.",selectStartVertex:"Osoita valittujen ominaisuuksien alkupiste.",selectToPaste:"Valitse kohta, johon liität valitut ominaisuudet.",draw_split_line:"Piirrä viiva, jonka mukaan valittu ominaisuus jaetaan."}},messages:{featureslockbyotheruser:"Some features are locked by another user",splitted:"Jaettu",nosplittedfeature:"Ominaisuutta ei jaettu",press_esc:"Paina ESC palataksesi",online:"Yhteys muodostettu. Muutokset voidaan tallentaa tietokantaan.",offline:"Olet offline-tilassa. Muutokset tallennetaan paikallisesti",delete_feature:"Haluatko poistaa valitun ominaisuuden?",delete_feature_relations:"Mikäli ominaisuudella on sitovia relaatioita, näistä relaatiosta tulee orpoja. Suosittelemme käsittelemään nämä relaatiot ennen poistamista",unlink_relation:"Haluatko poistaa relaation?",commit_feature:"Tallennetaanko muutokset?",change_toolbox_relation:"Tasolla on relaatio/relaatiota. Ennen muokkauksen aloittamista tulee muutokset tallenttaa.",saved:"Tiedot tallennettu onnistuneesti",saved_local:"Tiedot on tallennettu onnistuneesti paikallisesti.",loading_data:"Ladataan tietoja",saving:"Tallentaan tietoja. Odota...",constraints:{enable_editing:"Lähennä ottaaksesi muokkaustyökalut käyttöön \nAktivointi mittakaava 1:"},pdf:"Dokumentin esikatselu ei ole saatavilla. Paina tästä ",commit:{header:"Seuraava luettelo näyttää kaikki muutokset.",header_add:"<b>Lisätty</b> näytä lisättyjen ominaisuuksien lukumäärä",header_update_delete:"<b>Muokattu</b> ja <b>Poistettu</b> Näytä listä ominaisuuksien id:stä",add:"Lisätty(n. ominaisuutta)","delete":"Poistettu(id)",update:"Muokattu(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"It is necessary to fill in any mandatory fields on the features pasted before saving",no_feature_selected:"No feature selected",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Valitse relaatiota linkittääksesi ne muokattavaan ominaisuuteen.</div>"},draw_new_feature:"Draw new feature",draw_or_copy:"or",copy_feature_from_other_layer:"Copy feature from other layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Luo ja linkitä uusi relaatio",link_relation:"Liitä relaatio tähän ominaisuuteen",open_relation_tools:"Näytä relaatiotyökalut",unlink_relation:"Poista relaatio"}},buttons:{save:"Lisää/muokkaa",save_and_back:"Tallenna ja palaa",cancel:"Peruuta"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],25:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"Une erreur s'est produite lors du chargement des layers dans l'édition.",some_layers:"Une erreur s'est produite lors du chargement de certaines layers dans l'édition."},search:"Recherche",editing_changes:"Editing Changes",editing_data:"Modifier les donnes",editing_attributes:"Modifier les attributs",relations:"Relations",edit_relation:"Modifier la relation",back_to_relations:"Retour aux relations",no_relations_found:"Il n'y a pas de relations",relation_data:"Données sur les relations",relation_already_added:"Relation déjà présente",list_of_relations_feature:"Lister les relations de la fonctionnalité",tooltip:{edit_layer:"Modifier le layer"},toolbox:{title:"Modifier"},table:{edit:"Modifier fonctionnalités",copy:"Créer une copie","delete":"Supprimer la fonctionnalité"},tools:{copy:"Copier les fonctionnalités",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Ajouter une pièce à la géométrie",deletepart:"Supprimer la partie de la géométrie",merge:"Dissoudre les fonctionnalités",split:"Couper la fonctionnalité",add_feature:"Ajouter une fonctionnalité",delete_feature:"Supprimer la fonctionnalité",move_feature:"Déplacez la fonctionnalité",update_vertex:"Mettre à jour les sommets des fonctionnalités",update_feature:"Modifier les attributs des fonctionnalités",update_multi_features:"Modifier les attributs des fonctionnalités sélectionnées",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Sélectionner les fonctionnalités",select_element:"Sélectionner une fonctionnalité",copy:"Créer une copie des fonctionnalités sélectionnées",merge:"Dissoudre les fonctionnalités",split:"Couper la fonctionnalité","new":"Créer une nouvelle fonctionnalité",edit_table:"Modifier les fonctionnalités de la table",draw_new_feature:"Dessiner une fonctionnalité sur la carte",action_confirm:"Confirmer l'action",double_click_delete:"Sélectionner la fonctionnalité sur la carte à supprimer",edit_feature_vertex:"Modifier ou ajouter un sommet à la fonctionnalité sélectionnée",move:"Déplacer la fonctionnalité sélectionnée",select_feature_to_relation:"Sélectionner la fonctionnalité que vous souhaitez mettre en relation",show_edit_feature_form:"Afficher le formulaire de la fonctionnalité permettant de modifier les attributs",pick_feature:"Sélectionner l'élément de la carte à modifier",insert_attributes_feature:"Insérer les attributs de la fonctionnalité"}},workflow:{steps:{select:"Cliquer sur la fonctionnalité à sélectionner",draw_part:"Dessiner la nouvelle partie",merge:"Sélectionner la fonction à introduire en fondu",selectPoint:"Cliquer sur la fonctionnalité pour la sélectionner",selectSHIFT:"Sélectionner des fonctionnalités en maintenant la touche SHIFT enfoncée",selectDrawBox:"Sélectionner les fonctionnalités en dessinant un rectangle par la création des deux points de la diagonale",selectDrawBoxAtLeast2Feature:"Sélectionner au moins 2 fonctionnalités en dessinant un rectangle par la création des deux points de la diagonale",selectPointSHIFT:"Sélectionner des caractéristiques en maintenant la touche SHIFT enfoncée (multi-sélection) ou en cliquant sur une seule caractéristique",selectMultiPointSHIFT:"Sélectionner des fonctionnalités en maintenant la touche SHIFT appuyée ou en cliquant sur la fonctionnalité individuelle",selectMultiPointSHIFTAtLeast2Feature:"Sélectionner au moins 2 fonctionnalités en maintenant la touche SHIFT appuyée ou en cliquant sur la fonctionnalité individuelle",copyCTRL:"Copier les fonctionnalités sélectionnées avec CTRL+C",selectStartVertex:"Sélectionner le sommet de départ des fonctionnalités choisies",selectToPaste:"Sélectionner le point où les fonctionnalités sélectionnées seront collées",draw_split_line:"Tracez une ligne pour couper la fonctionnalité sélectionnée"}},messages:{featureslockbyotheruser:"Certaines géométries/enregistrements ne sont pas modifiables car ils ont été modifiés par un autre utilisateur",splitted:"Fonctionnalité(s) divisé(es)",nosplittedfeature:"La (les) fonctionnalité(s) n’a (n'ont) pas été divisé(es)",press_esc:"Appuyez sur ESC pour revenir",online:"Vous êtes à nouveau EN LIGNE. Vous pouvez enregistrer les modifications de façon permanente",offline:"Vous êtes HORS LIGNE. Toutes les modifications seront enregistrées temporairement en local",delete_feature:"Voulez-vous supprimer la fonctionnalité sélectionnée ?",delete_feature_relations:"La suppression d'une fonctionnalité avec des relations associées laissera ces relations orphelines. Il est recommandé de gérer ces relations avant de supprimer la fonctionnalité",unlink_relation:"Voulez-vous détacher la relation ?",commit_feature:"Voulez-vous enregistrer définitivement les changements ?",change_toolbox_relation:"Layer en relation. Il est obligatoire d'enregistrer les modifications en cours avant de passer à d'autres modifications.",saved:"Les données ont été enregistrées correctement",saved_local:"Les données ont été correctement sauvegardées localement",loading_data:"Chargement des données",saving:"Sauvegarde des données. Veuillez patienter ...",constraints:{enable_editing:"Augmenter le niveau de zoom pour permettre l'édition \nEchelle de déclenchement 1 :"},pdf:"Aperçu du document non disponible. Cliquez ici ",commit:{header:"La liste ci-dessous montre toutes les modifications qui seront enregistrées.",header_add:"<b>Ajouts</b> indique le nombre de fonctionnalités ajoutées",header_update_delete:"<b>Modifié</b> e <b>Supprimé</b> liste les ids",add:"Ajouté (n. fonctionnalités)","delete":"Supprimé(id)",update:"Modifié(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"Avant d'enregistrer, il est nécessaire de remplir tous les champs obligatoires du features saisi",no_feature_selected:"Aucune feature sélectionnée",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Sélectionner les relations pour les associer à l'élément en cours d'édition.</div>"},draw_new_feature:"Dessiner une nouvelle feature",draw_or_copy:"ou",copy_feature_from_other_layer:"Copier feature d'une autre layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Créer et ajouter une nouvelle relation",link_relation:"Associer une relation existante à cette fonctionnalité",open_relation_tools:"Outils de relation ouverte",unlink_relation:"Annuler la relation"}},buttons:{save:"Insérer/Modifier",save_and_back:"Sauvegarder et retourner au parent",cancel:"Ignorer modifications"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],26:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./it"),o=i(r),a=e("./en"),s=i(a),l=e("./fi"),u=i(l),c=e("./se"),d=i(c),f=e("./fr"),p=i(f),h=e("./de"),v=i(h),g=e("./ro"),m=i(g);n["default"]={it:o["default"],en:s["default"],fi:u["default"],se:d["default"],fr:p["default"],de:v["default"],ro:m["default"]}},{"./de":22,"./en":23,"./fi":24,"./fr":25,"./it":27,"./ro":28,"./se":29}],27:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"Si è verificato un errore nel caricamento dei layers in editing.",some_layers:"Si è verificato un errore nel caricamento di alcuni layers in editing"},search:"Cerca",editing_changes:"Modifiche Editing",editing_data:"Edita Dati",editing_attributes:"Edita attributi",relations:"Relazioni",edit_relation:"Edita relazione",back_to_relations:"Ritorna alle Relazioni",no_relations_found:"Non ci sono relazioni",relation_data:"Dati relativi alla relazione",relation_already_added:"Relazione già presente",list_of_relations_feature:"Elenco Relazioni della feature ",tooltip:{edit_layer:"Modifica Layer"},toolbox:{title:"Edita"},table:{edit:"Edita feature",copy:"Crea una copia","delete":"Cancella feature"},tools:{copy:"Copia features",pastefeaturesfromotherlayers:"Copia features da altro layer",addpart:"Aggiungi parte alla geometria",deletepart:"Cancella parte dalla geometria",merge:"Dissolvi features",split:"Taglia Feature",add_feature:"Aggiungi feature",delete_feature:"Elimina feature",move_feature:"Muovi feature",update_vertex:"Aggiorna vertici feature",update_feature:"Modifica attributi feature",update_multi_features:"Modifica gli attributi delle features selezionate",copyfeaturefromexternallayer:"Crea feature dal layer aggiunto"},toolsoftool:{measure:"Visualizza misura",snap:"Snap sul layer",snapall:"Snap su tutti i layer"},steps:{help:{select_elements:"Seleziona le features",select_element:"Seleziona la feature",copy:"Crea una copia delle feature selezionate",merge:"Dissolvi features",split:"Taglia Feature","new":"Creo una nuova feature",edit_table:"Edita le features della tabella",draw_new_feature:"Disegna sulla mappa la feature",action_confirm:"Conferma azione",double_click_delete:"Seleziona la feature sulla mappa da cancellare",edit_feature_vertex:"Modifica o aggiungi un vertice alla feature selezionata",move:"Muovi la feature selezionata",select_feature_to_relation:"Seleziona la feature che vuoi mettere in relazione",show_edit_feature_form:"Mostra il form della feature per poter editare gli attributi",pick_feature:"Seleziona la feature sulla mappa da modificare",insert_attributes_feature:"Inserisci gli attributi della feature"}},workflow:{steps:{select:"Clicca sulla feature da selezionare",draw_part:"Disegna la nuova parte",merge:"Seleziona la feature su cui dissolvere",selectPoint:"Clicca sulla feature per selezionarla",selectSHIFT:"Seleziona le features tenedo premuto il tasto SHIFT",selectDrawBox:"Seleziona le features disegnando un rettangolo mediante la creazione dei due punti della diagonale",selectDrawBoxAtLeast2Feature:"Seleziona almeno 2 features disegnando un rettangolo mediante la creazione dei due punti della diagonale",selectPointSHIFT:"Seleziona le features tenedo premuto il tasto SHIFT (multiselezione) oppure cliccando sulla singola feature",selectMultiPointSHIFT:"Seleziona le features tenedo premuto il tasto SHIFT oppure cliccando sulla singola feature",selectMultiPointSHIFTAtLeast2Feature:"Seleziona almeno 2 features tenedo premuto il tasto SHIFT oppure cliccando sulla singola feature",copyCTRL:"Copia le features selezionate con CTRL+C",selectStartVertex:"Seleziona il vertice di partenza delle feature selezionate",selectToPaste:"Seleziona il punto dove verranno incollate le features selezionate",draw_split_line:"Disegna una linea per tagliare la feature selezionata"}},messages:{featureslockbyotheruser:"Ci sono alcune geometrie/records non editabili perchè in modifica da altri utenti",splitted:"Feature(s) splittata(e)",nosplittedfeature:"La(e) feature(s) non è stata splittata",press_esc:"Premi ESC per tornare indietro",online:"Ora sei di nuovo ONLINE. Puoi slavare le modifiche in modo permanente",offline:"Sei OFFLINE. Tutte le modifiche saranno salvate temporaneamente in locale",delete_feature:"Vuoi eliminare l'elemento selezionato?",delete_feature_relations:"Cancellando una feature con relazioni associate, tale relazioni rimarranno orfane. Si consiglia di gestire tali relazioni prima di cancellare la feature",unlink_relation:"Vuoi staccare la relazione?",commit_feature:"Vuoi salvare definitivamente le modifiche",change_toolbox_relation:"Layer in relazione. Prima di passare ad altri editing è obbligatorio salvare le modifiche correnti.",saved:"I dati sono stati salvati correttamente",saved_local:"I dati sono stati salvati correttamente in locale",loading_data:"Caricamento dati",saving:"Salvataggio dati in corso. Attendere ...",constraints:{enable_editing:"Aumentare il livello di zoom per abilitare l'editing \nScala di attivazione 1:"},pdf:"Anteprima del documento non disponibile. Clicca qui ",commit:{header:"La lista sotto riporta tutte le modifiche che verranno salvate.",header_add:"<b>Aggiunte</b> riporta il numero delle features aggiunte",header_update_delete:"<b>Modificate</b> e <b>Cancellate</b> riporta la lista degli id",add:"Aggiunte (n. features)","delete":"Cancellate(id)",update:"Modificate(id)"},loading_table_data:"Costruzione tabella dati in corso. Attendere ...",copy_and_paste_from_other_layer_mandatory_fields:"Necessario compilare eventuali campi obbligatori sulle features incollate prima del salvataggio",no_feature_selected:"Nessuna feature selezionata",select_min_2_features:"Seleziona come minimo due features"},relation:{table:{info:"<div>Seleziona le relazioni per associarle alla feature in editing.</div>"},draw_new_feature:"Disegna nuova geometria",draw_or_copy:"oppure",copy_feature_from_other_layer:"Copia geometria da altro layer"},form:{relations:{tooltips:{back_to_father:"Torna ad editare il padre",add_relation:"Crea ed aggiungi nuova relazione",link_relation:"Associa una relazione esistente a questa feature",open_relation_tools:"Apri strumenti relatione",unlink_relation:"Annulla relazione"}},buttons:{save:"Inserisci/Modifica",save_and_back:"Salva e torna al padre",cancel:"Ignora Modifiche"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Seleziona feature/s"},copyfeaturefromprojectlayer:{title:"Seleziona una feature"}}}}},{}],28:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"Avem o eroare. Straturile nu sunt editabile",some_layers:"Avem o eroare: Anumite straturi nu se pot edita"},search:"Caută",editing_changes:"Modificare schimbări",editing_data:"Modificare straturi",editing_attributes:"Modificare atribute",relations:"Relații",edit_relation:"Modifică relația",back_to_relations:"Înapoi la Relații",no_relations_found:"Nu am găsit relații",relation_data:"Date relații",relation_already_added:"Relație adăugată deja",list_of_relations_feature:"Lista relații entitatea ",tooltip:{edit_layer:"Modifică strat"},toolbox:{title:"Modifică"},table:{edit:"Modifică entitate",copy:"Creează o copie","delete":"Elimină entitatea"},tools:{copy:"Copiază entitățile",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Adaugă o parte la multiparte",deletepart:"Elimină partea din multiparte",merge:"Dizolvare entități",split:"Divizare Entitate",add_feature:"Adaugă entitate",delete_feature:"Eliminare entitate",move_feature:"Mută entitate",update_vertex:"Actualizează vertecșii entității",update_feature:"Actualizează atributul entității",update_multi_features:"Actualizează atributele entităților selectate",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Arată măsurătorile",snap:"Acroșare strat",snapall:"Acroșare pe toate straturile"},steps:{help:{select_elements:"Selectează entități",select_element:"Selectează entitate",copy:"Creează o nouă copie a entităților selectate",merge:"Dizolvă entitățile",split:"Divizare Entitate","new":"Creează o entitate",edit_table:"Modifică entitățile tabelare",draw_new_feature:"Desenează entitate pe hartă",action_confirm:"Confirmă acțiunea",double_click_delete:"Selectează entitatea de eliminat din hartă",edit_feature_vertex:"Modifică sau adaugă un vertex la entitatea selectată",move:"Mută entitatea selectată",select_feature_to_relation:"Selectează entitate pentru relaționare",show_edit_feature_form:"Arată formularul entității pentru modificări",pick_feature:"Selectează entitățile de modificat din hartă",insert_attributes_feature:"Inserează atributele entității"}},workflow:{steps:{select:"Click pe entitate pentru a o selecta",draw_part:"Desenează o parte nouă",merge:"Selectează partea de dizolvat",selectSHIFT:"Selectează entități prin desen triunghi apăsând SHIFT",selectDrawBox:"Selectează entități desenând un dreptunghi prin două puncte opuse",selectDrawBoxAtLeast2Feature:"Selectează cel puțin 2 entități prin desenul unui dreptunghi",selectPoint:"Click pe entitate pentru selectare",selectPointSHIFT:"Selectează entități prin desen dreptunghi apăsând SHIFT (multientități) sau prin click pe entitate",selectMultiPointSHIFT:"Selectează entități prin desen dreptunghi apăsând SHIFT sau prin click pe entitate",selectMultiPointSHIFTAtLeast2Feature:"Selectează cel puțin 2 entități prin desen dreptunghi apăsând SHIFT sau prin click pe entitate",copyCTRL:"Copiază entitățile selectate folosint CTRL+C",selectStartVertex:"Selectează vertexul de start a entităților selectate",selectToPaste:"Selectează punctul unde să lipim entitățile selectate",draw_split_line:"Desenează o linie pentru a diviza entitatea selectată"}},messages:{featureslockbyotheruser:"Unele geometrii/înregistrări nu sunt editabile deoarece sunt editate de către alt utilizator",splitted:"Divizat",nosplittedfeature:"Entitate nedivizată",press_esc:"ESC pentru înapoi",online:"Înapoi ONLINE. Acum se pot salva schimbările",offline:"OFFLINE. Schimbările sunt salvate local",delete_feature:"Șterg entitatea selectată?",delete_feature_relations:"Dacă entitatea are relații care trimit la ea, acele relații devin orfane. Sugerăm să vă ocupați de acele elemente înainte să eliminați această entitate.",unlink_relation:"Dorești să eliminați legătura cu relația?",commit_feature:"Salvăm?",change_toolbox_relation:"Stratul este relaționat. Înainte de a trece la alte modificări trebuiesc salvate modificările.",saved:"Datele sunt salvate",saved_local:"Datele s-au salvat local",loading_data:"Datele se încarcă.",saving:"Salvăm datele. Așteptați ...",constraints:{enable_editing:"Pentru a activa Modificare faceți zoom la \nScara de activare 1:"},pdf:"Previzualizarea documentului nu este disponibilă. Click aici ",commit:{header:"Lista cu toate modificările.",header_add:"<b>Adăugate</b> arată nr. de entități adăugate",header_update_delete:"<b>Modificate</b> și <b>Șterse</b> arată lista de id-uri de entități",add:"Adăugate(n. entități)","delete":"Eliminate(id)",update:"Modificate(id)"},loading_table_data:"Încărcăm tabelul de date ...",copy_and_paste_from_other_layer_mandatory_fields:"Înainte de a salva, este necesar să completați toate câmpurile obligatorii ale entități introduse",no_feature_selected:"Nicio feature selectată",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Selectează relațiile pentru a face legătura cu entitatea curentă.</div>"},draw_new_feature:"Desenați o nouă feature",draw_or_copy:"sau",copy_feature_from_other_layer:"Copiați feature dintr-un alt layer"},form:{relations:{tooltips:{back_to_father:"Înapoi la modificările entității părinte",add_relation:"Creează și fă legătura unei relații noi",link_relation:"Leagă o relație de entitate",open_relation_tools:"Arată instrumentele pentru relații",unlink_relation:"Elimină legătura la relație"}},buttons:{save:"Inserați/Editați",save_and_back:"Salvează și dă înapoi",cancel:"Ignorați modificările"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],29:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={errors:{no_layers:"Ett fel uppstod. Nivåerna kan inte redigeras.",some_layers:"Ett fel uppstod. Vissa nivåer kan inte redigeras."},search:"Sökning",editing_changes:"Editing Changes",editing_data:"Nivåerna redigeras",editing_attributes:"Attributen redigeras",relations:"Relationer",edit_relation:"Redigera relationen",back_to_relations:"Tillbaka till relationerna",no_relations_found:"Inga relationer hittades",relation_data:"Relationsuppgifter",relation_already_added:"Relationen har redan lagts till",list_of_relations_feature:"Lista på relationens egenskaper",tooltip:{edit_layer:"Redigera nivån"},toolbox:{title:"Redigera"},table:{edit:"Redigera egenskap",copy:"Skapa en kopia","delete":"Ta bort egenskap"},tools:{copy:"Kopiera egenskaper",pastefeaturesfromotherlayers:"Paste features from other layer",addpart:"Lägg till del",deletepart:"Ta bort del",merge:"Slå samman egenskaper",split:"Dela upp egenskap",add_feature:"Lägg till egenskap",delete_feature:"Ta bort egenskap",move_feature:"Flytta egenskap",update_vertex:"Uppdatera punktens egenskap",update_feature:"Uppdatera egenskap",update_multi_features:"Ändra attributen för de valda funktionerna",copyfeaturefromexternallayer:"Create Feature from added layer"},toolsoftool:{measure:"Show measure",snap:"Snap layer",snapall:"Snap to all layers"},steps:{help:{select_elements:"Välj egenskaper",select_element:"Välj egenskapalitse ominaisuus",copy:"Skapa kopia av valda egenskaper",merge:"Slå samman egenskaper",split:"Dela upp egenskap","new":"Skapa ny egenskap",edit_table:"Ändra egenskaper i tabellen",draw_new_feature:"Piirrä ominaisuus kartalle",action_confirm:"Godkänn funktionen",double_click_delete:"Välj funktionen som du vill ta bort på kartan",edit_feature_vertex:"Ändra punkten eller lägg till punkten till den valda egenskapen",move:"Flytta den valda egenskapen",select_feature_to_relation:"Välj relation",show_edit_feature_form:"Visa egenskapsformuläret för redigering av attribut",pick_feature:"Välj funktion på kartan för att ändras",insert_attributes_feature:"Lägg till egenskapens attribut"}},workflow:{steps:{select:"Välj egenskap",draw_part:"Rita ny del",merge:"Välj egenskap att slå samman",selectSHIFT:"Tryck SHIFT, om du vill välja objekt med hjälp av rektangel.",selectDrawBox:"Rita upp den rektangel inom vilken objekten väljs ",selectDrawBoxAtLeast2Feature:"Rita rektangeln inom vilken minst två objekt är markerade ",selectPoint:"Välj egenskap",selectPointSHIFT:"Tryck SHIFT, om du vill välja objekt med hjälp av rektangel, eller välj en enskild egenskap.",selectMultiPointSHIFT:"Tryck SHIFT, om du vill välja objekt med hjälp av rektangel, eller välj en enskild egenskap.",selectMultiPointSHIFTAtLeast2Feature:"Tryck på SKIFT för att välja minst två objekt med en rektangel eller välj en enda egenskap. ",copyCTRL:"CTRL+C, du kan kopiera valda egenskaper.",selectStartVertex:"Visa startpunkten för valda egenskaper.",selectToPaste:"Välj punkt till vilken de valda egenskaperna ska fogas.",draw_split_line:"Rita en linje enligt vilken den valda egenskapen ska uppdelas."}},messages:{featureslockbyotheruser:"Jotkut geometriat/tietueet eivät ole muokattavissa, koska muut käyttäjät muokkaavat niitä",splitted:"Uppdelad",nosplittedfeature:"Egenskapen har inte delats upp",press_esc:"Tryck ESC för att gå tillbaka",online:"Förbindelsen har upprättats. Ändringar kan sparas i databasen.",offline:"Du är i offline-läge. Ändringarna sparas lokalt",delete_feature:"Vill du ta bort den valda egenskapen?",delete_feature_relations:"Om egenskapen saknar bindande relationer blir dessa relationer föräldralösa. Vi rekommenderar att du behandlar dessa relationer innan du lämnar programmet",unlink_relation:"Vill du ta bort relationen?",commit_feature:"Ska ändringarna sparas?",change_toolbox_relation:"Nivån har en relation/relationer. Spara ändringarna innan du börjar redigera.",saved:"Uppgifterna sparades",saved_local:"Uppgifterna sparades lokalt.",loading_data:"Uppgifterna laddas",saving:"Uppgifterna sparas. Vänta...",constraints:{enable_editing:"Zooma in för att börja använda redigeringsverktyg \nAktivering skala 1:"},pdf:"Förhandsgranskning av dokument är inte tillgänglig. Tryck här",commit:{header:"Följande lista visar alla ändringar.",header_add:"<b>Tillagda</b> visar antalet egenskaper som lagts till",header_update_delete:"<b>Redigerad</b> och <b>Borttagen</b> Visa en lista på egenskapernas id",add:"(n. egenskaper) har lagts till","delete":"Borttagen (id)",update:"Redigerad(id)"},loading_table_data:"Building Data Table. Please wait ...",copy_and_paste_from_other_layer_mandatory_fields:"It is necessary to fill in any mandatory fields on the features pasted before saving",no_feature_selected:"No feature selected",select_min_2_features:"Select at least 2 features"},relation:{table:{info:"<div>Välj relation för länkning till egenskap som ska redigeras.</div>"},draw_new_feature:"Draw new feature",draw_or_copy:"or",copy_feature_from_other_layer:"Copy feature from other layer"},form:{relations:{tooltips:{back_to_father:"Back to edit father",add_relation:"Skapa och länka ny relation",link_relation:"Foga relationen till denna egenskap",open_relation_tools:"Visa relationsverktyg",unlink_relation:"Ta bort relation"}},buttons:{save:"Infoga/Redigera",save_and_back:"Spara och gå tillbaka",cancel:"Ignorera ändringar"}},modal:{tools:{copyfeaturefromotherlayer:{title:"Select feature/s"},copyfeaturefromprojectlayer:{title:"Select a feature"}}}}},{}],30:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./i18n"),o=i(r);n["default"]={i18n:o["default"]}},{"./i18n":26}],31:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,n);var r=e("../services/editingservice"),o=n.context_inputs||null,s=n.layer,u=s.getId();if(o){var d=o.inputs.features[o.inputs.features.length-1],f=d.isNew()?Promise.resolve():r.getLayersDependencyFeatures(u,{feature:d,filterType:"fid"});f.then(function(){o.formEventBus=t.getService().getEventBus();var e=new c(o),n=e.buildRelationComponents(),a=r.getFormComponentsById(u);a.length&&t.addFormComponents(a),n.length&&t.addFormComponents(n),t.getService().handleRelation=function(){var e=i(regeneratorRuntime.mark(function t(e){var n,i=e.relation;e.layerId,e.feature;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setLoadingContent(!0),n=i.name,e.next=4,r.setLayerUniqueFieldValues(s.getRelationById(n).getChild());case 4:this.setCurrentComponentById(n),l.setLoadingContent(!1);case 6:case"end":return e.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()})}}var o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=g3wsdk.gui.GUI,u=g3wsdk.gui.vue.FormComponent,c=e("./editingformservice");s(r,u),t.exports=r},{"../services/editingservice":42,"./editingformservice":32}],32:[function(e,t,n){var i=g3wsdk.gui.GUI,r=e("../components/FormRelation.vue"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e("../services/editingservice");this.state={relations:[]};var o=t.inputs||{},a=o.layer,s=o.features;this._formEventBus=t.formEventBus||null;var l=a.getId(),u=s[s.length-1],c=a.getRelations().getArray().filter(function(e){return"ONE"!==e.getType()&&e.getFather()===l});c=n.getRelationsInEditing({layerId:l,relations:c,feature:u}),this.hasRelations=function(){return!!c.length},this.buildRelationComponents=function(){var e=this,t=[];return c.forEach(function(n){var o=Vue.extend({mixins:[r],name:"relation_"+Date.now(),methods:{getService:function(){return e._relationsService}},data:function(){return{layerId:l,relation:n.relation,relations:n.relations,resourcesurl:i.getResourcesUrl(),formeventbus:e._formEventBus}}});t.push({title:"plugins.editing.edit_relation",name:n.relation.name,id:n.relation.id,header:!1,component:o})}),t}};t.exports=o},{"../components/FormRelation.vue":13,"../services/editingservice":42}],33:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,n=void 0===t?[]:t,i=e.feature,r=void 0===i?null:i,o=e.attributes,s=void 0===o?[]:o,l=Vue.extend(a["default"]);return new l({features:n,feature:r,attributes:s})}var o=e("../components/ChooseFeatureToEdit.vue"),a=i(o);t.exports=r},{"../components/ChooseFeatureToEdit.vue":9}],34:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t),this.vueComponent=a["default"];var n=t.name,i=void 0===n?"Editing data":n;this.name=i,c(this,t),this._resourcesUrl=t.resourcesUrl||d.getResourcesUrl(),this._service=t.service||p;var r=Vue.extend(this.vueComponent);this.internalComponent=new r({service:this._service,data:function(){return{state:e._service.state,resourcesurl:e._resourcesUrl,showcommitbar:t.showcommitbar,editingButtonsEnabled:!0}}}),this.mount=function(e){return l(this,"mount",e,!0)},this.unmount=function(){var e=this,t=$.Deferred();return this._service.stop()["finally"](function(){e.unmount=function(){l(this,"unmount").then(function(){return t.resolve()})},e.unmount()}),t.promise();
}}var o=e("../components/Editing.vue"),a=i(o),s=g3wsdk.core.utils,l=s.base,u=s.inherit,c=s.merge,d=g3wsdk.gui.GUI,f=g3wsdk.gui.vue.Component,p=e("../services/editingservice");u(r,f),t.exports=r},{"../components/Editing.vue":12,"../services/editingservice":42}],35:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,n=void 0===t?[]:t,i=e.selectedFeatures,r=void 0===i?[]:i,o={};n.forEach(function(e){var t=e.__layerId;if(void 0===o[t]){var n=!s.getLayerById(t);o[t]={external:n,fields:!n&&s.getLayerById(t).getFields(),features:[]}}o[t].features.push(e)});var l=Vue.extend(a["default"]);return new l({layers:o,selectedFeatures:r})}var o=e("../components/CopyFeaturesFromOtherLayers.vue"),a=i(o),s=g3wsdk.core.catalog.CatalogLayersStoresRegistry;t.exports=r},{"../components/CopyFeaturesFromOtherLayers.vue":10}],36:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=e.external,i=e.features,r=void 0===i?[]:i,o=e.selectedFeatures,l=void 0===o?[]:o,u=Vue.extend(a["default"]);return new u({features:r,fields:n?null:s.getLayerById(t.getId()).getFields(),selectedFeatures:l})}var o=e("../components/CopyFeaturesFromOtherProjectLayer.vue"),a=i(o),s=g3wsdk.core.catalog.CatalogLayersStoresRegistry;t.exports=r},{"../components/CopyFeaturesFromOtherProjectLayer.vue":11}],37:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,n=e.events,i=Vue.extend({data:function(){return{selected:null}},render:function(e){var i=this,o=Object.keys(t[0].getAlphanumericProperties()),a=o.map(function(t){return e("th",t)}),s=e("thead",[e("tr",a)]),l=t.map(function(t,a){var s=o.map(function(n){var i=t.get(n);return i="Object"===r(i)?i.value:i,e("td",i)});return e("tr",{on:{click:function(){i.selected=a,n.click(a)}},style:{cursor:"pointer"},"class":{"skin-background-color lighten":i.selected===a}},s)}),u=e("tbody",l),c=e("table",{"class":{"table table-responsive table-striped":!0}},[s,u]);return e("div",{style:{width:"100%",overflow:"auto"}},[c])}});return(new i).$mount().$el}var r=g3wsdk.core.utils.toRawType;t.exports=i},{}],38:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=e("../components/Table.vue"),a=i(o),s=g3wsdk.core.utils,l=s.base,u=s.inherit,c=g3wsdk.gui.vue.Component,d=e("../services/tableservice"),f=Vue.extend(a["default"]),p=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this);var n=t.service||new d(r({},t));this.setService(n);var i=new f({service:n});this.setInternalComponent(i),i.state=n.state,n.once("ready",function(){return e.emit("ready")}),this.unmount=function(){return n.cancel(),l(this,"unmount")}};u(p,c),t.exports=p},{"../components/Table.vue":16,"../services/tableservice":44}],39:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=e("./config"),o=i(r),a=g3wsdk.core.utils,s=a.base,l=a.inherit,u=g3wsdk.core.plugin.Plugin,c=g3wsdk.gui.GUI,d=e("./services/editingservice"),f=e("./panel"),p=function(){var e=this;s(this,{name:"editing",i18n:o["default"].i18n,service:d,fontClasses:[{name:"measure",className:"fas fa-ruler-combined"},{name:"magnete",className:"fas fa-magnet"},{name:"clipboard",className:"fas fa-clipboard"}]});var t={position:0,title:"EDITING"},n={some_layers:!1};this.panel,this.service.loadPlugin()&&(this.setHookLoading({loading:!0}),this.service.once("ready",function(){e.registerPlugin(e.config.gid)&&(c.isready?e.setupGui():c.on("ready",e.setupGui.bind(e))),e.setHookLoading({loading:!1});var t=e.service.getApi();e.setApi(t),e.setReady(!0)}),this.service.init(this.config)),this.setupGui=function(){return this.config.visible!==!1&&(this.config.name=this.config.name||"plugins.editing.editing_data",this.addToolGroup(t),void this.addTools({action:this.showEditingPanel,offline:!1,icon:"pencil"},t))},this.showEditingPanel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.service.getLayers().length>0?(this.panel=new f(e),c.showPanel(this.panel),!n.some_layers&&this.service.getLayersInError()&&(c.showUserMessage({type:"warning",message:"plugins.editing.errors.some_layers",closable:!0}),n.some_layers=!0)):c.showUserMessage({type:"alert",message:"plugins.editing.errors.no_layers"}),this.panel},this.hideEditingPanel=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.panel&&c.closePanel(),this.panel=null},this.unload=function(){this.panel=null,this.config.visible&&this.removeTools(),this.service.clear()}};l(p,u),new p},{"./config":30,"./panel":41,"./services/editingservice":42}],40:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i={PICKED:"picked"},r=function(e,t,n,i){this.type=e,this.features=i,this.coordinate=t,this.layer=n},o=n.PickFeaturesInteraction=function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ol.interaction.Pointer.call(this,{handleDownEvent:a.handleDownEvent_,handleUpEvent:a.handleUpEvent_,handleMoveEvent:a.handleMoveEvent_}),this.layer=e.layer,this.pickedFeatures=[]};ol.inherits(o,ol.interaction.Pointer),o.handleDownEvent_=function(e){return this.pickedFeatures=this.featuresAtPixel(e),this.pickedFeatures},o.handleUpEvent_=function(e){return this.pickedFeatures&&this.pickedFeatures.length&&this.dispatchEvent(new r(i.PICKED,e.coordinate,this.layer,this.pickedFeatures)),!0},o.prototype.featuresAtPixel=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.pixel,i=t.map;return i.getFeaturesAtPixel(n,{layerFilter:function(t){return t===e.layer},hitTolerance:isMobile&&isMobile.any?10:0})},o.handleMoveEvent_=function(e){var t=e.map.getTargetElement(),n=this.featuresAtPixel(e);t.style.cursor=n?"pointer":""},o.prototype.shouldStopEvent=function(){return!1},o.prototype.setMap=function(e){if(!e){var t=this.getMap().getTargetElement();t.style.cursor=""}ol.interaction.Pointer.prototype.setMap.call(this,e)}},{}],41:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.id="editing-panel",e.title=e.title||"plugins.editing.editing_data",e.name="Editing Layer",e.toolboxes=e.toolboxes||null,e.showcommitbar=void 0===e.showcommitbar||e.showcommitbar,o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./g3w-editing-components/editing");a(i,s),t.exports=i},{"./g3w-editing-components/editing":34}],42:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(){var e=this;y(this),this._sessions={},this.constraints={},this._vectorUrl,this._projectType,this._unByKeys=[],this.setterKeys=[],this._events={layer:{start_editing:{before:{},after:{}}}},this.layersUniqueFieldsValues={},this.saveConfig={mode:"default",modal:!1,messages:void 0,cb:{done:void 0,error:void 0}},this.applicationEditingConstraints={toolboxes:{},showToolboxesExcluded:!0},this.state={open:!1,toolboxes:[],toolboxselected:null,toolboxidactivetool:null,showselectlayers:!0,message:null,relations:[]},this.loadLayersFeaturesToResultWhenCloseEditing={},this._layers_in_error=!1,this._mapService=M.getService("map"),this.mapControlToggleEventHandler=function(t){if(t.target.isToggled()&&t.target.isClickMap()){var n=e.state.toolboxselected;n&&n.getActiveTool()&&n.stopActiveTool()}},this._mapService.on(q,this.mapControlToggleEventHandler),this._formComponents={},this._subscribers={},this.init=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._vectorUrl=t.vectorurl,this._projectType=t.project_type,this._layersstore=new R({id:"editing",queryable:!1}),A.addLayersStore(this._layersstore),this.config=t,this._editableLayers={},this._toolboxes=[],this.state.toolboxes=[];var n=this._getEditableLayersFromCatalog(),i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.push(u.getLayerForEditing({vectorurl:this._vectorUrl,project_type:this._projectType}))}}catch(c){o=!0,a=c}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw a}}Promise.allSettled(i).then(function(t){t.forEach(function(t){var n=t.status,i=t.value;if("fulfilled"===n){var r=i,o=r.getId();e._editableLayers[o]=r,e._attachLayerWidgetsEvent(r),e._sessions[o]=null}else e._layers_in_error=!0}),e._ready()})},this._ready=function(){this.registerFeaturesLockByOtherUserSetterHandler(),this.setLayersColor(),this._layersstore.addLayers(this.getLayers()),this._buildToolBoxes(),this._createToolBoxDependencies(),this.setApi({api:new d["default"]({service:this})}),this.registerResultEditingAction(),this.emit("ready")}}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=e("../api"),d=i(c),f=g3wsdk.constant.G3W_FID,p=g3wsdk.core,h=p.ApplicationState,v=p.ApplicationService,g=g3wsdk.core.data.DataRouterService,m=g3wsdk.core.utils,y=m.base,b=m.inherit,w=m.XHR,k=g3wsdk.core.geometry.Geometry,x=g3wsdk.core.geoutils,S=x.getFeaturesFromResponseVectorApi,F=x.isSameBaseGeometryType,C=g3wsdk.core.workflow.WorkflowsStack,E=g3wsdk.core.plugin.PluginService,T=g3wsdk.core.editing.SessionsRegistry,I=g3wsdk.core.catalog.CatalogLayersStoresRegistry,A=g3wsdk.core.map.MapLayersStoreRegistry,L=g3wsdk.core.layer,O=L.Layer,R=L.LayersStore,P=g3wsdk.core.layer.features.Feature,M=g3wsdk.gui.GUI,j=g3wsdk.core.errors.parsers.Server,D=g3wsdk.core.i18n.tPlugin,V=g3wsdk.ol.utils,B=V.getScaleFromResolution,N=V.getResolutionFromScale,U=e("../toolboxes/toolboxesfactory"),z=e("../workflows/commitfeaturesworkflow"),q="mapcontrol:toggled",G={CHANGES:"EDITING_CHANGES"};b(s,E);var H=s.prototype;H.getAppState=function(){return h},H.getFormComponentsById=function(e){return this._formComponents[e]||[]},H.getFormComponents=function(){return this._formComponents},H.addFormComponents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.components,i=void 0===n?[]:n;this._formComponents[t]||(this._formComponents[t]=[]);for(var r=0;r<i.length;r++){var o=i[r];this._formComponents[t].push(o)}},H.getSession=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=this.getToolBoxById(t);return n.getSession()},H.getFeature=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=this.getToolBoxById(t),i=n.getActiveTool();return i.getFeature()},H.subscribe=function(e,t){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e].find(function(e){return e===t})||this._subscribers[e].push(t),t},H.unsubscribe=function(e,t){this._subscribers[e]=this._subscribers[e].filter(function(e){return e!==t})},H.setShowSelectLayers=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state.showselectlayers=e},H.registerFeaturesLockByOtherUserSetterHandler=function(){this.getLayers().forEach(function(e){e.getFeaturesStore().onafter("featuresLockedByOtherUser",function(){M.showUserMessage({type:"warning",subtitle:e.getName().toUpperCase(),message:"plugins.editing.messages.featureslockbyotheruser"})})})},H.registerResultEditingAction=function(){var e=this,t=M.getService("queryresults");this.setterKeys.push({setter:"editFeature",key:t.onafter("editFeature",function(t){var n=t.layer,i=t.feature;e.editResultLayerFeature({layer:n,feature:i})})})},H.unregisterResultEditingAction=function(){var e=M.getService("queryresults");this.setterKeys.forEach(function(t){var n=t.setter,i=t.key;return e.un(n,i)})},H.editResultLayerFeature=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.layer,r=n.feature,o=i.id,a=r.attributes[f];this.getToolBoxes().forEach(function(e){return e.setShow(e.getId()===o)}),this.getPlugin().showEditingPanel();var s=this.getToolBoxById(o),l=s.getEditingConstraints(),u=l.scale;r.geometry&&"undefined"!=typeof u&&this._mapService.getMap().once("moveend",function(){var e=t._mapService.getMapUnits(),n=t._mapService.getMap(),i=parseInt(B(n.getView().getResolution(),e));if(i>u){var r=N(u,e);n.getView().setResolution(r)}}),s.start({filter:{fids:a}}).then(function(n){var i=(n.features,s.getLayer().getType()===O.LayerTypes.VECTOR?s.getLayer().getEditingLayer().getSource().getFeatures():s.getLayer().getEditingLayer().getSource().readFeatures()),r=i.find(function(e){return e.getId()==a});if(r){r.getGeometry()&&t._mapService.zoomToGeometry(r.getGeometry()),s.setSelected(!0);var o=s.getSession();t.setSelectedToolbox(s);var l=e("../workflows/editnopickmapfeatureattributesworkflow"),u={inputs:{layer:s.getLayer(),features:[r]},context:{session:o}},c=new l({runOnce:!0});c.start(u).then(function(){return o.save().then(function(){return t.saveChange()})}).fail(function(){return o.rollback()})}}).fail(function(e){})},H.disableMapControlsConflict=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._mapService.disableClickMapControls(e)},H.setSelectedToolbox=function(e){this.state.toolboxselected=e},H.getToolboxSelected=function(){return this.state.toolboxselected},H.addNewFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.geometry,i=t.properties,r=new P;n&&r.setGeometry(new ol.geom[n.type](n.coordinates)),r.setProperties(i),r.setTemporaryId();var o=this.getToolBoxById(e),a=o.getLayer().getEditingLayer(),s=o.getSession();return a.getSource().addFeature(r),s.pushAdd(e,r,!1),r},H.getLayersInError=function(){return this._layers_in_error},H.getMapService=function(){return this._mapService},H._initOffLineItems=function(){for(var e in G)!this.getOfflineItem(G[e])&&v.setOfflineItem(G[e])},H._handleOfflineChangesBeforeSave=function(e){var t=v.getOfflineItem(G.CHANGES),n=function(e){var t=e.layerId,n=e.current,i=e.previous;n[t].add=[].concat(a(i[t].add),a(n[t].add)),n[t]["delete"]=[].concat(a(i[t]["delete"]),a(n[t]["delete"])),i[t].update.forEach(function(e){var i=e.id,r=n[t].update.find(function(e){return e.id===i});!r&&n[t].update.unshift(e)});var r=i[t].lockids||[];r.forEach(function(e){var i=e.featureid,r=n[t].lockids.find(function(e){return e.featureid===i});!r&&n[t].update.unshift(e)})};for(var i in t){var r=e[i]?e:e[Object.keys(e)[0]].relations[i]?e[Object.keys(e)[0]].relations:null;if(r)n({layerId:i,current:r,previous:t});else{var o=Object.keys(e)[0],s=Object.keys(t[i].relations);s.length?s.indexOf(o)!==-1&&(n({layerId:o,current:e,previous:t[i].relations}),t[i].relations[o]=e[o],e=t):e[i]=t[i]}}return e},H.saveOfflineItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.data;return t===G.CHANGES&&(n=this._handleOfflineChangesBeforeSave(n)),v.setOfflineItem(t,n)},H.setOfflineItem=function(e,t){v.setOfflineItem(e,t)},H.getOfflineItem=function(e){return v.getOfflineItem(e)},H.checkOfflineChanges=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.modal,i=void 0===n||n,r=t.unlock,o=void 0!==r&&r;return new Promise(function(t,n){var r=v.getOfflineItem(G.CHANGES);if(r){var a=[],s=[];setTimeout(function(){for(var l in r){s.push(l);var u=e.getToolBoxById(l),c=r[l];a.push(e.commit({toolbox:u,commitItems:c,modal:i}))}$.when.apply(e,a).then(function(){return t()}).fail(function(e){return n(e)}).always(function(){o&&s.forEach(function(t){e.getLayerById(t).unlock()}),e.setOfflineItem(G.CHANGES)})},1e3)}})},H.registerOnLineOffLineEvent=function(){var e=this;h.online&&this.checkOfflineChanges({unlock:!0});var t=v.onafter("offline",function(){}),n=v.onafter("online",function(){e.checkOfflineChanges({modal:!1}).then(function(){})["catch"](function(e){return M.notify.error(e)})});this._unByKeys.push({owner:v,setter:"offline",key:t}),this._unByKeys.push({owner:v,setter:"online",key:n})},H.unregisterOnLineOffLineEvent=function(){this.unregisterSettersEvents(["online","offline"])},H.unregisterSettersEvents=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._unByKeys.forEach(function(e){var t=e.owner,n=e.setter,i=e.key;t.un(n,i)})},H.fireEvent=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i){t._subscribers[e]&&t._subscribers[e].forEach(function(i){var r=i(n);r&&r.once&&t.unsubscribe(e,i)}),i()})},H.activeQueryInfo=function(){this._mapService.activeMapControl("query")},H.setLayersColor=function(){var e=["#C43C39","#d95f02","#91522D","#7F9801","#0B2637","#8D5A99","#85B66F","#8D2307","#2B83BA","#7D8B8F","#E8718D","#1E434C","#9B4F07","#1b9e77","#FF9E17","#7570b3","#204B24","#9795A3","#C94F44","#7B9F35","#373276","#882D61","#AA9039","#F38F3A","#712333","#3B3A73","#9E5165","#A51E22","#261326","#e4572e","#29335c","#f3a712","#669bbc","#eb6841","#4f372d","#cc2a36","#00a0b0","#00b159","#f37735","#ffc425"],t=!0,n=!1,i=void 0;try{for(var r,o=this.getLayers()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.getColor()?null:a.setColor(e.splice(0,1)[0])}}catch(s){n=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}},H._layerChildrenRelationInEditing=function(e){var t=this,n=e.getChildren(),i=n.filter(function(e){return t.getLayerById(e)});return i},H.undo=function(){var e=this.state.toolboxselected.getSession(),t=e.getId(),n=e.getLastHistoryState().items;this.undoRedoLayerUniqueFieldValues({layerId:t,sessionItems:n,action:"undo"});var i=e.undo();this.undoRedoRelationUniqueFieldValues({relationSessionItems:i,action:"undo"}),this.undoRelations(i)},H.undoRelations=function(e){var t=this;Object.entries(e).forEach(function(e){var n=u(e,2),i=n[0],r=n[1],o=t.getToolBoxById(i),a=o.getSession();a.undo(r)})},H.rollbackRelations=function(e){var t=this;Object.entries(e).forEach(function(e){var n=u(e,2),i=n[0],r=n[1],o=t.getToolBoxById(i),a=o.getSession();a.rollback(r)})},H.redo=function(){var e=this.state.toolboxselected.getSession(),t=e.getId(),n=e.getLastHistoryState().items;this.undoRedoLayerUniqueFieldValues({layerId:t,sessionItems:n,action:"redo"});var i=e.redo();this.undoRedoRelationUniqueFieldValues({relationSessionItems:i,action:"redo"}),this.redoRelations(i)},H.redoRelations=function(e){var t=this;Object.entries(e).forEach(function(e){var n=u(e,2),i=n[0],r=n[1],o=t.getToolBoxById(i),a=o.getSession();a.redo(r)})},H.getEditingLayer=function(e){return this._editableLayers[e].getEditingLayer()},H._buildToolBoxes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!0,n=!1,i=void 0;try{for(var r,o=this.getLayers()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=U.build(a,e);this.addToolBox(s)}}catch(l){n=!0,i=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}},H.addToolBox=function(e){this._toolboxes.push(e),this._sessions[e.getId()]=e.getSession(),this.state.toolboxes.push(e.state)},H.setOpenEditingPanel=function(e){this.state.open=e,this._getEditableLayersFromCatalog().forEach(function(t){return t.setInEditing(e)})},H.addEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.id,i=e.fnc;this._events[t]||(this._events[t]={}),this._events[t][n]||(this._events[t][n]=[]),this._events[t][n].push(i)},H.addEvents=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.types,i=void 0===n?[]:n,r=t.id,o=t.fnc;i.forEach(function(t){return e.addEvent({type:t,id:r,fnc:o})})},H.runEventHandler=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.id;this._events[t]&&this._events[t][n]&&this._events[t][n].forEach(function(e){return e()})},H.setSaveConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,n=void 0===t?"default":t,i=e.cb,r=void 0===i?{}:i,o=e.modal,a=void 0!==o&&o,s=e.messages;this.saveConfig.mode=n,this.saveConfig.modal=a,this.saveConfig.messages=s,this.saveConfig.cb=l({},this.saveConfig.cb,r)},H.getSaveConfig=function(){return this.saveConfig},H.resetDefault=function(){this.saveConfig={mode:"default",modal:!1,messages:null,cb:{done:null,error:null}},this.disableMapControlsConflict(!1)},H._attachLayerWidgetsEvent=function(e){for(var t=this,n=e.getEditingFields(),i=function(i){var r=n[i];if(r.input&&"select_autocomplete"===r.input.type&&!r.input.options.filter_expression){var o=r.input.options,a=o.key,s=(o.values,o.value),l=o.usecompleter,u=o.layer_id,c=o.loading,d=t;l||t.addEvents({types:["start-editing","show-relation-editing"],id:e.getId(),fnc:function(){c.state="loading",r.input.options.values=[];var e=I.getLayerById(u);e?e?e.getDataTable({ordering:a}).then(function(e){if(e&&e.features){var t=e.features;d.fireEvent("autocomplete",{field:r,features:t});for(var n=0;n<t.length;n++)r.input.options.values.push({key:t[n].properties[a],value:t[n].properties[s]});c.state="ready"}}).fail(function(e){c.state="error"}):c.state="error":(d.fireEvent("autocomplete",{field:r,features:[]}),c.state="ready")}})}},r=0;r<n.length;r++)i(r)},H._createToolBoxDependencies=function(){var e=this;this._toolboxes.forEach(function(t){var n=t.getLayer();if(t.setFather(n.isFather()),t.state.editing.dependencies=e._getToolBoxEditingDependencies(n),n.isFather()&&t.hasDependencies()){var i=n.getRelations().getRelations();for(var r in i){var o=i[r];t.addRelation(o)}}})},H.isFieldRequired=function(e,t){return this.getLayerById(e).isFieldRequired(t)},H._getToolBoxEditingDependencies=function(e){var t=this,n=[].concat(a(e.getChildren()),a(e.getFathers()));return n.filter(function(e){return!!t.getLayerById(e)})},H._hasEditingDependencies=function(e){var t=this._getToolBoxEditingDependencies(e);return!!t.length},H.handleToolboxDependencies=function(e){var t=this,n=void 0;e.isFather()&&this.getLayersDependencyFeatures(e.getId()),e.getDependencies().forEach(function(e){n=t.getToolBoxById(e),n.setEditing(!1)})},H._getEditableLayersFromCatalog=function(){var e=I.getLayers({EDITABLE:!0});return e},H.getLayers=function(){return Object.values(this._editableLayers)},H.getCurrentWorkflow=function(){return C.getCurrent()},H.getCurrentWorkflowData=function(){var e=C.getCurrent();return{session:e.getSession(),inputs:e.getInputs(),context:e.getContext(),feature:e.getCurrentFeature(),layer:e.getLayer()}},H.getRelationsAttributesByFeature=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation,i=e.feature,r=this.getToolBoxById(t).getLayer(),o=this.getRelationsByFeature({layerId:t,relation:n,feature:i});return o.map(function(e){return{fields:r.getFieldsWithValues(e,{relation:!0}),id:e.getId()}})},H._getRelationLayerId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation;return n.getChild()===t?n.getFather():n.getChild()},H.getRelationsByFeature=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation,i=e.feature,r=(e.layerType,this._getRelationFieldsFromRelation({layerId:t,relation:n})),o=r.ownField,a=r.relationField,s=i.get(a),l=this._getFeaturesByLayerId(t);return l.filter(function(e){return e.get(o)==s})},H.registerLeavePage=function(e){v.registerLeavePage({bool:e})},H.loadPlugin=function(){return this._load=!!this._getEditableLayersFromCatalog().length},H.getLayerById=function(e){return this._editableLayers[e]},H.beforeEditingStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;this._checkLayerWidgets(t)},H.afterEditingStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.layer},H.getToolBoxById=function(e){return this._toolboxes.find(function(t){return t.getId()===e})},H.setApplicationEditingConstraints=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showToolboxesExcluded:!0,toolboxes:{}};this.applicationEditingConstraints=l({},this.applicationEditingConstraints,t);var n=t.toolboxes,i=t.showToolboxesExcluded,r=Object.keys(n);!i&&this.state.toolboxes.forEach(function(e){return e.show=r.indexOf(e.id)!==-1}),r.forEach(function(t){var i=e.getToolBoxById(t);i.setEditingConstraints(n[t])})},H.getApplicationEditingConstraints=function(){return this.applicationEditingConstraints},H.getApplicationEditingConstraintById=function(e){return this.applicationEditingConstraints.toolboxes[e]},H.getToolBoxes=function(){return this._toolboxes},H.getEditableLayers=function(){return this._editableLayers},H._cancelOrSave=function(){return resolve()},H.stop=function(){var e=this;return new Promise(function(t,n){var i=[];e._toolboxes.forEach(function(t){t.getSession().getHistory().state.commit&&i.push(e.commit(t,!0))}),$.when.apply(e,i).always(function(){e._toolboxes.forEach(function(e){return e.stop()}),e.clearState(),e._mapService.refreshMap(),t()})})},H.clear=function(){A.removeLayersStore(this._layersstore),T.clear(),this._mapService.off(q,this.mapControlToggleEventHandler),this.unregisterResultEditingAction()},H.clearState=function(){this.state.toolboxselected=null,this.state.toolboxidactivetool=null,this.state.message=null},H.getRelationsInEditing=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layerId,i=t.relations,r=void 0===i?[]:i,o=t.feature,a=[],s=void 0;return r.forEach(function(t){var i=e._getRelationLayerId({layerId:n,relation:t});e.getLayerById(i)&&(s={relation:t.getState(),relations:e.getRelationsAttributesByFeature({layerId:i,relation:t,feature:o})},s.validate={valid:!0},a.push(s))}),a},H._filterRelationsInEditing=function(e){var t=this,n=e.layerId,i=e.relations,r=void 0===i?[]:i;return r.filter(function(e){var i=t._getRelationId({layerId:n,relation:e});return t.getToolBoxById(i)})},H.stopToolboxesChildren=function(e){var t=this,n=this.getLayerById(e),i=this._filterRelationsInEditing({relations:n.getRelations()?n.getRelations().getArray():[],layerId:e});i.filter(function(t){return t.getFather()===e}).forEach(function(n){var i=t._getRelationId({layerId:e,relation:n});t.getToolBoxById(i).inEditing()&&t.getToolBoxById(i).stop()})},H.stopSessionChildren=function(e){var t=this,n=this.getLayerById(e),i=this._filterRelationsInEditing({relations:n.getRelations()?n.getRelations().getArray():[],layerId:e});i.filter(function(t){return t.getFather()===e}).forEach(function(n){var i=t._getRelationId({layerId:e,relation:n});t.getToolBoxById(i).inEditing()||t._sessions[i].stop()})},H.fatherInEditing=function(e){var t=this,n=!1,i=void 0,r=this.getLayerById(e).getFathers();return r.forEach(function(e){if(i=t.getToolBoxById(e),i&&i.inEditing())return n=!0,!1}),n},H._getRelationFieldsFromRelation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation,i=n.getChild?n.getChild():n.child,r=i!==t,o=n.getFatherField?n.getFatherField():n.fatherField,a=n.getChildField?n.getChildField():n.childField,s=r?o:a,l=r?a:o;return{ownField:s,relationField:l}},H.createEditingDataOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.feature,i=t.relation,r=t.field,o=t.layerId,a=t.operator,s=void 0;switch(e){case"all":break;case"bbox":s={bbox:this._mapService.getMapBBOX()};break;case"field":s={field:{field:r,type:"editing"}};break;case"fid":"not"!==a&&(s={fid:{fid:n.getId(),layer:{id:o},type:"editing",relation:i.state,formatter:0}})}return{registerEvents:!0,editing:!0,filter:s}},H._getFeaturesByLayerId=function(e){return this.getLayerById(e).readEditingFeatures()},H.getLayersDependencyFeaturesFromSource=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layerId,i=t.relation,r=t.feature,o=t.operator,a=void 0===o?"eq":o;return new Promise(function(t){var o=e._getFeaturesByLayerId(n),s=e._getRelationFieldsFromRelation({layerId:n,relation:i}),l=s.ownField,u=s.relationField,c=r.get(u),d="eq"===a&&o.find(function(e){var t=e.get(l);return t==c});t(d)})},H._getRelationId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerId,n=e.relation,i=n.getFather?n.getFather():n.father,r=n.getChild?n.getChild():n.child;return i===t?r:i},H.getLayersDependencyFeatures=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],r=this.getLayerById(e),o=n.relations?n.relations:r.getChildren().length&&r.getRelations()?this._filterRelationsInEditing({relations:r.getRelations().getArray().filter(function(t){return t.getFather()===e}),layerId:e}):[],a=h.online;return o.forEach(function(r){r.setLoading?r.setLoading(!0):r.loading=!0;var o=t._getRelationId({layerId:e,relation:r}),s=new Promise(function(i){var s=n.filterType||"fid";n.relation=r,n.layerId=e;var l=t.createEditingDataOptions(s,n),u=t._sessions[o],c=t.getToolBoxById(o);a&&u?(c.startLoading(),u.isStarted()?t.getLayersDependencyFeaturesFromSource({layerId:o,relation:r,feature:n.feature,operator:n.operator}).then(function(e){e?(i(o),c.stopLoading()):u.getFeatures(l).always(function(e){e.always(function(){c.stopLoading(),i(o)})})}):u.start(l).always(function(e){e.always(function(){c.stopLoading(),i(o)})})):t.getLayersDependencyFeaturesFromSource({layerId:o,relation:r,feature:n.feature,operator:n.operator}).then(function(){return i(o)})});i.push(s)}),Promise.all(i)["finally"](function(){return o.forEach(function(e){e.setLoading?e.setLoading(!1):e.loading=!1})}),Promise.all(i)},H.commitDirtyToolBoxes=function(e){var t=this;return new Promise(function(n){var i=t.getToolBoxById(e),r=t.getLayerById(e).getChildren();i.isDirty()&&i.hasDependencies()?t.commit(i).fail(function(){i.revert().then(function(){i.getDependencies().forEach(function(e){r.indexOf(e)!==-1&&t.getToolBoxById(e).revert()})})}).always(function(){return n(i)}):n(i)})},H._createCommitMessage=function(e){function t(e,t,n){var i={};i[""+D("editing.messages.commit.add")]=e.length,i[""+D("editing.messages.commit.update")]="["+t.map(function(e){return e.id}).join(",")+"]",i[""+D("editing.messages.commit.delete")]="["+n.join(",")+"]";var r="<h4>"+D("editing.messages.commit.header")+"</h4>";return r+="<h5>"+D("editing.messages.commit.header_add")+"</h5>",r+="<h5>"+D("editing.messages.commit.header_update_delete")+"</h5>",r+="<ul style='border-bottom-color: #f4f4f4;'>",Object.entries(i).forEach(function(e){var t=u(e,2),n=t[0],i=t[1];r+="<li>"+n+" : "+i+" </li>"}),r+="</ul>"}var n="";return n+=t(e.add,e.update,e["delete"]),_.isEmpty(e.relations)||(n+="<div style='height:1px; background:#f4f4f4;border-bottom:1px solid #f4f4f4;'></div>",n+="<div style='margin-left: 40%'><h4>"+D("editing.relations")+"</h4></div>",Object.entries(e.relations).forEach(function(e){var i=u(e,2),r=i[0],o=i[1];n+="<div><span style='font-weight: bold'>"+r+"</span></div>",n+=t(o.add,o.update,o["delete"])})),n},H.showCommitModalWindow=function(e){var t=this,n=e.layer,i=e.commitItems,r=e.close,o=e.commitPromise,a={success:{message:"plugins.editing.messages.saved",autoclose:!0},error:{}};return new Promise(function(e,s){
var l=new z({type:"commit"});l.start({inputs:{layer:n,message:t._createCommitMessage(i),close:r}}).then(function(){var t=M.dialog.dialog({message:'<h4 class="text-center"><i style="margin-right: 5px;" class='+M.getFontClass("spinner")+"></i>"+D("editing.messages.saving")+"</h4>",closeButton:!1});e(a),o.always(function(){return t.modal("hide")})}).fail(function(e){return s(e)}).always(function(){return l.stop()})})},H.saveChange=o(regeneratorRuntime.mark(function W(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.saveConfig.mode,e.next="autosave"===e.t0?3:4;break;case 3:return e.abrupt("return",this.commit({modal:!1}));case 4:case"end":return e.stop()}},W,this)})),H.addLayersFeaturesToShowOnResult=function(e){var t=this,n=e.layerId,i=e.fids,r=void 0===i?[]:i;void 0===this.loadLayersFeaturesToResultWhenCloseEditing[n]&&(this.loadLayersFeaturesToResultWhenCloseEditing[n]=new Set),r.forEach(function(e){return t.loadLayersFeaturesToResultWhenCloseEditing[n].add(e)})},H.onCloseEditingPanel=o(regeneratorRuntime.mark(function K(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showChangesToResult();case 2:this.getToolBoxes().forEach(function(e){return e.resetDefault()});case 3:case"end":return e.stop()}},K,this)})),H.showChangesToResult=o(regeneratorRuntime.mark(function Z(){var e,t,n,i=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=Object.keys(this.loadLayersFeaturesToResultWhenCloseEditing),!e.length){r.next=12;break}return t={layers:[],fids:[],formatter:1},e.forEach(function(e){var n=[].concat(a(i.loadLayersFeaturesToResultWhenCloseEditing[e]));if(n.length){var r=I.getLayerById(e);t.layers.push(r),t.fids.push(n)}}),n=t.layers.length?g.getData("search:layersfids",{inputs:t,outputs:{title:"plugins.editing.editing_changes",show:{loading:!1}}}):Promise.resolve(),r.prev=5,r.next=8,n;case 8:r.next=12;break;case 10:r.prev=10,r.t0=r["catch"](5);case 12:this.loadLayersFeaturesToResultWhenCloseEditing={};case 13:case"end":return r.stop()}},Z,this,[[5,10]])})),H.commit=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.toolbox,i=t.commitItems,o=t.modal,s=void 0===o||o,l=t.close,u=void 0!==l&&l,c=$.Deferred(),d=c.promise(),f=this.saveConfig,p=f.cb,v=void 0===p?{}:p,g=f.messages,m=void 0===g?{success:{},error:{}}:g;n=n||this.state.toolboxselected;var y=n.getSession(),_=n.getLayer(),b=_.getType(),w=i;i=i||y.getCommitItems();var k=i,x=k.add,S=void 0===x?[]:x,F=k["delete"],C=void 0===F?[]:F,E=k.update,T=void 0===E?[]:E,I=k.relations,A=void 0===I?{}:I;if(0===[].concat(a(S),a(C),a(T),a(Object.keys(A))).length)return M.showUserMessage({type:"info",message:"Nothing to save",autoclose:!0,closable:!1}),c.resolve(n),c.promise();var L=s?this.showCommitModalWindow({layer:_,commitItems:i,close:u,commitPromise:d}):Promise.resolve(m);return L.then(function(t){h.online?y.commit({items:w||i}).then(function(i,r){if(h.online){if(r.result){var o=t.success,s=o.autoclose,l=void 0===s||s,u=o.message,d=void 0===u?"plugins.editing.messages.saved":u;t&&t.success&&M.showUserMessage({type:"success",message:d,duration:3e3,autoclose:l}),b===O.LayerTypes.VECTOR&&e._mapService.refreshMap({force:!0}),v.done&&v.done instanceof Function&&v.done(n),e.addLayersFeaturesToShowOnResult({layerId:n.getId(),fids:[].concat(a(r.response["new"].map(function(e){var t=e.id;return t})),a(i.update.map(function(e){return e.id})))})}else{var f=new j({error:r.errors}),p=f.parse({type:"String"}),g=t.error,m=g.autoclose,y=void 0!==m&&m,_=g.message;M.showUserMessage({type:"alert",message:_||p,textMessage:!_,autoclose:y}),v.error&&v.error instanceof Function&&v.error(n,_||p)}c.resolve(n)}}).fail(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=new j({error:e.errors?e.errors:e}),r=i.parse({type:"String"}),o=t.error,a=o.autoclose,s=void 0!==a&&a,l=o.message;M.showUserMessage({type:"alert",message:l||r,textMessage:!l,autoclose:s}),c.reject(n),v.error&&v.error instanceof Function&&v.error(n,l||r)}):e.saveOfflineItem({data:r({},y.getId(),i),id:G.CHANGES}).then(function(){M.showUserMessage({type:"success",message:"plugins.editing.messages.saved_local",autoclose:!0}),y.clearHistory(),c.resolve(n)})["catch"](function(e){M.showUserMessage({type:"alert",message:e,textMessage:!0}),c.reject(n)})})["catch"](function(){c.reject(n)}),d},H.clearAllLayersUniqueFieldsValues=function(){this.layersUniqueFieldsValues={}},H.clearLayerUniqueFieldsValues=function(e){this.layersUniqueFieldsValues[e]={}},H.removeLayerUniqueFieldValuesFromFeature=function(e){var t=this,n=e.layerId,i=e.feature;this.layersUniqueFieldsValues[n]&&Object.keys(i.getProperties()).forEach(function(e){"undefined"!=typeof t.layersUniqueFieldsValues[n][e]&&t.layersUniqueFieldsValues[n][e]["delete"](i.get(e))})},H.removeRelationLayerUniqueFieldValuesFromFeature=function(e){var t=this,n=e.layerId,i=e.relationLayerId,r=e.feature;"undefined"==typeof this.layersUniqueFieldsValues[i].__uniqueFieldsValuesRelations&&(this.layersUniqueFieldsValues[i].__uniqueFieldsValuesRelations={}),Object.keys(r.getProperties()).forEach(function(e){"undefined"==typeof t.layersUniqueFieldsValues[i].__uniqueFieldsValuesRelations[n]&&(t.layersUniqueFieldsValues[i].__uniqueFieldsValuesRelations[n]={}),"undefined"!=typeof t.layersUniqueFieldsValues[n][e]&&(t.layersUniqueFieldsValues[i].__uniqueFieldsValuesRelations[n][e]=new Set(t.layersUniqueFieldsValues[n][e]),t.layersUniqueFieldsValues[i].__uniqueFieldsValuesRelations[n][e]["delete"](r.get(e)))})},H.setLayerUniqueFieldValues=function(){var e=o(regeneratorRuntime.mark(function t(e){var n,i,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],i=I.getLayerById(e),i.getEditingFields().forEach(function(t){if(t.validate.unique&&"undefined"==typeof r.getLayerUniqueFieldValues({layerId:e,field:t})){var o=i.getFilterData({unique:t.name});o.then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"undefined"==typeof r.layersUniqueFieldsValues[e]&&(r.layersUniqueFieldsValues[e]={}),r.layersUniqueFieldsValues[e][t.name]=new Set(n)}),n.push(o)}}),t.next=5,Promise.allSettled(n);case 5:return t.abrupt("return",this.layersUniqueFieldsValues[e]);case 6:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),H.saveTemporaryRelationsUniqueFieldsValues=function(e){var t=this;"undefined"!=typeof this.layersUniqueFieldsValues[e].__uniqueFieldsValuesRelations&&(Object.keys(this.layersUniqueFieldsValues[e].__uniqueFieldsValuesRelations).forEach(function(n){Object.entries(t.layersUniqueFieldsValues[e].__uniqueFieldsValuesRelations[n]).forEach(function(e){var i=u(e,2),r=i[0],o=i[1];t.layersUniqueFieldsValues[n][r]=o})}),this.clearTemporaryRelationsUniqueFieldsValues(e))},H.clearTemporaryRelationsUniqueFieldsValues=function(e){delete this.layersUniqueFieldsValues[e].__uniqueFieldsValuesRelations},H.getLayerUniqueFieldValues=function(e){var t=e.layerId,n=e.field;return this.layersUniqueFieldsValues[t]&&this.layersUniqueFieldsValues[t][n.name]},H.getChildLayerUniqueFieldValues=function(e){var t=e.layerId,n=e.relationLayerId,i=e.field;return"undefined"!=typeof this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations&&"undefined"!=typeof this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t]&&"undefined"!=typeof this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t][i.name]?this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t][i.name]:this.getLayerUniqueFieldValues({layerId:t,field:i})},H.changeLayerUniqueFieldValues=function(e){var t=e.layerId,n=e.field,i=e.oldValue,r=e.newValue;this.layersUniqueFieldsValues[t][n.name]["delete"](i),this.layersUniqueFieldsValues[t][n.name].add(r)},H.changeRelationLayerUniqueFieldValues=function(e){var t=e.layerId,n=e.relationLayerId,i=e.field,r=e.oldValue,o=e.newValue;"undefined"==typeof this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations&&(this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations={}),"undefined"==typeof this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t]&&(this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t]={}),this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t][i.name]=new Set(this.layersUniqueFieldsValues[t][i.name]),this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t][i.name]["delete"](r),this.layersUniqueFieldsValues[n].__uniqueFieldsValuesRelations[t][i.name].add(o)},H.addLayerUniqueFieldValue=function(e){var t=e.layerId,n=e.field,i=e.value;this.layersUniqueFieldsValues[t][n.name].add(i)},H.deleteLayerUniqueFieldValue=function(e){var t=e.layerId,n=e.field,i=e.value;this.layersUniqueFieldsValues[t][n.name]["delete"](i)},H.undoRedoLayerUniqueFieldValues=function(e){var t=this,n=e.layerId,i=e.sessionItems,r=void 0===i?[]:i,o=e.action;"undefined"!=typeof this.layersUniqueFieldsValues[n]&&r.forEach(function(e){Object.keys(t.layersUniqueFieldsValues[n]).forEach(function(i){if(Array.isArray(e)){var r=u(e,2),a=r[0].feature,s=r[1].feature;if(s.get(i)!=a.get(i)){var l="undo"===o?s.get(i):a.get(i),c="undo"===o?a.get(i):s.get(i);t.changeLayerUniqueFieldValues({layerId:n,field:{name:i},oldValue:l,newValue:c})}}else{var d=e.feature,f=d.getState();t[("add"===f?"delete":"add")+"LayerUniqueFieldValue"]({layerId:n,field:{name:i},value:d.get(i)})}})})},H.undoRedoRelationUniqueFieldValues=function(e){var t=this,n=e.relationSessionItems,i=e.action;Object.entries(n).forEach(function(e){var n=u(e,2),r=n[0],o=n[1],a=o.own,s=o.dependencies;t.undoRedoLayerUniqueFieldValues({layerId:r,sessionItems:a,action:i}),t.undoRedoRelationUniqueFieldValues({relationSessionItems:s,action:i})})},H.getProjectLayerById=function(e){return I.getLayerById(e)},H.getProjectLayerFeatureById=function(){var e=o(regeneratorRuntime.mark(function t(e){var n,i,r,o,a=e.layerId,s=e.fid;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,i=this.getProjectLayerById(a),e.prev=2,e.next=5,w.get({url:i.getUrl("data"),params:{fids:s}});case 5:r=e.sent,o=S(r),o.length&&(n=o[0]),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](2);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},t,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),H.getProjectLayersWithSameGeometryOfLayer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{exclude:[]},n=t.exclude,i=void 0===n?[]:n,r=e.getGeometryType();return I.getLayers().filter(function(e){return e.isGeoLayer()&&e.getGeometryType&&e.getGeometryType()&&i.indexOf(e.getId())===-1&&(e.getGeometryType()===r||F(e.getGeometryType(),r)&&k.isMultiGeometry(r))})},H.getExternalLayersWithSameGeometryOfLayer=function(e){var t=e.getGeometryType();return this._mapService.getExternalLayers().filter(function(e){var n=e.getSource().getFeatures();return!(!n||!n.length)&&(!!n[0].getGeometry()&&(t===n[0].getGeometry().getType()||F(t,n[0].getGeometry().getType())))})},s.EDITING_FIELDS_TYPE=["unique"],t.exports=new s},{"../api":8,"../toolboxes/toolboxesfactory":47,"../workflows/commitfeaturesworkflow":53,"../workflows/editnopickmapfeatureattributesworkflow":61}],43:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=g3wsdk.gui.GUI,a=g3wsdk.core.i18n.tPlugin,s=g3wsdk.core.layer.Layer,l=g3wsdk.core.workflow.WorkflowsStack,u={"default":["editattributes","deletefeature"],table:[],Point:["movefeature"],LineString:["movevertex"],Polygon:["movefeature","movevertex"]},c=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._parentLayerId=e,this._parentWorkFlow=this.getCurrentWorkflow(),this._parentLayer=this._parentWorkFlow.getLayer();var i=n.relation,r=n.relations;this.relation=i,this.relations=r,this._editingService,this._isExternalFieldRequired=!1,this._relationLayerId=this.relation.child===this._parentLayerId?this.relation.father:this.relation.child;var o=this.getLayer();this._layerType=o.getType();var a=this._layerType===s.LayerTypes.VECTOR?o.getGeometryType():s.LayerTypes.TABLE,l=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._parentLayerId,relation:this.relation}),c=l.ownField;if(this._isFatherFieldEditable=this._parentLayer.isEditingFieldEditable(c),this._isExternalFieldRequired=this._checkIfExternalFieldRequired(),this._currentParentFeatureRelationFieldValue=this._isFatherFieldEditable?this.getCurrentWorkflowData().feature.get(c):this.getCurrentWorkflowData().feature.getId(),this._relationTools=[],this._add_link_workflow=null,this.capabilities={parent:this._parentLayer.getEditingCapabilities(),relation:this._parentLayer.getEditingCapabilities()},a===s.LayerTypes.TABLE)void 0!==this.capabilities.relation.find(function(e){return"delete_feature"===e})&&this._relationTools.push({state:{icon:"deleteTableRow.png",id:"deletefeature",name:"editing.tools.delete_feature"}}),void 0!==this.capabilities.relation.find(function(e){return"change_attr_feature"===e})&&this._relationTools.push({state:{icon:"editAttributes.png",id:"editattributes",name:"editing.tools.update_feature"}});else{var d=this.getEditingService().getToolBoxById(this._relationLayerId).getTools();d.forEach(function(e){_.concat(u[a],u["default"]).indexOf(e.getId())!==-1&&t._relationTools.push(_.cloneDeep(e))})}this._setAddLinkWorkflow()},d=c.prototype;d.getEditingCapabilities=function(){return this.capabilities},d._setAddLinkWorkflow=function(){var t,n=(t={},r(t,s.LayerTypes.VECTOR,{link:e("../workflows/linkrelationworkflow"),add:e("../workflows/addfeatureworkflow"),selectandcopy:e("../workflows/selectandcopyfeaturesfromotherlayerworkflow")}),r(t,s.LayerTypes.TABLE,{link:e("../workflows/edittableworkflow"),add:e("../workflows/addtablefeatureworkflow")}),t);this._add_link_workflow=n[this._layerType]},d._getLinkFeatureWorkflow=function(){return new this._add_link_workflow.link},d._getAddFeatureWorkflow=function(){return new this._add_link_workflow.add},d._getSelectCopyWorkflow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new this._add_link_workflow.selectandcopy(e)},d.getRelationTools=function(){return this._relationTools},d._highlightRelationSelect=function(e){var t=this.getLayer().getEditingLayer().getStyle(),n=this.getLayer().getGeometryType(),i=void 0;return"LineString"===n||"MultiLineString"===n?i=new ol.style.Style({stroke:new ol.style.Stroke({color:"rgb(255,255,0)",width:4})}):"Point"===n||"MultiPoint"===n?i=new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:"rgb(255,255,0)"})})}):"MultiPolygon"!==n&&"Polygon"!==n||(i=new ol.style.Style({stroke:new ol.style.Stroke({color:"rgb(255,255,0)",width:4}),fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.5)"})})),e.setStyle(i),t},d.startTool=function(e,t){var n=this;return"movefeature"===e.state.id&&o.hideContent(!0),new Promise(function(i,r){var a=n._layerType===s.LayerTypes.VECTOR&&n.startVectorTool(e,t)||n._layerType===s.LayerTypes.TABLE&&n.startTableTool(e,t);a.then(function(){n.emitEventToParentWorkFlow(),i()}).fail(function(e){return r(e)}).always(function(){return o.hideContent(!1)})})},d.forceParentsFromServiceWorkflowToUpdated=function(){var e=l.getParents()||[this.getCurrentWorkflow()];e.forEach(function(e){return e.getContext().service.setUpdate(!0,{force:!0})})},d.startTableTool=function(t,n){var i=this,r=$.Deferred(),s=this.relations[n],l=this.getLayer().getEditingSource(),u=l.getFeatureById(s.id),c=this._createWorkflowOptions({features:[u]});if("deletefeature"===t.state.id&&o.dialog.confirm(a("editing.messages.delete_feature"),function(e){e?(i.getCurrentWorkflowData().session.pushDelete(i._relationLayerId,u),i.relations.splice(n,1),i.getEditingService().removeRelationLayerUniqueFieldValuesFromFeature({layerId:i._relationLayerId,relationLayerId:i._parentLayerId,feature:u}),l.removeFeature(u),i.forceParentsFromServiceWorkflowToUpdated(),r.resolve(e)):r.reject(e)}),"editattributes"===t.state.id){var d=e("../workflows/edittablefeatureworkflow"),f=new d;f.start(c).then(function(){var e=i._getRelationFieldsValue(u);e.forEach(function(e){s.fields.forEach(function(t){t.name===e.name&&(t.value=e.value)})}),r.resolve(!0)}).fail(function(e){return r.reject(!1)}).always(function(){f.stop()})}return r.promise()},d.startVectorTool=function(t,n){var i=this,r=$.Deferred(),a=this.relations[n],s=this._getRelationFeature(a.id),l={ModifyGeometryVertexWorkflow:e("../workflows/modifygeometryvertexworkflow"),MoveFeatureWorkflow:e("../workflows/movefeatureworkflow"),DeleteFeatureWorkflow:e("../workflows/deletefeatureworkflow"),EditFeatureAttributesWorkflow:e("../workflows/editfeatureattributesworkflow")};o.setModal(!1);var u=this._createWorkflowOptions({features:[s]}),c=Object.values(l).find(function(e){return t.getOperator()instanceof e}),d=new c,f=this._highlightRelationSelect(s),p=(d instanceof l.DeleteFeatureWorkflow||d instanceof l.EditFeatureAttributesWorkflow)&&d.startFromLastStep(u)||d.start(u);return d.bindEscKeyUp(function(){return s.setStyle(i._originalLayerStyle)}),p.then(function(e){if("deletefeature"===t.getId()&&(s.setStyle(i._originalLayerStyle),i.getCurrentWorkflowData().session.pushDelete(i._relationLayerId,s),i.relations.splice(n,1),i.forceParentsFromServiceWorkflowToUpdated()),"editattributes"===t.getId()){var o=i._getRelationFieldsValue(s);o.forEach(function(e){return a.fields.forEach(function(t){t.name===e.name&&(t.value=e.value)})})}r.resolve(e)}).fail(function(e){return r.reject(e)}).always(function(){d.stop(),o.hideContent(!1),d.unbindEscKeyUp(),o.setModal(!0),s.setStyle(f)}),r.promise()},d.getLayer=function(){return this.getEditingService().getLayerById(this._relationLayerId)},d.getEditingLayer=function(){return this.getEditingService().getEditingLayer(this._relationLayerId)},d.getEditingService=function(){return this._editingService=this._editingService||e("./editingservice"),this._editingService},d.updateExternalKeyValueRelations=function(e){var t=this,n=this.getEditingService().getToolBoxById(this._relationLayerId).getSession(),i=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),r=i.ownField,o=i.relationField;this._isFatherFieldEditable&&e.name===o&&(this._currentParentFeatureRelationFieldValue=e.value,this.relations.forEach(function(i){var o=i.fields,a=o.find(function(e){return e.name===r});a&&(a.value=t._currentParentFeatureRelationFieldValue),i=t._getRelationFeature(i.id);var s=i.clone();i.set(r,e.value),i.isNew()||n.pushUpdate(t._relationLayerId,i,s)}))},d._getRelationFieldsValue=function(e){var t=this.getLayer();return t.getFieldsWithValues(e,{relation:!0})},d._createRelationObj=function(e){return{fields:this._getRelationFieldsValue(e),id:e.getId()}},d.emitEventToParentWorkFlow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&this._parentWorkFlow.getContextService().getEventBus().$emit(e,t)},d._getRelationAsFatherStyleColor=function(e){var t=this.getEditingLayer(this._parentLayerId),n=t.getStyle(),i=void 0;switch(e){case"Point":i=n.getImage()&&n.getImage().getFill();break;case"Line":i=n.getStroke()||n.getFill();break;case"Polygon":i=n.getFill()||n.getStroke()}return i&&i.getColor()||"#000000"},d.addRelationFromOtherLayer=function(e){var t=e.layer,n=e.external,i=void 0,r=!1;(n||t.isGeoLayer())&&(r=!0,i=this._getSelectCopyWorkflow({copyLayer:t,isVector:r,external:n})),this.runAddRelationWorkflow({workflow:i,isVector:r})},d.addRelation=function(){var e=this._layerType===s.LayerTypes.VECTOR,t=this._getAddFeatureWorkflow();this.runAddRelationWorkflow({workflow:t,isVector:e})},d.runAddRelationWorkflow=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.workflow,i=t.isVector,r=void 0!==i&&i;r&&(o.setModal(!1),o.hideContent(!0));var a=this._createWorkflowOptions(),s=a.context.session,l=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),u=l.ownField,c=l.relationField,d=a.parentFeature,f=n.start(a);r&&n.bindEscKeyUp(),f.then(function(t){var n=t.relationFeatures,i=n.newFeatures,r=n.originalFeatures,o=function(t){i.forEach(function(n,i){var o=r[i];n.set(u,t),d.isNew()&&o.set(u,t),e.getLayer().getEditingSource().updateFeature(n),s.pushUpdate(e._relationLayerId,n,o)})};if(o(e._currentParentFeatureRelationFieldValue),d.isNew()&&e._isFatherFieldEditable)var a=d.on("propertychange",function(e){if(d.isNew()){if(e.key===c){var t=e.target.get(c);o(t,!0)}}else ol.Observable.unByKey(a)});i.forEach(function(t){var n=e._createRelationObj(t);e.relations.push(n)}),e.emitEventToParentWorkFlow()}).fail(function(t){if(t&&t.relationFeatures){var n=t.relationFeatures.newFeatures,i=void 0===n?[]:n;i.forEach(function(t){var n=e._createRelationObj(t);e.relations.push(n)})}s.rollbackDependecies([e._relationLayerId])}).always(function(){n.stop(),r&&(n.unbindEscKeyUp(),o.hideContent(!1),o.setModal(!0))})},d.linkRelation=function(){var e=this,t=this._layerType===s.LayerTypes.VECTOR;t&&(o.setModal(!1),o.hideContent(!0));var n=this._getLinkFeatureWorkflow(),r=this._createWorkflowOptions(),l=r.context.session,u=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),c=u.ownField;r.context.exclude={value:this._currentParentFeatureRelationFieldValue,field:c},t&&(r.context.style=this.getUnlinkedStyle());var d=this.getCurrentWorkflowData().feature,f={relations:[this.relation],feature:d,operator:"not",filterType:t?"bbox":"fid"},p=function(){return e.getEditingService().getLayersDependencyFeatures(e._parentLayerId,f)},h=void 0;if(t){var v=this.getEditingService().getMapService();r.context.beforeRun=i(regeneratorRuntime.mark(function g(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.showMapSpinner(),e.next=3,new Promise(function(e){setTimeout(function(){e()})});case 3:return e.next=5,p();case 5:v.hideMapSpinner(),o.showUserMessage({type:"info",size:"small",message:a("editing.messages.press_esc"),closable:!1});case 7:case"end":return e.stop()}},g,e)})),h=new Promise(function(e){n.bindEscKeyUp();var t=n.start(r);e({promise:t,showContent:!0})})}else h=new Promise(function(e){p().then(function(){e({})})});h.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.promise,s=t.showContent,u=void 0!==s&&s,d=!1;i=i||n.start(r),i.then(function(t){t.features.length&&t.features.forEach(function(t){var n=e.relations.find(function(e){return e.id===t.getId()});if(n)o.notify.warning(a("editing.relation_already_added"));else{d=d||!0;var i=t.clone();t.set(c,e._currentParentFeatureRelationFieldValue),e.getCurrentWorkflowData().session.pushUpdate(e._relationLayerId,t,i),e.relations.push(e._createRelationObj(t)),e.emitEventToParentWorkFlow()}})}).fail(function(t){l.rollbackDependecies([e._relationLayerId])}).always(function(){u&&(o.closeUserMessage(),o.hideContent(!1),n.unbindEscKeyUp()),d&&e.forceParentsFromServiceWorkflowToUpdated(),n.stop()})})},d._checkIfExternalFieldRequired=function(){var e=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),t=e.ownField;return this.getEditingService().isFieldRequired(this._relationLayerId,t)},d.isRequired=function(){return this._isExternalFieldRequired},d._getRelationFeature=function(e){var t=this.getLayer();return t.getEditingSource().getFeatureById(e)},d.unlinkRelation=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=$.Deferred(),r=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),s=r.ownField,l=function(){var n=t.relations[e],r=t.getLayer().getEditingSource().getFeatureById(n.id),o=r.clone();r.set(s,null),t.getCurrentWorkflowData().session.pushUpdate(t._relationLayerId,r,o),t.relations.splice(e,1),t.forceParentsFromServiceWorkflowToUpdated(),i.resolve(!0)};return n?o.dialog.confirm(a("editing.messages.unlink_relation"),function(e){e?l():i.reject(!1)}):l(),i.promise()},d.getCurrentWorkflow=function(){return this.getEditingService().getCurrentWorkflow()},d.getCurrentWorkflowData=function(){return this.getEditingService().getCurrentWorkflowData()},d._createWorkflowOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getEditingService()._getRelationFieldsFromRelation({layerId:this._relationLayerId,relation:this.relation}),n=t.ownField,i={parentFeature:this.getCurrentWorkflowData().feature,context:{session:this.getCurrentWorkflowData().session,excludeFields:[n],fatherValue:this._currentParentFeatureRelationFieldValue,fatherField:n},inputs:{features:e.features||[],layer:this.getLayer()}};return i},d.getUnlinkedStyle=function(){var e=void 0,t=this.getLayer().getGeometryType();switch(t){case"Point":e=new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:this._getRelationAsFatherStyleColor("Point")}),stroke:new ol.style.Stroke({width:5,color:"yellow"})})});break;case"Line":e=new ol.style.Style({fill:new ol.style.Fill({color:this._getRelationAsFatherStyleColor("Line")}),stroke:new ol.style.Stroke({width:5,color:"yellow"})});break;case"Polygon":e=new ol.style.Style({stroke:new ol.style.Stroke({color:"yellow",width:5}),fill:new ol.style.Fill({color:this._getRelationAsFatherStyleColor("Polygon"),opacity:.5})})}return e},d.relationFields=function(e){var t=[];return e.fields.forEach(function(e){var n=e.value;t.push({label:e.label,value:n})}),t},t.exports=c},{"../workflows/addfeatureworkflow":50,"../workflows/addtablefeatureworkflow":52,"../workflows/deletefeatureworkflow":56,"../workflows/editfeatureattributesworkflow":58,"../workflows/edittablefeatureworkflow":62,"../workflows/edittableworkflow":63,"../workflows/linkrelationworkflow":64,"../workflows/modifygeometryvertexworkflow":66,"../workflows/movefeatureworkflow":67,"../workflows/selectandcopyfeaturesfromotherlayerworkflow":68,"./editingservice":42}],44:[function(e,t,n){var i=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.core.G3WObject,l=g3wsdk.gui.GUI,u=g3wsdk.core.i18n.tPlugin,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._features=e.features||[],this._promise=e.promise,this._context=e.context,this._inputs=e.inputs,this._fatherValue=e.fatherValue,this._foreignKey=e.foreignKey,this._workflow=null,this._deleteFeaturesIndexes=[],this._isrelation=e.isrelation||!1;var t=e.capabilities,n=e.headers,i=void 0===n?[]:n,r=e.title,a=void 0===r?"Link relation":r,s=e.push;this.state={headers:i,features:[],title:a,isrelation:s,capabilities:t},this.init=function(){var e=this;if(this._features=this._isrelation?this._features.filter(function(t){return t.get(e._foreignKey)!==e._fatherValue}):this._features,this._features.length){var t=this._features[0],n=Object.keys(t.getProperties());this.state.headers=this.state.headers.filter(function(e){return n.indexOf(e.name)!==-1});var i=this.state.headers.map(function(e){return e.name});this.state.features=this._features.map(function(e){var t=e.getProperties(),n={};return i.forEach(function(e){n[e]=t[e]}),n.__gis3w_feature_uid=e.getUid(),n})}},this.init(),o(this)};a(c,s);var d=c.prototype;d.isMediaField=function(e){for(var t=!1,n=0;n<this.state.headers.length;n++){var i=this.state.headers[n];if(i.name===e&&"media"===i.input.type){t=!0;break}}return t},d.save=function(){this._promise.resolve()},d.cancel=function(){this._promise.reject()},d.deleteFeature=function(t){var n=this,i=e("./editingservice"),r=this._inputs.layer,o=r.getId(),a=r.getChildren(),s=a.length&&i._filterRelationsInEditing({layerId:o,relations:r.getRelations().getArray()}).length>0;return new Promise(function(e,i){l.dialog.confirm("<h4>"+u("editing.messages.delete_feature")+'</h4>\n                        <div style="font-size:1.2em;">'+(s?u("editing.messages.delete_feature_relations"):"")+"</div>",function(r){if(r){var o=void 0,a=n._features.find(function(e,n){if(e.getUid()===t)return o=n,!0}),s=n._context.session,l=n._inputs.layer.getId();n._inputs.layer.getEditingSource().removeFeature(a),s.pushDelete(l,a),n.state.features.splice(o,1),e()}else i()})})},d.copyFeature=function(t){var n=this;return new Promise(function(r,o){var a=n._features.find(function(e){return e.getUid()===t}).cloneNew(),s=e("../workflows/addtablefeatureworkflow");n._workflow=new s;var l=n._inputs;l.features.push(a);var u={context:n._context,inputs:l};n._workflow.start(u).then(function(e){var t=e.features[e.features.length-1],o={};Object.entries(n.state.features[0]).forEach(function(e){var n=i(e,2),r=n[0];n[1];o[r]=t.get(r)}),o.__gis3w_feature_uid=t.getUid(),n.state.features.push(o),r(o)}).fail(function(e){return o(e)})})},d.editFeature=function(t){var n=this,r=void 0,o=this._features.find(function(e,n){if(e.getUid()===t)return r=n,!0}),a=e("../workflows/edittablefeatureworkflow");this._workflow=new a;var s=this._inputs;s.features.push(o);var l={context:this._context,inputs:s};this._workflow.start(l).then(function(e){var t=e.features[e.features.length-1];Object.entries(n.state.features[r]).forEach(function(e){var o=i(e,2),a=o[0];o[1];n.state.features[r][a]=t.get(a)})}).fail(function(e){}).always(function(){return n._workflow.stop()})},d.linkFeatures=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.map(function(t){return e._features[t]});this._promise.resolve({features:n})},d.linkFeature=function(e){var t=this._features[e];this._promise.resolve({features:[t]})},t.exports=c},{"../workflows/addtablefeatureworkflow":52,"../workflows/edittablefeatureworkflow":62,"./editingservice":42}],45:[function(e,t,n){function i(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this),this.editingService=e("../services/editingservice");var i=n.name,r=n.row,a=n.id,s=n.icon,l=n.session,u=n.layer,c=n.once,d=void 0!==c&&c,f=n.type,p=void 0===f?[]:f,h=n.visible,v=void 0===h||h,g=n.conditions,m=void 0===g?{}:g;this._options=null,this._session=l,this._layer=u,this._op=new n.op({layer:u}),this._once=d,this.type=p,this.conditions=m,this.disabledtoolsoftools=[],this.state={id:a,name:i,enabled:!1,visible:v instanceof Function?function(){return v(t)}():v,active:!1,icon:s,message:null,row:r||1,messages:this._op.getMessages()}}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=(r.toRawType,g3wsdk.gui.GUI),l=g3wsdk.core.G3WObject;a(i,l);var u=i.prototype;u.setOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messages,n=e.enabled,i=void 0!==n&&n,r=e.visible,o=void 0===r||r,a=e.disabledtoolsoftools,s=void 0===a?[]:a;this.state.messages=t||this.state.messages,this.state.visible=o,this.state.enabled=i,this.disabledtoolsoftools=s},u.getLayer=function(){return this._layer},u.getType=function(){return this.type},u.getFeature=function(){return this._options.inputs.features[0]},u.createOperatorOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{features:[]},t=e.features,n=void 0===t?[]:t;return{inputs:{layer:this._layer,features:n},context:{session:this._session}}},u.start=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.createOperatorOptions();
this._options=n;var i=function r(n){e._op.once("settoolsoftool",function(t){t=t.filter(function(t){return!e.disabledtoolsoftools.includes(t.type)}),t.length&&e.emit("settoolsoftool",t)}),e._op.once("active",function(t){return e.emit("active",t)}),e._op.once("deactive",function(t){return e.emit("deactive",t)}),n.inputs.features=[],t&&s.hideSidebar(),e._op.start(n).then(function(){e._session.save().then(function(){return e.editingService.saveChange()})}).fail(function(){t&&s.showSidebar(),e._session.rollback().then(function(){})}).always(function(){e._once||"table"===e._layer.getType()?e.stop():r(n)})};this._op&&(this.state.active=!0,setTimeout(function(){i(n)}))},u.stop=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=$.Deferred();return this._op?this._op.stop(t).then(function(){}).fail(function(){return e._session.rollback()}).always(function(){e._options=null,e.state.active=!1,e.emit("stop",{session:e._session}),n.resolve()}):(this.emit("stop",{session:this._session}),n.resolve()),n.promise()},u.getState=function(){return this.state},u.setState=function(e){this.state=e},u.getId=function(){return this.state.id},u.setId=function(e){this.state.id=e},u.getName=function(){return this.state.name},u.setActive=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.active=e},u.isActive=function(){return this.state.active},u.getIcon=function(){return this.state.icon},u.setIcon=function(e){this.state.icon=e},u.setEnabled=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.enabled=e},u.isEnabled=function(){return this.state.enabled},u.setVisible=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state.visible=e},u.isVisible=function(){return this.state.visible},u.getOperator=function(){return this._op},u.getSession=function(){return this._session},u.setSession=function(e){this._session=e},u.clear=function(){this.state.enabled=!1,this.state.active=!1},u.getMessage=function(){var e=this.getOperator();return e.getHelpMessage()||e.getRunningStep()?this.state.messages:null},u.getHelpMessage=function(){return this.state.messages.help||this.getName()},u.setMessage=function(e){this.state.message=e},u.clearMessage=function(){this.state.message=null},u.resetDefault=function(){this.state.visible=!0,this.state.enabled=!1,this.state.messages=this._op.getMessages(),this.disabledtoolsoftools=[]},t.exports=i},{"../services/editingservice":42}],46:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this),this.editingService=e("../services/editingservice"),this._mapService=v.getService("map"),this._start=!1,this._constraints=n.constraints||{},this._layer=n.layer,this.uniqueFields=this.getUniqueFieldsType(this._layer.getEditingFields()),this.uniqueFields&&this.getFieldUniqueValuesFromServer(),this._layerType=n.type||m.LayerTypes.VECTOR,this._loadedExtent=null,this._tools=n.tools,this._enabledtools,this._disabledtools,this._getFeaturesOption={};var i=[];this._tools.forEach(function(e){return i.push(e.getState())}),this.constraints={filter:null,show:null,tools:[]},this._session=new y({id:n.id,editor:this._layer.getEditor()}),this.uniqueFields&&this._session.onafter("saveChangesOnServer",function(){t._resetUniqueValues()}),this._getFeaturesOption={};var o=this._session.getHistory().state,a=this._session.state;this.state={id:n.id,changingtools:!1,show:!0,color:n.color||"blue",title:n.title||"Edit Layer",customTitle:!1,loading:!1,enabled:!1,toolboxheader:!0,startstopediting:!0,message:null,toolmessages:{help:null},toolsoftool:[],tools:i,selected:!1,activetool:null,editing:{session:a,history:o,on:!1,dependencies:[],relations:[],father:!1,canEdit:!0},layerstate:this._layer.state},this.originalState={title:this.state.title,toolsoftool:[].concat(r(this.state.toolsoftool))},this._tools.forEach(function(e){return e.setSession(t._session)}),this._session.onafter("stop",function(){t.inEditing()&&(l.online&&t.editingService.stopSessionChildren(t.state.id),t._getFeaturesOption.registerEvents&&t._unregisterGetFeaturesEvent())}),this._session.onafter("start",function(e){e.registerEvents&&(t._getFeaturesEvent={event:null,fnc:null},t._getFeaturesOption=e,t._registerGetFeaturesEvent(t._getFeaturesOption),e.type===m.LayerTypes.VECTOR&&v.getContentLength()&&v.once("closecontent",function(){return setTimeout(function(){return t._mapService.getMap().dispatchEvent(t._getFeaturesEvent.event)})}))})}var a=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=g3wsdk.core,l=s.ApplicationState,u=s.G3WObject,c=g3wsdk.core.utils,d=c.base,f=c.inherit,p=c.debounce,h=c.toRawType,v=g3wsdk.gui.GUI,g=g3wsdk.core.i18n.tPlugin,m=g3wsdk.core.layer.Layer,y=g3wsdk.core.editing.Session,_=g3wsdk.ol.utils.getScaleFromResolution;f(o,u);var b=o.prototype;b.getState=function(){return this.state},b.setShow=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state.show=e},b.getLayer=function(){return this._layer},b.setFather=function(e){this.state.editing.father=e},b.isFather=function(){return this.state.editing.father},b.addRelations=function(e){var t=this;e.forEach(function(e){return t.addRelation(e)})},b.revert=function(){return this._session.revert()},b.addRelation=function(e){this.state.editing.relations.push(e)},b.getDependencies=function(){return this.state.editing.dependencies},b.hasDependencies=function(){return!!this.state.editing.dependencies.length},b.addDependencies=function(e){var t=this;e.forEach(function(e){return t.addDependency(e)})},b.addDependency=function(e){this.state.editing.dependencies.push(e)},b.getFieldUniqueValuesFromServer=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset,i=void 0!==n&&n,r=Object.values(this.uniqueFields).map(function(e){return e.name});this._layer.getWidgetData({type:"unique",fields:r.join()}).then(function(t){var n=t.data;Object.entries(n).forEach(function(t){var n=a(t,2),r=n[0],o=n[1];i&&e.uniqueFields[r].input.options.values.splice(0),o.forEach(function(t){return e.uniqueFields[r].input.options.values.push(t)})})}).fail(console.log)},b.getUniqueFieldsType=function(e){var t={},n=!1;return e.forEach(function(e){e.input&&"unique"===e.input.type&&(t[e.name]=e,n=!0)}),n&&t||null},b._resetUniqueValues=function(){this.getFieldUniqueValuesFromServer({reset:!0})},b.isVectorLayer=function(){return this._layerType===m.LayerTypes.VECTOR},b.setFeaturesOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filter;if(t)t.nofeatures&&(t.nofeatures_field=t.nofeatures_field||this._layer.getEditingFields()[0].name),this._getFeaturesOption={filter:t,editing:!0,registerEvents:!1},t.constraint&&this.setConstraintFeaturesFilter(t);else{var n=this._layerType===m.LayerTypes.TABLE?"all":"bbox";this._getFeaturesOption=this.editingService.createEditingDataOptions(n,{layerId:this.getId()})}},b.setEditingConstraints=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(n){return e.constraints[n]=t[n]})},b.setLayerUniqueFieldValues=i(regeneratorRuntime.mark(function w(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.editingService.setLayerUniqueFieldValues(this.getId());case 2:case"end":return e.stop()}},w,this)})),b.clearLayerUniqueFieldsValues=function(){this.editingService.clearLayerUniqueFieldsValues(this.getId())},b.start=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filter,i=t.toolboxheader,r=void 0===i||i,o=t.startstopediting,a=void 0===o||o,s=(t.showtools,t.tools),u=t.changingtools,c=void 0!==u&&u;this.state.changingtools=c,s&&this.setEnablesDisablesTools(s),this.state.toolboxheader=r,this.state.startstopediting=a;var d="start-editing",f=$.Deferred(),p=this.getId(),h=this.editingService.getApplicationEditingConstraintById(this.getId());n=h&&h.filter||this.constraints.filter||n,this.setFeaturesOptions({filter:n});var g=function(t){e.emit(d),e.setLayerUniqueFieldValues().then(function(){e.editingService.runEventHandler({type:d,id:p}),t.then(function(t){e.stopLoading(),e.setEditing(!0),e.editingService.runEventHandler({type:"get-features-editing",id:p,options:{features:t}}),f.resolve({features:t})}).fail(function(t){v.notify.error(t.message),e.editingService.runEventHandler({type:"error-editing",id:p,error:t}),e.stop(),e.stopLoading(),f.reject(t)})})};return this._session&&(this._session.isStarted()?(this._start||(this.startLoading(),this._session.getFeatures(this._getFeaturesOption).then(g),this._start=!0),this.setEditing(!0)):l.ismobile&&this._mapService.isMapHidden()&&this._layerType===m.LayerTypes.VECTOR?(this.setEditing(!0),v.getService("map").onceafter("setHidden",function(){setTimeout(function(){e._start=!0,e.startLoading(),e.setFeaturesOptions({filter:n}),e._session.start(e._getFeaturesOption).then(g).fail(function(){return e.setEditing(!1)})},300)})):(this._start=!0,this.startLoading(),this._session.start(this._getFeaturesOption).then(g))),f.promise()},b.startLoading=function(){this.state.loading=!0},b.stopLoading=function(){this.state.loading=!1},b.getFeaturesOption=function(){return this._getFeaturesOption},b.stop=function(){var e=this,t="stop-editing",n=$.Deferred();if(this.disableCanEditEvent&&this.disableCanEditEvent(),this._session&&this._session.isStarted()){var i=this.editingService.fatherInEditing(this.state.id);l.online&&!i?this._session.stop().then(function(){e._start=!1,e.state.editing.on=!1,e.state.enabled=!1,e.stopLoading(),e._getFeaturesOption={},e.stopActiveTool(),e.enableTools(!1),e.clearToolboxMessages(),e.setSelected(!1),e.emit(t),e.clearLayerUniqueFieldsValues(),n.resolve(!0)}).fail(function(e){return n.reject(e)}).always(function(){return e.setSelected(!1)}):(this.stopActiveTool(),this._layer.getEditingLayer().getSource().clear(),this.state.editing.on=!1,this.enableTools(!1),this.clearToolboxMessages(),this._unregisterGetFeaturesEvent(),this.editingService.stopSessionChildren(this.state.id),this.setSelected(!1),this.clearLayerUniqueFieldsValues())}else this.setSelected(!1),n.resolve(!0);return n.promise()},b.save=function(){this._session.commit()},b._unregisterGetFeaturesEvent=function(){switch(this._layerType){case m.LayerTypes.VECTOR:this._mapService.getMap().un(this._getFeaturesEvent.event,this._getFeaturesEvent.fnc);break;default:return}},b._registerGetFeaturesEvent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(this._layerType){case m.LayerTypes.VECTOR:if(t.filter.bbox){var n=function(){var n=e.state.editing.canEdit;if(e._layer.getEditingLayer().setVisible(n),l.online&&n&&0===v.getContentLength()){var i=e._mapService.getMapBBOX();t.filter.bbox=i,e.state.loading=!0,e._session.getFeatures(t).then(function(t){t.then(function(){e.state.loading=!1})})}};this._getFeaturesEvent.event="moveend",this._getFeaturesEvent.fnc=p(n,300);var i=this._mapService.getMap();i.on("moveend",this._getFeaturesEvent.fnc)}break;default:return}},b.setConstraintFeaturesFilter=function(e){this.constraintFeatureFilter=e},b.getEditingConstraints=function(){return this._constraints},b.getEditingConstraint=function(e){return this.getEditingConstraints()[e]},b.canEdit=function(){return this.state.editing.canEdit},b._canEdit=function(){var e=this;if(this._constraints.scale){var t=this._constraints.scale,n=(""+g("editing.messages.constraints.enable_editing")+t).toUpperCase();this.state.editing.canEdit=_(this._mapService.getMap().getView().getResolution())<=t,v.setModal(!this.state.editing.canEdit,n);var i=function(i){e.state.editing.canEdit=_(i.target.getResolution())<=t,v.setModal(!e.state.editing.canEdit,n)};this._mapService.getMap().getView().on("change:resolution",i),this.disableCanEditEvent=function(){v.setModal(!1),e._mapService.getMap().getView().un("change:resolution",i)}}},b._disableCanEdit=function(){this.state.editing.canEdit=!0,this.disableCanEditEvent&&this.disableCanEditEvent()},b.setMessage=function(e){this.state.message=e},b.getMessage=function(){return this.state.message},b.clearMessage=function(){this.setMessage(null)},b.clearToolboxMessages=function(){this.clearToolMessage(),this.clearMessage()},b.getId=function(){return this.state.id},b.setId=function(e){this.state.id=e},b.getTitle=function(){return this.state.title},b.setTitle=function(e){this.state.customTitle=!0,this.state.title=e},b.getColor=function(){return this.state.color},b.setEditing=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setEnable(e),this.state.editing.on=e,this.enableTools(e)},b.inEditing=function(){return this.state.editing.on},b.isEnabled=function(){return this.state.enabled},b.setEnable=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.state.enabled=e,this.state.enabled},b.isLoading=function(){return this.state.loading},b.isDirty=function(){return this.state.editing.history.commit},b.isSelected=function(){return this.state.selected},b.setSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.selected=e,this.state.selected?this._canEdit():this._disableCanEdit()},b.getTools=function(){return this._tools},b.getToolById=function(e){return this._tools.find(function(t){return e===t.getId()})},b.setEnableTool=function(e){var t=this._tools.find(function(t){return t.getId()===e});t.setEnabled(!0)},b.setAddEnableTools=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tools,n=void 0===t?{}:t,i=e.options,r=void 0===i?{editing_constraints:!0}:i,o=r.editing_constraints,a=void 0!==o&&o,s=["addfeature","editattributes","movefeature","movevertex"],l=this._tools.filter(function(e){return a?e.getType().find(function(e){return"add_feature"===e}):s.indexOf(e.getId())!==-1}).map(function(e){var t=e.getId();return{id:t,options:n[t]}});this.setEnablesDisablesTools({enabled:l}),this.enableTools(!0)},b.setUpdateEnableTools=function(e){var t=e.tools,n=void 0===t?{}:t,i=e.excludetools,r=void 0===i?[]:i,o=e.options,a=void 0===o?{editing_constraints:!0}:o,s=a.editing_constraints,l=void 0!==s&&s,u=["editattributes","movefeature","movevertex"],c=this._tools.filter(function(e){return r.indexOf(e.getId())===-1&&(l?e.getType().find(function(e){return"change_feature"===e||"change_attr_feature"===e}):u.indexOf(e.getId())!==-1)}).map(function(e){var t=e.getId();return{id:t,options:n[t]}});this.setEnablesDisablesTools({enabled:c}),this.enableTools(!0)},b.setDeleteEnableTools=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},b.setEnablesDisablesTools=function(e){var t=this;if(e){this.state.changingtools=!0;var n=e.enabled,i=void 0===n?[]:n,r=e.disabled,o=void 0===r?[]:r,a=i.length?[]:this._tools.map(function(e){return e.getId()});i.forEach(function(e){var n=e.id,i=e.options,r=void 0===i?{}:i,o=t.getToolById(n);if(o){var s=r.active,l=void 0!==s&&s;o.setOptions(r),o.isVisible()&&a.push(n),l&&t.setActiveTool(o),void 0===t._enabledtools&&(t._enabledtools=[]),t._enabledtools.push(o)}}),o.forEach(function(e){var n=e.id,i=(e.options,t.getToolById(n));i&&(void 0===t._disabledtools&&(t._disabledtools=[]),t._disabledtools.push(n),a.push(n))}),this._tools.forEach(function(e){return!a.includes(e.getId())&&e.setVisible(!1)}),this.state.changingtools=!1}},b.enableTools=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._enabledtools||this._tools,n=this._disabledtools||[];t.forEach(function(t){var i=t.conditions.enabled,r=void 0===i?e:i,o=e&&n.length?n.indexOf(t.getId())===-1:"Boolean"===h(r)?r:r({bool:e,tool:t});t.setEnabled(o),!e&&t.setActive(e)})},b.setActiveTool=function(e){var t=this;this.stopActiveTool(e).then(function(){t.clearToolsOfTool(),t.state.activetool=e,e.once("settoolsoftool",function(e){return e.forEach(function(e){return t.state.toolsoftool.push(e)})});var n=function(e,n){t.state.toolsoftool.forEach(function(t){e.indexOf(t.type)!==-1&&(t.options.active=n)})};e.on("active",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(e,!0)}),e.on("deactive",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(e,!1)});var i=t._mapService.isMapHidden();e.start(i);var r=t.getToolMessage();t.setToolMessage(r)})},b.clearToolsOfTool=function(){this.state.toolsoftool.splice(0)},b.getActiveTool=function(){return this.state.activetool},b.restartActiveTool=function(){var e=this.getActiveTool();this.stopActiveTool(),this.setActiveTool(e)},b.stopActiveTool=function(e){var t=this,n=$.Deferred(),i=this.getActiveTool();return i&&i!==e?(i.removeAllListeners(),i.stop(!0).then(function(){t.clearToolsOfTool(),t.clearToolMessage(),t.state.activetool=null,setTimeout(n.resolve)})):(e?e.removeAllListeners():null,n.resolve()),n.promise()},b.clearToolMessage=function(){this.state.toolmessages.help=null},b.getToolMessage=function(){var e=this.getActiveTool();return e.getMessage()},b.setToolMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.toolmessages.help=e&&e.help||null},b.getSession=function(){return this._session},b.getEditor=function(){return this._editor},b.setEditor=function(e){this._editor=e},b.hasChildren=function(){return this._layer.hasChildren()},b.hasFathers=function(){return this._layer.hasFathers()},b.hasRelations=function(){return this._layer.hasRelations()},b.resetDefault=function(){this.state.title=this.originalState.title,this.state.toolboxheader=!0,this.state.startstopediting=!0,this.constraints={filter:null,show:null,tools:[]},this._enabledtools&&(this._enabledtools=void 0,this.enableTools(),this._tools.forEach(function(e){return e.resetDefault()})),this._disabledtools=null,this.setShow(!0)},t.exports=o},{"../services/editingservice":42}],47:[function(e,t,n){function i(){this.build=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e.getEditingConstrains()),n=e.getEditingCapabilities(),i=e.getType(),s=e.getId(),l=e.getColor(),u=[];switch(i){case r.LayerTypes.VECTOR:var c=e.getGeometryType();u=o.build({layer:e,geometryType:c,type:i,capabilities:n});break;case r.LayerTypes.TABLE:u=o.build({layer:e,type:i,capabilities:n})}return new a({id:s,color:l,type:i,layer:e,tools:u,lngTitle:"editing.toolbox.title",title:" "+e.getName(),constraints:t})}}var r=g3wsdk.core.layer.Layer,o=e("./toolsfactory"),a=e("./toolbox");t.exports=new i},{"./toolbox":46,"./toolsfactory":48}],48:[function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(){this.createTools=function(e){var t=e.type,n=e.isMultiGeometry,r=e.layer,o=e.capabilities,F=[],C=s.getService("map");switch(t){case"Point":F=[{config:{id:"addfeature",name:"editing.tools.add_feature",icon:"addPoint.png",layer:r,row:1,op:c,type:["add_feature"]}},{config:{id:"editattributes",name:"editing.tools.update_feature",icon:"editAttributes.png",layer:r,row:1,op:h,type:["change_attr_feature"]}},{config:{id:"deletefeature",name:"editing.tools.delete_feature",icon:"deletePoint.png",layer:r,row:1,op:p,type:["delete_feature"]}},{config:{id:"editmultiattributes",name:"editing.tools.update_multi_features",icon:"multiEditAttributes.png",layer:r,row:2,once:!0,op:k,type:["change_attr_feature"]}},{config:{id:"movefeature",name:"editing.tools.move_feature",icon:"movePoint.png",layer:r,row:2,op:f,type:["change_feature"]}},{config:{id:"copyfeaturesfromotherlayer",name:"editing.tools.pastefeaturesfromotherlayers",icon:"pasteFeaturesFromOtherLayers.png",layer:r,once:!0,conditions:{enabled:function(){var e=r.getId(),t=r.getGeometryType(),n=C.defaultsLayers.selectionLayer.getSource(),i={bool:!1,tool:void 0},o=function(){var r=i.bool,o=i.tool,s=n.getFeatures().filter(function(n){var i=n.getGeometry()&&n.getGeometry().getType();return!(n.__layerId===e||!l(t,i))&&(t===i||a.isMultiGeometry(t)||!a.isMultiGeometry(i))}),u=r&&s.length>0;return o.setEnabled(u),u};return function(e){var t=e.bool,r=e.tool,a=void 0===r?{}:r;return i.tool=a,i.bool=t,n[t?"on":"un"]("addfeature",o),n[t?"on":"un"]("removefeature",o),o()}}()},row:2,op:S,type:["add_feature"]}},{config:{id:"copyfeatures",name:"editing.tools.copy",icon:"copyPoint.png",layer:r,once:!0,row:2,op:m,type:["add_feature"]}}].concat(i(n?[{config:{id:"addPart",name:"editing.tools.addpart",icon:"addPart.png",layer:r,once:!0,row:3,op:b,type:["add_feature","change_feature"]}}]:[]),i(n?[{config:{id:"deletePart",name:"editing.tools.deletepart",icon:"deletePart.png",layer:r,row:3,op:w,type:["change_feature"]}}]:[]));break;case"Line":case"Polygon":F=[{config:{id:"addfeature",name:"editing.tools.add_feature",icon:"add"+t+".png",layer:r,row:1,op:c,type:["add_feature"]}},{config:{id:"editattributes",name:"editing.tools.update_feature",icon:"editAttributes.png",layer:r,row:1,op:h,type:["change_attr_feature"]}},{config:{id:"movevertex",name:"editing.tools.update_vertex",icon:"moveVertex.png",layer:r,row:1,op:d,type:["change_feature"]}},{config:{id:"deletefeature",name:"editing.tools.delete_feature",icon:"delete"+t+".png",layer:r,row:1,op:p,type:["delete_feature"]}},{config:{id:"editmultiattributes",name:"editing.tools.update_multi_features",icon:"multiEditAttributes.png",layer:r,row:2,once:!0,op:k,type:["change_attr_feature"]}},{config:{id:"movefeature",name:"editing.tools.move_feature",icon:"move"+t+".png",layer:r,row:2,op:f,type:["change_feature"]}},{config:{id:"copyfeaturesfromotherlayer",name:"editing.tools.pastefeaturesfromotherlayers",icon:"pasteFeaturesFromOtherLayers.png",layer:r,once:!0,conditions:{enabled:function(){var e=r.getId(),t=r.getGeometryType(),n=C.defaultsLayers.selectionLayer.getSource(),i={bool:!1,tool:void 0},o=function(){var r=i.bool,o=i.tool,s=n.getFeatures().filter(function(n){var i=n.getGeometry()&&n.getGeometry().getType();return!(n.__layerId===e||!l(t,i))&&(t===i||a.isMultiGeometry(t)||!a.isMultiGeometry(i))}),u=r&&s.length>0;return o.setEnabled(u),u};return function(e){var t=e.bool,r=e.tool,a=void 0===r?{}:r;return i.tool=a,i.bool=t,n[t?"on":"un"]("addfeature",o),n[t?"on":"un"]("removefeature",o),o()}}()},row:2,op:S,type:["add_feature"]}},{config:{id:"copyfeatures",name:"editing.tools.copy",icon:"copy"+t+".png",layer:r,row:2,once:!0,op:m,type:["add_feature"]}}].concat(i(n?[{config:{id:"addPart",name:"editing.tools.addpart",icon:"addPart.png",layer:r,row:3,once:!0,op:b,type:["add_feature","change_feature"]}}]:[]),i(n?[{config:{id:"deletePart",name:"editing.tools.deletepart",icon:"deletePart.png",layer:r,row:3,op:w,type:["change_feature"]}}]:[]),[{config:{id:"splitfeature",name:"editing.tools.split",icon:"splitFeatures.png",layer:r,row:3,once:!0,op:y,type:["change_feature"]}},{config:{id:"mergefeatures",name:"editing.tools.merge",icon:"mergeFeatures.png",layer:r,row:3,once:!0,op:_,type:["change_feature"]}},{config:{id:"copyfeaturefromexternallayer",name:"editing.tools.copyfeaturefromexternallayer",icon:"copyPolygonFromFeature.png",layer:r,row:3,once:!0,visible:function(e){var t=e.getLayer().getGeometryType(),n=function(e){var n=!0,i=e.getType();if("VECTOR"===i){var r=e.getSource().getFeatures();if(r.length){var o=r[0],a=o.getGeometry().getType();n=l(a,t)}}return n};return C.onbefore("loadExternalLayer",function(t){return!e.isVisible()&&e.setVisible(n(t))}),C.onafter("unloadExternalLayer",function(i){var r=i.getType();if(e.isVisible()&&"VECTOR"===r){var o=i.getSource().getFeatures();if(o.length){var a=o[0],s=a.getGeometry().getType();if(l(s,t)){var u=void 0!==C.getExternalLayers().find(function(e){return n(e)});e.setVisible(u)}}}}),!1},op:x,type:["add_feature"]}}]);break;case"Table":F=[{config:{id:"addfeature",name:"editing.tools.add_feature",icon:"addTableRow.png",layer:r,op:g,type:["add_feature"]}},{config:{id:"edittable",name:"editing.tools.update_feature",icon:"editAttributes.png",layer:r,op:v,type:["delete_feature","change_attr_feature"]}}]}return o?F.filter(function(e){return e.config.type.filter(function(e){return o.includes(e)}).length>0}).map(function(e){return e.config.row=1,new u(e.config)}):F.map(function(e){return new u(e.config)})},this.build=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?o.LayerTypes.VECTOR:t,i=e.layer,r=e.capabilities,s=[];switch(n){case o.LayerTypes.VECTOR:var l=e.geometryType,u=a.isMultiGeometry(l);a.isPointGeometryType(l)?s=this.createTools({layer:i,capabilities:r,type:"Point",isMultiGeometry:u}):a.isLineGeometryType(l)?s=this.createTools({layer:i,type:"Line",capabilities:r,isMultiGeometry:u}):a.isPolygonGeometryType(l)&&(s=s=this.createTools({layer:i,type:"Polygon",capabilities:r,isMultiGeometry:u}));break;case o.LayerTypes.TABLE:s=this.createTools({layer:i,type:"Table",capabilities:r});break;default:s=[]}return s}}var o=g3wsdk.core.layer.Layer,a=g3wsdk.core.geometry.Geometry,s=g3wsdk.gui.GUI,l=g3wsdk.core.geoutils.isSameBaseGeometryType,u=e("./tool"),c=e("../workflows/addfeatureworkflow"),d=e("../workflows/modifygeometryvertexworkflow"),f=e("../workflows/movefeatureworkflow"),p=e("../workflows/deletefeatureworkflow"),h=e("../workflows/editfeatureattributesworkflow"),v=e("../workflows/edittableworkflow"),g=e("../workflows/addtablefeatureworkflow"),m=e("../workflows/copyfeaturesworkflow"),y=e("../workflows/splitfeatureworkflow"),_=e("../workflows/mergefeaturesworkflow"),b=e("../workflows/addparttomultigeometriesworkflow"),w=e("../workflows/deletepartfrommultigeometriesworkflow"),k=e("../workflows/editmultifeatureattributesworkflow"),x=e("../workflows/addfeaturefrommapvectorlayersworkflow"),S=e("../workflows/copyfeaturesfromotherlayerworkflow");t.exports=new r},{"../workflows/addfeaturefrommapvectorlayersworkflow":49,"../workflows/addfeatureworkflow":50,"../workflows/addparttomultigeometriesworkflow":51,"../workflows/addtablefeatureworkflow":52,"../workflows/copyfeaturesfromotherlayerworkflow":54,"../workflows/copyfeaturesworkflow":55,"../workflows/deletefeatureworkflow":56,"../workflows/deletepartfrommultigeometriesworkflow":57,"../workflows/editfeatureattributesworkflow":58,"../workflows/editmultifeatureattributesworkflow":60,"../workflows/edittableworkflow":63,"../workflows/mergefeaturesworkflow":65,"../workflows/modifygeometryvertexworkflow":66,"../workflows/movefeatureworkflow":67,"../workflows/splitfeatureworkflow":69,"./tool":45}],49:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type="external",e.help="editing.steps.help.copy",e.steps=[];var t=new l(e,(!1)),n=new u(e);e.steps=[t,n],this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/selectelementsstep"),u=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/openformstep":86,"./steps/selectelementsstep":90}],50:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new l(e),n=new u(e);e.steps=[t,n],o(this,e),this.addToolsOfTools({step:t,tools:["snap","measure"]})}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/addfeaturestep"),u=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/addfeaturestep":70,"./steps/openformstep":86}],51:[function(e,t,n){function i(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.type="single",t.helpMessage="editing.tools.addpart",t.help="editing.steps.help.select_element";var n=new l;n.getTask().setSteps({select:{description:"editing.workflow.steps.select",directive:"t-plugin",done:!1}}),t.add=!1;var i=new c(t);i.getTask().setSteps({addfeature:{description:"editing.workflow.steps.draw_part",directive:"t-plugin",done:!1}}),i.on("run",function(t){var n=t.inputs,i=(t.context,n.layer),r={type:"snap",options:{layerId:i.getId(),source:i.getEditingLayer().getSource(),active:!0}};e.emit("settoolsoftool",[r])}),i.on("run",function(){e.emit("active",["snap"])}),i.on("stop",function(){e.emit("deactive",["snap"])});var r=new d(t);t.steps=[n,new u,i,r],this.registerEscKeyEvent(),o(this,t)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/pickfeaturestep"),u=e("./steps/choosefeaturestep"),c=e("./steps/addfeaturestep"),d=e("./steps/addparttomultigeometriesstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/addfeaturestep":70,"./steps/addparttomultigeometriesstep":71,"./steps/choosefeaturestep":73,"./steps/pickfeaturestep":88}],52:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.steps=[new l,new u],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/addtablefeaturestep"),u=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/addtablefeaturestep":72,"./steps/openformstep":86}],53:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.steps=[new l(e)],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/confirmstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/confirmstep":74}],54:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.help="editing.steps.help.copy",e.steps=[new l(e),new u(e)],this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/copyfeaturesfromotherlayerstep"),u=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/copyfeaturesfromotherlayerstep":75,"./steps/openformstep":86}],55:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer.getGeometryType().indexOf("Point")!==-1;e.type=d.ismobile?"single":"multiple",e.help="editing.steps.help.copy",e.steps=[];var n=new l(e,(!0));if(n.getTask().setSteps({select:{description:"multiple"===e.type?"editing.workflow.steps.selectPointSHIFT":"editing.workflow.steps.selectPoint",directive:"t-plugin",done:!1}}),e.steps.push(n),!t){var i=new u(e,(!0));i.getTask().setSteps({from:{description:"editing.workflow.steps.selectStartVertex",directive:"t-plugin",done:!1}}),e.steps.push(i)}var r=new c(e,(!0));r.getTask().setSteps({to:{description:"editing.workflow.steps.selectToPaste",directive:"t-plugin",done:!1}}),e.steps.push(r),this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/selectelementsstep"),u=e("./steps/getvertexstep"),c=e("./steps/movelementsstep"),d=g3wsdk.core.ApplicationState;a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/getvertexstep":80,"./steps/movelementsstep":85,"./steps/selectelementsstep":90}],56:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.steps=[new u,new c,new l,new d({type:"delete"})],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/deletefeaturestep"),u=e("./steps/pickfeaturestep"),c=e("./steps/choosefeaturestep"),d=e("./steps/confirmstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/choosefeaturestep":73,"./steps/confirmstep":74,"./steps/deletefeaturestep":77,"./steps/pickfeaturestep":88}],57:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};
e.helpMessage="editing.tools.deletepart",e.steps=[new u,new c,new l(e)],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/deletepartfrommultigeometriesstep"),u=e("./steps/pickfeaturestep"),c=e("./steps/choosefeaturestep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/choosefeaturestep":73,"./steps/deletepartfrommultigeometriesstep":78,"./steps/pickfeaturestep":88}],58:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.helpMessage="editing.tools.update_feature",e.steps=[new l,new u,new c],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/pickfeaturestep"),u=e("./steps/choosefeaturestep"),c=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/choosefeaturestep":73,"./steps/openformstep":86,"./steps/pickfeaturestep":88}],59:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.helpMessage=e.helpMessage?{help:e.helpMessage}:null,this._toolsoftool=[]}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.core.workflow.Workflow,l=g3wsdk.core.layer.Layer,u=g3wsdk.core.geometry.Geometry.isPointGeometryType;a(i,s);var c=i.prototype;c.addToolsOfTools=function(e){var t=this,n=e.step,i=e.tools,r=void 0===i?[]:i,o={snap:{type:"snap",options:{checkedAll:!1,checked:!1,active:!0,run:function(e){var t=e.layer;this.active=!0,this.layerId=this.layerId||t.getId(),this.source=this.source||t.getEditingLayer().getSource()},stop:function(){this.active=!1}}},measure:{type:"measure",options:{checked:!1,run:function(){var e=this;setTimeout(function(){e.onChange(e.checked)})},stop:function(){n.getTask().removeMeasureInteraction()},onChange:function(e){this.checked=e,n.getTask()[e?"addMeasureInteraction":"removeMeasureInteraction"]()},onBeforeDestroy:function(){this.onChange(!1)}}}};n.on("run",function(e){var n=e.inputs,i=(e.context,n.layer);0==t._toolsoftool.length&&r.forEach(function(e){"measure"===e?i.getType()!==l.LayerTypes.VECTOR||u(i.getGeometryType())||t._toolsoftool.push(o[e]):t._toolsoftool.push(o[e])}),t._toolsoftool.forEach(function(e){return e.options.run({layer:i})}),t.emit("settoolsoftool",t._toolsoftool)}),n.on("stop",function(){t._toolsoftool.forEach(function(e){return e.options.stop()})})},c.setHelpMessage=function(e){this.helpMessage={help:e}},c.getHelpMessage=function(){return this.helpMessage},c.getFeatures=function(){return this.getInputs().features},c.startFromLastStep=function(e){var t=this.getSteps();return this.setSteps([t.pop()]),this.start(e)},c.getCurrentFeature=function(){var e=this.getFeatures(),t=this.getFeatures().length;return e[t-1]},c.getLayer=function(){return this.getSession().getEditor().getLayer()},c.getSession=function(){return this.getContext().session},c.escKeyUpHandler=function(e){27===e.keyCode&&(e.data.workflow.reject(),e.data.callback())},c.unbindEscKeyUp=function(){$(document).unbind("keyup",this.escKeyUpHandler)},c.bindEscKeyUp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};$(document).on("keyup",{workflow:this,callback:e},this.escKeyUpHandler)},c.registerEscKeyEvent=function(e){var t=this;this.on("start",function(){return t.bindEscKeyUp(e)}),this.on("stop",function(){return t.unbindEscKeyUp()})},t.exports=i},{}],60:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.helpMessage="editing.tools.update_multi_features";var t=new u({type:"multiple"});t.getTask().setSteps({select:{description:s.ismobile?"editing.workflow.steps.selectDrawBoxAtLeast2Feature":"editing.workflow.steps.selectMultiPointSHIFTAtLeast2Feature",buttonnext:{disabled:!0,condition:function(e){var t=e.features,n=void 0===t?[]:t;return n.length<2},done:function(){}},directive:"t-plugin",dynamic:0,done:!1}}),e.steps=[t,new c({multi:!0})],this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.core.ApplicationState,l=e("./editingworkflow"),u=e("./steps/selectelementsstep"),c=(e("./steps/choosefeaturestep"),e("./steps/openformstep"));a(i,l),t.exports=i},{"./editingworkflow":59,"./steps/choosefeaturestep":73,"./steps/openformstep":86,"./steps/selectelementsstep":90}],61:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.helpMessage="editing.tools.update_feature";var t=new l;e.steps=[t],a(this,e)}var r=g3wsdk.core.utils,o=r.inherit,a=r.base,s=e("./editingworkflow"),l=e("./steps/openformstep");o(i,s),t.exports=i},{"./editingworkflow":59,"./steps/openformstep":86}],62:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.steps=[new l],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/openformstep":86}],63:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.steps=[new l],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/opentablestep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/opentablestep":87}],64:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.steps=[new l],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/linkrelationstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/linkrelationstep":81}],65:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type="bbox",e.help="editing.steps.help.merge";var t=new u(e,(!0));t.getTask().setSteps({select:{description:s.ismobile?"editing.workflow.steps.selectDrawBox":"editing.workflow.steps.selectSHIFT",directive:"t-plugin",done:!1}});var n=new c(e,(!0));n.getTask().setSteps({choose:{description:"editing.workflow.steps.merge",directive:"t-plugin",done:!1}}),e.steps=[t,n],this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.core.ApplicationState,l=e("./editingworkflow"),u=e("./steps/selectelementsstep"),c=e("./steps/mergefeaturesstep");a(i,l),t.exports=i},{"./editingworkflow":59,"./steps/mergefeaturesstep":82,"./steps/selectelementsstep":90}],66:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.helpMessage="editing.tools.update_vertex";var t=new l(e),n=new c;e.steps=[t,new u,n],o(this,e),this.addToolsOfTools({step:n,tools:["snap","measure"]})}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/pickfeaturestep"),u=e("./steps/choosefeaturestep"),c=e("./steps/modifygeometryvertexstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/choosefeaturestep":73,"./steps/modifygeometryvertexstep":83,"./steps/pickfeaturestep":88}],67:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.helpMessage="editing.tools.move_feature",e.steps=[new l,new u,new c],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/pickfeaturestep"),u=e("./steps/choosefeaturestep"),c=e("./steps/movefeaturestep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/choosefeaturestep":73,"./steps/movefeaturestep":84,"./steps/pickfeaturestep":88}],68:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.help="editing.steps.help.copy",e.steps=[new l(e),new u(e),new c(e)],this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/pickprojectlayerfeaturesstep"),u=e("./steps/copyfeaturesfromotherprojectlayerstep"),c=e("./steps/openformstep");a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/copyfeaturesfromotherprojectlayerstep":76,"./steps/openformstep":86,"./steps/pickprojectlayerfeaturesstep":89}],69:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type=c.ismobile?"single":"multiple",e.help="editing.steps.help.split";var t=new l(e,(!0));t.getTask().setSteps({select:{description:"multiple"===e.type?"editing.workflow.steps.selectPointSHIFT":"editing.workflow.steps.selectPoint",directive:"t-plugin",done:!1}});var n=new u(e,(!0));n.getTask().setSteps({draw_line:{description:"editing.workflow.steps.draw_split_line",directive:"t-plugin",done:!1}}),e.steps=[t,n],this.registerEscKeyEvent(),o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingworkflow"),l=e("./steps/selectelementsstep"),u=e("./steps/splitfeaturestep"),c=g3wsdk.core.ApplicationState;a(i,s),t.exports=i},{"./editingworkflow":59,"./steps/selectelementsstep":90,"./steps/splitfeaturestep":91}],70:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/addfeaturetask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.draw_new_feature",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/addfeaturetask":93}],71:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/addparttomultigeometriestask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/addparttomultigeometriestask":94}],72:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=e("./tasks/addfeaturetabletask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s,e.help="editing.steps.help.new",r(this,e)};o(l,a),t.exports=l},{"./tasks/addfeaturetabletask":92}],73:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=e("./tasks/choosefeaturetask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),r(this,e)};o(l,a),t.exports=l},{"./tasks/choosefeaturetask":95}],74:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/confirmtask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/confirmtask":96}],75:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/copyfeaturesfromotherlayertask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.draw_new_feature",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/copyfeaturesfromotherlayertask":97}],76:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/copyfeaturesfromotherprojectlayertask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.draw_new_feature",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/copyfeaturesfromotherprojectlayertask":98}],77:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/deletefeaturetask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s,e.help="editing.steps.help.double_click_delete",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/deletefeaturetask":99}],78:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/deletepartfrommultigeometriestask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/deletepartfrommultigeometriestask":100}],79:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e)};o(s,a),t.exports=s},{}],80:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/getvertextask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.select",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/getvertextask":102}],81:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/linkrelationtask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s,e.help="editing.steps.help.select_feature_to_relation",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/linkrelationtask":103}],82:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/mergefeaturestask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s,e.help="editing.steps.help.merge",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/mergefeaturestask":104}],83:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/modifygeometryvertextask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{snap:!0},t=new s(e);e.task=t,e.help="editing.steps.help.edit_feature_vertex",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/modifygeometryvertextask":105}],84:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/movefeaturettask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.move",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/movefeaturettask":107}],85:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/moveelementstask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments[1],new s(e));e.task=t,e.help="editing.steps.help.select_vertex_to_paste",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/moveelementstask":106}],86:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=e("./tasks/openformtask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.insert_attributes_feature",r(this,e)};o(l,a),t.exports=l},{"./tasks/openformtask":108}],87:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=e("./tasks/opentabletask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s,e.help="editing.steps.help.edit_table",r(this,e)};o(l,a),t.exports=l},{"./tasks/opentabletask":109}],88:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=e("./tasks/pickfeaturetask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new s(e);e.task=t,e.help="editing.steps.help.pick_feature",r(this,e)};o(l,a),t.exports=l},{"./tasks/pickfeaturetask":110}],89:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.workflow.Step,s=e("./tasks/pickprojectlayerfeaturestask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.task=new s(e),e.help="editing.steps.help.pick_feature",r(this,e)};o(l,a),t.exports=l},{"./tasks/pickprojectlayerfeaturestask":111}],90:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=g3wsdk.core.i18n.tPlugin,s=e("./editingstep"),l=e("./tasks/selectelementstask"),u=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];t.task=new l(t),t.help=t.help||"editing.steps.help.select_elements",n&&this.on("run",function(){e.emit("next-step",a("editing.steps.help.select_elements"))}),r(this,t)};o(u,s),t.exports=u},{"./editingstep":79,"./tasks/selectelementstask":112}],91:[function(e,t,n){var i=g3wsdk.core.utils,r=i.base,o=i.inherit,a=e("./editingstep"),s=e("./tasks/splitfeaturetask"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new s(e);e.task=t,e.help="",r(this,e)};o(l,a),t.exports=l},{"./editingstep":79,"./tasks/splitfeaturetask":113}],92:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingtask");a(i,s);var l=i.prototype;l.run=function(e,t){var n=$.Deferred(),i=t.session,r=e.layer,o=r.getId(),a=r.getEditingLayer(),s=e.features.length?e.features[e.features.length-1]:r.createNewFeature();return s.setTemporaryId(),a.getEditingSource().addFeature(s),i.pushAdd(o,s,!1),e.features.push(s),this.setContextGetDefaultValue(!0),n.resolve(e,t),n.promise()},l.stop=function(){},t.exports=i},{"./editingtask":101}],93:[function(e,t,n){function i(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._add=void 0===t.add||t.add,this._busy=!1,this.drawInteraction,this.measeureInteraction,this.drawingFeature,this._snap=t.snap!==!1,this._finishCondition=t.finishCondition||function(){return!0},this._condition=t.condition||function(){return!0},this._delKeyRemoveLastPoint=function(t){return 46===t.keyCode&&e.removeLastPoint()},o(this,t)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.core.layer.Layer,l=g3wsdk.core.geometry.Geometry,u=g3wsdk.core.layer.features.Feature,c=g3wsdk.ol.interactions.measure,d=c.AreaInteraction,f=c.LengthInteraction,p=e("./editingtask");a(i,p);var h=i.prototype;h.run=function(e,t){var n=this,i=$.Deferred(),r=e.layer,o=r.getEditingLayer(),a=t.session,c=r.getId();switch(r.getType()){case s.LayerTypes.VECTOR:var d=r.getEditingGeometryType();this.geometryType=l.getOLGeometry(d);var f=o.getSource(),p=r.getEditingFields(),h=new ol.source.Vector;this.drawInteraction=new ol.interaction.Draw({type:this.geometryType,source:h,condition:this._condition,freehandCondition:ol.events.condition.never,finishCondition:this._finishCondition}),this.addInteraction(this.drawInteraction),this.drawInteraction.setActive(!0),this.drawInteraction.on("drawstart",function(e){var t=e.feature;n.drawingFeature=t,document.addEventListener("keydown",n._delKeyRemoveLastPoint)}),this.drawInteraction.on("drawend",function(t){var r=void 0;n._add?(p.forEach(function(e){t.feature.set(e.name,null)}),r=new u({feature:t.feature}),r.setTemporaryId(),f.addFeature(r),a.pushAdd(c,r,!1)):r=t.feature,r=l.addZValueToOLFeatureGeometry({feature:r,geometryType:d}),e.features.push(r),n.setContextGetDefaultValue(!0),n.fireEvent("addfeature",r),i.resolve(e)})}return i.promise()},h.addMeasureInteraction=function(){var e=this.getMapService().getProjection(),t={projection:e,drawColor:"transparent",feature:this.drawingFeature};l.isLineGeometryType(this.geometryType)?this.measureInteraction=new f(t):l.isPolygonGeometryType(this.geometryType)&&(this.measureInteraction=new d(t)),this.measureInteraction&&(this.measureInteraction.setActive(!0),this.addInteraction(this.measureInteraction))},h.removeMeasureInteraction=function(){this.measureInteraction&&(this.measureInteraction.clear(),this.removeInteraction(this.measureInteraction),this.measureInteraction=null)},h.stop=function(){return this.removeInteraction(this.drawInteraction),this.removeMeasureInteraction(),this.drawInteraction=null,this.drawingFeature=null,document.removeEventListener("keydown",this._delKeyRemoveLastPoint),!0},h.removeLastPoint=function(){if(this.drawInteraction)try{this.drawInteraction.removeLastPoint()}catch(e){}},t.exports=i},{"./editingtask":101}],94:[function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e)}var o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=e("./editingtask");s(r,l);var u=r.prototype;u.run=function(e,t){var n=$.Deferred(),r=e.layer,o=e.features,a=r.getId(),s=t.session,l=o[0],u=l.getGeometry(),c=l.clone();return u.setCoordinates([].concat(i(u.getCoordinates()),i(o[1].getGeometry().getCoordinates()))),this.evaluateExpressionFields({inputs:e,context:t,feature:l})["finally"](function(){s.pushUpdate(a,l,c),e.features=[l],n.resolve(e)}),n.promise()},u.stop=function(){},t.exports=r},{"./editingtask":101}],95:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingtask");e("../../../g3w-editing-components/choosefeaturetoedit");a(i,s);var l=i.prototype;l.run=function(e){var t=$.Deferred(),n=e.features;return 1===n.length?t.resolve(e):this.chooseFeatureFromFeatures({promise:t,features:n}).then(function(n){e.features=[n],t.resolve(e)})["catch"](function(){t.reject()}),t.promise()},l.stop=function(){return!0},t.exports=i},{"../../../g3w-editing-components/choosefeaturetoedit":33,"./editingtask":101}],96:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type||"default";this._dialog=f[t],o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.gui.GUI,l=g3wsdk.core.i18n,u=l.t,c=l.tPlugin,d=e("./editingtask"),f={"delete":{fnc:function(t){var n=$.Deferred(),i=e("../../../services/editingservice"),r=t.layer,o=r.getEditingLayer(),a=t.features[0],l=r.getId(),u=r.getChildren(),d=u.length&&i._filterRelationsInEditing({layerId:l,relations:r.getRelations().getArray()}).length>0;return s.dialog.confirm("<h4>"+c("editing.messages.delete_feature")+'</h4>\n                        <div style="font-size:1.2em;">'+(d?c("editing.messages.delete_feature_relations"):"")+"</div>",function(e){e?(o.getSource().removeFeature(a),i.removeLayerUniqueFieldValuesFromFeature({layerId:l,feature:a}),n.resolve(t)):n.reject(t)}),n.promise()}},commit:{fnc:function(e){var t=$.Deferred(),n=e.close,i={SAVE:{label:u("save"),className:"btn-success",callback:function(){t.resolve(e)}},CANCEL:{label:u(n?"exitnosave":"annul"),className:"btn-danger",callback:function(){t.reject()}}};n&&(i.CLOSEMODAL={label:u("annul"),className:"btn-primary",callback:function(){r.modal("hide")}});var r=s.dialog.dialog({message:e.message,title:c("editing.messages.commit_feature")+" "+e.layer.getName()+"?",buttons:i});return t.promise()}}};a(i,d);var p=i.prototype;p.run=function(e,t){var n=this._dialog.fnc(e,t);return e.features&&this.setAndUnsetSelectedFeaturesStyle({promise:n}),n},p.stop=function(){return!0},t.exports=i},{"../../../services/editingservice":42,"./editingtask":101}],97:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e)}var o=g3wsdk.constant.G3W_FID,a=g3wsdk.core.utils,s=a.base,l=a.inherit,u=g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry,c=g3wsdk.gui.GUI,d=g3wsdk.core.i18n.tPlugin,f=g3wsdk.core.layer.features.Feature,p=e("./editingtask"),h=e("../../../g3w-editing-components/selectcopyotherlayersfeatures");l(r,p);var v=r.prototype;v.run=function(e,t){var n=this,r=$.Deferred(),a=e.layer,s=a.getGeometryType(),l=a.getId(),p=a.getEditingFields().filter(function(e){return!e.pk}),v=t.session,g=a.getEditingLayer(),m=g.getSource(),y=this.getFeaturesFromSelectionFeatures({layerId:l,geometryType:s}),_=[],b=h({features:y,selectedFeatures:_}),w=b.$mount().$el,k=c.showModalDialog({title:d("editing.modal.tools.copyfeaturefromotherlayer.title"),className:"modal-left",closeButton:!1,message:w,buttons:{cancel:{label:"Cancel",className:"btn-danger",callback:function(){r.reject()}},ok:{label:"Ok",className:"btn-success",callback:function(){function t(){return s.apply(this,arguments)}var s=i(regeneratorRuntime.mark(function d(){var t,i,s,h;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t=[],i=!1,s=[],_.forEach(function(e){n.getEditingService().getProjectLayerById(e.__layerId)?s.push(n.getEditingService().getProjectLayerFeatureById({layerId:e.__layerId,fid:e.get(o)})):s.push({properties:e.getProperties()})}),d.next=6,Promise.allSettled(s);case 6:h=d.sent,h.forEach(function(e,n){var r=e.status,o=e.value;if("fulfilled"===r){var s=_[n];p.forEach(function(e){var t=e.name,n=e.validate.required,r=void 0!==n&&n,a=o.properties[t]||null;i=i||null===a&&r,s.set(t,a)});var c=new f({feature:s,properties:p.map(function(e){return e.name})});a.getEditingNotEditableFields().find(function(e){a.isPkField(e)&&c.set(e,null)}),u({feature:c}),c.setTemporaryId(),m.addFeature(c),t.push(c),v.pushAdd(l,c,!1)}}),t.length&&1===t.length?e.features.push(t[0]):(i&&c.showUserMessage({type:"warning",message:"plugins.editing.messages.copy_and_paste_from_other_layer_mandatory_fields",autoclose:!0,duration:2e3}),e.features.push(t)),t.forEach(function(e){return n.fireEvent("addfeature",e)}),r.resolve(e);case 11:case"end":return d.stop()}},d,n)}));return t}()}}});return k.find("button.btn-success").prop("disabled",!0),b.$watch("selectedFeatures",function(e){return k.find("button.btn-success").prop("disabled",0===e.length)}),r.promise()},v.stop=function(){return!0},t.exports=r},{"../../../g3w-editing-components/selectcopyotherlayersfeatures":35,"./editingtask":101}],98:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copyLayer,n=e.external,i=e.isVector;this.copyLayer=t,this.external=n,this.isVector=i,s(this,e)}var o=g3wsdk.constant.G3W_FID,a=g3wsdk.core.utils,s=a.base,l=a.inherit,u=g3wsdk.gui.GUI,c=g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry,d=g3wsdk.core.i18n.tPlugin,f=g3wsdk.core.layer.features.Feature,p=e("./editingtask"),h=e("../../../g3w-editing-components/selectcopyotherprojectlayerfeatures");l(r,p);var v=r.prototype;v.run=function(e,t){var n=this,r=$.Deferred(),a=e.features,s=e.layer,l=s.getId(),p=s.getEditingFields().filter(function(e){return!e.pk}),v=t.session,g=s.getEditingLayer(),m=g.getSource(),y=[],_=h({external:this.external,layer:this.copyLayer,features:a,selectedFeatures:y}),b=_.$mount().$el,w=u.showModalDialog({title:d("editing.modal.tools.copyfeaturefromprojectlayer.title"),className:"modal-left",closeButton:!1,message:b,buttons:{cancel:{label:"Cancel",className:"btn-danger",callback:function(){r.reject()}},ok:{label:"Ok",className:"btn-success",callback:function(){function t(){return a.apply(this,arguments)}var a=i(regeneratorRuntime.mark(function d(){var t,i,a,h,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=[],i=!1,!y.length){d.next=21;break}if(a=y[0],h=function(e){p.forEach(function(t){var n=t.name,r=t.validate.required,o=void 0!==r&&r,s=e[n]||null;i=i||null===s&&o,a.set(n,s)});var n=new f({feature:a,properties:p.map(function(e){return e.name})});s.getEditingNotEditableFields().find(function(e){s.isPkField(e)&&n.set(e,null)}),c({feature:n}),n.setTemporaryId(),m.addFeature(n),t.push(n),v.pushAdd(l,n,!1)},!n.isVector){d.next=21;break}if(!n.external){d.next=10;break}h(a.getProperties()),d.next=19;break;case 10:return d.prev=10,d.next=13,n.getEditingService().getProjectLayerFeatureById({layerId:n.copyLayer.getId(),fid:a.get(o)});case 13:g=d.sent,g&&h(g.properties),d.next=19;break;case 17:d.prev=17,d.t0=d["catch"](10);case 19:d.next=21;break;case 21:t.length&&1===t.length?e.features.push(t[0]):(i&&u.showUserMessage({type:"warning",message:"plugins.editing.messages.copy_and_paste_from_other_layer_mandatory_fields",autoclose:!0,duration:2e3}),e.features.push(t)),t.forEach(function(e){return n.fireEvent("addfeature",e)}),r.resolve(e);case 24:case"end":return d.stop()}},d,n,[[10,17]])}));return t}()}}});return w.find("button.btn-success").prop("disabled",!0),_.$watch("selectedFeatures",function(e){return w.find("button.btn-success").prop("disabled",0===e.length)}),r.promise()},v.stop=function(){return!0},t.exports=r},{"../../../g3w-editing-components/selectcopyotherprojectlayerfeatures":36,"./editingtask":101}],99:[function(e,t,n){function i(e){this.drawInteraction=null,this._selectInteraction=null,o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingtask");a(i,s);var l=i.prototype;l.run=function(t,n){var i=$.Deferred(),r=t.layer,o=r.getId(),a=n.session,s=t.features[0],l=e("../../../services/editingservice"),u=e("../../../services/relationservice"),c=l._filterRelationsInEditing({layerId:o,relations:r.getRelations()?r.getRelations().getArray():[]}).filter(function(e){var t=l._getRelationId({layerId:o,relation:e}),n=l.getLayerById(t),i=l._getRelationFieldsFromRelation({layerId:t,relation:e}),r=i.ownField,a=n.getEditingFields().find(function(e){return e.name===r});return!a.validate.required}),d=c.length?l.getLayersDependencyFeatures(o,{feature:s,relations:c}):Promise.resolve();return d.then(function(){var e=l.getRelationsInEditing({layerId:o,relations:c,feature:s});t.features=[s],e.forEach(function(e){for(var t=e.relation,n=e.relations,i=new u(o,{relation:t,relations:n}),r=n.length,a=0;a<r;a++)i.unlinkRelation(0,!1)}),a.pushDelete(o,s),i.resolve(t)}),i.promise()},l.stop=function(){return new Promise(function(e,t){e(!0)})},t.exports=i},{"../../../services/editingservice":42,"../../../services/relationservice":43,"./editingtask":101}],100:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pickFeatureInteraction=null,o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=g3wsdk.core.geoutils,l=s.multiGeometryToSingleGeometries,u=s.singleGeometriesToMultiGeometry,c=e("./editingtask");a(i,c);var d=i.prototype;d.run=function(e,t){var n=$.Deferred(),i=e.layer,r=e.layer.getEditingLayer(),o=i.getId(),a=t.session,s=e.features,c=e.coordinate,d=s[0],f=d.clone(),p=d.getGeometry(),h=l(p),v=new ol.source.Vector({features:h.map(function(e){return new ol.Feature(e)})}),g=this.getMap(),m=g.getPixelFromCoordinate(c),y=new ol.layer.Vector({source:v,style:r.getStyle()});return g.addLayer(y),g.once("postrender",function(){var i=this,s=!1;this.forEachFeatureAtPixel(m,function(l){if(!s){if(v.removeFeature(l),v.getFeatures().length){var c=u(v.getFeatures().map(function(e){return e.getGeometry()}));d.setGeometry(c),i.evaluateExpressionFields({inputs:e,context:t,feature:d})["finally"](function(){a.pushUpdate(o,d,f),n.resolve(e)})}else r.getSource().removeFeature(d),a.pushDelete(o,d),n.resolve(e);s=!0}},{layerFilter:function(e){return e===y},hitTolerance:1}),this.removeLayer(y),y=null}),n.promise()},d.stop=function(){},t.exports=i},{"./editingtask":101}],101:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this._editingServive,this._mapService=v.getService("map"),this.addInteraction=function(e){this._mapService.addInteraction(e)},this.removeInteraction=function(e){var t=this;setTimeout(function(){return t._mapService.removeInteraction(e)})}}var o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=g3wsdk.core.geometry.Geometry,u=g3wsdk.core.geoutils,c=u.convertSingleMultiGeometry,d=u.isSameBaseGeometryType,f=u.createSelectedStyle,p=u.areCoordinatesEqual,h=g3wsdk.core.layer.Layer,v=g3wsdk.gui.GUI,g=g3wsdk.core.workflow.Task,m=g3wsdk.core.workflow.WorkflowsStack,y=g3wsdk.core.input.inputService,b=g3wsdk.core.i18n.tPlugin,w=e("../../../g3w-editing-components/choosefeaturetoedit");s(r,g);var k=r.prototype;k.getEditingType=function(){return null},k.registerPointerMoveCursor=function(){this._mapService.getMap().on("pointermove",this._pointerMoveCursor)},k.unregisterPointerMoveCursor=function(){
this._mapService.getMap().un("pointermove",this._pointerMoveCursor)},k._pointerMoveCursor=function(e){var t=this.forEachFeatureAtPixel(e.pixel,function(){return!0});t?this.getTargetElement().style.cursor="pointer":this.getTargetElement().style.cursor=""},k.setSteps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._steps=e,this.setUserMessageSteps(e)},k.getSteps=function(){return this._steps},k.getMapService=function(){return this._mapService},k.getMap=function(){return this._mapService.getMap()},k.areCoordinatesEqual=function(e){var t=e.feature,n=e.coordinates,i=t.getGeometry(),r=i.getType();switch(r){case"MultiLineString":return!!_.flatMap(i.getCoordinates()).find(function(e){return p(n,e)});case"LineString":return!!i.getCoordinates().find(function(e){return p(n,e)});case"Polygon":return!!_.flatMap(i.getCoordinates()).find(function(e){return p(n,e)});case"MultiPolygon":return!!i.getPolygons().find(function(e){return!!_.flatMap(e.getCoordinates()).find(function(e){return p(n,e)})});case"Point":return p(n,i.getCoordinates());case"MultiPoint":return!!i.getCoordinates().find(function(e){return p(n,e)})}return!1},k.setFeaturesSelectedStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=this.getSelectedStyle(e[0]),n=t.originalStyle,i=t.selectedStyle;return e.forEach(function(e){return e.setStyle(i)}),n}},k.setAndUnsetSelectedFeaturesStyle=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.promise,i=this.getInputs(),r=i.layer,o=i.features,a=function(){var t=e.setFeaturesSelectedStyle(o);n.always(function(){o.forEach(function(e){return e.setStyle(t)})})};r.getType()===h.LayerTypes.VECTOR&&(1===m.getLength()?setTimeout(function(){a()}):a())},k.getSelectedStyle=function(e){var t=e.getGeometry().getType(),n=e.getStyle(),i=f({geometryType:t});return{originalStyle:n,selectedStyle:i}},k.disableSidebar=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!this._isContentChild&&v.disableSideBar(e)},k.getEditingService=function(){return this._editingServive=this._editingServive||e("../../../services/editingservice"),this._editingServive},k.fireEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getEditingService().fireEvent(e,t)},k.setNullMediaFields=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=e.feature,i=t.getEditingMediaFields({});i.forEach(function(e){return n.set(e,null)})},k.run=function(e,t){},k.stop=function(){},k.saveSingle=function(e,t){var n=this;t.session.save().then(function(){return n.getEditingService().saveChange()})},k.cancelSingle=function(e,t){t.session.rollback()},k.getRootWorkflowLayerId=function(){return m.getFirst().getInputs().layer.getId()},k.getFormFields=i(regeneratorRuntime.mark(function x(){var e,t,n,i,r,o,a,s,l,u,c,d=this,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=f.inputs,h=f.context,v=f.feature,g=f.isChild,m=void 0!==g&&g;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=!1,t=this.getRootWorkflowLayerId(),n=p.layer,i=p.features,r=n.getId(),o=[],a=h.excludeFields,s=h.get_default_value,l=void 0!==s&&s,u=n.getFieldsWithValues(v,{exclude:a,get_default_value:l}),u.forEach(function(t){if(t.validate.unique){e=!0;var n=v.get(t.name);o.push({current_feature_value:n,field:t})}}),o.forEach(function(e){var n=e.current_feature_value,o=e.field,a=void 0;a=m?d.getEditingService().getChildLayerUniqueFieldValues({layerId:r,relationLayerId:t,field:o}):d.getEditingService().getLayerUniqueFieldValues({layerId:r,field:o}),a.forEach(function(e){return o.validate.exclude_values.add(e)}),i.forEach(function(e){var t=e.get(o.name);null===t&&"undefined"==typeof t||o.validate.exclude_values.add(t)}),o.validate.exclude_values["delete"](n)}),e&&(c=function(){return o.forEach(function(e){var n=e.current_feature_value,i=e.field;n!==i.value&&(m?d.getEditingService().changeRelationLayerUniqueFieldValues({layerId:r,relationLayerId:t,field:i,oldValue:n,newValueconvertSingleMultiGeometry:i.value}):d.getEditingService().changeLayerUniqueFieldValues({layerId:r,field:i,oldValue:n,newValue:i.value}))}),m||d.getEditingService().saveTemporaryRelationsUniqueFieldsValues(r),{once:!0}},this.getEditingService().subscribe("savedfeature_"+r,c),this.getEditingService().subscribe("closeform_"+r,function(){return d.getEditingService().unsubscribe("savedfeature_"+r,c),d.getEditingService().clearTemporaryRelationsUniqueFieldsValues(r),{once:!0}})),f.abrupt("return",u);case 11:case"end":return f.stop()}},x,this)})),k.evaluateExpressionFields=i(regeneratorRuntime.mark(function S(){var e,t,n,r,o,a,s=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=l.inputs,c=l.context,d=l.feature;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return e=[],t=u.layer,n=c.excludeFields,r=c.get_default_value,o=void 0!==r&&r,a=t.getFieldsWithValues(d,{exclude:n,get_default_value:o}),a.forEach(function(t){var n=t.input.options,r=n.default_expression,o=n.filter_expression,a=u.layer.getId(),l=s.getParentFormData();if(r){var c=r.apply_on_update,f=void 0!==c&&c;if(f||d.isNew()){var p=new Promise(function(){var e=i(regeneratorRuntime.mark(function n(e,i){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.handleDefaultExpressionFormInput({field:t,feature:d,qgs_layer_id:a,parentData:l});case 3:d.set(t.name,t.value),e(d),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),i(n.t0);case 10:case"end":return n.stop()}},n,s,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}());e.push(p)}}if(o){var h=new Promise(function(){var e=i(regeneratorRuntime.mark(function n(e,i){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.handleFilterExpressionFormInput({field:t,feature:d,qgs_layer_id:a,parentData:l});case 3:d.set(t.name,t.value),e(d),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),i(n.t0);case 10:case"end":return n.stop()}},n,s,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}());e.push(h)}}),l.next=7,Promise.allSettled(e);case 7:return l.abrupt("return",d);case 8:case"end":return l.stop()}},S,this)})),k.getNotEditableFieldsNoPkValues=function(e){var t=e.layer,n=e.feature;return t.getEditingNotEditableFields().reduce(function(e,i){return e[i]=t.isPkField(i)?null:n.get(i),e},{})},k.setContextGetDefaultValue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getContext();t.get_default_value=e},k.getParentFormData=function(){if(m.getLength()>1){var e=m.getParent().getInputs(),t=e.features,n=e.layer,i=e.fields,r=void 0===i?[]:i,o=t[t.length-1].clone();return r.forEach(function(e){var t=e.name,n=e.value;o.set(t,n)}),{feature:o,qgs_layer_id:n.getId()}}},k.getFeaturesFromSelectionFeatures=function(e){var t=e.layerId,n=e.geometryType,i=this._mapService.defaultsLayers.selectionLayer.getSource();return this.convertFeaturesGeometryToGeometryTypeOfLayer({features:i.getFeatures().filter(function(e){return e.__layerId!==t}),geometryType:n})},k.convertFeaturesGeometryToGeometryTypeOfLayer=function(e){var t=e.features,n=void 0===t?[]:t,i=e.geometryType,r=[];return n.forEach(function(e){var t=e.getGeometry()&&e.getGeometry().getType();if(i===t)r.push(e);else if(d(t,i)&&(l.isMultiGeometry(i)||!l.isMultiGeometry(t))){var n=e.clone();n.__layerId=e.__layerId,n.setGeometry(c(e.getGeometry(),i)),r.push(n)}}),r},k.chooseFeatureFromFeatures=function(e){var t=this,n=e.features;return new Promise(function(e,i){var r=t.getInputs(),o=[],a=w({features:n,feature:o,attributes:r.layer.getEditingFields().map(function(e){var t=e.name,n=e.label;return{name:t,label:n}})}),s=a.$mount().$el,l=v.showModalDialog({title:b("editing.modal.tools.copyfeaturefromprojectlayer.title"),className:"modal-left",closeButton:!1,message:s,buttons:{cancel:{label:"Cancel",className:"btn-danger",callback:function(){i()}},ok:{label:"Ok",className:"btn-success",callback:function(){e(o[0])}}}});l.find("button.btn-success").prop("disabled",!0),a.$watch("feature",function(e){return l.find("button.btn-success").prop("disabled",null===e)})})},t.exports=r},{"../../../g3w-editing-components/choosefeaturetoedit":33,"../../../services/editingservice":42}],102:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._drawInteraction,this._snapIteraction,o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingtask");a(i,s);var l=i.prototype;l.run=function(e){var t=this,n=$.Deferred(),i=e.features;if(i.length)return this._snapIteraction=new ol.interaction.Snap({features:new ol.Collection(i),edge:!1}),this._drawIteraction=new ol.interaction.Draw({type:"Point",condition:function(e){var n=e.coordinate;return!!i.find(function(e){return t.areCoordinatesEqual({feature:e,coordinates:n})})}}),this._drawIteraction.on("drawend",function(i){e.coordinates=i.feature.getGeometry().getCoordinates(),t.setUserMessageStepDone("from"),n.resolve(e)}),this.addInteraction(this._drawIteraction),this.addInteraction(this._snapIteraction),n.promise()},l.stop=function(){this.removeInteraction(this._drawIteraction),this.removeInteraction(this._snapIteraction),this._snapIteraction=null,this._drawIteraction=null},t.exports=i},{"./editingtask":101}],103:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingtask"),l=g3wsdk.gui.GUI,u=g3wsdk.ol.interactions.PickFeatureInteraction;a(i,s);var c=i.prototype;c.run=function(e,t){var n=this,i=$.Deferred();l.setModal(!1);var r=e.layer.getEditingLayer();this._originalLayerStyle=r.getStyle();var o=t.beforeRun,a=o&&"function"==typeof o?o():Promise.resolve(),s=t.exclude,c=s.field,d=s.value,f=t.style;return this._features=r.getSource().getFeatures(),this._features=c?this._features.filter(function(e){return e.get(c)!=d}):this._features,f&&this._features.forEach(function(e){e.setStyle(f)}),a.then(function(){n.pickFeatureInteraction=new u({layers:[r],features:n._features}),n.addInteraction(n.pickFeatureInteraction),n.pickFeatureInteraction.on("picked",function(t){var n=t.feature;e.features.push(n),l.setModal(!0),i.resolve(e)})})["catch"](function(e){i.reject()}),i.promise()},c.stop=function(){var e=this;return l.setModal(!0),this.removeInteraction(this.pickFeatureInteraction),this._features.forEach(function(t){t.setStyle(e._originalLayerStyle)}),this.pickFeatureInteraction=null,this._features=null,this._originalLayerStyle=null,!0},t.exports=i},{"./editingtask":101}],104:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e)}var o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=g3wsdk.core.geoutils.dissolve,u=e("./editingtask"),c=g3wsdk.gui.GUI;e("../../../g3w-editing-components/selectmergefeatures");s(r,u);var d=r.prototype;d.run=function(e,t){var n=this,r=$.Deferred(),o=e.layer,a=e.features,s=o.getEditingLayer(),u=s.getSource(),d=o.getId(),f=t.session;return a.length<2?(c.showUserMessage({type:"warning",message:"plugins.editing.messages.select_min_2_features",autoclose:!0}),r.reject()):this.chooseFeatureFromFeatures({features:a}).then(function(){var o=i(regeneratorRuntime.mark(function s(i){var o,p,h;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=a.findIndex(function(e){return i===e}),p=i.clone(),h=l({features:a,index:o}),!h){s.next=17;break}return s.prev=4,s.next=7,n.evaluateExpressionFields({inputs:e,context:t,feature:h});case 7:s.next=11;break;case 9:s.prev=9,s.t0=s["catch"](4);case 11:f.pushUpdate(d,h,p),a.filter(function(e){return e!==i}).forEach(function(e){f.pushDelete(d,e),u.removeFeature(e)}),e.features=[i],r.resolve(e),s.next=19;break;case 17:c.showUserMessage({type:"warning",message:"plugins.editing.messages.no_feature_selected",autoclose:!0}),r.reject();case 19:case"end":return s.stop()}},s,n,[[4,9]])}));return function(e){return o.apply(this,arguments)}}())["catch"](function(){r.reject()}),r.promise()},d.stop=function(){this.removeInteraction(this._pickInteraction)},t.exports=r},{"../../../g3w-editing-components/selectmergefeatures":37,"./editingtask":101}],105:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.drawInteraction=null,this._originalStyle=null,this._feature=null,this.tooltip,this._deleteCondition=e.deleteCondition,a(this,e)}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=g3wsdk.ol.utils,u=l.createMeasureTooltip,c=l.removeMeasureTooltip,d=e("./editingtask");s(i,d);var f=i.prototype;f.run=function(e,t){var n=this,i=$.Deferred(),r=e.layer,o=r.getEditingLayer(),a=t.session,s=r.getId(),l=void 0,u=void 0,c=this._feature=e.features[0];this.deleteVertexKey,this._originalStyle=o.getStyle();var d=function(){var e=new ol.style.Circle({radius:5,fill:null,stroke:new ol.style.Stroke({color:"orange",width:2})});return[new ol.style.Style({image:e,geometry:function(e){var t=e.getGeometry().getCoordinates()[0];return new ol.geom.MultiPoint(t)}}),new ol.style.Style({stroke:new ol.style.Stroke({color:"yellow",width:4})})]};c.setStyle(d);var f=new ol.Collection(e.features);return this._modifyInteraction=new ol.interaction.Modify({features:f,deleteCondition:this._deleteCondition}),this._modifyInteraction.on("modifystart",function(e){var t=e.features.getArray()[0];u=t.clone()}),this.addInteraction(this._modifyInteraction),this._modifyInteraction.on("modifyend",function(r){var o=r.features.getArray()[0];o.getGeometry().getExtent()!==u.getGeometry().getExtent()&&n.evaluateExpressionFields({inputs:e,context:t,feature:o})["finally"](function(){l=o.clone(),a.pushUpdate(s,l,u),e.features.push(l),i.resolve(e)})}),i.promise()},f.addMeasureInteraction=function(){var e=this,t=this.getMap();this._modifyInteraction.on("modifystart",function(n){var i=n.features.getArray()[0];e.tooltip=u({map:t,feature:i})})},f.removeMeasureInteraction=function(){var e=this.getMap();this.tooltip&&c(r({map:e},this.tooltip)),this.tooltip=null},f.stop=function(){return this._feature.setStyle(this._originalStyle),this.removeInteraction(this._modifyInteraction),!0},t.exports=i},{"./editingtask":101}],106:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e)}var r=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=e("./editingtask");s(i,l);var u=i.prototype;u.getDeltaXY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,i=e.coordinates,r=function a(e){return Array.isArray(e[0])?a(e[0]):{x:e[0],y:e[1]}},o=r(i);return{x:t-o.x,y:n-o.y}},u.run=function(e,t){var n=this,i=$.Deferred(),o=e.layer,a=e.features,s=e.coordinates,l=o.getEditingLayer().getSource(),u=o.getId(),c=t.session;return this._snapIteraction=new ol.interaction.Snap({source:l,edge:!1}),this._drawInteraction=new ol.interaction.Draw({type:"Point",features:new ol.Collection}),this._drawInteraction.on("drawend",function(d){for(var f=d.feature.getGeometry().getCoordinates(),p=r(f,2),h=p[0],v=p[1],g=s?n.getDeltaXY({x:h,y:v,coordinates:s}):null,m=a.length,y=[],_=0;_<m;_++){var b=a[_].cloneNew();if(g)b.getGeometry().translate(g.x,g.y);else{var w=b.getGeometry().getCoordinates(),k=n.getDeltaXY({x:h,y:v,coordinates:w});b.getGeometry().translate(k.x,k.y)}n.setNullMediaFields({feature:b,layer:o});var x=n.evaluateExpressionFields({inputs:e,context:t,feature:b});y.push(x)}Promise.allSettled(y).then(function(t){t.forEach(function(t){var i=(t.status,t.value);l.addFeature(i);var a=n.getNotEditableFieldsNoPkValues({layer:o,feature:i}),s=c.pushAdd(u,i);Object.entries(a).length&&Object.entries(a).forEach(function(e){var t=r(e,2),n=t[0],i=t[1];return s.set(n,i)}),e.features.push(s)})})["finally"](function(){n._steps.to.done=!0,i.resolve(e)})}),this.addInteraction(this._drawInteraction),this.addInteraction(this._snapIteraction),i.promise()},u.stop=function(){return this.removeInteraction(this._drawInteraction),this.removeInteraction(this._snapIteraction),this._drawInteraction=null,this._snapIteraction=null,!0},t.exports=i},{"./editingtask":101}],107:[function(e,t,n){function i(e){this.drawInteraction=null,this.promise,o(this,e)}var r=g3wsdk.core.utils,o=r.base,a=r.inherit,s=e("./editingtask");a(i,s);var l=i.prototype;l.run=function(e,t){var n=this;this.promise=$.Deferred();var i=e.layer,r=t.session,o=i.getId(),a=new ol.Collection(e.features),s=null;this.changeKey=null;var l=!1;return this.setAndUnsetSelectedFeaturesStyle({promise:this.promise}),this._translateInteraction=new ol.interaction.Translate({features:a,hitTolerance:isMobile&&isMobile.any?10:0}),this.addInteraction(this._translateInteraction),this._translateInteraction.on("translatestart",function(e){var t=e.features.getArray()[0];n.changeKey=t.once("change",function(){return l=!0}),s=t.clone()}),this._translateInteraction.on("translateend",function(i){ol.Observable.unByKey(n.changeKey);var a=i.features.getArray()[0];l?n.evaluateExpressionFields({inputs:e,context:t,feature:a})["finally"](function(){var t=a.clone();r.pushUpdate(o,t,s),n.promise.resolve(e)}):n.promise.resolve(e)}),this.promise.promise()},l.stop=function(){this.promise.resolve(),this.removeInteraction(this._translateInteraction),this._translateInteraction=null,this.changeKey=null},t.exports=i},{"./editingtask":101}],108:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._edit_relations=void 0===e.edit_relations||e._edit_relations,this._formIdPrefix="form_",this.layerId,this._isContentChild=!1,this._features,this._originalLayer,this._editingLayer,this._layerName,this._originalFeatures,this._fields,this._session,this._editorFormStructure,this.promise,this._multi=e.multi||!1,u(this,e)}var a=e("../../../components/SaveAll.vue"),s=i(a),l=g3wsdk.core.utils,u=l.base,c=l.inherit,d=g3wsdk.gui.GUI,f=g3wsdk.core.workflow.WorkflowsStack,p=e("./editingtask"),h=e("../../../form/editingform");c(o,p),t.exports=o;var v=o.prototype;v._getForm=function(){var e=r(regeneratorRuntime.mark(function t(e,n){var i,r,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._session=n.session,this._originalLayer=e.layer,this._editingLayer=this._originalLayer.getEditingLayer(),this._layerName=this._originalLayer.getName(),this._features=this._multi?e.features:[e.features[e.features.length-1]],this._originalFeatures=this._features.map(function(e){return e.clone()}),i=this._features[0],this._isContentChild&&(r=n.fatherValue,o=n.fatherField,"undefined"!=typeof o&&(i.set(o,r),this._originalFeatures[0].set(o,r))),t.next=10,this.getFormFields({inputs:e,context:n,feature:i,isChild:this._isContentChild});case 10:return this._fields=t.sent,this._fields=this._multi?this._fields.map(function(e){var t=JSON.parse(JSON.stringify(e));return t.value=null,t.forceNull=!0,t.validate.required=!1,t}).filter(function(e){return!e.pk}):this._fields,this._originalLayer.hasFormStructure()&&(a=this._originalLayer.getEditorFormStructure(),this._editorFormStructure=a.length?a:null),t.abrupt("return",d.showContentFactory("form"));case 14:case"end":return t.stop()}},t,this)}));return function(t,n){return e.apply(this,arguments)}}(),v._cancelFnc=function(e,t){return function(){this._isContentChild||(d.setModal(!1),this.fireEvent("cancelform",t.features)),e.reject(t)}},v.saveAll=function(e){var t=this;return new Promise(function(){var n=r(regeneratorRuntime.mark(function i(n,r){var o,a,s,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o=t.getContext(),a=o.session,s=t.getInputs(),e=t._multi?e.filter(function(e){return null!==e.value}):e,!e.length){i.next=10;break}return i.next=6,f.getCurrent().getContext().service.saveDefaultExpressionFieldsNotDependencies();case 6:l=[],t._features.forEach(function(n){t._originalLayer.setFieldsWithValues(n,e),l.push(n.clone())}),t._isContentChild&&(s.relationFeatures={newFeatures:l,originalFeatures:t._originalFeatures}),t.fireEvent("saveform",{newFeatures:l,originalFeatures:t._originalFeatures}).then(function(){l.forEach(function(e,n){a.pushUpdate(t.layerId,e,t._originalFeatures[n])}),t.fireEvent("savedfeature",l),t.fireEvent("savedfeature_"+t.layerId,l),a.save(),n({promise:t.promise})});case 10:case"end":return i.stop()}},i,t)}));return function(e,t){return n.apply(this,arguments)}}())},v._saveFeatures=function(){var e=r(regeneratorRuntime.mark(function t(e){var n,i=this,r=e.fields,o=e.promise,a=e.session,s=e.inputs;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._multi?r.filter(function(e){return null!==e.value}):r,!r.length){e.next=14;break}return n=[],d.setLoadingContent(!0),d.disableContent(!0),e.next=7,f.getCurrent().getContext().service.saveDefaultExpressionFieldsNotDependencies();case 7:d.setLoadingContent(!1),d.disableContent(!1),this._features.forEach(function(e){i._originalLayer.setFieldsWithValues(e,r),n.push(e.clone())}),this._isContentChild&&(s.relationFeatures={newFeatures:n,originalFeatures:this._originalFeatures}),this.fireEvent("saveform",{newFeatures:n,originalFeatures:this._originalFeatures}).then(function(){n.forEach(function(e,t){a.pushUpdate(i.layerId,e,i._originalFeatures[t])}),d.setModal(!1),i.fireEvent("savedfeature",n),i.fireEvent("savedfeature_"+i.layerId,n),i._isContentChild&&f.getParents().forEach(function(e){return e.getContext().service.setUpdate(!0,{force:!0})}),o.resolve(s)}),e.next=16;break;case 14:d.setModal(!1),o.resolve(s);case 16:case"end":return e.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),v._saveFnc=function(e,t,n){return function(i){var r=t.session;this._saveFeatures({fields:i,promise:e,session:r,inputs:n})}},v.startForm=r(regeneratorRuntime.mark(function g(){var e,t,n,i,r,o,a,l,u,c,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return this.getEditingService().setCurrentLayout(),e=d.inputs,t=d.context,n=d.promise,i=t.session,r=d.formComponent||h,p.next=6,this._getForm(e,t);case 6:o=p.sent,a=this._originalFeatures[0],l=!(this._originalFeatures.length>1)&&a.isNew(),f.getCurrent().setInput({key:"fields",value:this._fields}),u=o({formComponent:r,title:"plugins.editing.editing_attributes",name:this._layerName,crumb:{title:this._layerName},id:this._generateFormId(this._layerName),dataid:this._layerName,layer:this._originalLayer,isnew:l,feature:a,parentData:this.getParentFormData(),fields:this._fields,context_inputs:!this._multi&&this._edit_relations&&{context:t,inputs:e},formStructure:this._editorFormStructure,modal:!0,push:this._isContentChild,showgoback:!this._isContentChild,headerComponent:s["default"],buttons:[{id:"save",title:this._isContentChild?"plugins.editing.form.buttons.save_and_back":"plugins.editing.form.buttons.save",type:"save","class":"btn-success",cbk:this._saveFnc(n,t,e).bind(this)},{id:"cancel",title:"plugins.editing.form.buttons.cancel",type:"cancel","class":"btn-danger",eventButtons:{update:{"false":{id:"close",title:"close",type:"cancel","class":"btn-danger"}}},cbk:this._cancelFnc(n,e).bind(this)}]}),this.fireEvent("openform",{layerId:this.layerId,session:i,feature:this._originalFeature,formService:u}),c=f.getCurrent(),c&&c.setContextService(u);case 14:case"end":return p.stop()}},g,this)})),v.run=function(e,t){var n=$.Deferred();this.promise=n,this._isContentChild=f.getLength()>1;var i=e.layer,r=e.features;return this.layerId=i.getId(),d.setLoadingContent(!1),this.getEditingService().disableMapControlsConflict(!0),this.setAndUnsetSelectedFeaturesStyle({promise:n}),!this._multi&&Array.isArray(r[r.length-1])?n.resolve():(this.startForm({inputs:e,context:t,promise:n}),this.disableSidebar(!0)),n.promise()},v._generateFormId=function(e){return this._formIdPrefix+e},v.stop=function(){this.disableSidebar(!1),this._isContentChild||(this.getEditingService().disableMapControlsConflict(!1),f.getCurrent().getContext().service.setUpdate(!1,{force:!1})),d.closeForm({pop:this._isContentChild}),this.getEditingService().resetCurrentLayout(),this.fireEvent("closeform"),this.fireEvent("closeform_"+this.layerId),this.layerId=null,this.promise=null}},{"../../../components/SaveAll.vue":14,"../../../form/editingform":31,"./editingtask":101}],109:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._formIdPrefix="form_",a(this,e)}var r=g3wsdk.core.utils,o=r.inherit,a=r.base,s=g3wsdk.gui.GUI,l=g3wsdk.core.workflow.WorkflowsStack,u=e("../../../g3w-editing-components/table"),c=e("./editingtask");o(i,c);var d=i.prototype;d.run=function(e,t){var n=this;this.getEditingService().setCurrentLayout();var i=$.Deferred(),r=e.layer,o=r.getName(),a=r.getEditingFields();this._isContentChild=l.getLength()>1;var c=this._isContentChild&&t.excludeFields?t.excludeFields[0]:null,d=this._isContentChild&&t.exclude,f=r.getEditingCapabilities(),p=r.getEditingLayer(),h=p.readEditingFeatures();if(d&&h.length){var v=d.value;h=h.filter(function(e){var t=e.get(c);return t!=v})}var g=new u({title:""+o,features:h,promise:i,push:this._isContentChild,headers:a,context:t,inputs:e,capabilities:f,fatherValue:t.fatherValue,foreignKey:c});return s.disableSideBar(!0),s.showUserMessage({type:"loading",message:"plugins.editing.messages.loading_table_data",autoclose:!1,closable:!1}),setTimeout(function(){g.once("ready",function(){return setTimeout(function(){s.disableSideBar(!1),s.closeUserMessage()})}),s.showContent({content:g,push:n._isContentChild,showgoback:!1,closable:!1})},300),i.promise()},d._generateFormId=function(e){return""+this._formIdPrefix+e},d.stop=function(){this.disableSidebar(!1),this._isContentChild?s.popContent():s.closeContent(),this.getEditingService().resetCurrentLayout()},t.exports=i},{"../../../g3w-editing-components/table":38,"./editingtask":101}],110:[function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={highlight:e.highlight||!1,multi:e.multi||!1},this.pickFeatureInteraction=null,this._busy=!1,this._tools=e.tools||[],a(this,e)}var r=e("../../../interactions/pickfeaturesinteraction"),o=g3wsdk.core.utils,a=o.base,s=o.inherit,l=e("./editingtask");s(i,l);var u=i.prototype;u.run=function(e,t){var n=this,i=$.Deferred(),o=e.layer.getEditingLayer();return this.pickFeatureInteraction=new r.PickFeaturesInteraction({layer:o}),this.addInteraction(this.pickFeatureInteraction),this.pickFeatureInteraction.on("picked",function(t){var r=t.features,o=t.coordinate;0===e.features.length&&(e.features=r,e.coordinate=o),n.setAndUnsetSelectedFeaturesStyle({promise:i}),n._steps&&n.setUserMessageStepDone("select"),i.resolve(e)}),i.promise()},u.stop=function(){return this.removeInteraction(this.pickFeatureInteraction),this.pickFeatureInteraction=null,!0},t.exports=i},{"../../../interactions/pickfeaturesinteraction":40,"./editingtask":101}],111:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copyLayer,n=e.external,i=e.isVector;this.copyLayer=t,this.external=n,this.isVector=i,this.pickInteraction=null,c(this,e)}var o=e("../../../interactions/pickfeaturesinteraction"),a=g3wsdk.ol.interactions.PickCoordinatesInteraction,s=g3wsdk.core.data.DataRouterService,l=g3wsdk.core.project.ProjectsRegistry,u=g3wsdk.core.utils,c=u.base,d=u.inherit,f=g3wsdk.gui.GUI,p=e("./editingtask");d(r,p);var h=r.prototype;h.run=function(e,t){var n=$.Deferred();return this.copyLayer&&this.getFeaturesFromLayer({inputs:e,promise:n}),n.promise()},h.getFeaturesFromLayer=i(regeneratorRuntime.mark(function v(){var e,t,n,r=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=u.inputs,d=u.promise;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return e=[],t=c.layer.getGeometryType(),n=new Promise(function(){var n=i(regeneratorRuntime.mark(function u(n,c){var f;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r.isVector&&(r.external?(r.pickInteraction=new o.PickFeaturesInteraction({layer:r.copyLayer}),r.addInteraction(r.pickInteraction),r.pickInteraction.on("picked",function(i){var o=i.features;e=r.convertFeaturesGeometryToGeometryTypeOfLayer({features:o,geometryType:t}),n()})):(r.pickInteraction=new a,r.addInteraction(r.pickInteraction),f=l.getCurrentProject(),r.pickInteraction.once("picked",function(){var o=i(regeneratorRuntime.mark(function a(i){var o,l,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=i.coordinate,a.prev=1,a.next=4,s.getData("query:coordinates",{inputs:{coordinates:o,query_point_tolerance:f.getQueryPointTolerance(),layerIds:[r.copyLayer.getId()],multilayers:!1},outputs:null});case 4:l=a.sent,u=l.data,c=void 0===u?[]:u,c.length&&(e=r.convertFeaturesGeometryToGeometryTypeOfLayer({features:c[0].features,geometryType:t})),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),d.reject(a.t0);case 13:return a.prev=13,n(),a.finish(13);case 16:case"end":return a.stop()}},a,r,[[1,10,13,16]])}));return function(e){return o.apply(this,arguments)}}())));case 1:case"end":return u.stop()}},u,r)}));return function(e,t){return n.apply(this,arguments)}}()),u.next=5,n;case 5:e.length?(c.features=e,d.resolve(c)):(f.showUserMessage({type:"warning",message:"plugins.editing.messages.no_feature_selected",closable:!1,autoclose:!0}),d.reject());case 6:case"end":return u.stop()}},v,this)})),h.stop=function(){return this.removeInteraction(this.pickInteraction),this.pickInteraction=null,!0},t.exports=r},{"../../../interactions/pickfeaturesinteraction":40,"./editingtask":101}],112:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._type=e.type||"bbox",this._selectInteractions=[],this.multipleselectfeatures=[],this._originalStyle,this._vectorLayer,l(this,e)}var o=e("../../../interactions/pickfeaturesinteraction"),a=g3wsdk.core.ApplicationState,s=g3wsdk.core.utils,l=s.base,u=s.inherit,c=g3wsdk.core.geoutils,d=c.isSameBaseGeometryType,f=c.convertSingleMultiGeometry,p=c.Geometry.removeZValueToOLFeatureGeometry,h=g3wsdk.core.layer.features.Feature,v=e("./editingtask");u(r,v);var g=r.prototype;g.addSingleSelectInteraction=function(){
var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layer,r=t.inputs,a=t.promise,s=t.buttonnext,l=void 0!==s&&s,u=new o.PickFeaturesInteraction({layer:n.getEditingLayer()});u.on("picked",function(){var t=i(regeneratorRuntime.mark(function n(t){var i,o,s=t.features;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=void 0,!(s.length>1)){t.next=12;break}return t.prev=2,t.next=5,e.chooseFeatureFromFeatures({promise:a,features:s});case 5:i=t.sent,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](2);case 10:t.next=13;break;case 12:i=s[0];case 13:i&&(o=[i],r.features=o,l?e.addRemoveToMultipleSelectFeatures([i],r):(e._originalStyle=e.setFeaturesSelectedStyle(o),e._steps&&e.setUserMessageStepDone("select"),a.resolve(r)));case 14:case"end":return t.stop()}},n,e,[[2,8]])}));return function(e){return t.apply(this,arguments)}}()),this._selectInteractions.push(u),this.addInteraction(u)},g.addExternalSelectInteraction=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layer,i=t.inputs,r=t.context,a=t.promise,s=(t.buttonnext,n.getGeometryType()),l=n.getId(),u=n.getEditingLayer().getSource(),c=this.getContext(),v=c.session,g=this.getMapService().getExternalLayers().filter(function(e){var t=!0,n=e.getType();if("VECTOR"===n){var i=e.getSource().getFeatures();if(i.length){var r=i[0],o=r.getGeometry().getType();t=d(o,s)}}return t}),m=new o.PickFeaturesInteraction({layers:g});m.on("picked",function(t){if(t.features.length){var o=n.getEditingFields(),c=t.features[0].getGeometry();c.getType()!==s&&t.feature.setGeometry(f(c,s));var d=new h({feature:t.feature,properties:o.map(function(e){return("media"===e.input.type||"undefined"==typeof t.feature.get(e.name)||e.pk)&&t.feature.set(e.name,null),e.name})});e.evaluateExpressionFields({inputs:i,context:r,feature:d})["finally"](function(){p({feature:d}),d.setTemporaryId(),u.addFeature(d),v.pushAdd(l,d,!1),i.features.push(d),a.resolve(i)})}else a.reject()}),this._selectInteractions.push(m),this.addInteraction(m)},g.addRemoveToMultipleSelectFeatures=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];t.forEach(function(t){var i=e.multipleselectfeatures.indexOf(t);i<0?(e._originalStyle=e.setFeaturesSelectedStyle([t]),e.multipleselectfeatures.push(t)):(e.multipleselectfeatures.splice(i,1),t.setStyle(e._originalStyle)),n.features=e.multipleselectfeatures}),this._steps.select.buttonnext.disabled=this._steps.select.buttonnext.condition?this._steps.select.buttonnext.condition({features:this.multipleselectfeatures}):0===this.multipleselectfeatures.length,void 0!==this._steps.select.dynamic&&(this._steps.select.dynamic=this.multipleselectfeatures.length)},g.addMultipleSelectInteraction=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layer,i=t.inputs,r=t.promise,o=t.buttonnext,s=void 0!==o&&o,l=void 0;if(a.ismobile){var u=ol.interaction.Draw.createBox(),c=new ol.source.Vector({});this._vectorLayer=new ol.layer.Vector({source:c}),this.getMap().addLayer(this._vectorLayer),l=new ol.interaction.Draw({type:"Circle",source:c,geometryFunction:u}),l.on("drawend",function(t){var o=t.feature,a=o.getGeometry().getExtent(),l=n.getEditingLayer().getSource(),u=l.getFeaturesInExtent(a);s?e.addRemoveToMultipleSelectFeatures(u,i):u.length?(i.features=u,e._originalStyle=e.setFeaturesSelectedStyle(u),e._steps&&e.setUserMessageStepDone("select"),setTimeout(function(){r.resolve(i)},500)):r.reject()})}else l=new ol.interaction.DragBox({condition:ol.events.condition.shiftKeyOnly}),l.on("boxend",function(t){var o=[],a=l.getGeometry().getExtent(),u=n.getEditingLayer().getSource();u.forEachFeatureIntersectingExtent(a,function(e){o.push(e)}),s?e.addRemoveToMultipleSelectFeatures(o,i):o.length?(i.features=o,e._originalStyle=e.setFeaturesSelectedStyle(o),e._steps&&e.setUserMessageStepDone("select"),r.resolve(i)):r.reject()});this._selectInteractions.push(l),this.addInteraction(l)},g.run=function(e,t,n){var i=this,r=e.layer,o=$.Deferred();switch(this._type){case"single":this.addSingleSelectInteraction({layer:r,inputs:e,promise:o});break;case"multiple":var a=!!this._steps.select.buttonnext;a&&(this._steps.select.buttonnext.done=function(){o.resolve(e)}),this.addSingleSelectInteraction({layer:r,inputs:e,promise:o,buttonnext:a}),this.addMultipleSelectInteraction({layer:r,inputs:e,promise:o,buttonnext:a});break;case"bbox":this.addMultipleSelectInteraction({layer:r,inputs:e,promise:o});break;case"external":this.addExternalSelectInteraction({layer:r,inputs:e,context:t,promise:o})}return n.micro.addTask(function(){e.features.forEach(function(e){return e.setStyle(i._originalStyle)})}),o.promise()},g.stop=function(){var e=this;this._selectInteractions.forEach(function(t){return e.removeInteraction(t)}),this._vectorLayer&&this.getMap().removeLayer(this._vectorLayer),this._vectorLayer=null,this._originalStyle=null,this._selectInteractions=[],this.multipleselectfeatures=[]},t.exports=r},{"../../../interactions/pickfeaturesinteraction":40,"./editingtask":101}],113:[function(e,t,n){function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(l){return void n(l)}return a.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e)}var o=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=g3wsdk.core.utils,s=a.base,l=a.inherit,u=g3wsdk.core.geoutils.splitFeatures,c=g3wsdk.core.layer.features.Feature,d=g3wsdk.gui.GUI,f=e("./editingtask");l(r,f);var p=r.prototype;p.run=function(e,t){var n=this,r=$.Deferred(),o=e.layer,a=e.features,s=o.getEditingLayer().getSource(),l=t.session;return this._snapIteraction=new ol.interaction.Snap({source:s,edge:!0}),this._drawInteraction=new ol.interaction.Draw({type:"LineString",features:new ol.Collection,freehandCondition:ol.events.condition.never}),this._drawInteraction.on("drawend",function(){var o=i(regeneratorRuntime.mark(function s(i){var o,c,f,p,h,v;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:o=i.feature,c=!1,f=u({splitfeature:o,features:a}),p=f.length,h=regeneratorRuntime.mark(function g(i){var r,o,s,u;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r=f[i],o=r.uid,s=r.geometries,!(s.length>1)){d.next=6;break}return c=!0,u=a.find(function(e){return e.getUid()===o}),d.next=6,n._handleSplitFeature({feature:u,context:t,splittedGeometries:s,inputs:e,session:l});case 6:case"end":return d.stop()}},g,n)}),v=0;case 6:if(!(v<p)){s.next=11;break}return s.delegateYield(h(v),"t0",8);case 8:v++,s.next=6;break;case 11:c?(d.showUserMessage({type:"success",message:"plugins.editing.messages.splitted",autoclose:!0}),r.resolve(e)):(d.showUserMessage({type:"warning",message:"plugins.editing.messages.nosplittedfeature",autoclose:!0}),r.reject());case 12:case"end":return s.stop()}},s,n)}));return function(e){return o.apply(this,arguments)}}()),this.addInteraction(this._drawInteraction),this.addInteraction(this._snapIteraction),r.promise()},p._handleSplitFeature=i(regeneratorRuntime.mark(function h(){var e,t,n,i,r,a,s,l,u,d,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=p.feature,g=p.inputs,m=p.context,y=p.splittedGeometries,_=void 0===y?[]:y;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=[],t=g.layer,n=m.session,i=t.getEditingLayer().getSource(),r=t.getId(),a=v.clone(),g.features=_.length?[]:g.features,s=_.length,l=0;case 9:if(!(l<s)){p.next=42;break}if(u=_[l],0!==l){p.next=23;break}return v.setGeometry(u),p.prev=13,p.next=16,this.evaluateExpressionFields({inputs:g,context:m,feature:v});case 16:p.next=20;break;case 18:p.prev=18,p.t0=p["catch"](13);case 20:n.pushUpdate(r,v,a),p.next=38;break;case 23:return d=a.cloneNew(),d.setGeometry(u),this.setNullMediaFields({layer:t,feature:d}),v=new c({feature:d}),v.setTemporaryId(),i.addFeature(v),p.prev=29,p.next=32,this.evaluateExpressionFields({inputs:g,context:m,feature:v});case 32:p.next=36;break;case 34:p.prev=34,p.t1=p["catch"](29);case 36:f=this.getNotEditableFieldsNoPkValues({layer:t,feature:v}),Object.entries(f).length?!function(){var t=n.pushAdd(r,v);Object.entries(f).forEach(function(e){var n=o(e,2),i=n[0],r=n[1];return t.set(i,r)}),e.push(t)}():e.push(n.pushAdd(r,v));case 38:g.features.push(v);case 39:l++,p.next=9;break;case 42:return p.abrupt("return",e);case 43:case"end":return p.stop()}},h,this,[[13,18],[29,34]])})),p.stop=function(){this.removeInteraction(this._drawInteraction),this.removeInteraction(this._snapIteraction),this._drawInteraction=null,this._snapIteraction=null},t.exports=r},{"./editingtask":101}]},{},[39]);