{"version":3,"file":"plugin.js","sources":["plugin.js"],"sourcesContent":["/** START: g3w-client/src/plugins/_version.js */\n(function() {\n  const plugins = window && window.initConfig && window.initConfig.group && window.initConfig.group.plugins;\n  if (plugins) {\n    plugins[\"editing\"] = Object.assign(plugins[\"editing\"] || {},\n      {\n        version : \"3.9.0-alpha.0\",\n        hash    : \"4143958\",\n        branch  : \"dev\",\n      });\n  }\n})();\n/** END: g3w-client/src/plugins/_version.js */\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nvar inserted = exports.cache = {}\n\nfunction noop () {}\n\nexports.insert = function (css) {\n  if (inserted[css]) return noop\n  inserted[css] = true\n\n  var elem = document.createElement('style')\n  elem.setAttribute('type', 'text/css')\n\n  if ('textContent' in elem) {\n    elem.textContent = css\n  } else {\n    elem.styleSheet.cssText = css\n  }\n\n  document.getElementsByTagName('head')[0].appendChild(elem)\n  return function () {\n    document.getElementsByTagName('head')[0].removeChild(elem)\n    inserted[css] = false\n  }\n}\n\n},{}],2:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\"summary[data-v-90b32778]{display:list-item;font-weight:700;padding:.5em;cursor:pointer;background-color:rgba(255,255,0,.25);font-size:medium;user-select:none}ul[data-v-90b32778]{list-style:none;padding-left:0}ul>li[data-v-90b32778]{margin-bottom:8px}ins[data-v-90b32778]{background-color:lime;text-decoration-line:none}del[data-v-90b32778]{background-color:tomato}dl[data-v-90b32778]{display:grid;grid-template:auto/.5fr 1fr;margin-bottom:0;word-break:break-all}dt[data-v-90b32778]{background:#fee}dd[data-v-90b32778]{background:#f1f2f4}dd[data-v-90b32778],dt[data-v-90b32778]{margin:0;padding:.3em .5em;border-top:1px solid #fff}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _areCoordinatesEqual = require('../utils/areCoordinatesEqual');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nexports.default = {\n\n  name: \"changes\",\n\n  props: {\n    commits: {\n      type: Object,\n      required: true\n    },\n    layer: {\n      type: Object,\n      required: true\n    },\n    relation: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data: function data() {\n    return {\n      features: this.layer.readFeatures(),\n      efeatures: this.layer.readEditingFeatures() };\n  },\n\n\n  methods: {\n    getFormattedValue: function getFormattedValue(feat, key) {\n      if (!feat) {\n        return;\n      }\n\n      if ('geometry' === key && feat.get(key)) {\n        return '(' + feat.get(key).getFlatCoordinates().length / 2 + ')';\n      }\n      return (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n        layerId: this.layer.getId(),\n        feature: feat,\n        property: key\n      });\n    },\n    getValue: function getValue(item, key) {\n      return this.getFormattedValue(this.getFeature(item), key);\n    },\n    getEditingValue: function getEditingValue(item, key) {\n      return this.getFormattedValue(this.getEditingFeature(item), key);\n    },\n    hasValue: function hasValue(item, key) {\n      var feat = this.getFeature(item);\n      var efeat = this.getEditingFeature(item);\n      return !(feat && efeat && null === feat.get(key) && null === efeat.get(key) || feat && !efeat && null === feat.get(key));\n    },\n    getId: function getId(item) {\n      return item.id || item;\n    },\n    getEditingFeature: function getEditingFeature(item) {\n      var _this = this;\n\n      return this.efeatures.find(function (f) {\n        return _this.getId(item) === f.getId();\n      });\n    },\n    getFeature: function getFeature(item) {\n      var _this2 = this;\n\n      return this.features.find(function (f) {\n        return _this2.getId(item) === f.getId();\n      });\n    },\n    getType: function getType(item) {\n      var feat = this.getEditingFeature(item) || this.getFeature(item);\n      return feat && feat.getGeometry && feat.getGeometry() ? feat.getGeometry().getType() : '';\n    },\n    isEdited: function isEdited(item, key) {\n      var feat = this.getFeature(item);\n      var efeat = this.getEditingFeature(item);\n      if ([feat, efeat].includes(undefined)) {\n        return false;\n      }\n      if (this.getType(item) && 'geometry' === key) {\n        return !(0, _areCoordinatesEqual.areCoordinatesEqual)({ feature: feat, coordinates: efeat.get(key).getCoordinates() });\n      }\n      return efeat.get(key) !== feat.get(key);\n    },\n    getAttrs: function getAttrs(item) {\n      var feat = this.getEditingFeature(item) || this.getFeature(item);\n      return Object.entries(feat ? feat.getProperties() : {}).sort(function (a, b) {\n        return a[0] > b[0];\n      });\n    },\n    getLayerById: function getLayerById(id) {\n      return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').service.getLayerById(id);\n    }\n  },\n\n  mounted: function () {\n    var _ref = _asyncToGenerator(function* () {\n      this.$refs.value.filter(function (d) {\n        return !d.textContent;\n      }).forEach(function (d) {\n        return d.innerHTML = '<i><code>&lt;empty&gt;</code></i>';\n      });\n    });\n\n    function mounted() {\n      return _ref.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.relation)?_c('h4',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin:pre\",value:('editing.messages.commit.header_relation'),expression:\"'editing.messages.commit.header_relation'\",arg:\"pre\"}],staticClass:\"skin-color g3w-long-text\",staticStyle:{\"font-weight\":\"bold\",\"margin\":\"15px 0\"}},[_vm._v(\": \"+_vm._s(_vm.layer.getName()))]):_vm._e(),_vm._v(\" \"),_vm._l((Object.keys(_vm.commits).filter(function (c) { return _vm.commits[c].length; })),function(c){return [_c('h4',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin:pre\",value:((\"editing.messages.commit.\" + c)),expression:\"`editing.messages.commit.${c}`\",arg:\"pre\"}]},[_vm._v(\" (\"+_vm._s(_vm.commits[c].length)+\") \")]),_vm._v(\" \"),_c('divider'),_vm._v(\" \"),_c('ul',_vm._l((_vm.commits[c]),function(item){return _c('li',[_c('details',[_c('summary',[_vm._v(_vm._s(_vm.getType(item))+\" #\"+_vm._s(_vm.getId(item)))]),_vm._v(\" \"),_vm._l((_vm.getAttrs(item)),function(ref){\nvar key = ref[0];\nvar val = ref[1];\nreturn [(_vm.hasValue(item, key))?_c('dl',[_c('dt',[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"),_c('dd',[(_vm.isEdited(item, key))?[_c('del',{ref:\"value\",refInFor:true},[_vm._v(_vm._s(_vm.getValue(item, key)))]),_vm._v(\" ‚Üê \"),_c('ins',{ref:\"value\",refInFor:true},[_vm._v(_vm._s(_vm.getEditingValue(item, key)))])]:_c('span',{ref:\"value\",refInFor:true},[_vm._v(_vm._s(_vm.getEditingValue(item, key) || _vm.getValue(item, key)))]),_vm._v(\" \"),('geometry' === key)?_c('i',[_c('code',[_vm._v(\"<coords>\")])]):_vm._e()],2)]):_vm._e()]})],2)])}),0)]}),_vm._v(\" \"),_vm._l((Object.entries(_vm.commits.relations)),function(ref){\nvar id = ref[0];\nvar commits = ref[1];\nreturn _c('changes',{attrs:{\"commits\":{\n      add:       commits.add,\n      update:    commits.update,\n      delete:    commits.delete,\n      relations: commits.relations\n    },\"relation\":true,\"layer\":_vm.getLayerById(id)}})})],2)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-90b32778\"\n\n},{\"../utils/areCoordinatesEqual\":31,\"../utils/getFeatureTableFieldValue\":43,\"vueify/lib/insert-css\":1}],3:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".choose-and-zoom-to-feature[data-v-3c5d6465]{display:flex;flex-direction:column;justify-content:space-between}#editing-layers-choose-feature .editing-choose-feature-radio-input[data-v-3c5d6465]{align-items:center;padding:5px;position:relative;display:flex;justify-content:space-between;border-bottom:1px solid #eee}.ztf[data-v-3c5d6465]{padding-left:3px;font-size:1.3em;cursor:pointer;margin-top:10px}.magic-radio+label[data-v-3c5d6465]{color:transparent}.feature-attributes[data-v-3c5d6465]{overflow-x:auto;display:flex}.feature-attributes>div[data-v-3c5d6465]{display:flex;flex-direction:column;justify-content:space-between;padding:5px}.f-attr[data-v-3c5d6465]{font-weight:700;margin-bottom:10px}.f-val[data-v-3c5d6465]{align-self:start;white-space:nowrap}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar GUI = g3wsdk.gui.GUI;\nexports.default = {\n\n  name: 'choosefeature',\n\n  data: function data() {\n    return {\n      feature: this.$options.feature\n    };\n  },\n\n\n  methods: {\n    selectFeature: function selectFeature(feature) {\n      this.feature.splice(0);\n      this.feature.push(feature);\n    },\n    getAttributesFeature: function getAttributesFeature(feature) {\n      var properties = feature.getProperties();\n      return this.$options.attributes.map(function (_ref) {\n        var label = _ref.label,\n            name = _ref.name;\n        return { attribute: label, value: properties[name] };\n      });\n    },\n    zoomToFeature: function zoomToFeature(feature) {\n      GUI.getService('map').zoomToFeatures([feature], { highlight: true, duration: 1000 });\n    }\n  },\n\n  mounted: function mounted() {\n    GUI.closeContent();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editing-layers-choose-feature\"}},_vm._l((_vm.$options.features),function(feature,index){return _c('div',{staticClass:\"editing-choose-feature-radio-input\"},[_c('section',{staticClass:\"choose-and-zoom-to-feature\"},[_c('div',[_c('input',{staticClass:\"magic-radio\",attrs:{\"id\":(\"choose_feature_\" + index),\"name\":\"radio\",\"type\":\"radio\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectFeature(feature)}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"choose_feature_\" + index)}},[_vm._v(\"id\")])]),_vm._v(\" \"),_c('div',{staticClass:\"ztf skin-color\",class:_vm.g3wtemplate.font['marker'],on:{\"click\":function($event){$event.stopPropagation();return _vm.zoomToFeature(feature)}}})]),_vm._v(\" \"),_c('section',{staticClass:\"feature-attributes\"},_vm._l((_vm.getAttributesFeature(feature)),function(ref){\nvar attribute = ref.attribute;\nvar value = ref.value;\nreturn _c('div',[_c('span',{staticClass:\"f-attr\"},[_vm._v(_vm._s(attribute))]),_vm._v(\" \"),_c('span',{staticClass:\"f-val\"},[_vm._v(_vm._s(value))])])}),0)])}),0)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-3c5d6465\"\n\n},{\"vueify/lib/insert-css\":1}],4:[function(require,module,exports){\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar GUI = g3wsdk.gui.GUI;\nexports.default = {\n\n  name: 'Copyfeaturesfromotherlayers',\n\n  data: function data() {\n    return {\n      id: this.$options.layers.find(function (l) {\n        return l.selected;\n      }).id\n    };\n  },\n\n\n  watch: {\n    'id': function id(_id) {\n      this.$options.layers.forEach(function (l) {\n        return l.selected = _id === l.id;\n      });\n    }\n  }\n\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('div',{attrs:{\"id\":\"g3w-select-editable-layers-content\"}},[_c('select',{directives:[{name:\"select2\",rawName:\"v-select2\",value:('id'),expression:\"'id'\"}],attrs:{\"id\":\"g3w-select-editable-layers-to-copy\"}},_vm._l((_vm.$options.layers),function(layer){return _c('option',{key:layer.id,domProps:{\"value\":layer.id}},[_vm._v(_vm._s(layer.name))])}),0)])])}\n__vue__options__.staticRenderFns = []\n\n},{}],5:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-panel .editing-button .editing-icon{background-color:#3a4448;color:#222d32;font-size:1.8em;padding:10px;margin:5px;width:45px;height:45px;border-radius:30%;text-align:center}.g3w-editing-panel .editing-button.enabled .editing-icon{background-color:#fff;box-shadow:0 0 5px rgba(0,0,0,.7)}.g3w-editing-panel .editing-button{cursor:not-allowed}.g3w-editing-panel .editing-button.enabled{cursor:pointer}.g3w-editing-panel .editbtn{border-radius:30%;padding:10px;display:inline-block;opacity:.4;box-shadow:0 1px 1px 0 rgba(0,0,0,.1),0 1px 4px 0 rgba(0,0,0,.3)}.g3w-editing-panel .editbtn.enabled{opacity:1;cursor:pointer}.g3w-editing-panel .editbtn.enabled.toggled{box-shadow:0 0;background-color:#ddd}\\n.g3w-editing-panel[data-v-cb98e6ce]{margin-bottom:50px}#onlineofflinemessage[data-v-cb98e6ce]{margin-bottom:5px;padding:5px;border-radius:3px;background-color:orange;color:#fff;font-weight:700}.commitbar[data-v-cb98e6ce]{display:flex;justify-content:flex-end;margin-bottom:5px}.commitbar>div[data-v-cb98e6ce]:first-of-type{margin-right:auto}#g3w-select-editable-layers-content[data-v-cb98e6ce]{margin-bottom:10px;font-weight:700}#g3w-select-editable-layers-content label[data-v-cb98e6ce]{color:#fff!important}#g3w-select-editable-layers-to-show[data-v-cb98e6ce]{cursor:pointer}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _Toolbox = require('./Toolbox.vue');\n\nvar _Toolbox2 = _interopRequireDefault(_Toolbox);\n\nvar _promisify = require('../utils/promisify');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar GUI = g3wsdk.gui.GUI;\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    ApplicationService = _g3wsdk$core.ApplicationService;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\nexports.default = {\n\n  name: 'Editing',\n\n  data: function data() {\n    return {\n      state: this.$options.service.state,\n      service: this.$options.service,\n      resourcesurl: this.$options.resourcesurl,\n      showcommitbar: this.$options.showcommitbar,\n      saving: false,\n      layersInEditing: 0,\n      editingButtonsEnabled: true,\n\n      selectedlayers: [],\n\n      editinglayers: Object.entries(g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getEditableLayers()).filter(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            _ = _ref2[0],\n            l = _ref2[1];\n\n        return l.config.editing.visible;\n      }).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            id = _ref4[0],\n            layer = _ref4[1];\n\n        return { id: id, name: layer.getName(), title: layer.getTitle() };\n      }),\n\n      activetool: null\n    };\n  },\n\n\n  components: {\n    toolbox: _Toolbox2.default\n  },\n\n  transitions: {\n    'addremovetransition': 'showhide'\n  },\n\n  methods: {\n    updateFilterLayers: function updateFilterLayers() {\n      var layers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (layers.length > 0) {\n        this._selectedlayers = this.selectedlayers;\n        this.selectedlayers = layers;\n      } else {\n        this.selectedlayers = this._selectedlayers;\n        this._selectedlayers = layers;\n      }\n\n      $(this.$refs.selectlayers).val(this.selectedlayers).trigger('change');\n    },\n    updateLayersInEditing: function updateLayersInEditing(bool) {\n      this.layersInEditing += bool ? 1 : -1;\n    },\n    undo: function undo() {\n      if (this.canUndo) {\n        this.service.undo();\n      }\n    },\n    redo: function redo() {\n      if (this.canRedo) {\n        this.service.redo();\n      }\n    },\n    commit: function commit(toolboxId) {\n      var _this = this;\n\n      if (this.canCommit) {\n        this.saving = true;\n        this.service.commit({\n          toolbox: this.service.getToolBoxById(toolboxId),\n          modal: false\n        }).always(function () {\n          return _this.saving = false;\n        });\n      }\n    },\n    startToolBox: function () {\n      var _ref5 = _asyncToGenerator(function* (id) {\n        var _this2 = this;\n\n        var toolbox = this.service.getToolBoxById(id);\n\n        var layerId = ApplicationState.online && toolbox.getDependencies().find(function (id) {\n          return _this2.service.getToolBoxById(id).isDirty();\n        });\n        if (layerId) {\n          yield this.commit_dirty(layerId);\n        }\n        toolbox.start();\n      });\n\n      function startToolBox(_x2) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return startToolBox;\n    }(),\n    stopToolBox: function () {\n      var _ref6 = _asyncToGenerator(function* (id) {\n        var toolbox = this.service.getToolBoxById(id);\n\n        try {\n          if (toolbox.state.editing.history.commit) {\n            yield (0, _promisify.promisify)(this.service.commit());\n          }\n        } catch (e) {\n          console.warn(e);\n        }\n\n        yield toolbox.stop();\n\n        var control = undefined === this.service.getToolBoxes().find(function (t) {\n          return t.state.editing.on;\n        }) && GUI.getService('map').getMapControlByType({ type: 'query' });\n        if (control && !control.isToggled()) {\n          control.toggle();\n        }\n      });\n\n      function stopToolBox(_x3) {\n        return _ref6.apply(this, arguments);\n      }\n\n      return stopToolBox;\n    }(),\n    startTool: function () {\n      var _ref7 = _asyncToGenerator(function* (toolId, toolboxId) {\n        var _this3 = this;\n\n        var toolbox = this.service.getToolBoxById(toolboxId);\n        var enabled = this.activetool && toolboxId === this.activetool;\n\n        if (!enabled && this.service.getToolBoxById(toolbox.getDependencies().find(function (id) {\n          return id === _this3.activetool;\n        }))) {\n          yield this.commit_dirty(this.activetool);\n        }\n\n        if (!enabled) {\n          this.stopTool(this.activetool);\n        }\n\n        this.activetool = toolboxId;\n        toolbox.setActiveTool(toolbox.getToolById(toolId));\n      });\n\n      function startTool(_x4, _x5) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return startTool;\n    }(),\n    stopTool: function stopTool(id) {\n      if (id) {\n        this.service.getToolBoxById(id).stopActiveTool();\n      }\n    },\n    selectToolBox: function () {\n      var _ref8 = _asyncToGenerator(function* (id) {\n        var toolbox = this.service.getToolBoxById(id);\n        var toolboxes = this.service.getToolBoxes();\n        var selected = toolboxes.find(function (t) {\n          return t.isSelected();\n        });\n        if (selected) {\n          selected.setSelected(false);\n          selected.clearMessage();\n        }\n\n        toolbox.setSelected(true);\n\n        this.state.toolboxselected = toolbox;\n      });\n\n      function selectToolBox(_x6) {\n        return _ref8.apply(this, arguments);\n      }\n\n      return selectToolBox;\n    }(),\n    commit_dirty: function () {\n      var _ref9 = _asyncToGenerator(function* (id) {\n        var _this4 = this;\n\n        var toolbox = this.service.getToolBoxById(id);\n\n        try {\n          if (toolbox.isDirty() && toolbox.hasDependencies()) {\n            yield (0, _promisify.promisify)(this.service.commit({ toolbox: toolbox }));\n            console.info('[EDITING] committed dirty');\n          }\n        } catch (e) {\n          try {\n            [layerId].concat(toolbox.getDependencies()).forEach(function (id) {\n              var toolbox = _this4.service.getToolBoxById(id);\n              var editor = toolbox.getEditor();\n\n              editor.getEditingSource().setFeatures((editor.readFeatures() || []).map(function (f) {\n                return f.clone();\n              }));\n\n              toolbox.getSession().getHistory().clear();\n\n              toolbox.stopActiveTool();\n            });\n            console.info('[EDITING] reverted dirty');\n          } catch (e) {\n            console.warn(e);\n          }\n        }\n      });\n\n      function commit_dirty(_x7) {\n        return _ref9.apply(this, arguments);\n      }\n\n      return commit_dirty;\n    }(),\n    _enableEditingButtons: function _enableEditingButtons(bool) {\n      this.editingButtonsEnabled = !bool;\n    },\n    checkOfflineChanges: function checkOfflineChanges() {\n      var _this5 = this;\n\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref10$modal = _ref10.modal,\n          modal = _ref10$modal === undefined ? true : _ref10$modal,\n          _ref10$unlock = _ref10.unlock,\n          unlock = _ref10$unlock === undefined ? false : _ref10$unlock;\n\n      return new Promise(function (resolve, reject) {\n        var changes = JSON.parse(window.localStorage.getItem('EDITING_CHANGES') || null);\n\n        if (!changes) {\n          return;\n        }\n\n        var promises = [];\n        var layerIds = [];\n\n        setTimeout(_asyncToGenerator(function* () {\n          for (var _layerId in changes) {\n            layerIds.push(_layerId);\n            var toolbox = _this5.service.getToolBoxById(_layerId);\n            var commitItems = changes[_layerId];\n            promises.push(_this5.service.commit({ toolbox: toolbox, commitItems: commitItems, modal: modal }));\n          }\n\n          try {\n            yield (0, _promisify.promisify)($.when.apply(_this5.service, promises));\n            resolve();\n          } catch (e) {\n            console.warn(e);\n            reject(e);\n          } finally {\n            if (unlock) {\n              layerIds.forEach(function (layerId) {\n                return _this5.service.getLayerById(layerId).unlock();\n              });\n            }\n\n            try {\n              window.localStorage.setItem('EDITING_CHANGES', \"{}\");\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n        }), 1000);\n      });\n    }\n  },\n\n  computed: {\n    canCommit: function canCommit() {\n      return 'default' === this.state.saveConfig.mode && this.state.toolboxselected && this.state.toolboxselected.state.editing.history.commit && this.editingButtonsEnabled;\n    },\n    canUndo: function canUndo() {\n      var canUndo = this.state.toolboxselected && this.state.toolboxselected.state.editing.history.undo && this.editingButtonsEnabled;\n\n      this.service.fireEvent('canUndo', canUndo);\n\n      return canUndo;\n    },\n    canRedo: function canRedo() {\n      var canRedo = this.state.toolboxselected && this.state.toolboxselected.state.editing.history.redo && this.editingButtonsEnabled;\n\n      this.service.fireEvent('canRedo', canRedo);\n\n      return canRedo;\n    },\n    django_admin_url: function django_admin_url() {\n      return window.initConfig.user.is_superuser ? new URL('/django-admin/editing/g3weditingfeaturelock/', window.initConfig.baseurl) : false;\n    },\n    filemanager_url: function filemanager_url() {\n      return window.initConfig.user.is_superuser ? new URL('/filemanager/', window.initConfig.baseurl) : false;\n    }\n  },\n\n  watch: {\n    canCommit: function canCommit(bool) {\n      window.onbeforeunload = function () {\n        return bool || undefined;\n      };\n    },\n    layersInEditing: function layersInEditing(n) {\n      document.getElementsByClassName('close-pane-button')[0].classList[0 === n ? 'remove' : 'add']('g3w-disabled');\n    },\n    selectedlayers: function selectedlayers() {\n      var layers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      var has_layers = layers.length > 0;\n\n      var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n\n      this.editinglayers.forEach(function (_ref12) {\n        var id = _ref12.id;\n\n        var toolbox = service.getToolBoxById(id);\n        var is_commit = has_layers && toolbox.state.editing.history.commit;\n        var is_selected = layers.includes(id);\n\n        toolbox.setShow(has_layers ? is_selected : true);\n\n        if (has_layers && !is_selected && is_commit) {\n          service.commit({ toolbox: toolbox }).always(function () {\n            return toolbox.stop();\n          });\n        }\n\n        if (has_layers && !is_selected && !is_commit) {\n          toolbox.stop();\n        }\n      });\n    }\n  },\n\n  created: function created() {\n    var _this6 = this;\n\n    this._selectedlayers = [];\n\n    this.appState = ApplicationState;\n\n    this.unByKeys = this.unByKeys || [];\n\n    if (ApplicationState.online) {\n      this.checkOfflineChanges({ unlock: true });\n    }\n\n    this.unByKeys.push({\n      owner: ApplicationService,\n      setter: 'online',\n      key: ApplicationService.onafter('online', function () {\n        return _this6.checkOfflineChanges({ modal: false }).catch(function (e) {\n          return GUI.notify.error(e);\n        });\n      })\n    });\n\n    GUI.closeContent();\n\n    this.state.open = false;\n    CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).forEach(function (l) {\n      return l.setInEditing(true);\n    });\n\n    GUI.on('opencontent', this._enableEditingButtons);\n    GUI.on('closeform', this._enableEditingButtons);\n    GUI.on('closecontent', this._enableEditingButtons);\n  },\n  beforeDestroy: function () {\n    var _ref13 = _asyncToGenerator(function* () {\n      var _this7 = this;\n\n      this.service.stop();\n\n      this.state.open = false;\n      CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).forEach(function (l) {\n        return l.setInEditing(false);\n      });\n\n      GUI.off('opencontent', this._enableEditingButtons);\n      GUI.off('closeform', this._enableEditingButtons);\n      GUI.off('closecontent', this._enableEditingButtons);\n\n      this.unByKeys.forEach(function (_ref14) {\n        var owner = _ref14.owner,\n            setter = _ref14.setter,\n            key = _ref14.key;\n        return owner.un(setter, key);\n      });\n\n      this.service.fireEvent('closeeditingpanel');\n\n      var layerIdChanges = Object.keys(this.state.featuresOnClose);\n      if (layerIdChanges.length) {\n        var inputs = {\n          layers: [],\n          fids: [],\n          formatter: 1\n        };\n        layerIdChanges.forEach(function (id) {\n          var fids = [].concat(_toConsumableArray(_this7.state.featuresOnClose[id]));\n          if (fids.length > 0) {\n            var layer = CatalogLayersStoresRegistry.getLayerById(id);\n            inputs.layers.push(layer);\n            inputs.fids.push(fids);\n          }\n        });\n\n        var promise = inputs.layers.length ? DataRouterService.getData('search:layersfids', {\n          inputs: inputs,\n          outputs: {\n            title: 'plugins.editing.editing_changes',\n            show: { loading: false }\n          }\n        }) : Promise.resolve();\n        try {\n          yield promise;\n        } catch (e) {\n          console.warn(e);\n        }\n      }\n\n      this.state.featuresOnClose = {};\n\n      this.service.getToolBoxes().forEach(function (t) {\n        return t.resetDefault();\n      });\n\n      var control = GUI.getService('map').getMapControlByType({ type: 'query' });\n      if (control && !control.isToggled()) {\n        control.toggle();\n      }\n    });\n\n    function beforeDestroy() {\n      return _ref13.apply(this, arguments);\n    }\n\n    return beforeDestroy;\n  }()\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g3w-editing-panel\"},[_c('bar-loader',{attrs:{\"loading\":_vm.saving}}),_vm._v(\" \"),(_vm.layersInEditing > 0)?_c('helpdiv',{staticStyle:{\"font-weight\":\"bold\"},attrs:{\"message\":\"plugins.editing.close_editing_panel.message\"}}):_vm._e(),_vm._v(\" \"),(!_vm.appState.online)?_c('div',{attrs:{\"id\":\"onlineofflinemessage\"}},[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.messages.offline'),expression:\"'editing.messages.offline'\"}]})]):_vm._e(),_vm._v(\" \"),(_vm.showcommitbar)?_c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.saving),expression:\"saving\"}],staticClass:\"commitbar\"},[_c('div',{class:['editing-button', (_vm.canCommit ? 'enabled' : '')],on:{\"click\":function($event){$event.stopPropagation();return _vm.commit($event)}}},[_c('span',{class:['editing-icon', _vm.g3wtemplate.font['save']]})]),_vm._v(\" \"),_c('div',{class:['editing-button', (_vm.canUndo ? 'enabled': '')],on:{\"click\":function($event){$event.stopPropagation();return _vm.undo($event)}}},[_c('span',{class:['editing-icon', _vm.g3wtemplate.font['arrow-left']]})]),_vm._v(\" \"),_c('div',{class:['editing-button', (_vm.canRedo ? 'enabled' : '')],on:{\"click\":function($event){$event.stopPropagation();return _vm.redo($event)}}},[_c('span',{class:['editing-icon', _vm.g3wtemplate.font['arrow-right']]})])]):_c('div',{staticStyle:{\"height\":\"10px\"}}),_vm._v(\" \"),(_vm.state.showselectlayers && _vm.editinglayers.length > 1)?_c('div',{staticClass:\"skin-color\",attrs:{\"id\":\"g3w-select-editable-layers-content\"}},[_c('label',{directives:[{name:\"t\",rawName:\"v-t\",value:('Layers'),expression:\"'Layers'\"}],attrs:{\"for\":\"g3w-select-editable-layers-to-show\"}}),_vm._v(\" \"),_c('select',{directives:[{name:\"select2\",rawName:\"v-select2\",value:('selectedlayers'),expression:\"'selectedlayers'\"}],ref:\"selectlayers\",attrs:{\"id\":\"g3w-select-editable-layers-to-show\",\"multiple\":true,\"clear\":true}},_vm._l((_vm.editinglayers),function(editinglayer){return _c('option',{key:editinglayer.id,domProps:{\"value\":editinglayer.id}},[_vm._v(_vm._s(editinglayer.name))])}),0)]):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"toolboxes\"}},_vm._l((_vm.state.toolboxes),function(toolbox){return _c('toolbox',{key:toolbox.id,attrs:{\"state\":toolbox,\"resourcesurl\":_vm.resourcesurl},on:{\"setselectedtoolbox\":_vm.selectToolBox,\"starttoolbox\":_vm.startToolBox,\"stoptoolbox\":_vm.stopToolBox,\"setactivetool\":_vm.startTool,\"stopactivetool\":_vm.stopTool,\"on-editing\":_vm.updateLayersInEditing,\"update-filter-layers\":_vm.updateFilterLayers}})}),1),_vm._v(\" \"),(_vm.django_admin_url)?_c('p',[_c('a',{attrs:{\"href\":_vm.django_admin_url,\"target\":\"_blank\"}},[_vm._v(\"üîí Locked features\")])]):_vm._e(),_vm._v(\" \"),(_vm.filemanager_url)?_c('p',[_c('a',{attrs:{\"href\":_vm.filemanager_url,\"target\":\"_blank\"}},[_vm._v(\"üìÇ File manager\")])]):_vm._e()],1)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-cb98e6ce\"\n\n},{\"../utils/promisify\":58,\"./Toolbox.vue\":8,\"vueify/lib/insert-css\":1}],6:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-new-relation-vector-type[data-v-112912af]{margin-bottom:5px;font-weight:700}.relation_header_title[data-v-112912af]{font-weight:700;font-size:1.3em;align-items:center}.relation_header_title[data-v-112912af],.relation_header_tools[data-v-112912af]{width:100%;display:flex;background-color:#fff}.g3w-editing-relations-add-link-tools[data-v-112912af]{display:flex;justify-content:flex-end}.relation_vector_tools[data-v-112912af]{display:flex;flex-direction:column;border:2px solid #eee;background-color:#fff;padding:10px}#g3w-select-editable-layers-content[data-v-112912af]{flex-grow:1;display:flex;flex-direction:column}#search-box[data-v-112912af]{margin-right:auto}.relation_body[data-v-112912af]{padding:0}.g3wform-relation-table[data-v-112912af]{width:100%}.close_vector_relation_tool[data-v-112912af]{align-self:self-end}.close_vector_relation_tool>.g3w-icon[data-v-112912af]{font-weight:700;cursor:pointer}.divider[data-v-112912af]{display:block;position:relative;padding:0;margin-bottom:5px;height:0;width:100%;max-height:0;font-size:1px;line-height:0;clear:both;border:none;border-bottom:2px solid #eee}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _workflow2 = require('../g3wsdk/workflow/workflow');\n\nvar _step = require('../g3wsdk/workflow/step');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('../utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _promisify = require('../utils/promisify');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _convertToGeometry = require('../utils/convertToGeometry');\n\nvar _addTableFeature = require('../utils/addTableFeature');\n\nvar _updateWorkflows = require('../utils/updateWorkflows');\n\nvar _getRelationId = require('../utils/getRelationId');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _isSameBaseGeometryType = require('../utils/isSameBaseGeometryType');\n\nvar _pickfeaturesinteraction = require('../interactions/pickfeaturesinteraction');\n\nvar _eventbus = require('../eventbus');\n\nvar _workflows = require('../workflows');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar ProjectsRegistry = g3wsdk.core.project.ProjectsRegistry;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\nvar Geometry = g3wsdk.core.geoutils.Geometry;\nvar t = g3wsdk.core.i18n.tPlugin;\nvar Layer = g3wsdk.core.layer.Layer;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar toRawType = g3wsdk.core.utils.toRawType;\nvar GUI = g3wsdk.gui.GUI;\nvar FormService = g3wsdk.gui.vue.services.FormService;\nvar _g3wsdk$gui$vue$Mixin = g3wsdk.gui.vue.Mixins,\n    fieldsMixin = _g3wsdk$gui$vue$Mixin.fieldsMixin,\n    resizeMixin = _g3wsdk$gui$vue$Mixin.resizeMixin,\n    mediaMixin = _g3wsdk$gui$vue$Mixin.mediaMixin;\nvar _g3wsdk$ol$interactio = g3wsdk.ol.interactions,\n    PickFeatureInteraction = _g3wsdk$ol$interactio.PickFeatureInteraction,\n    PickCoordinatesInteraction = _g3wsdk$ol$interactio.PickCoordinatesInteraction;\n\n\nObject.entries({\n  Workflow: _workflow2.Workflow,\n  Step: _step.Step,\n  OpenFormStep: _workflows.OpenFormStep,\n  OpenTableStep: _workflows.OpenTableStep,\n  AddFeatureStep: _workflows.AddFeatureStep,\n  ModifyGeometryVertexStep: _workflows.ModifyGeometryVertexStep,\n  MoveFeatureStep: _workflows.MoveFeatureStep\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nvar color = 'rgb(255,89,0)';\n\nvar SELECTED_STYLES = {\n  'Point': new ol.style.Style({ image: new ol.style.Circle({ radius: 8, fill: new ol.style.Fill({ color: color }) }) }),\n  'MultiPoint': new ol.style.Style({ image: new ol.style.Circle({ radius: 8, fill: new ol.style.Fill({ color: color }) }) }),\n  'Linestring': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }) }),\n  'MultiLinestring': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }) }),\n  'Polygon': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }), fill: new ol.style.Fill({ color: color }) }),\n  'MultiPolygon': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }), fill: new ol.style.Fill({ color: color }) })\n};\n\nexports.default = {\n\n  mixins: [mediaMixin, fieldsMixin, resizeMixin],\n\n  name: 'g3w-relation',\n\n  data: function data() {\n    return {\n      loading: false,\n      show_vector_tools: false,\n      disabled: false,\n      copylayerid: null,\n      copyFeatureLayers: [],\n      active: false,\n      value: null,\n      placeholdersearch: t('editing.search') + ' ...',\n      resourcesurl: GUI.getResourcesUrl()\n    };\n  },\n\n\n  methods: {\n    resize: function resize() {\n      if (!(this.active && 'none' !== this.$el.style.display)) {\n        return;\n      }\n\n      var table = this.$refs.relation_body.querySelector('div.dataTables_scrollBody');\n\n      if (table) {\n        table.style.height = ((document.querySelector('.g3wform_body') || {}).offsetHeight || 0) - ((document.querySelector('.g3wform_footer') || {}).offsetHeight || 0) - ((this.$refs.relation_header_title || {}).offsetHeight || 0) - ((this.$refs.relation_header_tools || {}).offsetHeight || 0) - ((this.$el.querySelector('.dataTables_scrollHead') || {}).offsetHeight || 0) - ((this.$el.querySelector('.dataTables_paginate.paging_simple_numbers') || {}).offsetHeight || 0) - ((document.querySelector('.editing-save-all-form') || {}).offsetHeight || 0) - ((this.isVectorRelation && this.show_vector_tools && this.$refs.relation_vector_tools || {}).offsetHeight || 0) + 'px';\n      }\n\n      if (this.relationsTable) {\n        this.relationsTable.columns.adjust();\n      }\n    },\n    copyFeatureFromOtherLayer: function copyFeatureFromOtherLayer() {\n      var _this = this;\n\n      var copyLayer = this.copyFeatureLayers.find(function (l) {\n        return _this.copylayerid === l.id;\n      });\n      var external = copyLayer.external;\n      var layer = external ? GUI.getService('map').getLayerById(this.copylayerid) : CatalogLayersStoresRegistry.getLayerById(this.copylayerid);\n      var is_vector = external || layer.isGeoLayer();\n      this.runAddRelationWorkflow({\n        workflow: is_vector ? new this._add_link_workflow.selectandcopy({\n          copyLayer: layer,\n          isVector: true,\n          help: 'editing.steps.help.copy',\n          external: external\n        }) : undefined,\n        isVector: is_vector\n      });\n    },\n    closeVectorTools: function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        this.show_vector_tools = false;\n        yield this.$nextTick();\n        this.resize();\n      });\n\n      function closeVectorTools() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return closeVectorTools;\n    }(),\n    addVectorRelation: function addVectorRelation() {\n      this.runAddRelationWorkflow({\n        workflow: new this._add_link_workflow.add(),\n        isVector: Layer.LayerTypes.VECTOR === this._layerType\n      });\n      this.show_vector_tools = false;\n    },\n    updateSelectRelations: function updateSelectRelations() {\n      var bool = !this.selectall || !this.relations.some(function (r) {\n        return r.select;\n      });\n      this.relations.forEach(function (r) {\n        return r.select = bool;\n      });\n    },\n    editAttributesRelations: function () {\n      var _ref4 = _asyncToGenerator(function* () {\n        var _this2 = this;\n\n        var workflow = new _workflow2.Workflow({\n          type: 'editmultiattributes',\n          steps: [new _workflows.OpenFormStep({ multi: true })]\n        });\n        var options = this._createWorkflowOptions({\n          features: this.relations.filter(function (r) {\n            return r.select;\n          }).map(function (_ref5) {\n            var id = _ref5.id;\n            return _this2.getLayer().getEditingSource().getFeatureById(id);\n          })\n        });\n        try {\n          yield (0, _promisify.promisify)(workflow.start(options));\n        } catch (e) {\n          console.warn(e);\n        }\n\n        workflow.stop();\n      });\n\n      function editAttributesRelations() {\n        return _ref4.apply(this, arguments);\n      }\n\n      return editAttributesRelations;\n    }(),\n    addRelationAndLink: function () {\n      var _ref6 = _asyncToGenerator(function* () {\n        if (this.isVectorRelation) {\n          this.show_vector_tools = !this.show_vector_tools;\n          yield this.$nextTick();\n          this.resize();\n        } else {\n          this.runAddRelationWorkflow({\n            workflow: new this._add_link_workflow.add(),\n            isVector: Layer.LayerTypes.VECTOR === this._layerType\n          });\n        }\n      });\n\n      function addRelationAndLink() {\n        return _ref6.apply(this, arguments);\n      }\n\n      return addRelationAndLink;\n    }(),\n    relationAttributesSubset: function relationAttributesSubset(relation) {\n      return relation.fields.map(function (_ref7) {\n        var label = _ref7.label,\n            name = _ref7.name,\n            value = _ref7.value;\n        return { name: name, label: label, value: value };\n      }).flatMap(function (_ref8) {\n        var name = _ref8.name,\n            label = _ref8.label,\n            value = _ref8.value;\n        return Array.isArray(value) ? [] : [{ name: name, label: label, value: value }];\n      });\n    },\n    getValue: function getValue(value) {\n      if (value && 'Object' === toRawType(value)) {\n        value = value.value;\n      } else if ('string' == typeof value && 0 === value.indexOf('_new_')) {\n        value = null;\n      }\n      this.value = value;\n      return value;\n    },\n    _createDataTable: function _createDataTable() {\n      var _this3 = this;\n\n      this.relationsTable = $(this.$refs.relationTable).DataTable({\n        autoWidth: false,\n        columnDefs: [{ orderable: false, targets: [0, 1] }],\n        destroy: true,\n        order: [2, 'asc'],\n        pageLength: 10,\n        responsive: true,\n        scrollCollapse: true,\n        scrollResize: true,\n        scrollX: true\n      });\n\n      $(\".dataTables_filter, .dataTables_length\").hide();\n\n      $('#filterRelation').on('keyup', function (e) {\n        return _this3.relationsTable.search(e.target.value).draw();\n      });\n    },\n    destroyTable: function destroyTable() {\n      if (this.relationsTable) {\n        this.relationsTable = this.relationsTable.destroy();\n        this.relationsTable = null;\n        $('#filterRelation').off();\n      }\n    },\n    updateTable: function () {\n      var _ref9 = _asyncToGenerator(function* () {\n        var _this4 = this;\n\n        this.destroyTable();\n        yield this.$nextTick();\n        this._createDataTable();\n        setTimeout(function () {\n          return _this4.resize();\n        });\n      });\n\n      function updateTable() {\n        return _ref9.apply(this, arguments);\n      }\n\n      return updateTable;\n    }(),\n    updateNewRelationId: function updateNewRelationId() {\n      var _this5 = this;\n\n      this._new_relations_ids.forEach(function (_ref10) {\n        var clientid = _ref10.clientid,\n            id = _ref10.id;\n\n        var newrelation = _this5.relations.find(function (r) {\n          return clientid === r.id;\n        });\n        if (newrelation) {\n          newrelation.id = id;\n\n          (_this5.tools.find(function (ts) {\n            return ts.find(function (t) {\n              return t.state.id.split(clientid + '_').length > 1;\n            });\n          }) || []).forEach(function (t) {\n            return t.state.id = t.state.id.replace(clientid + '_', id + '_');\n          });\n        }\n      });\n    },\n    onCommit: function onCommit(_ref11) {\n      var _ref11$new_relations = _ref11.new_relations,\n          new_relations = _ref11$new_relations === undefined ? {} : _ref11$new_relations;\n\n      var relationLayer = (0, _getEditingLayerById.getEditingLayerById)(this.relation.child);\n\n      if (new_relations[relationLayer.getId()] && Array.isArray(new_relations[relationLayer.getId()].new)) {\n        this._new_relations_ids = [].concat(_toConsumableArray(this._new_relations_ids || []), _toConsumableArray(new_relations[relationLayer.getId()].new.map(function (_ref12) {\n          var clientid = _ref12.clientid,\n              id = _ref12.id;\n          return { clientid: clientid, id: id };\n        })));\n      }\n    },\n    getRelationFeatureValue: function getRelationFeatureValue(featureId, property) {\n      return (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n        layerId: this._relationLayerId,\n        feature: this.getLayer().getEditingSource().getFeatureById(featureId),\n        property: property\n      });\n    },\n    enableDOMElements: function enableDOMElements() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      document.querySelectorAll('.editing-save-all-form').forEach(function (c) {\n        if (bool && c.classList.contains('g3w-disabled')) {\n          c.classList.remove('g3w-disabled');\n        }\n        if (!bool && !c.querySelector('.save-all-icon').classList.contains('g3w-disabled')) {\n          c.classList.add('g3w-disabled');\n        }\n      });\n      document.querySelectorAll('.g3w-editing-relations-add-link-tools, .g3wform_footer').forEach(function (c) {\n        return c.classList.toggle('g3w-disabled', !bool);\n      });\n    },\n    addTools: function addTools(id) {\n      var _this6 = this;\n\n      var tools = [this.capabilities.includes('change_attr_feature') && {\n        state: Vue.observable({\n          icon: 'editAttributes.png',\n          id: id + '_editattributes',\n          name: 'editing.tools.update_feature',\n          enabled: true,\n          active: false\n        }),\n        type: 'editfeatureattributes'\n      }, this.capabilities.includes('delete_feature') && {\n        state: Vue.observable({\n          icon: 'deleteTableRow.png',\n          id: id + '_deletefeature',\n          name: 'editing.tools.delete_feature',\n          enabled: true,\n          active: false\n        }),\n        type: 'deletefeature'\n      }, this.capabilities.includes('change_feature') && Layer.LayerTypes.VECTOR === this._layerType && g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getToolBoxById(this._relationLayerId).getTools().filter(function (t) {\n        return Geometry.isPointGeometryType(_this6.getLayer().getGeometryType()) ? 'movefeature' === t.getId() : ['movefeature', 'movevertex'].includes(t.getId());\n      }).map(function (tool) {\n        return {\n          state: Vue.observable(_extends({}, tool, { id: id + '_' + tool.id })),\n          type: tool.getOperator().type\n        };\n      })].flat().filter(Boolean);\n\n      this.tools.push(tools);\n      return tools;\n    },\n    startTool: function () {\n      var _ref13 = _asyncToGenerator(function* (relationtool, index) {\n        var _this7 = this;\n\n        try {\n          relationtool.state.active = !relationtool.state.active;\n\n          if (!relationtool.state.active) {\n            return Promise.resolve();\n          }\n\n          this.tools.forEach(function (tools) {\n            tools.forEach(function (t) {\n              if (relationtool.state.id !== t.state.id) {\n                t.state.active = false;\n              }\n            });\n          });\n\n          yield _eventbus.VM.$nextTick();\n\n          var d = {};\n          var promise = new Promise(function (resolve, reject) {\n            Object.assign(d, { resolve: resolve, reject: reject });\n          });\n\n          var is_vector = Layer.LayerTypes.VECTOR === this._layerType;\n          var relation = this.relations[index];\n          var toolId = relationtool.state.id.split(relation.id + '_')[1];\n          var relationfeature = this.getLayer().getEditingSource().getFeatureById(relation.id);\n          var selectStyle = is_vector && SELECTED_STYLES[this.getLayer().getGeometryType()];\n          var options = this._createWorkflowOptions({ features: [relationfeature] });\n\n          if ('deletefeature' === toolId) {\n\n            (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: promise, inputs: { features: [relationfeature], layer: this.getLayer() }, style: selectStyle });\n\n            GUI.dialog.confirm(t(\"editing.messages.delete_feature\"), function (res) {\n              if (res) {\n                _workflow2.Workflow.Stack.getCurrent().getSession().pushDelete(_this7._relationLayerId, relationfeature);\n\n                _this7.relations.splice(index, 1);\n\n                _this7.tools.splice(index, 1);\n\n                var unique_fields = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[_this7._relationLayerId];\n\n                if (undefined !== unique_fields) {\n                  Object.keys(relationfeature.getProperties()).filter(function (p) {\n                    return undefined !== unique_fields[p];\n                  }).forEach(function (p) {\n                    var values = new Set(unique_fields[p]);\n\n                    values.delete(relationfeature.get(p));\n                  });\n                }\n\n                _this7.getLayer().getEditingSource().removeFeature(relationfeature);\n\n                if (relationfeature.isNew() && undefined === _workflow2.Workflow.Stack._workflows.find(function (w) {\n                  return w.getSession().state.changes.filter(function (_ref14) {\n                    var feature = _ref14.feature;\n                    return relationfeature.getUid() !== feature.getUid();\n                  }).length > 0;\n                })) {\n                  _workflow2.Workflow.Stack._workflows.filter(function (w) {\n                    return w.getContextService() instanceof FormService;\n                  }).forEach(function (w) {\n                    return setTimeout(function () {\n                      return w.getContextService().state.update = false;\n                    });\n                  });\n                } else {\n                  (0, _updateWorkflows.updateWorkflows)();\n                }\n\n                d.resolve(res);\n              }\n\n              if (!res) {\n                d.reject();\n              }\n            });\n          }\n\n          if ('editattributes' === toolId) {\n            var workflow = new _workflow2.Workflow({ type: 'edittablefeature', steps: [new _workflows.OpenFormStep({ selectStyle: selectStyle })] });\n\n            try {\n              yield (0, _promisify.promisify)(workflow.start(options));\n\n              this.getLayer().getFieldsWithValues(relationfeature, { relation: true }).forEach(function (f) {\n                relation.fields.forEach(function (rf) {\n                  if (rf.name === f.name) {\n                    rf.value = f.value;\n                  }\n                });\n              });\n              d.resolve(true);\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n\n            workflow.stop();\n          }\n\n          if (['movevertex', 'movefeature'].includes(toolId) && this.currentRelationFeatureId !== relationfeature.getId()) {\n            this.currentRelationFeatureId = relationfeature.getId();\n            GUI.getService('map').zoomToFeatures([relationfeature]);\n          }\n\n          if (['movevertex', 'movefeature'].includes(toolId)) {\n            GUI.setModal(false);\n            this.enableDOMElements(false);\n            var _workflow = new _workflow2.Workflow({\n              type: relationtool.type,\n              steps: [new {\n                'movevertex': _workflows.ModifyGeometryVertexStep,\n                'movefeature': _workflows.MoveFeatureStep\n              }[toolId]({ selectStyle: selectStyle })]\n            });\n\n            var unwatch = _eventbus.VM.$watch(function () {\n              return relationtool.state.active;\n            }, function (bool) {\n              if (!bool) {\n                _this7.enableDOMElements(true);\n                GUI.setModal(true);\n                _workflow.unbindEscKeyUp();\n                _workflow.stop();\n                unwatch();\n                d.reject(false);\n              }\n            });\n\n            _workflow.bindEscKeyUp(function () {\n              GUI.setModal(true);\n              unwatch();\n              d.reject(false);\n            });\n\n            try {\n              yield (0, _promisify.promisify)(_workflow.start(options));\n\n              _workflow2.Workflow.Stack.getParents().filter(function (w) {\n                return w.getContextService().setUpdate;\n              }).forEach(function (w) {\n                return w.getContextService().setUpdate(true, { force: true });\n              });\n              d.resolve(true);\n              setTimeout(function () {\n                return _this7.startTool(relationtool, index);\n              });\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n\n            _workflow.unbindEscKeyUp();\n            _workflow.stop();\n            unwatch();\n          }\n\n          try {\n            yield promise;\n          } catch (e) {\n            console.trace('START TOOL FAILED', e);\n            return Promise.reject(e);\n          } finally {\n            relationtool.state.active = false;\n          }\n        } catch (e) {\n          console.warn(e);\n        }\n      });\n\n      function startTool(_x2, _x3) {\n        return _ref13.apply(this, arguments);\n      }\n\n      return startTool;\n    }(),\n    getLayer: function getLayer() {\n      return (0, _getEditingLayerById.getEditingLayerById)(this._relationLayerId);\n    },\n    runAddRelationWorkflow: function () {\n      var _ref15 = _asyncToGenerator(function* () {\n        var _this8 = this;\n\n        var _ref16 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            workflow = _ref16.workflow,\n            _ref16$isVector = _ref16.isVector,\n            isVector = _ref16$isVector === undefined ? false : _ref16$isVector;\n\n        if (isVector) {\n          GUI.setModal(false);\n          GUI.hideContent(true);\n        }\n\n        var options = this._createWorkflowOptions();\n\n        var _options$context = options.context,\n            fatherField = _options$context.fatherField,\n            fatherValue = _options$context.fatherValue;\n\n        var _getRelationFieldsFro = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n          layerId: this._relationLayerId,\n          relation: this.relation\n        }),\n            relationField = _getRelationFieldsFro.relationField;\n\n        try {\n          var _relations;\n\n          var outputs = yield (0, _promisify.promisify)(workflow.start(options));\n\n          if (isVector) {\n            workflow.bindEscKeyUp();\n          }\n\n          var _outputs$relationFeat = outputs.relationFeatures,\n              newFeatures = _outputs$relationFeat.newFeatures,\n              originalFeatures = _outputs$relationFeat.originalFeatures;\n\n          var setRelationFieldValue = function setRelationFieldValue(_ref17) {\n            var field = _ref17.field,\n                value = _ref17.value;\n\n            newFeatures.forEach(function (newFeature, i) {\n              newFeature.set(field, value);\n              if (options.parentFeature.isNew()) {\n                originalFeatures[i].set(field, value);\n              }\n              _this8.getLayer().getEditingSource().updateFeature(newFeature);\n              options.context.session.pushUpdate(_this8._relationLayerId, newFeature, originalFeatures[i]);\n            });\n          };\n          fatherField.forEach(function (field, i) {\n            return setRelationFieldValue({ field: field, value: fatherValue[i] });\n          });\n\n          if (options.parentFeature.isNew() && this.getParent().editable.length > 0) {\n            var keyRelationFeatureChange = options.parentFeature.on('propertychange', function (evt) {\n              if (options.parentFeature.isNew()) {\n                if (relationField.find(evt.key)) {\n                  setRelationFieldValue({\n                    field: evt.key,\n                    value: evt.target.get(evt.key)\n                  });\n                }\n              } else {\n                ol.Observable.unByKey(keyRelationFeatureChange);\n              }\n            });\n          }\n\n          (_relations = this.relations).push.apply(_relations, _toConsumableArray((newFeatures || []).map(function (f) {\n            return { id: f.getId(), fields: _this8.getLayer().getFieldsWithValues(f, { relation: true }) };\n          })));\n        } catch (inputs) {\n          console.warn(inputs);\n\n          if (inputs && inputs.relationFeatures) {\n            var _relations2;\n\n            (_relations2 = this.relations).push.apply(_relations2, _toConsumableArray((inputs.relationFeatures.newFeatures || []).map(function (f) {\n              return { id: f.getId(), fields: _this8.getLayer().getFieldsWithValues(f, { relation: true }) };\n            })));\n          }\n\n          options.context.session.rollbackDependecies([this._relationLayerId]);\n        }\n\n        workflow.stop();\n\n        if (isVector) {\n          workflow.unbindEscKeyUp();\n          GUI.hideContent(false);\n          GUI.setModal(true);\n\n          setTimeout(function () {\n            return _this8.resize();\n          });\n        }\n      });\n\n      function runAddRelationWorkflow() {\n        return _ref15.apply(this, arguments);\n      }\n\n      return runAddRelationWorkflow;\n    }(),\n    linkRelation: function () {\n      var _ref18 = _asyncToGenerator(function* () {\n        var _this9 = this;\n\n        this.disabled = true;\n\n        var is_vector = Layer.LayerTypes.VECTOR === this._layerType;\n        var workflow = new this._add_link_workflow.link(is_vector ? {\n          selectStyle: SELECTED_STYLES[this.getLayer().getGeometryType()]\n        } : {});\n        var options = this._createWorkflowOptions();\n\n        var _getRelationFieldsFro2 = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n          layerId: this._relationLayerId,\n          relation: this.relation\n        }),\n            ownField = _getRelationFieldsFro2.ownField,\n            relationField = _getRelationFieldsFro2.relationField;\n\n        options.context.excludeFeatures = relationField.reduce(function (accumulator, rField, index) {\n          accumulator[ownField[index]] = _this9.getParent().values[rField];\n          return accumulator;\n        }, {});\n\n        if (is_vector) {\n          GUI.setModal(false);\n        }\n\n        var feature = _workflow2.Workflow.Stack.getCurrent().getCurrentFeature();\n\n        var getRelationFeatures = function getRelationFeatures() {\n          return (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(_this9.layerId, {\n            relations: [_this9.relation],\n            feature: feature,\n            operator: 'not',\n            filterType: is_vector ? 'bbox' : 'fid'\n          });\n        };\n\n        var response = {\n          promise: undefined,\n          showContent: false\n        };\n\n        if (is_vector) {\n          options.context.beforeRun = _asyncToGenerator(function* () {\n            yield new Promise(function (resolve) {\n              return setTimeout(resolve);\n            });\n            yield getRelationFeatures();\n          });\n\n          workflow.bindEscKeyUp();\n\n          response = {\n            promise: workflow.start(options),\n            showContent: true\n          };\n\n          this.enableDOMElements(false);\n        } else {\n          yield getRelationFeatures();\n        }\n\n        var linked = false;\n\n        try {\n          var outputs = yield (0, _promisify.promisify)(response.promise || workflow.start(options));\n\n          (outputs.features || []).forEach(function (relation) {\n            if (undefined === _this9.relations.find(function (rel) {\n              return rel.id === relation.getId();\n            })) {\n              linked = linked || true;\n              var originalRelation = relation.clone();\n              Object.entries(_this9.getParent().values).forEach(function (_ref20) {\n                var _ref21 = _slicedToArray(_ref20, 2),\n                    field = _ref21[0],\n                    value = _ref21[1];\n\n                relation.set(ownField[relationField.findIndex(function (rF) {\n                  return field === rF;\n                })], value);\n              });\n              _workflow2.Workflow.Stack.getCurrent().getSession().pushUpdate(_this9._relationLayerId, relation, originalRelation);\n              _this9.relations.push({\n                fields: _this9.getLayer().getFieldsWithValues(relation, { relation: true }),\n                id: relation.getId()\n              });\n            } else {\n              GUI.notify.warning(t(\"editing.relation_already_added\"));\n            }\n          });\n        } catch (e) {\n          console.warn(e);\n          options.context.session.rollbackDependecies([this._relationLayerId]);\n        }\n\n        if (is_vector) {\n          this.enableDOMElements(true);\n        }\n\n        if (response.showContent) {\n          GUI.closeUserMessage();\n          workflow.unbindEscKeyUp();\n        }\n\n        if (linked) {\n          (0, _updateWorkflows.updateWorkflows)();\n        }\n\n        workflow.stop();\n\n        this.disabled = false;\n      });\n\n      function linkRelation() {\n        return _ref18.apply(this, arguments);\n      }\n\n      return linkRelation;\n    }(),\n    unlinkRelation: function (_unlinkRelation) {\n      function unlinkRelation(_x6) {\n        return _unlinkRelation.apply(this, arguments);\n      }\n\n      unlinkRelation.toString = function () {\n        return _unlinkRelation.toString();\n      };\n\n      return unlinkRelation;\n    }(function (index) {\n      var dialog = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      return unlinkRelation({\n        layerId: this.layerId,\n        relation: this.relation,\n        relations: this.relations,\n        index: index,\n        dialog: dialog\n      });\n    }),\n    getParent: function getParent() {\n      var parentLayer = _workflow2.Workflow.Stack.getCurrent().getLayer();\n\n      var _getRelationFieldsFro3 = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: this.layerId, relation: this.relation }),\n          ownField = _getRelationFieldsFro3.ownField;\n\n      var pk = ownField.find(function (f) {\n        return parentLayer.isPkField(f);\n      });\n\n      return {\n        editable: ownField.filter(function (f) {\n          return parentLayer.isEditingFieldEditable(f);\n        }),\n\n        pk: pk,\n\n        values: ownField.reduce(function (father, field) {\n          var feature = _workflow2.Workflow.Stack.getCurrent().getCurrentFeature();\n\n          var fields = _workflow2.Workflow.Stack.getCurrent().getInputs().fields;\n          return Object.assign(father, _defineProperty({}, field, pk === field && feature.isNew() ? feature.getId() : fields ? fields.find(function (f) {\n            return field === f.name;\n          }).value : feature.get(field)));\n        }, {})\n      };\n    },\n    _createWorkflowOptions: function _createWorkflowOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var fields = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n        layerId: this._relationLayerId,\n        relation: this.relation\n      });\n      var parent = Object.entries(this.getParent().values);\n      return {\n        parentFeature: _workflow2.Workflow.Stack.getCurrent().getCurrentFeature(),\n        context: {\n          session: _workflow2.Workflow.Stack.getCurrent().getSession(),\n          excludeFields: fields.ownField,\n          fatherValue: parent.map(function (_ref22) {\n            var _ref23 = _slicedToArray(_ref22, 2),\n                _ = _ref23[0],\n                value = _ref23[1];\n\n            return value;\n          }),\n          fatherField: parent.map(function (_ref24) {\n            var _ref25 = _slicedToArray(_ref24, 1),\n                field = _ref25[0];\n\n            return fields.ownField[fields.relationField.findIndex(function (rField) {\n              return field === rField;\n            })];\n          }) },\n        inputs: {\n          features: options.features || [],\n          layer: this.getLayer()\n        }\n      };\n    }\n  },\n\n  computed: {\n    selectall: function selectall() {\n      return this.relations.every(function (r) {\n        return r.select;\n      });\n    },\n    relationsLength: function relationsLength() {\n      return this.relations.length;\n    },\n    fieldrequired: function fieldrequired() {\n      var _this10 = this;\n\n      return (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: this._relationLayerId, relation: this.relation }).ownField.some(function (field) {\n        return (0, _getEditingLayerById.getEditingLayerById)(_this10._relationLayerId).isFieldRequired(field);\n      });\n    },\n    show_add_link: function show_add_link() {\n      return 0 === this.relations.length || 'ONE' !== this.relation.type;\n    }\n  },\n\n  watch: {\n    relations: function relations(_) {\n      var updatedrelations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (0 === updatedrelations.length) {\n        this.destroyTable();\n      } else {\n        this.updateNewRelationId();\n        this.updateTable();\n      }\n    },\n    show_vector_tools: function show_vector_tools(bool) {\n      this.enableDOMElements(!bool);\n      this.disabled = bool;\n    }\n  },\n\n  beforeCreate: function beforeCreate() {\n    this.delayType = 'debounce';\n  },\n  created: function created() {\n    var _this11 = this,\n        _Layer$LayerTypes$TAB;\n\n    var relationLayer = (0, _getEditingLayerById.getEditingLayerById)(this.relation.child);\n\n    this._new_relations_ids = [];\n\n    this.onCommit = this.onCommit.bind(this);\n\n    g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').on('commit', this.onCommit);\n\n    this.isVectorRelation = Layer.LayerTypes.VECTOR === relationLayer.getType();\n\n    if (this.isVectorRelation) {\n      var geometryType = relationLayer.getGeometryType();\n      this.copyFeatureLayers = [].concat(_toConsumableArray(CatalogLayersStoresRegistry.getLayers({\n        QUERYABLE: true,\n        GEOLAYER: true\n      }).filter(function (l) {\n        return l.getGeometryType && l.getGeometryType() && ![_this11.relation.child, _this11.relation.father].includes(l.getId()) && (l.getGeometryType() === geometryType || (0, _isSameBaseGeometryType.isSameBaseGeometryType)(l.getGeometryType(), geometryType) && Geometry.isMultiGeometry(geometryType));\n      }).map(function (l) {\n        return {\n          id: l.getId(),\n          name: l.getName(),\n          external: false\n        };\n      })), _toConsumableArray(GUI.getService('map').getExternalLayers().filter(function (l) {\n        var features = l.getSource().getFeatures() || [];\n\n        if (!features[0] || !features[0].getGeometry()) {\n          return false;\n        }\n        var type = features[0].getGeometry().getType();\n        return geometryType === type || (0, _isSameBaseGeometryType.isSameBaseGeometryType)(geometryType, type) && (Geometry.isMultiGeometry(geometryType) || !Geometry.isMultiGeometry(type));\n      }).map(function (l) {\n        return {\n          id: l.get('id'),\n          name: l.get('name'),\n          external: true\n        };\n      }))).sort(function (a, b) {\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n      });\n      this.addExternalLayerKey = GUI.getService('catalog').onafter('addExternalLayer', function (_ref26) {\n        var layer = _ref26.layer,\n            type = _ref26.type;\n\n        if ('vector' === type) {\n          var externalLayer = GUI.getService('map').getExternalLayers().find(function (l) {\n            return layer.id === l.get('id');\n          });\n          if (externalLayer) {\n            var features = externalLayer.getSource().getFeatures() || [];\n            if (!features[0] || !features[0].getGeometry()) {\n              return;\n            }\n            var _type = features[0].getGeometry().getType();\n            if (geometryType === _type || (0, _isSameBaseGeometryType.isSameBaseGeometryType)(geometryType, _type) && (Geometry.isMultiGeometry(geometryType) || !Geometry.isMultiGeometry(_type))) {\n              _this11.copyFeatureLayers.push({\n                id: externalLayer.get('id'),\n                name: externalLayer.get('name'),\n                external: true\n              });\n            }\n          }\n        }\n      });\n    }\n\n    this.copylayerid = this.copyFeatureLayers.length ? this.copyFeatureLayers[0].id : null;\n\n    this.loadEventuallyRelationValuesForInputs = false;\n\n    this.currentRelationFeatureId = null;\n\n    this._relationLayerId = this.relation.child === this.layerId ? this.relation.father : this.relation.child;\n\n    this._layerType = this.getLayer().getType();\n\n    this.capabilities = _workflow2.Workflow.Stack.getCurrent().getLayer().getEditingCapabilities();\n\n    this.tools = [];\n\n    var self = this;\n\n    this._add_link_workflow = (_Layer$LayerTypes$TAB = {}, _defineProperty(_Layer$LayerTypes$TAB, Layer.LayerTypes.TABLE, {\n      link: function link() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow(_extends({}, options, {\n          type: 'edittable',\n          backbuttonlabel: 'plugins.editing.form.buttons.save_and_back_table',\n          steps: [new _workflows.OpenTableStep()]\n        }));\n      },\n      add: function add() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow(_extends({}, options, {\n          type: 'addtablefeature',\n          steps: [new _step.Step({ help: 'editing.steps.help.new', run: _addTableFeature.addTableFeature }), new _workflows.OpenFormStep()]\n        }));\n      }\n    }), _defineProperty(_Layer$LayerTypes$TAB, Layer.LayerTypes.VECTOR, {\n      link: function link() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow({\n          type: 'linkrelation',\n          steps: [new _step.Step(_extends({}, options, {\n            help: \"editing.steps.help.select_feature_to_relation\",\n            run: function run(inputs, context) {\n              var _this12 = this;\n\n              return (0, _promisify.$promisify)(new Promise(function () {\n                var _ref27 = _asyncToGenerator(function* (resolve, reject) {\n                  var promise = new Promise(function (r) {\n                    return _this12.resolve = r;\n                  });\n                  GUI.setModal(false);\n                  var editingLayer = inputs.layer.getEditingLayer();\n                  try {\n                    if (context.beforeRun && 'function' === typeof context.beforeRun) {\n                      yield (0, _promisify.promisify)(context.beforeRun());\n                    }\n                    var features = editingLayer.getSource().getFeatures().filter(function (f) {\n                      return Object.entries(context.excludeFeatures || {}).reduce(function (bool, _ref28) {\n                        var _ref29 = _slicedToArray(_ref28, 2),\n                            field = _ref29[0],\n                            value = _ref29[1];\n\n                        return bool && value != f.get(field);\n                      }, true);\n                    });\n                    (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({\n                      promise: (0, _promisify.$promisify)(promise),\n                      inputs: { layer: inputs.layer, features: features },\n                      style: _this12.selectStyle\n                    });\n\n                    _this12.addInteraction(new PickFeatureInteraction({ layers: [editingLayer], features: features }), {\n                      'picked': function picked(e) {\n                        inputs.features.push(e.feature);\n                        GUI.setModal(true);\n                        resolve(inputs);\n                      }\n                    });\n                  } catch (e) {\n                    console.warn(e);\n                    reject(e);\n                  }\n                });\n\n                return function (_x12, _x13) {\n                  return _ref27.apply(this, arguments);\n                };\n              }()));\n            },\n            stop: function stop() {\n              GUI.setModal(true);\n\n              this.resolve(true);\n              this.resolve = null;\n              return true;\n            }\n          }))]\n        });\n      },\n\n      add: function add() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var addStep = new _workflows.AddFeatureStep(_extends({}, options, {\n          steps: {\n            draw: {\n              description: 'editing.steps.help.draw_new_feature',\n              done: false\n            }\n          },\n          tools: ['snap', 'measure']\n        }));\n\n        addStep.on('stop', function () {\n          addStep.setUserMessageStepDone('draw');\n          GUI.closeUserMessage();\n        });\n\n        return new _workflow2.Workflow(_extends({}, options, {\n          type: 'addfeature',\n          steps: [addStep, new _workflows.OpenFormStep(options)],\n          registerEscKeyEvent: true\n        }));\n      },\n\n      selectandcopy: function selectandcopy() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow({\n          type: 'selectandcopyfeaturesfromotherlayer',\n          steps: [new _step.Step(_extends({}, options, {\n            help: \"editing.steps.help.pick_feature\",\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.selectPoint',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              var _this13 = this;\n\n              if (!options.copyLayer) {\n                return (0, _promisify.$promisify)(Promise.resolve());\n              }\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var features = [];\n                var geometryType = inputs.layer.getGeometryType();\n\n                if (options.isVector) {\n                  yield new Promise(function () {\n                    var _ref31 = _asyncToGenerator(function* (resolve) {\n                      _this13.addInteraction(options.external ? new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: options.copyLayer }) : new PickCoordinatesInteraction(), {\n                        'picked': function () {\n                          var _ref32 = _asyncToGenerator(function* (e) {\n                            try {\n                              features = (0, _convertToGeometry.convertToGeometry)(options.external ? e.features : ((yield DataRouterService.getData('query:coordinates', {\n                                inputs: {\n                                  coordinates: e.coordinate,\n                                  query_point_tolerance: ProjectsRegistry.getCurrentProject().getQueryPointTolerance(),\n                                  layerIds: [options.copyLayer.getId()],\n                                  multilayers: false\n                                },\n                                outputs: null\n                              })).data[0] || { features: [] }).features, geometryType);\n                            } catch (e) {\n                              console.warn(e);\n                            } finally {\n                              resolve();\n                            }\n                          });\n\n                          function picked(_x17) {\n                            return _ref32.apply(this, arguments);\n                          }\n\n                          return picked;\n                        }()\n                      });\n                    });\n\n                    return function (_x16) {\n                      return _ref31.apply(this, arguments);\n                    };\n                  }());\n                }\n\n                var _feature = void 0;\n\n                try {\n                  _feature = features.length > 1 ? yield (0, _promisify.promisify)((0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: features, inputs: inputs })) : features[0];\n                } catch (e) {\n                  console.warn(e);\n                }\n\n                if (_feature) {\n                  var feature = new Feature({\n                    feature: _feature,\n                    properties: inputs.layer.getEditingFields().filter(function (attr) {\n                      return !attr.pk;\n                    }).map(function (attr) {\n                      return attr.name;\n                    })\n                  });\n                  feature.setTemporaryId();\n                  inputs.features = [feature];\n                  inputs.layer.getEditingLayer().getSource().addFeature(feature);\n                  context.session.pushAdd(inputs.layer.getId(), feature, false);\n                  return inputs;\n                }\n\n                GUI.showUserMessage({\n                  type: 'warning',\n                  message: 'plugins.editing.messages.no_feature_selected',\n                  closable: false,\n                  autoclose: true\n                });\n\n                return Promise.reject();\n              }));\n            },\n            stop: function stop() {\n              self.show_vector_tools = false;\n              this.setUserMessageStepDone('select');\n              GUI.closeUserMessage();\n            }\n          })), new _workflows.OpenFormStep(options)],\n          registerEscKeyEvent: true\n        });\n      }\n    }), _Layer$LayerTypes$TAB)[this._layerType];\n\n    this.relations.forEach(function (r) {\n      return _this11.addTools(r.id);\n    });\n  },\n  activated: function () {\n    var _ref33 = _asyncToGenerator(function* () {\n      if (this.isVectorRelation) {\n        this.mapExtent = GUI.getService('map').getMapBBOX();\n      }\n\n      this.show_vector_tools = false;\n\n      if (!this.loadEventuallyRelationValuesForInputs) {\n        this.loading = true;\n\n        try {\n          yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({\n            type: 'show-relation-editing',\n            id: (0, _getRelationId.getRelationId)({ layerId: this.layerId, relation: this.relation }),\n            component: this\n          });\n        } catch (e) {\n          console.warn(e);\n        }\n\n        this.loading = false;\n\n        this.loadEventuallyRelationValuesForInputs = true;\n      }\n\n      this.active = true;\n\n      yield this.$nextTick();\n\n      if (!this.relationsTable && this.relations.length > 0) {\n        this._createDataTable();\n      }\n\n      this.resize();\n    });\n\n    function activated() {\n      return _ref33.apply(this, arguments);\n    }\n\n    return activated;\n  }(),\n  deactivated: function deactivated() {\n    this.destroyTable();\n    this.active = false;\n\n    this.relations.forEach(function (r) {\n      return r.select = false;\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.loadEventuallyRelationValuesForInputs = true;\n\n    g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').off('commit', this.onCommit);\n\n    if (this.isVectorRelation && null !== this.currentRelationFeatureId) {\n      GUI.getService('map').zoomToExtent(this.mapExtent);\n      this.mapExtent = null;\n    }\n\n    if (this.addExternalLayerKey) {\n      GUI.getService('catalog').un('addExternalLayer', this.addExternalLayerKey);\n      this.addExternalLayerKey = null;\n    }\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"margin-bottom\":\"5px\"}},[_c('bar-loader',{attrs:{\"loading\":_vm.loading}}),_vm._v(\" \"),_c('div',{ref:\"relation_header_title\",staticClass:\"relation_header_title box-header with-border skin-color\"},[_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.edit_relation'),expression:\"'editing.edit_relation'\"}]}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"2px\"}},[_vm._v(\": \"+_vm._s(_vm.relation.name.toUpperCase()))])]),_vm._v(\" \"),_c('div',{ref:\"relation_header_tools\",staticClass:\"relation_header_tools box-header with-border\"},[_c('div',{attrs:{\"id\":\"search-box\"}},[(_vm.relationsLength)?_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"filterRelation\",\"placeholder\":_vm.placeholdersearch}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"g3w-editing-relations-add-link-tools\"},[(_vm.relationsLength > 0 && _vm.capabilities.includes('change_attr_feature'))?_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:bottom.create\",value:('plugins.editing.tools.update_multi_features_relations'),expression:\"'plugins.editing.tools.update_multi_features_relations'\",arg:\"bottom\",modifiers:{\"create\":true}}],staticClass:\"g3w-icon\"},[_c('span',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.relations.every(function (r) { return !r.select; })),expression:\"relations.every(r => !r.select)\"}],on:{\"click\":function($event){$event.stopPropagation();return _vm.editAttributesRelations()}}},[_c('img',{attrs:{\"height\":\"25\",\"width\":\"25\",\"src\":(_vm.resourcesurl + \"images/multiEditAttributes.png\")}})])]):_vm._e(),_vm._v(\" \"),(_vm.capabilities.includes('change_attr_feature'))?_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:bottom.create\",value:('plugins.editing.form.relations.tooltips.link_relation'),expression:\"'plugins.editing.form.relations.tooltips.link_relation'\",arg:\"bottom\",modifiers:{\"create\":true}}],staticClass:\"g3w-icon add-link\",class:[{ 'disabled': !_vm.show_add_link }, _vm.g3wtemplate.font['link']],attrs:{\"align\":\"center\"},on:{\"click\":function($event){$event.stopPropagation();_vm.show_add_link ? _vm.linkRelation() : null}}}):_vm._e(),_vm._v(\" \"),(_vm.capabilities.includes('add_feature'))?_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:bottom.create\",value:('plugins.editing.form.relations.tooltips.add_relation'),expression:\"'plugins.editing.form.relations.tooltips.add_relation'\",arg:\"bottom\",modifiers:{\"create\":true}}],staticClass:\"g3w-icon add-link pull-right\",class:[{ 'disabled' : !_vm.show_add_link }, _vm.g3wtemplate.font['plus']],on:{\"click\":function($event){$event.stopPropagation();_vm.show_add_link ? _vm.addRelationAndLink() : null}}}):_vm._e()])]),_vm._v(\" \"),(_vm.show_vector_tools)?_c('section',{ref:\"relation_vector_tools\",staticClass:\"relation_vector_tools\"},[_c('span',{staticClass:\"close_vector_relation_tool\",on:{\"click\":function($event){$event.stopPropagation();return _vm.closeVectorTools($event)}}},[_c('i',{staticClass:\"g3w-icon skin-color\",class:_vm.g3wtemplate.font['close']})]),_vm._v(\" \"),_c('div',[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.draw_new_feature'),expression:\"'editing.relation.draw_new_feature'\"}],staticClass:\"g3w-editing-new-relation-vector-type\"}),_vm._v(\" \"),_c('button',{staticClass:\"btn skin-button\",staticStyle:{\"width\":\"100%\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addVectorRelation($event)}}},[_c('i',{class:_vm.g3wtemplate.font['pencil']})])]),_vm._v(\" \"),_c('section',[_c('span',{staticClass:\"divider\"}),_vm._v(\" \"),_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.draw_or_copy'),expression:\"'editing.relation.draw_or_copy'\"}],staticStyle:{\"align-self\":\"center\"}}),_vm._v(\" \"),_c('span',{staticClass:\"divider\"}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"g3w-select-editable-layers-content\"}},[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.copy_feature_from_other_layer'),expression:\"'editing.relation.copy_feature_from_other_layer'\"}],staticClass:\"g3w-editing-new-relation-vector-type\"}),_vm._v(\" \"),_c('select',{directives:[{name:\"select2\",rawName:\"v-select2\",value:('copylayerid'),expression:\"'copylayerid'\"}],attrs:{\"id\":\"g3w-select-editable-layers-to-copy\"}},_vm._l((_vm.copyFeatureLayers),function(layer){return _c('option',{key:layer.id,domProps:{\"value\":layer.id}},[_vm._v(_vm._s(layer.name))])}),0),_vm._v(\" \"),_c('button',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(0 === _vm.copyFeatureLayers.length),expression:\"0 === copyFeatureLayers.length\"}],staticClass:\"btn skin-button\",on:{\"click\":function($event){$event.stopPropagation();return _vm.copyFeatureFromOtherLayer($event)}}},[_c('i',{class:_vm.g3wtemplate.font['clipboard']})])])])]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.disabled),expression:\"disabled\"}],ref:\"relation_body\",staticClass:\"relation_body box-body\"},[(_vm.relationsLength > 0 && !_vm.update)?_c('table',{ref:\"relationTable\",staticClass:\"table g3wform-relation-table table-striped\"},[_c('thead',[_c('tr',[_c('th',{staticStyle:{\"padding\":\"10px\"}},[_c('input',{staticClass:\"magic-checkbox\",attrs:{\"id\":\"select_all_relations\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selectall},on:{\"change\":function($event){return _vm.updateSelectRelations()}}}),_vm._v(\" \"),_c('label',{staticStyle:{\"margin\":\"0\"},attrs:{\"for\":\"select_all_relations\"}},[_vm._v(\"¬†\")])]),_vm._v(\" \"),_c('th',{directives:[{name:\"t\",rawName:\"v-t\",value:('tools'),expression:\"'tools'\"}]}),_vm._v(\" \"),_c('th'),_vm._v(\" \"),_vm._l((_vm.relationAttributesSubset(_vm.relations[0])),function(attribute){return _c('th',[_vm._v(_vm._s(attribute.label))])})],2)]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.relations),function(relation,index){return _c('tr',{key:relation.id,staticClass:\"featurebox-header\"},[_c('td',{staticStyle:{\"padding-top\":\"0\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(relation.select),expression:\"relation.select\"}],staticClass:\"magic-checkbox\",attrs:{\"id\":(\"select_relation__\" + index),\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(relation.select)?_vm._i(relation.select,null)>-1:(relation.select)},on:{\"change\":function($event){var $$a=relation.select,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(relation, \"select\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(relation, \"select\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(relation, \"select\", $$c)}}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"select_relation__\" + index)}})]),_vm._v(\" \"),_c('td',[_c('div',{staticStyle:{\"display\":\"flex\"}},_vm._l(((_vm.tools[index] || _vm.addTools(_vm.relations[index].id))),function(tool){\nvar _obj;\nreturn _c('div',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:top.create\",value:((\"plugins.\" + (tool.state.name))),expression:\"`plugins.${tool.state.name}`\",arg:\"top\",modifiers:{\"create\":true}}],key:tool.state.id,class:( _obj = { enabled: true, 'toggled': tool.state.active }, _obj[(\"editbtn \" + (tool.state.id))] = true, _obj ),on:{\"click\":function($event){$event.stopPropagation();return _vm.startTool(tool, index)}}},[_c('img',{attrs:{\"height\":\"20px\",\"width\":\"20px\",\"src\":(_vm.resourcesurl + \"images/\" + (tool.state.icon))}})])}),0)]),_vm._v(\" \"),_c('td',{staticClass:\"action-cell\"},[(!_vm.fieldrequired && _vm.capabilities.includes('change_attr_feature'))?_c('div',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.form.relations.tooltips.unlink_relation'),expression:\"'plugins.editing.form.relations.tooltips.unlink_relation'\",arg:\"right\",modifiers:{\"create\":true}}],staticClass:\"g3w-mini-relation-icon g3w-icon\",class:_vm.g3wtemplate.font['unlink'],attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.unlinkRelation(index)}}}):_vm._e()]),_vm._v(\" \"),_vm._l((_vm.relationAttributesSubset(relation)),function(attribute){return _c('td',[(_vm.isMedia(attribute.value) && _vm.getValue(attribute.value))?_c('div',{staticClass:\"preview\"},[_c('a',{attrs:{\"href\":_vm.getValue(attribute.value),\"target\":\"_blank\"}},[_c('div',{staticClass:\"previewtype\",class:_vm.getMediaType(attribute.value.mime_type).type},[_c('i',{staticClass:\"fa-2x\",class:_vm.g3wtemplate.font[_vm.getMediaType(attribute.value.mime_type).type]})])]),_vm._v(\" \"),_c('div',{staticClass:\"filename\"},[_vm._v(_vm._s(_vm.getValue(attribute.value).split('/').pop()))])]):(['photo', 'link'].includes(_vm.getFieldType(attribute)))?_c('a',{attrs:{\"href\":_vm.getValue(attribute.value),\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.getValue(attribute.value))+\"\\n              \")]):_c('span',[_vm._v(_vm._s(_vm.getValue(_vm.getRelationFeatureValue(relation.id, attribute.name))))])])})],2)}),0)]):_vm._e()])],1)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-112912af\"\n\n},{\"../eventbus\":11,\"../g3wsdk/workflow/step\":14,\"../g3wsdk/workflow/workflow\":15,\"../interactions/pickfeaturesinteraction\":26,\"../utils/addTableFeature\":30,\"../utils/chooseFeatureFromFeatures\":34,\"../utils/convertToGeometry\":36,\"../utils/getEditingLayerById\":42,\"../utils/getFeatureTableFieldValue\":43,\"../utils/getLayersDependencyFeatures\":45,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/getRelationId\":50,\"../utils/isSameBaseGeometryType\":56,\"../utils/promisify\":58,\"../utils/setAndUnsetSelectedFeaturesStyle\":59,\"../utils/updateWorkflows\":64,\"../workflows\":65,\"vueify/lib/insert-css\":1}],7:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-table table.dataTable tbody td{padding:3px 5px}\\n.editing_table_title[data-v-13f4ce0f]{margin-top:0;margin-bottom:2px;font-size:1.5em;font-weight:700;color:var(--skin-color)}#table-editing-tools[data-v-13f4ce0f]{display:flex;justify-content:space-between}#table-editing-tools i[data-v-13f4ce0f]{margin:5px}#buttons button.btn[data-v-13f4ce0f]{font-weight:700!important;min-width:80px}.table_editing_footer_buttons[data-v-13f4ce0f]{position:absolute;bottom:10px;width:100%;display:flex;justify-content:center}.editing_table_header_content[data-v-13f4ce0f]{display:flex;justify-content:space-between;align-items:baseline}.editing_table_relation_messagge[data-v-13f4ce0f]{margin-bottom:10px;font-size:1.3em;background-color:#f5f5f5;padding:3px;border-radius:3px;font-weight:700}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _step = require('../g3wsdk/workflow/step');\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _workflows = require('../workflows');\n\nvar _cloneFeature = require('../utils/cloneFeature');\n\nvar _getRelationsInEditing = require('../utils/getRelationsInEditing');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nvar _addTableFeature = require('../utils/addTableFeature');\n\nvar _promisify = require('../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\nvar GUI = g3wsdk.gui.GUI;\nvar resizeMixin = g3wsdk.gui.vue.Mixins.resizeMixin;\n\nvar Media_Field = g3wsdk.gui.vue.Fields.media_field;\n\nObject.entries({\n  Workflow: _workflow.Workflow,\n  OpenFormStep: _workflows.OpenFormStep\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nexports.default = {\n\n  name: 'Table',\n\n  mixins: [resizeMixin],\n\n  components: {\n    'g3w-media': Media_Field\n  },\n\n  data: function data() {\n    return {\n      dataTable: null,\n      show: true,\n      state: this.$options.service.state\n    };\n  },\n\n\n  methods: {\n    showTool: function showTool(type) {\n      return undefined !== this.state.capabilities.find(function (cap) {\n        return cap === type;\n      });\n    },\n    resize: function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        if ('none' === this.$el.style.display) {\n          return;\n        }\n\n        yield this.$nextTick();\n\n        $('#editing_table  div.dataTables_scrollBody').height($(\".content\").height() - $('.close-panel-block').outerHeight() - $('#editing_table  div.dataTables_scrollHeadInner').outerHeight() - $('.editing_table_title').outerHeight() - $('.editing_table_header').outerHeight() - $('.editing_table_relation_messagge').outerHeight() - $('.dataTables_length').outerHeight() - $('.dataTables_paginate.paging_simple_numbers').outerHeight() - $('.dataTables_info').outerHeight() - $('.dataTables_filter').outerHeight() - $('.table_editing_footer_buttons').outerHeight() - $('#editing_table .dataTables_paginate.paging_simple_numbers').outerHeight());\n\n        if (this.dataTable) {\n          this.dataTable.columns.adjust();\n        }\n      });\n\n      function resize() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return resize;\n    }(),\n    showValue: function showValue(key) {\n      return !!this.state.headers.find(function (h) {\n        return key === h.name;\n      });\n    },\n    isMediaField: function isMediaField(name) {\n      var isMedia = false;\n      for (var i = 0; i < this.state.headers.length; i++) {\n        var header = this.state.headers[i];\n        if (name === header.name && 'media' === header.input.type) {\n          isMedia = true;\n          break;\n        }\n      }\n      return isMedia;\n    },\n    stop: function stop() {\n      this.state.promise.reject();\n    },\n    save: function save() {\n      var _this = this;\n\n      this.state.isrelation ? this.state.promise.resolve({ features: (this._linkFeatures || []).map(function (i) {\n          return _this.state.features[i];\n        }) }) : this.state.promise.resolve();\n    },\n    cancel: function cancel() {\n      this.state.promise.reject();\n    },\n    deleteFeature: function () {\n      var _ref4 = _asyncToGenerator(function* (uid) {\n        var _this2 = this;\n\n        var element = $('#editing_table table tr#' + uid);\n        var layer = this.state.inputs.layer;\n        var layerId = layer.getId();\n        var childRelations = layer.getChildren();\n        var relationinediting = childRelations.length && (0, _getRelationsInEditing.getRelationsInEditing)({\n          layerId: layerId,\n          relations: layer.getRelations().getArray()\n        }).length > 0;\n\n        try {\n          yield new Promise(function (resolve, reject) {\n            GUI.dialog.confirm('<h4>' + tPlugin('editing.messages.delete_feature') + '</h4>\\n              <div style=\"font-size:1.2em;\">' + (relationinediting ? tPlugin('editing.messages.delete_feature_relations') : '') + '</div>', function (result) {\n              if (result) {\n                var index = _this2.state.features.findIndex(function (f) {\n                  return f.getUid() === uid;\n                });\n                var feature = _this2.state.features[index];\n                var session = _this2.state.context.session;\n                var _layerId = _this2.state.inputs.layer.getId();\n                _this2.state.inputs.layer.getEditingSource().removeFeature(feature);\n                session.pushDelete(_layerId, feature);\n                _this2.state.rows.splice(index, 1);\n                resolve();\n              } else {\n                reject();\n              }\n            });\n          });\n\n          this.dataTable.row(element).remove().draw();\n\n          yield this.$nextTick();\n        } catch (e) {\n          console.warn(e);\n        }\n      });\n\n      function deleteFeature(_x) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return deleteFeature;\n    }(),\n    copyFeature: function () {\n      var _ref5 = _asyncToGenerator(function* (uid) {\n        var _this3 = this;\n\n        yield new Promise(function () {\n          var _ref6 = _asyncToGenerator(function* (resolve, reject) {\n            var feature = (0, _cloneFeature.cloneFeature)(_this3.state.features.find(function (f) {\n              return uid === f.getUid();\n            }), _this3.state.inputs.layer.getEditingLayer());\n\n            _this3.state.workflow = new _workflow.Workflow({\n              type: 'addtablefeature',\n              steps: [new _step.Step({ help: 'editing.steps.help.new', run: _addTableFeature.addTableFeature }), new _workflows.OpenFormStep()]\n            });\n            _this3.state.inputs.features.push(feature);\n            try {\n              var outputs = yield (0, _promisify.promisify)(_this3.state.workflow.start({\n                context: _this3.state.context,\n                inputs: _this3.state.inputs\n              }));\n              var _feature = outputs.features[outputs.features.length - 1];\n              var newFeature = {};\n              Object.entries(_this3.state.rows[0]).forEach(function (_ref7) {\n                var _ref8 = _slicedToArray(_ref7, 2),\n                    key = _ref8[0],\n                    _ = _ref8[1];\n\n                newFeature[key] = (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n                  layerId: _this3.state.layerId,\n                  feature: _feature,\n                  property: key\n                });\n              });\n              newFeature.__gis3w_feature_uid = _feature.getUid();\n              _this3.state.rows.push(newFeature);\n              resolve(newFeature);\n            } catch (e) {\n              console.warn(e);reject(e);\n            } finally {\n              _this3.state.workflow.stop();\n\n              console.log('here we are');\n            }\n          });\n\n          return function (_x3, _x4) {\n            return _ref6.apply(this, arguments);\n          };\n        }());\n\n        this.show = false;\n        this.dataTable.destroy();\n\n        yield this.$nextTick();\n\n        this.show = true;\n\n        yield this.$nextTick();\n\n        this.setDataTable();\n      });\n\n      function copyFeature(_x2) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return copyFeature;\n    }(),\n    editFeature: function () {\n      var _ref9 = _asyncToGenerator(function* (uid) {\n        var _this4 = this;\n\n        var index = this.state.features.findIndex(function (f) {\n          return uid === f.getUid();\n        });\n        var feature = this.state.features[index];\n\n        this.state.workflow = new _workflow.Workflow({ type: 'edittablefeature', steps: [new _workflows.OpenFormStep()] });\n\n        var inputs = this.state.inputs;\n\n        inputs.features.push(feature);\n\n        try {\n          var outputs = yield (0, _promisify.promisify)(this.state.workflow.start({\n            context: this.state.context,\n            inputs: inputs\n          }));\n          var _feature2 = outputs.features[outputs.features.length - 1];\n          Object.entries(this.state.rows[index]).forEach(function (_ref10) {\n            var _ref11 = _slicedToArray(_ref10, 2),\n                key = _ref11[0],\n                _ = _ref11[1];\n\n            _this4.state.rows[index][key] = (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n              layerId: _this4.state.layerId,\n              feature: _feature2,\n              property: key\n            });\n          });\n        } catch (e) {\n          console.warn(e);\n        } finally {\n          this.state.workflow.stop();\n        }\n      });\n\n      function editFeature(_x5) {\n        return _ref9.apply(this, arguments);\n      }\n\n      return editFeature;\n    }(),\n    linkFeature: function linkFeature(index, evt) {\n      if (evt.target.checked) {\n        this._linkFeatures.push(index);\n      } else {\n        this._linkFeatures = this._linkFeatures.filter(function (addindex) {\n          return addindex !== index;\n        });\n      }\n    },\n    getValue: function getValue(value) {\n      if (value && 'object' === (typeof value === 'undefined' ? 'undefined' : _typeof(value)) && Object === value.constructor) {\n        value = value.value;\n      } else if ('string' == typeof value && 0 === value.indexOf('_new_')) {\n        value = null;\n      }\n      return value;\n    },\n    setDataTable: function setDataTable() {\n      this.dataTable = $('#editing_table table').DataTable({\n        columnDefs: [{ orderable: false, targets: 0 }],\n        order: [1, 'asc'],\n        pageLength: 10,\n        scrollCollapse: true,\n        scrollResize: true,\n        scrollX: true\n      });\n      this.resize();\n    }\n  },\n\n  beforeCreate: function beforeCreate() {\n    this.delayType = 'debounce';\n\n    GUI.disableSideBar(true);\n\n    GUI.showUserMessage({\n      type: 'loading',\n      message: 'plugins.editing.messages.loading_table_data',\n      autoclose: false,\n      closable: false\n    });\n  },\n  mounted: function () {\n    var _ref12 = _asyncToGenerator(function* () {\n\n      yield this.$nextTick();\n\n      if (this.state.isrelation) {\n        this._linkFeatures = [];\n      }\n\n      this.setDataTable();\n\n      this.resize();\n\n      setTimeout(function () {\n        return GUI.closeUserMessage();\n      }, 300);\n    });\n\n    function mounted() {\n      return _ref12.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  beforeDestroy: function beforeDestroy() {\n    this.cancel();\n    this._linkFeatures = null;\n    this.dataTable.destroy();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g3w-editing-table\",attrs:{\"id\":\"editing_table\"}},[_c('div',{ref:\"editing_table_header\",staticClass:\"editing_table_header\"},[_c('div',{staticClass:\"editing_table_header_content\"},[_c('h3',{staticClass:\"editing_table_title\"},[_vm._v(_vm._s(_vm.state.title))])]),_vm._v(\" \"),(_vm.state.isrelation)?_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.table.info'),expression:\"'editing.relation.table.info'\"}],staticClass:\"editing_table_relation_messagge\"}):_vm._e()]),_vm._v(\" \"),(_vm.show)?_c('table',{staticClass:\"display\",staticStyle:{\"width\":\"100%\"}},[_c('thead',[_c('tr',[(!_vm.state.isrelation)?_c('th',{staticStyle:{\"max-width\":\"60px\"}}):_vm._e(),_vm._v(\" \"),(_vm.state.isrelation)?_c('th'):_vm._e(),_vm._v(\" \"),_vm._l((_vm.state.headers),function(header){return _c('th',[_vm._v(_vm._s(header.label))])})],2)]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.state.rows),function(feature,index){return _c('tr',{key:feature.__gis3w_feature_uid,attrs:{\"id\":feature.__gis3w_feature_uid}},[(!_vm.state.isrelation)?_c('td',[_c('div',{attrs:{\"id\":\"table-editing-tools\"}},[_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.table.edit'),expression:\"'plugins.editing.table.edit'\",arg:\"right\",modifiers:{\"create\":true}}]},[(_vm.showTool('change_attr_feature'))?_c('i',{staticClass:\"g3w-icon\",class:_vm.g3wtemplate.font['pencil'],staticStyle:{\"color\":\"#30cce7\"},attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.editFeature(feature.__gis3w_feature_uid)}}}):_vm._e()]),_vm._v(\" \"),_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.table.copy'),expression:\"'plugins.editing.table.copy'\",arg:\"right\",modifiers:{\"create\":true}}]},[(_vm.showTool('add_feature'))?_c('i',{staticClass:\"g3w-icon\",class:_vm.g3wtemplate.font['copy-paste'],staticStyle:{\"color\":\"#d98b14\",\"padding\":\"5px 7px 5px 7px\"},attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.copyFeature(feature.__gis3w_feature_uid)}}}):_vm._e()]),_vm._v(\" \"),_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.table.delete'),expression:\"'plugins.editing.table.delete'\",arg:\"right\",modifiers:{\"create\":true}}]},[(_vm.showTool('delete_feature'))?_c('i',{staticClass:\"g3w-icon\",class:_vm.g3wtemplate.font['trash-o'],staticStyle:{\"color\":\"red\"},attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteFeature(feature.__gis3w_feature_uid)}}}):_vm._e()])])]):_vm._e(),_vm._v(\" \"),(_vm.state.isrelation)?_c('td',[_c('input',{staticClass:\"magic-checkbox\",attrs:{\"id\":(\"relation__\" + index),\"type\":\"checkbox\"},on:{\"change\":function($event){return _vm.linkFeature(index, $event)}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"relation__\" + index)}})]):_vm._e(),_vm._v(\" \"),_vm._l((feature),function(value,key){return (_vm.showValue(key))?_c('td',{key:key},[(_vm.getValue(value) && _vm.isMediaField(key))?_c('g3w-media',{attrs:{\"state\":value}}):_c('p',[_vm._v(_vm._s(_vm.getValue(value)))])],1):_vm._e()})],2)}),0)]):_vm._e(),_vm._v(\" \"),_c('div',{ref:\"table_editing_footer_buttons\",staticClass:\"table_editing_footer_buttons\",attrs:{\"id\":\"buttons\"}},[_c('button',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(_vm.state.isrelation ? 'editing.form.buttons.save_and_back' : 'editing.form.buttons.save'),expression:\"state.isrelation ? 'editing.form.buttons.save_and_back' : 'editing.form.buttons.save'\"}],staticClass:\"btn btn-success\",staticStyle:{\"margin-right\":\"10px\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.save($event)}}}),_vm._v(\" \"),_c('button',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.form.buttons.cancel'),expression:\"'editing.form.buttons.cancel'\"}],staticClass:\"btn btn-danger\",on:{\"click\":function($event){$event.stopPropagation();return _vm.cancel($event)}}})])])}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-13f4ce0f\"\n\n},{\"../g3wsdk/workflow/step\":14,\"../g3wsdk/workflow/workflow\":15,\"../utils/addTableFeature\":30,\"../utils/cloneFeature\":35,\"../utils/getFeatureTableFieldValue\":43,\"../utils/getRelationsInEditing\":51,\"../utils/promisify\":58,\"../workflows\":65,\"vueify/lib/insert-css\":1}],8:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".panel.mobile[data-v-c4a84298]{margin-bottom:5px}.panel.mobile .panel-heading[data-v-c4a84298]{display:flex;justify-content:space-between}.panel.mobile .panel-heading .panel-title[data-v-c4a84298]{margin-top:auto;margin-bottom:auto}.panel.mobile .panel-heading .start-editing[data-v-c4a84298]{margin:auto;margin-right:0;padding:6px}.panel.mobile .tools-content .editbtn[data-v-c4a84298]{padding:9px}.panel.mobile .toolbox .panel-body[data-v-c4a84298]{padding:5px!important}.toolbox_help_message[data-v-c4a84298]{font-weight:lighter}.toolbox[data-v-c4a84298]{padding-bottom:5px}.panel[data-v-c4a84298]{border:0!important;margin-bottom:8px}.panel-heading[data-v-c4a84298]{padding:5px 10px;width:100%}.toolboxselected[data-v-c4a84298]{box-shadow:0 0 0 3px var(--skin-color)}.panel:not(.toolboxselected) .info[data-v-c4a84298]{opacity:.4}.panel:not(.toolboxactive) .panel-heading[data-v-c4a84298]{border-radius:3px;filter:grayscale(.8)}.panel:not(.geolayer) .panel-body[data-v-c4a84298]{padding-top:0}.panel.toolboxactive:not(.geolayer) .editbtn.start-editing[data-v-c4a84298]{color:#fff!important}.panel:not(.geolayer) .panel-heading[data-v-c4a84298]{color:#3a4448}.editbtn.start-editing[data-v-c4a84298]{padding:13px;color:currentColor!important;font-size:1.1em;margin:0}.panel-title[data-v-c4a84298]{font-weight:700;word-break:break-word;padding:8px 0;display:inline-block}#toolsoftoolcontainer[data-v-c4a84298]{display:flex;flex-direction:column;margin:5px;padding:5px;border-radius:5px}.info[data-v-c4a84298]{color:#000}.info>i[data-v-c4a84298]{color:#007bff;padding-right:2px}.info+.tools-content[data-v-c4a84298]{margin-top:1em}.filter-by-relation[data-v-c4a84298]{margin-right:5px;cursor:pointer;color:currentColor!important}.tools-content[data-v-c4a84298]{display:flex;flex-wrap:wrap;gap:10px}.message[data-v-c4a84298]{margin-bottom:5px;font-size:1.1em;color:#000;margin-top:5px}.snap-tool[data-v-c4a84298]{display:flex}.snap-tool label>b[data-v-c4a84298]{color:#222d32!important}.tools-of-tool-snap[data-v-c4a84298]{display:flex;width:100%;justify-content:space-between}.tools-of-tool-snap label span[data-v-c4a84298]{color:#222d32!important}.panel-body.disabled[data-v-c4a84298]{opacity:.7}.panel-body.disabled>[data-v-c4a84298]{pointer-events:none}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar GUI = g3wsdk.gui.GUI;\nvar Layer = g3wsdk.core.layer.Layer;\nvar getResolutionFromScale = g3wsdk.ol.utils.getResolutionFromScale;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\n\n\nvar snapInteraction = void 0;\n\nexports.default = {\n\n  name: 'Toolbox',\n\n  props: ['state', 'resourcesurl'],\n\n  data: function data() {\n    return {\n      active: false,\n      helpmessage: null,\n\n      toggled: {\n        relation: false,\n        layer: false },\n      snapAll: false\n    };\n  },\n\n\n  computed: {\n    editDisabled: function editDisabled() {\n      return this.state.loading && !this.state.startstopediting;\n    },\n    hasRelations: function hasRelations() {\n      return this.state.editing.dependencies.length > 0;\n    },\n    loading: function loading() {\n      return this.state.loading || this.state.changingtools;\n    },\n    canEdit: function canEdit() {\n      return this.state.editing.canEdit;\n    },\n    father: function father() {\n      return this.state.editing.father && this.hasRelations;\n    },\n    showtoolsoftool: function showtoolsoftool() {\n      return this.state.toolsoftool.length > 0;\n    },\n    isLayerReady: function isLayerReady() {\n      return this.state.layer.state.editing.ready;\n    },\n    toolboxCursor: function toolboxCursor() {\n      return !this.isLayerReady || !this.canEdit ? 'url(' + this.resourcesurl + 'cursors/mZoomIn.svg), zoom-in' : undefined;\n    },\n    get_tool_title: function get_tool_title() {\n      return function (title) {\n        return g3wsdk.core.ApplicationState.language && tPlugin(title);\n      };\n    }\n  },\n\n  methods: {\n    select: function select() {\n      if (this.isLayerReady && !this.state.selected) {\n        this.$emit('setselectedtoolbox', this.state.id);\n      }\n    },\n    fitZoomToScale: function fitZoomToScale(e) {\n      if (this.state.selected && !this.canEdit) {\n        var map = GUI.getService('map');\n        map.goToRes(map.getCenter(), getResolutionFromScale(this.state._constraints.scale, map.getMapUnits()));\n      }\n    },\n    toggleEditing: function toggleEditing() {\n      this.select();\n      this.toggled.layer = !(this.state.editing.on || this.toggled.layer);\n      if (this.toggled.layer && this.state.layer.state.editing.ready && !this.state.loading) {\n        this.$emit(this.state.editing.on ? 'stoptoolbox' : 'starttoolbox', this.state.id);\n      }\n      if (!this.toggled.layer) {\n        this.$emit('stoptoolbox', this.state.id);\n      }\n    },\n    toggleTool: function toggleTool(toolId) {\n      if (undefined === toolId) {\n        this.$emit('stopactivetool', this.state.id);\n      } else {\n        this.$emit('setactivetool', toolId, this.state.id);\n      }\n      this.select();\n    },\n    toggleFilterByRelation: function toggleFilterByRelation() {\n      this.toggled.relation = !this.toggled.relation;\n      this.$emit('update-filter-layers', this.toggled.relation ? [this.state.id].concat(_toConsumableArray(this.state.editing.dependencies)) : []);\n    },\n    _initSnap: function _initSnap() {\n      var _this = this;\n\n      var tool = (this.state.toolsoftool || []).find(function (t) {\n        return 'snap' === t.type;\n      });\n\n      if (!tool) {\n        return;\n      }\n\n      this.snapFeatures = new ol.Collection();\n\n      this.snapEvents = [];\n\n      this.snapToolboxes = [];\n\n      this.snapUnwatches = [];\n\n      this.$watch(function () {\n        return tool.options.checked;\n      }, function () {\n        return _this.activeSnapInteraction();\n      });\n      this.$watch(function () {\n        return tool.options.checkedAll;\n      }, function () {\n        return _this.activeSnapInteraction();\n      });\n\n      this.$watch(function () {\n        return tool.options.active;\n      }, function () {\n        if (tool.options.active) {\n          _this.activeSnapInteraction();\n        } else if (snapInteraction) {\n          GUI.getService('map').removeInteraction(snapInteraction);\n        }\n      });\n\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayers().filter(function (l) {\n        return Layer.LayerTypes.VECTOR === l.getType();\n      }).forEach(function (l) {\n        var toolbox = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getToolBoxById(l.getId());\n        var source = toolbox.getLayer().getEditingSource();\n\n        _this.snapFeatures.extend(source.readFeatures());\n\n        _this.snapEvents.push({\n          source: source,\n          olKey: source.getFeaturesCollection().on('add', function (evt) {\n            return _this.addSnapFeatures([evt.element]);\n          }),\n          settersAndKeys: {\n            'addFeatures': source.onbefore('addFeatures', _this.addSnapFeatures),\n            'addFeature': source.onbefore('addFeature', _this.addSnapFeatures),\n            'clear': source.onbefore('clear', function () {\n              source.readFeatures().forEach(function (f) {\n                return _this.snapFeatures.remove(f);\n              });\n            })\n          }\n        });\n\n        if (tool.options.layerId !== l.getId()) {\n          var editing = toolbox.getState().editing;\n          _this.snapUnwatches.push(_this.$watch(function () {\n            return editing.on;\n          }, _this.setShowSnapAll));\n          _this.snapToolboxes.push(editing);\n        }\n      });\n\n      this.setShowSnapAll();\n    },\n    _unloadSnap: function _unloadSnap() {\n      if (!snapInteraction) {\n        return;\n      }\n\n      try {\n        this.snapEvents.forEach(function (d) {\n          Object.keys(d.settersAndKeys).forEach(function (event) {\n            d.source.un(event, d.settersAndKeys[event]);\n          });\n          ol.Observable.unByKey(d.olKey);\n        });\n        this.snapUnwatches.forEach(function (unwatch) {\n          return unwatch();\n        });\n\n        snapInteraction = null;\n\n        this.snapUnwatches = null;\n        this.snapToolboxes = null;\n        this.snapEvents = null;\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    addSnapFeatures: function addSnapFeatures(features) {\n      this.snapFeatures.extend(features);\n    },\n    setShowSnapAll: function setShowSnapAll() {\n      var tool = (this.state.toolsoftool || []).find(function (t) {\n        return 'snap' === t.type;\n      });\n      if (tool) {\n        this.snapAll = !!this.snapToolboxes.find(function (editing) {\n          return editing.on;\n        });\n        tool.options.checkedAll = tool.options.showSnapAll ? tool.options.checkedAll : false;\n      }\n    },\n    activeSnapInteraction: function activeSnapInteraction() {\n      var map = GUI.getService('map');\n      var tool = (this.state.toolsoftool || []).find(function (t) {\n        return 'snap' === t.type;\n      });\n\n      if (snapInteraction) {\n        map.removeInteraction(snapInteraction);\n      }\n\n      snapInteraction = null;\n\n      if ((tool.options.checked || tool.options.checkedAll) && tool.options.active) {\n        snapInteraction = new ol.interaction.Snap({\n          source: !tool.options.checkedAll && tool.options.checked && tool.options.source,\n          features: tool.options.checkedAll && this.snapFeatures });\n        map.addInteraction(snapInteraction);\n      }\n    }\n  },\n\n  watch: {\n    'state.activetool': function () {\n      var _ref = _asyncToGenerator(function* (tool) {\n        yield this.$nextTick();\n        this.helpmessage = tool && (tool.messages.help || tool.name);\n      });\n\n      function stateActivetool(_x) {\n        return _ref.apply(this, arguments);\n      }\n\n      return stateActivetool;\n    }(),\n    'state.editing.on': function stateEditingOn(bool) {\n      this.$emit('on-editing', bool);\n    },\n    'state.toolsoftool': function stateToolsoftool(newTools, oldTools) {\n      if (!newTools.length) {\n        oldTools.filter(function (t) {\n          return 'measure' === t.type;\n        }).forEach(function (t) {\n          return t.options.onChange(false);\n        });\n        this._unloadSnap();\n      } else {\n        this._initSnap();\n      }\n    }\n  },\n\n  created: function created() {\n    this.$emit('canEdit', { id: this.state.id });\n  },\n  mounted: function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      yield this.$nextTick();\n    });\n\n    function mounted() {\n      return _ref2.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  beforeDestroy: function beforeDestroy() {\n    this._unloadSnap();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state.show),expression:\"state.show\"}],staticClass:\"toolbox\",attrs:{\"id\":'id_toolbox_' + _vm.state.id}},[_c('div',{staticClass:\"panel\",class:{\n      'mobile':          _vm.isMobile(),\n      'toolboxselected': _vm.state.selected,\n      'toolboxactive':   _vm.state.editing.on && _vm.canEdit,\n      'geolayer':        _vm.state.layer.isGeoLayer(),\n    },on:{\"click\":function($event){$event.stopPropagation();return _vm.select($event)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLayerReady),expression:\"!isLayerReady\"}],staticClass:\"bar-loader\"}),_vm._v(\" \"),(_vm.state.toolboxheader)?_c('div',{staticClass:\"panel-heading container\",style:({ background: _vm.state.color})},[(_vm.father)?_c('i',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.tooltip.filter_by_relation'),expression:\"'plugins.editing.tooltip.filter_by_relation'\",arg:\"right\",modifiers:{\"create\":true}}],class:'filter-by-relation ' + _vm.g3wtemplate.font['relation'],on:{\"click\":_vm.toggleFilterByRelation}}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"panel-title\"},[_vm._v(_vm._s(_vm.state.title))]),_vm._v(\" \"),_c('i',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.editDisabled),expression:\"editDisabled\"},{name:\"t-tooltip\",rawName:\"v-t-tooltip:left.create\",value:('plugins.editing.tooltip.edit_layer'),expression:\"'plugins.editing.tooltip.edit_layer'\",arg:\"left\",modifiers:{\"create\":true}}],staticClass:\"start-editing editbtn skin-tooltip-left\",class:( _obj = {\n          'pull-right':       !_vm.isMobile(),\n          'enabled':          _vm.isLayerReady,\n          'g3w-icon-toggled': _vm.state.editing.on\n        }, _obj[_vm.g3wtemplate.font[(_vm.state.editing.on || _vm.toggled.layer) ? 'checkmark' : 'pencil']] = true, _obj ),on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleEditing($event)}}})]):_vm._e(),_vm._v(\" \"),_c('bar-loader',{attrs:{\"loading\":_vm.loading}}),_vm._v(\" \"),(!_vm.state.changingtools && (_vm.state.editing.on || _vm.toggled.layer))?_c('div',{class:{ 'panel-body':true, disabled: (!_vm.isLayerReady || !_vm.canEdit) },style:({ cursor: _vm.toolboxCursor }),on:{\"click\":_vm.fitZoomToScale}},[(!_vm.state.layer.isGeoLayer())?_c('div',{staticClass:\"info\"},[_c('i',{class:_vm.g3wtemplate.font['info']}),_vm._v(\" \"),_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.messages.toolbox_has_no_geometry'),expression:\"'editing.messages.toolbox_has_no_geometry'\"}]}),_vm._v(\" \"),_c('divider')],1):_vm._e(),_vm._v(\" \"),(_vm.hasRelations)?_c('div',{staticClass:\"info\"},[_c('i',{class:_vm.g3wtemplate.font['info']}),_vm._v(\" \"),_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.messages.toolbox_has_relation'),expression:\"'editing.messages.toolbox_has_relation'\"}]}),_vm._v(\" \"),_c('divider')],1):_vm._e(),_vm._v(\" \"),(_vm.state.message)?_c('div',{staticStyle:{\"color\":\"#000\"}},[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(_vm.state.message),expression:\"state.message\"}],staticClass:\"text-justify\"}),_vm._v(\" \"),_c('divider')],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tools-content\"},_vm._l((_vm.state.tools),function(tool){\n        var _obj;\nreturn (tool.visible)?_c('div',{key:tool.id,class:( _obj = { 'enabled' : tool.enabled, 'toggled' : tool.active }, _obj[(\"editbtn \" + (tool.id))] = true, _obj ),on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();tool.enabled && _vm.toggleTool(tool.active ? undefined : tool.id)}}},[_c('img',{attrs:{\"height\":\"25\",\"width\":\"25\",\"src\":_vm.resourcesurl + 'images/' + tool.icon,\"title\":_vm.get_tool_title((\"\" + (tool.name)))}})]):_vm._e()}),0),_vm._v(\" \"),_c('div',{staticClass:\"message\",attrs:{\"id\":(\"id_toolbox_messages_\" + (_vm.state.id))}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showtoolsoftool)?_c('div',{attrs:{\"id\":\"toolsoftoolcontainer\"}},[_vm._l((_vm.state.toolsoftool),function(tool){return [('measure' === tool.type)?_c('div',{staticClass:\"snap-tool\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tool.options.checked),expression:\"tool.options.checked\"}],staticClass:\"magic-checkbox snap_tools_of_tools\",attrs:{\"id\":\"g3w_editing_show_measure_tool\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(tool.options.checked)?_vm._i(tool.options.checked,null)>-1:(tool.options.checked)},on:{\"change\":[function($event){var $$a=tool.options.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(tool.options, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(tool.options, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(tool.options, \"checked\", $$c)}},function () { return tool.options.onChange(tool.options.checked); }]}}),_vm._v(\" \"),_c('label',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.toolsoftool.measure'),expression:\"'plugins.editing.toolsoftool.measure'\",arg:\"right\",modifiers:{\"create\":true}}],attrs:{\"for\":\"g3w_editing_show_measure_tool\"}},[_c('b',{class:_vm.g3wtemplate.font['measure']})])]):('snap' === tool.type)?_c('div',{staticClass:\"tools-of-tool-snap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tool.options.checked),expression:\"tool.options.checked\"}],staticClass:\"magic-checkbox snap_tools_of_tools\",attrs:{\"type\":\"checkbox\",\"id\":(\"snap_\" + (_vm.state.id))},domProps:{\"checked\":Array.isArray(tool.options.checked)?_vm._i(tool.options.checked,null)>-1:(tool.options.checked)},on:{\"change\":[function($event){var $$a=tool.options.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(tool.options, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(tool.options, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(tool.options, \"checked\", $$c)}},function($event){_vm.snapAll && tool.options.checked ? tool.options.checkedAll = false : null}]}}),_vm._v(\" \"),_c('label',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:( 'plugins.editing.toolsoftool.snap'),expression:\" 'plugins.editing.toolsoftool.snap'\",arg:\"right\",modifiers:{\"create\":true}}],attrs:{\"for\":(\"snap_\" + (_vm.state.id))}},[_c('span',{class:_vm.g3wtemplate.font['magnete']})]),_vm._v(\" \"),(_vm.snapAll)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tool.options.checkedAll),expression:\"tool.options.checkedAll\"}],staticClass:\"magic-checkbox snap_tools_of_tools\",attrs:{\"type\":\"checkbox\",\"id\":(\"snap_all_\" + (_vm.state.id))},domProps:{\"checked\":Array.isArray(tool.options.checkedAll)?_vm._i(tool.options.checkedAll,null)>-1:(tool.options.checkedAll)},on:{\"change\":[function($event){var $$a=tool.options.checkedAll,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(tool.options, \"checkedAll\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(tool.options, \"checkedAll\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(tool.options, \"checkedAll\", $$c)}},function($event){tool.options.checkedAll ? tool.options.checked = false : null}]}}):_vm._e(),_vm._v(\" \"),(_vm.snapAll)?_c('label',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:left.create\",value:('plugins.editing.toolsoftool.snapall'),expression:\"'plugins.editing.toolsoftool.snapall'\",arg:\"left\",modifiers:{\"create\":true}}],attrs:{\"for\":(\"snap_all_\" + (_vm.state.id))}},[_c('span',{class:_vm.g3wtemplate.font['magnete']}),_vm._v(\" \"),_c('b',{class:_vm.g3wtemplate.font['layers']})]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('divider')]})],2):_vm._e()]),_vm._v(\" \"),(_vm.helpmessage)?_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(_vm.helpmessage),expression:\"helpmessage\"}],staticClass:\"toolbox_help_message\"}):_vm._e()],1)]):_vm._e()],1)])}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-c4a84298\"\n\n},{\"vueify/lib/insert-css\":1}],9:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".steps-list[data-v-8a452b86]{align-self:flex-start;list-style:none;padding:10px;margin-bottom:0}li[data-v-8a452b86]{margin-bottom:5px}li.done[data-v-8a452b86]{font-weight:700;color:green}li.done>.description[data-v-8a452b86]{font-weight:700}.dynamic-step[data-v-8a452b86]{padding:10px;font-size:1.2em}.button-step[data-v-8a452b86]{display:inline-flex;align-items:center}.button-step[data-v-8a452b86],button.btn-success[data-v-8a452b86]{font-weight:700;align-self:normal}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n\n  data: function data() {\n    return { steps: {} };\n  },\n\n  methods: {\n    completeStep: function completeStep(step) {\n      step.done = true;\n      step.buttonnext.done();\n    }\n  }\n\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"steps-list\"},_vm._l((_vm.steps),function(step,id){return _c('li',{key:id,class:{ 'done': step.done },style:({ display: step.buttonnext && 'inline-flex' })},[(step.buttonnext)?_c('span',{staticClass:\"button-step\"},[_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(step.description),expression:\"step.description\"}],staticClass:\"description\"}),_vm._v(\" \"),(step.dynamic)?_c('span',{staticClass:\"dynamic-step\"},[_vm._v(_vm._s(step.dynamic))]):_vm._e(),_vm._v(\" \"),_c('button',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.workflow.next'),expression:\"'editing.workflow.next'\"}],class:'btn btn-success' + (step.buttonnext.disabled ? ' g3w-disabled' : '' ),on:{\"click\":function($event){return _vm.completeStep(step)}}})]):[_c('i',{class:_vm.g3wtemplate.getFontClass(step.done ? 'success' : 'empty-circle')}),_vm._v(\" \"),_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(step.description),expression:\"step.description\"}]})]],2)}),0)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-8a452b86\"\n\n},{\"vueify/lib/insert-css\":1}],10:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Session = exports.ChangesManager = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.Flow = Flow;\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Class Flow of workflow step by step\n * \n * ORIGINAL SOURCE: g3w-client/src/core/workflow/flow.js@v3.9.1\n * ORIGINAL SOURCE: g3w-client/src/core/workflow/queque.js@v3.9.1\n */\nfunction Flow() {\n  console.warn('[G3W-CLIENT] g3wsdk.core.workflow.Flow is deprecated');\n\n  var Queque = function () {\n    function Queque() {\n      _classCallCheck(this, Queque);\n\n      this.tasks = [];\n    }\n\n    _createClass(Queque, [{\n      key: 'addTask',\n      value: function addTask(task) {\n        this.tasks.push(task);\n      }\n    }, {\n      key: 'run',\n      value: function run() {\n        var reverse = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        while (this.tasks.length) {\n          var task = reverse ? this.tasks.pop() : this.tasks.shift();task();\n        }\n      }\n    }, {\n      key: 'flush',\n      value: function flush() {\n        return this.tasks.splice(0);\n      }\n    }, {\n      key: 'getLength',\n      value: function getLength() {\n        return this.tasks.length;\n      }\n    }, {\n      key: 'clear',\n      value: function clear() {\n        this.run();this.tasks = [];\n      }\n    }]);\n\n    return Queque;\n  }();\n\n  var steps = [];\n  var inputs = void 0;\n  var counter = 0;\n  var context = null;\n  var d = void 0;\n  var _workflow = void 0;\n  this.queques = {\n    end: new Queque(),\n    micro: new Queque()\n  };\n  //start workflow\n  this.start = function (workflow) {\n    d = $.Deferred();\n    if (counter > 0) {\n      console.log(\"reset workflow before restarting\");\n    }\n    _workflow = workflow;\n    inputs = workflow.getInputs();\n    context = workflow.getContext();\n    steps = workflow.getSteps();\n    // check if there are steps\n    if (steps && steps.length) {\n      //run step (first)\n      this.runStep(steps[0], inputs, context);\n    }\n    // return a promise that will be reolved if all step go right\n    return d.promise();\n  };\n\n  //run step\n  this.runStep = function (step, inputs) {\n    var _this = this;\n\n    //run step that run task\n    _workflow.setMessages({\n      help: step.state.help\n    });\n    var runMicroTasks = this.queques.micro.getLength();\n    step.run(inputs, context, this.queques).then(function (outputs) {\n      runMicroTasks && _this.queques.micro.run();\n      _this.onDone(outputs);\n    }).fail(function (error) {\n      return _this.onError(error);\n    });\n  };\n\n  //check if all step are resolved\n  this.onDone = function (outputs) {\n    counter++;\n    if (counter === steps.length) {\n      counter = 0;\n      d.resolve(outputs);\n      return;\n    }\n    this.runStep(steps[counter], outputs);\n  };\n\n  // in case of error\n  this.onError = function (err) {\n    counter = 0;\n    this.clearQueques();\n    d.reject(err);\n  };\n\n  // stop flow\n  this.stop = function () {\n    var d = $.Deferred();\n    steps[counter].isRunning() ? steps[counter].stop() : null;\n    this.clearQueques();\n    if (counter > 0) {\n      // set counter to 0\n      counter = 0;\n      // reject flow\n      d.reject();\n    } else {\n      //reject to force rollback session\n      d.resolve();\n    }\n    return d.promise();\n  };\n\n  this.clearQueques = function () {\n    this.queques.micro.clear();\n    this.queques.end.clear();\n  };\n\n  g3wsdk.core.utils.base(this);\n}\n\ng3wsdk.core.utils.inherit(Flow, g3wsdk.core.G3WObject);\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/services/editing.js@v3.9.1\n */\nvar ChangesManager = exports.ChangesManager = {\n  /** known actions */\n  Actions: {\n    'add': {\n      fnc: 'addFeature',\n      opposite: 'delete'\n    },\n    'delete': {\n      fnc: 'removeFeature',\n      opposite: 'add'\n    },\n    'update': {\n      fnc: 'updateFeature',\n      opposite: 'update'\n    }\n  },\n  /* apply changes to features (undo/redo) */\n  execute: function execute(object, items, reverse) {\n    console.warn('[G3W-CLIENT] g3wsdk.core.workflow.ChangesManager is deprecated');\n    var fnc = void 0;\n    var feature = void 0;\n    items.forEach(function (item) {\n      feature = item.feature;\n      if (reverse) {\n        // change to opposite\n        feature[ChangesManager.Actions[feature.getState()].opposite]();\n      }\n      // get method from object\n      fnc = ChangesManager.Actions[feature.getState()].fnc;\n      object[fnc](feature);\n    });\n  }\n};\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n */\n\nvar Session = exports.Session = function (_g3wsdk$core$G3WObjec) {\n  _inherits(Session, _g3wsdk$core$G3WObjec);\n\n  function Session() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Session);\n\n    console.warn('[G3W-CLIENT] g3wsdk.core.workflow.Session is deprecated');\n\n    var _this2 = _possibleConstructorReturn(this, (Session.__proto__ || Object.getPrototypeOf(Session)).call(this, options));\n\n    _this2.setters = {\n\n      /**\n       * Start session\n       */\n      start: function start() {\n        var _this3 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return $.Deferred(function () {\n          var _ref = _asyncToGenerator(function* (d) {\n            try {\n              var features = yield (0, _promisify.promisify)(_this3._editor.start(options));\n              _this3.state.started = true;\n              d.resolve(features);\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n          });\n\n          return function (_x4) {\n            return _ref.apply(this, arguments);\n          };\n        }()).promise();\n      },\n\n\n      /**\n       * stop session\n       */\n      stop: function stop() {\n        var _this4 = this;\n\n        return $.Deferred(function () {\n          var _ref2 = _asyncToGenerator(function* (d) {\n            var canStop = _this4.state.started || _this4.state.getfeatures;\n            if (!canStop) {\n              return d.resolve();\n            }\n            try {\n              yield (0, _promisify.promisify)(_this4._editor.stop());\n              _this4.clear();\n              d.resolve();\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n          });\n\n          return function (_x5) {\n            return _ref2.apply(this, arguments);\n          };\n        }()).promise();\n      },\n\n\n      /**\n       * Get features from server (by editor)\n       */\n      getFeatures: function getFeatures() {\n        var _this5 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return $.Deferred(function () {\n          var _ref3 = _asyncToGenerator(function* (d) {\n            if (_this5._allfeatures) {\n              return d.resolve([]);\n            }\n            _this5._allfeatures = !options.filter;\n            try {\n              var features = yield (0, _promisify.promisify)(_this5._editor.getFeatures(options));\n              _this5.state.getfeatures = true;\n              d.resolve(features);\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n          });\n\n          return function (_x7) {\n            return _ref3.apply(this, arguments);\n          };\n        }()).promise();\n      },\n\n\n      /**\n       * Hook to get informed that are saved on server\n       * \n       * @param commitItems\n       */\n      saveChangesOnServer: function saveChangesOnServer(commitItems) {}\n    };\n\n    _this2.state = {\n      id: options.id,\n      started: false,\n      getfeatures: false,\n      /** maximum \"buffer history\" lenght for undo/redo */\n      maxSteps: 10,\n      /** current state of history (useful for undo /redo) */\n      current: null,\n      /** temporary change not save on history */\n      changes: []\n    };\n\n    /**\n     * Array of states of a layer in editing\n     * {\n     * _states: [\n     *     {\n     *       id: unique key\n     *       state: [state] // example: history contsins features state\n     *                      // array because a tool can apply changes to more than one features at time (split di una feature)\n     *     },\n     *     {\n     *       id: unique key\n     *       state: [state]\n     *     },\n     *   ]\n     *     ....\n     *\n     *  _current: unique key // usefult to undo redo\n     *\n     *\n     */\n    _this2._states = [];\n\n    /** reactive state of history */\n    _this2._constrains = {\n      commit: false,\n      undo: false,\n      redo: false\n    },\n\n    // editor\n    _this2._editor = options.editor;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this2._history = {\n      id: _this2.state.id,\n      state: new Proxy({}, { get: function get(_, prop) {\n          return _this2._constrains[prop];\n        } }),\n      add: _this2.__add.bind(_this2),\n      getRelationStates: _this2.__getRelationStates.bind(_this2),\n      insertState: _this2.__insertState.bind(_this2),\n      removeState: _this2.deleteState.bind(_this2),\n      removeStates: _this2.removeChangesFromHistory.bind(_this2),\n      insertStates: _this2.__insertStates.bind(_this2),\n      undo: _this2.__undo.bind(_this2),\n      clear: _this2.clearHistory.bind(_this2),\n      redo: _this2.__redo.bind(_this2),\n      setItemsFeatureIds: _this2.__setItemsFeatureIds.bind(_this2),\n      getState: _this2.__getState.bind(_this2),\n      getFirstState: _this2.__getFirstState.bind(_this2),\n      getLastState: _this2.getLastHistoryState.bind(_this2),\n      getCurrentState: _this2.__getCurrentState.bind(_this2),\n      getCurrentStateIndex: _this2.__getCurrentStateIndex.bind(_this2),\n      canCommit: _this2.__canCommit.bind(_this2),\n      canUndo: _this2.__canUndo.bind(_this2),\n      canRedo: _this2.__canRedo.bind(_this2),\n      commit: _this2.__commit.bind(_this2)\n    };\n\n    // register this session on session registry\n    _this2.register();\n    return _this2;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n   * \n   * check if was done an update (update are array contains two items, old and new value)\n   *\n   * @since g3w-client-plugin-editing@v3.8.0\n   */\n\n\n  _createClass(Session, [{\n    key: '_checkSessionItems',\n    value: function _checkSessionItems(historyId, items, action) {\n      /**\n       * action: <reffererd to array index>\n       *  0: undo;\n       *  1: redo;\n       **/\n      var newItems = {\n        own: [], //array of changes of layer of the current session\n        dependencies: {} // dependencies\n      };\n\n      items.forEach(function (item) {\n        if (Array.isArray(item)) {\n          item = item[action];\n        }\n        // check if belong to session\n        if (historyId === item.layerId) {\n          newItems.own.push(item);\n        } else {\n          newItems.dependencies[item.layerId] = newItems.dependencies[item.layerId] || {\n            own: [],\n            dependencies: {}\n          };\n          newItems.dependencies[item.layerId].own.push(item);\n        }\n      });\n\n      return newItems;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.state.id;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {*|null}\n     */\n\n  }, {\n    key: 'getLastHistoryState',\n    value: function getLastHistoryState() {\n      return this._states.length ? this._states[this._states.length - 1] : null;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getLastStateId',\n    value: function getLastStateId() {\n      return this.getLastHistoryState().id;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param stateId\n     */\n\n  }, {\n    key: 'deleteState',\n    value: function deleteState(stateId) {\n      var i = this._states.findIndex(function (s) {\n        return s.id === stateId;\n      });\n      console.assert(i >= 0, 'invalid stateId ' + stateId);\n      if (this.state.current === stateId) {\n        this.state.current = this._states.length > 1 ? this._states[i - 1].id : null;\n      }\n      this._states.splice(i, 1);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'register',\n    value: function register() {\n      Session.Registry.register(this);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'unregister',\n    value: function unregister() {\n      Session.Registry.unregister(this.getId());\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isStarted',\n    value: function isStarted() {\n      return this.state.started;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getEditor',\n    value: function getEditor() {\n      return this._editor;\n    }\n\n    /**\n     * @param editor\n     */\n\n  }, {\n    key: 'setEditor',\n    value: function setEditor(editor) {\n      this._editor = editor;\n    }\n\n    /**\n     * Save temporary changes to the layer in history instance and feature store\n     * \n     * @param options\n     */\n\n  }, {\n    key: 'save',\n    value: function save() {\n      var _this6 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      //fill history\n      var d = $.Deferred();\n      // add temporary modify to history\n      if (this.state.changes.length) {\n        var uniqueId = options.id || Date.now();\n        this._history.add(uniqueId, this.state.changes).then(function () {\n          // clear to temporary changes\n          _this6.state.changes = [];\n          // resolve if unique id\n          d.resolve(uniqueId);\n        });\n      } else {\n        d.resolve(null);\n      }\n      return d.promise();\n    }\n\n    /**\n     * @param feature\n     */\n\n  }, {\n    key: 'updateTemporaryChanges',\n    value: function updateTemporaryChanges(feature) {\n      this.state.changes.forEach(function (c) {\n        return c.feature.setProperties(feature.getProperties());\n      });\n    }\n\n    /**\n     * Add temporary feature\n     * \n     * @param layerId \n     * @param feature \n     * @param removeNotEditableProperties  \n     */\n\n  }, {\n    key: 'pushAdd',\n    value: function pushAdd(layerId, feature) {\n      var removeNotEditableProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      /**\n       * @TODO check if it need to deprecate it. All properties are need\n       * Please take care of this to understand\n       * In case of removeNotEditableProperties true, remove not editable field\n       * from feature properties\n       */\n      var editor = layerId === this.getId() ? this._editor : Session.Registry.getSession(layerId).getEditor();\n\n      // remove not editable proprierties from feature\n      if (removeNotEditableProperties) {\n        (editor.getLayer().getEditingNotEditableFields() || []).forEach(function (f) {\n          return feature.unset([f]);\n        });\n      }\n\n      var newFeature = feature.clone();\n\n      this.push({ layerId: layerId, feature: newFeature.add() });\n\n      return newFeature;\n    }\n\n    /**\n     * Delete temporary feature\n     * \n     * @param layerId \n     * @param feature \n     */\n\n  }, {\n    key: 'pushDelete',\n    value: function pushDelete(layerId, feature) {\n      this.push({ layerId: layerId, feature: feature.delete() });\n      return feature;\n    }\n\n    /**\n     * Add temporary feature changes\n     * \n     * @param layerId\n     * @param newFeature\n     * @param oldFeature\n     */\n\n  }, {\n    key: 'pushUpdate',\n    value: function pushUpdate(layerId, newFeature, oldFeature) {\n      // get index of temporary changes\n      var is_new = newFeature.isNew();\n      var i = is_new && this.state.changes.findIndex(function (c) {\n        return layerId === c.layerId && c.feature.getId() === newFeature.getId();\n      });\n\n      // in case of new feature\n      if (is_new && i >= 0) {\n        var feature = newFeature.clone();\n        feature.add();\n        this.state.changes[i].feature = feature;\n        return;\n      }\n\n      this.push({ layerId: layerId, feature: newFeature.update() }, { layerId: layerId, feature: oldFeature.update() });\n    }\n\n    /**\n     * @param stateIds\n     */\n\n  }, {\n    key: 'removeChangesFromHistory',\n    value: function removeChangesFromHistory() {\n      var _this7 = this;\n\n      var stateIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      (stateIds || []).forEach(function (s) {\n        return _this7.deleteState(s);\n      });\n    }\n\n    /**\n     * @returns { Object } state ids\n     */\n\n  }, {\n    key: 'moveRelationStatesOwnSession',\n    value: function moveRelationStatesOwnSession() {\n      var ids = {};\n\n      var _getCommitItems = this.getCommitItems(),\n          relations = _getCommitItems.relations;\n\n      for (var id in relations) {\n        var states = this._history.getRelationStates(id);\n        Session.Registry.getSession(id)._history.insertStates(states);\n        ids[id] = states.map(function (s) {\n          return s.id;\n        });\n      }\n      return ids;\n    }\n\n    /**\n     * Add temporary features that will be added with save method\n     * \n     * @param { { layerId: string, feature: * } } NewFeat \n     * @param { { layerId: string, feature: * } } OldFeat\n     */\n\n  }, {\n    key: 'push',\n    value: function push(newFeat, oldFeat) {\n      this.state.changes.push(oldFeat ? [oldFeat, newFeat] : newFeat); // check is set old (edit)\n    }\n\n    /**\n     * Revert (cancel) all changes in history and clean session\n     */\n\n  }, {\n    key: 'revert',\n    value: function revert() {\n      var _this8 = this;\n\n      var d = $.Deferred();\n      this._editor.revert().then(function () {\n        _this8.clearHistory();\n        d.resolve();\n      });\n      return d.promise();\n    }\n\n    /**\n     * @param changes\n     */\n\n  }, {\n    key: 'rollback',\n    value: function rollback(changes) {\n      // skip when..\n      if (changes) {\n        return this._editor.rollback(changes);\n      }\n\n      // Handle temporary changes of layer\n      var d = $.Deferred();\n      var id = this.getId();\n      changes = {\n        own: [],\n        dependencies: {}\n      };\n      this.state.changes.forEach(function (c) {\n        var change = Array.isArray(c) ? c[0] : c;\n        if (change.layerId === id) {\n          changes.own.push(change);\n        } else {\n          if (!changes.dependencies[change.layerId]) {\n            changes.dependencies[change.layerId] = [];\n          }\n          // FILO\n          changes.dependencies[change.layerId].unshift(change);\n        }\n      });\n\n      this._editor.rollback(changes.own).then(function () {\n        for (var _id in changes.dependencies) {\n          Session.Registry.getSession(_id).rollback(changes.dependencies[_id]);\n        }\n        d.resolve(changes.dependencies);\n      });\n\n      this.state.changes = [];\n\n      return d.promise();\n    }\n\n    /**\n     * Rollback child changes of current session\n     * \n     * @param ids [array of child layer id]\n     */\n\n  }, {\n    key: 'rollbackDependecies',\n    value: function rollbackDependecies() {\n      var _this9 = this;\n\n      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      ids.forEach(function (id) {\n        var changes = [];\n        _this9.state.changes = _this9.state.changes.filter(function (temporarychange) {\n          if (temporarychange.layerId === id) {\n            changes.push(temporarychange);\n            return false;\n          }\n        });\n        changes.length && Session.Registry.getSession(id).rollback(changes);\n      });\n    }\n\n    /**\n     * undo method\n     * \n     * @param items \n     */\n\n  }, {\n    key: 'undo',\n    value: function undo(items) {\n      items = items || this._history.undo();\n      this._editor.setChanges(items.own, true);\n      this._history.canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * redo method\n     * \n     * @param items \n     */\n\n  }, {\n    key: 'redo',\n    value: function redo(items) {\n      items = items || this._history.redo();\n      this._editor.setChanges(items.own, true);\n      this._history.canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * Serialize commit\n     * \n     * @returns {{ add: *[], update: *[], relations: {}, delete: *[] }} JSON Object for a commit body send to server\n     */\n\n  }, {\n    key: 'getCommitItems',\n    value: function getCommitItems() {\n      var _this10 = this;\n\n      var itemsToCommit = this._history.commit();\n      var id = this.getId();\n      var state = void 0;\n      var layer = void 0;\n      var commitObj = {\n        add: [], // features to add\n        update: [], // features to update\n        delete: [], // features to delete\n        relations: {} // relation features\n      };\n      // key is a layer id that has changes to apply\n      for (var key in itemsToCommit) {\n        var isRelation = false; //set relation to false\n        var items = itemsToCommit[key];\n        // case key (layer id) is not equal to id (current layer id on editing)\n        if (key !== id) {\n          isRelation = true; //set true because these changes belong to features relation items\n          var sessionRelation = Session.Registry.getSession(key);\n          //check lock ids of relation layer\n          var lockids = sessionRelation ? sessionRelation.getEditor().getLockIds() : [];\n          //create a relations object\n          commitObj.relations[key] = {\n            lockids: lockids,\n            add: [],\n            update: [],\n            delete: [],\n            relations: {} //@since v3.7.1\n          };\n          layer = commitObj.relations[key];\n        } else {\n          layer = commitObj;\n        }\n\n        items.forEach(function (item) {\n          //check state of feature item\n          state = item.getState();\n          var GeoJSONFormat = new ol.format.GeoJSON();\n          switch (state) {\n            //item needs to be deleted\n            case 'delete':\n              //check if is new. If is new mean is not present on server\n              //so no need to say to server to delete it\n              if (!item.isNew()) {\n                layer.delete.push(item.getId());\n              }\n              break;\n            default:\n              //convert feature to json ex. {geometry:{tye: 'Point'}, properties:{}.....}\n              var itemObj = GeoJSONFormat.writeFeatureObject(item);\n              //get properties\n              var childs_properties = item.getProperties();\n              for (var p in itemObj.properties) {\n                // in case the value of property is an object\n                if (itemObj.properties[p] && _typeof(itemObj.properties[p]) === 'object' && itemObj.properties[p].constructor === Object) {\n                  //need to get value from value attribute object\n                  itemObj.properties[p] = itemObj.properties[p].value;\n                }\n                // @TODO explain when this condition happen\n                if (undefined === itemObj.properties[p] && childs_properties[p]) {\n                  itemObj.properties[p] = childs_properties[p];\n                }\n              }\n              // in case of add it have to remove not editable properties\n              layer[item.isNew() ? 'add' : item.getState()].push(itemObj);\n              break;\n          }\n        });\n        // check in case of no edit remove relation key\n        if (isRelation && layer.add.length === 0 //no relation features to add\n        && layer.update.length === 0 //no relation features to update\n        && layer.delete.length === 0 //no relation features to delete\n        ) {\n            delete commitObj.relations[key];\n          }\n      }\n\n      // Remove deep relations from current layer (commitObj) that are not relative to that layer\n      var relations = Object.keys(commitObj.relations || {});\n      relations.filter(function (id) {\n        return undefined === _this10._editor.getLayer().getRelations().getArray().find(function (r) {\n          return id === r.getChild();\n        });\n      }) // child relations\n      .map(function (id) {\n        commitObj.relations[Session.Registry.getSession(id).getEditor().getLayer().getRelations().getArray().find(function (r) {\n          return -1 !== relations.indexOf(r.getFather());\n        }) // parent relation layer\n        .getFather()].relations[id] = commitObj.relations[id];\n        return id;\n      }).forEach(function (id) {\n        return delete commitObj.relations[id];\n      });\n\n      return commitObj;\n    }\n\n    /**\n     * Set geometry: {type} of geojson to a 3D type if needed\n     * \n     * @param layerId\n     * @param commitItems\n     */\n\n  }, {\n    key: 'set3DGeometryType',\n    value: function set3DGeometryType() {\n      var _this11 = this;\n\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$layerId = _ref4.layerId,\n          layerId = _ref4$layerId === undefined ? this.getId() : _ref4$layerId,\n          commitItems = _ref4.commitItems;\n\n      var relations = commitItems.relations;\n\n      var editingLayer = MapLayersStoresRegistry.getLayerById(layerId).getEditingLayer();\n      // check id there is editing layer and if is a vector layer\n      if (editingLayer && g3wsdk.core.layer.Layer.LayerTypes.VECTOR === editingLayer.getType()) {\n        // get Geometry type layer\n        var geometryType = editingLayer.getGeometryType();\n        // if is a 3D layer i set on geoJON before send it to server\n        if (g3wsdk.core.geoutils.Geometry.is3DGeometry(geometryType)) {\n          ['add', 'update'].forEach(function (action) {\n            return commitItems[action].forEach(function (feature) {\n              return feature.geometry.type = geometryType;\n            });\n          });\n        }\n      }\n      // the same control of relations layers\n      Object.keys(relations).forEach(function (layerId) {\n        return _this11.set3DGeometryType({\n          layerId: layerId,\n          commitItems: relations[layerId]\n        });\n      });\n    }\n\n    /**\n     * Commit changes on server (save)\n     * \n     * @param opts.ids\n     * @param opts.items\n     * @param opts.relations\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit() {\n      var _this12 = this;\n\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$ids = _ref5.ids,\n          ids = _ref5$ids === undefined ? null : _ref5$ids,\n          items = _ref5.items,\n          _ref5$relations = _ref5.relations,\n          relations = _ref5$relations === undefined ? true : _ref5$relations,\n          _ref5$__esPromise = _ref5.__esPromise,\n          __esPromise = _ref5$__esPromise === undefined ? false : _ref5$__esPromise;\n\n      var d = $.Deferred();\n\n      var commit = void 0; // committed items\n\n      // skip when ..\n      if (ids) {\n        commit = this._history.commit(ids);\n        this.clearHistory(ids);\n        return d.promise();\n      }\n\n      commit = items || this.getCommitItems(this._history.commit());\n\n      if (!relations) {\n        commit.relations = {};\n      }\n\n      this._editor.commit(commit).then(function (response) {\n\n        // skip when response is null or undefined and response.result is false\n        if (!(response && response.result)) {\n          d.reject(response);\n          return;\n        }\n\n        var _response$response$ne = response.response.new_relations,\n            new_relations = _response$response$ne === undefined ? {} : _response$response$ne; // check if new relations are saved on server\n\n        // sync server data with local data\n\n        for (var id in new_relations) {\n          Session.Registry.getSession(id) // get session of relation by id\n          .getEditor().applyCommitResponse({ // apply commit response to current editing relation layer\n            response: new_relations[id],\n            result: true\n          });\n        }\n\n        _this12.clearHistory();\n\n        _this12.saveChangesOnServer(commit); // dispatch setter event.\n\n        // ES6 promises only accept a single response\n        if (__esPromise) {\n          d.resolve({ commit: commit, response: response });\n        } else {\n          d.resolve(commit, response);\n        }\n      }).fail(function (err) {\n        return d.reject(err);\n      });\n\n      return d.promise();\n    }\n\n    /**\n     * Clear all things bind to session\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._allfeatures = false;\n      this.state.started = false;\n      this.state.getfeatures = false;\n      this.clearHistory();\n    }\n\n    /**\n     * @returns history\n     */\n\n  }, {\n    key: 'getHistory',\n    value: function getHistory() {\n      return this._history;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param ids since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'clearHistory',\n    value: function clearHistory(ids) {\n      var _this13 = this;\n\n      if (ids) {\n        this._states.forEach(function (state, idx) {\n          if (ids.indexOf(state.id) !== -1) {\n            if (_this13.state.current && _this13.state.current === state.id()) {\n              _this13._history.undo();\n            }\n            _this13._states.splice(idx, 1);\n          }\n        });\n      } else {\n        // clear all\n        this._states = [];\n        this.state.current = null;\n        this._constrains.commit = false;\n        this._constrains.redo = false;\n        this._constrains.undo = false;\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param uniqueId\n     * @param items\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__add',\n    value: function __add(uniqueId, items) {\n      var _this14 = this;\n\n      //state object is an array of feature/features changed in a transaction\n      var d = $.Deferred();\n      // before insert an item into the history\n      // check if are at last state step (no redo was done)\n      // If we are in the middle of undo, delete all changes\n      // in the history from the current \"state\" so if it\n      // can create a new history\n      if (null === this.state.current) {\n        this._states = [{ id: uniqueId, items: items }];\n      } else {\n        if (this._states.length > 0 && this.state.current < this.getLastStateId()) {\n          this._states = this._states.filter(function (s) {\n            return s.id <= _this14.state.current;\n          });\n        }\n        this._states.push({ id: uniqueId, items: items });\n      }\n\n      this.state.current = uniqueId;\n      // set internal state\n      this._history.canUndo();\n      this._history.canCommit();\n      this._history.canRedo();\n      // return unique id key\n      // it can be used in save relation\n      d.resolve(uniqueId);\n      return d.promise();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param layerId\n     * @param clear\n     * \n     * @returns { Array }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getRelationStates',\n    value: function __getRelationStates(layerId) {\n      var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref6$clear = _ref6.clear,\n          clear = _ref6$clear === undefined ? false : _ref6$clear;\n\n      var relationStates = [];\n      for (var i = 0; i < this._states.length; i++) {\n        var state = this._states[i];\n        var items = state.items.filter(function (item) {\n          return (Array.isArray(item) ? item[0].layerId : item.layerId) === layerId;\n        });\n        if (items.length > 0) {\n          relationStates.push({ id: state.id, items: items });\n        }\n      }\n      return relationStates;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param state\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__insertState',\n    value: function __insertState(state) {\n      var stateId = state.id;\n      var index = this._states.length;\n      for (var i = 0; i < this._states.length; i++) {\n        var _state = this._states[i];\n        if (_state.id > stateId) {\n          index = i;\n          break;\n        } else if (_state.id === stateId) {\n          index = -1;\n          break;\n        }\n      }\n      if (index > -1) {\n        if (this.state.current < stateId) {\n          this.state.current = stateId;\n        }\n        this._states.splice(index, 0, state);\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param states\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__insertStates',\n    value: function __insertStates() {\n      var states = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      for (var i = 0; i < states.length; i++) {\n        this._history.insertState(states[i]);\n      }\n      this._history.canCommit();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * undo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__undo',\n    value: function __undo() {\n      var _this15 = this;\n\n      var items = void 0;\n      if (this.state.current === this._history.getFirstState().id) {\n        this.state.current = null;\n        items = this._states[0].items;\n      } else {\n        this._states.find(function (state, idx) {\n          if (state.id === _this15.state.current) {\n            items = _this15._states[idx].items;\n            _this15.state.current = _this15._states[idx - 1].id;\n            return true;\n          }\n        });\n      }\n      items = this._checkSessionItems(this._history.id, items, 0);\n      // set internal state\n      this._history.canUndo();\n      this._history.canCommit();\n      this._history.canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * redo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__redo',\n    value: function __redo() {\n      var _this16 = this;\n\n      var items = void 0;\n      // if not set get first state\n      if (!this.state.current) {\n        items = this._states[0].items;\n        // set current to first\n        this.state.current = this._states[0].id;\n      } else {\n        this._states.find(function (state, idx) {\n          if (_this16.state.current === state.id) {\n            _this16.state.current = _this16._states[idx + 1].id;\n            items = _this16._states[idx + 1].items;\n            return true;\n          }\n        });\n      }\n      items = this._checkSessionItems(this._history.id, items, 1);\n      // set internal state\n      this._history.canUndo();\n      this._history.canCommit();\n      this._history.canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param { Array } unsetnewids\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__setItemsFeatureIds',\n    value: function __setItemsFeatureIds() {\n      var _this17 = this;\n\n      var unsetnewids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      unsetnewids.forEach(function (unsetnewid) {\n        _this17._states.forEach(function (state) {\n          state.items.forEach(function (item) {\n            var feature = item.feature.getId() === unsetnewid.clientid && item.feature;\n            if (feature) {\n              feature.setId(unsetnewid.id);\n            }\n          });\n        });\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param id\n     * \n     * @returns {T}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getState',\n    value: function __getState(id) {\n      return this._states.find(function (s) {\n        return s.id === id;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {*|null}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getFirstState',\n    value: function __getFirstState() {\n      return this._states.length ? this._states[0] : null;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {null}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getCurrentState',\n    value: function __getCurrentState() {\n      var _this18 = this;\n\n      var currentState = null;\n      if (this.state.current && this._states.length) {\n        currentState = this._states.find(function (state) {\n          return _this18.state.current === state.id;\n        });\n      }\n      return currentState;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @returns { number | null } index of current state\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getCurrentStateIndex',\n    value: function __getCurrentStateIndex() {\n      var _this19 = this;\n\n      var currentStateIndex = null;\n      if (this.state.current && this._states.length) {\n        this._states.forEach(function (state, idx) {\n          if (_this19.state.current === state.id) {\n            currentStateIndex = idx;\n            return false;\n          }\n        });\n      }\n      return currentStateIndex;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @returns { boolean } true if we can commit\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canCommit',\n    value: function __canCommit() {\n      var checkCommitItems = this._history.commit();\n      var canCommit = false;\n      for (var layerId in checkCommitItems) {\n        var commitItem = checkCommitItems[layerId];\n        canCommit = canCommit || commitItem.length > 0;\n      }\n      this._constrains.commit = canCommit;\n      return this._constrains.commit;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canUdo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canUndo',\n    value: function __canUndo() {\n      var steps = this._states.length - 1 - this._history.getCurrentStateIndex();\n      this._constrains.undo = null !== this.state.current && this.state.maxSteps > steps;\n      return this._constrains.undo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canRedo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canRedo',\n    value: function __canRedo() {\n      this._constrains.redo = this.getLastHistoryState() && this.getLastStateId() != this.state.current || null === this.state.current && this._states.length > 0;\n      return this._constrains.redo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * get all changes to send to server (mandare al server)\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__commit',\n    value: function __commit() {\n      var _this20 = this;\n\n      var commitItems = {};\n      var statesToCommit = this._states.filter(function (s) {\n        return s.id <= _this20.state.current;\n      });\n      statesToCommit.forEach(function (state) {\n        state.items.forEach(function (item) {\n          var add = true;\n          if (Array.isArray(item)) {\n            item = item[1];\n          }\n          if (commitItems[item.layerId]) {\n            commitItems[item.layerId].forEach(function (commitItem, index) {\n              // check if already inserted feature\n              if (commitItem.getUid() === item.feature.getUid()) {\n                if (item.feature.isNew() && !commitItem.isDeleted() && item.feature.isUpdated()) {\n                  var _item = item.feature.clone();\n                  _item.add();\n                  commitItems[item.layerId][index] = _item;\n                } else if (item.feature.isNew() && item.feature.isDeleted()) {\n                  commitItems[item.layerId].splice(index, 1);\n                } else if (item.feature.isUpdated() || item.feature.isDeleted()) {\n                  commitItems[item.layerId][index] = item.feature;\n                }\n                add = false;\n                return false;\n              }\n            });\n          }\n          if (add) {\n            var feature = item.feature;\n            var layerId = item.layerId;\n            if (!(!feature.isNew() && feature.isAdded())) {\n              if (!commitItems[layerId]) {\n                commitItems[layerId] = [];\n              }\n              commitItems[layerId].push(feature);\n            }\n          }\n        });\n      });\n      return commitItems;\n    }\n  }]);\n\n  return Session;\n}(g3wsdk.core.G3WObject);\n\n/** @type { Object<string, Session> } */\n\n\nvar sessions = {};\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/store/sessions.js@v3.9.1\n *\n * Store user session (login / logout)\n *\n * @since g3w-client-plugin-editing@v3.8.0\n */\nSession.Registry = {\n  _sessions: sessions,\n  register: function register(session) {\n    sessions[session.getId()] = session;\n  },\n  unregister: function unregister(id) {\n    delete sessions[id];\n  },\n  getSession: function getSession(id) {\n    return sessions[id];\n  },\n  setSession: function setSession(id, session) {\n    sessions[id] = session;\n  },\n  getSessions: function getSessions() {\n    return sessions;\n  },\n  clear: function clear() {\n    Object.keys(sessions).forEach(Session.Registry.unregister);\n  }\n};\n\n},{\"../../utils/promisify\":66}],11:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @file shared vue instance used to watch object changes or to emit events\n * \n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar VM = exports.VM = new Vue();\n\nexports.default = { VM: VM };\n\n},{}],12:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _toolbox = require('../../toolboxes/toolbox');\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ORIGINAL SOURCE: g3w-client/src/core/editing/editor.js@v3.9.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @since g3w-client-plugin-editing@v3.8.x\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    G3WObject = _g3wsdk$core.G3WObject;\nvar FeaturesStore = g3wsdk.core.layer.features.FeaturesStore;\nvar Layer = g3wsdk.core.layer.Layer;\n\n/**\n * ORIGINAL SOURE: g3w-client/src/app/core/layers/features/olfeaturesstore.js@v3.10.2\n */\n\nvar OlFeaturesStore = function (_FeaturesStore) {\n  _inherits(OlFeaturesStore, _FeaturesStore);\n\n  function OlFeaturesStore() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, OlFeaturesStore);\n\n    var _this = _possibleConstructorReturn(this, (OlFeaturesStore.__proto__ || Object.getPrototypeOf(OlFeaturesStore)).call(this, opts));\n\n    _this._features = opts.features || new ol.Collection([]);\n    return _this;\n  }\n\n  /**\n   * Get number of features stored\n   * @return { Number }\n   */\n\n\n  _createClass(OlFeaturesStore, [{\n    key: 'getLength',\n    value: function getLength() {\n      return this._features.getLength();\n    }\n\n    /**\n     * Store features\n     * @param { Array } features\n     */\n\n  }, {\n    key: 'setFeatures',\n    value: function setFeatures() {\n      var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      //remove features\n      this._features.clear();\n      //add new features\n      this.addFeatures(features);\n      this._features.dispatchEvent('change');\n    }\n  }, {\n    key: 'readFeatures',\n\n\n    /**\n     * @returns {*[]}\n     */\n    value: function readFeatures() {\n      return this._features.getArray();\n    }\n  }, {\n    key: 'getFeaturesCollection',\n\n\n    /**\n     * @return {*|ol.Collection}\n     */\n    value: function getFeaturesCollection() {\n      return this._features;\n    }\n\n    /**\n     * @param id\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getFeatureById',\n    value: function getFeatureById(id) {\n      return this._features.getArray().find(function (f) {\n        return id == f.getId();\n      });\n    }\n  }, {\n    key: 'getFeatureByUid',\n    value: function getFeatureByUid(uid) {\n      return this._features.getArray().find(function (f) {\n        return uid === f.getUid();\n      });\n    }\n\n    /**\n     *\n     * @param feature\n     * @private\n     */\n\n  }, {\n    key: '_addFeature',\n    value: function _addFeature(feature) {\n      this._features.push(feature);\n      // useful for ol.source.Vector\n      this._features.dispatchEvent('change');\n    }\n\n    /**\n     * Substitute the feature after modifying\n     * @param feature\n     * @private\n     */\n\n  }, {\n    key: '_updateFeature',\n    value: function _updateFeature(feature) {\n      var index = this._features.getArray().findIndex(function (f) {\n        return feature.getUid() === f.getUid();\n      });\n      if (index >= 0) {\n        this._features.removeAt(index);\n        this._features.insertAt(index, feature);\n        this._features.dispatchEvent('change');\n      }\n    }\n\n    /**\n     * Remove feature from store\n     * @param feature\n     * @private\n     */\n\n  }, {\n    key: '_removeFeature',\n    value: function _removeFeature(feature) {\n      var index = this._features.getArray().findIndex(function (f) {\n        return feature.getUid() === f.getUid();\n      });\n      if (index >= 0) {\n        this._features.removeAt(index);\n        this._features.dispatchEvent('change');\n      }\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_clearFeatures',\n    value: function _clearFeatures() {\n      try {\n        // Used remove single features instead use clear method\n        // because some time trows an error\n        for (var i = 0; i < this._features.getArray().length; i++) {\n          this._features.removeAt(i);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n      //Need to set a new Collection to avoid duplicate\n      this._features = null; //@TODO is still usefully ????\n      this._features = new ol.Collection([]);\n    }\n  }]);\n\n  return OlFeaturesStore;\n}(FeaturesStore);\n\n/**\n * Editor Class: bind editor to layer to do main actions\n *\n * @param config\n *\n * @constructor\n */\n\n\nvar Editor = function (_G3WObject) {\n  _inherits(Editor, _G3WObject);\n\n  function Editor() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Editor);\n\n    /**\n     * Setter hooks.\n     */\n    var _this2 = _possibleConstructorReturn(this, (Editor.__proto__ || Object.getPrototypeOf(Editor)).call(this));\n\n    _this2.setters = {\n      save: function save() {\n        this._layer.save();\n      },\n      addFeature: function addFeature(feature) {\n        this._featuresstore.addFeature(feature);\n      },\n      updateFeature: function updateFeature(feature) {\n        this._featuresstore.updateFeature(feature);\n      },\n      deleteFeature: function deleteFeature(feature) {\n        this._featuresstore.deleteFeature(feature);\n      },\n      setFeatures: function setFeatures() {\n        var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        this._featuresstore.setFeatures(features);\n      },\n\n      /**\n       * Get features from server method.\n       * Used when vector Layer's bbox is contained into an already requested bbox (so no a new request is done).\n       *\n       * @param { number[] } options.filter.bbox bounding box Array [xmin, ymin, xmax, ymax]\n       *\n       * @returns { boolean } whether can perform a server request\n       */\n      getFeatures: function getFeatures() {\n        var _this3 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        // skip is not onlien or all features of layers are already got\n        if (!ApplicationState.online || this._allfeatures) {\n          return (0, _promisify.$promisify)(Promise.resolve());\n        }\n\n        return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n\n          var doRequest = true; // default --> perform request\n\n          var _ref2 = options.filter || {},\n              bbox = _ref2.bbox;\n          //check if bbox options filter (bbox of a current map) is passed and is a vector layer\n\n\n          var is_vector = bbox && Layer.LayerTypes.VECTOR === _this3._layer.getType();\n\n          // first request --> need to perform request\n          if (is_vector && null === _this3._filter.bbox) {\n            _this3._filter.bbox = bbox; // store bbox\n            doRequest = true;\n          }\n\n          // subsequent requests --> check if bbox is contained into an already requested bbox\n          else if (is_vector) {\n              //Boolean - Check if features are already got inside bbox\n              var is_cached = ol.extent.containsExtent(_this3._filter.bbox, bbox);\n              if (!is_cached) {\n                _this3._filter.bbox = ol.extent.extend(_this3._filter.bbox, bbox);\n              }\n              doRequest = !is_cached;\n            }\n\n          /** @TODO simplfy nested promises */\n          if (doRequest) {\n            var features = yield (0, _promisify.promisify)(_this3._layer.getFeatures(options));\n            // add features from server to editing features store (cloned from original)\n            _this3._featuresstore.addFeatures((features || []).map(function (f) {\n              return f.clone();\n            }));\n            //set all features to true if no filter is set (e.g., Table layer)\n            _this3._allfeatures = !options.filter;\n            return features;\n          }\n        }));\n      }\n    };\n\n    /**\n     * Filter to getFeaturerequest\n     */\n    _this2._filter = {\n      bbox: null\n    };\n\n    /**\n     * { Boolean } true, mean all features of layer are get (e.g. Table layer)\n     */\n    _this2._allfeatures = false;\n\n    /**\n     * Referred layer\n     */\n    _this2._layer = options.layer;\n\n    /**\n     * Store editing features\n     * \n     * @type { FeaturesStore | OlFeaturesStore }\n     */\n    _this2._featuresstore = Layer.LayerTypes.TABLE === _this2._layer.getType() ? new FeaturesStore() : new OlFeaturesStore();\n\n    /**\n     * Whether editor is active or not\n     *\n     * @type { boolean }\n     */\n    _this2._started = false;\n\n    return _this2;\n  }\n\n  /**\n   * Get editing source layer feature\n   * \n   * @returns { FeaturesStore | OlFeaturesStore }\n   */\n\n\n  _createClass(Editor, [{\n    key: 'getEditingSource',\n    value: function getEditingSource() {\n      return this._featuresstore;\n    }\n\n    /**\n     * get Source\n     */\n\n  }, {\n    key: 'getSource',\n    value: function getSource() {\n      this._layer.getSource();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/services/editing.js@v3.9.1\n     * \n     * Apply changes to source features (undo/redo)\n     * \n     * @param items\n     * @param { boolean } reverse whether change to opposite\n     */\n\n  }, {\n    key: 'setChanges',\n    value: function setChanges() {\n      var _this4 = this;\n\n      var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      /** known actions */\n      var Actions = {\n        'add': { fnc: 'addFeature', opposite: 'delete' },\n        'delete': { fnc: 'removeFeature', opposite: 'add' },\n        'update': { fnc: 'updateFeature', opposite: 'update' }\n      };\n      items.forEach(function (item) {\n        if (reverse) {\n          item.feature[Actions[item.feature.getState()].opposite]();\n        }\n        // get method from object\n        _this4._featuresstore[Actions[item.feature.getState()].fnc](item.feature);\n      });\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getLayer',\n    value: function getLayer() {\n      return this._layer;\n    }\n\n    /**\n     * @param layer\n     */\n\n  }, {\n    key: 'setLayer',\n    value: function setLayer(layer) {\n      return this._layer = layer;\n    }\n\n    /**\n     * Rollback changes\n     * \n     * @param changes\n     * \n     * @returns {*}\n     */\n\n  }, {\n    key: 'rollback',\n    value: function rollback() {\n      var _this5 = this;\n\n      var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      return (0, _promisify.$promisify)(function () {\n        return _this5.setChanges(changes, true);\n      });\n    }\n\n    /**\n     * Apply response data from server in case of new inserted feature\n     * @param { Object } response\n     * @param response.response.new            array of new ids\n     * @param response.response.new.clientid   temporary id created by client __new__\n     * @param response.response.new.id         the new id created and stored on server\n     * @param response.response.new.properties properties of the feature saved on server\n     * @param response.response.new_lockids    array of new lockIds\n     * \n     * @param relations\n     */\n\n  }, {\n    key: 'applyCommitResponse',\n    value: function applyCommitResponse() {\n      var _this6 = this;\n\n      var response = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var relations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\n      // skip when no response and response.result is false\n      if (!(response && response.result)) {\n        return;\n      }\n\n      //Loop on new features saved on server\n      // clientid - temporary id of new feature\n      // id - id saved on server (autogenerate, next value) to subtituite to clientid feature id\n      // properties - properties of feature returned by server\n      response.response.new.forEach(function () {\n        var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            clientid = _ref3.clientid,\n            id = _ref3.id,\n            properties = _ref3.properties;\n\n        //get feature from current layer in editing\n        var feature = _this6._featuresstore.getFeatureById(clientid);\n        // set new id\n        feature.setId(id);\n        //set properties\n        feature.setProperties(properties);\n        //Loop on eventual relation updated or created\n        relations.forEach(function (r) {\n          // handle relations (if provided)\n          Object.entries(r).forEach(function (_ref4) {\n            var _ref5 = _slicedToArray(_ref4, 2),\n                id = _ref5[0],\n                _ref5$ = _ref5[1],\n                opts = _ref5$ === undefined ? {} : _ref5$;\n\n            // id - relation layer id, opts - Object contain relation properties\n            //get the editing source of relation layer\n            var source = _toolbox.ToolBox.get(id).getSession().getEditor().getEditingSource();\n            // handle value to relation field saved on server\n            (opts.ids || []).forEach(function (id) {\n              var rFeature = source.getFeatureById(id);\n              if (rFeature) {\n                opts.fatherField.forEach(function (ff, i) {\n                  // loop relation ids\n                  rFeature.set(opts.childField[i], feature.get(ff)); // set father feature `value` and `name`\n                });\n              }\n            });\n          });\n        });\n      });\n\n      var features = this.readEditingFeatures();\n\n      features.forEach(function (f) {\n        return f.clearState();\n      }); // reset state of the editing features (update, new etc..)\n\n      this._layer.setFeatures([].concat(_toConsumableArray(features))); // substitute layer features with actual editing features (\"cloned\" to prevent layer actions duplicates, eg. addFeatures)\n\n      this.addLockIds(response.response.new_lockids); // add lock ids\n    }\n\n    /**\n     * @param lockids locks be added to current layer\n     *\n     * @since 3.9.0\n     */\n\n  }, {\n    key: 'addLockIds',\n    value: function addLockIds(lockids) {\n      this._layer.getSource().addLockIds(lockids);\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getLockIds',\n    value: function getLockIds() {\n      return this._layer.getSource().getLockIds();\n    }\n\n    /**\n     * Run after server has applied changes to origin resource\n     *\n     * @param commit commit items\n     *\n     * @returns jQuery promise\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit(_commit) {\n      var _this7 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var relations = [];\n\n        // check if there are commit relations binded to new feature\n        if (_commit.add.length) {\n          relations = Object.keys(_commit.relations).map(function (relationId) {\n            var relation = _this7._layer.getRelations().getRelationByFatherChildren(_this7._layer.getId(), relationId);\n            return _defineProperty({}, relationId, {\n              ids: [].concat(_toConsumableArray(_commit.relations[relationId].add.map(function (r) {\n                return r.id;\n              })), _toConsumableArray(_commit.relations[relationId].update.map(function (r) {\n                return r.id;\n              }))),\n              fatherField: relation.getFatherField(), // father Fields <Array>\n              childField: relation.getChildField() // child Fields <Array>\n            });\n          });\n        }\n\n        /** @TODO simplfy nested promises */\n        var r = yield (0, _promisify.promisify)(_this7._layer.commit(_commit));\n        _this7.applyCommitResponse(r, relations);\n        return r;\n      }));\n    }\n\n    /**\n     * start editing\n     */\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      /** @TODO simplfy nested promises */\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var features = yield (0, _promisify.promisify)(_this8.getFeatures(options)); // load layer features based on filter type\n        _this8._started = true; // if all ok set to started\n        return features; // features are already inside featuresstore\n      }));\n    }\n\n    /**\n     * Read features (action to layer)\n     */\n\n  }, {\n    key: 'readFeatures',\n    value: function readFeatures() {\n      return this._layer.readFeatures();\n    }\n\n    /**\n     * @returns features stored in editor featurestore\n     */\n\n  }, {\n    key: 'readEditingFeatures',\n    value: function readEditingFeatures() {\n      return this._featuresstore.readFeatures();\n    }\n\n    /**\n     * stop editor\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this9 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var response = yield (0, _promisify.promisify)(_this9._layer.unlock());\n        _this9.clear();\n        return response;\n      }));\n    }\n\n    /**\n     * @returns { boolean } whether has started editor \n     */\n\n  }, {\n    key: 'isStarted',\n    value: function isStarted() {\n      return this._started;\n    }\n\n    /**\n     * Method to clear all filled variables\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._started = false;\n      this._filter.bbox = null;\n      this._allfeatures = false;\n\n      this._featuresstore.clear();\n      this._layer.getFeaturesStore().clear();\n\n      // vector layer\n      if (Layer.LayerTypes.VECTOR === this._layer.getType()) {\n        this._layer.resetEditingSource(this._featuresstore.getFeaturesCollection());\n      }\n    }\n  }]);\n\n  return Editor;\n}(G3WObject);\n\nexports.default = Editor;\n\n},{\"../../toolboxes/toolbox\":27,\"../../utils/promisify\":58}],13:[function(require,module,exports){\nvar _editor = require('./editing/editor');\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _step = require('./workflow/step');\n\nvar _deprecated = require('../deprecated');\n\nvar _workflow = require('./workflow/workflow');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Editing APIs will be removed from core after g3w-client@v.4.x\n */\nif (window.g3wsdk.core.editing || window.g3wsdk.core.workflow || window.g3wsdk.constant.DEFAULT_EDITING_CAPABILITIES || g3wsdk.version < '4') {\n  console.warn('Editing APIs will be removed from g3wsdk after v4.x');\n}\n\n/**\n * Object to provide external plugin to use editing objects\n */\nwindow.g3wsdk.core.editing = {\n  Session: _deprecated.Session,\n  SessionsRegistry: _deprecated.Session.Registry,\n  Editor: _editor2.default,\n  ChangesManager: _deprecated.ChangesManager\n};\n\n/**\n * Default editing capabilities\n *\n * @type {string[]}\n */\nwindow.g3wsdk.constant.DEFAULT_EDITING_CAPABILITIES = ['add_feature', 'change_feature', 'change_attr_feature', 'delete_feature'];\n\n/**\n * Object to provide to external plugins to use workflow objects\n */\nwindow.g3wsdk.core.workflow = {\n  Task: _step.Step,\n  Step: _step.Step,\n  Flow: _deprecated.Flow,\n  Workflow: _workflow.Workflow,\n  WorkflowsStack: _workflow.Workflow.Stack\n};\n\n},{\"../deprecated\":10,\"./editing/editor\":12,\"./workflow/step\":14,\"./workflow/workflow\":15}],14:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Step = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ORIGINAL SOURCE: g3w-client/src/core/workflow/step.js@v3.9.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @since g3w-client-plugin-editing@v3.8.x\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar G3WObject = g3wsdk.core.G3WObject;\nvar isPointGeometryType = g3wsdk.core.geoutils.Geometry.isPointGeometryType;\nvar Layer = g3wsdk.core.layer.Layer;\nvar GUI = g3wsdk.gui.GUI;\n\n/**\n * @param options.input\n * @param options.context\n * @param options.task\n * @param options.outputs\n * @param options.escKeyPressEventHandler\n * @param options.id\n * @param options.name\n * @param options.help\n * @param options.message\n */\n\nvar Step = exports.Step = function (_G3WObject) {\n  _inherits(Step, _G3WObject);\n\n  function Step() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Step);\n\n    var _this = _possibleConstructorReturn(this, (Step.__proto__ || Object.getPrototypeOf(Step)).call(this));\n\n    _this._options = options;\n\n    _this._run = (options.run || _this.run || _asyncToGenerator(function* () {\n      return true;\n    })).bind(_this);\n    _this._stop = (options.stop || _this.stop || _asyncToGenerator(function* () {\n      return true;\n    })).bind(_this);\n\n    /**\n     * @FIXME add description\n     */\n    _this._inputs = options.inputs || null;\n\n    /**\n     * @FIXME add description\n     */\n    _this._context = options.context || null;\n\n    /**\n     * @FIXME add description\n     */\n    _this._outputs = options.outputs || null;\n\n    /**\n     * Dynamic state of a step\n     */\n    _this.state = {\n      id: options.id || null,\n      name: options.name || null,\n      help: options.help || null, // help to show what the user has to do\n      running: false, // running\n      error: null, // error\n      message: options.message || null, // message\n      /**\n       * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n       * \n       * @since g3w-client-plugin-editing@v3.8.0\n       */\n      usermessagesteps: {}\n    };\n\n    _this.registerEscKeyEvent(options.escKeyPressEventHandler);\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this.selectStyle = options.selectStyle;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.steps) {\n      _this.setSteps(options.steps);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetask.js@v3.7.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addfeaturestep.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.onRun) {\n      _this.on('run', options.onRun);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetask.js@v3.7.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addfeaturestep.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.onStop) {\n      _this.on('run', options.onStop);\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.tools) {\n      _this._tools = options.tools;\n    }\n\n    return _this;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n   * \n   * Set and get task usefult properties used to run\n   * \n   * @since g3w-client-plugin-editing@v3.8.0\n   */\n\n\n  _createClass(Step, [{\n    key: 'setInputs',\n    value: function setInputs(inputs) {\n      this._inputs = this.inputs = inputs;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getInputs',\n    value: function getInputs() {\n      return this._inputs;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param context\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setContext',\n    value: function setContext(context) {\n      return this._context = this.context = context;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getContext',\n    value: function getContext() {\n      return this.context;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'panic',\n    value: function panic() {\n      console.log('Panic to implement ..');\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param task\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setRoot',\n    value: function setRoot(task) {\n      this.state.root = task;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @returns { Object }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getUserMessageSteps',\n    value: function getUserMessageSteps() {\n      return this.state.usermessagesteps;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param steps\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setUserMessageSteps',\n    value: function setUserMessageSteps() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.state.usermessagesteps = steps;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param type\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setUserMessageStepDone',\n    value: function setUserMessageStepDone(type) {\n      if (type) {\n        this.state.usermessagesteps[type].done = true;\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addInteraction',\n    value: function addInteraction(interaction) {\n      var _this2 = this;\n\n      var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      GUI.getService('map').addInteraction(interaction);\n      Object.entries(events).forEach(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            type = _ref4[0],\n            handler = _ref4[1];\n\n        return interaction.on(type, handler);\n      });\n      this.on('stop', function () {\n        return _this2.removeInteraction(interaction);\n      });\n      return interaction;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'removeInteraction',\n    value: function removeInteraction(interaction) {\n      setTimeout(function () {\n        return GUI.getService('map').removeInteraction(interaction);\n      }); // timeout needed to work around an Openlayers issue\n    }\n\n    /**\n     * @TODO code implementation\n     *\n     * Get editing type from editing config\n     *\n     * @returns { null }\n     */\n\n  }, {\n    key: 'getEditingType',\n    value: function getEditingType() {\n      return null;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'registerPointerMoveCursor',\n    value: function registerPointerMoveCursor() {\n      GUI.getService('map').getMap().on(\"pointermove\", this._pointerMoveCursor);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'unregisterPointerMoveCursor',\n    value: function unregisterPointerMoveCursor() {\n      GUI.getService('map').getMap().un(\"pointermove\", this._pointerMoveCursor);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @param evt\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_pointerMoveCursor',\n    value: function _pointerMoveCursor(evt) {\n      this.getTargetElement().style.cursor = this.forEachFeatureAtPixel(evt.pixel, function () {\n        return true;\n      }) ? 'pointer' : '';\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @param steps\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setSteps',\n    value: function setSteps() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._steps = steps;\n      this.setUserMessageSteps(steps);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @returns { Object }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getSteps',\n    value: function getSteps() {\n      return this._steps;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getMap',\n    value: function getMap() {\n      return GUI.getService('map').getMap();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     *\n     * Disable sidebar\n     *\n     * @param {Boolean} bool\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'disableSidebar',\n    value: function disableSidebar() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!this._isContentChild) {\n        GUI.disableSideBar(bool);\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     *\n     * @param event\n     * @param options\n     *\n     * @returns {*}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'fireEvent',\n    value: function fireEvent(event) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').fireEvent(event, options);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * Handle single task\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'saveSingle',\n    value: function saveSingle(input, context) {\n      context.session.save().then(function () {\n        return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').saveChange();\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * Cancel single task\n     *\n     * @param input\n     * @param context\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'cancelSingle',\n    value: function cancelSingle(input, context) {\n      context.session.rollback();\n    }\n\n    /**\n     * Bind interrupt event on keys escape pressed\n     * \n     * @param evt.key\n     * @param evt.data.callback\n     * @param evt.data.task\n     */\n\n  }, {\n    key: 'escKeyUpHandler',\n    value: function escKeyUpHandler(evt) {\n      if ('Escape' === evt.key) {\n        evt.data.callback({ task: evt.data.task });\n      }\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'unbindEscKeyUp',\n    value: function unbindEscKeyUp() {\n      $(document).unbind('keyup', this.escKeyUpHandler);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'bindEscKeyUp',\n    value: function bindEscKeyUp() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      $(document).on('keyup', { callback: callback, task: this }, this.escKeyUpHandler);\n    }\n\n    /**\n     * @listens run\n     * @listens stop\n     */\n\n  }, {\n    key: 'registerEscKeyEvent',\n    value: function registerEscKeyEvent(callback) {\n      var _this3 = this;\n\n      if (callback) {\n        this.on('run', function () {\n          return _this3.bindEscKeyUp(callback);\n        });\n        this.on('stop', function () {\n          return _this3.unbindEscKeyUp();\n        });\n      }\n    }\n\n    /**\n     * \n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * Start task\n     * \n     * @param inputs\n     * @param context\n     * \n     * @returns jQuery promise\n     * \n     * @fires run\n     */\n\n  }, {\n    key: '__run',\n    value: function __run(inputs, context) {\n      var _this4 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        _this4.setInputs(inputs);\n        _this4.setContext(context);\n\n        var step = _this4;\n        var toolsOfTools = {\n\n          snap: {\n            type: 'snap',\n            options: {\n              checkedAll: false,\n              checked: false,\n              active: true,\n              run: function run(_ref6) {\n                var layer = _ref6.layer;\n\n                this.active = true;\n                this.layerId = layer.getId();\n                this.source = layer.getEditingLayer().getSource();\n              },\n              stop: function stop() {\n                this.active = false;\n              }\n            }\n          },\n\n          measure: {\n            type: 'measure',\n            options: {\n              checked: false,\n              run: function run() {\n                var _this5 = this;\n\n                setTimeout(function () {\n                  _this5.onChange(_this5.checked);\n                });\n              },\n              stop: function stop() {\n                step.removeMeasureInteraction();\n                this.onChange(false);\n              },\n              onChange: function onChange(bool) {\n                this.checked = bool;\n                step[bool ? 'addMeasureInteraction' : 'removeMeasureInteraction']();\n              }\n            }\n          }\n\n        };\n\n        if (_this4._tools && 0 === _this4._workflow._toolsoftool.length) {\n          var _workflow$_toolsoftoo;\n\n          (_workflow$_toolsoftoo = _this4._workflow._toolsoftool).push.apply(_workflow$_toolsoftoo, _toConsumableArray(_this4._tools.filter(function (tool) {\n            return 'measure' !== tool || Layer.LayerTypes.VECTOR === inputs.layer.getType() && !isPointGeometryType(inputs.layer.getGeometryType());\n          }).map(function (tool) {\n            return toolsOfTools[tool];\n          })));\n        }\n\n        if (_this4._tools) {\n          _this4._workflow._toolsoftool.forEach(function (t) {\n            return t.options.run({ layer: inputs.layer });\n          });\n          _this4._workflow.emit('settoolsoftool', _this4._workflow._toolsoftool);\n        }\n\n        _this4.emit('run', { inputs: inputs, context: context });\n\n        try {\n          _this4.state.running = true; // change state to running\n          return yield (0, _promisify.promisify)(_this4._run(inputs, context));\n        } catch (e) {\n          console.warn(e);\n          _this4.state.error = e;\n          return Promise.reject(e);\n        } finally {\n          _this4.__stop();\n        }\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     *\n     * Stop step\n     *\n     * @fires stop\n     */\n\n  }, {\n    key: '__stop',\n    value: function __stop() {\n      this._stop(this._inputs, this._context); // stop task\n      this.state.running = false; // remove running state\n      if (this._workflow) {\n        this._workflow._toolsoftool.forEach(function (t) {\n          return t.options.stop();\n        });\n      }\n      this.emit('stop');\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.state.id;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getName',\n    value: function getName() {\n      return this.state.name;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getHelp',\n    value: function getHelp() {\n      return this.state.help;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getError',\n    value: function getError() {\n      return this.state.error;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getMessage',\n    value: function getMessage() {\n      return this.state.message;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'isRunning',\n    value: function isRunning() {\n      return this.state.running;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getTask',\n    value: function getTask() {\n      return this;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'setOutputs',\n    value: function setOutputs(outputs) {\n      this._outputs = outputs;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getOutputs',\n    value: function getOutputs() {\n      return this._outputs;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @param workflow\n     * @param tools\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setToolsOfTools',\n    value: function setToolsOfTools(workflow) {\n      var tools = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      this._workflow = workflow;\n      this._tools = tools;\n    }\n  }]);\n\n  return Step;\n}(G3WObject);\n\n/**\n * @FIXME add description\n */\n\n\nStep.MESSAGES = {\n  help: null\n};\n\n},{\"../../utils/promisify\":58}],15:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Workflow = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _step = require('./step');\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * @file\n * \n * ORIGINAL SOURCE: g3w-client/src/core/workflow/workflow.js@v3.9.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n * \n * @since g3w-client-plugin-editing@v3.8.x\n */\n\nvar GUI = g3wsdk.gui.GUI;\nvar G3WObject = g3wsdk.core.G3WObject;\n\n/**\n * Workflow Class (manage flow of steps)\n *\n * @param options.inputs\n * @param options.context\n * @param options.flow\n * @param options.steps\n * @param options.runOnce\n * @param options.backbuttonlabel\n */\n\nvar Workflow = exports.Workflow = function (_G3WObject) {\n  _inherits(Workflow, _G3WObject);\n\n  function Workflow() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Workflow);\n\n    /** @since g3w-client-plugin-editing@v3.8.0*/\n    var _this = _possibleConstructorReturn(this, (Workflow.__proto__ || Object.getPrototypeOf(Workflow)).call(this));\n\n    _this._type = undefined !== options.type ? options.type : null;\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this._options = options;\n\n    /**\n     * @FIXME add description\n     */\n    _this._promise = null;\n\n    /**\n     * Mandatory inputs to work with editing\n     */\n    _this._inputs = undefined !== options.inputs ? options.inputs : null;\n\n    /**\n     * @FIXME add description\n     */\n    _this._context = undefined !== options.context ? options.context : null;\n\n    /**\n     * All steps of flow\n     */\n    _this._steps = options.steps || [];\n\n    /**\n     * Whether is child of another workflow\n     */\n    _this._child = null;\n\n    /**\n     * stack workflowindex\n     */\n    _this._stackIndex = null;\n\n    /**\n     * Stop when flow stop\n     */\n    _this.runOnce = options.runOnce || false;\n\n    /**\n     * @FIXME add description\n     */\n    _this._messages = _step.Step.MESSAGES;\n\n    /**\n     * Store user messages steps to show when workflow\n     * use a mandatory steps (ex. select: {description}, merge: {description}}\n     */\n    _this._userMessageSteps = {};\n\n    if (_this._steps.length > 0) {\n      _this.setUserMessagesSteps(_this._steps);\n    }\n\n    /**\n     * Holds back button label (in case of child workflow)\n     * \n     * @since 3.9.0\n     */\n    _this.backbuttonlabel = undefined !== options.backbuttonlabel ? options.backbuttonlabel : null;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    _this.helpMessage = options.helpMessage ? { help: options.helpMessage } : null;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    _this._toolsoftool = [];\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    if (true === options.registerEscKeyEvent) {\n      _this.registerEscKeyEvent();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/flow.js@v3.9.1\n     * \n     * Current flow step\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    _this._stepIndex = 0;\n\n    return _this;\n  }\n\n  /**\n   *\n   * @param steps\n   */\n\n\n  _createClass(Workflow, [{\n    key: 'setUserMessagesSteps',\n    value: function setUserMessagesSteps(steps) {\n      this._userMessageSteps = steps.reduce(function (messagesSteps, step) {\n        return _extends({}, messagesSteps, step.getUserMessageSteps() || {});\n      }, {});\n    }\n\n    /**\n     * Check if it is in same type\n     *\n     * @param {String | Array.<string[]>} type\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'isType',\n    value: function isType(type) {\n      var _this2 = this;\n\n      if (Array.isArray(type)) {\n        return Boolean(type.find(function (t) {\n          return t === _this2._type;\n        }));\n      }\n      return type === this._type;\n    }\n\n    /**\n     * @returns { * }\n     */\n\n  }, {\n    key: 'getContextService',\n    value: function getContextService() {\n      return this.getContext().service;\n    }\n\n    /**\n     * @param service\n     */\n\n  }, {\n    key: 'setContextService',\n    value: function setContextService(service) {\n      this.getContext().service = service;\n    }\n\n    /**\n     * @returns { null | * }\n     */\n\n  }, {\n    key: 'getStackIndex',\n    value: function getStackIndex() {\n      return this._stackIndex;\n    }\n\n    /**\n     * @param workflow\n     */\n\n  }, {\n    key: 'addChild',\n    value: function addChild(workflow) {\n      if (this._child) {\n        this._child.addChild(workflow);\n      } else {\n        this._child = workflow;\n      }\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'removeChild',\n    value: function removeChild() {\n      if (this._child) {\n        Workflow.Stack.removeAt(this._child.getStackIndex());\n      }\n      this._child = null;\n    }\n\n    /**\n     * @param input.key\n     * @param input.value\n     */\n\n  }, {\n    key: 'setInput',\n    value: function setInput(_ref) {\n      var key = _ref.key,\n          value = _ref.value;\n\n      this._inputs[key] = value;\n    }\n\n    /**\n     * @returns { null | * }\n     */\n\n  }, {\n    key: 'getInputs',\n    value: function getInputs() {\n      return this._inputs;\n    }\n\n    /**\n     * @param context\n     */\n\n  }, {\n    key: 'setContext',\n    value: function setContext(context) {\n      this._context = context;\n    }\n\n    /**\n     * @returns { * | {} | null }\n     */\n\n  }, {\n    key: 'getContext',\n    value: function getContext() {\n      return this._context;\n    }\n\n    /**\n     * @param step\n     */\n\n  }, {\n    key: 'addStep',\n    value: function addStep(step) {\n      this._steps.push(step);\n    }\n\n    /**\n     * @param steps\n     */\n\n  }, {\n    key: 'setSteps',\n    value: function setSteps() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      this._steps = steps;\n      this.setUserMessagesSteps(steps);\n    }\n\n    /**\n     * @returns { * | Array }\n     */\n\n  }, {\n    key: 'getSteps',\n    value: function getSteps() {\n      return this._steps;\n    }\n\n    /**\n     * @param index\n     * \n     * @returns { * }\n     */\n\n  }, {\n    key: 'getStep',\n    value: function getStep(index) {\n      return this._steps[index];\n    }\n\n    /**\n     * @param messages\n     */\n\n  }, {\n    key: 'setMessages',\n    value: function setMessages(messages) {\n      Object.assign(this._messages, messages);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getMessages',\n    value: function getMessages() {\n      return this._messages;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'clearMessages',\n    value: function clearMessages() {\n      this._messages.help = null;\n      if (Object.keys(this._userMessageSteps).length) {\n        this.clearUserMessagesSteps();\n      }\n    }\n\n    /**\n     * @returns { * | null }\n     */\n\n  }, {\n    key: 'getLastStep',\n    value: function getLastStep() {\n      return this._steps.length ? this._steps[this._steps.length - 1] : null;\n    }\n\n    /**\n     * @returns { Step }\n     */\n\n  }, {\n    key: 'getRunningStep',\n    value: function getRunningStep() {\n      return this._steps.find(function (step) {\n        return step.isRunning();\n      });\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'reject',\n    value: function reject() {\n      if (this._promise) {\n        this._promise.reject();\n      }\n      this.emit('reject');\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'resolve',\n    value: function resolve() {\n      if (this._promise) {\n        this._promise.resolve();\n      }\n    }\n  }, {\n    key: 'runStep',\n    value: function () {\n      var _ref2 = _asyncToGenerator(function* (step, inputs) {\n        try {\n          this.setMessages({ help: step.state.help });\n          var outputs = yield (0, _promisify.promisify)(step.__run(inputs, this.getContext()));\n          // onDone ‚Üí check if all step is resolved\n          this._stepIndex++;\n          if (this._stepIndex === this.getSteps().length) {\n            this._stepIndex = 0;\n            return outputs;\n          } else {\n            return this.runStep(this.getSteps()[this._stepIndex], outputs);\n          }\n        } catch (e) {\n          this._stepIndex = 0;\n          return Promise.reject(e);\n        }\n      });\n\n      function runStep(_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return runStep;\n    }()\n\n    /**\n     * Start workflow\n     * \n     * @param options.inputs\n     * @param options.context\n     * @param options.flow\n     * @param options.steps\n     * \n     * @fires start\n     */\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this3 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return (0, _promisify.$promisify)(new Promise(function () {\n        var _ref3 = _asyncToGenerator(function* (resolve, reject) {\n          _this3._promise = { resolve: resolve, reject: reject };\n          _this3._inputs = options.inputs;\n          _this3._context = options.context || {};\n\n          var isChild = _this3._context.isChild || false;\n\n          // stop child when a workflow is running \n          if (!isChild && Workflow.Stack.getLength() && Workflow.Stack.getCurrent() !== _this3) {\n            Workflow.Stack.getCurrent().addChild(_this3);\n          }\n\n          _this3._stackIndex = Workflow.Stack.push(_this3);\n          _this3._steps = options.steps || _this3._steps;\n\n          (_this3._steps || []).forEach(function (s) {\n            return s._workflow = _this3;\n          });\n\n          var showUserMessage = Object.keys(_this3._userMessageSteps).length;\n\n          if (showUserMessage) {\n            GUI.showUserMessage({\n              title: 'plugins.editing.workflow.title.steps',\n              type: 'tool',\n              position: 'left',\n              size: 'small',\n              closable: false,\n              hooks: {\n                body: _extends({}, require('../../components/UserMessage.vue'), {\n                  data: function data() {\n                    return {\n                      steps: _this3._userMessageSteps\n                    };\n                  }\n                })\n              }\n            });\n          }\n          //emit start\n          _this3.emit('start');\n\n          try {\n            console.assert(0 === _this3._stepIndex, 'reset workflow before restarting: ' + _this3._stepIndex);\n            //start flow of workflow\n            var outputs = yield _this3.runStep(_this3.getSteps()[_this3._stepIndex], _this3.getInputs());\n            if (showUserMessage) {\n              setTimeout(function () {\n                _this3.clearUserMessagesSteps();resolve(outputs);\n              }, 500);\n            } else {\n              resolve(outputs);\n            }\n          } catch (e) {\n            console.warn(e);\n            if (showUserMessage) {\n              _this3.clearUserMessagesSteps();\n            }\n            reject(e);\n          }\n\n          if (_this3.runOnce) {\n            _this3.stop();\n          }\n        });\n\n        return function (_x6, _x7) {\n          return _ref3.apply(this, arguments);\n        };\n      }()));\n    }\n\n    /**\n     * Stop workflow during flow\n     * \n     * @fires stop\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this4 = this;\n\n      return (0, _promisify.$promisify)(new Promise(function () {\n        var _ref4 = _asyncToGenerator(function* (resolve, reject) {\n          _this4._promise = null;\n\n          try {\n            // stop child workflow\n            if (_this4._child) {\n              yield (0, _promisify.promisify)(_this4._child.stop());\n            }\n          } catch (e) {\n            console.warn(e);\n          }\n\n          // ensure that child is always removed\n          _this4.removeChild();\n\n          Workflow.Stack.removeAt(_this4.getStackIndex());\n\n          // stop flow\n          try {\n            if (_this4.getSteps()[_this4._stepIndex].isRunning()) {\n              //clear messages steps\n              _this4.clearMessages();\n              //stop a current step\n              _this4.getSteps()[_this4._stepIndex].__stop();\n            }\n            // reset counter and reject flow\n            if (_this4._stepIndex > 0) {\n              _this4._stepIndex = 0;\n              reject();\n              return Promise.reject();\n            } else {\n              resolve();\n            }\n          } catch (e) {\n            console.warn(e);\n            reject(e);\n          }\n\n          _this4.emit('stop');\n        });\n\n        return function (_x8, _x9) {\n          return _ref4.apply(this, arguments);\n        };\n      }()));\n    }\n\n    /**\n     * Reset user message steps\n     */\n\n  }, {\n    key: 'clearUserMessagesSteps',\n    value: function clearUserMessagesSteps() {\n      var _this5 = this;\n\n      Object.keys(this._userMessageSteps).forEach(function (type) {\n        var step = _this5._userMessageSteps[type];\n        step.done = false;\n        if (step.buttonnext) {\n          step.buttonnext.disabled = true;\n        }\n      });\n      GUI.closeUserMessage();\n    }\n\n    /**\n     * @since 3.9.0\n     */\n\n  }, {\n    key: 'setBackButtonLabel',\n    value: function setBackButtonLabel() {\n      var label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      this.backbuttonlabel = label;\n    }\n\n    /**\n     * @returns { null }\n     * \n     * @since 3.9.0\n     */\n\n  }, {\n    key: 'getBackButtonLabel',\n    value: function getBackButtonLabel() {\n      return this.backbuttonlabel;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @param step\n     * @param tools\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addToolsOfTools',\n    value: function addToolsOfTools(_ref5) {\n      var step = _ref5.step,\n          _ref5$tools = _ref5.tools,\n          tools = _ref5$tools === undefined ? [] : _ref5$tools;\n\n      step.setToolsOfTools(this, tools);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setHelpMessage',\n    value: function setHelpMessage(message) {\n      this.helpMessage = { help: message };\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getHelpMessage',\n    value: function getHelpMessage() {\n      return this.helpMessage;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getFeatures',\n    value: function getFeatures() {\n      return this.getInputs().features;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'startFromLastStep',\n    value: function startFromLastStep(options) {\n      this.setSteps([this.getSteps().pop()]);\n      return this.start(options);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getCurrentFeature',\n    value: function getCurrentFeature() {\n      var feats = this.getFeatures();\n      return feats[feats.length - 1];\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.getInputs().layer;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getSession',\n    value: function getSession() {\n      return this.getContext().session;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * bind interupt event\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'escKeyUpHandler',\n    value: function escKeyUpHandler(evt) {\n      if (evt.keyCode === 27) {\n        evt.data.workflow.reject();\n        evt.data.callback();\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'unbindEscKeyUp',\n    value: function unbindEscKeyUp() {\n      $(document).unbind('keyup', this.escKeyUpHandler);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'bindEscKeyUp',\n    value: function bindEscKeyUp() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      $(document).on('keyup', { workflow: this, callback: callback }, this.escKeyUpHandler);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'registerEscKeyEvent',\n    value: function registerEscKeyEvent(callback) {\n      var _this6 = this;\n\n      this.on('start', function () {\n        return _this6.bindEscKeyUp(callback);\n      });\n      this.on('stop', function () {\n        return _this6.unbindEscKeyUp();\n      });\n    }\n  }]);\n\n  return Workflow;\n}(G3WObject);\n\n/** @type { Workflow[] } */\n\n\nvar workflows = [];\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/services/workflow.js@v3.9.1\n * \n * Store all activated workflows\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nWorkflow.Stack = {\n  _workflows: workflows,\n  push: function push(workflow) {\n    return workflows.includes(workflow) ? workflows.indexOf(workflow) : workflows.push(workflow) - 1;\n  },\n  getParent: function getParent() {\n    return workflows.slice(-2)[0];\n  },\n  getParents: function getParents() {\n    return workflows.slice(0, -1);\n  },\n  pop: function pop() {\n    return workflows.pop();\n  },\n  getLength: function getLength() {\n    return workflows.length;\n  },\n  getFirst: function getFirst() {\n    return workflows[0];\n  },\n  getCurrent: function getCurrent() {\n    return Workflow.Stack.getLast();\n  },\n  getLast: function getLast() {\n    return workflows.slice(-1)[0];\n  },\n  removeAt: function removeAt(i) {\n    workflows.splice(i, 1);\n  },\n  insertAt: function insertAt(i, w) {\n    workflows[i] = w;\n  },\n  getAt: function getAt(i) {\n    return workflows[i];\n  },\n  clear: function clear() {\n    while (workflows.length) {\n      workflows.pop().stop();\n    }\n  }\n};\n\n},{\"../../components/UserMessage.vue\":9,\"../../utils/promisify\":58,\"./step\":14}],16:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Es tritt ein Fehler auf. Es ist nicht m√∂glich, Layer zu bearbeiten\",\n    some_layers: \"Es tritt ein Fehler auf: Es ist nicht m√∂glich, einige Layer zu bearbeiten\"\n  },\n  search: \"Suche\",\n  editing_changes: \"√Ñnderungen bearbeiten\",\n  editing_data: \"Layer bearbeiten\",\n  editing_attributes: \"Attribute bearbeiten\",\n  relations: \"Relationen\",\n  edit_relation: \"Relation bearbeiten\",\n  back_to_relations: \"Zur√ºck zu Relationen\",\n  no_relations_found: \"Keine Relationen gefunden\",\n  relation_data: \"Relationsdaten\",\n  relation_already_added: \"Relation bereits hinzugef√ºgt\",\n  list_of_relations_feature: \"Liste der Relations-Features \",\n  tooltip: {\n    edit_layer: \"Layer bearbeiten\"\n  },\n  toolbox: {\n    title: 'bearbeiten'\n  },\n  table: {\n    edit: \"Feature bearbeiten\",\n    copy: \"Kopie erstellen\",\n    delete: \"Feature l√∂schen\"\n  },\n  tools: {\n    copy: \"Features kopieren\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Teil zu Multipart hinzuf√ºgen\",\n    deletepart: \"Teil aus Multipart l√∂schen\",\n    merge: \"Feature aufl√∂sen\",\n    split: \"Feature trennen\",\n    add_feature: \"Feature hinzuf√ºgen\",\n    delete_feature: \"Feature l√∂schen\",\n    move_feature: \"Feature verschieben\",\n    update_vertex: \"Feature vertex aktualisieren\",\n    update_feature: \"Feature-Attribut aktualisieren\",\n    update_multi_features: \"Attribute ausgew√§hlter Features aktualisieren\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Messung anzeigen\",\n    snap: \"Snap Layer\",\n    snapall: \"Snap auf alle Layer\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Features ausw√§hlen\",\n      select_element: \"Feature ausw√§hlen\",\n      copy: \"Neue Kopie der ausgew√§hlten Features erstellen\",\n      merge: \"Features aufl√∂sen\",\n      split: \"Feature trennen\",\n      new: \"Neues Feature erstellen\",\n      edit_table: \"Features der Tabelle bearbeiten\",\n      draw_new_feature: \"Feature auf Karte zeichnen\",\n      action_confirm: \"Aktion best√§tigen\",\n      double_click_delete: \"Zu l√∂schendes Feature auf der Karte ausw√§hlen\",\n      edit_feature_vertex: \"√Ñndern oder Hinzuf√ºgen eines Eckpunktes auf dem ausgew√§hlten Feature\",\n      move: \"Ausgew√§hltes Feature verschieben\",\n      select_feature_to_relation: \"Feature ausw√§hlen, welches die Relation verkn√ºpft\",\n      show_edit_feature_form: \"Feature-Formular zum Bearbeiten von Attributen anzeigen\",\n      pick_feature: \"Zu √§nderndes Feature auf der Karte ausw√§hlen\",\n      insert_attributes_feature: \"Attribute des Features einf√ºgen\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Zum Ausw√§hlen auf ein Feature klicken',\n      draw_part: \"Neues Teil zeichnen\",\n      draw_geometry: \"Geometrie zeichnen\",\n      merge: 'Feature zum Aufl√∂sen ausw√§hlen',\n      selectSHIFT: 'Features ausw√§hlen indem ein Rechteck mit SHIFT gezeichnet wird',\n      selectDrawBox: \"Features ausw√§hlen, indem man ein Rechteck mit zwei gegen√ºberliegenden Eckpunkten zeichnet\",\n      selectDrawBoxAtLeast2Feature: \"Mindestens Features ausw√§hlen, indem man ein Rechteck mit zwei gegen√ºberliegenden Eckpunkten zeichnet\",\n      selectPoint: \"Zum Ausw√§hlen auf ein Feature klicken\",\n      selectPointSHIFT: 'Features ausw√§hlen, indem ein Rechteck mit SHIFT gezeichnet wird (Multifeatures) oder auf ein Feature klicken',\n      selectMultiPointSHIFT: 'Features ausw√§hlen, indem man ein Rechteck zeichnet und SHIFT dr√ºckt oder auf ein Feature klickt',\n      selectMultiPointSHIFTAtLeast2Feature: 'Mindestens 2 Features ausw√§hlen und mit SHIFT ein Rechteck zeichnen oder auf ein Feature klicken',\n      copyCTRL: 'Kopieren ausgew√§hlter Features mit CTRL+C',\n      selectStartVertex: 'Start-Eckpunkt der ausgew√§hlten Features ausw√§hlen',\n      selectToPaste: 'Den Punkt ausw√§hlen, an dem die ausgew√§hlten Features eingef√ºgt werden sollen',\n      draw_split_line: \"Eine Linie zeichnen, um das ausgew√§hlte Feature zu teilen\"\n    },\n    title: {\n      steps: 'Schritte'\n    },\n    next: 'Weiter'\n  },\n  messages: {\n    featureslockbyotheruser: \"Einige Geometrien/Datens√§tze k√∂nnen nicht bearbeitet werden, da sie von anderen Benutzern bearbeitet werden\",\n    splitted: \"Getrennt\",\n    nosplittedfeature: \"Feature nicht getrennt\",\n    press_esc: \"Mit ESC zur√ºck\",\n    online: \"Wieder ONLINE. Jetzt kann man die √Ñnderungen in der Datenbank speichern\",\n    offline: \"OFFLINE. Alle √Ñnderungen werden lokal gespeichert\",\n    delete_feature: \"Soll das ausgew√§hlte Feature gel√∂scht werden?\",\n    delete_feature_relations: \"Wenn ein Feature Verkn√ºpfungen beinhaltet, werden diese Relationen verwaist. Wir schlagen vor, diese Relationen zu behandeln, bevor das Feature gel√∂scht wird\",\n    unlink_relation: \"Soll die Verkn√ºpfung aufgehoben werden?\",\n    commit_feature: \"Zusammenfassung der √Ñnderungen\",\n    toolbox_has_relation: \"Diese Ebene ist Teil einer Beziehung\",\n    saved: \"Daten erfolgreich gespeichert\",\n    saved_local: \"Daten erfolgreich lokal gespeichert\",\n    loading_data: \"Daten laden\",\n    saving: \"Daten werden gespeichert. Bitte warten ...\",\n    constraints: {\n      enable_editing: \"Bitte zoomen Sie hinein, um die Editier-Tools zu aktivieren \\nAktivierungsskala bei 1:\"\n    },\n    pdf: \"Dokumentenvorschau nicht verf√ºgbar. Bitte hier klicken \",\n    commit: {\n      header: \"Die folgende Liste zeigt alle zu √ºbernehmenden √Ñnderungen.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Hinzufgef√ºgt</b> Die Anzahl der hinzugef√ºgten Features anzeigen\",\n      header_update_delete: \"<b>Bearbeitet</b> und <b>Gel√∂scht</b> Die Liste der Feature-ID anzeigen\",\n      add: \"Hinzugef√ºgt\",\n      delete: \"Gel√∂scht\",\n      update: \"Bearbeitet\"\n    },\n    loading_table_data: \"Datentabelle wird erstellt. Bitte warten ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"Vor dem Speichern m√ºssen alle Pflichtfelder des eingegebenen features ausgef√ºllt werden\",\n    no_feature_selected: \"Keine feature ausgew√§hlt\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>W\\xE4hlen Sie Relationen aus, um sie mit dem aktuellen Feature zu verkn\\xFCpfen.</div>\"\n    },\n    draw_new_feature: \"Zeichnen Sie eine neue feature\",\n    draw_or_copy: \"oder\",\n    copy_feature_from_other_layer: \"Kopieren Sie feature aus einer anderen layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Zur√ºck zur Bearbeitung des Vaters\",\n        add_relation: \"Neue Relation erstellen und verkn√ºpfen\",\n        link_relation: \"Eine Relation zu diesem Feature herstellen\",\n        open_relation_tools: \"Relationstools anzeigen\",\n        unlink_relation: \"Relation trennen\"\n      }\n    },\n    buttons: {\n      save: \"Einf√ºgung/Bearbeiten\",\n      save_and_back: \"Speichern und zur√ºck\",\n      save_and_back_table: \"Speichern und zur√ºck\",\n      cancel: \"√Ñnderungen ignorieren\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select one feature\"\n      }\n    }\n  }\n};\n\n},{}],17:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"An error occurs. It's no possible to edit layers\",\n    some_layers: \"An error occurs: It's no possible to edit some layers\",\n    editing_multiple_relations: 'Editing multiple relationships is not currently supported'\n  },\n  search: \"Search\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Editing Layers\",\n  editing_attributes: \"Editing attributes\",\n  relations: \"Relations\",\n  edit_relation: \"Edit relation\",\n  back_to_relations: \"Back to Relations\",\n  no_relations_found: \"No relations found\",\n  relation_data: \"Relation data\",\n  relation_already_added: \"Relation already added\",\n  list_of_relations_feature: \"List of relations feature \",\n  tooltip: {\n    edit_layer: \"Edit Layer\",\n    filter_by_relation: \"Filter layers by relation\"\n  },\n  toolbox: {\n    title: 'Edit'\n  },\n  table: {\n    edit: \"Edit feature\",\n    copy: \"Create a copy\",\n    delete: \"Delete feature\"\n  },\n  tools: {\n    copy: \"Copy features\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Add part to multipart\",\n    deletepart: \"Delete part from multipart\",\n    merge: \"Dissolve features\",\n    split: \"Split Feature\",\n    add_feature: \"Add feature\",\n    delete_feature: \"Delete feature\",\n    move_feature: \"Move feature\",\n    update_vertex: \"Update feature vertex\",\n    update_feature: \"Update feature attribute\",\n    update_multi_features: \"Update attributes of selected features\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Select features\",\n      select_element: \"Select feature\",\n      copy: \"Create new copy of selected features\",\n      merge: \"Dissolve features\",\n      split: \"Split Feature\",\n      new: \"Create new feature\",\n      edit_table: \"Edit table features\",\n      draw_new_feature: \"Draw feature on map\",\n      action_confirm: \"Confirm action\",\n      double_click_delete: \"Select feature on map to delete\",\n      edit_feature_vertex: \"Modify or add a vertex on selected feature\",\n      move: \"Move selected feature\",\n      select_feature_to_relation: \"Select feature that you bind relation\",\n      show_edit_feature_form: \"Show feature form to edit attributes\",\n      pick_feature: \"Select feature on map to modify\",\n      insert_attributes_feature: \"Insert attributes of the feature\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Click on feature to select',\n      draw_part: \"Draw new part\",\n      draw_geometry: \"Draw geometry\",\n      merge: 'Select featurewhere dissolve',\n      selectSHIFT: 'Select features drawing a rectangle pressing SHIFT',\n      selectDrawBox: \"Select features drawing a rectangle by two point of opposite corners\",\n      selectDrawBoxAtLeast2Feature: \"Select at least features drawing a rectangle by two point of opposite corners\",\n      selectPoint: \"Click on feature to select\",\n      selectPointSHIFT: 'Select features drawing a rectangle pressing SHIFT (multifeatures) or click on one feature',\n      selectMultiPointSHIFT: 'Select features drawing a rectangle pressing SHIFT or click on feature',\n      selectMultiPointSHIFTAtLeast2Feature: 'Select at least 2 features drawing a rectangle pressing SHIFT or click on feature',\n      copyCTRL: 'Copy selected features using CTRL+C',\n      selectStartVertex: 'Select starting vertex of selected features',\n      selectToPaste: 'Select the point where paste the features selected',\n      draw_split_line: \"Draw a line to split selected feature\"\n    },\n    title: {\n      steps: 'Steps'\n    },\n    next: 'Next'\n  },\n  messages: {\n    featureslockbyotheruser: \"Some geometries/records are not editable because in editing by other user\",\n    splitted: \"Splitted\",\n    nosplittedfeature: \"Feature not spitted\",\n    press_esc: \"Press ESC to back\",\n    online: \"Back ONLINE. Now you can save your changes on database\",\n    offline: \"You are OFFLINE. All changes are saved locally\",\n    delete_feature: \"Do you want delete selected feature ?\",\n    delete_feature_relations: \"If feature has bindings relations, these relations become orphans. We suggest to handle these relations before detele this feature\",\n    unlink_relation: \"Do you want unlink relation?\",\n    commit_feature: \"Summary of changes\",\n    toolbox_has_no_geometry: \"this layer has no geometry\",\n    toolbox_has_relation: \"this layer is part of a relation\",\n    saved: \"Data saved successfully\",\n    saved_local: \"Data saved locally successfully\",\n    loading_data: \"Loading data\",\n    saving: \"Saving data. Please wait ...\",\n    constraints: {\n      enable_editing: \"Please Zoom In to enable editing tools \\nActivation scale at 1:\"\n    },\n    pdf: \"Document preview not available. Please click here \",\n    commit: {\n      header: \"The following list show all changes to commit.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Added</b> show the number of features added\",\n      header_update_delete: \"<b>Modified</b> and <b>Deleted</b> show the list of features id\",\n      add: \"Added\",\n      delete: \"Deleted\",\n      update: \"Updated\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Select relations to link it to current editing feature.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Create and link new relation\",\n        link_relation: \"Join a relation to this feature\",\n        open_relation_tools: \"Show relation tools\",\n        unlink_relation: \"Unlink relation\"\n      }\n    },\n    buttons: {\n      save: \"Insert/Edit\",\n      save_and_back: \"Save and Back\",\n      save_and_back_table: \"Save and Back\",\n      cancel: \"Ignore Changes\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],18:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Tapahtui virhe. Tasoja ei ole mahdollista muokata.\",\n    some_layers: \"Tapahtui virhe. Jotkin tasot eiv√§t ole muokattavissa.\"\n  },\n  search: \"Haku\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Muokataan tasoja\",\n  editing_attributes: \"Muokataan attribuutteja\",\n  relations: \"Relaatiot\",\n  edit_relation: \"Muokkaa relaatiota\",\n  back_to_relations: \"Takaisin relaatioihin\",\n  no_relations_found: \"Relaatioita ei l√∂ytynyt\",\n  relation_data: \"Relaation tiedot\",\n  relation_already_added: \"Relaatio on jo lis√§tty\",\n  list_of_relations_feature: \"Lista relaation ominaisuuksista\",\n  tooltip: {\n    edit_layer: \"Muokkaa tasoa\"\n  },\n  toolbox: {\n    title: 'Muokkaa'\n  },\n  table: {\n    edit: \"Muokkaa ominaisuutta\",\n    copy: \"Luo kopio\",\n    delete: \"Poista ominaisuus\"\n  },\n  tools: {\n    copy: \"Kopio ominaisuuksia\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Lis√§√§ osa\",\n    deletepart: \"Poista osa\",\n    merge: \"Yhdist√§ ominaisuudet\",\n    split: \"Leikkaa ominaisuus\",\n    add_feature: \"Lis√§√§ ominaisuus\",\n    delete_feature: \"Poista ominaisuus\",\n    move_feature: \"Siirr√§ ominaisuutta\",\n    update_vertex: \"P√§ivit√§ pisteen ominaisuutta\",\n    update_feature: \"P√§ivit√§ ominaisuus\",\n    update_multi_features: \"Muokkaa valittujen ominaisuuksien attribuutteja\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Valitse ominaisuudet\",\n      select_element: \"Valitse ominaisuus\",\n      copy: \"Luo kopio valituista ominaisuuksista\",\n      merge: \"Yhdist√§ ominaisuudet\",\n      split: \"Leikkaa ominaisuus\",\n      new: \"Luo uusi ominaisuus\",\n      edit_table: \"Muuta taulun ominaisuuksia\",\n      draw_new_feature: \"Piirr√§ ominaisuus kartalle\",\n      action_confirm: \"Hyv√§ksy toiminto\",\n      double_click_delete: \"Valitse poistettava ominaisuus kartalta\",\n      edit_feature_vertex: \"Muuta pistett√§ tai lis√§√§ piste valittuun ominaisuuteen\",\n      move: \"Siirr√§ valittu ominaisuus\",\n      select_feature_to_relation: \"Valitse relaatio\",\n      show_edit_feature_form: \"N√§yt√§ ominaisuuslomake muokataksesi attribuutteja\",\n      pick_feature: \"Valitse muokattava ominaisuus kartalta\",\n      insert_attributes_feature: \"Lis√§√§ ominaisuuden attribuutit\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Valitse ominaisuus',\n      draw_part: \"Piirr√§ uusi osa\",\n      merge: 'Valitse ominaisuus yhdist√§√§ksesi',\n      draw_geometry: \"Piirr√§ geometria\",\n      selectSHIFT: 'Paina SHIFT, jos haluat valita kohteita suorakulmiovalinnalla.', //Tero 10.12.2020\n      selectDrawBox: \"Piirr√§ suorakulmio, jonka si√§lt√§ kohteet valitaan \", //Tero 10.12.2020\n      selectDrawBoxAtLeast2Feature: \"Piirr√§ suorakulmio, jonka si√§lt√§ kohteet v√§hint√§√§n 2 valitaan \",\n      selectPoint: \"Valitse ominaisuus\",\n      selectPointSHIFT: 'Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksitt√§inen ominaisuus.',\n      selectMultiPointSHIFT: 'Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksitt√§inen ominaisuus.',\n      selectMultiPointSHIFTAtLeast2Feature: 'Paina SHIFT, jos haluat valita v√§hint√§√§n 2 ominaisuuksia suorakulmiovalinnalla, tai valitse yksitt√§inen ominaisuus.',\n      copyCTRL: 'CTRL+C, voit kopioida valitut ominaisuudet.', //Tero 10.12.2020\n      selectStartVertex: 'Osoita valittujen ominaisuuksien alkupiste.',\n      selectToPaste: 'Valitse kohta, johon liit√§t valitut ominaisuudet.',\n      draw_split_line: \"Piirr√§ viiva, jonka mukaan valittu ominaisuus jaetaan.\"\n    },\n    title: {\n      steps: 'Vaiheet'\n    },\n    next: \"Seuraava\"\n  },\n  messages: {\n    featureslockbyotheruser: \"Some features are locked by another user\",\n    splitted: \"Jaettu\",\n    nosplittedfeature: \"Ominaisuutta ei jaettu\",\n    press_esc: \"Paina ESC palataksesi\",\n    online: \"Yhteys muodostettu. Muutokset voidaan tallentaa tietokantaan.\",\n    offline: \"Olet offline-tilassa. Muutokset tallennetaan paikallisesti\",\n    delete_feature: \"Haluatko poistaa valitun ominaisuuden?\",\n    delete_feature_relations: \"Mik√§li ominaisuudella on sitovia relaatioita, n√§ist√§ relaatiosta tulee orpoja. Suosittelemme k√§sittelem√§√§n n√§m√§ relaatiot ennen poistamista\",\n    unlink_relation: \"Haluatko poistaa relaation?\",\n    commit_feature: \"Yhteenveto muutoksista\",\n    toolbox_has_relation: \"t√§m√§ kerros on osa relaatiota\",\n    saved: \"Tiedot tallennettu onnistuneesti\",\n    saved_local: \"Tiedot on tallennettu onnistuneesti paikallisesti.\",\n    loading_data: \"Ladataan tietoja\",\n    saving: \"Tallentaan tietoja. Odota...\",\n    constraints: {\n      enable_editing: \"L√§henn√§ ottaaksesi muokkausty√∂kalut k√§ytt√∂√∂n \\nAktivointi mittakaava 1:\"\n    },\n    pdf: \"Dokumentin esikatselu ei ole saatavilla. Paina t√§st√§ \",\n    commit: {\n      header: \"Seuraava luettelo n√§ytt√§√§ kaikki muutokset.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Lis√§tty</b> n√§yt√§ lis√§ttyjen ominaisuuksien lukum√§√§r√§\",\n      header_update_delete: \"<b>Muokattu</b> ja <b>Poistettu</b> N√§yt√§ list√§ ominaisuuksien id:st√§\",\n      add: \"Lis√§tty\",\n      delete: \"Poistettu\",\n      update: \"Muokattu\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Valitse relaatiota linkitt\\xE4\\xE4ksesi ne muokattavaan ominaisuuteen.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Luo ja linkit√§ uusi relaatio\",\n        link_relation: \"Liit√§ relaatio t√§h√§n ominaisuuteen\",\n        open_relation_tools: \"N√§yt√§ relaatioty√∂kalut\",\n        unlink_relation: \"Poista relaatio\"\n      }\n    },\n    buttons: {\n      save: \"Lis√§√§/muokkaa\",\n      save_and_back: \"Tallenna ja palaa\",\n      save_and_back_table: \"Tallenna ja palaa\",\n      cancel: \"Peruuta\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],19:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Une erreur s'est produite lors du chargement des layers dans l'√©dition.\",\n    some_layers: \"Une erreur s'est produite lors du chargement de certaines layers dans l'√©dition.\"\n  },\n  search: \"Recherche\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Modifier les donnes\",\n  editing_attributes: \"Modifier les attributs\",\n  relations: \"Relations\",\n  edit_relation: \"Modifier la relation\",\n  back_to_relations: \"Retour aux relations\",\n  no_relations_found: \"Il n'y a pas de relations\",\n  relation_data: \"Donn√©es sur les relations\",\n  relation_already_added: \"Relation d√©j√† pr√©sente\",\n  list_of_relations_feature: \"Lister les relations de la fonctionnalit√©\",\n  tooltip: {\n    edit_layer: \"Modifier le layer\"\n  },\n  toolbox: {\n    title: 'Modifier'\n  },\n  table: {\n    edit: \"Modifier fonctionnalit√©s\",\n    copy: \"Cr√©er une copie\",\n    delete: \"Supprimer la fonctionnalit√©\"\n  },\n  tools: {\n    copy: \"Copier les fonctionnalit√©s\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Ajouter une pi√®ce √† la g√©om√©trie\",\n    deletepart: \"Supprimer la partie de la g√©om√©trie\",\n    merge: \"Dissoudre les fonctionnalit√©s\",\n    split: \"Couper la fonctionnalit√©\",\n    add_feature: \"Ajouter une fonctionnalit√©\",\n    delete_feature: \"Supprimer la fonctionnalit√©\",\n    move_feature: \"D√©placez la fonctionnalit√©\",\n    update_vertex: \"Mettre √† jour les sommets des fonctionnalit√©s\",\n    update_feature: \"Modifier les attributs des fonctionnalit√©s\",\n    update_multi_features: \"Modifier les attributs des fonctionnalit√©s s√©lectionn√©es\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"S√©lectionner les fonctionnalit√©s\",\n      select_element: \"S√©lectionner une fonctionnalit√©\",\n      copy: \"Cr√©er une copie des fonctionnalit√©s s√©lectionn√©es\",\n      merge: \"Dissoudre les fonctionnalit√©s\",\n      split: \"Couper la fonctionnalit√©\",\n      new: \"Cr√©er une nouvelle fonctionnalit√©\",\n      edit_table: \"Modifier les fonctionnalit√©s de la table\",\n      draw_new_feature: \"Dessiner une fonctionnalit√© sur la carte\",\n      action_confirm: \"Confirmer l'action\",\n      double_click_delete: \"S√©lectionner la fonctionnalit√© sur la carte √† supprimer\",\n      edit_feature_vertex: \"Modifier ou ajouter un sommet √† la fonctionnalit√© s√©lectionn√©e\",\n      move: \"D√©placer la fonctionnalit√© s√©lectionn√©e\",\n      select_feature_to_relation: \"S√©lectionner la fonctionnalit√© que vous souhaitez mettre en relation\",\n      show_edit_feature_form: \"Afficher le formulaire de la fonctionnalit√© permettant de modifier les attributs\",\n      pick_feature: \"S√©lectionner l'√©l√©ment de la carte √† modifier\",\n      insert_attributes_feature: \"Ins√©rer les attributs de la fonctionnalit√©\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Cliquer sur la fonctionnalit√© √† s√©lectionner',\n      draw_part: \"Dessiner la nouvelle partie\",\n      draw_geometry: \"Dessiner la g√©om√©trie\",\n      merge: 'S√©lectionner la fonction √† introduire en fondu',\n      selectPoint: \"Cliquer sur la fonctionnalit√© pour la s√©lectionner\",\n      selectSHIFT: 'S√©lectionner des fonctionnalit√©s en maintenant la touche SHIFT enfonc√©e',\n      selectDrawBox: \"S√©lectionner les fonctionnalit√©s en dessinant un rectangle par la cr√©ation des deux points de la diagonale\",\n      selectDrawBoxAtLeast2Feature: \"S√©lectionner au moins 2 fonctionnalit√©s en dessinant un rectangle par la cr√©ation des deux points de la diagonale\",\n      selectPointSHIFT: 'S√©lectionner des caract√©ristiques en maintenant la touche SHIFT enfonc√©e (multi-s√©lection) ou en cliquant sur une seule caract√©ristique',\n      selectMultiPointSHIFT: 'S√©lectionner des fonctionnalit√©s en maintenant la touche SHIFT appuy√©e ou en cliquant sur la fonctionnalit√© individuelle',\n      selectMultiPointSHIFTAtLeast2Feature: 'S√©lectionner au moins 2 fonctionnalit√©s en maintenant la touche SHIFT appuy√©e ou en cliquant sur la fonctionnalit√© individuelle',\n      copyCTRL: 'Copier les fonctionnalit√©s s√©lectionn√©es avec CTRL+C',\n      selectStartVertex: 'S√©lectionner le sommet de d√©part des fonctionnalit√©s choisies',\n      selectToPaste: 'S√©lectionner le point o√π les fonctionnalit√©s s√©lectionn√©es seront coll√©es',\n      draw_split_line: \"Tracez une ligne pour couper la fonctionnalit√© s√©lectionn√©e\"\n    },\n    title: {\n      steps: '√âtapes'\n    },\n    next: 'Suivant'\n  },\n  messages: {\n    featureslockbyotheruser: \"Certaines g√©om√©tries/enregistrements ne sont pas modifiables car ils ont √©t√© modifi√©s par un autre utilisateur\",\n    splitted: \"Fonctionnalit√©(s) divis√©(es)\",\n    nosplittedfeature: \"La (les) fonctionnalit√©(s) n‚Äôa (n'ont) pas √©t√© divis√©(es)\",\n    press_esc: \"Appuyez sur ESC pour revenir\",\n    online: \"Vous √™tes √† nouveau EN LIGNE. Vous pouvez enregistrer les modifications de fa√ßon permanente\",\n    offline: \"Vous √™tes HORS LIGNE. Toutes les modifications seront enregistr√©es temporairement en local\",\n    delete_feature: \"Voulez-vous supprimer la fonctionnalit√© s√©lectionn√©e ?\",\n    delete_feature_relations: \"La suppression d'une fonctionnalit√© avec des relations associ√©es laissera ces relations orphelines. Il est recommand√© de g√©rer ces relations avant de supprimer la fonctionnalit√©\",\n    unlink_relation: \"Voulez-vous d√©tacher la relation ?\",\n    commit_feature: \"Sommaire des changements\",\n    toolbox_has_relation: \"cette couche fait partie d'une relation\",\n    saved: \"Les donn√©es ont √©t√© enregistr√©es correctement\",\n    saved_local: \"Les donn√©es ont √©t√© correctement sauvegard√©es localement\",\n    loading_data: \"Chargement des donn√©es\",\n    saving: \"Sauvegarde des donn√©es. Veuillez patienter ...\",\n    constraints: {\n      enable_editing: \"Augmenter le niveau de zoom pour permettre l'√©dition \\nEchelle de d√©clenchement 1 :\"\n    },\n    pdf: \"Aper√ßu du document non disponible. Cliquez ici \",\n    commit: {\n      header: \"La liste ci-dessous montre toutes les modifications qui seront enregistr√©es.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Ajouts</b> indique le nombre de fonctionnalit√©s ajout√©es\",\n      header_update_delete: \"<b>Modifi√©</b> e <b>Supprim√©</b> liste les ids\",\n      add: \"Ajout√©\",\n      delete: \"Supprim√©\",\n      update: \"Modifi√©\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"Avant d'enregistrer, il est n√©cessaire de remplir tous les champs obligatoires du features saisi\",\n    no_feature_selected: \"Aucune feature s√©lectionn√©e\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>S\\xE9lectionner les relations pour les associer \\xE0 l'\\xE9l\\xE9ment en cours d'\\xE9dition.</div>\"\n    },\n    draw_new_feature: \"Dessiner une nouvelle feature\",\n    draw_or_copy: \"ou\",\n    copy_feature_from_other_layer: \"Copier feature d'une autre layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Cr√©er et ajouter une nouvelle relation\",\n        link_relation: \"Associer une relation existante √† cette fonctionnalit√©\",\n        open_relation_tools: \"Outils de relation ouverte\",\n        unlink_relation: \"Annuler la relation\"\n      }\n    },\n    buttons: {\n      save: \"Ins√©rer/Modifier\",\n      save_and_back: \"Sauvegarder et retourner au parent\",\n      save_and_back_table: \"Sauvegarder et et revenir en arri√®re\",\n      cancel: \"Ignorer modifications\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],20:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _it = require('./it');\n\nvar _it2 = _interopRequireDefault(_it);\n\nvar _en = require('./en');\n\nvar _en2 = _interopRequireDefault(_en);\n\nvar _fi = require('./fi');\n\nvar _fi2 = _interopRequireDefault(_fi);\n\nvar _se = require('./se');\n\nvar _se2 = _interopRequireDefault(_se);\n\nvar _fr = require('./fr');\n\nvar _fr2 = _interopRequireDefault(_fr);\n\nvar _de = require('./de');\n\nvar _de2 = _interopRequireDefault(_de);\n\nvar _ro = require('./ro');\n\nvar _ro2 = _interopRequireDefault(_ro);\n\nvar _pl = require('./pl');\n\nvar _pl2 = _interopRequireDefault(_pl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  it: _it2.default,\n  en: _en2.default,\n  fi: _fi2.default,\n  se: _se2.default,\n  fr: _fr2.default,\n  de: _de2.default,\n  ro: _ro2.default,\n  pl: _pl2.default\n};\n\n},{\"./de\":16,\"./en\":17,\"./fi\":18,\"./fr\":19,\"./it\":21,\"./pl\":22,\"./ro\":23,\"./se\":24}],21:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"Terminare l'editing dei singoli layer per chiudere la sessione\"\n  },\n  errors: {\n    no_layers: \"Si √® verificato un errore nel caricamento dei layers in editing.\",\n    some_layers: \"Si √® verificato un errore nel caricamento di alcuni layers in editing\",\n    editing_multiple_relations: 'Le modifica di relazioni multiple non √® attualmente supportata'\n  },\n  search: \"Cerca\",\n  editing_changes: \"Modifiche Editing\",\n  editing_data: \"Modifica dati\",\n  editing_attributes: \"Edita attributi\",\n  relations: \"Relazioni\",\n  edit_relation: \"Edita relazione\",\n  back_to_relations: \"Ritorna alle Relazioni\",\n  no_relations_found: \"Non ci sono relazioni\",\n  relation_data: \"Dati relativi alla relazione\",\n  relation_already_added: \"Relazione gi√† presente\",\n  list_of_relations_feature: \"Elenco Relazioni della feature \",\n  tooltip: {\n    edit_layer: \"Modifica livello\",\n    filter_by_relation: \"Filtra i livelli per relazione\"\n  },\n  toolbox: {\n    title: 'Edita'\n  },\n  table: {\n    edit: \"Edita feature\",\n    copy: \"Crea una copia\",\n    delete: \"Cancella feature\"\n  },\n  tools: {\n    copy: \"Copia elementi\",\n    pastefeaturesfromotherlayers: \"Incolla elemento da altro livello\",\n    addpart: \"Aggiungi parte alla geometria\",\n    deletepart: \"Cancella parte dalla geometria\",\n    merge: \"Dissolvi elementi\",\n    split: \"Dividi elementi\",\n    add_feature: \"Aggiungi elemento\",\n    delete_feature: \"Elimina elemento\",\n    move_feature: \"Muovi elemento\",\n    update_vertex: \"Aggiorna vertici elemento\",\n    update_feature: \"Modifica attributi elemento\",\n    update_multi_features: \"Modifica gli attributi degli elementi selezionati\",\n    update_multi_features_relations: \"Modifica gli attributi di tutte le relazioni selezionate\",\n    copyfeaturefromexternallayer: \"Crea elemento da un livello esterno\"\n  },\n  toolsoftool: {\n    measure: \"Visualizza misura\",\n    snap: \"Snap sul layer\",\n    snapall: \"Snap su tutti i layer\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Seleziona le geometrie\",\n      select_element: \"Seleziona l'elemento\",\n      copy: \"Crea una copia degli elementi selezionati\",\n      merge: \"Dissolvi elementi\",\n      split: \"Dvidi elemento\",\n      new: \"Crea un nuovo elemento\",\n      edit_table: \"Modifica gli elementi della tabella\",\n      draw_new_feature: \"Disegna la nuova geometria\",\n      action_confirm: \"Conferma azione\",\n      double_click_delete: \"Seleziona la geometria sulla mappa da cancellare\",\n      edit_feature_vertex: \"Modifica o aggiungi un vertice alla geometria selezionata\",\n      move: \"Muovi la geometria selezionata\",\n      select_feature_to_relation: \"Seleziona la geometria che vuoi mettere in relazione\",\n      show_edit_feature_form: \"Mostra il modulo per modificare gli attributi del'elemento\",\n      pick_feature: \"Seleziona la geometria da modificare dalla mappa\",\n      insert_attributes_feature: \"Inserisci gli attributi dell'elemento\"\n    }\n  },\n\n  workflow: {\n    steps: {\n      select: 'Seleziona una geometria',\n      draw_part: \"Disegna il nuovo elemento da aggiungere alla geometria\",\n      draw_geometry: \"Disegna la geometria\",\n      merge: 'Seleziona la geometria su cui dissolvere',\n      selectPoint: \"Clicca sulla geometria per selezionarla\",\n      selectSHIFT: 'Seleziona le geometrie tenedo premuto il tasto SHIFT',\n      selectDrawBox: \"Seleziona le geometrie disegnando un rettangolo mediante la creazione dei due punti della diagonale\",\n      selectDrawBoxAtLeast2Feature: \"Seleziona almeno 2 geometrie disegnando un rettangolo mediante la creazione dei due punti della diagonale\",\n      selectPointSHIFT: 'Seleziona le geometrie <br><sub><code>MAIUSC+DRAG</code> seleziona pi√π elementi in un area</sub>',\n      selectMultiPointSHIFT: 'Seleziona le geometrie <br><sub><code>SHIFT+DRAG</code> seleziona pi√π elementi in un area</sub>',\n      selectMultiPointSHIFTAtLeast2Feature: 'Seleziona almeno 2 geometrie <br><sub><code>SHIFT+DRAG</code> seleziona pi√π elementi in un area</sub>',\n      copyCTRL: 'Copia le geometrie selezionate con CTRL+C',\n      selectStartVertex: 'Seleziona il vertice di partenza',\n      selectToPaste: 'Seleziona il punto dove verranno incollate le geometrie',\n      draw_split_line: \"Disegna una linea per dividere la geometria selezionata\"\n    },\n    title: {\n      steps: 'Passi'\n    },\n    next: 'Avanti'\n  },\n  messages: {\n    featureslockbyotheruser: \"Ci sono alcune geometrie/records non editabili perch√® in modifica da altri utenti\",\n    splitted: \"Feature(s) splittata(e)\",\n    nosplittedfeature: \"La(e) feature(s) non √® stata splittata\",\n    press_esc: \"Premi ESC per tornare indietro\",\n    online: \"Ora sei di nuovo ONLINE. Puoi slavare le modifiche in modo permanente\",\n    offline: \"Sei OFFLINE. Tutte le modifiche saranno salvate temporaneamente in locale\",\n    delete_feature: \"Vuoi eliminare l'elemento selezionato?\",\n    delete_feature_relations: \"Cancellando una feature con relazioni associate, tale relazioni rimarranno orfane. Si consiglia di gestire tali relazioni prima di cancellare la feature\",\n    unlink_relation: \"Vuoi staccare la relazione?\",\n    commit_feature: \"Riepilogo modifiche\",\n    toolbox_has_no_geometry: \"questo livello non ha geometria\",\n    toolbox_has_relation: \"questo livello fa parte di una relazione\",\n    saved: \"I dati sono stati salvati correttamente\",\n    saved_local: \"I dati sono stati salvati correttamente in locale\",\n    loading_data: \"Caricamento dati\",\n    saving: \"Salvataggio dati in corso. Attendere ...\",\n    constraints: {\n      enable_editing: \"Ingrandisci per modificare \\nScala di attivazione 1:\"\n    },\n    pdf: \"Anteprima del documento non disponibile. Clicca qui \",\n    commit: {\n      header: \"La lista sotto riporta tutte le modifiche che verranno salvate.\",\n      header_relation: \"Relazione\",\n      header_add: \"<b>Aggiunte</b> riporta il numero delle features aggiunte\",\n      header_update_delete: \"<b>Modificate</b> e <b>Cancellate</b> riporta la lista degli id\",\n      add: \"Aggiunte\",\n      delete: \"Cancellate\",\n      update: \"Aggiornate\"\n    },\n    loading_table_data: \"Costruzione tabella dati in corso. Attendere ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"Necessario compilare eventuali campi obbligatori sulle features incollate prima del salvataggio\",\n    no_feature_selected: \"Nessuna feature selezionata\",\n    select_min_2_features: 'Seleziona come minimo due features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Seleziona le relazioni per associarle alla feature in editing.</div>\"\n    },\n    draw_new_feature: \"Disegna nuova geometria\",\n    draw_or_copy: \"oppure\",\n    copy_feature_from_other_layer: \"Copia geometria da altro layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Torna ad editare il padre\",\n        add_relation: \"Crea ed aggiungi nuova relazione\",\n        link_relation: \"Associa una relazione esistente a questa feature\",\n        open_relation_tools: \"Apri strumenti relatione\",\n        unlink_relation: \"Annulla relazione\"\n      }\n    },\n    buttons: {\n      save: \"Inserisci/Modifica\",\n      save_table: 'Modifica',\n      save_and_back: \"Salva e torna al padre\",\n      save_and_back_table: \"Salva e torna indietro\",\n      cancel: \"Ignora Modifiche\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Seleziona layer\",\n        edit_attributes: \"Edita attributi delle features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Seleziona una feature\"\n      }\n    }\n  }\n};\n\n},{}],22:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  errors: {\n    no_layers: \"An error occurs. It's no possible to edit layers\",\n    some_layers: \"An error occurs: It's no possible to edit some layers\"\n  },\n  search: \"Search\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Editing Layers\",\n  editing_attributes: \"Editing attributes\",\n  relations: \"Relations\",\n  edit_relation: \"Edit relation\",\n  back_to_relations: \"Back to Relations\",\n  no_relations_found: \"No relations found\",\n  relation_data: \"Relation data\",\n  relation_already_added: \"Relation already added\",\n  list_of_relations_feature: \"List of relations feature \",\n  tooltip: {\n    edit_layer: \"Edit Layer\"\n  },\n  toolbox: {\n    title: 'Edit'\n  },\n  table: {\n    edit: \"Edit feature\",\n    copy: \"Create a copy\",\n    delete: \"Delete feature\"\n  },\n  tools: {\n    copy: \"Copy features\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Add part to multipart\",\n    deletepart: \"Delete part from multipart\",\n    merge: \"Dissolve features\",\n    split: \"Split Feature\",\n    add_feature: \"Add feature\",\n    delete_feature: \"Delete feature\",\n    move_feature: \"Move feature\",\n    update_vertex: \"Update feature vertex\",\n    update_feature: \"Update feature attribute\",\n    update_multi_features: \"Update attributes of selected features\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Select features\",\n      select_element: \"Select feature\",\n      copy: \"Create new copy of selected features\",\n      merge: \"Dissolve features\",\n      split: \"Split Feature\",\n      new: \"Create new feature\",\n      edit_table: \"Edit table features\",\n      draw_new_feature: \"Draw feature on map\",\n      action_confirm: \"Confirm action\",\n      double_click_delete: \"Select feature on map to delete\",\n      edit_feature_vertex: \"Modify or add a vertex on selected feature\",\n      move: \"Move selected feature\",\n      select_feature_to_relation: \"Select feature that you bind relation\",\n      show_edit_feature_form: \"Show feature form to edit attributes\",\n      pick_feature: \"Select feature on map to modify\",\n      insert_attributes_feature: \"Insert attributes of the feature\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Click on feature to select',\n      draw_part: \"Draw new part\",\n      merge: 'Select featurewhere dissolve',\n      selectSHIFT: 'Select features drawing a rectangle pressing SHIFT',\n      selectDrawBox: \"Select features drawing a rectangle by two point of opposite corners\",\n      selectDrawBoxAtLeast2Feature: \"Select at least features drawing a rectangle by two point of opposite corners\",\n      selectPoint: \"Click on feature to select\",\n      selectPointSHIFT: 'Select features drawing a rectangle pressing SHIFT (multifeatures) or click on one feature',\n      selectMultiPointSHIFT: 'Select features drawing a rectangle pressing SHIFT or click on feature',\n      selectMultiPointSHIFTAtLeast2Feature: 'Select at least 2 features drawing a rectangle pressing SHIFT or click on feature',\n      copyCTRL: 'Copy selected features using CTRL+C',\n      selectStartVertex: 'Select starting vertex of selected features',\n      selectToPaste: 'Select the point where paste the features selected',\n      draw_split_line: \"Draw a line to split selected feature\"\n    },\n    title: {\n      steps: 'Steps'\n    },\n    next: 'Next'\n  },\n  messages: {\n    featureslockbyotheruser: \"Some geometries/records are not editable because in editing by other user\",\n    splitted: \"Splitted\",\n    nosplittedfeature: \"Feature not spitted\",\n    press_esc: \"Press ESC to back\",\n    online: \"Back ONLINE. Now you can save your changes on database\",\n    offline: \"You are OFFLINE. All changes are saved locally\",\n    delete_feature: \"Do you want delete selected feature ?\",\n    delete_feature_relations: \"If feature has bindings relations, these relations become orphans. We suggest to handle these relations before detele this feature\",\n    unlink_relation: \"Do you want unlink relation?\",\n    commit_feature: \"Do you want to save the changes\",\n    toolbox_has_relation: \"this layer is part of a relation\",\n    saved: \"Data saved successfully\",\n    saved_local: \"Data saved locally successfully\",\n    loading_data: \"Loading data\",\n    saving: \"Saving data. Please wait ...\",\n    constraints: {\n      enable_editing: \"Please Zoom In to enable editing tools \\nActivation scale at 1:\"\n    },\n    pdf: \"Document preview not available. Please click here \",\n    commit: {\n      header: \"The following list show all changes to commit.\",\n      header_add: \"<b>Added</b> show the number of features added\",\n      header_update_delete: \"<b>Modified</b> and <b>Deleted</b> show the list of features id\",\n      add: \"Added(n. features)\",\n      delete: \"Deleted(id)\",\n      update: \"Modified(id)\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Select relations to link it to current editing feature.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Create and link new relation\",\n        link_relation: \"Join a relation to this feature\",\n        open_relation_tools: \"Show relation tools\",\n        unlink_relation: \"Unlink relation\"\n      }\n    },\n    buttons: {\n      save: \"Insert/Edit\",\n      save_and_back: \"Save and Back\",\n      save_and_back_table: \"Save and Back\",\n      cancel: \"Ignore Changes\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],23:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Avem o eroare. Straturile nu sunt editabile\",\n    some_layers: \"Avem o eroare: Anumite straturi nu se pot edita\"\n  },\n  search: \"CautƒÉ\",\n  editing_changes: \"Modificare schimbƒÉri\",\n  editing_data: \"Modificare straturi\",\n  editing_attributes: \"Modificare atribute\",\n  relations: \"Rela»õii\",\n  edit_relation: \"ModificƒÉ rela»õia\",\n  back_to_relations: \"√énapoi la Rela»õii\",\n  no_relations_found: \"Nu am gƒÉsit rela»õii\",\n  relation_data: \"Date rela»õii\",\n  relation_already_added: \"Rela»õie adƒÉugatƒÉ deja\",\n  list_of_relations_feature: \"Lista rela»õii entitatea \",\n  tooltip: {\n    edit_layer: \"ModificƒÉ strat\"\n  },\n  toolbox: {\n    title: 'ModificƒÉ'\n  },\n  table: {\n    edit: \"ModificƒÉ entitate\",\n    copy: \"CreeazƒÉ o copie\",\n    delete: \"EliminƒÉ entitatea\"\n  },\n  tools: {\n    copy: \"CopiazƒÉ entitƒÉ»õile\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"AdaugƒÉ o parte la multiparte\",\n    deletepart: \"EliminƒÉ partea din multiparte\",\n    merge: \"Dizolvare entitƒÉ»õi\",\n    split: \"Divizare Entitate\",\n    add_feature: \"AdaugƒÉ entitate\",\n    delete_feature: \"Eliminare entitate\",\n    move_feature: \"MutƒÉ entitate\",\n    update_vertex: \"ActualizeazƒÉ vertec»ôii entitƒÉ»õii\",\n    update_feature: \"ActualizeazƒÉ atributul entitƒÉ»õii\",\n    update_multi_features: \"ActualizeazƒÉ atributele entitƒÉ»õilor selectate\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"AratƒÉ mƒÉsurƒÉtorile\",\n    snap: \"Acro»ôare strat\",\n    snapall: \"Acro»ôare pe toate straturile\"\n  },\n  steps: {\n    help: {\n      select_elements: \"SelecteazƒÉ entitƒÉ»õi\",\n      select_element: \"SelecteazƒÉ entitate\",\n      copy: \"CreeazƒÉ o nouƒÉ copie a entitƒÉ»õilor selectate\",\n      merge: \"DizolvƒÉ entitƒÉ»õile\",\n      split: \"Divizare Entitate\",\n      new: \"CreeazƒÉ o entitate\",\n      edit_table: \"ModificƒÉ entitƒÉ»õile tabelare\",\n      draw_new_feature: \"DeseneazƒÉ entitate pe hartƒÉ\",\n      action_confirm: \"ConfirmƒÉ ac»õiunea\",\n      double_click_delete: \"SelecteazƒÉ entitatea de eliminat din hartƒÉ\",\n      edit_feature_vertex: \"ModificƒÉ sau adaugƒÉ un vertex la entitatea selectatƒÉ\",\n      move: \"MutƒÉ entitatea selectatƒÉ\",\n      select_feature_to_relation: \"SelecteazƒÉ entitate pentru rela»õionare\",\n      show_edit_feature_form: \"AratƒÉ formularul entitƒÉ»õii pentru modificƒÉri\",\n      pick_feature: \"SelecteazƒÉ entitƒÉ»õile de modificat din hartƒÉ\",\n      insert_attributes_feature: \"InsereazƒÉ atributele entitƒÉ»õii\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Click pe entitate pentru a o selecta',\n      draw_part: \"DeseneazƒÉ o parte nouƒÉ\",\n      draw_geometry: \"Desena»õi geometria\",\n      merge: 'SelecteazƒÉ partea de dizolvat',\n      selectSHIFT: 'SelecteazƒÉ entitƒÉ»õi prin desen triunghi apƒÉs√¢nd SHIFT',\n      selectDrawBox: \"SelecteazƒÉ entitƒÉ»õi desen√¢nd un dreptunghi prin douƒÉ puncte opuse\",\n      selectDrawBoxAtLeast2Feature: \"SelecteazƒÉ cel pu»õin 2 entitƒÉ»õi prin desenul unui dreptunghi\",\n      selectPoint: \"Click pe entitate pentru selectare\",\n      selectPointSHIFT: 'SelecteazƒÉ entitƒÉ»õi prin desen dreptunghi apƒÉs√¢nd SHIFT (multientitƒÉ»õi) sau prin click pe entitate',\n      selectMultiPointSHIFT: 'SelecteazƒÉ entitƒÉ»õi prin desen dreptunghi apƒÉs√¢nd SHIFT sau prin click pe entitate',\n      selectMultiPointSHIFTAtLeast2Feature: 'SelecteazƒÉ cel pu»õin 2 entitƒÉ»õi prin desen dreptunghi apƒÉs√¢nd SHIFT sau prin click pe entitate',\n      copyCTRL: 'CopiazƒÉ entitƒÉ»õile selectate folosint CTRL+C',\n      selectStartVertex: 'SelecteazƒÉ vertexul de start a entitƒÉ»õilor selectate',\n      selectToPaste: 'SelecteazƒÉ punctul unde sƒÉ lipim entitƒÉ»õile selectate',\n      draw_split_line: \"DeseneazƒÉ o linie pentru a diviza entitatea selectatƒÉ\"\n    },\n    title: {\n      steps: 'Pa»ôi'\n    },\n    next: 'UrmƒÉtorul'\n  },\n  messages: {\n    featureslockbyotheruser: \"Unele geometrii/√ÆnregistrƒÉri nu sunt editabile deoarece sunt editate de cƒÉtre alt utilizator\",\n    splitted: \"Divizat\",\n    nosplittedfeature: \"Entitate nedivizatƒÉ\",\n    press_esc: \"ESC pentru √Ænapoi\",\n    online: \"√énapoi ONLINE. Acum se pot salva schimbƒÉrile\",\n    offline: \"OFFLINE. SchimbƒÉrile sunt salvate local\",\n    delete_feature: \"»òterg entitatea selectatƒÉ?\",\n    delete_feature_relations: \"DacƒÉ entitatea are rela»õii care trimit la ea, acele rela»õii devin orfane. SugerƒÉm sƒÉ vƒÉ ocupa»õi de acele elemente √Ænainte sƒÉ elimina»õi aceastƒÉ entitate.\",\n    unlink_relation: \"Dore»ôti sƒÉ elimina»õi legƒÉtura cu rela»õia?\",\n    commit_feature: \"Rezumatul modificƒÉrilor\",\n    toolbox_has_relation: \"acest strat face parte dintr-o rela»õie\",\n    saved: \"Datele sunt salvate\",\n    saved_local: \"Datele s-au salvat local\",\n    loading_data: \"Datele se √ÆncarcƒÉ.\",\n    saving: \"SalvƒÉm datele. A»ôtepta»õi ...\",\n    constraints: {\n      enable_editing: \"Pentru a activa Modificare face»õi zoom la \\nScara de activare 1:\"\n    },\n    pdf: \"Previzualizarea documentului nu este disponibilƒÉ. Click aici \",\n    commit: {\n      header: \"Lista cu toate modificƒÉrile.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>AdƒÉugate</b> aratƒÉ nr. de entitƒÉ»õi adƒÉugate\",\n      header_update_delete: \"<b>Modificate</b> »ôi <b>»òterse</b> aratƒÉ lista de id-uri de entitƒÉ»õi\",\n      add: \"AdƒÉugate\",\n      delete: \"Eliminate\",\n      update: \"Modificate\"\n    },\n    loading_table_data: \"√éncƒÉrcƒÉm tabelul de date ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"√énainte de a salva, este necesar sƒÉ completa»õi toate c√¢mpurile obligatorii ale entitƒÉ»õi introduse\",\n    no_feature_selected: \"Nicio feature selectatƒÉ\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Selecteaz\\u0103 rela\\u021Biile pentru a face leg\\u0103tura cu entitatea curent\\u0103.</div>\"\n    },\n    draw_new_feature: \"Desena»õi o nouƒÉ feature\",\n    draw_or_copy: \"sau\",\n    copy_feature_from_other_layer: \"Copia»õi feature dintr-un alt layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"√énapoi la modificƒÉrile entitƒÉ»õii pƒÉrinte\",\n        add_relation: \"CreeazƒÉ »ôi fƒÉ legƒÉtura unei rela»õii noi\",\n        link_relation: \"LeagƒÉ o rela»õie de entitate\",\n        open_relation_tools: \"AratƒÉ instrumentele pentru rela»õii\",\n        unlink_relation: \"EliminƒÉ legƒÉtura la rela»õie\"\n      }\n    },\n    buttons: {\n      save: \"Insera»õi/Edita»õi\",\n      save_and_back: \"SalveazƒÉ »ôi dƒÉ √Ænapoi\",\n      save_and_back_table: \"SalveazƒÉ »ôi dƒÉ √Ænapoi\",\n      cancel: \"Ignora»õi modificƒÉrile\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],24:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Ett fel uppstod. Niv√•erna kan inte redigeras.\",\n    some_layers: \"Ett fel uppstod. Vissa niv√•er kan inte redigeras.\"\n  },\n  search: \"S√∂kning\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Niv√•erna redigeras\",\n  editing_attributes: \"Attributen redigeras\",\n  relations: \"Relationer\",\n  edit_relation: \"Redigera relationen\",\n  back_to_relations: \"Tillbaka till relationerna\",\n  no_relations_found: \"Inga relationer hittades\",\n  relation_data: \"Relationsuppgifter\",\n  relation_already_added: \"Relationen har redan lagts till\",\n  list_of_relations_feature: \"Lista p√• relationens egenskaper\",\n  tooltip: {\n    edit_layer: \"Redigera niv√•n\"\n  },\n  toolbox: {\n    title: 'Redigera'\n  },\n  table: {\n    edit: \"Redigera egenskap\",\n    copy: \"Skapa en kopia\",\n    delete: \"Ta bort egenskap\"\n  },\n  tools: {\n    copy: \"Kopiera egenskaper\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"L√§gg till del\",\n    deletepart: \"Ta bort del\",\n    merge: \"Sl√• samman egenskaper\",\n    split: \"Dela upp egenskap\",\n    add_feature: \"L√§gg till egenskap\",\n    delete_feature: \"Ta bort egenskap\",\n    move_feature: \"Flytta egenskap\",\n    update_vertex: \"Uppdatera punktens egenskap\",\n    update_feature: \"Uppdatera egenskap\",\n    update_multi_features: \"√Ñndra attributen f√∂r de valda funktionerna\",\n    update_multi_features_relations: \"Update attributes of all selected relations\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"V√§lj egenskaper\",\n      select_element: \"V√§lj egenskapalitse ominaisuus\",\n      copy: \"Skapa kopia av valda egenskaper\",\n      merge: \"Sl√• samman egenskaper\",\n      split: \"Dela upp egenskap\",\n      new: \"Skapa ny egenskap\",\n      edit_table: \"√Ñndra egenskaper i tabellen\",\n      draw_new_feature: \"Piirr√§ ominaisuus kartalle\",\n      action_confirm: \"Godk√§nn funktionen\",\n      double_click_delete: \"V√§lj funktionen som du vill ta bort p√• kartan\",\n      edit_feature_vertex: \"√Ñndra punkten eller l√§gg till punkten till den valda egenskapen\",\n      move: \"Flytta den valda egenskapen\",\n      select_feature_to_relation: \"V√§lj relation\",\n      show_edit_feature_form: \"Visa egenskapsformul√§ret f√∂r redigering av attribut\",\n      pick_feature: \"V√§lj funktion p√• kartan f√∂r att √§ndras\",\n      insert_attributes_feature: \"L√§gg till egenskapens attribut\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'V√§lj egenskap',\n      draw_part: \"Rita ny del\",\n      draw_geometry: \"Rita geometri\",\n      merge: 'V√§lj egenskap att sl√• samman',\n      selectSHIFT: 'Tryck SHIFT, om du vill v√§lja objekt med hj√§lp av rektangel.', //Tero 10.12.2020\n      selectDrawBox: \"Rita upp den rektangel inom vilken objekten v√§ljs \", //Tero 10.12.2020\n      selectDrawBoxAtLeast2Feature: \"Rita rektangeln inom vilken minst tv√• objekt √§r markerade \",\n      selectPoint: \"V√§lj egenskap\",\n      selectPointSHIFT: 'Tryck SHIFT, om du vill v√§lja objekt med hj√§lp av rektangel, eller v√§lj en enskild egenskap.',\n      selectMultiPointSHIFT: 'Tryck SHIFT, om du vill v√§lja objekt med hj√§lp av rektangel, eller v√§lj en enskild egenskap.',\n      selectMultiPointSHIFTAtLeast2Feature: 'Tryck p√• SKIFT f√∂r att v√§lja minst tv√• objekt med en rektangel eller v√§lj en enda egenskap. ',\n      copyCTRL: 'CTRL+C, du kan kopiera valda egenskaper.', //Tero 10.12.2020\n      selectStartVertex: 'Visa startpunkten f√∂r valda egenskaper.',\n      selectToPaste: 'V√§lj punkt till vilken de valda egenskaperna ska fogas.',\n      draw_split_line: \"Rita en linje enligt vilken den valda egenskapen ska uppdelas.\"\n    },\n    title: {\n      steps: 'Skeden'\n    },\n    next: \"N√§sta\"\n  },\n  messages: {\n    featureslockbyotheruser: \"Jotkut geometriat/tietueet eiv√§t ole muokattavissa, koska muut k√§ytt√§j√§t muokkaavat niit√§\",\n    splitted: \"Uppdelad\",\n    nosplittedfeature: \"Egenskapen har inte delats upp\",\n    press_esc: \"Tryck ESC f√∂r att g√• tillbaka\",\n    online: \"F√∂rbindelsen har uppr√§ttats. √Ñndringar kan sparas i databasen.\",\n    offline: \"Du √§r i offline-l√§ge. √Ñndringarna sparas lokalt\",\n    delete_feature: \"Vill du ta bort den valda egenskapen?\",\n    delete_feature_relations: \"Om egenskapen saknar bindande relationer blir dessa relationer f√∂r√§ldral√∂sa. Vi rekommenderar att du behandlar dessa relationer innan du l√§mnar programmet\",\n    unlink_relation: \"Vill du ta bort relationen?\",\n    commit_feature: \"Sammanfattning av √§ndringar\",\n    toolbox_has_relation: \"detta lager √§r en del av en relation\",\n    saved: \"Uppgifterna sparades\",\n    saved_local: \"Uppgifterna sparades lokalt.\",\n    loading_data: \"Uppgifterna laddas\",\n    saving: \"Uppgifterna sparas. V√§nta...\",\n    constraints: {\n      enable_editing: \"Zooma in f√∂r att b√∂rja anv√§nda redigeringsverktyg \\nAktivering skala 1:\"\n    },\n    pdf: \"F√∂rhandsgranskning av dokument √§r inte tillg√§nglig. Tryck h√§r\",\n    commit: {\n      header: \"F√∂ljande lista visar alla √§ndringar.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Tillagda</b> visar antalet egenskaper som lagts till\",\n      header_update_delete: \"<b>Redigerad</b> och <b>Borttagen</b> Visa en lista p√• egenskapernas id\",\n      add: \"har lagts till\",\n      delete: \"Borttagen\",\n      update: \"Redigerad\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>V\\xE4lj relation f\\xF6r l\\xE4nkning till egenskap som ska redigeras.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Skapa och l√§nka ny relation\",\n        link_relation: \"Foga relationen till denna egenskap\",\n        open_relation_tools: \"Visa relationsverktyg\",\n        unlink_relation: \"Ta bort relation\"\n      }\n    },\n    buttons: {\n      save: \"Infoga/Redigera\",\n      save_and_back: \"Spara och g√• tillbaka\",\n      save_and_back_table: \"Spara och g√• tillbaka\",\n      cancel: \"Ignorera √§ndringar\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select layer\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],25:[function(require,module,exports){\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _rollback = function () {\n  var _ref39 = _asyncToGenerator(function* () {\n    var relations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    return Promise.allSettled(Object.entries(relations).flatMap(function (_ref40) {\n      var _ref41 = _slicedToArray(_ref40, 2),\n          layerId = _ref41[0],\n          _ref41$ = _ref41[1],\n          add = _ref41$.add,\n          del = _ref41$.delete,\n          update = _ref41$.update,\n          _ref41$$relations = _ref41$.relations,\n          relations = _ref41$$relations === undefined ? {} : _ref41$$relations;\n\n      var source = (0, _getEditingLayerById.getEditingLayerById)(layerId).getEditingSource();\n      var has_features = source.readFeatures().length > 0; // check if the relation layer has some features\n      // get original values\n      return [].concat(_toConsumableArray((has_features && add || []).map(function () {\n        var _ref43 = _asyncToGenerator(function* (_ref42) {\n          var id = _ref42.id;\n\n          source.removeFeature(source.getFeatureById(id));\n        });\n\n        return function (_x23) {\n          return _ref43.apply(this, arguments);\n        };\n      }())), _toConsumableArray((has_features && update || []).map(function () {\n        var _ref45 = _asyncToGenerator(function* (_ref44) {\n          var id = _ref44.id;\n\n          try {\n            var response = yield XHR.get({\n              url: CatalogLayersStoresRegistry.getLayerById(layerId).getUrl('data'),\n              params: { fids: id }\n            });\n            var f = (response.result && response.vector.data.features || []).at(0);\n            var feature = source.getFeatureById(id);\n            feature.setProperties(f.properties);\n            feature.setGeometry(f.geometry);\n          } catch (e) {\n            console.warn(e);\n          }\n        });\n\n        return function (_x24) {\n          return _ref45.apply(this, arguments);\n        };\n      }())), _toConsumableArray(del.map(function () {\n        var _ref46 = _asyncToGenerator(function* (id) {\n          try {\n            var response = yield XHR.get({\n              url: CatalogLayersStoresRegistry.getLayerById(layerId).getUrl('data'),\n              params: { fids: id }\n            });\n            var f = (response.result && response.vector.data.features || []).at(0);\n            var feature = new ol.Feature({ geometry: f.geometry });\n            feature.setProperties(f.properties);\n            feature.setId(id);\n            source.addFeature(new Feature({ feature: feature })); // add it again to source because relation layer is locked\n          } catch (e) {\n            console.warn(e);\n          }\n        });\n\n        return function (_x25) {\n          return _ref46.apply(this, arguments);\n        };\n      }())), [_rollback(relations)]);\n    }));\n  });\n\n  return function _rollback() {\n    return _ref39.apply(this, arguments);\n  };\n}();\n\nrequire('./g3wsdk');\n\nvar _i18n = require('./i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _workflow = require('./g3wsdk/workflow/workflow');\n\nvar _step = require('./g3wsdk/workflow/step');\n\nvar _promisify = require('./utils/promisify');\n\nvar _createFeature = require('./utils/createFeature');\n\nvar _getEditingLayerById = require('./utils/getEditingLayerById');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('./utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _addPartToMultigeometries = require('./utils/addPartToMultigeometries');\n\nvar _workflows = require('./workflows');\n\nvar _toolbox = require('./toolboxes/toolbox');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar G3W_FID = g3wsdk.constant.G3W_FID;\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    ApplicationService = _g3wsdk$core.ApplicationService;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar _g3wsdk$core$i18n = g3wsdk.core.i18n,\n    t = _g3wsdk$core$i18n.t,\n    tPlugin = _g3wsdk$core$i18n.tPlugin;\nvar _g3wsdk$core$layer = g3wsdk.core.layer,\n    Layer = _g3wsdk$core$layer.Layer,\n    LayersStore = _g3wsdk$core$layer.LayersStore;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar MapLayersStoreRegistry = g3wsdk.core.map.MapLayersStoreRegistry;\nvar _g3wsdk$core$plugin = g3wsdk.core.plugin,\n    Plugin = _g3wsdk$core$plugin.Plugin,\n    PluginService = _g3wsdk$core$plugin.PluginService;\nvar _g3wsdk$core$utils = g3wsdk.core.utils,\n    XHR = _g3wsdk$core$utils.XHR,\n    noop = _g3wsdk$core$utils.noop;\nvar GUI = g3wsdk.gui.GUI;\nvar Panel = g3wsdk.gui.vue.Panel;\nvar serverErrorParser = g3wsdk.core.errors.parsers.Server;\nvar Geometry = g3wsdk.core.geoutils.Geometry;\nvar _g3wsdk$ol$utils = g3wsdk.ol.utils,\n    getScaleFromResolution = _g3wsdk$ol$utils.getScaleFromResolution,\n    getResolutionFromScale = _g3wsdk$ol$utils.getResolutionFromScale;\n\n\nObject.entries({\n  Workflow: _workflow.Workflow,\n  OpenFormStep: _workflows.OpenFormStep,\n  AddFeatureStep: _workflows.AddFeatureStep,\n  ToolBox: _toolbox.ToolBox\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nnew (function (_Plugin) {\n  _inherits(_class, _Plugin);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Global plugin state\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, {\n      name: 'editing',\n      i18n: _i18n2.default,\n      fontClasses: [{ name: 'measure', className: \"fas fa-ruler-combined\" }, { name: 'magnete', className: \"fas fa-magnet\" }, { name: 'clipboard', className: \"fas fa-clipboard\" }]\n    }));\n\n    _this.state = {\n      open: false, // check if panel is open or not\n      toolboxes: [],\n      _toolboxes: [], // TODO: `state._toolboxes` vs `state.toolboxes` ?\n      toolboxselected: null,\n      /** @since g3w-client-plugin-editing@v3.6.2 */\n      showselectlayers: true, // whether to show selected layers on editing panel\n      message: null,\n      relations: [],\n      sessions: {}, // store all sessions\n      layers_in_error: false,\n      formComponents: {}, // plugin components\n      subscribers: {},\n      constraints: { // editing contraints (layer, filter, ..) to get features\n        toolboxes: {},\n        showToolboxesExcluded: true\n      },\n      featuresOnClose: {}, // layers fatures to result when close editing (KEY LAYERID, VALUES ARRAY OF FEATURE FID CHANGES OR ADDED)\n      uniqueFieldsValues: {}, // store unique fields values for each layer\n      saveConfig: { // store configuration of how save/commit changes to server\n        mode: \"default\", // default, autosave\n        modal: false,\n        messages: undefined, // object to set custom message\n        cb: {\n          done: function done() {}, // function executed after commit change done\n          error: function error() {} // function executed after commit changes error\n        }\n      },\n      editableLayers: {},\n      events: {\n        'start-editing': {},\n        'show-relation-editing': {},\n        layer: {\n          start_editing: {\n            before: {},\n            after: {}\n          }\n        }\n      },\n      show_errors: false,\n      editFeatureKey: undefined,\n      panel: null, // editing panel\n      currentLayout: ApplicationService.getCurrentLayoutName(),\n      unwatchLayout: new Vue().$watch(function () {\n        return ApplicationState.gui.layout.__current;\n      }, function (layoutName) {\n        return _this.state.currentLayout = layoutName !== _this.getName() ? layoutName : _this.state.currentLayout;\n      }),\n      onMapControlToggled: function onMapControlToggled(_ref3) {\n        var target = _ref3.target;\n\n        target.isToggled() && target.isClickMap() && _this.state.toolboxselected && _this.state.toolboxselected.getActiveTool() && _this.state.toolboxselected.stopActiveTool();\n      }\n    };\n\n    // BACKOMP v3.x\n    _this.setService(Object.assign(new PluginService(), {\n      state: _this.state,\n      config: _this.config,\n      getSession: _this.getSession.bind(_this),\n      getFeature: _this.getFeature.bind(_this),\n      subscribe: _this.subscribe.bind(_this),\n      unsubscribe: _this.unsubscribe.bind(_this),\n      fireEvent: _this.fireEvent.bind(_this),\n      undo: _this.undo.bind(_this),\n      redo: _this.redo.bind(_this),\n      getEditingLayer: _this.getEditingLayer.bind(_this),\n      addToolBox: _this.addToolBox.bind(_this),\n      runEventHandler: _this.runEventHandler.bind(_this),\n      resetDefault: _this.resetDefault.bind(_this),\n      resetAPIDefault: _this.resetAPIDefault.bind(_this),\n      getLayers: _this.getLayers.bind(_this),\n      getLayerById: _this.getLayerById.bind(_this),\n      getToolBoxById: _this.getToolBoxById.bind(_this),\n      getSessionById: _this.getSessionById.bind(_this),\n      setApplicationEditingConstraints: _this.setApplicationEditingConstraints.bind(_this),\n      getToolBoxes: _this.getToolBoxes.bind(_this),\n      getEditableLayers: _this.getEditableLayers.bind(_this),\n      stop: _this.stop.bind(_this),\n      saveChange: _this.saveChange.bind(_this),\n      commit: _this.commit.bind(_this),\n      undoRedoLayerUniqueFieldValues: _this.undoRedoLayerUniqueFieldValues.bind(_this),\n      undoRedoRelationUniqueFieldValues: _this.undoRedoRelationUniqueFieldValues.bind(_this),\n      stopEditing: _this.stopEditing.bind(_this),\n      startEditing: _this.startEditing.bind(_this),\n      addLayerFeature: _this.addLayerFeature.bind(_this)\n    }));\n\n    // set map control toggle event\n    GUI.getService('map').on('mapcontrol:toggled', _this.state.onMapControlToggled);\n\n    _this._init();\n    return _this;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n   * \n   * @since g3w-client-plugin-editing@v3.8.0\n   */\n\n\n  _createClass(_class, [{\n    key: '_init',\n    value: function () {\n      var _ref4 = _asyncToGenerator(function* () {\n        var _this2 = this;\n\n        // skip when no editable layer\n        if (!CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).length) {\n          return;\n        }\n\n        this.setHookLoading({ loading: true });\n\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1 */\n        this.service.setApi({\n          api: {\n            getSession: this.getSession.bind(this),\n            getFeature: this.getFeature.bind(this),\n            subscribe: this.subscribe.bind(this),\n            unsubscribe: this.unsubscribe.bind(this),\n            getToolBoxById: this.getToolBoxById.bind(this),\n            addNewFeature: _createFeature.createFeature,\n            commitChanges: this.commit.bind(this),\n            setApplicationEditingConstraints: this.setApplicationEditingConstraints.bind(this),\n            getMapService: function getMapService() {\n              return GUI.getService('map');\n            },\n            updateLayerFeature: noop,\n            deleteLayerFeature: noop,\n            addLayerFeature: this.addLayerFeature.bind(this),\n            hidePanel: this.hideEditingPanel.bind(this),\n            resetDefault: this.resetAPIDefault.bind(this),\n            startEditing: this.startEditing.bind(this),\n            stopEditing: this.stopEditing.bind(this),\n            showPanel: this.showPanel.bind(this),\n            setSaveConfig: this.setSaveConfig.bind(this),\n            addFormComponents: this.addFormComponents.bind(this)\n          }\n        });\n\n        // add editing layer store to mapstoreregistry\n        MapLayersStoreRegistry.addLayersStore(new LayersStore({ id: 'editing', queryable: false }));\n\n        this.state.editableLayers = {};\n        this.state._toolboxes = [];\n        this.state.toolboxes = [];\n\n        // loop over editable layers\n        (yield Promise.allSettled(CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }, { TOC_ORDER: true }).map(function (l) {\n          return l.getLayerForEditing({\n            vectorurl: _this2.config.vectorurl,\n            project_type: _this2.config.project_type\n          });\n        }))).forEach(function (_ref5) {\n          var status = _ref5.status,\n              layer = _ref5.value;\n\n\n          // skip on http error\n          if ('fulfilled' !== status) {\n            _this2.state.layers_in_error = true;\n            return;\n          }\n\n          _this2.state.editableLayers[layer.getId()] = layer;\n\n          //set default empty object\n          _this2.state.uniqueFieldsValues[layer.getId()] = {};\n\n          /**\n           * attach layer widgets event: get data from api when a field of a layer\n           * is related to a wgis form widget (ex. relation reference, value map, etc..)\n           */\n          layer.getEditingFields().filter(function (field) {\n            return field.input && 'select_autocomplete' === field.input.type && !field.input.options.filter_expression && !field.input.options.usecompleter;\n          })\n          /** @TODO need to avoid to call the same fnc to same event many times to avoid waste server request time */\n          .forEach(function (field) {\n            return ['start-editing', 'show-relation-editing'].forEach(function (type) {\n              var id = layer.getId();\n              _this2.state.events[type][id] = _this2.state.events[type][id] || [];\n\n              _this2.state.events[type][id].push(_asyncToGenerator(function* () {\n                var options = field.input.options;\n\n                // remove all values\n                options.loading.state = 'loading';\n                options.values = [];\n\n                var relationLayer = options.layer_id && CatalogLayersStoresRegistry.getLayerById(options.layer_id);\n                var has_filter = [undefined, null].includes(options.filter_fields || []) || 0 === (options.filter_fields || []).length;\n\n                try {\n\n                  // relation reference widget + no filter set\n                  if (options.relation_reference && has_filter) {\n                    var response = yield layer.getFilterData({ fformatter: field.name }); // get data with fformatter\n                    if (response && response.data) {\n                      var _options$values;\n\n                      // response data is an array ok key value objects\n                      (_options$values = options.values).push.apply(_options$values, _toConsumableArray(response.data.map(function (_ref7) {\n                        var _ref8 = _slicedToArray(_ref7, 2),\n                            value = _ref8[0],\n                            key = _ref8[1];\n\n                        return { key: key, value: value };\n                      })));\n                      options.loading.state = 'ready';\n                      _this2.fireEvent('autocomplete', { field: field, data: [response.data] });\n                      return options.values;\n                    }\n                  }\n\n                  // value map widget\n                  if (relationLayer) {\n                    //ordering by value or key depend on orderbyvalue Boolean value\n                    var _response = yield (0, _promisify.promisify)(relationLayer.getDataTable({ ordering: options.orderbyvalue ? options.value : options.key }));\n                    if (_response && _response.features) {\n                      var _options$values2;\n\n                      (_options$values2 = options.values).push.apply(_options$values2, _toConsumableArray((_response.features || []).map(function (feature) {\n                        return {\n                          key: feature.properties[options.value],\n                          value: feature.properties[options.key]\n                        };\n                      })));\n                      options.loading.state = 'ready';\n                      _this2.fireEvent('autocomplete', { field: field, features: _response.features });\n                      return options.values;\n                    }\n                  }\n\n                  /** @TODO check if deprecated */\n                  var features = [];\n                  options.loading.state = 'ready';\n                  _this2.fireEvent('autocomplete', { field: field, features: features });\n                  return features;\n                } catch (e) {\n                  console.warn(e);\n                  options.loading.state = 'error';\n                  return Promise.reject(e);\n                }\n              }));\n            });\n          });\n\n          _this2.state.sessions[layer.getId()] = null;\n        });\n\n        var i = 0;\n        this.getLayers().forEach(function (editingLayer) {\n          /**\n           * set 1:1 relation fields editable\n           * \n           * Check if layer has relation 1:1 (type ONE) and if fields\n           *\n           * belongs to relation where child layer is editable\n           *\n           * @since g3w-client-plugin-editing@v3.7.0\n           */\n          var fatherId = editingLayer.getId(); // father layer\n          CatalogLayersStoresRegistry.getLayerById(fatherId).getRelations().getArray().filter(function (relation) {\n            return 'ONE' === relation.getType() && fatherId === relation.getFather();\n          }) // 'ONE' == join 1:1 + father layerId is a father of relation\n          .forEach(function (relation) {\n            var isChildEditable = undefined !== _this2.getLayerById(relation.getChild()); // check if child layerId is editable (in editing)\n            _this2.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n              return f.vectorjoin_id && f.vectorjoin_id === relation.getId();\n            }) // father layer fields (in editing)\n            .forEach(function (f) {\n              f.editable = f.editable && isChildEditable;\n            }); // current editable boolean value + child editable layer\n          });\n          // Set editing layer color and toolbox style\n          if (!editingLayer.getColor()) {\n            editingLayer.setColor(editingLayer.isGeoLayer() ? [\"#C43C39\", \"#d95f02\", \"#91522D\", \"#7F9801\", \"#0B2637\", \"#8D5A99\", \"#85B66F\", \"#8D2307\", \"#2B83BA\", \"#7D8B8F\", \"#E8718D\", \"#1E434C\", \"#9B4F07\", '#1b9e77', \"#FF9E17\", \"#7570b3\", \"#204B24\", \"#9795A3\", \"#C94F44\", \"#7B9F35\", \"#373276\", \"#882D61\", \"#AA9039\", \"#F38F3A\", \"#712333\", \"#3B3A73\", \"#9E5165\", \"#A51E22\", \"#261326\", \"#e4572e\", \"#29335c\", \"#f3a712\", \"#669bbc\", \"#eb6841\", \"#4f372d\", \"#cc2a36\", \"#00a0b0\", \"#00b159\", \"#f37735\", \"#ffc425\"][i++ % 40] : '#fff');\n          }\n        });\n\n        // after add layers to layerstore\n        MapLayersStoreRegistry.getLayersStore('editing').addLayers(this.getLayers());\n\n        // create toolboxes\n        this.getLayers().forEach(function (l) {\n          return _this2.addToolBox(new _toolbox.ToolBox(l, [].concat(_toConsumableArray(l.getChildren()), _toConsumableArray(l.getFathers())).filter(function (id) {\n            return _this2.getLayerById(id);\n          })));\n        });\n\n        yield GUI.isReady();\n\n        this._setupGUI();\n\n        this.setHookLoading({ loading: false });\n        this.setReady(true);\n      });\n\n      function _init() {\n        return _ref4.apply(this, arguments);\n      }\n\n      return _init;\n    }()\n\n    // setup plugin interface\n\n  }, {\n    key: '_setupGUI',\n    value: function () {\n      var _ref9 = _asyncToGenerator(function* () {\n        var _this3 = this;\n\n        //@since 3.9.0\n        // skip when:\n        // 1 - plugin is not referred to the current project id\n        // 2 - configuration of plugin, visible is set to false\n        // 3 - There aren't editable layers or all are not visible\n        if (!this.registerPlugin(this.config.gid) || false === this.config.visible || 0 === this.getLayers().filter(function (l) {\n          return l.config.editing.visible;\n        }).length) {\n          return;\n        }\n\n        /**\n         * ORIGINAL SOURCE: g3w-client-plugin/toolboxes/toolboxesfactory.js@v3.7.1\n         *\n         * Register query result action: edit selected feature from query results\n         */\n        this.state.editFeatureKey = GUI.getService('queryresults').onafter('editFeature', _asyncToGenerator(function* () {\n          var _ref11 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n              layer = _ref11.layer,\n              feature = _ref11.feature;\n\n          var fid = feature.attributes[G3W_FID] || feature.id;\n\n          //In case of not unique id, skip\n          if (undefined === fid) {\n            return;\n          }\n\n          _this3.getToolBoxes().forEach(function (tb) {\n            return tb.setShow(layer.id === tb.getId());\n          });\n          _this3.showEditingPanel();\n\n          _this3.state.showselectlayers = false;\n\n          _this3.subscribe('closeeditingpanel', function () {\n            _this3.state.showselectlayers = true;return { once: true };\n          });\n\n          var toolBox = _this3.getToolBoxById(layer.id);\n          //set selected\n          toolBox.setSelected(true);\n\n          var session = toolBox.getSession();\n\n          var _toolBox$getEditingCo = toolBox.getEditingConstraints(),\n              scale = _toolBox$getEditingCo.scale; // get scale constraint from setting layer\n\n          var w = void 0;\n\n          // start toolbox (filtered by feature id)\n          try {\n            // check map scale after zoom to feature\n            // if currentScale is more that scale constraint set by layer editing\n            // needs to go to scale setting by layer editing constraint\n            if (scale) {\n              var units = GUI.getService('map').getMapUnits();\n              var map = GUI.getService('map').getMap();\n              var currentScale = parseInt(getScaleFromResolution(map.getView().getResolution(), GUI.getService('map').getMapUnits()));\n              if (currentScale > scale) {\n                map.getView().setResolution(getResolutionFromScale(scale, units));\n              }\n            }\n\n            yield (0, _promisify.promisify)(toolBox.start({ filter: { fids: fid } }));\n\n            var _layer = toolBox.getLayer();\n            var source = _layer.getEditingLayer().getSource();\n            var is_vector = Layer.LayerTypes.VECTOR === _layer.getType();\n\n            // get feature from an Editing layer source (with styles)\n            var features = is_vector ? source.getFeatures() : source.readFeatures();\n            var _feature = features.find(function (f) {\n              return fid == f.getId();\n            });\n\n            // skip when not feature is get from server\n            if (!_feature) {\n              return;\n            }\n\n            var geom = _feature.getGeometry();\n\n            // feature has geometry ‚Üí zoom to geometry\n            if (geom) {\n              GUI.getService('map').zoomToGeometry(geom);\n            }\n\n            toolBox.setSelected(true);\n\n            _this3.state.toolboxselected = toolBox;\n\n            var addPartTool = is_vector && !geom && toolBox.getTools().find(function (t) {\n              return 'addPart' === t.getId();\n            });\n\n            // check if layer is single geometry. Need to show and change behaviour\n            if (addPartTool && !Geometry.isMultiGeometry(_layer.getGeometryType())) {\n              addPartTool.visible = true;\n            }\n\n            // add geometry when vector layer feature has no geometry\n            if (addPartTool) {\n              //get workflow\n              var op = addPartTool.getOperator();\n              var _w = new _workflow.Workflow({\n                type: 'drawgeometry',\n                helpMessage: 'editing.workflow.steps.draw_geometry',\n                runOnce: true, // need to run once time\n                steps: [new _workflows.AddFeatureStep({\n                  add: false,\n                  steps: {\n                    addfeature: {\n                      description: 'editing.workflow.steps.draw_geometry'\n                    }\n                  },\n                  onRun: function onRun(_ref12) {\n                    var inputs = _ref12.inputs,\n                        context = _ref12.context;\n\n                    _w.emit('settoolsoftool', [{\n                      type: 'snap',\n                      options: {\n                        layerId: inputs.layer.getId(),\n                        source: inputs.layer.getEditingLayer().getSource(),\n                        active: true\n                      }\n                    }, {\n                      type: 'measure',\n                      options: {\n                        active: false\n                      }\n                    }]);\n                    _w.emit('active', ['snap']);\n                  },\n                  onStop: function onStop() {\n                    return _w.emit('deactive', ['snap', 'measure']);\n                  }\n                }),\n                // add part to multi geometries\n                new _step.Step({ run: _addPartToMultigeometries.addPartToMultigeometries })],\n                registerEscKeyEvent: true\n              });\n\n              addPartTool.setOperator(_w);\n\n              _this3.subscribe('closeeditingpanel', function () {\n                addPartTool.setOperator(op);\n                addPartTool.visible = Geometry.isMultiGeometry(_layer.getGeometryType());\n              });\n            }\n\n            /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editnopickmapfeatureattributesworkflow.js@v3.7.1 */\n            w = new _workflow.Workflow({\n              type: 'editnopickmapfeatureattributes',\n              runOnce: true,\n              helpMessage: 'editing.tools.update_feature',\n              steps: [new _workflows.OpenFormStep()]\n            });\n\n            yield (0, _promisify.promisify)(w.start({\n              inputs: { layer: _layer, features: [_feature] },\n              context: { session: session }\n            }));\n\n            yield (0, _promisify.promisify)(session.save());\n\n            _this3.saveChange();\n          } catch (e) {\n            console.warn(e);\n            session.rollback();\n          } finally {\n            w.stop();\n          }\n        }));\n\n        this.config.name = this.config.name || \"plugins.editing.editing_data\";\n\n        this.addToolGroup({ position: 0, title: 'EDITING' });\n        this.addTools({\n          action: this.showEditingPanel,\n          offline: false,\n          icon: 'pencil'\n        }, { position: 0, title: 'EDITING' });\n      });\n\n      function _setupGUI() {\n        return _ref9.apply(this, arguments);\n      }\n\n      return _setupGUI;\n    }()\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     * \n     * Get session\n     *\n     * @param layerId\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getSession',\n    value: function getSession() {\n      var _ref13 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref13.layerId;\n\n      return this.getToolBoxById(layerId).getSession();\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     *\n     * @param layerId\n     *\n     * @returns Feature in editing\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getFeature',\n    value: function getFeature() {\n      var _ref14 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref14.layerId;\n\n      return this.getToolBoxById(layerId).getActiveTool().getLayer().features[0];\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     * \n     * Subscribe handler function on event\n     *\n     * @param event\n     * @param { Function } fnc\n     *\n     * @returns { Function } function\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(event, fnc) {\n      if (!this.state.subscribers[event]) {\n        this.state.subscribers[event] = [];\n      }\n      if (!this.state.subscribers[event].find(function (subscribe) {\n        return fnc === subscribe;\n      })) {\n        this.state.subscribers[event].push(fnc);\n      }\n      return fnc;\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     * \n     * Unsubscribe handler function on event\n     *\n     * @param event\n     * @param fnc\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(event, fnc) {\n      this.state.subscribers[event] = this.state.subscribers[event].filter(function (sub) {\n        return fnc !== sub;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param event\n     * @param options\n     *\n     * @returns { Promise<unknown> }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'fireEvent',\n    value: function () {\n      var _ref15 = _asyncToGenerator(function* (event) {\n        var _this4 = this;\n\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        if (this.state.subscribers[event]) {\n          this.state.subscribers[event].forEach(function (fnc) {\n            var response = fnc(options);\n            if (response && response.once) {\n              _this4.unsubscribe(event, fnc);\n            }\n          });\n        }\n      });\n\n      function fireEvent(_x5) {\n        return _ref15.apply(this, arguments);\n      }\n\n      return fireEvent;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Undo method\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var _this5 = this;\n\n      var session = this.state.toolboxselected.getSession();\n      var layerId = session.getId();\n      var sessionItems = session.getLastHistoryState().items;\n\n      //update unique values fields after undo\n      this.undoRedoLayerUniqueFieldValues({\n        layerId: layerId,\n        sessionItems: sessionItems,\n        action: 'undo'\n      });\n\n      var undoItems = session.undo();\n      //update unique values of relations after undo\n      this.undoRedoRelationUniqueFieldValues({\n        relationSessionItems: undoItems,\n        action: 'undo'\n      });\n\n      // undo relations\n      Object.entries(undoItems).forEach(function (_ref16) {\n        var _ref17 = _slicedToArray(_ref16, 2),\n            toolboxId = _ref17[0],\n            items = _ref17[1];\n\n        _this5.getToolBoxById(toolboxId).getSession().undo(items);\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'redo',\n    value: function redo() {\n      var _this6 = this;\n\n      var session = this.state.toolboxselected.getSession();\n      var layerId = session.getId();\n      var sessionItems = session.getLastHistoryState().items;\n      //update unique values fields after redo\n      this.undoRedoLayerUniqueFieldValues({\n        layerId: layerId,\n        sessionItems: sessionItems,\n        action: 'redo'\n      });\n      var redoItems = session.redo();\n      //update unique values of relations after redo\n      this.undoRedoRelationUniqueFieldValues({\n        relationSessionItems: redoItems,\n        action: 'redo'\n      });\n\n      // redo relations\n      Object.entries(redoItems).forEach(function (_ref18) {\n        var _ref19 = _slicedToArray(_ref18, 2),\n            toolboxId = _ref19[0],\n            items = _ref19[1];\n\n        _this6.getToolBoxById(toolboxId).getSession().redo(items);\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param id\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getEditingLayer',\n    value: function getEditingLayer(id) {\n      return this.state.editableLayers[id].getEditingLayer();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param toolbox\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addToolBox',\n    value: function addToolBox(toolbox) {\n      this.state._toolboxes.push(toolbox);\n      this.state.sessions[toolbox.getId()] = toolbox.getSession(); // add session\n      this.state.toolboxes.push(toolbox.state);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } handler\n     * @param handler.type\n     * @param handler.id\n     *\n     * @returns { Promise<void> }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'runEventHandler',\n    value: function () {\n      var _ref20 = _asyncToGenerator(function* () {\n        var _ref21 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            type = _ref21.type,\n            id = _ref21.id;\n\n        if (this.state.events[type] && this.state.events[type][id]) {\n          yield Promise.allSettled(this.state.events[type][id].map(function (fnc) {\n            return fnc();\n          }));\n        }\n      });\n\n      function runEventHandler() {\n        return _ref20.apply(this, arguments);\n      }\n\n      return runEventHandler;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Reset default values\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'resetDefault',\n    value: function resetDefault() {\n      this.state.saveConfig = {\n        mode: \"default\", // default, autosave\n        modal: false,\n        messages: undefined, // object to set a custom message\n        cb: {\n          done: function done() {}, // function Called after save\n          error: function error() {} // function called affect commit error\n        }\n      };\n      GUI.getService('map').disableClickMapControls(false);\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Reset default toolbox state modified by other plugin\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'resetAPIDefault',\n    value: function resetAPIDefault() {\n      var _ref22 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref22$plugin = _ref22.plugin,\n          plugin = _ref22$plugin === undefined ? true : _ref22$plugin,\n          _ref22$toolboxes = _ref22.toolboxes,\n          toolboxes = _ref22$toolboxes === undefined ? true : _ref22$toolboxes;\n\n      if (toolboxes) {\n        this.getToolBoxes().forEach(function (tb) {\n          return tb.resetDefault();\n        });\n      }\n      if (plugin) {\n        this.resetDefault();\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @returns { Array }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getLayers',\n    value: function getLayers() {\n      return Object.values(this.state.editableLayers);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { string } id\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getLayerById',\n    value: function getLayerById(id) {\n      return this.state.editableLayers[id];\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { string } id\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getToolBoxById',\n    value: function getToolBoxById(id) {\n      return this.state._toolboxes.find(function (tb) {\n        return id === tb.getId();\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Get layer session by id (layer id is the same of session)\n     *\n     * @param id\n     *\n     * @returns {*}\n     *\n     * @since g3w-client-plugin-editing@v3.7.0\n     */\n\n  }, {\n    key: 'getSessionById',\n    value: function getSessionById(id) {\n      return this.state.sessions[id];\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Method to apply filter editing contsraint to toolbox editing\n     * Apply filter editing contsraint to toolbox editing\n     *\n     * @param constraints\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setApplicationEditingConstraints',\n    value: function setApplicationEditingConstraints() {\n      var _this7 = this;\n\n      var constraints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { showToolboxesExcluded: true, toolboxes: {} };\n\n      this.state.constraints = _extends({}, this.state.constraints, constraints);\n\n      var toolboxes = constraints.toolboxes,\n          showToolboxesExcluded = constraints.showToolboxesExcluded;\n\n      var toolboxIds = Object.keys(toolboxes);\n      if (false === showToolboxesExcluded) {\n        this.state.toolboxes.forEach(function (t) {\n          return t.show = toolboxIds.includes(t.id);\n        });\n      }\n      toolboxIds.forEach(function (id) {\n        return _this7.getToolBoxById(id).setEditingConstraints(toolboxes[id]);\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @returns { Array }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getToolBoxes',\n    value: function getToolBoxes() {\n      return this.state._toolboxes;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @returns {*|{}}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getEditableLayers',\n    value: function getEditableLayers() {\n      return this.state.editableLayers;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Stop editing\n     *\n     * @returns { Promise<unknown> }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'stop',\n    value: function () {\n      var _ref23 = _asyncToGenerator(function* () {\n        var _this8 = this;\n\n        var commitpromises = this.state._toolboxes.filter(function (t) {\n          return t.getSession().getHistory().state.commit;\n        }) // check if temp changes are waiting to save on server\n        .map(function (toolbox) {\n          return _this8.commit({ toolbox: toolbox, modal: true });\n        });\n        try {\n          yield (0, _promisify.promisify)($.when.apply(this, commitpromises));\n        } catch (e) {\n          console.warn(e);\n        }\n\n        this.state._toolboxes.forEach(function (t) {\n          return t.stop();\n        });\n\n        this.state.toolboxselected = null;\n        this.state.message = null;\n\n        //reset unique values\n        Object.keys(this.state.uniqueFieldsValues).forEach(function (id) {\n          return _this8.state.uniqueFieldsValues[id] = {};\n        });\n\n        GUI.getService('map').refreshMap();\n      });\n\n      function stop() {\n        return _ref23.apply(this, arguments);\n      }\n\n      return stop;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Function called very single change saved temporary\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'saveChange',\n    value: function () {\n      var _ref24 = _asyncToGenerator(function* () {\n        if ('autosave' === this.state.saveConfig.mode) {\n          return this.commit({ modal: false }); // set to not show a modal ask window\n        }\n      });\n\n      function saveChange() {\n        return _ref24.apply(this, arguments);\n      }\n\n      return saveChange;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Commit and save changes on server persistently\n     *\n     * @param { Object } commit\n     * @param commit.toolbox\n     * @param commit.commitItems\n     * @param commit.messages\n     * @param commit.done\n     * @param { boolean } commit.modal\n     * @param { boolean } commit.close\n     *\n     * @returns jQuery promise\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit() {\n      var _this10 = this;\n\n      var _ref25 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          toolbox = _ref25.toolbox,\n          commitItems = _ref25.commitItems,\n          _ref25$modal = _ref25.modal,\n          modal = _ref25$modal === undefined ? true : _ref25$modal,\n          _ref25$close = _ref25.close,\n          close = _ref25$close === undefined ? false : _ref25$close;\n\n      var messages = Object.assign({ success: { message: \"plugins.editing.messages.saved\", autoclose: true }, error: {} }, this.state.saveConfig.messages || {});\n      toolbox = toolbox || this.state.toolboxselected;\n      var layer = toolbox.getLayer();\n      var items = commitItems;\n      commitItems = commitItems || toolbox.getSession().getCommitItems();\n      var online = ApplicationState.online;\n      var has_changes = [].concat(_toConsumableArray(commitItems.add || []), _toConsumableArray(commitItems.delete || []), _toConsumableArray(commitItems.update || []), _toConsumableArray(Object.keys(commitItems.relations || {}))).length;\n      var workflow = void 0,\n          dialog = void 0,\n          serverError = void 0;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n\n        // skip when there is nothing to save\n        if (!has_changes) {\n          GUI.showUserMessage({ type: 'info', message: 'Nothing to save', autoclose: true, closable: false });\n          return toolbox;\n        }\n\n        try {\n\n          // show commit modal window\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8 */\n          if (modal) {\n            workflow = new _workflow.Workflow({\n              type: 'commitfeatures',\n              steps: [\n              // confirm step\n              new _step.Step({\n                run: function run(inputs) {\n                  var _this9 = this;\n\n                  return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n                    var dialog = GUI.dialog.dialog({\n                      message: inputs.message,\n                      title: tPlugin(\"editing.messages.commit_feature\") + ': \"' + inputs.layer.getName() + '\"',\n                      buttons: _extends({\n                        SAVE: { className: \"btn-success\", callback: function callback() {\n                            resolve(inputs);\n                          },\n                          label: t(\"save\") },\n                        CANCEL: { className: \"btn-danger\", callback: function callback() {\n                            reject({ cancel: true });\n                          },\n                          label: t(inputs.close ? \"exitnosave\" : \"annul\") }\n                      }, inputs.close ? { CLOSEMODAL: { className: \"btn-primary\", callback: function callback() {\n                            dialog.modal('hide');\n                          },\n                          label: t(\"annul\") } } : {})\n                    });\n                    if (inputs.features) {\n                      (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: promise(), inputs: inputs, style: _this9.selectStyle });\n                    }\n                  }));\n                }\n              })]\n            });\n            //need to get to confirm or cancel choose from modal\n            try {\n              yield (0, _promisify.promisify)(workflow.start({\n                inputs: {\n                  close: close,\n                  layer: layer,\n                  message: new (Vue.extend(require('./components/Changes.vue')))({\n                    propsData: {\n                      commits: commitItems,\n                      layer: layer\n                    } }).$mount().$el\n                }\n              }));\n              yield (0, _promisify.promisify)(workflow.stop());\n            } catch (e) {\n              console.warn(e);\n              // In the case of pressed cancel button to commit features modal\n              if (e && e.cancel) {\n                return Promise.reject(e);\n              }\n              //need to be set server Error\n              serverError = true;\n            }\n\n            //in case of online application\n            if (online) {\n              dialog = GUI.dialog.dialog({\n                message: '<h4 class=\"text-center\">\\n                          <i style=\"margin-right: 5px;\" class=' + GUI.getFontClass('spinner') + '></i>' + tPlugin('editing.messages.saving') + '\\n                        </h4>',\n                closeButton: false\n              });\n            }\n          }\n\n          var data = !online && _defineProperty({}, toolbox.getSession().getId(), commitItems);\n          //get current offline editing changes\n          var changes = !online && JSON.parse(window.localStorage.getItem('EDITING_CHANGES') || null);\n\n          // handle offline changes\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8 */\n          Object.keys(changes || {}).forEach(function (layerId) {\n            var currLayerId = Object.keys(data)[0];\n\n            // check if previous changes are made in the same layer or in relationlayer of current\n            var current = null;\n\n            if (data[layerId]) {\n              current = data;\n            } else if (data[currLayerId].relations[layerId]) {\n              current = data[currLayerId].relations;\n            }\n\n            // check if in the last changes\n            var relationsIds = !current && Object.keys(changes[layerId].relations || {});\n            var has_relations = !current && relationsIds.length > 0;\n            var GIVE_ME_A_NAME = !current && has_relations && relationsIds.includes(currLayerId);\n\n            // apply changes\n            if (current || GIVE_ME_A_NAME) {\n              var id = current ? layerId : currLayerId;\n              var curr = current ? current : data;\n              var prev = current ? changes : changes[layerId].relations;\n              curr[id].add = [].concat(_toConsumableArray(curr[id].add), _toConsumableArray(curr[id].add));\n              curr[id].delete = [].concat(_toConsumableArray(curr[id].delete), _toConsumableArray(curr[id].delete));\n\n              (prev[id].update || []).filter(function (update) {\n                return !curr[id].update.find(function (u) {\n                  return u.id === update.id;\n                });\n              }).forEach(function (update) {\n                return curr[id].update.unshift(update);\n              });\n\n              (prev[id].lockids || []).filter(function (lock) {\n                return !curr[id].lockids.find(function (l) {\n                  return l.featureid === lock.featureid;\n                });\n              }).forEach(function (lock) {\n                return curr[id].update.unshift(lock);\n              });\n            }\n\n            if (GIVE_ME_A_NAME) {\n              changes[layerId].relations[currLayerId] = data[currLayerId];\n              data = changes;\n            }\n            if (!current && !has_relations) {\n              data[layerId] = changes[layerId];\n            }\n          });\n\n          if (!online) {\n\n            GUI.showUserMessage({\n              type: 'success',\n              message: \"plugins.editing.messages.saved_local\",\n              autoclose: true\n            });\n            //clear history because it saved on browser\n            toolbox.getSession().clearHistory();\n          }\n\n          try {\n            // check if the application is online\n            var _ref28 = online ? yield (0, _promisify.promisify)(toolbox.getSession().commit({ items: items || commitItems, __esPromise: true })) : {},\n                commit = _ref28.commit,\n                response = _ref28.response;\n\n            //check if is online and there are some commit items\n\n\n            var online2 = online && commit;\n\n            var result = online2 && response.result;\n\n            if (result && messages && messages.success) {\n              // hide saving dialog\n              if (dialog) {\n                dialog.modal('hide');\n              }\n\n              //Show save user message\n              GUI.showUserMessage({\n                type: 'success',\n                message: messages.success.message || \"plugins.editing.messages.saved\",\n                duration: 2000,\n                autoclose: undefined === messages.success.autoclose ? true : messages.success.autoclose\n              });\n            }\n\n            // In the case of vector layer need to refresh map commit changes\n            if (result && Layer.LayerTypes.VECTOR === layer.getType()) {\n              GUI.getService('map').refreshMap({ force: true });\n            }\n\n            if (online) {\n              _this10.state.saveConfig.cb.done(toolbox);\n            }\n\n            // add items when close editing to result to show changes\n            var layerId = result && toolbox.getId();\n\n            if (layerId) {\n              _this10.state.featuresOnClose[layerId] = _this10.state.featuresOnClose[layerId] || new Set();\n              [].concat(_toConsumableArray(response.response.new.map(function (n) {\n                return n.id;\n              })), _toConsumableArray(commit.update.map(function (u) {\n                return u.id;\n              }))).forEach(function (fid) {\n                return _this10.state.featuresOnClose[layerId].add(fid);\n              });\n            }\n\n            // @since 3.7.2 - click on save all disk icon (editing form relation)\n            if (result) {\n              _this10.emit('commit', response.response);\n            }\n\n            // the result is false. It was done a commit, but an error occurs\n            if (online2 && !result) {\n              serverError = true;\n              throw response;\n            }\n          } catch (e) {\n            console.warn(e);\n            if (online) {\n              serverError = true;\n              throw e;\n            }\n          }\n        } catch (e) {\n          console.warn(e);\n\n          // hide saving dialog\n          if (dialog) {\n            dialog.modal('hide');\n          }\n\n          // rollback\n          //@TODO check if it is usefull\n          if (modal) {\n            try {\n              yield _rollback(commitItems.relations);\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n\n          // parse server error\n          if (serverError || modal) {\n            var message = online ? messages.error.message || new serverErrorParser({ error: e.errors || e || {} }).parse({ type: 'String' }) : e;\n\n            GUI.showUserMessage({\n              type: 'alert',\n              message: message,\n              textMessage: online ? !messages.error.message : true,\n              autoclose: online ? undefined !== messages.error.autoclose ? messages.error.autoclose : false : false\n            });\n\n            _this10.state.saveConfig.cb.error(toolbox, message);\n          }\n\n          return Promise.reject(toolbox);\n        }\n        return toolbox;\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } opts\n     * @param { string } opts.layerId\n     * @param { Array }  opts.sessionItems\n     * @param opts.action\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'undoRedoLayerUniqueFieldValues',\n    value: function undoRedoLayerUniqueFieldValues(_ref29) {\n      var _this11 = this;\n\n      var layerId = _ref29.layerId,\n          _ref29$sessionItems = _ref29.sessionItems,\n          sessionItems = _ref29$sessionItems === undefined ? [] : _ref29$sessionItems,\n          action = _ref29.action;\n\n\n      // if not set\n      if (undefined === this.state.uniqueFieldsValues[layerId]) {\n        return;\n      }\n\n      sessionItems.forEach(function (item) {\n\n        Object.keys(_this11.state.uniqueFieldsValues[layerId]).forEach(function (name) {\n          //name is the name of field\n          //check if change is an update [oldVal, newValue]\n          var is_array = Array.isArray(item);\n          var oldVal = void 0,\n              newVal = void 0;\n          if (is_array) {\n            // 0 = old value feature, 1 = new value feature\n            var has_change = item[1].feature.get(name) != item[0].feature.get(name);\n            // update feature that contains \"new\" and \"old\" values of feature\n            oldVal = has_change ? action === 'undo' ? item[1].feature.get(name) : item[0].feature.get(name) : undefined;\n            newVal = has_change ? action === 'undo' ? item[0].feature.get(name) : item[1].feature.get(name) : undefined;\n          } else {\n            oldVal = 'add' === item.feature.getState() ? item.feature.get(name) : undefined;\n            newVal = 'delete' === item.feature.getState() ? item.feature.get(name) : undefined;\n          }\n          // delete layer unique field value\n          if (undefined !== oldVal) {\n            _this11.state.uniqueFieldsValues[layerId][name].delete(oldVal);\n          }\n          // add layer unique field value\n          if (undefined !== newVal) {\n            _this11.state.uniqueFieldsValues[layerId][name].add(newVal);\n          }\n        });\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } opts\n     * @param opts.relationSessionItems\n     * @param opts.action\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'undoRedoRelationUniqueFieldValues',\n    value: function undoRedoRelationUniqueFieldValues(_ref30) {\n      var _this12 = this;\n\n      var relationSessionItems = _ref30.relationSessionItems,\n          action = _ref30.action;\n\n      Object.entries(relationSessionItems).forEach(function (_ref31) {\n        var _ref32 = _slicedToArray(_ref31, 2),\n            layerId = _ref32[0],\n            _ref32$ = _ref32[1],\n            sessionItems = _ref32$.own,\n            relationSessionItems = _ref32$.dependencies;\n\n        //undo/redo unique field of layer\n        _this12.undoRedoLayerUniqueFieldValues({\n          layerId: layerId,\n          sessionItems: sessionItems,\n          action: action\n        });\n        //undo/redo unique field of relations\n        _this12.undoRedoRelationUniqueFieldValues({\n          relationSessionItems: relationSessionItems,\n          action: action\n        });\n      });\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Stop editing on layerId\n     *\n     * @param layerId\n     * @param options\n     *\n     * @returns { Promise<unknown> }\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'stopEditing',\n    value: function () {\n      var _ref33 = _asyncToGenerator(function* (layerId) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        return (0, _promisify.promisify)(this.getToolBoxById(layerId).stop(options));\n      });\n\n      function stopEditing(_x11) {\n        return _ref33.apply(this, arguments);\n      }\n\n      return stopEditing;\n    }()\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Start editing API\n     *\n     * @param layerId\n     * @param { Object } options\n     * @param { boolean } [options.selected=true]\n     * @param { boolean } [options.disablemapcontrols=false]\n     * @param { boolean } [options.showselectlayers=true]\n     * @param { string }  [options.title]\n     * @param data\n     *\n     *\n     * @returns { Promise<unknown> }\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'startEditing',\n    value: function () {\n      var _ref34 = _asyncToGenerator(function* (layerId) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        options.selected = undefined === options.selected ? true : options.selected;\n        options.showselectlayers = undefined === options.showselectlayers ? true : options.showselectlayers;\n        options.disablemapcontrols = undefined === options.disablemapcontrols ? false : options.showselectlayers;\n        // get toolbox related to layer id\n        var toolbox = this.getToolBoxById(layerId);\n        // set show select layers input visibility\n        this.state.showselectlayers = options.showselectlayers;\n        // skip if toolbox doesn't exist\n        if (!toolbox) {\n          return Promise.reject();\n        }\n        // set selected\n        toolbox.setSelected(options.selected);\n        // set seletcted toolbox\n        if (options.selected) {\n          this.state.toolboxselected = toolbox;\n        }\n\n        //set toolbox title if provide\n        if (options.title) {\n          toolbox.setTitle(options.title);\n        }\n\n        // start editing toolbox (options contain also a filter type)\n        data = yield (0, _promisify.promisify)(toolbox.start(options));\n        // disablemapcontrols in conflict\n        if (options.disablemapcontrols) {\n          GUI.getService('map').disableClickMapControls(true);\n        }\n        // opts contain information about start editing has features loaded\n        return data ? { toolbox: toolbox, data: data } : toolbox;\n      });\n\n      function startEditing(_x14) {\n        return _ref34.apply(this, arguments);\n      }\n\n      return startEditing;\n    }()\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Add Feature\n     *\n     * @param { Object } opts\n     * @param opts.layerId\n     * @param opts.feature\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'addLayerFeature',\n    value: function addLayerFeature() {\n      var _this13 = this;\n\n      var _ref35 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref35.layerId,\n          feature = _ref35.feature;\n\n      // skip when mandatory params are missing\n      if ([feature, layerId].includes(undefined)) {\n        return Promise.reject();\n      }\n      return new Promise(function () {\n        var _ref36 = _asyncToGenerator(function* (resolve, reject) {\n          var layer = _this13.getLayerById(layerId);\n          // get session\n          var session = _this13.getSessionById(layerId);\n          // exclude an eventual attribute pk (primary key) not editable (mean autoincrement)\n          var attributes = layer.getEditingFields().filter(function (attr) {\n            return !(attr.pk && !attr.editable);\n          });\n          // start session (get no features but set layer in editing)\n          session.start({\n            filter: {\n              nofeatures: true, // no feature\n              nofeatures_field: attributes[0].name // get the first field in editing form\n            },\n            editing: true\n          });\n\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/easyaddfeatureworkflow.js@v3.7.1 */\n          // create workflow\n          var workflow = new _workflow.Workflow({\n            type: 'addfeature',\n            steps: [new _workflows.OpenFormStep({\n              push: true,\n              showgoback: false,\n              saveAll: false\n            })]\n          });\n\n          var stop = function stop(cb) {\n            workflow.stop();\n            session.stop();\n            return cb();\n          };\n\n          try {\n            //check if feature has property of layer\n            attributes.forEach(function (a) {\n              if (undefined === feature.get(a.name)) {\n                feature.set(a.name, null);\n              }\n            });\n\n            try {\n              //set feature as g3w feature\n              feature = new Feature({ feature: feature, properties: attributes.map(function (a) {\n                  return a.name;\n                }) });\n              //set new\n              feature.setTemporaryId();\n\n              // add to session and source as new feature\n              session.pushAdd(layerId, feature, false);\n              layer.getEditingLayer().getSource().addFeature(feature);\n              //start workflow\n              yield (0, _promisify.promisify)(workflow.start({\n                inputs: { layer: layer, features: [feature] },\n                context: { session: session }\n              }));\n\n              session.save();\n\n              try {\n                yield (0, _promisify.promisify)(_this13.commit({ modal: false, toolbox: _this13.getToolBoxById(layerId) }));\n                stop(resolve);\n              } catch (e) {\n                console.warn(e);\n                stop(reject);\n              }\n            } catch (e) {\n              console.warn(e);\n              stop(reject);\n            }\n          } catch (e) {\n            console.warn(e);\n            reject();\n          }\n        });\n\n        return function (_x16, _x17) {\n          return _ref36.apply(this, arguments);\n        };\n      }());\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } save\n     * @param save.mode     - default or autosave\n     * @param save.cb       - object contain done/error two functions\n     * @param save.modal    - Boolean true or false to show to ask\n     * @param save.messages - object success or error\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setSaveConfig',\n    value: function setSaveConfig() {\n      var _ref37 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref37$mode = _ref37.mode,\n          mode = _ref37$mode === undefined ? 'default' : _ref37$mode,\n          _ref37$cb = _ref37.cb,\n          cb = _ref37$cb === undefined ? {} : _ref37$cb,\n          _ref37$modal = _ref37.modal,\n          modal = _ref37$modal === undefined ? false : _ref37$modal,\n          messages = _ref37.messages;\n\n      Object.assign(this.state.saveConfig, { mode: mode, modal: modal, messages: messages, cb: _extends({}, this.state.saveConfig.cb, cb) });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8 \n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addFormComponents',\n    value: function addFormComponents() {\n      var _ref38 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref38.layerId,\n          _ref38$components = _ref38.components,\n          components = _ref38$components === undefined ? [] : _ref38$components;\n\n      this.state.formComponents[layerId] = (this.state.formComponents[layerId] || []).concat(components);\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Show editing panel\n     *\n     * @param options\n     * @param options.toolboxes\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'showPanel',\n    value: function showPanel() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (options.toolboxes && Array.isArray(options.toolboxes)) {\n        this.getToolBoxes().forEach(function (tb) {\n          return tb.setShow(options.toolboxes.includes(tb.getId()));\n        });\n      }\n      this.showEditingPanel(options);\n    }\n\n    /**\n     * Show editing panel toolbars\n     * \n     * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/editing.js.js@v3.6\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/panel.js.js@v3.6\n     */\n\n  }, {\n    key: 'showEditingPanel',\n    value: function showEditingPanel() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this.getLayers().length > 0) {\n        this.state.panel = new Panel(_extends({}, opts, {\n          id: \"editing-panel\",\n          title: opts.title || \"plugins.editing.editing_data\",\n          internalPanel: new (Vue.extend(require('./components/Editing.vue')))({\n            service: this,\n            resourcesurl: opts.resourcesUrl || GUI.getResourcesUrl(),\n            showcommitbar: undefined !== opts.showcommitbar ? opts.showcommitbar : true\n          })\n        }));\n        GUI.showPanel(this.state.panel);\n\n        if (!this.state.show_errors && this.state.layers_in_error) {\n          GUI.showUserMessage({ type: 'warning', message: 'plugins.editing.errors.some_layers', closable: true });\n          this.state.show_errors = true;\n        }\n      } else {\n        GUI.showUserMessage({ type: 'alert', message: 'plugins.editing.errors.no_layers' });\n      }\n      return this.state.panel;\n    }\n  }, {\n    key: 'hideEditingPanel',\n    value: function hideEditingPanel() {\n      if (null !== this.state.panel) {\n        GUI.closePanel();\n        this.state.panel = null;\n      }\n    }\n  }, {\n    key: 'unload',\n    value: function unload() {\n      this.hideEditingPanel();\n\n      if (this.config.visible) {\n        this.removeTools();\n      }\n\n      this.state.unwatchLayout();\n      MapLayersStoreRegistry.removeLayersStore(MapLayersStoreRegistry.getLayersStore('editing'));\n      _toolbox.ToolBox.clear();\n      // turn off events\n      GUI.getService('map').off('mapcontrol:toggled', this.state.onMapControlToggled);\n      // unregister query result action\n      GUI.getService('queryresults').un('editFeature', this.state.editFeatureKey);\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setCurrentLayout',\n    value: function setCurrentLayout() {\n      ApplicationService.setCurrentLayout(this.getName());\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'resetCurrentLayout',\n    value: function resetCurrentLayout() {\n      ApplicationService.setCurrentLayout(this.state.currentLayout);\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.1\n     */\n\n  }, {\n    key: 'getActiveTool',\n    value: function getActiveTool() {\n      return this.getToolBoxes().filter(function (t) {\n        return t.getActiveTool();\n      })[0];\n    }\n  }]);\n\n  return _class;\n}(Plugin))();\n\n},{\"./components/Changes.vue\":2,\"./components/Editing.vue\":5,\"./g3wsdk\":13,\"./g3wsdk/workflow/step\":14,\"./g3wsdk/workflow/workflow\":15,\"./i18n\":20,\"./toolboxes/toolbox\":27,\"./utils/addPartToMultigeometries\":28,\"./utils/createFeature\":38,\"./utils/getEditingLayerById\":42,\"./utils/promisify\":58,\"./utils/setAndUnsetSelectedFeaturesStyle\":59,\"./workflows\":65}],26:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @see https://openlayers.org/en/v5.3.0/apidoc/module-ol_interaction_Pointer.html\n */\nvar PickFeaturesInteraction = exports.PickFeaturesInteraction = function (_ol$interaction$Point) {\n  _inherits(PickFeaturesInteraction, _ol$interaction$Point);\n\n  function PickFeaturesInteraction() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PickFeaturesInteraction);\n\n    var features = []; // picked features\n\n    var featuresAtPixel = function featuresAtPixel() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          pixel = _ref.pixel,\n          map = _ref.map;\n\n      return map.getFeaturesAtPixel(pixel, {\n        layerFilter: function layerFilter(l) {\n          return opts.layer === l;\n        },\n        hitTolerance: isMobile && isMobile.any ? 10 : 0\n      });\n    };\n\n    return _possibleConstructorReturn(this, (PickFeaturesInteraction.__proto__ || Object.getPrototypeOf(PickFeaturesInteraction)).call(this, {\n      handleDownEvent: function handleDownEvent(e) {\n        features = featuresAtPixel(e);\n        return features;\n      },\n      handleUpEvent: function handleUpEvent(e) {\n        if (features && features.length > 0) {\n          this.dispatchEvent({ type: 'picked', features: features, coordinate: e.coordinate, layer: opts.layer });\n        }\n        return true;\n      },\n      handleMoveEvent: function handleMoveEvent(e) {\n        e.map.getTargetElement().style.cursor = featuresAtPixel(e) ? 'pointer' : '';\n      }\n    }));\n  }\n\n  return PickFeaturesInteraction;\n}(ol.interaction.Pointer);\n\n},{}],27:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ToolBox = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _step = require('../g3wsdk/workflow/step');\n\nvar _createEditingDataOptions = require('../utils/createEditingDataOptions');\n\nvar _setLayerUniqueFieldValues = require('../utils/setLayerUniqueFieldValues');\n\nvar _getRelationsInEditing = require('../utils/getRelationsInEditing');\n\nvar _getRelationId = require('../utils/getRelationId');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('../utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _chooseFeature = require('../utils/chooseFeature');\n\nvar _cloneFeature = require('../utils/cloneFeature');\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _getNotEditableFieldsNoPkValues = require('../utils/getNotEditableFieldsNoPkValues');\n\nvar _getDeltaXY = require('../utils/getDeltaXY');\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _convertToGeometry = require('../utils/convertToGeometry');\n\nvar _addTableFeature = require('../utils/addTableFeature');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _getRelationsInEditingByFeature = require('../utils/getRelationsInEditingByFeature');\n\nvar _isPointOnVertex = require('../utils/isPointOnVertex');\n\nvar _handleSplitFeature = require('../utils/handleSplitFeature');\n\nvar _addPartToMultigeometries = require('../utils/addPartToMultigeometries');\n\nvar _checkSessionItems = require('../utils/checkSessionItems');\n\nvar _promisify = require('../utils/promisify');\n\nvar _unlinkRelation = require('../utils/unlinkRelation');\n\nvar _splitFeatures = require('../utils/splitFeatures');\n\nvar _isSameBaseGeometryType = require('../utils/isSameBaseGeometryType');\n\nvar _dissolve = require('../utils/dissolve');\n\nvar _pickfeaturesinteraction = require('../interactions/pickfeaturesinteraction');\n\nvar _workflows = require('../workflows');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nObject.entries({\n  Workflow: _workflow.Workflow,\n  OpenFormStep: _workflows.OpenFormStep,\n  SelectElementsStep: _workflows.SelectElementsStep,\n  PickFeatureStep: _workflows.PickFeatureStep,\n  MoveFeatureStep: _workflows.MoveFeatureStep,\n  ModifyGeometryVertexStep: _workflows.ModifyGeometryVertexStep,\n  OpenTableStep: _workflows.OpenTableStep,\n  AddFeatureStep: _workflows.AddFeatureStep\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nvar GEOMETRY_TYPES = g3wsdk.constant.GEOMETRY_TYPES;\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    G3WObject = _g3wsdk$core.G3WObject;\nvar ProjectsRegistry = g3wsdk.core.project.ProjectsRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar Geometry = g3wsdk.core.geoutils.Geometry;\nvar removeZValueToOLFeatureGeometry = g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\nvar Layer = g3wsdk.core.layer.Layer;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar _g3wsdk$core$utils = g3wsdk.core.utils,\n    debounce = _g3wsdk$core$utils.debounce,\n    toRawType = _g3wsdk$core$utils.toRawType;\nvar GUI = g3wsdk.gui.GUI;\nvar _g3wsdk$ol$utils = g3wsdk.ol.utils,\n    getScaleFromResolution = _g3wsdk$ol$utils.getScaleFromResolution,\n    getResolutionFromScale = _g3wsdk$ol$utils.getResolutionFromScale;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin/toolboxes/toolsfactory.js@v3.7.1\n */\n\nvar ToolBox = exports.ToolBox = function (_G3WObject) {\n  _inherits(ToolBox, _G3WObject);\n\n  function ToolBox(layer) {\n    var dependencies = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, ToolBox);\n\n    var _this = _possibleConstructorReturn(this, (ToolBox.__proto__ || Object.getPrototypeOf(ToolBox)).call(this));\n\n    var is_vector = [undefined, Layer.LayerTypes.VECTOR].includes(layer.getType());\n    var geometryType = is_vector && layer.getGeometryType();\n    var is_point = is_vector && Geometry.isPointGeometryType(geometryType);\n    var is_line = is_vector && Geometry.isLineGeometryType(geometryType);\n    var is_poly = is_vector && Geometry.isPolygonGeometryType(geometryType);\n    var is_table = Layer.LayerTypes.TABLE === layer.getType();\n    var isMultiGeometry = geometryType && Geometry.isMultiGeometry(geometryType);\n    var iconGeometry = is_vector && (is_point ? 'Point' : is_line ? 'Line' : 'Polygon');\n\n    _this._start = false;\n\n    /** constraint loading features to a filter set */\n    _this.constraints = { filter: null, show: null, tools: [] };\n\n    /** reactive state of history */\n    _this._constrains = { commit: false, undo: false, redo: false };\n\n    /**\n     * Array of states of a layer in editing\n     * {\n     * _states: [\n     *     {\n     *       id: unique key\n     *       state: [state] // example: history contsins features state\n     *                      // array because a tool can apply changes to more than one features at time (split di una feature)\n     *     },\n     *     {\n     *       id: unique key\n     *       state: [state]\n     *     },\n     *   ]\n     *     ....\n     *\n     *  _current: unique key // usefult to undo redo\n     *\n     *\n     */\n    _this._states = [];\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this._history = {\n      id: layer.getId(),\n      state: new Proxy({}, { get: function get(_, prop) {\n          return _this._constrains[prop];\n        } }),\n      add: _this.__add.bind(_this),\n      undo: _this.__undo.bind(_this),\n      clear: _this.__clearHistory.bind(_this),\n      redo: _this.__redo.bind(_this),\n      getState: _this.__getState.bind(_this),\n      getLastState: _this.__getLastHistoryState.bind(_this),\n      commit: _this.__commit.bind(_this)\n    };\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     */\n    _this._session = Object.assign(new G3WObject({ setters: {\n        start: function start() {\n          var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          return (0, _promisify.$promisify)(_this.__startSession(options));\n        },\n        stop: function stop() {\n          return (0, _promisify.$promisify)(_this.__stopSession());\n        },\n        getFeatures: function getFeatures() {\n          var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          return (0, _promisify.$promisify)(_this.__getFeatures(options));\n        },\n        saveChangesOnServer: function saveChangesOnServer(commitItems) {\n          return _this.__saveChangesOnServer(commitItems);\n        }\n      } }), {\n      _history: _this._history,\n      state: new Proxy({}, { get: function get(_, prop) {\n          return _this.state.editing.session[prop];\n        } }),\n      getId: function getId() {\n        return layer.getId();\n      },\n      getLastHistoryState: _this.__getLastHistoryState.bind(_this),\n      isStarted: _this.__isStarted.bind(_this),\n      getHistory: _this.__getHistory.bind(_this),\n      getEditor: _this.__getEditor.bind(_this),\n      push: _this.__push.bind(_this),\n      pushDelete: _this.__pushDelete.bind(_this),\n      save: _this.__save.bind(_this),\n      pushAdd: _this.__pushAdd.bind(_this),\n      pushUpdate: _this.__pushUpdate.bind(_this),\n      rollback: _this.__rollback.bind(_this),\n      rollbackDependecies: _this.__rollbackDependecies.bind(_this),\n      undo: _this.__undoSession.bind(_this),\n      redo: _this.__redoSession.bind(_this),\n      getCommitItems: _this.__getCommitItems.bind(_this),\n      commit: _this.save.bind(_this),\n      clear: _this.__clearSession.bind(_this),\n      clearHistory: _this.__clearHistory.bind(_this)\n    });\n\n    // register this session on session registry\n    ToolBox._sessions[layer.getId()] = _this;\n\n    /** @type { 'create' | 'update_attributes' | 'update_geometry' | delete' | undefined } undefined means all possible tools base on type */\n    var capabilities = layer.getEditingCapabilities() || [];\n\n    _this.state = {\n      layer: layer,\n      id: layer.getId(),\n      changingtools: false, // whether to show tools during change phase\n      show: layer.config.editing.visible, // whether to show the toolbox if we need to filtered\n      color: layer.getColor() || 'blue',\n      title: ' ' + layer.getTitle() || \"Edit Layer\",\n      customTitle: false,\n      loading: false,\n      enabled: false,\n      toolboxheader: true,\n      startstopediting: true,\n      message: null,\n      toolmessages: { help: null },\n      toolsoftool: [],\n      selected: false,\n      activetool: null,\n      editing: {\n        session: {\n          id: new Proxy({}, { get: function get() {\n              return _this.state.id;\n            } }),\n          started: false,\n          getfeatures: false,\n          /** current state of history (useful for undo /redo) */\n          current: null,\n          /** temporary change not save on history */\n          changes: []\n        },\n        history: _this._history.state,\n        on: false,\n        dependencies: dependencies,\n        relations: Object.values(layer.isFather() && dependencies.length ? layer.getRelations().getRelations() : {}),\n        father: layer.isFather(),\n        canEdit: true\n      },\n      /** @since g3w-client-plugin-editing@v3.7.0 store key events setters */\n      _unregisterStartSettersEventsKey: [],\n      _getFeaturesOption: {},\n      _layerType: layer.getType() || Layer.LayerTypes.VECTOR,\n      _enabledtools: undefined,\n      _disabledtools: undefined,\n      _constraints: layer.getEditingConstrains() || {},\n      _tools: [\n      // Add Feature\n      is_vector && capabilities.includes('add_feature') && {\n        id: 'addfeature',\n        type: ['add_feature'],\n        name: 'editing.tools.add_feature',\n        icon: 'add' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addfeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addfeature',\n          steps: [new _workflows.AddFeatureStep({ layer: layer, tools: ['snap', 'measure'] }), new _workflows.OpenFormStep({ layer: layer })]\n        })\n      },\n      // Edit Attributes Feature\n      is_vector && capabilities.includes('change_attr_feature') && {\n        id: 'editattributes',\n        type: ['change_attr_feature'],\n        name: 'editing.tools.update_feature',\n        icon: 'editAttributes.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editfeatureattributesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          helpMessage: 'editing.tools.update_feature',\n          type: 'editfeatureattributes',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }), new _workflows.OpenFormStep()]\n        })\n      },\n      // Delete Feature\n      is_vector && capabilities.includes('delete_feature') && {\n        id: 'deletefeature',\n        type: ['delete_feature'],\n        name: 'editing.tools.delete_feature',\n        icon: 'delete' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/deletefeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'deletefeature',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }),\n          // delete feature\n          new _step.Step({\n            help: \"editing.steps.help.double_click_delete\",\n            run: function run(inputs, context) {\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var layerId = inputs.layer.getId();\n                var feature = inputs.features[0];\n\n                // get all relations of the current editing layer that are in editing\n                // and filter relations\n                // get relation layer id that are in relation with layerId (current layer in editing)\n                // get fields of relation layer that are in relation with layerId\n                // Exclude relation child layer that has at least one\n                // editing field required because when unlink relation feature from\n                // delete father, when try to commit update relation, we receive an error\n                // due missing value /null to required field.\n                var relations = (0, _getRelationsInEditing.getRelationsInEditing)({\n                  layerId: layerId,\n                  relations: inputs.layer.getRelations() ? inputs.layer.getRelations().getArray() : []\n                }).filter(function (relation) {\n                  return (0, _getEditingLayerById.getEditingLayerById)((0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation })).getEditingFields() //get editing field of relation layer\n                  .filter(function (f) {\n                    return (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ relation: relation, layerId: (0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation }) }).ownField.includes(f.name);\n                  }) //filter only relation fields\n                  .every(function (f) {\n                    return !f.validate.required;\n                  });\n                } // check required\n                );\n\n                // promise return features relations and add to relation layer child\n                if (relations.length > 0) {\n                  yield (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(layerId, { feature: feature, relations: relations });\n                }\n\n                inputs.features = [feature];\n\n                // Unlink relation features related to layer id\n                (0, _getRelationsInEditingByFeature.getRelationsInEditingByFeature)({ layerId: layerId, relations: relations, feature: feature }).forEach(function (_ref4) {\n                  var relation = _ref4.relation,\n                      relations = _ref4.relations;\n\n                  relations.forEach(function (r) {\n                    return (0, _unlinkRelation.unlinkRelation)({ layerId: layerId, relation: relation, relations: relations, index: 0, dialog: false });\n                  });\n                });\n\n                context.session.pushDelete(layerId, feature);\n\n                return inputs;\n              }));\n            }\n          }),\n          // confirm step\n          new _step.Step({\n            run: function run(inputs) {\n              var _this2 = this;\n\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var editingLayer = inputs.layer.getEditingLayer();\n                var feature = inputs.features[0];\n                var layerId = inputs.layer.getId();\n                var promise = new Promise(function (resolve, reject) {\n                  GUI.dialog.confirm('<h4>' + tPlugin('editing.messages.delete_feature') + '</h4>' + '<div style=\"font-size:1.2em;\">' + (inputs.layer.getChildren().length && (0, _getRelationsInEditing.getRelationsInEditing)({ layerId: layerId, relations: inputs.layer.getRelations().getArray() }).length ? tPlugin('editing.messages.delete_feature_relations') : '') + '</div>', function (result) {\n                    if (!result) {\n                      reject(inputs);\n                      return;\n                    }\n                    editingLayer.getSource().removeFeature(feature);\n                    // Remove unique values from unique fields of a layer (when deleting a feature)\n                    var fields = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[layerId];\n                    if (fields) {\n                      Object.keys(feature.getProperties()).filter(function (f) {\n                        return undefined !== fields[f];\n                      }).forEach(function (f) {\n                        return fields[f].delete(feature.get(f));\n                      });\n                    }\n                    resolve(inputs);\n                  });\n                });\n\n                if (inputs.features) {\n                  (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({\n                    promise: (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                      try {\n                        return yield promise;\n                      } catch (e) {\n                        console.warn(e);return Promise.reject(e);\n                      }\n                    })),\n                    inputs: inputs,\n                    style: _this2.selectStyle\n                  });\n                }\n                return promise;\n              }));\n            }\n          })]\n        })\n      },\n      // Edit vertex Feature\n      (is_line || is_poly) && capabilities.includes('change_feature') && {\n        id: 'movevertex',\n        type: ['change_feature'],\n        name: \"editing.tools.update_vertex\",\n        icon: \"moveVertex.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/modifygeometryvertexworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'modifygeometryvertex',\n          helpMessage: 'editing.tools.update_vertex',\n          steps: [new _workflows.PickFeatureStep({ layer: layer }), new _step.Step({ run: _chooseFeature.chooseFeature }), new _workflows.ModifyGeometryVertexStep({ tools: ['snap', 'measure'] })]\n        })\n      },\n      // Edit Attributes to Multi features\n      is_vector && capabilities.includes('change_attr_feature') && {\n        id: 'editmultiattributes',\n        type: ['change_attr_feature'],\n        name: \"editing.tools.update_multi_features\",\n        icon: \"multiEditAttributes.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editmultifeatureattributesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'editmultiattributes',\n          helpMessage: 'editing.tools.update_multi_features',\n          registerEscKeyEvent: true,\n          runOnce: true,\n          steps: [new _workflows.SelectElementsStep({\n            type: 'multiple',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectDrawBoxAtLeast2Feature' : 'selectMultiPointSHIFTAtLeast2Feature'),\n                buttonnext: {\n                  disabled: true,\n                  condition: function condition(_ref7) {\n                    var _ref7$features = _ref7.features,\n                        features = _ref7$features === undefined ? [] : _ref7$features;\n                    return features.length < 2;\n                  },\n                  done: function done() {\n                    _workflow.Workflow.Stack.getCurrent().clearUserMessagesSteps();\n                  }\n                },\n                dynamic: 0,\n                done: false\n              }\n            }\n          }), new _workflows.OpenFormStep({ multi: true })]\n        })\n      },\n      // Move Feature\n      is_vector && capabilities.includes('change_feature') && {\n        id: 'movefeature',\n        type: ['change_feature'],\n        name: 'editing.tools.move_feature',\n        icon: 'move' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/movefeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'movefeature',\n          helpMessage: 'editing.tools.move_feature',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }), new _workflows.MoveFeatureStep()]\n        })\n      },\n      // Copy Feature from another layer\n      function () {\n        var layers = [];\n        return is_vector && capabilities.includes('add_feature') && {\n          id: 'copyfeaturesfromotherlayer',\n          type: ['add_feature'],\n          name: \"editing.tools.pastefeaturesfromotherlayers\",\n          icon: \"pasteFeaturesFromOtherLayers.png\",\n          enable: function () {\n            var catalogService = GUI.getService('catalog');\n            var layerId = layer.getId();\n            var geometryType = layer.getGeometryType();\n            var data = {\n              bool: true,\n              tool: undefined\n            };\n            CatalogLayersStoresRegistry.getLayers({\n              GEOLAYER: true,\n              BASELAYER: false\n            });\n            // check selected feature layers\n            var updatelayers = function updatelayers() {\n              var checkGeometry = function checkGeometry(type) {\n                return type && (0, _isSameBaseGeometryType.isSameBaseGeometryType)(geometryType, type) && (geometryType === type || Geometry.isMultiGeometry(geometryType) || !Geometry.isMultiGeometry(type));\n              };\n              layers = [].concat(_toConsumableArray(CatalogLayersStoresRegistry.getLayers({ GEOLAYER: true, BASELAYER: false }).filter(function (l) {\n                return layerId !== l.getId() && checkGeometry(l.getGeometryType());\n              })), _toConsumableArray(catalogService.getExternalLayers({ type: 'vector' }).filter(function (l) {\n                return checkGeometry(l.geometryType);\n              }))).map(function (l, i) {\n                return {\n                  id: (l.state || { id: l.id }).id,\n                  name: (l.state || { name: l.name }).name,\n                  external: l.external || false,\n                  selected: 0 === i\n                };\n              });\n              return data.tool.enabled = layers.length > 0;\n            };\n            return function (_ref8) {\n              var bool = _ref8.bool,\n                  _ref8$tool = _ref8.tool,\n                  tool = _ref8$tool === undefined ? {} : _ref8$tool;\n\n              data.tool = tool;\n              data.bool = bool;\n              catalogService.onafter('addExternalLayer', updatelayers);\n              catalogService.onafter('removeExternalLayer', updatelayers);\n              return updatelayers();\n            };\n          }(),\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/copyfeaturesfromotherlayerworkflow.js@v3.7.1 */\n          op: function () {\n            var openFormStep = new _workflows.OpenFormStep({ layer: layer, help: 'editing.steps.help.copy' });\n            return new _workflow.Workflow({\n              layer: layer,\n              type: 'copyfeaturesfromotherlayer',\n              runOnce: true,\n              steps: [new _step.Step({\n                layer: layer,\n                help: 'editing.steps.help.draw_new_feature',\n                run: function run(inputs, context) {\n                  var _this3 = this;\n\n                  return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n                    var originalLayer = inputs.layer;\n                    var geometryType = originalLayer.getGeometryType();\n                    var layerId = originalLayer.getId();\n                    //get attributes/properties from current layer in editing\n                    var attributes = originalLayer.getEditingFields().filter(function (a) {\n                      return !a.pk;\n                    });\n                    var session = context.session;\n                    var editingLayer = originalLayer.getEditingLayer();\n                    var source = editingLayer.getSource();\n                    //set reactive\n                    var vueInstance = new (Vue.extend(require('../components/CopyFeaturesFromOtherLayers.vue')))({ layers: layers });\n                    var message = vueInstance.$mount().$el;\n                    GUI.showModalDialog({\n                      title: tPlugin('editing.relation.copy_feature_from_other_layer'),\n                      className: 'modal-left',\n                      closeButton: false,\n                      message: message,\n                      buttons: {\n                        cancel: {\n                          label: 'Cancel',\n                          className: 'btn-danger',\n                          callback: function callback() {\n                            reject();\n                          }\n                        },\n                        ok: {\n                          label: 'Ok',\n                          className: 'btn-success',\n                          callback: function () {\n                            var _ref9 = _asyncToGenerator(function* () {\n                              try {\n                                //get selected layer\n                                var _layer = layers.find(function (l) {\n                                  return l.selected;\n                                });\n                                var feature = yield (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                                  var features = yield new Promise(function () {\n                                    var _ref11 = _asyncToGenerator(function* (resolve) {\n                                      _this3.addInteraction(_layer.external ? new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: GUI.getService('map').getLayerById(_layer.id) }) : new g3wsdk.ol.interactions.PickCoordinatesInteraction(), {\n                                        'picked': function () {\n                                          var _ref12 = _asyncToGenerator(function* (e) {\n                                            try {\n                                              resolve((0, _convertToGeometry.convertToGeometry)(_layer.external ? e.features // external layer\n                                              : ((yield DataRouterService.getData('query:coordinates', { // TOC/PROJECT layer\n                                                inputs: {\n                                                  coordinates: e.coordinate,\n                                                  query_point_tolerance: ProjectsRegistry.getCurrentProject().getQueryPointTolerance(),\n                                                  layerIds: [_layer.id],\n                                                  multilayers: false\n                                                },\n                                                outputs: null\n                                              })).data[0] || { features: [] }).features, geometryType));\n                                            } catch (e) {\n                                              console.warn(e);\n                                            }\n                                          });\n\n                                          function picked(_x5) {\n                                            return _ref12.apply(this, arguments);\n                                          }\n\n                                          return picked;\n                                        }()\n                                      });\n                                    });\n\n                                    return function (_x4) {\n                                      return _ref11.apply(this, arguments);\n                                    };\n                                  }());\n\n                                  var _feature = void 0;\n\n                                  try {\n                                    _feature = features.length > 1 ? yield (0, _promisify.promisify)((0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: features, inputs: inputs })) : features[0];\n                                  } catch (e) {\n                                    console.warn(e);\n                                  }\n\n                                  if (_feature) {\n                                    var _feature2 = new Feature({\n                                      feature: _feature,\n                                      properties: attributes.map(function (a) {\n                                        return a.name;\n                                      })\n                                    });\n\n                                    _feature2.setTemporaryId();\n                                    return _feature2;\n                                  }\n\n                                  GUI.showUserMessage({\n                                    type: 'warning',\n                                    message: 'plugins.editing.messages.no_feature_selected',\n                                    closable: false,\n                                    autoclose: true\n                                  });\n\n                                  return Promise.reject();\n                                }));\n\n                                //@TODO check better way\n                                //Set undefined property to null otherwise on commit\n                                // property are lost\n                                attributes.forEach(function (_ref13) {\n                                  var name = _ref13.name;\n\n                                  if (undefined === feature.get(name)) {\n                                    feature.set(name, null);\n                                  }\n                                });\n\n                                originalLayer.getEditingNotEditableFields().find(function (field) {\n                                  if (originalLayer.isPkField(field)) {\n                                    feature.set(field, null);\n                                  }\n                                });\n                                //remove eventually Z Values\n                                removeZValueToOLFeatureGeometry({ feature: feature });\n                                feature.setTemporaryId();\n                                source.addFeature(feature);\n                                session.pushAdd(layerId, feature, false);\n                                inputs.features.push(feature);\n                                _this3.fireEvent('addfeature', feature);\n                                resolve(inputs);\n                              } catch (e) {\n                                console.warn(e);\n                                reject(e);\n                              }\n                            });\n\n                            function callback() {\n                              return _ref9.apply(this, arguments);\n                            }\n\n                            return callback;\n                          }()\n                        }\n                      }\n                    }).on('hide.bs.modal', function () {\n                      return vueInstance.$destroy();\n                    }); //destroy vue instance after dialog is a closed\n                    //hide user message step\n                  }));\n                }\n              }), openFormStep],\n              registerEscKeyEvent: true\n            });\n          }()\n        };\n      }(),\n      // Copy Feature from layer\n      is_vector && capabilities.includes('add_feature') && {\n        id: 'copyfeatures',\n        type: ['add_feature'],\n        name: \"editing.tools.copy\",\n        icon: 'copy' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/copyfeaturesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'copyfeatures',\n          runOnce: true,\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            help: 'editing.steps.help.copy',\n            type: ApplicationState.ismobile ? 'single' : 'multiple',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectPoint' : 'selectPointSHIFT'),\n                done: false\n              }\n            }\n          }, true),\n          // get vertex\n          layer.getGeometryType().includes('Point') ? undefined : new _step.Step({\n            layer: layer,\n            help: 'editing.steps.help.select',\n            steps: {\n              from: {\n                description: 'editing.workflow.steps.selectStartVertex',\n                done: false\n              }\n            },\n            run: function run(inputs) {\n              var _this4 = this;\n\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var promise = new Promise(function (resolve, reject) {\n                  _this4.resolve = resolve;\n                  if (0 === inputs.features.length) {\n                    return reject('no feature');\n                  }\n                  _this4.addInteraction(new ol.interaction.Draw({ type: 'Point', condition: function condition(e) {\n                      return inputs.features.some(function (f) {\n                        return (0, _isPointOnVertex.isPointOnVertex)({ feature: f, coordinates: e.coordinate });\n                      });\n                    } }), {\n                    'drawend': function drawend(e) {\n                      inputs.coordinates = e.feature.getGeometry().getCoordinates();\n                      _this4.setUserMessageStepDone('from');\n                      resolve(inputs);\n                    }\n                  });\n                  _this4.addInteraction(new ol.interaction.Snap({ edge: false, features: new ol.Collection(inputs.features) }));\n                });\n                /** @since g3w-client-plugin-editing@v3.8.0 */\n                (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                    try {\n                      return yield promise;\n                    } catch (e) {\n                      console.warn(e);return Promise.reject(e);\n                    }\n                  })), inputs: inputs, style: _this4.selectStyle });\n                return promise;\n              }));\n            },\n            stop: function stop() {\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              //Always resolve promise (in case of a press esc key)\n              this.resolve(true);\n              this.resolve = null;\n            }\n          }),\n          // move elements\n          new _step.Step({\n            layer: layer,\n            help: \"editing.steps.help.select_vertex_to_paste\",\n            steps: {\n              to: {\n                description: 'editing.workflow.steps.selectToPaste',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              var _this5 = this;\n\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var layer = inputs.layer,\n                    features = inputs.features,\n                    coordinates = inputs.coordinates;\n\n                var source = layer.getEditingLayer().getSource();\n                var layerId = layer.getId();\n                var session = context.session;\n                var promise = new Promise(function (resolve, reject) {\n                  _this5.addInteraction(new ol.interaction.Draw({ type: 'Point', features: new ol.Collection() }), {\n                    'drawend': function drawend(evt) {\n                      var _evt$feature$getGeome = evt.feature.getGeometry().getCoordinates(),\n                          _evt$feature$getGeome2 = _slicedToArray(_evt$feature$getGeome, 2),\n                          x = _evt$feature$getGeome2[0],\n                          y = _evt$feature$getGeome2[1];\n\n                      var deltaXY = coordinates ? (0, _getDeltaXY.getDeltaXY)({ x: x, y: y, coordinates: coordinates }) : null;\n                      var featuresLength = features.length;\n                      var promisesDefaultEvaluation = [];\n\n                      var _loop = function _loop(i) {\n                        var feature = (0, _cloneFeature.cloneFeature)(features[i], layer);\n                        if (deltaXY) {\n                          feature.getGeometry().translate(deltaXY.x, deltaXY.y);\n                        } else {\n                          var _coordinates = feature.getGeometry().getCoordinates();\n                          var _deltaXY = (0, _getDeltaXY.getDeltaXY)({ x: x, y: y, coordinates: _coordinates });\n                          feature.getGeometry().translate(_deltaXY.x, _deltaXY.y);\n                        }\n                        // set media fields to null\n                        layer.getEditingMediaFields({}).forEach(function (f) {\n                          return feature.set(f, null);\n                        });\n                        /**\n                         * evaluated geometry expression\n                         */\n                        promisesDefaultEvaluation.push((0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }));\n                      };\n\n                      for (var i = 0; i < featuresLength; i++) {\n                        _loop(i);\n                      }\n                      Promise.allSettled(promisesDefaultEvaluation).then(function (promises) {\n                        return promises.forEach(function (_ref17) {\n                          var status = _ref17.status,\n                              feature = _ref17.value;\n\n\n                          /**\n                           * @todo improve client core to handle this situation on session.pushAdd not copy pk field not editable only\n                           */\n                          var noteditablefieldsvalues = (0, _getNotEditableFieldsNoPkValues.getNotEditableFieldsNoPkValues)({ layer: layer, feature: feature });\n                          var newFeature = session.pushAdd(layerId, feature);\n                          // after pushAdd need to set not edit\n                          if (Object.entries(noteditablefieldsvalues).length) {\n                            Object.entries(noteditablefieldsvalues).forEach(function (_ref18) {\n                              var _ref19 = _slicedToArray(_ref18, 2),\n                                  field = _ref19[0],\n                                  value = _ref19[1];\n\n                              return newFeature.set(field, value);\n                            });\n                          }\n\n                          //need to add to editing layer source newFeature\n                          source.addFeature(newFeature);\n\n                          inputs.features.push(newFeature);\n                        });\n                      }).finally(function () {\n                        _this5.setUserMessageStepDone('to');\n                        resolve(inputs);\n                      });\n                    }\n                  });\n\n                  _this5.addInteraction(new ol.interaction.Snap({ source: source, edge: false }));\n                });\n\n                /** @since g3w-client-plugin-editing@v3.8.0 */\n                (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                    try {\n                      return yield promise;\n                    } catch (e) {\n                      console.warn(e);return Promise.reject(e);\n                    }\n                  })), inputs: inputs, style: _this5.selectStyle });\n                return promise;\n              }));\n            }\n          })].filter(Boolean),\n          registerEscKeyEvent: true\n        })\n      },\n      // Add part to MultiGeometry Feature\n      is_vector && capabilities.includes('add_feature') && capabilities.includes('change_feature') && {\n        id: 'addPart',\n        type: ['add_feature', 'change_feature'],\n        name: \"editing.tools.addpart\",\n        icon: \"addPart.png\",\n        visible: isMultiGeometry,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addparttomultigeometriesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addparttomultigeometries',\n          helpMessage: 'editing.tools.addpart',\n          runOnce: true,\n          steps: [new _workflows.PickFeatureStep({\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.select',\n                done: false\n              }\n            }\n          }), new _step.Step({\n            run: _chooseFeature.chooseFeature,\n            help: 'editing.steps.help.select_element'\n          }), new _workflows.AddFeatureStep({\n            layer: layer,\n            help: 'editing.steps.help.select_element',\n            add: false,\n            steps: {\n              addfeature: {\n                description: 'editing.workflow.steps.draw_part',\n                done: false\n              }\n            },\n            tools: ['snap', 'measure']\n          }),\n          // add part to multi geometries\n          new _step.Step({\n            layer: layer,\n            help: 'editing.steps.help.select_element',\n            run: _addPartToMultigeometries.addPartToMultigeometries\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Remove part from MultiGeometry Feature\n      is_vector && capabilities.includes('change_feature') && {\n        id: 'deletePart',\n        type: ['change_feature'],\n        name: \"editing.tools.deletepart\",\n        icon: \"deletePart.png\",\n        visible: isMultiGeometry,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/deletepartfrommultigeometriesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'deletepartfrommultigeometries',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }),\n          // delete part from multi geometries\n          new _step.Step({\n            layer: layer,\n            run: function run(inputs, context) {\n              var _this6 = this;\n\n              return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n                var originaLayer = inputs.layer;\n                var editingLayer = inputs.layer.getEditingLayer();\n                var layerId = originaLayer.getId();\n                var session = context.session;\n                var features = inputs.features,\n                    coordinate = inputs.coordinate;\n\n                var feature = features[0];\n                var originalFeature = feature.clone();\n                var geometry = feature.getGeometry();\n                var geometries = [];\n\n                // ensure single geometry\n                switch (geometry.getType()) {\n                  case GEOMETRY_TYPES.MULTIPOLYGON:\n                    geometries = geometry.getPolygons();break;\n                  case GEOMETRY_TYPES.MULTILINE:\n                    geometries = geometry.getLineStrings();break;\n                  case GEOMETRY_TYPES.MULTILINESTRING:\n                    geometries = geometry.getLineStrings();break;\n                  case GEOMETRY_TYPES.MULTIPOINT:\n                    geometries = geometry.getPoints();break;\n                  default:\n                    console.warn('invalid geometry type', geometry.getType());break;\n                }\n\n                var source = new ol.source.Vector({ features: geometries.map(function (geometry) {\n                    return new ol.Feature(geometry);\n                  }) });\n                var map = _this6.getMap();\n                var pixel = map.getPixelFromCoordinate(coordinate);\n                var tempLayer = new ol.layer.Vector({\n                  source: source,\n                  style: editingLayer.getStyle()\n                });\n\n                map.addLayer(tempLayer);\n\n                map.once('postrender', function () {\n                  var found = false;\n                  //need to call map.forEachFeatureAtPixel and not this.forEachFeatureAtPixel\n                  //because we use arrow function, and it referred this to outside context\n                  map.forEachFeatureAtPixel(pixel, function (_feature) {\n                    if (!found) {\n                      source.removeFeature(_feature);\n                      if (source.getFeatures().length) {\n                        var _geometries = source.getFeatures().map(function (f) {\n                          return f.getGeometry();\n                        });\n                        var type = _geometries[0] && _geometries[0].getType();\n                        feature.setGeometry(type && new ol.geom['Multi' + type](_geometries.map(function (g) {\n                          return g.getCoordinates();\n                        })) // ensures multi geometry\n                        );\n                        /**\n                         * evaluated geometry expression\n                         */\n                        (0, _evaluateExpressionFields.evaluateExpressionFields)({\n                          inputs: inputs,\n                          context: context,\n                          feature: feature\n                        }).finally(function () {\n                          session.pushUpdate(layerId, feature, originalFeature);\n                          resolve(inputs);\n                        });\n                        /**\n                         * end of evaluated\n                         */\n                      } else {\n                        editingLayer.getSource().removeFeature(feature);\n                        session.pushDelete(layerId, feature);\n                        resolve(inputs);\n                      }\n                      found = true;\n                    }\n                  }, {\n                    layerFilter: function layerFilter(layer) {\n                      return layer === tempLayer;\n                    },\n\n                    hitTolerance: 1\n                  });\n                  //need to call map.forEachFeatureAtPixel and not this.forEachFeatureAtPixel\n                  //because we use arrow function, and it referred this to outside context\n                  map.removeLayer(tempLayer);\n                  tempLayer = null;\n                });\n              }));\n            }\n          })],\n          helpMessage: 'editing.tools.deletepart'\n        })\n      },\n      // Split Feature\n      (is_line || is_poly) && capabilities.includes('change_feature') && {\n        id: 'splitfeature',\n        type: ['change_feature'],\n        name: \"editing.tools.split\",\n        icon: \"splitFeatures.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/splitfeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'splitfeature',\n          runOnce: true,\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            help: 'editing.steps.help.split',\n            type: ApplicationState.ismobile ? 'single' : 'multiple',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectPoint' : 'selectPointSHIFT'),\n                done: false\n              }\n            }\n          }, true),\n          // split feature\n          new _step.Step({\n            layer: layer,\n            help: '',\n            steps: {\n              draw_line: {\n                description: 'editing.workflow.steps.draw_split_line',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              var _this7 = this;\n\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var source = inputs.layer.getEditingLayer().getSource();\n                var promise = new Promise(function (resolve, reject) {\n                  _this7.addInteraction(new ol.interaction.Draw({\n                    type: 'LineString',\n                    features: new ol.Collection(),\n                    freehandCondition: ol.events.condition.never\n                  }), {\n                    'drawend': function () {\n                      var _ref22 = _asyncToGenerator(function* (e) {\n                        var isSplitted = false;\n                        var splittedGeometries = (0, _splitFeatures.splitFeatures)(inputs.features, e.feature);\n                        var splittedGeometriesLength = splittedGeometries.length;\n\n                        var _loop2 = function* _loop2(i) {\n                          if (splittedGeometries[i].geometries.length > 1) {\n                            isSplitted = true;\n                            yield (0, _handleSplitFeature.handleSplitFeature)({\n                              context: context,\n                              inputs: inputs,\n                              feature: inputs.features.find(function (f) {\n                                return f.getUid() === splittedGeometries[i].uid;\n                              }),\n                              splittedGeometries: splittedGeometries[i].geometries,\n                              session: context.session\n                            });\n                          }\n                        };\n\n                        for (var i = 0; i < splittedGeometriesLength; i++) {\n                          yield* _loop2(i);\n                        }\n\n                        /** @since g3w-client-plugin-editing@v3.8.0 */\n                        (isSplitted ? resolve : reject)(inputs);\n                        //need to set timeout promise, because at the end of the workflow all user messages are cleared\n                        yield new Promise(function (r) {\n                          return setTimeout(r, 600);\n                        });\n                        GUI.showUserMessage({\n                          type: isSplitted ? 'success' : 'warning',\n                          message: isSplitted ? 'plugins.editing.messages.splitted' : 'plugins.editing.messages.nosplittedfeature',\n                          autoclose: true\n                        });\n                      });\n\n                      function drawend(_x6) {\n                        return _ref22.apply(this, arguments);\n                      }\n\n                      return drawend;\n                    }()\n                  });\n\n                  _this7.addInteraction(new ol.interaction.Snap({ source: source, edge: true }));\n                });\n\n                /** @since g3w-client-plugin-editing@v3.8.0 */\n                (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                    try {\n                      return yield promise;\n                    } catch (e) {\n                      console.warn(e);return Promise.reject(e);\n                    }\n                  })), inputs: inputs, style: _this7.selectStyle });\n\n                return promise;\n              }));\n            }\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Merge features in one\n      (is_line || is_poly) && capabilities.includes('change_feature') && {\n        id: 'mergefeatures',\n        type: ['change_feature'],\n        name: \"editing.tools.merge\",\n        icon: \"mergeFeatures.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/mergefeaturesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'mergefeatures',\n          runOnce: true,\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            type: 'bbox',\n            help: 'editing.steps.help.merge',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectDrawBox' : 'selectSHIFT'),\n                done: false\n              }\n            }\n          }, true),\n          // merge features\n          new _step.Step({\n            layer: layer,\n            help: 'editing.steps.help.merge',\n            steps: {\n              choose: {\n                description: 'editing.workflow.steps.merge',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n                var layer = inputs.layer,\n                    features = inputs.features;\n\n                var editingLayer = layer.getEditingLayer();\n                var source = editingLayer.getSource();\n                var layerId = layer.getId();\n                var session = context.session;\n\n                if (features.length < 2) {\n                  GUI.showUserMessage({\n                    type: 'warning',\n                    message: 'plugins.editing.messages.select_min_2_features',\n                    autoclose: true\n                  });\n                  reject();\n                } else {\n                  (0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: features, inputs: inputs }).then(function () {\n                    var _ref24 = _asyncToGenerator(function* (feature) {\n                      var index = features.findIndex(function (_feature) {\n                        return feature === _feature;\n                      });\n                      var originalFeature = feature.clone();\n                      var newFeature = (0, _dissolve.dissolve)({ features: features, index: index });\n\n                      if (newFeature) {\n                        try {\n                          yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: newFeature });\n                        } catch (e) {\n                          console.warn(e);\n                        }\n                        session.pushUpdate(layerId, newFeature, originalFeature);\n                        features.filter(function (_feature) {\n                          return _feature !== feature;\n                        }).forEach(function (deleteFeature) {\n                          session.pushDelete(layerId, deleteFeature);\n                          source.removeFeature(deleteFeature);\n                        });\n                        inputs.features = [feature];\n                        resolve(inputs);\n                      } else {\n                        GUI.showUserMessage({\n                          type: 'warning',\n                          message: 'plugins.editing.messages.no_feature_selected',\n                          autoclose: true\n                        });\n                        reject();\n                      }\n                    });\n\n                    return function (_x7) {\n                      return _ref24.apply(this, arguments);\n                    };\n                  }()).catch(function (e) {\n                    console.warn(e);\n                    reject();\n                  });\n                }\n              }));\n            }\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Copy Features from external layer\n      (is_line || is_poly) && capabilities.includes('add_feature') && {\n        id: 'copyfeaturefromexternallayer',\n        type: ['add_feature'],\n        name: \"editing.tools.copyfeaturefromexternallayer\",\n        icon: \"copyPolygonFromFeature.png\",\n        visible: function visible(tool) {\n          var map = GUI.getService('map');\n          var type = _this.getLayer().getGeometryType();\n          var has_same_geom = function has_same_geom(layer) {\n            // check if tool is visible and the layer is a Vector\n            var features = 'VECTOR' === layer.getType() && layer.getSource().getFeatures();\n            return features && features.length ? (0, _isSameBaseGeometryType.isSameBaseGeometryType)(features[0].getGeometry().getType(), type) : true;\n          };\n          map.onbefore('loadExternalLayer', function (layer) {\n            return !tool.visible && (tool.visible = has_same_geom(layer));\n          });\n          map.onafter('unloadExternalLayer', function (layer) {\n            var features = tool.visible && 'VECTOR' === layer.getType() && layer.getSource().getFeatures();\n            if (features && features.length && (0, _isSameBaseGeometryType.isSameBaseGeometryType)(features[0].getGeometry().getType(), type)) {\n              tool.visible = map.getExternalLayers().find(function (l) {\n                return undefined !== has_same_geom(l);\n              });\n            }\n          });\n          return false;\n        },\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addfeaturefrommapvectorlayersworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addfeaturefrommapvectorlayers',\n          runOnce: true,\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            type: 'external',\n            help: 'editing.steps.help.copy'\n          }, false), new _workflows.OpenFormStep({\n            layer: layer,\n            help: 'editing.steps.help.copy'\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Add Table feature (alphanumerical layer - No geometry)\n      is_table && capabilities.includes('add_feature') && {\n        id: 'addfeature',\n        type: ['add_feature'],\n        name: \"editing.tools.add_feature\",\n        icon: \"addTableRow.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addtablefeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addtablefeature',\n          steps: [new _step.Step({ help: 'editing.steps.help.new', run: _addTableFeature.addTableFeature }), new _workflows.OpenFormStep()]\n        })\n      },\n      // Edit Table feature (alphanumerical layer - No geometry)\n      is_table && capabilities.includes('delete_feature') && capabilities.includes('change_attr_feature') && {\n        id: 'edittable',\n        type: ['delete_feature', 'change_attr_feature'],\n        name: \"editing.tools.update_feature\",\n        icon: \"editAttributes.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/edittableworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'edittable',\n          backbuttonlabel: 'plugins.editing.form.buttons.save_and_back_table',\n          runOnce: true,\n          steps: [new _workflows.OpenTableStep()]\n        })\n      }].filter(Boolean).map(function (tool) {\n        return Object.assign(new G3WObject(), tool);\n      })\n    };\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     */\n    _this.state._tools.forEach(function (tool) {\n      Object.assign(tool, {\n        disabledtoolsoftools: [],\n        enabled: false,\n        active: false,\n        message: null,\n        messages: tool.op.getMessages(),\n        visible: tool.visible instanceof Function ? tool.visible(tool) : undefined !== tool.visible ? tool.visible : true,\n        state: new Proxy({}, { get: function get(_, prop) {\n            return tool[prop];\n          }, set: function set(_, prop, value) {\n            tool[prop] = value;return true;\n          } }),\n        start: _this._startTool.bind(_this, tool),\n        stop: _this._stopTool.bind(_this, tool),\n        getId: function getId() {\n          return tool.id;\n        },\n        getOperator: function getOperator() {\n          return tool.op;\n        },\n        setOperator: function setOperator(op) {\n          return tool.op = op;\n        }\n      });\n    });\n\n    Object.assign(_this.state, {\n      tools: _this.state._tools,\n      /** original value of state in case of custom changes */\n      originalState: {\n        title: _this.state.title,\n        toolsoftool: [].concat(_toConsumableArray(_this.state.toolsoftool))\n      }\n    });\n\n    // BACKOMP v3.x\n    _this.originalState = _this.state.originalState;\n\n    //event features\n    _this._getFeaturesEvent = { event: null, fnc: null };\n\n    // @since v3.8.0 constraint messages to show\n    _this.messages = {\n      //set message of scale constraint\n      constraint: {\n        scale: ('' + tPlugin('editing.messages.constraints.enable_editing') + _this.state._constraints.scale).toUpperCase()\n      }\n\n      //@since 3.8.0 Need to store Promise resolve when start toolbox but non editing is enabled (scale constraint, etc..)\n    };_this.startResolve = null;\n\n    //@since 3.8.0 Store ol keys event start when we are in editing\n    _this._olStartKeysEvent = [];\n\n    //@since 3.8.1 store all unwatches\n    _this.unwatches = [];\n    return _this;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n   * \n   * @param { string } layerId\n   *\n   */\n\n\n  _createClass(ToolBox, [{\n    key: '_stopSessionChildren',\n    value: function _stopSessionChildren(layerId) {\n      var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n      var layer = service.getLayerById(layerId);\n      (0, _getRelationsInEditing.getRelationsInEditing)({\n        layerId: layerId,\n        relations: layer.getRelations() ? layer.getRelations().getArray() : []\n      }).filter(function (relation) {\n        return relation.getFather() === layerId;\n      }).forEach(function (relation) {\n        var relationId = (0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation });\n        // In case of no editing is started (click on pencil of relation layer) need to stop (unlock) features\n        if (!service.getToolBoxById(relationId).inEditing()) {\n          service.state.sessions[relationId].stop();\n        }\n      });\n    }\n\n    /**\n     * @returns toolbox state\n     */\n\n  }, {\n    key: 'getState',\n    value: function getState() {\n      return this.state;\n    }\n\n    /**\n     * @param bool\n     */\n\n  }, {\n    key: 'setShow',\n    value: function setShow() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.state.show = bool;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.state.layer;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isFather',\n    value: function isFather() {\n      return this.state.editing.father;\n    }\n\n    /**\n     * @returns { Array } parent and child layers\n     */\n\n  }, {\n    key: 'getDependencies',\n    value: function getDependencies() {\n      return this.state.editing.dependencies;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'hasDependencies',\n    value: function hasDependencies() {\n      return this.state.editing.dependencies.length > 0;\n    }\n\n    /**\n     * Create getFeatures options\n     * \n     * @param filter\n     */\n\n  }, {\n    key: 'setFeaturesOptions',\n    value: function setFeaturesOptions() {\n      var _ref25 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          filter = _ref25.filter;\n\n      if (filter) {\n        // in case of no features filter request check if no features_filed is present otherwise it get first field\n        if (filter.nofeatures) {\n          filter.nofeatures_field = filter.nofeatures_field || this.state.layer.getEditingFields()[0].name;\n        }\n        this.state._getFeaturesOption = {\n          filter: filter,\n          editing: true,\n          registerEvents: false\n        };\n        // in case of constraint attribute set the filter as constraint\n        if (filter.constraint) {\n          this.constraintFeatureFilter = filter;\n        }\n      } else {\n        this.state._getFeaturesOption = (0, _createEditingDataOptions.createEditingDataOptions)(Layer.LayerTypes.TABLE === this.state._layerType ? 'all' : 'bbox', { layerId: this.getId() });\n      }\n    }\n\n    /**\n     * @param constraints\n     */\n\n  }, {\n    key: 'setEditingConstraints',\n    value: function setEditingConstraints() {\n      var _this8 = this;\n\n      var constraints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      Object.keys(constraints).forEach(function (c) {\n        return _this8.constraints[c] = constraints[c];\n      });\n    }\n\n    /**\n     * @since 3.8.0 Handle scale constraint\n     * @sto <Boolean> stop true when called from stop method\n     * @private\n     */\n\n  }, {\n    key: '_handleScaleConstraint',\n    value: function _handleScaleConstraint() {\n      var _this9 = this;\n\n      var stop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      // get features from server or wait to start\n      var map = GUI.getService('map').getMap();\n\n      this.state.editing.canEdit = getScaleFromResolution(map.getView().getResolution()) <= this.state._constraints.scale;\n\n      //check if start method is called\n      var in_editing = this._start || this.startResolve;\n\n      var showZoomCursor = !stop && this.state.selected && !this.state.editing.canEdit;\n\n      var control = GUI.getService('map').getCurrentToggledMapControl();\n\n      if (control && control.cursorClass && (stop || in_editing)) {\n        control.setMouseCursor(!showZoomCursor);\n      }\n\n      map.getViewport().classList.toggle('ol-zoom-in', showZoomCursor);\n\n      // check if selected ‚Üí hide modal\n      if (stop || !this.state.selected || !in_editing) {\n        GUI.setModal(false);\n        return;\n      }\n\n      if (this.state.editing.canEdit && this.startResolve) {\n        this.startResolve();\n      }\n\n      // async show message because another toolbox can be unselected before\n      setTimeout(function () {\n        return GUI.setModal(!_this9.state.editing.canEdit, _this9.messages.constraint.scale);\n      });\n    }\n\n    /**\n     *\n     * Start editing\n     * @param options\n     * @return {*}\n     */\n    //added option object to start method to have a control by other plugin how\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this10 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return (0, _promisify.$promisify)(new Promise(function () {\n        var _ref26 = _asyncToGenerator(function* (resolve, reject) {\n          var id = _this10.getId();\n          var applicationConstraint = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.constraints.toolboxes[id];\n          var _options$toolboxheade = options.toolboxheader,\n              toolboxheader = _options$toolboxheade === undefined ? true : _options$toolboxheade,\n              _options$startstopedi = options.startstopediting,\n              startstopediting = _options$startstopedi === undefined ? true : _options$startstopedi,\n              _options$changingtool = options.changingtools,\n              changingtools = _options$changingtool === undefined ? false : _options$changingtool,\n              tools = options.tools,\n              filter = options.filter;\n\n\n          _this10.state.changingtools = changingtools;\n\n          if (tools) {\n            _this10.setEnablesDisablesTools(tools);\n          }\n\n          _this10.state.toolboxheader = toolboxheader;\n          _this10.state.startstopediting = startstopediting;\n\n          filter = applicationConstraint && applicationConstraint.filter || _this10.constraints.filter || filter;\n\n          //register lock features to show a message\n          var unKeyLock = _this10.state.layer.getFeaturesStore().onceafter('featuresLockedByOtherUser', function () {\n            GUI.showUserMessage({\n              type: 'warning',\n              subtitle: _this10.state.layer.getName().toUpperCase(),\n              message: 'plugins.editing.messages.featureslockbyotheruser'\n            });\n          });\n\n          //add featuresLockedByOtherUser setter\n          _this10.state._unregisterStartSettersEventsKey.push(function () {\n            return _this10.state.layer.getFeaturesStore().un('featuresLockedByOtherUser', unKeyLock);\n          });\n\n          // check if can we edit based on scale contraint (vector layer)\n          if (_this10.state._constraints.scale) {\n\n            yield new Promise(function (resolve) {\n              //set as resolve handler to resolve waiting get features from server\n              _this10.startResolve = resolve;\n              //call scale constraint handler\n              _this10._handleScaleConstraint();\n\n              var map = GUI.getService('map');\n\n              // click to fit zoom scale constraint\n              _this10._olStartKeysEvent.push(map.getMap().on('click', function (e) {\n                if (_this10.state.selected && !_this10.state.editing.canEdit) {\n                  map.goToRes(e.coordinate, getResolutionFromScale(_this10.state._constraints.scale, GUI.getService('map').getMapUnits()));\n                }\n              }));\n\n              // if click on start toolbox can edit\n              if (_this10.state.editing.canEdit) {\n                resolve();\n              }\n            });\n          }\n\n          //reset start startResolve promise reolve function\n          _this10.startResolve = null;\n          // set filterOptions\n          _this10.setFeaturesOptions({ filter: filter });\n\n          var handlerAfterSessionGetFeatures = function () {\n            var _ref27 = _asyncToGenerator(function* (promise) {\n              _this10.emit('start-editing');\n              //set unique fields values\n              yield (0, _setLayerUniqueFieldValues.setLayerUniqueFieldValues)(_this10.getId());\n              yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({ type: 'start-editing', id: id });\n              try {\n                var features = yield (0, _promisify.promisify)(promise);\n                _this10.stopLoading();\n                _this10.setEditing(true);\n                yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({ type: 'get-features-editing', id: id, options: { features: features } });\n                resolve({ features: features });\n              } catch (e) {\n                console.warn(e);\n                GUI.notify.error(e.message);\n                yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({ type: 'error-editing', id: id, error: e });\n                _this10.stop();\n                _this10.stopLoading();\n                reject(e);\n              }\n            });\n\n            return function handlerAfterSessionGetFeatures(_x15) {\n              return _ref27.apply(this, arguments);\n            };\n          }();\n\n          var is_started = !!_this10.__isStarted();\n\n          //@TODO need to explain better\n          var GIVE_ME_A_NAME = ApplicationState.ismobile // is mobile\n          && GUI.getService('map').isMapHidden() // map is not visible (content 100%)\n          && Layer.LayerTypes.VECTOR === _this10.state._layerType // is  vector\n          ;\n\n          if (!is_started && GIVE_ME_A_NAME) {\n            _this10.setEditing(true);\n            GUI.getService('map').onceafter('setHidden', function () {\n              setTimeout(_asyncToGenerator(function* () {\n                _this10._start = true;\n                _this10.startLoading();\n                _this10.setFeaturesOptions({ filter: filter });\n                try {\n                  handlerAfterSessionGetFeatures((yield (0, _promisify.promisify)(_this10._session.start(_this10.state._getFeaturesOption))));\n                } catch (e) {\n                  console.warn(e);\n                  _this10.setEditing(false);\n                }\n              }), 300);\n            });\n          }\n\n          /** @TODO merge the following condtions? */\n          if (!is_started && !GIVE_ME_A_NAME) {\n            _this10._start = true;\n            _this10.startLoading();\n            _this10._session.start(_this10.state._getFeaturesOption).then(handlerAfterSessionGetFeatures);\n          }\n\n          if (is_started && !_this10._start) {\n            _this10.startLoading();\n            _this10._session.getFeatures(_this10.state._getFeaturesOption).then(handlerAfterSessionGetFeatures);\n            _this10._start = true;\n          }\n\n          if (is_started) {\n            _this10.setEditing(true);\n          }\n        });\n\n        return function (_x13, _x14) {\n          return _ref26.apply(this, arguments);\n        };\n      }()));\n    }\n  }, {\n    key: 'startLoading',\n\n\n    /**\n     *\n     */\n    value: function startLoading() {\n      this.state.loading = true;\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'stopLoading',\n    value: function stopLoading() {\n      this.state.loading = false;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this11 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        if (_this11.disableCanEditEvent) {\n          _this11.disableCanEditEvent();\n        }\n\n        _this11.state._unregisterStartSettersEventsKey.forEach(function (fnc) {\n          return fnc();\n        });\n        _this11.state._unregisterStartSettersEventsKey = [];\n\n        _this11._olStartKeysEvent.forEach(function (k) {\n          return ol.Observable.unByKey(k);\n        });\n        _this11._olStartKeysEvent.splice(0);\n\n        _this11.unwatches.forEach(function (uw) {\n          return uw();\n        });\n        _this11.unwatches.splice(0);\n\n        //eventually reset start resolve feature waiting promise\n        _this11.startResolve = null;\n        //set start to false\n        _this11._start = false;\n        _this11.state.editing.on = false;\n\n        if (_this11.state._constraints.scale) {\n          _this11._handleScaleConstraint(true);\n        }\n\n        var is_started = !!_this11.__isStarted();\n\n        if (!is_started) {\n          return true;\n        }\n\n        if (!ApplicationState.online) {\n          return;\n        }\n\n        var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n        var layerId = _this11.state.id;\n\n        // Check if father relation is editing and has commit feature\n        var fathersInEditing = service.getLayerById(layerId).getFathers().filter(function (id) {\n          var toolbox = service.getToolBoxById(id);\n          if (toolbox && toolbox.inEditing() && toolbox.isDirty()) {\n            //get a temporary relations object and check if layerId has some changes\n            return Object.keys(toolbox.getSession().getCommitItems() || {}).find(function (id) {\n              return layerId === id;\n            });\n          }\n        });\n\n        if (fathersInEditing.length > 0) {\n          _this11.stopActiveTool();\n          _this11.enableTools(false);\n          _this11.clearToolboxMessages();\n          // unregister get features event\n          if (Layer.LayerTypes.VECTOR === _this11.state._layerType) {\n            GUI.getService('map').getMap().un(_this11._getFeaturesEvent.event, _this11._getFeaturesEvent.fnc);\n          }\n          _this11._stopSessionChildren(_this11.state.id);\n          // clear layer unique field values\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[_this11.getId()] = {};\n          return;\n        }\n\n        try {\n          yield (0, _promisify.promisify)(_this11._session.stop());\n          _this11.state.enabled = false;\n          _this11.stopLoading();\n          _this11.state._getFeaturesOption = {};\n          _this11.stopActiveTool();\n          _this11.enableTools(false);\n          _this11.clearToolboxMessages();\n          _this11.emit('stop-editing');\n          // clear layer unique field values\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[_this11.getId()] = {};\n          return true;\n        } catch (e) {\n          console.warn(e);\n          return Promise.reject(e);\n        }\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Commit changes on server (save)\n     * \n     * @param opts.ids\n     * @param opts.items\n     * @param opts.relations\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'save',\n    value: function save() {\n      var _this12 = this;\n\n      var _ref30 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref30$ids = _ref30.ids,\n          ids = _ref30$ids === undefined ? null : _ref30$ids,\n          items = _ref30.items,\n          _ref30$relations = _ref30.relations,\n          relations = _ref30$relations === undefined ? true : _ref30$relations,\n          _ref30$__esPromise = _ref30.__esPromise,\n          __esPromise = _ref30$__esPromise === undefined ? false : _ref30$__esPromise;\n\n      return (0, _promisify.$promisify)(new Promise(function () {\n        var _ref31 = _asyncToGenerator(function* (resolve, reject) {\n          var commit = void 0; // committed items\n\n          // skip when ..\n          //@TODO Check if deprecated\n          if (ids) {\n            commit = _this12.__commit(ids);\n            _this12.__clearHistory(ids);\n            return resolve(commit);\n          }\n\n          commit = items || _this12.__getCommitItems(_this12.__commit());\n\n          if (!relations) {\n            commit.relations = {};\n          }\n\n          _this12.state.layer.getEditor().commit(commit).then(function (response) {\n\n            // skip when response is null or undefined and response.result is false\n            if (!(response && response.result)) {\n              reject(response);\n              return;\n            }\n\n            var _response$response$ne = response.response.new_relations,\n                new_relations = _response$response$ne === undefined ? {} : _response$response$ne; // check if new relations are saved on server\n\n            // sync server data with local data\n\n            for (var id in new_relations) {\n              var toolbox = ToolBox.get(id);\n              toolbox.getSession().getEditor().applyCommitResponse({ // apply commit response to current editing relation layer\n                response: new_relations[id],\n                result: true\n              });\n            }\n\n            _this12.__clearHistory();\n\n            /**\n             * @since v3.9.0\n             * After commit get new unique values\n             */\n            _this12._session.saveChangesOnServer(commit);\n\n            // ES6 promises only accept a single response\n            if (__esPromise) {\n              resolve({ commit: commit, response: response });\n            } else {\n              resolve(commit, response);\n            }\n          }).fail(function (e) {\n            console.warn(e);reject(e);\n          });\n        });\n\n        return function (_x17, _x18) {\n          return _ref31.apply(this, arguments);\n        };\n      }()));\n    }\n\n    /**\n     * @returns {*|{}}\n     */\n\n  }, {\n    key: 'getEditingConstraints',\n    value: function getEditingConstraints() {\n      return this.state._constraints;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'canEdit',\n    value: function canEdit() {\n      return this.state.editing.canEdit;\n    }\n\n    /**\n     * @param message\n     */\n\n  }, {\n    key: 'setMessage',\n    value: function setMessage(message) {\n      this.state.message = message;\n    }\n\n    /**\n     * @returns {null}\n     */\n\n  }, {\n    key: 'getMessage',\n    value: function getMessage() {\n      return this.state.message;\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'clearMessage',\n    value: function clearMessage() {\n      this.setMessage(null);\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'clearToolboxMessages',\n    value: function clearToolboxMessages() {\n      this.state.toolmessages.help = null;\n      this.clearMessage();\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.state.id;\n    }\n\n    /**\n     * @returns {string}\n     */\n\n  }, {\n    key: 'getTitle',\n    value: function getTitle() {\n      return this.state.title;\n    }\n\n    /**\n     * @param title\n     */\n\n  }, {\n    key: 'setTitle',\n    value: function setTitle(title) {\n      this.state.customTitle = true;\n      this.state.title = title;\n    }\n\n    /**\n     * @returns {string}\n     */\n\n  }, {\n    key: 'getColor',\n    value: function getColor() {\n      return this.state.color;\n    }\n\n    /**\n     * Enable toolbox\n     * \n     * @param bool\n     */\n\n  }, {\n    key: 'setEditing',\n    value: function setEditing() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.setEnable(bool);\n      this.state.editing.on = bool;\n      this.enableTools(bool);\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'inEditing',\n    value: function inEditing() {\n      return this.state.editing.on;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isEnabled',\n    value: function isEnabled() {\n      return this.state.enabled;\n    }\n\n    /**\n     * @param bool\n     * \n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'setEnable',\n    value: function setEnable() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this.state.enabled = bool;\n      return this.state.enabled;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isLoading',\n    value: function isLoading() {\n      return this.state.loading;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'isDirty',\n    value: function isDirty() {\n      return this.state.editing.history.commit;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isSelected',\n    value: function isSelected() {\n      return this.state.selected;\n    }\n\n    /**\n     * @param bool\n     */\n\n  }, {\n    key: 'setSelected',\n    value: function setSelected() {\n      var _this13 = this;\n\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this.state.selected = bool;\n      //Check if layer has a scale constraint\n      if (this.state._constraints.scale) {\n        var map = GUI.getService('map').getMap();\n        //run handle scale contraint handler function\n        this._handleScaleConstraint();\n\n        //IN CASE START EDITING AND CAN EDIT NEED TO DISPATCH EVENT MOVE END MAP\n        if (this._start && this.state.canEdit) {\n          map.dispatchEvent({ type: this._getFeaturesEvent.event, target: map });\n        }\n        //SELECTED AND NOT REGISTER MAP CHANGE RESOLUTION\n        if (this.state.selected && !this.keyChangeResolution) {\n          this.keyChangeResolution = map.getView().on('change:resolution', function () {\n            return _this13._handleScaleConstraint();\n          });\n        }\n\n        //NOT SELECTED AND REGISTER MAP CHANGE RESOLUTION, NEED TO REMOVE CHANGE RESOLUTION CHECK\n        if (!this.state.selected && this.keyChangeResolution) {\n          ol.Observable.unByKey(this.keyChangeResolution);\n          this.keyChangeResolution = null;\n        }\n      }\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getTools',\n    value: function getTools() {\n      return this.state._tools;\n    }\n\n    /**\n     * @param toolId\n     * \n     * @returns {*|number|bigint|T|T} tool by id\n     */\n\n  }, {\n    key: 'getToolById',\n    value: function getToolById(toolId) {\n      return this.state._tools.find(function (tool) {\n        return toolId === tool.getId();\n      });\n    }\n\n    /**\n     * @param toolId\n     */\n\n  }, {\n    key: 'setEnableTool',\n    value: function setEnableTool(toolId) {\n      this.state._tools.find(function (tool) {\n        return tool.getId() === toolId;\n      }).state.enabled = true;\n    }\n\n    /**\n     * Set tools bases on add\n     * editing_constraints : true // follow the tools related toi editing conttraints configuration\n     * \n     * @see g3w-client-plugin-sispi-worksite\n     */\n\n  }, {\n    key: 'setAddEnableTools',\n    value: function setAddEnableTools() {\n      var _ref32 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref32$tools = _ref32.tools,\n          tools = _ref32$tools === undefined ? {} : _ref32$tools,\n          _ref32$options = _ref32.options,\n          options = _ref32$options === undefined ? { editing_constraints: true } : _ref32$options;\n\n      var _options$editing_cons = options.editing_constraints,\n          editing_constraints = _options$editing_cons === undefined ? false : _options$editing_cons;\n\n\n      this.setEnablesDisablesTools({\n        enabled: this.state._tools.filter(function (tool) {\n          return editing_constraints ? tool.type.includes('add_feature') : ['addfeature', 'editattributes', 'movefeature', 'movevertex'].includes(tool.getId());\n        }).map(function (tool) {\n          return { id: tool.getId(), options: tools[tool.getId()] };\n        })\n      });\n\n      this.enableTools(true);\n    }\n\n    /**\n     * Set tools bases on update\n     * \n     * @see g3w-client-plugin-sispi-worksite\n     */\n\n  }, {\n    key: 'setUpdateEnableTools',\n    value: function setUpdateEnableTools(_ref33) {\n      var _ref33$tools = _ref33.tools,\n          tools = _ref33$tools === undefined ? {} : _ref33$tools,\n          _ref33$excludetools = _ref33.excludetools,\n          excludetools = _ref33$excludetools === undefined ? [] : _ref33$excludetools,\n          _ref33$options = _ref33.options,\n          options = _ref33$options === undefined ? { editing_constraints: true } : _ref33$options;\n      var _options$editing_cons2 = options.editing_constraints,\n          editing_constraints = _options$editing_cons2 === undefined ? false : _options$editing_cons2;\n\n      var UPDATEONEFEATUREONLYTOOLSID = ['editattributes', 'movefeature', 'movevertex'];\n      var update_tools = this.state._tools.filter(function (tool) {\n        // exclude\n        if (excludetools.includes(tool.getId())) {\n          return false;\n        }\n        return editing_constraints ? tool.type.find(function (type) {\n          return type === 'change_feature' || type === 'change_attr_feature';\n        }) : UPDATEONEFEATUREONLYTOOLSID.includes(tool.getId());\n      }).map(function (tool) {\n        var id = tool.getId();\n        return { id: id, options: tools[id] };\n      });\n\n      this.setEnablesDisablesTools({ enabled: update_tools });\n      this.enableTools(true);\n    }\n\n    /**\n     * Set enable tools\n     *\n     * @param tools\n     */\n\n  }, {\n    key: 'setEnablesDisablesTools',\n    value: function setEnablesDisablesTools(tools) {\n      var _this14 = this;\n\n      if (tools) {\n        this.state.changingtools = true;\n        // Check if tools is an array\n        var _tools$enabled = tools.enabled,\n            enableTools = _tools$enabled === undefined ? [] : _tools$enabled,\n            _tools$disabled = tools.disabled,\n            disableTools = _tools$disabled === undefined ? [] : _tools$disabled;\n\n\n        var toolsId = enableTools.length ? [] : this.state._tools.map(function (tool) {\n          return tool.getId();\n        });\n\n        enableTools.forEach(function (_ref34) {\n          var id = _ref34.id,\n              _ref34$options = _ref34.options,\n              options = _ref34$options === undefined ? {} : _ref34$options;\n\n          //check if id of tool passed as argument is right\n          var tool = _this14.getToolById(id);\n          if (tool) {\n            var _options$active = options.active,\n                active = _options$active === undefined ? false : _options$active;\n            // set tool options\n\n            tool.messages = options.messages || tool.messages;\n            tool.visible = undefined !== options.visible ? options.visible : true;\n            tool.enabled = undefined !== options.enabled ? options.enabled : false;\n            tool.disabledtoolsoftools = undefined !== options.disabledtoolsoftools ? options.disabledtoolsoftools : [];\n            if (tool.visible) {\n              toolsId.push(id);\n            }\n            if (active) {\n              _this14.setActiveTool(tool);\n            }\n            if (_this14.state._enabledtools === undefined) {\n              _this14.state._enabledtools = [];\n            }\n            _this14.state._enabledtools.push(tool);\n          }\n        });\n        //disabled and visible\n        disableTools.forEach(function (_ref35) {\n          var id = _ref35.id,\n              options = _ref35.options;\n\n          var tool = _this14.getToolById(id);\n          if (tool) {\n            if (_this14.state._disabledtools === undefined) {\n              _this14.state._disabledtools = [];\n            }\n            _this14.state._disabledtools.push(id);\n            //add it toi visible tools\n            toolsId.push(id);\n          }\n        });\n        //set not visible all remain\n        this.state._tools.forEach(function (tool) {\n          return !toolsId.includes(tool.getId()) && (tool.visible = false);\n        });\n        this.state.changingtools = false;\n      }\n    }\n  }, {\n    key: 'enableTools',\n\n\n    /**\n     * @param {*} bool whehter enable all tools\n     */\n    value: function enableTools() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      var tools = this.state._enabledtools || this.state._tools;\n      var disabledtools = this.state._disabledtools || [];\n      tools.forEach(function (tool) {\n        var enabled = undefined !== tool.enable ? tool.enable : bool;\n        tool.enabled = bool && disabledtools.length ? disabledtools.indexOf(tool.getId()) === -1 : toRawType(enabled) === 'Boolean' ? enabled : enabled({ bool: bool, tool: tool });\n        if (!bool) {\n          tool.active = bool;\n        }\n      });\n    }\n\n    /**\n     * @param tool\n     */\n\n  }, {\n    key: 'setActiveTool',\n    value: function setActiveTool(tool) {\n      var _this15 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        try {\n          yield (0, _promisify.promisify)(_this15.stopActiveTool(tool));\n\n          _this15.state.toolsoftool.splice(0);\n          _this15.state.activetool = tool;\n\n          var workflow = tool.getOperator();\n\n          if (workflow) {\n            // filter eventually disable tools of tools\n            workflow.once('settoolsoftool', function (ts) {\n              var _state$toolsoftool;\n\n              return (_state$toolsoftool = _this15.state.toolsoftool).push.apply(_state$toolsoftool, _toConsumableArray((ts || []).filter(function (t) {\n                return !tool.disabledtoolsoftools.includes(t.type);\n              })));\n            });\n            workflow.once('start', function (ts) {\n              return _this15.state.toolsoftool.forEach(function (t) {\n                return (ts || []).includes(t.type) && (t.options.active = true);\n              });\n            });\n            workflow.once('stop', function (ts) {\n              return _this15._deactivetools(tool, ts);\n            });\n            workflow.once('reject', function (ts) {\n              return _this15._deactivetools(tool, ts);\n            });\n          }\n\n          tool.start();\n\n          // set tool messages\n          var messages = _this15.state.activetool.getOperator().getHelpMessage() || _this15.state.activetool.getOperator().getRunningStep() ? _this15.state.activetool.messages : null;\n          _this15.state.toolmessages.help = messages && messages.help || null;\n        } catch (e) {\n          console.warn(e);\n        }\n      }));\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0 \n     */\n\n  }, {\n    key: '_deactivetools',\n    value: function _deactivetools(tool) {\n      var tools = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      // in case of deactivate tool and current active tool, it was clicked\n      if (tool === this.state.activetool) {\n        this.state.activetool = null;\n        this.state.toolsoftool.splice(0);\n      }\n      this.state.toolsoftool.forEach(function (t) {\n        return tools.includes(t.type) && (t.options.active = false);\n      });\n    }\n\n    /**\n     * @returns {null}\n     */\n\n  }, {\n    key: 'getActiveTool',\n    value: function getActiveTool() {\n      return this.state.activetool;\n    }\n\n    /**\n     * @param tool\n     * \n     * @returns {*}\n     */\n\n  }, {\n    key: 'stopActiveTool',\n    value: function stopActiveTool(tool) {\n      var _this16 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var activeTool = _this16.getActiveTool();\n        if (tool && (!activeTool || tool === activeTool)) {\n          tool.removeAllListeners();\n          return;\n        }\n\n        try {\n          //Need to check if is there active tool\n          if (activeTool) {\n            activeTool.removeAllListeners();\n            yield (0, _promisify.promisify)(activeTool.stop(true));\n          }\n          _this16.state.toolsoftool.splice(0);\n          _this16.state.toolmessages.help = null;\n          _this16.state.activetool = null;\n        } catch (e) {\n          console.warn(e);\n        }\n      }));\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getSession',\n    value: function getSession() {\n      return this._session;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getEditor',\n    value: function getEditor() {\n      return this.state.layer.getEditor();\n    }\n\n    /**\n     * Reset default values\n     */\n\n  }, {\n    key: 'resetDefault',\n    value: function resetDefault() {\n      this.state.title = this.state.originalState.title;\n      this.state.toolboxheader = true;\n      this.state.startstopediting = true;\n      this.constraints = {\n        filter: null,\n        show: null,\n        tools: []\n      };\n\n      if (this.state._enabledtools) {\n        this.state._enabledtools = undefined;\n        this.enableTools();\n        this.state._tools.forEach(function (tool) {\n          tool.visible = true;\n          tool.enabled = false;\n          tool.messages = tool.op.getMessages();\n          tool.disabledtoolsoftools = []; //reset disabled tools eventually set by other\n        });\n      }\n      this.state._disabledtools = null;\n      this.setShow(true);\n      //need to set selected false\n      this.state.selected = false;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param uniqueId\n     * @param items\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__add',\n    value: function __add(uniqueId, items) {\n      var _this17 = this;\n\n      //state object is an array of feature/features changed in a transaction\n      return (0, _promisify.$promisify)(new Promise(function (resolve) {\n        // before insert an item into the history\n        // check if are at last state step (no redo was done)\n        // If we are in the middle of undo, delete all changes\n        // in the history from the current \"state\" so if it\n        // can create a new history\n        if (null === _this17.state.editing.session.current) {\n          _this17._states = [{ id: uniqueId, items: items }];\n        } else {\n          if (_this17._states.length > 0 && _this17.state.editing.session.current < _this17._states.at(-1).id) {\n            _this17._states = _this17._states.filter(function (s) {\n              return s.id <= _this17.state.editing.session.current;\n            });\n          }\n          _this17._states.push({ id: uniqueId, items: items });\n        }\n\n        _this17.state.editing.session.current = uniqueId;\n        // set internal state\n        _this17.__canUndo();\n        _this17.__canCommit();\n        _this17.__canRedo();\n        // return unique id key\n        // it can be used in save relation\n        resolve(uniqueId);\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * undo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__undo',\n    value: function __undo() {\n      var _this18 = this;\n\n      var items = void 0;\n      if (this.state.editing.session.current === this._states[0].id) {\n        this.state.editing.session.current = null;\n        items = this._states[0].items;\n      } else {\n        this._states.find(function (state, idx) {\n          if (state.id === _this18.state.editing.session.current) {\n            items = _this18._states[idx].items;\n            _this18.state.editing.session.current = _this18._states[idx - 1].id;\n            return true;\n          }\n        });\n      }\n      items = (0, _checkSessionItems.checkSessionItems)(this._history.id, items, 0);\n      // set internal state\n      this.__canUndo();\n      this.__canCommit();\n      this.__canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * redo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__redo',\n    value: function __redo() {\n      var _this19 = this;\n\n      var items = void 0;\n      // if not set get first state\n      if (!this.state.editing.session.current) {\n        items = this._states[0].items;\n        // set current to first\n        this.state.editing.session.current = this._states[0].id;\n      } else {\n        this._states.find(function (state, idx) {\n          if (_this19.state.editing.session.current === state.id) {\n            _this19.state.editing.session.current = _this19._states[idx + 1].id;\n            items = _this19._states[idx + 1].items;\n            return true;\n          }\n        });\n      }\n      items = (0, _checkSessionItems.checkSessionItems)(this._history.id, items, 1);\n      // set internal state\n      this.__canUndo();\n      this.__canCommit();\n      this.__canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param id\n     * \n     * @returns {T}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getState',\n    value: function __getState(id) {\n      return this._states.find(function (s) {\n        return s.id === id;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @returns { boolean } true if we can commit\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canCommit',\n    value: function __canCommit() {\n      var checkCommitItems = this.__commit();\n      var canCommit = false;\n      for (var layerId in checkCommitItems) {\n        var commitItem = checkCommitItems[layerId];\n        canCommit = canCommit || commitItem.length > 0;\n      }\n      this._constrains.commit = canCommit;\n      return this._constrains.commit;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canUdo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canUndo',\n    value: function __canUndo() {\n      var _this20 = this;\n\n      var currentStateIndex = null;\n      if (this.state.editing.session.current && this._states.length) {\n        this._states.forEach(function (state, idx) {\n          if (_this20.state.editing.session.current === state.id) {\n            currentStateIndex = idx;\n            return false;\n          }\n        });\n      };\n      var steps = this._states.length - 1 - currentStateIndex;\n      this._constrains.undo = null !== this.state.editing.session.current && steps < 10; // 10 = maximum \"buffer history\" lenght for undo/redo\n      return this._constrains.undo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canRedo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canRedo',\n    value: function __canRedo() {\n      this._constrains.redo = this._states.at(-1) && this._states.at(-1).id != this.state.editing.session.current || null === this.state.editing.session.current && this._states.length > 0;\n      return this._constrains.redo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * get all changes to send to server (mandare al server)\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__commit',\n    value: function __commit() {\n      var _this21 = this;\n\n      var commitItems = {};\n      var statesToCommit = this._states.filter(function (s) {\n        return s.id <= _this21.state.editing.session.current;\n      });\n      statesToCommit.forEach(function (state) {\n        state.items.forEach(function (item) {\n          var add = true;\n          if (Array.isArray(item)) {\n            item = item[1];\n          }\n          if (commitItems[item.layerId]) {\n            commitItems[item.layerId].forEach(function (commitItem, index) {\n              // check if already inserted feature\n              if (commitItem.getUid() === item.feature.getUid()) {\n                if (item.feature.isNew() && !commitItem.isDeleted() && item.feature.isUpdated()) {\n                  var _item = item.feature.clone();\n                  _item.add();\n                  commitItems[item.layerId][index] = _item;\n                } else if (item.feature.isNew() && item.feature.isDeleted()) {\n                  commitItems[item.layerId].splice(index, 1);\n                } else if (item.feature.isUpdated() || item.feature.isDeleted()) {\n                  commitItems[item.layerId][index] = item.feature;\n                }\n                add = false;\n                return false;\n              }\n            });\n          }\n          if (add) {\n            var _feature3 = item.feature;\n            var layerId = item.layerId;\n            if (!(!_feature3.isNew() && _feature3.isAdded())) {\n              if (!commitItems[layerId]) {\n                commitItems[layerId] = [];\n              }\n              commitItems[layerId].push(_feature3);\n            }\n          }\n        });\n      });\n      return commitItems;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {*|null}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getLastHistoryState',\n    value: function __getLastHistoryState() {\n      return this._states.at(-1) || null;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__isStarted',\n    value: function __isStarted() {\n      return this.state.editing.session.started;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getHistory',\n    value: function __getHistory() {\n      return this._history;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getEditor',\n    value: function __getEditor() {\n      return this.state.layer.getEditor();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Add temporary features that will be added with save method\n     * \n     * @param { { layerId: string, feature: * } } NewFeat \n     * @param { { layerId: string, feature: * } } OldFeat\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__push',\n    value: function __push(newFeat, oldFeat) {\n      this.state.editing.session.changes.push(oldFeat ? [oldFeat, newFeat] : newFeat); // check is set old (edit)\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Delete temporary feature\n     * \n     * @param layerId\n     * @param feature\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__pushDelete',\n    value: function __pushDelete(layerId, feature) {\n      this.__push({ layerId: layerId, feature: feature.delete() });\n      return feature;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Save temporary changes to the layer in history instance and feature store\n     * \n     * @param options\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__save',\n    value: function __save() {\n      var _this22 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      // fill history\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        // add temporary modify to history\n        if (_this22.state.editing.session.changes.length) {\n          var uniqueId = options.id || Date.now();\n          yield (0, _promisify.promisify)(_this22.__add(uniqueId, _this22.state.editing.session.changes));\n          // clear to temporary changes\n          _this22.state.editing.session.changes = [];\n          // resolve if unique id\n          return uniqueId;\n        }\n        return null;\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Add temporary feature\n     * \n     * @param layerId \n     * @param feature \n     * @param removeNotEditableProperties\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__pushAdd',\n    value: function __pushAdd(layerId, feature) {\n      var removeNotEditableProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      /**\n       * @TODO check if it need to deprecate it. All properties are need\n       * Please take care of this to understand\n       * In case of removeNotEditableProperties true, remove not editable field\n       * from feature properties\n       */\n      var editor = layerId === this.state.layer.getId() ? this.state.layer.getEditor() : ToolBox.get(layerId).getSession().getEditor();\n\n      // remove not editable proprierties from feature\n      if (removeNotEditableProperties) {\n        (editor.getLayer().getEditingNotEditableFields() || []).forEach(function (f) {\n          return feature.unset([f]);\n        });\n      }\n\n      var newFeature = feature.clone();\n\n      this.__push({ layerId: layerId, feature: newFeature.add() });\n\n      return newFeature;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Add temporary feature changes\n     * \n     * @param layerId\n     * @param newFeature\n     * @param oldFeature\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__pushUpdate',\n    value: function __pushUpdate(layerId, newFeature, oldFeature) {\n      // get index of temporary changes\n      var is_new = newFeature.isNew();\n      var i = is_new && this.state.editing.session.changes.findIndex(function (c) {\n        return layerId === c.layerId && c.feature.getId() === newFeature.getId();\n      });\n\n      // in case of new feature\n      if (is_new && i >= 0) {\n        var _feature4 = newFeature.clone();\n        _feature4.add();\n        this.state.editing.session.changes[i].feature = _feature4;\n        return;\n      }\n\n      this.__push({ layerId: layerId, feature: newFeature.update() }, { layerId: layerId, feature: oldFeature.update() });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     *\n     * @param changes\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__rollback',\n    value: function __rollback(changes) {\n      var _this23 = this;\n\n      // skip when..\n      if (changes) {\n        return this.state.layer.getEditor().rollback(changes);\n      }\n\n      // Handle temporary changes of layer\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var id = _this23.state.layer.getId();\n        changes = { own: [], dependencies: {} };\n\n        _this23.state.editing.session.changes.forEach(function (c) {\n          var change = Array.isArray(c) ? c[0] : c;\n          if (change.layerId === id) {\n            changes.own.push(change);\n          } else {\n            changes.dependencies[change.layerId] = changes.dependencies[change.layerId] || [];\n            // FILO\n            changes.dependencies[change.layerId].unshift(change);\n          }\n        });\n\n        try {\n          yield (0, _promisify.promisify)(_this23.state.layer.getEditor().rollback(changes.own));\n          for (var _id in changes.dependencies) {\n            ToolBox.get(_id).getSession().rollback(changes.dependencies[_id]);\n          }\n          return changes.dependencies;\n        } catch (e) {\n          console.warn(e);\n        } finally {\n          _this23.state.editing.session.changes = [];\n        }\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Rollback child changes of current session\n     * \n     * @param ids [array of child layer id]\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__rollbackDependecies',\n    value: function __rollbackDependecies() {\n      var _this24 = this;\n\n      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      ids.forEach(function (id) {\n        var changes = [];\n        _this24.state.editing.session.changes = _this24.state.editing.session.changes.filter(function (temporarychange) {\n          if (temporarychange.layerId === id) {\n            changes.push(temporarychange);\n            return false;\n          }\n        });\n        if (changes.length) {\n          ToolBox.get(id).getSession().rollback(changes);\n        }\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     *\n     * undo method\n     * \n     * @param items\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__undoSession',\n    value: function __undoSession(items) {\n      items = items || this.__undo();\n      this.state.layer.getEditor().setChanges(items.own, true);\n      this.__canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * redo method\n     * \n     * @param items\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__redoSession',\n    value: function __redoSession(items) {\n      items = items || this.__redo();\n      this.state.layer.getEditor().setChanges(items.own, true);\n      this.__canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Serialize commit\n     * \n     * @returns {{ add: *[], update: *[], relations: {}, delete: *[] }} JSON Object for a commit body send to server\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getCommitItems',\n    value: function __getCommitItems() {\n      var _this25 = this;\n\n      var itemsToCommit = this.__commit();\n      var id = this.state.layer.getId();\n      var state = void 0;\n      var layer = void 0;\n      var commitObj = {\n        add: [], // features to add\n        update: [], // features to update\n        delete: [], // features to delete\n        relations: {} // relation features\n      };\n      // key is a layer id that has changes to apply\n      for (var key in itemsToCommit) {\n        var isRelation = false; //set relation to false\n        var items = itemsToCommit[key];\n        // case key (layer id) is not equal to id (current layer id on editing)\n        if (key !== id) {\n          isRelation = true; //set true because these changes belong to features relation items\n          var sessionRelation = ToolBox.get(key).getSession();\n          //check lock ids of relation layer\n          var lockids = sessionRelation ? sessionRelation.getEditor().getLockIds() : [];\n          //create a relations object\n          commitObj.relations[key] = {\n            lockids: lockids,\n            add: [],\n            update: [],\n            delete: [],\n            relations: {} //@since v3.7.1\n          };\n          layer = commitObj.relations[key];\n        } else {\n          layer = commitObj;\n        }\n\n        items.forEach(function (item) {\n          //check state of feature item\n          state = item.getState();\n          var GeoJSONFormat = new ol.format.GeoJSON();\n          // item needs to be deleted\n          if ('delete' === state) {\n            //check if is new. If is new mean is not present on server\n            //so no need to say to server to delete it\n            if (!item.isNew()) {\n              layer.delete.push(item.getId());\n            }\n            return;\n          }\n          //convert feature to json ex. {geometry:{tye: 'Point'}, properties:{}.....}\n          var itemObj = GeoJSONFormat.writeFeatureObject(item);\n          //get properties\n          var childs_properties = item.getProperties();\n          for (var p in itemObj.properties) {\n            // in case the value of property is an object\n            if (itemObj.properties[p] && _typeof(itemObj.properties[p]) === 'object' && itemObj.properties[p].constructor === Object) {\n              //need to get value from value attribute object\n              itemObj.properties[p] = itemObj.properties[p].value;\n            }\n            // @TODO explain when this condition happen\n            if (undefined === itemObj.properties[p] && childs_properties[p]) {\n              itemObj.properties[p] = childs_properties[p];\n            }\n          }\n          // in case of add it have to remove not editable properties\n          layer[item.isNew() ? 'add' : item.getState()].push(itemObj);\n        });\n        // check in case of no edit remove relation key\n        if (isRelation && layer.add.length === 0 //no relation features to add\n        && layer.update.length === 0 //no relation features to update\n        && layer.delete.length === 0 //no relation features to delete\n        ) {\n            delete commitObj.relations[key];\n          }\n      }\n\n      // Remove deep relations from current layer (commitObj) that are not relative to that layer\n      var relations = Object.keys(commitObj.relations || {});\n      relations.filter(function (id) {\n        return undefined === _this25.state.layer.getEditor().getLayer().getRelations().getArray().find(function (r) {\n          return id === r.getChild();\n        });\n      }) // child relations\n      .map(function (id) {\n        commitObj.relations[ToolBox.get(id).getSession().getEditor().getLayer().getRelations().getArray().find(function (r) {\n          return relations.includes(r.getFather());\n        }) // parent relation layer\n        .getFather()].relations[id] = commitObj.relations[id];\n        return id;\n      }).forEach(function (id) {\n        return delete commitObj.relations[id];\n      });\n\n      return commitObj;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Clear all things bind to session\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__clearSession',\n    value: function __clearSession() {\n      this._allfeatures = false;\n      this.state.editing.session.started = false;\n      this.state.editing.session.getfeatures = false;\n      this.__clearHistory();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param ids since g3w-client-plugin-editing@v3.8.0\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__clearHistory',\n    value: function __clearHistory(ids) {\n      var _this26 = this;\n\n      if (ids) {\n        this._states.forEach(function (state, idx) {\n          if (ids.indexOf(state.id) !== -1) {\n            if (_this26.state.editing.session.current && _this26.state.editing.session.current === state.id()) {\n              _this26.__undo();\n            }\n            _this26._states.splice(idx, 1);\n          }\n        });\n      } else {\n        // clear all\n        this._states = [];\n        this.state.editing.session.current = null;\n        this._constrains.commit = false;\n        this._constrains.redo = false;\n        this._constrains.undo = false;\n      }\n    }\n\n    /**\n     * Start session\n     */\n\n  }, {\n    key: '__startSession',\n    value: function () {\n      var _ref40 = _asyncToGenerator(function* () {\n        var _this27 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        try {\n          var features = yield (0, _promisify.promisify)(this.state.layer.getEditor().start(options));\n          this.state.editing.session.started = true;\n          return features;\n        } catch (e) {\n          console.warn(e);\n          return Promise.reject(e);\n        } finally {\n          if (!options.registerEvents) {\n            return;\n          }\n          this.state._getFeaturesOption = options;\n          // register get features event (only in case filter bbox)\n          if (Layer.LayerTypes.VECTOR === this.state._layerType && this.state._getFeaturesOption.filter.bbox) {\n            var fnc = function fnc() {\n              if (\n              //added ApplicationState.online\n              ApplicationState.online && _this27.state.editing.canEdit && _this27.state.selected //need to be selected\n              && 0 === GUI.getContentLength()) {\n                _this27.state._getFeaturesOption.filter.bbox = GUI.getService('map').getMapBBOX();\n                _this27.state.loading = true;\n                _this27._session.getFeatures(_this27.state._getFeaturesOption).then(function (promise) {\n                  return promise.then(function () {\n                    return _this27.state.loading = false;\n                  });\n                });\n              }\n            };\n            this._getFeaturesEvent.event = 'moveend';\n            this._getFeaturesEvent.fnc = debounce(fnc, 300);\n            this._olStartKeysEvent.push(GUI.getService('map').getMap().on('moveend', this._getFeaturesEvent.fnc));\n            if (GUI.getContentLength()) {\n              GUI.once('closecontent', function () {\n                var map = GUI.getService('map').getMap();\n                setTimeout(function () {\n                  map.dispatchEvent({ type: _this27._getFeaturesEvent.event, target: map });\n                });\n              });\n            }\n          }\n        }\n      });\n\n      function __startSession() {\n        return _ref40.apply(this, arguments);\n      }\n\n      return __startSession;\n    }()\n\n    /**\n     * Stop session\n     */\n\n  }, {\n    key: '__stopSession',\n    value: function () {\n      var _ref41 = _asyncToGenerator(function* () {\n        try {\n          if (this.state.editing.session.started || this.state.editing.session.getfeatures) {\n            yield (0, _promisify.promisify)(this.state.layer.getEditor().stop());\n            this.__clearSession();\n          }\n        } catch (e) {\n          console.warn(e);\n          return Promise.reject(e);\n        } finally {\n          if (!this.inEditing()) {\n            return;\n          }\n          if (ApplicationState.online) {\n            this._stopSessionChildren(this.state.id);\n          }\n          // unregister get features event\n          if (this.state._getFeaturesOption.registerEvents && Layer.LayerTypes.VECTOR === this.state._layerType) {\n            GUI.getService('map').getMap().un(this._getFeaturesEvent.event, this._getFeaturesEvent.fnc);\n          }\n        }\n      });\n\n      function __stopSession() {\n        return _ref41.apply(this, arguments);\n      }\n\n      return __stopSession;\n    }()\n\n    /**\n     * Get features from server (by editor)\n     */\n\n  }, {\n    key: '__getFeatures',\n    value: function () {\n      var _ref42 = _asyncToGenerator(function* () {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        if (!this._allfeatures) {\n          this._allfeatures = !options.filter;\n          var features = yield (0, _promisify.promisify)(this.state.layer.getEditor().getFeatures(options));\n          this.state.editing.session.getfeatures = true;\n          return features;\n        }\n        return [];\n      });\n\n      function __getFeatures() {\n        return _ref42.apply(this, arguments);\n      }\n\n      return __getFeatures;\n    }()\n\n    /**\n     * Hook to get informed that are saved on server\n     * Get unique id for each commited layer/relation\n     */\n\n  }, {\n    key: '__saveChangesOnServer',\n    value: function () {\n      var _ref43 = _asyncToGenerator(function* (commit) {\n        var promises = [(0, _setLayerUniqueFieldValues.setLayerUniqueFieldValues)(this.getId())];\n        var relationsId = [];\n        var addRelationId = function addRelationId() {\n          var relations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n          Object.entries(relations).forEach(function (_ref44) {\n            var _ref45 = _slicedToArray(_ref44, 2),\n                id = _ref45[0],\n                commit = _ref45[1];\n\n            relationsId.push(id);\n            addRelationId(commit.relations);\n          });\n        };\n        addRelationId(commit.relations);\n        relationsId.forEach(function (id) {\n          return promises.push((0, _setLayerUniqueFieldValues.setLayerUniqueFieldValues)(id));\n        });\n\n        yield Promise.allSettled(promises);\n      });\n\n      function __saveChangesOnServer(_x30) {\n        return _ref43.apply(this, arguments);\n      }\n\n      return __saveChangesOnServer;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_startTool',\n    value: function _startTool(tool) {\n      var _this28 = this;\n\n      if (tool.getOperator()) {\n        tool.active = true;\n        setTimeout(_asyncToGenerator(function* () {\n          return yield _this28._startOp(tool, {\n            inputs: { layer: _this28.getLayer(), features: [] },\n            context: { session: _this28._session }\n          }, !!GUI.getService('map').isMapHidden());\n        })); // prevent rendering change state\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_startOp',\n    value: function () {\n      var _ref47 = _asyncToGenerator(function* (tool, options, hideSidebar) {\n        // reset features\n        options.inputs.features = [];\n\n        if (hideSidebar) {\n          GUI.hideSidebar();\n        }\n\n        try {\n          yield (0, _promisify.promisify)(tool.op.start(options));\n          yield (0, _promisify.promisify)(this._session.save());\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').saveChange(); // after save temp change check if editing service has a autosave\n        } catch (e) {\n          console.warn(e);\n          if (hideSidebar) {\n            GUI.showSidebar();\n          }\n          this._session.rollback();\n        } finally {\n          if (!tool.getOperator().runOnce && Layer.LayerTypes.TABLE !== this.getLayer().getType()) {\n            yield this._startOp(tool, options, hideSidebar);\n          } else {\n            tool.stop();\n          }\n        }\n      });\n\n      function _startOp(_x32, _x33, _x34) {\n        return _ref47.apply(this, arguments);\n      }\n\n      return _startOp;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_stopTool',\n    value: function _stopTool(tool) {\n      var _this29 = this;\n\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        if (!tool.getOperator()) {\n          tool.emit('stop', { session: _this29._session });\n          return;\n        }\n        try {\n          yield (0, _promisify.promisify)(tool.getOperator().stop(force));\n        } catch (e) {\n          console.warn(e);\n          _this29._session.rollback();\n        } finally {\n          tool.active = false;\n          tool.emit('stop', { session: _this29._session });\n        }\n      }));\n    }\n  }]);\n\n  return ToolBox;\n}(G3WObject);\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/store/sessions.js@v3.9.1\n *\n * Store editing sessions\n *\n * @since g3w-client-plugin-editing@v3.8.0\n */\n\n\nToolBox._sessions = {};\nToolBox.get = function (id) {\n  return ToolBox._sessions[id];\n};\nToolBox.clear = function () {\n  return Object.keys(sessions).forEach(function (id) {\n    return delete ToolBox._sessions[id];\n  });\n};\n\n},{\"../components/CopyFeaturesFromOtherLayers.vue\":4,\"../g3wsdk/workflow/step\":14,\"../g3wsdk/workflow/workflow\":15,\"../interactions/pickfeaturesinteraction\":26,\"../utils/addPartToMultigeometries\":28,\"../utils/addTableFeature\":30,\"../utils/checkSessionItems\":32,\"../utils/chooseFeature\":33,\"../utils/chooseFeatureFromFeatures\":34,\"../utils/cloneFeature\":35,\"../utils/convertToGeometry\":36,\"../utils/createEditingDataOptions\":37,\"../utils/dissolve\":39,\"../utils/evaluateExpressionFields\":40,\"../utils/getDeltaXY\":41,\"../utils/getEditingLayerById\":42,\"../utils/getLayersDependencyFeatures\":45,\"../utils/getNotEditableFieldsNoPkValues\":46,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/getRelationId\":50,\"../utils/getRelationsInEditing\":51,\"../utils/getRelationsInEditingByFeature\":52,\"../utils/handleSplitFeature\":54,\"../utils/isPointOnVertex\":55,\"../utils/isSameBaseGeometryType\":56,\"../utils/promisify\":58,\"../utils/setAndUnsetSelectedFeaturesStyle\":59,\"../utils/setLayerUniqueFieldValues\":61,\"../utils/splitFeatures\":62,\"../utils/unlinkRelation\":63,\"../workflows\":65}],28:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addPartToMultigeometries = addPartToMultigeometries;\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _promisify = require('./promisify');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addparttomultigeometriestask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addparttomultigeometriesstep.js@v3.7.1\n * \n * @returns jQuery promise\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction addPartToMultigeometries(inputs, context) {\n  return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n    var feature = void 0;\n    var originalFeature = void 0;\n\n    // add part\n    if (inputs.features.length > 1) {\n      feature = inputs.features[0];\n      var geometry = feature.getGeometry();\n      originalFeature = feature.clone();\n      geometry.setCoordinates([].concat(_toConsumableArray(geometry.getCoordinates()), _toConsumableArray(inputs.features[1].getGeometry().getCoordinates())));\n    } else {\n      feature = inputs.layer.getEditingLayer().getSource().getFeatures()[0];\n      originalFeature = feature.clone();\n      feature.setGeometry(inputs.features[0].getGeometry());\n    }\n\n    // evaluated geometry expression\n    try {\n      yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature });\n    } catch (e) {\n      console.warn(e);\n    }\n\n    context.session.pushUpdate(inputs.layer.getId(), feature, originalFeature);\n\n    inputs.features = [feature];\n    return inputs;\n  }));\n}\n\n},{\"../utils/evaluateExpressionFields\":40,\"./promisify\":58}],29:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addRemoveToMultipleSelectFeatures = addRemoveToMultipleSelectFeatures;\n\nvar _setFeaturesSelectedStyle = require('../utils/setFeaturesSelectedStyle');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/selectelementstask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/selectelementsstep.js@v3.7.1\n *\n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction addRemoveToMultipleSelectFeatures(features, inputs, selected, task) {\n  (features || []).forEach(function (f) {\n    var selIndex = selected.indexOf(f);\n    if (selIndex < 0) {\n      task._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)([f]);\n      selected.push(f);\n    } else {\n      selected.splice(selIndex, 1);\n      f.setStyle(task._originalStyle);\n    }\n    inputs.features = selected;\n  });\n\n  var steps = task.getSteps();\n  var buttonnext = steps.select.buttonnext;\n\n  buttonnext.disabled = buttonnext.condition ? buttonnext.condition({ features: selected }) : 0 === selected.length;\n\n  if (undefined !== steps.select.dynamic) {\n    steps.select.dynamic = selected.length;\n  }\n}\n\n},{\"../utils/setFeaturesSelectedStyle\":60}],30:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addTableFeature = addTableFeature;\n\nvar _promisify = require('./promisify');\n\n/**\n * \n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetabletask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addtablefeaturestep.js@v3.7.1\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction addTableFeature(inputs, context) {\n  var feature = inputs.features.length > 0 ? inputs.features[inputs.features.length - 1] : inputs.layer.createNewFeature();\n\n  feature.setTemporaryId();\n\n  inputs.layer.getEditingLayer().getEditingSource().addFeature(feature);\n\n  context.session.pushAdd(inputs.layer.getId(), feature, false);\n\n  inputs.features.push(feature);\n\n  context.get_default_value = true;\n\n  return (0, _promisify.$promisify)(Promise.resolve(inputs, context));\n}\n\n},{\"./promisify\":58}],31:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.areCoordinatesEqual = areCoordinatesEqual;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param feature\n * @param coordinates\n *\n * @returns { boolean }\n */\nfunction areCoordinatesEqual(_ref) {\n  var feature = _ref.feature,\n      coordinates = _ref.coordinates;\n\n  //get geometry from feature\n  var geometry = feature.getGeometry();\n  var type = geometry.getType();\n  var coords = function coords(c1, c2) {\n    return g3wsdk.core.geoutils.areCoordinatesEqual(c1, c2);\n  }; // whether element have same coordinates\n\n  switch (type) {\n    case 'Polygon':\n    case 'MultiLineString':\n      coordinates = _.flatMap(coordinates);\n      return _.flatMap(geometry.getCoordinates()).every(function (c, i) {\n        return coords(c, coordinates[i]);\n      });\n\n    case 'LineString':\n    case 'MultiPoint':\n      return geometry.getCoordinates().every(function (c, i) {\n        return coords(c, coordinates[i]);\n      });\n\n    case 'MultiPolygon':\n      // in case of add part or remove part\n      if (coordinates.length !== geometry.getPolygons().length) {\n        return false;\n      }\n      return geometry.getPolygons().some(function (poly, i) {\n        var _coords = _.flatMap(coordinates[i]);\n        return _.flatMap(poly.getCoordinates()).every(function (c, i) {\n          return coords(c, _coords[i]);\n        });\n      });\n\n    case 'Point':\n      return coords(coordinates, geometry.getCoordinates());\n\n    default:\n      return false;\n  }\n}\n\n},{}],32:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkSessionItems = checkSessionItems;\n/**\n   * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n   * \n   * check if was done an update (update are array contains two items, old and new value)\n   *\n   * @since g3w-client-plugin-editing@v3.8.0\n   */\nfunction checkSessionItems(historyId, items, action) {\n  /**\n   * action: <referred to array index>\n   *  0: undo;\n   *  1: redo;\n   **/\n  var newItems = {\n    own: [], //array of changes of layer of the current session\n    dependencies: {} // dependencies\n  };\n\n  items.forEach(function (item) {\n    if (Array.isArray(item)) {\n      item = item[action];\n    }\n    // check if belong to session\n    if (historyId === item.layerId) {\n      newItems.own.push(item);\n    } else {\n      newItems.dependencies[item.layerId] = newItems.dependencies[item.layerId] || {\n        own: [],\n        dependencies: {}\n      };\n      newItems.dependencies[item.layerId].own.push(item);\n    }\n  });\n\n  return newItems;\n}\n\n},{}],33:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chooseFeature = chooseFeature;\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _promisify = require('../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/choosefeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/choosefeaturestep.js@v3.7.1\n * \n * @returns jQuery promise\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction chooseFeature(inputs) {\n  return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n    try {\n      if (1 !== inputs.features.length) {\n        var feature = yield (0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: inputs.features, inputs: inputs });\n        inputs.features = [feature];\n      }\n      return inputs;\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n  }));\n}\n\n},{\"../utils/chooseFeatureFromFeatures\":34,\"../utils/promisify\":58}],34:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chooseFeatureFromFeatures = chooseFeatureFromFeatures;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/choosefeaturetoedit.js@v3.6\n * \n * @since g3w-client-plugin-editing@v3.5.13\n */\n\nfunction chooseFeatureFromFeatures(_ref) {\n  var _ref$features = _ref.features,\n      features = _ref$features === undefined ? [] : _ref$features,\n      inputs = _ref.inputs;\n\n  return new Promise(function (resolve, reject) {\n\n    var feature = [];\n\n    var comp = new (Vue.extend(require('../components/ChooseFeatureToEdit.vue')))({\n      features: Array.isArray(features) ? features : [],\n      feature: feature,\n      attributes: inputs.layer.getEditingFields().map(function (_ref2) {\n        var name = _ref2.name,\n            label = _ref2.label;\n        return { name: name, label: label };\n      })\n    });\n\n    var dialog = g3wsdk.gui.GUI.showModalDialog({\n      title: tPlugin('editing.modal.tools.copyfeaturefromprojectlayer.title'),\n      className: 'modal-left',\n      closeButton: false,\n      message: comp.$mount().$el,\n      buttons: {\n        cancel: { label: 'Cancel', className: 'btn-danger', callback: function callback() {\n            reject();\n          }\n        },\n        ok: { label: 'Ok', className: 'btn-success', callback: function callback() {\n            resolve(feature[0]);\n          }\n        }\n      }\n    });\n\n    dialog.find('button.btn-success').prop('disabled', true);\n\n    comp.$watch('feature', function (feature) {\n      return dialog.find('button.btn-success').prop('disabled', null === feature);\n    });\n  });\n}\n\n},{\"../components/ChooseFeatureToEdit.vue\":3}],35:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cloneFeature = cloneFeature;\n/**\n * Clone a feature by Primary Key\n * \n * @param { Feature } feature  to be cloned\n * @param { TableLayer } layer from which obtain the primary key field\n * \n * @returns { Feature }\n * \n * @since g3w-client-plugin-editing@v3.7.0\n */\nfunction cloneFeature(feature, layer) {\n  var clone = feature.cloneNew();\n  //check if layer has a primary key as field\n  var pk = layer && layer.getEditingFields().find(function (f) {\n    return f.pk;\n  }); // get PK field (of value-relation widget?)\n  /**\n   * In case of layer has a primary key field and is not editabe,\n   *  clone feature need to set pk value to null to avoid conflict\n   *  with already pk field value store on server*/\n  if (pk && false === pk.editable) {\n    clone.set(pk.name, null);\n  }\n  return clone;\n}\n\n},{}],36:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.convertToGeometry = convertToGeometry;\n\nvar _isSameBaseGeometryType = require('../utils/isSameBaseGeometryType');\n\nvar convertSingleMultiGeometry = g3wsdk.core.geoutils.convertSingleMultiGeometry;\nvar _g3wsdk$core$geoutils = g3wsdk.core.geoutils.Geometry,\n    is3DGeometry = _g3wsdk$core$geoutils.is3DGeometry,\n    removeZValueToOLFeatureGeometry = _g3wsdk$core$geoutils.removeZValueToOLFeatureGeometry,\n    addZValueToOLFeatureGeometry = _g3wsdk$core$geoutils.addZValueToOLFeatureGeometry;\nvar isMultiGeometry = g3wsdk.core.geoutils.Geometry.isMultiGeometry;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param { Array }  features     to be converted (eg. Polygon)\n * @param { string } geometryType target geometry type (eg. MultiPolygon)\n *\n * @returns { Array } converted features\n */\n\nfunction convertToGeometry() {\n  var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var geometryType = arguments[1];\n\n  return (features || []).flatMap(function (f) {\n    var type = f.getGeometry() && f.getGeometry().getType();\n\n    // ensure 3D coords\n    if (type && !is3DGeometry(geometryType)) {\n      removeZValueToOLFeatureGeometry({ feature: f });\n    } else if (type && is3DGeometry(geometryType)) {\n      addZValueToOLFeatureGeometry({ feature: f, geometryType: geometryType });\n    }\n\n    // same geometry\n    if (geometryType === type) {\n      return f;\n    }\n\n    // convert single ‚Üí multi\n    if ((0, _isSameBaseGeometryType.isSameBaseGeometryType)(type, geometryType) && (isMultiGeometry(geometryType) || !isMultiGeometry(type))) {\n      var cloned = f.clone();\n      cloned.__layerId = f.__layerId;\n      cloned.setGeometry(convertSingleMultiGeometry(f.getGeometry(), geometryType));\n      return cloned;\n    }\n\n    // skip ‚Üí invalid conversion (eg. Point ‚Üí Polygon)\n    return [];\n  });\n}\n\n},{\"../utils/isSameBaseGeometryType\":56}],37:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createEditingDataOptions = createEditingDataOptions;\nvar GUI = g3wsdk.gui.GUI;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { 'all' | 'bbox' | 'field' | 'fid' | '1:1' } filterType\n * @param { Object } options\n * @param options.feature\n * @param options.relation\n * @param options.field\n * @param options.layerId\n * @param options.operator\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\n\nfunction createEditingDataOptions() {\n  var filterType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var filter = void 0;\n\n  switch (filterType) {\n\n    case 'all':\n      filter = undefined;\n      break;\n\n    case 'bbox':\n      filter = { bbox: GUI.getService('map').getMapBBOX() };\n      break;\n\n    case 'field':\n      filter = {\n        field: { field: options.field, type: 'editing' }\n      };\n      break;\n\n    case 'fid':\n      if ('not' !== options.operator) {\n        // get relations of current feature\n        filter = {\n          fid: {\n            fid: options.feature.getId(),\n            layer: { id: options.layerId },\n            type: 'editing',\n            relation: options.relation.state,\n            formatter: 0 // 0 = retrieve stored value\n          }\n        };\n      }\n      break;\n\n    // relation 1:1\n    case '1:1':\n      filter = {\n        field: options.relation.getChildField()[0] + '|eq|' + options.feature.get(options.relation.getFatherField()[0]),\n        type: 'editing'\n      };\n      break;\n\n  }\n\n  return {\n    registerEvents: true, // usefult to get register vent on toolbox example mapmoveend\n    editing: true,\n    filter: filter\n  };\n}\n\n},{}],38:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFeature = createFeature;\nvar Feature = g3wsdk.core.layer.features.Feature;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Create a new feature\n *\n * @param layerId\n * @param options.geometry.type\n * @param options.geometry.coordinates\n *\n * @returns { Feature }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\n\nfunction createFeature(layerId) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var feature = new Feature();\n\n  if (options.geometry) {\n    feature.setGeometry(new ol.geom[options.geometry.type](options.geometry.coordinates));\n  }\n\n  feature.setProperties(options.properties);\n  feature.setTemporaryId();\n\n  var toolbox = this.getToolBoxById(layerId);\n  var editingLayer = toolbox.getLayer().getEditingLayer();\n  var session = toolbox.getSession();\n\n  editingLayer.getSource().addFeature(feature);\n  session.pushAdd(layerId, feature, false);\n\n  return feature;\n}\n\n},{}],39:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dissolve = dissolve;\n/**\n * ORIGINAL SOURCE: g3w-client/src/utils/dissolve.js@v3.10.2\n * \n * @param { Object } opts \n * @param { Array } opts.features\n * @param { number } opts.index\n * @param { boolean } opts.clone\n * \n * @returns dissolved feature\n * \n * @since g3w-client-plugin-editing@v3.9.0\n */\nfunction dissolve() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$features = _ref.features,\n      features = _ref$features === undefined ? [] : _ref$features,\n      _ref$index = _ref.index,\n      index = _ref$index === undefined ? 0 : _ref$index,\n      _ref$clone = _ref.clone,\n      clone = _ref$clone === undefined ? false : _ref$clone;\n\n  var parser = new jsts.io.OL3Parser();\n  var featuresLength = features.length;\n\n  /** In case no features to dissolve  */\n  if (0 === featuresLength) {\n    return null;\n  }\n\n  /** In the case of single feature, return feature */\n  if (1 === featuresLength) {\n    return features[0];\n  }\n\n  var jstsdissolvedFeatureGeometry = void 0;\n\n  var baseFeature = clone ? features[index].clone() : features[index];\n  var baseFeatureGeometry = baseFeature.getGeometry();\n  var baseFeatureGeometryType = baseFeatureGeometry.getType();\n\n  // check if it can build a LineString\n  if ('LineString' === baseFeatureGeometryType) {\n    var lineMerger = new jsts.operation.linemerge.LineMerger();\n    for (var i = 0; i < featuresLength; i++) {\n      lineMerger.addLineString(new jsts.geom.GeometryFactory().createLineString(parser.read(features[i].getGeometry()).getCoordinates()));\n    }\n    var mergedLineString = lineMerger.getMergedLineStrings();\n    jstsdissolvedFeatureGeometry = 1 === mergedLineString.size() ? mergedLineString.toArray()[0] : null;\n  }\n\n  if ('LineString' !== baseFeatureGeometryType) {\n    jstsdissolvedFeatureGeometry = parser.read(baseFeatureGeometry);\n    for (var _i = 0; _i < featuresLength; _i++) {\n      if (index !== _i) {\n        jstsdissolvedFeatureGeometry = jstsdissolvedFeatureGeometry.union(parser.read(features[_i].getGeometry()));\n      }\n    }\n  }\n\n  /** In case of no dissolved geometry  */\n  if (!jstsdissolvedFeatureGeometry) {\n    return null;\n  }\n\n  var dissolvedFeatureGeometry = parser.write(jstsdissolvedFeatureGeometry);\n  var dissolvedFeatureGeometryType = dissolvedFeatureGeometry.getType();\n  var dissolvedFeatureGeometryCoordinates = dissolvedFeatureGeometryType === baseFeatureGeometryType ? dissolvedFeatureGeometry.getCoordinates() : -1 !== baseFeatureGeometryType.indexOf('Multi') && dissolvedFeatureGeometryType === baseFeatureGeometryType.replace('Multi', '') ? [dissolvedFeatureGeometry.getCoordinates()] : null;\n\n  /** In case of null feature dissolved coordinates  */\n  if (null === dissolvedFeatureGeometryCoordinates) {\n    return null;\n  }\n\n  baseFeature.getGeometry().setCoordinates(dissolvedFeatureGeometryCoordinates);\n\n  return baseFeature;\n}\n\n},{}],40:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.evaluateExpressionFields = undefined;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param expression.inputs.layer\n * @param expression.context.excludeFields\n * @param expression.context.get_default_value\n * @param expression.feature\n *\n * @returns {Promise<void>}\n *\n * @since g3w-client-plugin-editing@v3.5.14\n */\nvar evaluateExpressionFields = exports.evaluateExpressionFields = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        inputs = _ref2.inputs,\n        context = _ref2.context,\n        feature = _ref2.feature;\n\n    var promises = []; // promises from expression evaluation\n\n    inputs.layer.getFieldsWithValues(feature, {\n      exclude: context.excludeFields,\n      get_default_value: undefined !== context.get_default_value ? context.get_default_value : false\n    }).forEach(function (field) {\n\n      // default expression\n      if (field.input.options.default_expression && (field.input.options.default_expression.apply_on_update || feature.isNew())) {\n        promises.push(new Promise(function () {\n          var _ref3 = _asyncToGenerator(function* (resolve, reject) {\n            try {\n              yield g3wsdk.core.input.inputService.handleDefaultExpressionFormInput({\n                field: field,\n                feature: feature,\n                qgs_layer_id: inputs.layer.getId(),\n                parentData: (0, _getParentFormData.getParentFormData)()\n              });\n              feature.set(field.name, field.value);\n              resolve(feature);\n            } catch (e) {\n              console.warn(e);\n              reject(e);\n            }\n          });\n\n          return function (_x2, _x3) {\n            return _ref3.apply(this, arguments);\n          };\n        }()));\n      }\n\n      // filter expression\n      if (field.input.options.filter_expression) {\n        promises.push(new Promise(function () {\n          var _ref4 = _asyncToGenerator(function* (resolve, reject) {\n            try {\n              yield g3wsdk.core.input.inputService.handleFilterExpressionFormInput({\n                field: field,\n                feature: feature,\n                qgs_layer_id: inputs.layer.getId(),\n                parentData: (0, _getParentFormData.getParentFormData)()\n              });\n              feature.set(field.name, field.value);\n              resolve(feature);\n            } catch (e) {\n              console.warn(e);\n              reject(e);\n            }\n          });\n\n          return function (_x4, _x5) {\n            return _ref4.apply(this, arguments);\n          };\n        }()));\n      }\n    });\n\n    yield Promise.allSettled(promises);\n\n    return feature;\n  });\n\n  return function evaluateExpressionFields() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _getParentFormData = require('./getParentFormData');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n},{\"./getParentFormData\":47}],41:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDeltaXY = getDeltaXY;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/moveelementstask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/movelementsstep.js@v3.7.1\n *\n * @param { Object } delta\n * @param delta.x\n * @param delta.y\n * @param delta.coordinates\n * \n * @returns {{ x: number, y: number }}\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getDeltaXY() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      x = _ref.x,\n      y = _ref.y,\n      coordinates = _ref.coordinates;\n\n  var coords = _getCoordinates(coordinates);\n  return {\n    x: x - coords.x,\n    y: y - coords.y\n  };\n}\n\nfunction _getCoordinates(coords) {\n  return Array.isArray(coords[0]) ? _getCoordinates(coords[0]) : {\n    x: coords[0],\n    y: coords[1]\n  };\n}\n\n},{}],42:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEditingLayerById = getEditingLayerById;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getEditingLayerById(layerId) {\n  return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayerById(layerId);\n}\n\n},{}],43:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFeatureTableFieldValue = getFeatureTableFieldValue;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Finalize \"formatter\" value for any kind of field\n *\n * @param { string }   opts.layerId\n * @param {ol.Feature} opts.feature\n * @param { string }   opts.property\n *\n * @returns (field.key) or (field.value)\n *\n * @since g3w-client-plugin-editing@v3.7.0\n */\nfunction getFeatureTableFieldValue() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      feature = _ref.feature,\n      property = _ref.property;\n\n  // get editable fields\n  var fields = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayerById(layerId).config.editing.fields;\n\n  // get field value (raw)\n\n  var value = feature.get(property);\n\n  // get key-value fields implicated into: https://github.com/g3w-suite/g3w-client-plugin-editing/pull/64\n  var values = null !== value && (fields.filter(function (f) {\n    return ['select_autocomplete', 'select'].includes(f.input.type);\n  }) || []).reduce(function (kv, field) {\n    kv[field.name] = field.input.options.values;return kv;\n  }, {});\n\n  // get the last key-value feature add to\n  var kv_field = values && values[property] && values[property].find(function (kv) {\n    return value == kv.value;\n  });\n\n  // return key for key-values fields (raw field value otherwise)\n  return kv_field ? kv_field.key : value;\n}\n\n},{}],44:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFormFields = getFormFields;\n/** Sort an array of strings (alphabetical order) */\nvar sortAlphabeticallyArray = function sortAlphabeticallyArray(arr) {\n  return arr.sort(function (a, b) {\n    return a.localeCompare(b, undefined, { sensitivity: 'base' });\n  });\n};\n\n/* Sort an array of numbers (natural order) */\nvar sortNumericArray = function sortNumericArray(arr) {\n  var ascending = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return arr.sort(function (a, b) {\n    return ascending ? a - b : b - a;\n  });\n};\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Get form fields\n *\n * @param form.inputs.layer\n * @param form.inputs.features\n * @param form.context.excludeFields\n * @param form.context.get_default_value\n * @param form.isChild                   - whether is child form (ie. belongs to relation)\n * @param form.multi                     - in case of multi editing set all fields to null\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getFormFields() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      inputs = _ref.inputs,\n      context = _ref.context,\n      feature = _ref.feature,\n      multi = _ref.multi;\n\n  //editing service\n  var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n  // current form layerId// unique values by feature field\n  var layerId = inputs.layer.getId();\n\n  var fields = inputs.layer.getFieldsWithValues( // editing fields with values (in case of update)\n  feature, {\n    exclude: context.excludeFields, // add exclude fields\n    get_default_value: undefined === context.get_default_value ? false : context.get_default_value\n  });\n\n  //Loop through fields\n  var unique_values = fields\n  //check if field is a unique field. Exclude pk not edittable\n  .filter(function (f) {\n    return !(f.pk && false === f.editable) && ('unique' === f.input.type || f.validate.unique);\n  }).map(function (field) {\n    return {\n      field: field, // feature field\n      _value: feature.get(field.name) // feature current field value\n    };\n  });\n\n  //Loop through unique fields\n  unique_values.forEach(function (_ref2) {\n    var _value = _ref2._value,\n        field = _ref2.field;\n\n    //get current stored unique values for field\n    var current_values = service.state.uniqueFieldsValues[layerId][field.name] || new Set([]);\n    //filter null value otherwise sort function gets an error\n    var values = Array.from(current_values).filter(function (v) {\n      return null !== v;\n    });\n    //NEED TO ADD ALWAYS CURRENT VALUE\n    field.input.options.values = (['integer', 'float', 'bigint'].includes(field.type) ? sortNumericArray : sortAlphabeticallyArray)(values);\n    if (current_values.has(null)) {\n      field.input.options.values.unshift(null);\n    }\n\n    // convert \"current\" values to string (when not null or undefined)\n    current_values.forEach(function (v) {\n      return field.validate.exclude_values.add(![null, undefined].includes(v) ? '' + v : v);\n    });\n\n    // remove current value from exclude_values\n    field.validate.exclude_values.delete('' + _value);\n  });\n\n  // skip when no fields are unique in multi features change form attribute\n  if (0 === unique_values.length) {\n    return _handleMulti(fields, multi);\n  }\n\n  // Listen to event method after close/save form\n  var savedfeatureFnc = function savedfeatureFnc() {\n    unique_values.forEach(function (_ref3) {\n      var _value = _ref3._value,\n          field = _ref3.field;\n\n      // initial value is the same that current field vale (no changed)\n      if (_value === field.value) {\n        return;\n      }\n      //  layer form\n      if (service.state.uniqueFieldsValues[layerId][field.name]) {\n        // change layer unique field values\n        var values = service.state.uniqueFieldsValues[layerId][field.name];\n        //If changed, delete it from _value\n        values.delete(_value);\n        //aff new one to value list unique field\n        values.add(field.value);\n      }\n    });\n\n    return { once: true };\n  };\n\n  //event when insert/edit form button is pressed\n  service.subscribe('savedfeature_' + layerId, savedfeatureFnc);\n  //event when close form layer\n  service.subscribe('closeform_' + layerId, function () {\n    //unsubscribe event\n    service.unsubscribe('savedfeature_' + layerId, savedfeatureFnc);\n    return { once: true };\n  });\n\n  return _handleMulti(fields, multi);\n}\n\nfunction _handleMulti(fields, multi) {\n  if (multi) {\n    fields = fields.map(function (field) {\n      var f = JSON.parse(JSON.stringify(field));\n      f.value = null;\n      f._value = null; // @since v3.9.0 Fix update form field: Set the same value of value\n      f.forceNull = true;\n      f.validate.required = false; //set false because all features have already required field filled\n      return f;\n    }).filter(function (f) {\n      return !f.pk;\n    });\n  }\n\n  return fields;\n}\n\n},{}],45:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLayersDependencyFeatures = undefined;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { string } layerId\n * @param opts\n *\n * @returns { Promise<Awaited<unknown>[]> }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar getLayersDependencyFeatures = exports.getLayersDependencyFeatures = function () {\n  var _ref = _asyncToGenerator(function* (layerId) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n\n    var layer = service.getLayerById(layerId);\n    var relations = opts.relations || layer.getChildren().length && layer.getRelations() && (0, _getRelationsInEditing.getRelationsInEditing)({ layerId: layerId, relations: layer.getRelations().getArray().filter(function (r) {\n        return r.getFather() === layerId;\n      }) }) || [];\n\n    var response = void 0;\n\n    try {\n      response = yield Promise.all(relations.map(function () {\n        var _ref2 = _asyncToGenerator(function* (relation) {\n\n          if (relation.setLoading) {\n            relation.setLoading(true);\n          } else {\n            relation.loading = true;\n          }\n\n          var id = (0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation });\n\n          opts.relation = relation;\n          opts.layerId = layerId;\n          opts.filterType = 'ONE' === (relation.getType ? relation.getType() : relation.type) ? '1:1' : opts.filterType; // In a case of relation 1:1\n          var filterType = opts.filterType || 'fid';\n          var options = (0, _createEditingDataOptions.createEditingDataOptions)(filterType, opts);\n          var session = service.state.sessions[id];\n          var online = ApplicationState.online && session;\n          var toolbox = service.getToolBoxById(id);\n\n          // getLayersDependencyFeaturesFromSource\n\n          opts.operator = undefined !== opts.operator ? opts.operator : 'eq';\n\n          var _getRelationFieldsFro = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: id, relation: relation }),\n              ownField = _getRelationFieldsFro.ownField,\n              relationField = _getRelationFieldsFro.relationField;\n\n          var features = service.getLayerById(layerId).readEditingFeatures();\n          var featureValues = relationField.map(function (field) {\n            return opts.feature.get(field);\n          });\n\n          // try to get feature from source without a server request\n          var find = (!ApplicationState.online || !session || session.isStarted()) && 'eq' === opts.operator && ownField.every(function (field, i) {\n            return features.find(function (f) {\n              return featureValues[i] == f.get(field);\n            });\n          });\n\n          toolbox.startLoading();\n\n          try {\n            if (online && !session.isStarted()) {\n              yield (0, _promisify.promisify)(session.start(options)); // start session and get features\n            } else if (online && !find) {\n              yield (0, _promisify.promisify)(session.getFeatures(options)); // request features from server\n            }\n          } catch (promise) {\n            try {\n              yield (0, _promisify.promisify)(promise);\n            } catch (e) {\n              console.warn(e, promise);\n            }\n          }\n\n          toolbox.stopLoading();\n\n          return id;\n        });\n\n        return function (_x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }()));\n    } catch (e) {\n      console.warn(e);\n    }\n\n    // at the end se loading false\n    relations.forEach(function (relation) {\n      if (relation.setLoading) {\n        relation.setLoading(false);\n      } else {\n        relation.loading = false;\n      }\n    });\n\n    return response;\n  });\n\n  return function getLayersDependencyFeatures(_x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _promisify = require('../utils/promisify');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _getRelationId = require('../utils/getRelationId');\n\nvar _getRelationsInEditing = require('../utils/getRelationsInEditing');\n\nvar _createEditingDataOptions = require('../utils/createEditingDataOptions');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar ApplicationState = g3wsdk.core.ApplicationState;\n\n},{\"../utils/createEditingDataOptions\":37,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/getRelationId\":50,\"../utils/getRelationsInEditing\":51,\"../utils/promisify\":58}],46:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNotEditableFieldsNoPkValues = getNotEditableFieldsNoPkValues;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param layer,\n * @param feature\n *\n * @returns Array of fields\n */\nfunction getNotEditableFieldsNoPkValues(_ref) {\n  var layer = _ref.layer,\n      feature = _ref.feature;\n\n  return layer.getEditingNotEditableFields().reduce(function (fields, field) {\n    fields[field] = layer.isPkField(field) ? null : feature.get(field); // NB: Primary Key fields need to be `null`\n    return fields;\n  }, {});\n}\n\n},{}],47:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getParentFormData = getParentFormData;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @returns { undefined | { feature: * , qgs_layer_id: * } }\n */\nfunction getParentFormData() {\n  // skip when ..\n  if (!(_workflow.Workflow.Stack.getLength() > 1)) {\n    return;\n  }\n\n  var _Workflow$Stack$getPa = _workflow.Workflow.Stack.getParent().getInputs(),\n      features = _Workflow$Stack$getPa.features,\n      layer = _Workflow$Stack$getPa.layer,\n      _Workflow$Stack$getPa2 = _Workflow$Stack$getPa.fields,\n      fields = _Workflow$Stack$getPa2 === undefined ? [] : _Workflow$Stack$getPa2;\n\n  // in the case of temporary fields (setted by form) set temporary value to feature (cloned) parent\n\n\n  var feature = features[features.length - 1].clone();\n\n  fields.forEach(function (_ref) {\n    var name = _ref.name,\n        value = _ref.value;\n    feature.set(name, value);\n  });\n\n  return {\n    feature: feature,\n    qgs_layer_id: layer.getId()\n  };\n}\n\n},{\"../g3wsdk/workflow/workflow\":15}],48:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelation1_1ChildFeature = undefined;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param { Object } opts\n * @param opts.relation\n * @param opts.fatherFormRelationField\n * \n * @returns {Promise<{feature: *, locked: boolean}>}\n * \n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar getRelation1_1ChildFeature = exports.getRelation1_1ChildFeature = function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var relation = _ref.relation,\n        fatherFormRelationField = _ref.fatherFormRelationField;\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n    var fatherLayerId = relation.getFather();\n    var childLayerId = relation.getChild(); // get relation child layer id\n    var childField = relation.getChildField()[0];\n\n    // lock feature false\n    var locked = false;\n    var feature = service.getLayerById(childLayerId).getEditingSource().readFeatures().find(function (f) {\n      return fatherFormRelationField.value === f.get(childField);\n    });\n\n    //get feature from server and lock\n    if (undefined === feature) {\n\n      var childFeatureStore = service.getLayerById(childLayerId).getFeaturesStore();\n\n      var unByKey = childFeatureStore.oncebefore('featuresLockedByOtherUser', function (features) {\n        return feature = features[0];\n      });\n\n      yield (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(fatherLayerId, {\n        feature: new ol.Feature(_defineProperty({}, fatherFormRelationField.name, fatherFormRelationField.value)),\n        relations: [relation]\n      });\n\n      //remove listener\n      childFeatureStore.un('featuresLockedByOtherUser', unByKey);\n\n      //in case of no locked check feature on a source\n      if (undefined === feature) {\n\n        feature = service.getLayerById(childLayerId).getEditingSource().readFeatures().find(function (f) {\n          return fatherFormRelationField.value === f.get(childField);\n        });\n      }\n    }\n\n    //not find on source need to check if exist\n    if (undefined === feature) {\n\n      try {\n        var layer = CatalogLayersStoresRegistry.getLayerById(childLayerId);\n\n        var _ref4 = yield DataRouterService.getData('search:features', { // get feature of relation layer based on value of relation field\n          inputs: {\n            layer: layer,\n            formatter: 0,\n            filter: g3wsdk.core.utils.createFilterFormInputs({\n              layer: layer,\n              search_endpoint: 'api',\n              inputs: [{ attribute: childField, value: fatherFormRelationField.value }]\n            }),\n            search_endpoint: 'api'\n          },\n          outputs: false\n        }),\n            data = _ref4.data;\n\n        if (data && data[0] && 1 === data[0].features.length) {\n          // NB: length == 1, due to 1:1 relation type\n          //locked\n          locked = true;\n          feature = data[0].features[0];\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n\n    //return\n    return {\n      feature: feature, //feature search\n      locked: locked //locked status\n    };\n  });\n\n  return function getRelation1_1ChildFeature(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\n\n},{\"../utils/getLayersDependencyFeatures\":45}],49:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationFieldsFromRelation = getRelationFieldsFromRelation;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Based on layerId and relation, extract field of relation.\n * ownField are array of fields related to relation and belong to layerId\n * relationField area array of fields related to relation thar belong to other layer in relation with layerId\n * \n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relation\n *\n * @returns {{ ownField: [], relationField: [] }} `ownField` and `relationField` are Arrays since g3w-client-plugin-editing@v3.7.0\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationFieldsFromRelation() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      relation = _ref.relation;\n\n  /** @type { string } */\n  var childId = relation.getChild ? relation.getChild() : relation.child;\n  /** @type { Boolean } whether is a child */\n  var isChild = childId !== layerId;\n  /** @type { Array } of fields */\n  var _fatherField = relation.getFatherField ? relation.getFatherField() : relation.fatherField;\n  /** @type { Array } of fields */\n  var _childField = relation.getChildField ? relation.getChildField() : relation.childField;\n\n  return {\n    ownField: isChild ? _fatherField : _childField,\n    relationField: isChild ? _childField : _fatherField\n  };\n}\n\n},{}],50:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationId = getRelationId;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relation\n *\n * @returns the layer id of the other layer that is in relation with layerId\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationId() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      relation = _ref.relation;\n\n  var fatherId = relation.getFather ? relation.getFather() : relation.father;\n  var childId = relation.getChild ? relation.getChild() : relation.child;\n\n  return layerId === fatherId ? childId : fatherId;\n}\n\n},{}],51:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationsInEditing = getRelationsInEditing;\n\nvar _getRelationId = require('../utils/getRelationId');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relations\n *\n * @returns { Array }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationsInEditing(_ref) {\n  var layerId = _ref.layerId,\n      _ref$relations = _ref.relations,\n      relations = _ref$relations === undefined ? [] : _ref$relations;\n\n  return relations.filter(function (r) {\n    return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getToolBoxById((0, _getRelationId.getRelationId)({ layerId: layerId, relation: r }));\n  });\n}\n\n},{\"../utils/getRelationId\":50}],52:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationsInEditingByFeature = getRelationsInEditingByFeature;\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Get Relation in editing\n *\n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relations\n * @param opts.feature\n *\n * @returns { Array }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationsInEditingByFeature() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      _ref$relations = _ref.relations,\n      relations = _ref$relations === undefined ? [] : _ref$relations,\n      feature = _ref.feature;\n\n  var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n\n  var relationsinediting = [];\n  var relationinediting = void 0;\n  relations.forEach(function (relation) {\n    var child = relation.getChild ? relation.getChild() : relation.child;\n    var father = relation.getFatherField ? relation.getFatherField() : relation.fatherField;\n    var relationLayerId = child === layerId ? father : child; // get relation LayerId\n    //check if the layer is editable\n    if (service.getLayerById(relationLayerId)) {\n      var layer = service.getToolBoxById(relationLayerId).getLayer();\n      var fatherLayer = service.getLayerById(relation.getFather ? relation.getFather() : relation.father);\n\n      var _getRelationFieldsFro = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: relationLayerId, relation: relation }),\n          ownField = _getRelationFieldsFro.ownField,\n          relationField = _getRelationFieldsFro.relationField;\n      // get features of relation child layers\n      // Loop relation fields\n      // In case of new feature, need to check if field is pk field\n\n\n      var values = relationField.map(function (field) {\n        return feature.isNew() && fatherLayer.isPkField(field) ? feature.getId() : feature.get(field);\n      });\n\n      relationinediting = {\n        relation: relation.getState(),\n        // get relation attributes by feature\n        relations: service.getLayerById(relationLayerId).readEditingFeatures().filter(function (feature) {\n          return ownField.every(function (field, i) {\n            return feature.get(field) == values[i];\n          });\n        }) // get relations by feature\n        .map(function (relation) {\n          return {\n            fields: layer.getFieldsWithValues(relation, { relation: true }),\n            id: relation.getId(),\n            select: false /** @since v3.9.0 Used to set relation select or not **/\n          };\n        })\n      };\n      relationinediting.validate = { valid: true };\n      relationsinediting.push(relationinediting);\n    }\n  });\n  return relationsinediting;\n}\n\n},{\"../utils/getRelationFieldsFromRelation\":49}],53:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Handle layer relation 1:1 features related to feature\n *\n * @param opts.layerId Root layerId\n * @param opts.features Array of update/new features belong to Root layer\n * @param opts.fields Array of form fields father\n *\n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar handleRelation1_1LayerFields = exports.handleRelation1_1LayerFields = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        layerId = _ref2.layerId,\n        _ref2$features = _ref2.features,\n        features = _ref2$features === undefined ? [] : _ref2$features,\n        _ref2$fields = _ref2.fields,\n        fields = _ref2$fields === undefined ? [] : _ref2$fields,\n        task = _ref2.task;\n\n    // skip when no features\n    if (features.length === 0) {\n      return;\n    }\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n\n    // Get layer relation 1:1\n    var promises = CatalogLayersStoresRegistry.getLayerById(layerId).getRelations().getArray().filter(function (relation) {\n      return 'ONE' === relation.getType();\n    }).map(function (relation) {\n      return new Promise(function () {\n        var _ref3 = _asyncToGenerator(function* (resolve) {\n          // skip when layer is not a father layer (1:1 relation)\n          if (layerId !== relation.getFather()) {\n            resolve();\n            return;\n          }\n          var fatherField = relation.getFatherField()[0];\n          var value = features[0].get(fatherField);\n\n          //no set father field value. No set\n          if (null === value) {\n            resolve();\n            return;\n          }\n\n          // check if child relation layer is editable (in editing)\n          var childLayerId = relation.getChild();\n          var childField = relation.getChildField()[0];\n          var source = service.getLayerById(childLayerId).getEditingSource();\n          var childFeature = void 0; // original child feature\n          var newChild = void 0; //eventually child feature cloned with changes\n\n          //check if child feature is already added to\n          childFeature = source.readFeatures().find(function (f) {\n            return f.get(childField) === value;\n          });\n\n          var fieldsUpdated = undefined !== service.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n            return f.vectorjoin_id && f.vectorjoin_id === relation.getId();\n          }).find(function (_ref4) {\n            var name = _ref4.name;\n            return fields.find(function (f) {\n              return name == f.name;\n            }).update;\n          });\n\n          var isNewChildFeature = undefined === childFeature;\n\n          //check if fields related to child are changed\n          if (fieldsUpdated) {\n            //Check if we need to create a new child feature\n            if (isNewChildFeature) {\n              //create feature for child layer\n              childFeature = new g3wsdk.core.layer.features.Feature();\n              childFeature.setTemporaryId();\n              // set name attribute to `null`\n              CatalogLayersStoresRegistry.getLayerById(childLayerId).getEditingFields().forEach(function (field) {\n                return childFeature.set(field.name, null);\n              });\n              //set father field value\n              childFeature.set(childField, fields.find(function (f) {\n                return fatherField === f.name;\n              }).value);\n              //add feature to a child source\n              source.addFeature(childFeature);\n              //new feature and child feature are the same\n              newChild = childFeature;\n            } else {\n              //is update\n              if (childFeature) {\n                //clone child Feature so all changes apply by father is set to clone new feature\n                newChild = childFeature.clone();\n              }\n            }\n\n            //check if there is a childFeature to save\n            if (childFeature) {\n              // Loop editable only field of father layerId when\n              // a child relation (1:1) is bind to the current feature\n              var editiableRelatedFieldChild = service.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n                return f.vectorjoin_id && f.vectorjoin_id === relation.getId() && f.editable;\n              });\n\n              editiableRelatedFieldChild.forEach(function (field) {\n                return newChild.set(field.name.replace(relation.getPrefix(), ''), features[0].get(field.name));\n              });\n\n              // add relation new relation\n              if (isNewChildFeature) {\n\n                // check if father field is a Pk (Primary key) if feature is new\n                if (service.getLayerById(layerId).isPkField(fatherField)) {\n                  childFeature.set(childField, features[0].getId()); // set temporary\n                }\n\n                //if new need to add to session\n                task.getContext().session.pushAdd(childLayerId, newChild, false);\n              } else {\n                //need to update source child feature\n                source.updateFeature(newChild);\n                //need to update\n                task.getContext().session.pushUpdate(childLayerId, newChild, childFeature);\n              }\n            }\n          }\n\n          resolve();\n        });\n\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    });\n\n    yield Promise.allSettled(promises);\n  });\n\n  return function handleRelation1_1LayerFields() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{}],54:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleSplitFeature = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/splitfeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/splitfeaturestep.js@v3.7.1\n *\n * @param feature\n * @param inputs\n * @param context\n * @param splittedGeometries\n * \n * @returns {Promise<*[]>}\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar handleSplitFeature = exports.handleSplitFeature = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        feature = _ref2.feature,\n        inputs = _ref2.inputs,\n        context = _ref2.context,\n        _ref2$splittedGeometr = _ref2.splittedGeometries,\n        splittedGeometries = _ref2$splittedGeometr === undefined ? [] : _ref2$splittedGeometr;\n\n    var newFeatures = [];\n    var layer = inputs.layer;\n\n    var session = context.session;\n    var source = layer.getEditingLayer().getSource();\n    var layerId = layer.getId();\n    var oriFeature = feature.clone();\n    inputs.features = splittedGeometries.length ? [] : inputs.features;\n    var splittedGeometriesLength = splittedGeometries.length;\n\n    for (var index = 0; index < splittedGeometriesLength; index++) {\n      var splittedGeometry = splittedGeometries[index];\n      if (0 === index) {\n        /**\n         * check geometry evaluated expression\n         */\n        feature.setGeometry(splittedGeometry);\n        try {\n          yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature });\n        } catch (e) {\n          console.warn(e);\n        }\n\n        session.pushUpdate(layerId, feature, oriFeature);\n      } else {\n        yield* function* () {\n          var newFeature = (0, _cloneFeature.cloneFeature)(oriFeature, layer);\n          newFeature.setGeometry(splittedGeometry);\n\n          // set media fields to null\n          layer.getEditingMediaFields({}).forEach(function (f) {\n            return newFeature.set(f, null);\n          });\n\n          feature = new Feature({ feature: newFeature });\n\n          feature.setTemporaryId();\n\n          // evaluate geometry expression\n          try {\n            yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature });\n          } catch (e) {\n            console.warn(e);\n          }\n\n          /**\n           * @todo improve client core to handle this situation on sesssion.pushAdd not copy pk field not editable only\n           */\n          var noteditablefieldsvalues = (0, _getNotEditableFieldsNoPkValues.getNotEditableFieldsNoPkValues)({ layer: layer, feature: feature });\n\n          if (Object.entries(noteditablefieldsvalues).length) {\n            var _newFeature = session.pushAdd(layerId, feature);\n            Object.entries(noteditablefieldsvalues).forEach(function (_ref3) {\n              var _ref4 = _slicedToArray(_ref3, 2),\n                  field = _ref4[0],\n                  value = _ref4[1];\n\n              return _newFeature.set(field, value);\n            });\n            newFeatures.push(_newFeature);\n            //need to add features with no editable fields on layers source\n            source.addFeature(_newFeature);\n          } else {\n            newFeatures.push(session.pushAdd(layerId, feature));\n            //add feature to source\n            source.addFeature(feature);\n          }\n        }();\n      }\n      inputs.features.push(feature);\n    }\n\n    return newFeatures;\n  });\n\n  return function handleSplitFeature() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _cloneFeature = require('../utils/cloneFeature');\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _getNotEditableFieldsNoPkValues = require('../utils/getNotEditableFieldsNoPkValues');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar Feature = g3wsdk.core.layer.features.Feature;\n\n},{\"../utils/cloneFeature\":35,\"../utils/evaluateExpressionFields\":40,\"../utils/getNotEditableFieldsNoPkValues\":46}],55:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isPointOnVertex = isPointOnVertex;\n/**\n * @param feature\n * @param coordinates\n *\n * @returns { boolean }\n */\nfunction isPointOnVertex(_ref) {\n  var feature = _ref.feature,\n      coordinates = _ref.coordinates;\n\n  var geometry = feature.getGeometry();\n  var type = geometry.getType();\n  var coords = function coords(c) {\n    return g3wsdk.core.geoutils.areCoordinatesEqual(coordinates, c);\n  }; // whether element have same coordinates\n\n  switch (type) {\n    case 'Polygon':\n    case 'MultiLineString':\n      return _.flatMap(geometry.getCoordinates()).some(coords);\n\n    case 'LineString':\n    case 'MultiPoint':\n      return geometry.getCoordinates().some(coords);\n\n    case 'MultiPolygon':\n      return geometry.getPolygons().some(function (poly) {\n        return _.flatMap(poly.getCoordinates()).some(coords);\n      });\n\n    case 'Point':\n      return g3wsdk.core.geoutils.areCoordinatesEqual(coordinates, geometry.getCoordinates());\n\n    default:\n      return false;\n  }\n}\n\n},{}],56:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isSameBaseGeometryType = isSameBaseGeometryType;\n/**\n * ORIGINAL SOURCE: g3w-client/src/utils/isSameBaseGeometryType.js@v3.10.2\n * \n * @param { string } geometryType1\n * @param { string } geometryType2\n *  \n * @returns { boolean } whether two geometry typeshave same geometry type or have in common tha same base geometry type:\n * \n * @example Compare \n * ```\n *  Point      <--> Point   => true\n *  MultiPoint <--> Point   => true\n *  Point      <--> Polygon => false\n * ```\n * \n * @since g3w-client-plugin-editing@v3.9.0\n */\nfunction isSameBaseGeometryType(a, b) {\n  return a.replace('Multi', '') === b.replace('Multi', '');\n}\n\n},{}],57:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.listenRelation1_1FieldChange = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Listen changes on 1:1 relation fields (get child values from child layer)\n *\n * @param opts.layerId Current editing layer id\n * @param opts.fields Array of form fields of current editing layer\n *\n * @returns Array of watch function event to remove listen\n *\n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar listenRelation1_1FieldChange = exports.listenRelation1_1FieldChange = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        layerId = _ref2.layerId,\n        _ref2$fields = _ref2.fields,\n        fields = _ref2$fields === undefined ? [] : _ref2$fields;\n\n    var unwatches = []; // unwatches field value (event change)\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n\n    var ONE = CatalogLayersStoresRegistry.getLayerById(layerId).getRelations().getArray().filter(function (r) {\n      return 'ONE' === r.getType();\n    });\n\n    // get all relations 1:1 of current layer\n\n    var _loop = function* _loop(relation) {\n\n      var childLayerId = relation.getChild(); // get relation child layer id\n      var fatherField = relation.getFatherField();\n      var relationLockFeatures = {}; //store value\n\n      // NB:\n      // need to check if editable when opening form task\n      // Not set this condition because maybe i ca be used this method\n      // on a move task or other when current fatherFormRelationField, related to 1:1 relation\n      // it can be changed by default expression or in another way not only with form\n      var fatherFormRelationField = fields.find(function (f) {\n        return fatherField.includes(f.name);\n      }); // get father layer field (for each relation)\n      // skip when not relation field and not layer child is in editing\n      if (!(fatherFormRelationField && service.getLayerById(childLayerId))) {\n        return {\n          v: void 0\n        };\n      }\n\n      //store original editable property of fields relation to child layer relation\n      var editableRelatedFatherChild = service.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n        return f.vectorjoin_id && f.vectorjoin_id === relation.getId();\n      }).reduce(function (accumulator, field) {\n        var formField = fields.find(function (f) {\n          return f.name === field.name;\n        });\n        accumulator[formField.name] = formField.editable;\n        return accumulator;\n      }, {});\n\n      fatherFormRelationField.input.options.loading.state = 'loading'; // show input bar loader\n\n      //get feature from a child layer source\n      relationLockFeatures[fatherFormRelationField.value] = yield (0, _getRelation1_1ChildFeature.getRelation1_1ChildFeature)({\n        relation: relation,\n        fatherFormRelationField: fatherFormRelationField\n      });\n\n      fatherFormRelationField.input.options.loading.state = null; // show input bar loader\n\n      //if locked need to set editable to false\n      //can update child\n      if (relationLockFeatures[fatherFormRelationField.value].locked) {\n        Object.keys(editableRelatedFatherChild).forEach(function (fn) {\n          return fields.find(function (f) {\n            return fn === f.name;\n          }).editable = false;\n        });\n      }\n\n      //if not feature is on source child layer, it means it locked or not exist on a server need to check\n\n      // listen for relation field changes (vue watcher)\n      unwatches.push(_eventbus.VM.$watch(function () {\n        return fatherFormRelationField.value;\n      }, function () {\n        var _ref3 = _asyncToGenerator(function* (value) {\n\n          // skip empty values\n          if (!value) {\n            fatherFormRelationField.input.options.loading.state = null;\n            fatherFormRelationField.editable = true;\n            return;\n          }\n\n          fatherFormRelationField.editable = false; // disable edit\n          fatherFormRelationField.input.options.loading.state = 'loading'; // show input bar loader\n\n          if (undefined === relationLockFeatures[fatherFormRelationField.value]) {\n            //get feature from a child layer source\n            try {\n\n              relationLockFeatures[fatherFormRelationField.value] = yield (0, _getRelation1_1ChildFeature.getRelation1_1ChildFeature)({\n                relation: relation,\n                fatherFormRelationField: fatherFormRelationField\n              });\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n\n          var _relationLockFeatures = relationLockFeatures[fatherFormRelationField.value],\n              feature = _relationLockFeatures.feature,\n              locked = _relationLockFeatures.locked;\n\n\n          Object.keys(editableRelatedFatherChild).forEach(function (fn) {\n            var field = fields.find(function (f) {\n              return fn === f.name;\n            });\n            //set editable property\n            field.editable = locked ? false : editableRelatedFatherChild[fn];\n            //need to check if feature is new and not locked ot not present on a source\n            field.value = feature ? feature.get(field.name.replace(relation.getPrefix(), '')) : null;\n          });\n\n          // reset edit state\n          fatherFormRelationField.input.options.loading.state = null;\n          fatherFormRelationField.editable = true;\n        });\n\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }()));\n    };\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = ONE[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var relation = _step.value;\n\n        var _ret = yield* _loop(relation);\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return unwatches;\n  });\n\n  return function listenRelation1_1FieldChange() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _eventbus = require('../eventbus');\n\nvar _getRelation1_1ChildFeature = require('./getRelation1_1ChildFeature');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{\"../eventbus\":11,\"./getRelation1_1ChildFeature\":48}],58:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.promisify = promisify;\nexports.$promisify = $promisify;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * Migrate your consumer code away from jQuery promises.\n * Covert a jQuery promise into an ES6 Promise\n *\n * @param promise jquery promise\n */\nfunction promisify(promise) {\n  if (promise instanceof Promise) {\n    return promise;\n  }\n  if (!promise || !promise.then) {\n    console.trace(promise);\n    return Promise.reject('not a promise');\n  }\n  return new Promise(function (resolve, reject) {\n    promise.then(resolve).fail(reject);\n  });\n}\n\n/**\n * Migrate your consumer code away from jQuery promises.\n * Convert ES6 Promise into jQuery\n *\n * @param promise async function or ES6 promise\n */\nfunction $promisify(promise) {\n  if (undefined === promise) {\n    console.trace();\n    return $.Deferred(function (d) {\n      return d.reject('not a promise');\n    }).promise();\n  }\n  if (promise.always) {\n    return promise;\n  }\n  return $.Deferred(function () {\n    var _ref = _asyncToGenerator(function* (d) {\n      try {\n        d.resolve((yield promise instanceof Promise ? promise : promise()));\n      } catch (e) {\n        console.warn(e);d.reject(e);\n      }\n    });\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }()).promise();\n}\n\n},{}],59:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAndUnsetSelectedFeaturesStyle = setAndUnsetSelectedFeaturesStyle;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _promisify = require('../utils/promisify');\n\nvar _setFeaturesSelectedStyle = require('../utils/setFeaturesSelectedStyle');\n\nvar Layer = g3wsdk.core.layer.Layer;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Method that set selected style to current editing features and\n * reset original style when workflow (tool) is done.\n * \n * @param promise jQuery promise\n * @param { Object } inputs\n * @param { ol.style.Style }  style\n */\n\nfunction setAndUnsetSelectedFeaturesStyle() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      promise = _ref.promise,\n      inputs = _ref.inputs,\n      style = _ref.style;\n\n  /** @FIXME temporary add in order to fix issue on pending promise (but which issue ?) */\n  var layer = inputs.layer,\n      _inputs$features = inputs.features,\n      features = _inputs$features === undefined ? [] : _inputs$features;\n\n  /**\n   * @TODO if coming from relation ( Workflow.Stack.getLength() > 1 )\n   *       no need setTimeout because we already it has selected style\n   *       so original is the same selected. In case of current layer\n   *       need to wait.\n   */\n\n  var selectOriginalStyleHandle = function selectOriginalStyleHandle() {\n    var originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(features, style);\n    (0, _promisify.promisify)(promise).finally(function () {\n      features.flat().forEach(function (f) {\n        return f.setStyle(originalStyle);\n      });\n    });\n  };\n\n  var is_vector = Layer.LayerTypes.VECTOR === layer.getType();\n  var is_single = _workflow.Workflow.Stack.getLength();\n\n  if (is_vector && is_single) {\n    setTimeout(function () {\n      return selectOriginalStyleHandle();\n    });\n  } else if (is_vector) {\n    selectOriginalStyleHandle();\n  }\n}\n\n},{\"../g3wsdk/workflow/workflow\":15,\"../utils/promisify\":58,\"../utils/setFeaturesSelectedStyle\":60}],60:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setFeaturesSelectedStyle = setFeaturesSelectedStyle;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Get selected style from \"extracted\" original feature style  \n * \n * @param feature\n * \n * @returns {{ originalStyle: *, selectedStyle: * }} selected style based on a geometry type\n */\nfunction getSelectedStyle(feature) {\n  return {\n    originalStyle: feature.getStyle(),\n    selectedStyle: feature.getGeometry() ? g3wsdk.core.geoutils.createSelectedStyle({ geometryType: feature.getGeometry().getType() }) : feature.getStyle()\n  };\n}\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Set selected style to feature and return original feature style\n * \n * @param { Array } features\n * @param { ol.style.Style } style  @since 3.8.0 custom select style\n * \n * @returns { ol.style.Style }\n */\nfunction setFeaturesSelectedStyle() {\n  var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var style = arguments[1];\n\n  if (features.length > 0) {\n    // copy feature from other layers when selecting multiple features\n    var arr = features.flat(); // flat nested features\n\n    var _getSelectedStyle = getSelectedStyle(arr[0]),\n        originalStyle = _getSelectedStyle.originalStyle,\n        selectedStyle = _getSelectedStyle.selectedStyle;\n\n    arr.forEach(function (f) {\n      return f.setStyle(style || selectedStyle);\n    });\n\n    return originalStyle;\n  }\n}\n\n},{}],61:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * Method to get unique values of unique input values from server\n * It's called\n * - When toolbox start (parent layer and relation)\n * - After commit to server (to get fresh new data)\n * \n * @param { string } layerId\n *\n * @returns { Promise<*> }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar setLayerUniqueFieldValues = exports.setLayerUniqueFieldValues = function () {\n  var _ref = _asyncToGenerator(function* (layerId) {\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n    yield new Promise(function (resolve, reject) {\n      var layer = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayerById(layerId);\n      //get all values for unique field\n      layer.getWidgetData({\n        type: 'unique',\n        fields: Object.values(layer.getEditingFields()\n        //filter field that is unique and not yet set unique values\n        .filter(function (f) {\n          return !(f.pk && false === f.editable) && ('unique' === f.input.type || f.validate.unique);\n        })).map(function (f) {\n          return f.name;\n        }).join()\n      }).then(function (response) {\n        Object.entries(response.data || {}).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              name = _ref3[0],\n              values = _ref3[1];\n\n          service.state.uniqueFieldsValues[layerId][name] = new Set(values);\n        });\n\n        resolve(service.state.uniqueFieldsValues[layerId][name]);\n      }).fail(function (e) {\n        console.warn(e);reject(e);\n      });\n    });\n    return service.state.uniqueFieldsValues[layerId];\n  });\n\n  return function setLayerUniqueFieldValues(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{}],62:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.splitFeatures = splitFeatures;\nvar splitFeature = g3wsdk.core.geoutils.splitFeature;\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/utils/splitFeatures.js@v3.10.2\n * \n * @param { Object } opts\n * @param { Array } opts.features\n * @param opts.splitfeature\n * \n * @returns { Array } splittered geometries\n * \n * @since g3w-client-plugin-editing@v3.9.0\n */\n\nfunction splitFeatures(features, splitfeature) {\n  return (features || []).reduce(function (a, f) {\n    var geometries = splitFeature({ splitfeature: splitfeature, feature: f });\n    if (geometries.length > 1) {\n      a.push({ uid: f.getUid(), geometries: geometries });\n    }\n    return a;\n  }, []);\n}\n\n},{}],63:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unlinkRelation = unlinkRelation;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _updateWorkflows = require('./updateWorkflows');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _promisify = require('../utils/promisify');\n\nvar GUI = g3wsdk.gui.GUI;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/relationservice.js@v3.7.1\n * \n * Unlink relation\n * @param layerId\n * @param relation\n * @param relations\n * @param index\n * @param dialog\n * \n * @returns JQuery Promise\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\n\nfunction unlinkRelation(_ref) {\n  var layerId = _ref.layerId,\n      relation = _ref.relation,\n      relations = _ref.relations,\n      index = _ref.index,\n      _ref$dialog = _ref.dialog,\n      dialog = _ref$dialog === undefined ? true : _ref$dialog;\n\n  return (0, _promisify.$promisify)(new Promise(function (resolve) {\n    var unlink = function unlink() {\n      var id = layerId === relation.child ? relation.father : relation.child; // relation layer id\n      var feature = (0, _getEditingLayerById.getEditingLayerById)(id).getEditingSource().getFeatureById(relations[index].id);\n      var originalRelation = feature.clone();\n      // loop on ownField (Array field child relation)\n      (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ relation: relation, layerId: id }).ownField.forEach(function (f) {\n        return feature.set(f, null);\n      });\n      _workflow.Workflow.Stack.getCurrent().getSession().pushUpdate(id, feature, originalRelation);\n      relations.splice(index, 1);\n      (0, _updateWorkflows.updateWorkflows)();\n      resolve(true);\n    };\n    if (dialog) {\n      GUI.dialog.confirm(tPlugin(\"editing.messages.unlink_relation\"), function (result) {\n        return result ? unlink() : d.reject(false);\n      });\n    } else {\n      unlink();\n    }\n  }));\n}\n\n},{\"../g3wsdk/workflow/workflow\":15,\"../utils/getEditingLayerById\":42,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/promisify\":58,\"./updateWorkflows\":64}],64:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateWorkflows = updateWorkflows;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/relationservice.js@v3.7.1\n * \n * force parent workflow form service\n * update only when workflow has service (form service)\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction updateWorkflows() {\n  _workflow.Workflow.Stack._workflows.filter(function (w) {\n    return w.getContextService();\n  }).forEach(function (w) {\n    return w.getContextService().setUpdate(true, { force: true });\n  });\n}\n\n},{\"../g3wsdk/workflow/workflow\":15}],65:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectElementsStep = exports.PickFeatureStep = exports.OpenTableStep = exports.OpenFormStep = exports.MoveFeatureStep = exports.ModifyGeometryVertexStep = exports.AddFeatureStep = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _getParentFormData = require('../utils/getParentFormData');\n\nvar _setFeaturesSelectedStyle = require('../utils/setFeaturesSelectedStyle');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('../utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _getFormFields = require('../utils/getFormFields');\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _handleRelation1_1LayerFields = require('../utils/handleRelation1_1LayerFields');\n\nvar _listenRelation1_1FieldChange = require('../utils/listenRelation1_1FieldChange');\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _setLayerUniqueFieldValues = require('../utils/setLayerUniqueFieldValues');\n\nvar _getRelationsInEditingByFeature = require('../utils/getRelationsInEditingByFeature');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nvar _addRemoveToMultipleSelectFeatures = require('../utils/addRemoveToMultipleSelectFeatures');\n\nvar _promisify = require('../utils/promisify');\n\nvar _isSameBaseGeometryType = require('../utils/isSameBaseGeometryType');\n\nvar _pickfeaturesinteraction = require('../interactions/pickfeaturesinteraction');\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _step = require('../g3wsdk/workflow/step');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _g3wsdk$core = g3wsdk.core,\n    G3WObject = _g3wsdk$core.G3WObject,\n    ApplicationState = _g3wsdk$core.ApplicationState;\nvar Geometry = g3wsdk.core.geoutils.Geometry;\nvar convertSingleMultiGeometry = g3wsdk.core.geoutils.convertSingleMultiGeometry;\nvar removeZValueToOLFeatureGeometry = g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry;\nvar Layer = g3wsdk.core.layer.Layer;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar GUI = g3wsdk.gui.GUI;\nvar Component = g3wsdk.gui.vue.Component;\nvar FormService = g3wsdk.gui.vue.services.FormService;\nvar _g3wsdk$ol$interactio = g3wsdk.ol.interactions.measure,\n    AreaInteraction = _g3wsdk$ol$interactio.AreaInteraction,\n    LengthInteraction = _g3wsdk$ol$interactio.LengthInteraction;\nvar _g3wsdk$ol$utils = g3wsdk.ol.utils,\n    createMeasureTooltip = _g3wsdk$ol$utils.createMeasureTooltip,\n    removeMeasureTooltip = _g3wsdk$ol$utils.removeMeasureTooltip;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addfeaturestep.js@v3.7.1\n */\n\nvar AddFeatureStep = exports.AddFeatureStep = function (_Step) {\n  _inherits(AddFeatureStep, _Step);\n\n  function AddFeatureStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AddFeatureStep);\n\n    options.help = \"editing.steps.help.draw_new_feature\";\n\n    var _this = _possibleConstructorReturn(this, (AddFeatureStep.__proto__ || Object.getPrototypeOf(AddFeatureStep)).call(this, options));\n\n    _this._add = undefined === options.add ? true : options.add;\n\n    _this.drawInteraction;\n\n    _this.measeureInteraction;\n\n    _this.drawingFeature;\n\n    _this._snap = false === options.snap ? false : true;\n\n    /**\n     * Handle tasks that stops after `run(inputs, context)` promise (or if ESC key is pressed)\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this._stopPromise;\n\n    /**\n     *\n     * @param e event\n     * @returns {boolean|void}\n     * @private\n     * callback of pressing esc to remove last point drawed\n     */\n    _this._delKeyRemoveLastPoint = function (e) {\n      return 46 === e.keyCode && _this.removeLastPoint();\n    };\n\n    return _this;\n  }\n\n  _createClass(AddFeatureStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this2 = this;\n\n      return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n        //create promise to listen to pass to setAndUnsetSelectedFeaturesStyle\n        var promise = new Promise(function (r) {\n          return _this2.resolve = r;\n        });\n\n        var layerId = inputs.layer.getId();\n\n        // Skip when a layer type is vector\n        if (Layer.LayerTypes.VECTOR !== inputs.layer.getType()) {\n          return;\n        }\n\n        /** @since g3w-client-plugin-editing@v3.8.0 */\n        (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(promise), inputs: inputs, style: _this2.selectStyle });\n\n        var originalGeometryType = inputs.layer.getEditingGeometryType();\n\n        _this2.geometryType = Geometry.getOLGeometry(originalGeometryType);\n\n        var source = inputs.layer.getEditingLayer().getSource();\n        var attributes = inputs.layer.getEditingFields();\n\n        _this2.drawInteraction = _this2.addInteraction(new ol.interaction.Draw({\n          type: _this2.geometryType,\n          source: new ol.source.Vector(),\n          condition: _this2._options.condition || function () {\n            return true;\n          },\n          freehandCondition: ol.events.condition.never,\n          finishCondition: _this2._options.finishCondition || function () {\n            return true;\n          }\n        }), {\n          'drawstart': function drawstart(_ref) {\n            var feature = _ref.feature;\n\n            _this2.drawingFeature = feature;\n            document.addEventListener('keydown', _this2._delKeyRemoveLastPoint);\n          },\n          'drawend': function drawend(e) {\n            var feature = void 0;\n            if (_this2._add) {\n              attributes.forEach(function (attr) {\n                return e.feature.set(attr.name, null);\n              });\n              feature = new Feature({ feature: e.feature });\n              feature.setTemporaryId();\n              source.addFeature(feature);\n              context.session.pushAdd(layerId, feature, false);\n            } else {\n              feature = e.feature;\n            }\n            // set Z values based on layer Geometry\n            if (Geometry.is3DGeometry(originalGeometryType)) {\n              feature = Geometry.addZValueToOLFeatureGeometry({ feature: feature, geometryType: originalGeometryType });\n            }\n\n            inputs.features.push(feature);\n            _this2.getContext().get_default_value = true;\n            _this2.fireEvent('addfeature', feature); // emit event to get from subscribers\n            resolve(inputs);\n          }\n        });\n\n        _this2.drawInteraction.setActive(true);\n      }));\n    }\n\n    /**\n     * Method to add Measure\n     */\n\n  }, {\n    key: 'addMeasureInteraction',\n    value: function addMeasureInteraction() {\n      var is_line = Geometry.isLineGeometryType(this.geometryType);\n      var is_poly = Geometry.isPolygonGeometryType(this.geometryType);\n\n      //Skip in case geometry is not Line or Polygon\n      if (!is_line && !is_poly) {\n        return;\n      }\n\n      this.measureInteraction = this.addInteraction(new (is_line ? LengthInteraction : AreaInteraction)({\n        projection: GUI.getService('map').getProjection(),\n        drawColor: 'transparent',\n        feature: this.drawingFeature\n      }));\n\n      this.measureInteraction.setActive(true);\n    }\n\n    /**\n     * Remove Measure Interaction\n     */\n\n  }, {\n    key: 'removeMeasureInteraction',\n    value: function removeMeasureInteraction() {\n      if (this.measureInteraction) {\n        this.measureInteraction.clear();\n        this.removeInteraction(this.measureInteraction);\n        this.measureInteraction = null;\n      }\n    }\n\n    /**\n     * Removed last point/vertex draw\n     */\n\n  }, {\n    key: 'removeLastPoint',\n    value: function removeLastPoint() {\n      try {\n        if (this.drawInteraction) {\n          this.drawInteraction.removeLastPoint();\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.removeInteraction(this.drawInteraction);\n      this.removeMeasureInteraction();\n      this.resolve(true);\n\n      this.drawInteraction = null;\n      this.drawingFeature = null;\n      this.resolve = null;\n\n      document.removeEventListener('keydown', this._delKeyRemoveLastPoint);\n\n      return true;\n    }\n  }]);\n\n  return AddFeatureStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/modifygeometryvertextask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/modifygeometryvertexstep.js@v3.7.1\n */\n\n\nvar ModifyGeometryVertexStep = exports.ModifyGeometryVertexStep = function (_Step2) {\n  _inherits(ModifyGeometryVertexStep, _Step2);\n\n  function ModifyGeometryVertexStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ModifyGeometryVertexStep);\n\n    options.snap = undefined !== options.snap ? options.snap : true;\n    options.help = \"editing.steps.help.edit_feature_vertex\";\n\n    var _this3 = _possibleConstructorReturn(this, (ModifyGeometryVertexStep.__proto__ || Object.getPrototypeOf(ModifyGeometryVertexStep)).call(this, options));\n\n    _this3._originalStyle = null;\n\n    _this3._feature = null;\n\n    _this3.tooltip;\n    return _this3;\n  }\n\n  _createClass(ModifyGeometryVertexStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this4 = this;\n\n      var newFeature = void 0,\n          originalFeature = void 0;\n      return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n        var layerId = inputs.layer.getId();\n        var feature = _this4._feature = inputs.features[0];\n        _this4._originalStyle = inputs.layer.getEditingLayer().getStyle();\n        feature.setStyle(function () {\n          return [new ol.style.Style({\n            image: new ol.style.Circle({ radius: 5, fill: null, stroke: new ol.style.Stroke({ color: 'orange', width: 2 }) }),\n            geometry: function geometry(feature) {\n              return new ol.geom.MultiPoint( // in the case of multipolygon geometry\n              Geometry.isPolygonGeometryType(inputs.layer.getGeometryType()) && Geometry.isMultiGeometry(inputs.layer.getGeometryType()) ? feature.getGeometry().getCoordinates()[0][0] : feature.getGeometry().getCoordinates()[0]);\n            }\n          }), new ol.style.Style({ stroke: new ol.style.Stroke({ color: 'yellow', width: 4 }) })];\n        });\n        _this4._modifyInteraction = _this4.addInteraction(new ol.interaction.Modify({\n          features: new ol.Collection(inputs.features),\n          deleteCondition: _this4._options.deleteCondition\n        }), {\n          'modifystart': function modifystart(e) {\n            originalFeature = e.features.getArray()[0].clone();\n          },\n          'modifyend': function modifyend(e) {\n            var feature = e.features.getArray()[0];\n            if (feature.getGeometry().getExtent() !== originalFeature.getGeometry().getExtent()) {\n              (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }).finally(function () {\n                newFeature = feature.clone();\n                context.session.pushUpdate(layerId, newFeature, originalFeature);\n                inputs.features.push(newFeature);\n                resolve(inputs);\n              });\n            }\n          }\n        });\n      }));\n    }\n  }, {\n    key: 'addMeasureInteraction',\n    value: function addMeasureInteraction() {\n      var _this5 = this;\n\n      this._modifyInteraction.on('modifystart', function (e) {\n        _this5.tooltip = createMeasureTooltip({ map: _this5.getMap(), feature: e.features.getArray()[0] });\n      });\n    }\n  }, {\n    key: 'removeMeasureInteraction',\n    value: function removeMeasureInteraction() {\n      if (this.tooltip) {\n        removeMeasureTooltip(_extends({ map: this.getMap() }, this.tooltip));\n      }\n      this.tooltip = null;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this._feature.setStyle(this._originalStyle);\n      return true;\n    }\n  }]);\n\n  return ModifyGeometryVertexStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/movefeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/movefeaturestep.js@v3.7.1\n */\n\n\nvar MoveFeatureStep = exports.MoveFeatureStep = function (_Step3) {\n  _inherits(MoveFeatureStep, _Step3);\n\n  function MoveFeatureStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, MoveFeatureStep);\n\n    options.help = \"editing.steps.help.move\";\n\n    var _this6 = _possibleConstructorReturn(this, (MoveFeatureStep.__proto__ || Object.getPrototypeOf(MoveFeatureStep)).call(this, options));\n\n    _this6.drawInteraction = null;\n    _this6.promise; // need to be set here in case of picked features\n    return _this6;\n  }\n\n  _createClass(MoveFeatureStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this7 = this;\n\n      /** Need two different promises: One for stop() method and clean-selected feature,\n       * and another one for a run task. If we use the same promise, when stop a task without move feature,\n       * this.promise.resolve(), it fires also thenable method listens to resolve promise of a run task,\n       * that call stop task method.*/\n      return (0, _promisify.$promisify)(new Promise(function (resolve) {\n        var promise = new Promise(function (r) {\n          return _this7.resolve = r;\n        });\n        var layerId = inputs.layer.getId();\n        var originalFeature = null;\n        _this7.changeKey = null;\n        var isGeometryChange = false; // changed if geometry is changed\n\n        (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(promise), inputs: inputs, style: _this7.selectStyle });\n\n        _this7.addInteraction(new ol.interaction.Translate({\n          features: new ol.Collection(inputs.features),\n          hitTolerance: isMobile && isMobile.any ? 10 : 0 }), {\n          'translatestart': function translatestart(e) {\n            var feature = e.features.getArray()[0];\n            _this7.changeKey = feature.once('change', function () {\n              return isGeometryChange = true;\n            });\n            originalFeature = feature.clone();\n          },\n          'translateend': function translateend(e) {\n            ol.Observable.unByKey(_this7.changeKey);\n            var feature = e.features.getArray()[0];\n            if (isGeometryChange) {\n              // evaluated geometry expression\n              (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }).finally(function () {\n                context.session.pushUpdate(layerId, feature.clone(), originalFeature);\n                resolve(inputs);\n              });\n            } else {\n              resolve(inputs);\n            }\n          }\n        });\n      }));\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.resolve(true);\n      this.resolve = null;\n      this.changeKey = null;\n    }\n  }]);\n\n  return MoveFeatureStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/openformtask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/openformstep.js@v3.7.1\n */\n\n\nvar OpenFormStep = exports.OpenFormStep = function (_Step4) {\n  _inherits(OpenFormStep, _Step4);\n\n  function OpenFormStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, OpenFormStep);\n\n    options.help = \"editing.steps.help.insert_attributes_feature\";\n\n    /**\n     * Show saveAll button\n     *\n     * @since v3.7\n     */\n    var _this8 = _possibleConstructorReturn(this, (OpenFormStep.__proto__ || Object.getPrototypeOf(OpenFormStep)).call(this, options));\n\n    _this8._saveAll = false === options.saveAll ? options.saveAll : _asyncToGenerator(function* () {});\n\n    /**\n     * Whether it can handle multi edit features\n     */\n    _this8._multi = options.multi || false;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this8.layerId;\n\n    /**\n     * whether form is coming from parent table component\n     */\n    _this8._isContentChild = false;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this8._features;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this8._originalFeatures;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this8.promise;\n\n    /**\n     * @since g3w-client-plugin-editing@v3.7.0\n     */\n    _this8._unwatchs = [];\n\n    return _this8;\n  }\n\n  /**\n   * @since v3.7\n   * @param bool\n   */\n\n\n  _createClass(OpenFormStep, [{\n    key: 'updateMulti',\n    value: function updateMulti() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this._multi = bool;\n    }\n\n    /**\n     * @param inputs\n     * @param context\n     *\n     * @returns {*}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this9 = this;\n\n      var promise = new Promise(function () {\n        var _ref3 = _asyncToGenerator(function* (resolve, reject) {\n          _this9._isContentChild = _workflow.Workflow.Stack.getLength() > 1;\n          _this9.layerId = inputs.layer.getId();\n\n          GUI.setLoadingContent(false);\n\n          GUI.getService('map').disableClickMapControls(true);\n\n          if (!_this9._multi && Array.isArray(inputs.features[inputs.features.length - 1])) {\n            resolve();\n            return;\n          }\n\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').setCurrentLayout();\n\n          var layerName = inputs.layer.getName();\n          _this9._features = _this9._multi ? inputs.features : [inputs.features[inputs.features.length - 1]];\n          _this9._originalFeatures = _this9._features.map(function (f) {\n            return f.clone();\n          });\n\n          // create a child relation feature set a father relation field value\n          if (_this9._isContentChild) {\n            context.fatherValue = context.fatherValue || []; // are array\n            (context.fatherField || []).forEach(function (field, i) {\n              _this9._features[0].set(field, context.fatherValue[i]);\n              _this9._originalFeatures[0].set(field, context.fatherValue[i]);\n            });\n          }\n\n          var fields = (0, _getFormFields.getFormFields)({\n            inputs: inputs,\n            context: context,\n            feature: _this9._features[0],\n            isChild: _this9._isContentChild,\n            multi: _this9._multi\n          });\n\n          // set fields. Useful getParentFormData\n          _workflow.Workflow.Stack.getCurrent().setInput({ key: 'fields', value: fields });\n\n          // whether disable relations editing (ref: \"editmultiattributes\")\n          var feature = !_this9._multi && inputs.features && inputs.features[inputs.features.length - 1];\n          var layerId = !_this9._multi && inputs.layer.getId();\n\n          // @since g3w-client-plugin-editing@v3.7.2\n          // skip relations that don't have a form structure\n          if (feature && !feature.isNew() && inputs.layer.getLayerEditingFormStructure()) {\n            yield (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(inputs.layer.getId(), {\n              // @since g3w-client-plugin-editin@v3.7.0\n              relations: inputs.layer.getRelations().getArray().filter(function (r) {\n                return inputs.layer.getId() === r.getFather() && // get only child relation features of current editing layer\n                (0, _getEditingLayerById.getEditingLayerById)(r.getChild()) && // child layer is in editing\n                'ONE' !== r.getType();\n              } // exclude ONE relation (Join 1:1)\n              ),\n              feature: feature,\n              filterType: 'fid'\n            });\n          }\n\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/form/editingform.js@v3.7.8 */\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/form/editingformservice.js@v3.7.8 */\n          var formService = GUI.showForm({\n            feature: _this9._originalFeatures[0],\n            title: \"plugins.editing.editing_attributes\",\n            name: layerName,\n            crumb: { title: layerName },\n            id: 'form_' + layerName,\n            dataid: layerName,\n            layer: inputs.layer,\n            isnew: _this9._originalFeatures.length > 1 ? false : _this9._originalFeatures[0].isNew(), // specify if is a new feature\n            parentData: (0, _getParentFormData.getParentFormData)(),\n            fields: fields,\n            context_inputs: _this9._multi ? false : { context: context, inputs: inputs },\n            formStructure: inputs.layer.hasFormStructure() && inputs.layer.getLayerEditingFormStructure() || undefined,\n            modal: true,\n            push: _this9._options.push || _this9._isContentChild, /** @since v3.7 force push content on top without clear previous content */\n            showgoback: undefined !== _this9._options.showgoback ? _this9._options.showgoback : !_this9._isContentChild, /** @since v3.7 force show back button */\n            /** @TODO make it straightforward: `headerComponent` vs `buttons` ? */\n            headerComponent: _this9._saveAll && {\n              template: /* html */'\\n            <section class=\"editing-save-all-form\">\\n              <div\\n                class = \"editing-button\"\\n                style = \"background-color: #fff; display: flex; justify-content: flex-end; width: 100%;\"\\n              >\\n                <span\\n                  class               = \"save-all-icon\"\\n                  v-disabled          = \"disabled\"\\n                  @click.stop.prevent = \"saveAll\"\\n                >\\n                  <i\\n                    class  = \"skin-color\"\\n                    :class = \"g3wtemplate.font[\\'save\\']\"\\n                    style  = \"font-size: 1.8em; padding: 5px; border-radius: 5px; cursor: pointer; box-shadow: 0 3px 5px rgba(0,0,0,0.5); margin: 5px;\"\\n                  ></i>\\n                </span>\\n              </div>\\n            </section>',\n              name: 'Saveall',\n              /** @TODO figure out who populate these props (ie. core client code?) */\n              props: { update: { type: Boolean }, valid: { type: Boolean } },\n              data: function data() {\n                return {\n                  enabled: _workflow.Workflow.Stack._workflows.slice(0, _workflow.Workflow.Stack.getLength() - 1).every(function (w) {\n                    var valid = (w.getContext().service instanceof FormService ? w.getContext().service.getState() : {}).valid;\n                    return valid || undefined === valid;\n                  })\n                };\n              },\n\n              computed: {\n                /** @returns {boolean} whether disable save all button (eg. when parent or current form is not valid/ updated) */\n                disabled: function disabled() {\n                  return !this.enabled || !(this.valid && this.update);\n                }\n              },\n              methods: {\n                saveAll: function () {\n                  var _ref4 = _asyncToGenerator(function* () {\n                    //Set loading content\n                    GUI.setLoadingContent(true);\n                    //Disable form\n                    GUI.disableContent(true);\n                    yield Promise.allSettled([].concat(_toConsumableArray(_workflow.Workflow.Stack._workflows)).reverse().filter(function (w) {\n                      return \"function\" === typeof w.getLastStep()._saveAll;\n                    }) // need to filter only workflow that\n                    .map(function (w) {\n                      return new Promise(function () {\n                        var _ref5 = _asyncToGenerator(function* (resolve) {\n                          var task = w.getLastStep();\n                          var fields = w.getContext().service.state.fields.filter(function (f) {\n                            return task._multi ? null !== f.value : true;\n                          });\n                          // skip when no fields\n                          if (0 === fields.length) {\n                            return;\n                          }\n                          yield _workflow.Workflow.Stack.getCurrent().getContextService().saveDefaultExpressionFieldsNotDependencies();\n                          task._features.forEach(function (f) {\n                            return task.getInputs().layer.setFieldsWithValues(f, fields);\n                          });\n                          var newFeatures = task._features.map(function (f) {\n                            return f.clone();\n                          });\n                          //Is a relation form\n                          if (task._isContentChild) {\n                            task.getInputs().relationFeatures = { newFeatures: newFeatures, originalFeatures: task._originalFeatures };\n                          }\n                          yield task.fireEvent('saveform', { newFeatures: newFeatures, originalFeatures: task._originalFeatures });\n                          newFeatures.forEach(function (f, i) {\n                            return task.getContext().session.pushUpdate(task.layerId, f, task._originalFeatures[i]);\n                          });\n                          yield (0, _handleRelation1_1LayerFields.handleRelation1_1LayerFields)({ layerId: task.layerId, features: newFeatures, fields: fields, task: task });\n                          task.fireEvent('savedfeature', newFeatures); // called after saved\n                          task.fireEvent('savedfeature_' + task.layerId, newFeatures); // called after saved using layerId\n                          task.getContext().session.save();\n                          return resolve();\n                        });\n\n                        return function (_x8) {\n                          return _ref5.apply(this, arguments);\n                        };\n                      }());\n                    }));\n                    try {\n                      yield (0, _promisify.promisify)(g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').service.commit({ modal: false }));\n                      [].concat(_toConsumableArray(_workflow.Workflow.Stack._workflows)).reverse().filter(function (w) {\n                        return \"function\" === typeof w.getLastStep()._saveAll;\n                      }).forEach(function (w) {\n                        var service = w.getContext().service; //form service\n                        //need to set update form false because already saved on server\n                        service.setUpdate(false, { force: false });\n                        var feature = service.feature;\n                        // Check if the feature is new.\n                        // In this case, after commit, need to set new to false, and force update to false.\n                        if (feature.isNew()) {\n                          feature.state.new = false;\n                          service.force.update = false;\n                        }\n                        Object.entries(w.getInputs().layer.getEditingSource().readFeatures().find(function (f) {\n                          return f.getUid() === feature.getUid();\n                        }) //Find current form editing feature by unique id of feature uid\n                        .getProperties() //get properties\n                        ).forEach(function (_ref6) {\n                          var _ref7 = _slicedToArray(_ref6, 2),\n                              k = _ref7[0],\n                              v = _ref7[1];\n\n                          var field = service.getFields().find(function (f) {\n                            return k === f.name;\n                          });\n                          //if field exists (geometry field is discarded)\n                          if (field) {\n                            field.value = field._value = v;\n                          }\n                        });\n                      });\n                    } catch (e) {\n                      console.warn(e);\n                    }\n                    //set loading content false\n                    GUI.setLoadingContent(false);\n                    //enable form\n                    GUI.disableContent(false);\n                  });\n\n                  function saveAll() {\n                    return _ref4.apply(this, arguments);\n                  }\n\n                  return saveAll;\n                }()\n              }\n            },\n            buttons: [{\n              id: 'save',\n              title: _this9._isContentChild ? _workflow.Workflow.Stack.getParent().getBackButtonLabel() || \"plugins.editing.form.buttons.save_and_back\" // get custom back label from parent\n              : \"plugins.editing.form.buttons.save\",\n              type: \"save\",\n              class: \"btn-success\",\n              // save features\n              cbk: function () {\n                var _ref8 = _asyncToGenerator(function* (fields) {\n                  fields = _this9._multi ? fields.filter(function (f) {\n                    return null !== f.value;\n                  }) : fields;\n\n                  // skip when no fields\n                  if (0 === fields.length) {\n                    GUI.setModal(false);\n                    resolve(inputs);\n                    return;\n                  }\n\n                  var newFeatures = [];\n\n                  // @since 3.5.15\n                  GUI.setLoadingContent(true);\n                  GUI.disableContent(true);\n\n                  yield _workflow.Workflow.Stack.getCurrent().getContextService().saveDefaultExpressionFieldsNotDependencies();\n\n                  GUI.setLoadingContent(false);\n                  GUI.disableContent(false);\n\n                  _this9._features.forEach(function (f) {\n                    inputs.layer.setFieldsWithValues(f, fields);\n                    newFeatures.push(f.clone());\n                  });\n\n                  if (_this9._isContentChild) {\n                    inputs.relationFeatures = {\n                      newFeatures: newFeatures,\n                      originalFeatures: _this9._originalFeatures\n                    };\n                  }\n\n                  yield _this9.fireEvent('saveform', { newFeatures: newFeatures, originalFeatures: _this9._originalFeatures });\n\n                  newFeatures.forEach(function (f, i) {\n                    return context.session.pushUpdate(_this9.layerId, f, _this9._originalFeatures[i]);\n                  });\n\n                  // check and handle if layer has relation 1:1\n                  yield (0, _handleRelation1_1LayerFields.handleRelation1_1LayerFields)({\n                    layerId: _this9.layerId,\n                    features: newFeatures,\n                    fields: fields,\n                    task: _this9\n                  });\n\n                  GUI.setModal(false);\n\n                  _this9.fireEvent('savedfeature', newFeatures); // called after saved\n                  _this9.fireEvent('savedfeature_' + _this9.layerId, newFeatures); // called after saved using layerId\n                  // In case of save of child it means that child is updated so also parent\n                  if (_this9._isContentChild) {\n                    _workflow.Workflow.Stack.getParents().forEach(function (w) {\n                      return w.getContextService().setUpdate(true, { force: true });\n                    });\n                  }\n                  //@TODO add field unique new value id not set\n                  resolve(inputs);\n                });\n\n                function cbk(_x9) {\n                  return _ref8.apply(this, arguments);\n                }\n\n                return cbk;\n              }()\n            }, {\n              id: 'cancel',\n              title: \"plugins.editing.form.buttons.cancel\",\n              type: \"cancel\",\n              class: \"btn-danger\",\n              /// buttons in case of change\n              eventButtons: {\n                update: {\n                  false: {\n                    id: 'close',\n                    title: \"close\",\n                    type: \"cancel\",\n                    class: \"btn-danger\"\n                  }\n                }\n              },\n              cbk: function cbk() {\n                if (!_this9._isContentChild) {\n                  GUI.setModal(false);\n                  _this9.fireEvent('cancelform', inputs.features); // fire event cancel form to emit to subscrivers\n                }\n                reject(inputs);\n              }\n            }]\n          });\n\n          // Overwrite click on relation.\n          // Open FormRelation.vue component\n          formService.handleRelation = function () {\n            var _ref9 = _asyncToGenerator(function* (e) {\n              // Skip when multi editing features\n              // It is not possible to manage relationss when we edit multi-features\n              if (_this9._multi) {\n                GUI.showUserMessage({ type: 'info', message: 'plugins.editing.errors.editing_multiple_relations', duration: 3000, autoclose: true });\n                return;\n              }\n              GUI.setLoadingContent(true);\n              //set unique values for relation layer based on unique fields\n              //@TODO need a find a way to call once and not every time we open a relation\n              yield (0, _setLayerUniqueFieldValues.setLayerUniqueFieldValues)(inputs.layer.getRelationById(e.relation.name).getChild());\n              formService.setCurrentComponentById(e.relation.name);\n              GUI.setLoadingContent(false);\n            });\n\n            return function (_x10) {\n              return _ref9.apply(this, arguments);\n            };\n          }();\n\n          formService.addComponents([].concat(_toConsumableArray(g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.formComponents[layerId] || []), _toConsumableArray((0, _getRelationsInEditingByFeature.getRelationsInEditingByFeature)({\n            layerId: layerId,\n            relations: _this9._multi ? [] : inputs.layer.getRelations().getArray().filter(function (r) {\n              return r.getType() !== 'ONE' && r.getFather() === layerId;\n            }),\n            feature: _this9._multi ? false : inputs.features[inputs.features.length - 1]\n          }).map(function (_ref10) {\n            var relation = _ref10.relation,\n                relations = _ref10.relations;\n            return {\n              title: \"plugins.editing.edit_relation\",\n              name: relation.name,\n              id: relation.id,\n              header: false, // hide a header form\n              component: Vue.extend({\n                mixins: [require('../components/FormRelation.vue')],\n                name: 'relation_' + Date.now(),\n                data: function data() {\n                  return { layerId: layerId, relation: relation, relations: relations };\n                }\n              })\n            };\n          }))));\n\n          // fire openform event\n          _this9.fireEvent('openform', {\n            layerId: _this9.layerId,\n            session: context.session,\n            feature: _this9._originalFeature,\n            formService: formService\n          });\n\n          // set context service to form Service in case of a single task (i.e., no workflow)\n          if (_workflow.Workflow.Stack.getCurrent()) {\n            _workflow.Workflow.Stack.getCurrent().setContextService(formService);\n          }\n\n          //listen eventually field relation 1:1 changes value\n          (0, _listenRelation1_1FieldChange.listenRelation1_1FieldChange)({ layerId: _this9.layerId, fields: fields }).then(function (d) {\n            return _this9._unwatchs = d;\n          });\n\n          _this9.disableSidebar(true);\n        });\n\n        return function (_x6, _x7) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(promise), inputs: inputs, style: _this9.selectStyle });\n        return promise;\n      }));\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.disableSidebar(false);\n\n      //Check if form coming from the parent table component\n      var is_parent_table = false === this._isContentChild || // no child workflow\n\n      // case edit feature of a table (edit layer alphanumeric)\n      2 === _workflow.Workflow.Stack.getLength() && //open features table\n      _workflow.Workflow.Stack.getParent().isType('edittable');\n\n      // when the last feature of features is Array\n      // and is resolved without setting form service\n      // Ex. copy multiple features from another layer\n      if (is_parent_table) {\n        GUI.getService('map').disableClickMapControls(false);\n      }\n\n      var contextService = is_parent_table && _workflow.Workflow.Stack.getCurrent().getContextService();\n\n      // force update parent form update\n      if (contextService && false === this._isContentChild) {\n        contextService.setUpdate(false, { force: false });\n      }\n\n      GUI.closeForm({ pop: this.push || this._isContentChild });\n\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').resetCurrentLayout();\n\n      this.fireEvent('closeform');\n      this.fireEvent('closeform_' + this.layerId);\n\n      this.layerId = null;\n      this._unwatchs.forEach(function (unwatch) {\n        return unwatch();\n      });\n      this._unwatchs = [];\n    }\n  }]);\n\n  return OpenFormStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/opentabletask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/opentablestep.js@v3.7.1\n */\n\n\nvar OpenTableStep = exports.OpenTableStep = function (_Step5) {\n  _inherits(OpenTableStep, _Step5);\n\n  function OpenTableStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, OpenTableStep);\n\n    options.help = \"editing.steps.help.edit_table\";\n\n    return _possibleConstructorReturn(this, (OpenTableStep.__proto__ || Object.getPrototypeOf(OpenTableStep)).call(this, options));\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/opentabletask.js@v3.7.1\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/services/tableservice.js@v3.7.8\n   *\n   * @param inputs\n   * @param context\n   *\n   * @returns {*}\n   */\n\n\n  _createClass(OpenTableStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this11 = this;\n\n      // set current plugin layout (right content)\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').setCurrentLayout();\n\n      return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n        _this11._isContentChild = _workflow.Workflow.Stack.getLength() > 1;\n        var features = inputs.layer.readEditingFeatures() || [];\n        var headers = (inputs.layer.getEditingFields() || []).filter(function (h) {\n          return features.length ? Object.keys(features[0].getProperties()).includes(h.name) : true;\n        });\n        _this11._isContentChild = _workflow.Workflow.Stack.getLength() > 1;\n        var excludeFields = _this11._isContentChild ? context.excludeFields || [] : [];\n        var service = Object.assign(new G3WObject(), {\n          state: {\n            inputs: inputs,\n            context: context,\n            promise: { resolve: resolve, reject: reject },\n            headers: headers, // column names\n            features: features,\n            rows: features.length > 0\n            // ordered properties\n            ? (excludeFields.length > 0 ? features.filter(function (feat) {\n              return !excludeFields.reduce(function (a, f, i) {\n                return a && context.fatherValue[i] === '' + feat.get(f);\n              }, true);\n            }) : features).map(function (f) {\n              return headers.map(function (h) {\n                return h.name;\n              }).reduce(function (props, header) {\n                var _Object$assign;\n\n                return Object.assign(props, (_Object$assign = {}, _defineProperty(_Object$assign, header, (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({ layerId: inputs.layer.getId(), feature: f, property: header })), _defineProperty(_Object$assign, '__gis3w_feature_uid', f.getUid()), _Object$assign));\n              }, {});\n            })\n            // features already bind to parent feature\n            : features,\n            title: '' + inputs.layer.getName() || 'Link relation',\n            isrelation: _this11._isContentChild,\n            capabilities: inputs.layer.getEditingCapabilities(),\n            layerId: inputs.layer.getId(),\n            workflow: null\n          }\n        });\n\n        GUI.showContent({\n          content: new Component({\n            title: '' + inputs.layer.getName(),\n            push: _this11._isContentChild,\n            service: service,\n            state: service.state,\n            internalComponent: new (Vue.extend(require('../components/Table.vue')))({ service: service })\n          }),\n          push: _this11._isContentChild,\n          showgoback: false,\n          closable: false\n        });\n      }));\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.disableSidebar(false);\n      GUI[this._isContentChild ? 'popContent' : 'closeContent']();\n      //reset the current plugin layout (right content) to application\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').resetCurrentLayout();\n    }\n  }]);\n\n  return OpenTableStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/pickfeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/pickfeaturestep.js@v3.7.1\n */\n\n\nvar PickFeatureStep = exports.PickFeatureStep = function (_Step6) {\n  _inherits(PickFeatureStep, _Step6);\n\n  function PickFeatureStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PickFeatureStep);\n\n    options.help = \"editing.steps.help.pick_feature\";\n    options.highlight = options.highlight || false;\n    options.multi = options.multi || false;\n    return _possibleConstructorReturn(this, (PickFeatureStep.__proto__ || Object.getPrototypeOf(PickFeatureStep)).call(this, options));\n  }\n\n  _createClass(PickFeatureStep, [{\n    key: 'run',\n    value: function run(inputs) {\n      var _this13 = this;\n\n      var promise = new Promise(function (resolve) {\n        _this13.addInteraction(new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: inputs.layer.getEditingLayer() }), {\n          'picked': function picked(e) {\n            if (0 === inputs.features.length) {\n              inputs.features = e.features;\n              inputs.coordinate = e.coordinate;\n            }\n            if (_this13._steps) {\n              _this13.setUserMessageStepDone('select');\n            }\n            resolve(inputs);\n          }\n        });\n      });\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: (0, _promisify.$promisify)(promise), inputs: inputs, style: _this13.selectStyle });\n        return promise;\n      }));\n    }\n  }]);\n\n  return PickFeatureStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/selectelementstask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/selectelementsstep.js@v3.7.1\n */\n\n\nvar SelectElementsStep = exports.SelectElementsStep = function (_Step7) {\n  _inherits(SelectElementsStep, _Step7);\n\n  function SelectElementsStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var chain = arguments[1];\n\n    _classCallCheck(this, SelectElementsStep);\n\n    options.help = options.help || \"editing.steps.help.select_elements\";\n\n    var _this14 = _possibleConstructorReturn(this, (SelectElementsStep.__proto__ || Object.getPrototypeOf(SelectElementsStep)).call(this, options));\n\n    _this14._selectInteractions = [];\n    _this14.multipleselectfeatures = [];\n    _this14._originalStyle;\n    _this14._vectorLayer;\n\n    if (chain) {\n      _this14.on('run', function () {\n        _this14.emit('next-step', g3wsdk.core.i18n.tPlugin(\"editing.steps.help.select_elements\"));\n      });\n    }\n    return _this14;\n  }\n\n  /**\n   *\n   * @param inputs\n   * @param context\n   * @returns {*}\n   */\n\n\n  _createClass(SelectElementsStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this15 = this;\n\n      var layer = inputs.layer;\n      var type = this._options.type || 'bbox'; // 'single' 'bbox' 'multiple';\n      var buttonnext = 'multiple' === type && !!this._steps.select.buttonnext;\n\n      return (0, _promisify.$promisify)(new Promise(function (resolve, reject) {\n        var _selectInteractions;\n\n        if (buttonnext) {\n          //check if it has already done handler function;\n          var done = _this15._steps.select.buttonnext.done;\n\n          _this15._steps.select.buttonnext.done = function () {\n            if (done && done instanceof Function) {\n              done();\n            }\n            resolve(inputs);\n          };\n        }\n\n        var interactions = {};\n\n        // add single select interaction\n        if (['single', 'multiple'].includes(type)) {\n          interactions.single = new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: layer.getEditingLayer() });\n          interactions.single.on('picked', function () {\n            var _ref14 = _asyncToGenerator(function* (_ref13) {\n              var features = _ref13.features;\n\n              var feature = void 0;\n              if (features.length > 1) {\n                try {\n                  feature = yield (0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: features, inputs: _this15.getInputs() });\n                } catch (e) {\n                  console.warn(e);\n                }\n              } else {\n                feature = features[0];\n              }\n\n              if (feature) {\n                inputs.features = [feature];\n                if (buttonnext) {\n                  (0, _addRemoveToMultipleSelectFeatures.addRemoveToMultipleSelectFeatures)([feature], inputs, _this15.multipleselectfeatures, _this15);\n                } else {\n                  _this15._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(inputs.features);\n\n                  if (_this15._steps) {\n                    _this15.setUserMessageStepDone('select');\n                  }\n\n                  resolve(inputs);\n                }\n              }\n            });\n\n            return function (_x14) {\n              return _ref14.apply(this, arguments);\n            };\n          }());\n        }\n\n        // add multiple select interactions\n        if (['multiple', 'bbox'].includes(type) && ApplicationState.ismobile) {\n          _this15._vectorLayer = new ol.layer.Vector({ source: new ol.source.Vector({}) });\n          _this15.getMap().addLayer(_this15._vectorLayer);\n\n          interactions.multi = new ol.interaction.Draw({ type: 'Circle', source: _this15._vectorLayer.getSource(), geometryFunction: ol.interaction.Draw.createBox() });\n\n          interactions.multi.on('drawend', function (e) {\n            var features = layer.getEditingLayer().getSource().getFeaturesInExtent(e.feature.getGeometry().getExtent());\n            if (buttonnext) {\n              (0, _addRemoveToMultipleSelectFeatures.addRemoveToMultipleSelectFeatures)(features, inputs, _this15.multipleselectfeatures, _this15);\n            } else {\n              if (features.length > 0) {\n                inputs.features = features;\n                _this15._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(features);\n                if (_this15._steps) {\n                  _this15.setUserMessageStepDone('select');\n                }\n                setTimeout(function () {\n                  return resolve(inputs);\n                }, 500);\n              } else {\n                reject();\n              }\n            }\n          });\n        }\n\n        if (['multiple', 'bbox'].includes(type) && !ApplicationState.ismobile) {\n          interactions.dragbox = new ol.interaction.DragBox({ condition: ol.events.condition.shiftKeyOnly });\n\n          interactions.dragbox.on('boxend', function () {\n            var features = [];\n            var extent = interactions.dragbox.getGeometry().getExtent();\n\n            //https://openlayers.org/en/v5.3.0/apidoc/module-ol_source_Cluster-Cluster.html#forEachFeatureIntersectingExtent\n            layer.getEditingLayer().getSource().forEachFeatureIntersectingExtent(extent, function (f) {\n              features.push(f);\n            });\n\n            if (buttonnext) {\n              (0, _addRemoveToMultipleSelectFeatures.addRemoveToMultipleSelectFeatures)(features, inputs, _this15.multipleselectfeatures, _this15);\n            } else {\n              if (features.length > 0) {\n                inputs.features = features;\n                _this15._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(features);\n\n                if (_this15._steps) {\n                  _this15.setUserMessageStepDone('select');\n                }\n\n                resolve(inputs);\n              } else {\n                reject();\n              }\n            }\n          });\n        }\n\n        // pick feature from external layer added to map\n        if ('external' === type) {\n          var geometryType = layer.getGeometryType();\n          var layerId = layer.getId();\n          var source = layer.getEditingLayer().getSource();\n\n          var _getContext = _this15.getContext(),\n              session = _getContext.session;\n\n          interactions.external = new _pickfeaturesinteraction.PickFeaturesInteraction({\n            layers: GUI.getService('map').getExternalLayers()\n            // filter external layer only vector - Exclude the\n            // same base geometry\n            .filter(function (l) {\n              var features = 'VECTOR' == l.getType() && l.getSource().getFeatures();\n              if (features.length > 0) {\n                return (0, _isSameBaseGeometryType.isSameBaseGeometryType)(features[0].getGeometry().getType(), geometryType);\n              }\n              return true;\n            })\n          });\n          interactions.external.on('picked', function (e) {\n            if (!(e.features.length > 0)) {\n              reject();\n              return;\n            }\n            var attributes = layer.getEditingFields();\n            var geometry = e.features[0].getGeometry();\n            if (geometryType !== geometry.getType()) {\n              e.feature.setGeometry(convertSingleMultiGeometry(geometry, geometryType));\n            }\n            var feature = new Feature({\n              feature: e.feature,\n              properties: attributes.map(function (attr) {\n                // set media attribute to null or attribute belong to layer but not present o feature copied\n                if (attr.pk || 'media' === attr.input.type || undefined === e.feature.get(attr.name)) {\n                  e.feature.set(attr.name, null);\n                }\n                return attr.name;\n              })\n            });\n\n            // evaluate Geometry Expression\n            (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }).finally(function () {\n              removeZValueToOLFeatureGeometry({ feature: feature }); // remove eventually Z Values\n              feature.setTemporaryId();\n              source.addFeature(feature);\n              session.pushAdd(layerId, feature, false);\n              inputs.features.push(feature);\n              resolve(inputs);\n            });\n          });\n        }\n\n        Object.values(interactions).forEach(function (i) {\n          return _this15.addInteraction(i);\n        });\n        (_selectInteractions = _this15._selectInteractions).push.apply(_selectInteractions, _toConsumableArray(Object.values(interactions)));\n      }));\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this16 = this;\n\n      this._selectInteractions.forEach(function (i) {\n        return _this16.removeInteraction(i);\n      });\n\n      if (this._vectorLayer) {\n        this.getMap().removeLayer(this._vectorLayer);\n      }\n      // reset selected\n      this.getInputs().features.forEach(function (f) {\n        return f.setStyle(_this16._originalStyle);\n      });\n\n      this._originalStyle = null;\n      this._vectorLayer = null;\n      this._selectInteractions = [];\n      this.multipleselectfeatures = [];\n    }\n  }]);\n\n  return SelectElementsStep;\n}(_step.Step);\n\n},{\"../components/FormRelation.vue\":6,\"../components/Table.vue\":7,\"../g3wsdk/workflow/step\":14,\"../g3wsdk/workflow/workflow\":15,\"../interactions/pickfeaturesinteraction\":26,\"../utils/addRemoveToMultipleSelectFeatures\":29,\"../utils/chooseFeatureFromFeatures\":34,\"../utils/evaluateExpressionFields\":40,\"../utils/getEditingLayerById\":42,\"../utils/getFeatureTableFieldValue\":43,\"../utils/getFormFields\":44,\"../utils/getLayersDependencyFeatures\":45,\"../utils/getParentFormData\":47,\"../utils/getRelationsInEditingByFeature\":52,\"../utils/handleRelation1_1LayerFields\":53,\"../utils/isSameBaseGeometryType\":56,\"../utils/listenRelation1_1FieldChange\":57,\"../utils/promisify\":58,\"../utils/setAndUnsetSelectedFeaturesStyle\":59,\"../utils/setFeaturesSelectedStyle\":60,\"../utils/setLayerUniqueFieldValues\":61}],66:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.promisify = promisify;\nexports.$promisify = $promisify;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * Migrate your consumer code away from jQuery promises.\n * Covert a jQuery promise into an ES6 Promise\n * \n * @param promise jquery promise\n */\nfunction promisify(promise) {\n  if (promise instanceof Promise) {\n    return promise;\n  }\n  if (!promise || !promise.then) {\n    console.trace(promise);\n    return Promise.reject('not a promise');\n  }\n  return new Promise(function (resolve, reject) {\n    promise.then(resolve).fail(reject);\n  });\n}\n\n/**\n * Migrate your consumer code away from jQuery promises.\n * Convert ES6 Promise into jQuery\n * \n * @param promise async function or ES6 promise \n */\nfunction $promisify(promise) {\n  if (undefined === promise) {\n    console.trace();\n    return $.Deferred(function (d) {\n      return d.reject('not a promise');\n    }).promise();\n  }\n  if (promise.always) {\n    return promise;\n  }\n  return $.Deferred(function () {\n    var _ref = _asyncToGenerator(function* (d) {\n      try {\n        d.resolve((yield promise instanceof Promise ? promise : promise()));\n      } catch (e) {\n        console.trace(e);d.reject(e);\n      }\n    });\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }()).promise();\n}\n\n},{}]},{},[25]);\n"],"names":["plugins","window","initConfig","group","Object","assign","version","hash","branch","r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","inserted","cache","noop","insert","css","elem","document","createElement","setAttribute","textContent","styleSheet","cssText","getElementsByTagName","appendChild","removeChild","2","_ref","_areCoordinatesEqual","_getFeatureTableFieldValue","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","defineProperty","default","name","props","commits","type","required","layer","relation","Boolean","data","features","readFeatures","efeatures","readEditingFeatures","methods","getFormattedValue","feat","get","getFlatCoordinates","getFeatureTableFieldValue","layerId","getId","feature","property","getValue","item","getFeature","getEditingValue","getEditingFeature","hasValue","efeat","id","_this","find","_this2","getType","getGeometry","isEdited","includes","undefined","areCoordinatesEqual","coordinates","getCoordinates","getAttrs","entries","getProperties","sort","b","getLayerById","g3wsdk","core","plugin","PluginsRegistry","getPlugin","service","mounted","$refs","filter","d","forEach","innerHTML","__esModule","__vue__options__","options","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","staticClass","staticStyle","font-weight","margin","_v","_s","getName","_e","_l","keys","ref","refInFor","relations","attrs","add","update","delete","staticRenderFns","_scopeId","../utils/areCoordinatesEqual","../utils/getFeatureTableFieldValue","vueify/lib/insert-css","3","GUI","gui","$options","selectFeature","splice","push","getAttributesFeature","properties","attributes","map","attribute","label","zoomToFeature","getService","zoomToFeatures","highlight","duration","closeContent","index","on","click","$event","stopPropagation","for","class","g3wtemplate","font","4","layers","l","selected","watch","_id","domProps","5","_slicedToArray","_Toolbox","_promisify","_ref13","_ref9","_ref8","_ref7","_ref6","_ref5","ApplicationState","ApplicationService","CatalogLayersStoresRegistry","DataRouterService","arr","Array","isArray","Symbol","iterator","sliceIterator","_arr","_n","_d","_i","next","TypeError","_Toolbox2","obj","_g3wsdk$core","catalog","state","resourcesurl","showcommitbar","saving","layersInEditing","editingButtonsEnabled","selectedlayers","editinglayers","getEditableLayers","_ref2","config","editing","visible","_ref3","_ref4","title","getTitle","activetool","components","toolbox","transitions","addremovetransition","updateFilterLayers","_selectedlayers","$","selectlayers","val","trigger","updateLayersInEditing","bool","undo","canUndo","redo","canRedo","commit","toolboxId","canCommit","getToolBoxById","modal","always","startToolBox","online","getDependencies","isDirty","yield","commit_dirty","start","_x2","stopToolBox","history","promisify","stop","control","getToolBoxes","getMapControlByType","isToggled","toggle","_x3","startTool","toolId","_this3","enabled","stopTool","setActiveTool","getToolById","_x4","_x5","stopActiveTool","selectToolBox","isSelected","setSelected","clearMessage","toolboxselected","_x6","_this4","hasDependencies","concat","editor","getEditor","getEditingSource","setFeatures","clone","getSession","getHistory","clear","_x7","_enableEditingButtons","checkOfflineChanges","_this5","_ref10","_ref10$modal","_ref10$unlock","unlock","promises","layerIds","changes","JSON","parse","localStorage","getItem","setTimeout","_layerId","commitItems","when","setItem","computed","saveConfig","mode","fireEvent","django_admin_url","user","is_superuser","URL","baseurl","filemanager_url","onbeforeunload","getElementsByClassName","classList","has_layers","_ref12","is_commit","is_selected","setShow","created","_this6","appState","unByKeys","owner","setter","onafter","catch","notify","open","getLayers","EDITABLE","setInEditing","beforeDestroy","_this7","layerIdChanges","off","_ref14","un","featuresOnClose","inputs","fids","formatter","promise","arr2","from","getData","outputs","show","loading","resetDefault","message","height","showselectlayers","multiple","editinglayer","setselectedtoolbox","starttoolbox","stoptoolbox","setactivetool","stopactivetool","on-editing","update-filter-layers","href","target","../utils/promisify","./Toolbox.vue","6","_extends","_workflow2","_step","_setAndUnsetSelectedFeaturesStyle","_getRelationFieldsFromRelation","_getLayersDependencyFeatures","_getEditingLayerById","_convertToGeometry","_addTableFeature","_updateWorkflows","_getRelationId","_chooseFeatureFromFeatures","_isSameBaseGeometryType","_pickfeaturesinteraction","_eventbus","_workflows","_ref33","_unlinkRelation","_ref18","_ref15","ProjectsRegistry","Geometry","Layer","Feature","toRawType","FormService","fieldsMixin","resizeMixin","PickFeatureInteraction","PickCoordinatesInteraction","SELECTED_STYLES","_defineProperty","enumerable","configurable","writable","_toConsumableArray","unlinkRelation","source","prototype","hasOwnProperty","project","geoutils","i18n","tPlugin","utils","vue","services","_g3wsdk$gui$vue$Mixin","Mixins","mediaMixin","_g3wsdk$ol$interactio","ol","interactions","Workflow","Step","OpenFormStep","OpenTableStep","AddFeatureStep","ModifyGeometryVertexStep","MoveFeatureStep","color","Point","style","Style","image","Circle","radius","fill","Fill","MultiPoint","Linestring","stroke","Stroke","width","MultiLinestring","Polygon","MultiPolygon","mixins","show_vector_tools","disabled","copylayerid","copyFeatureLayers","active","placeholdersearch","getResourcesUrl","resize","table","$el","display","relation_body","querySelector","offsetHeight","relation_header_title","relation_header_tools","isVectorRelation","relation_vector_tools","relationsTable","columns","adjust","copyFeatureFromOtherLayer","external","is_vector","isGeoLayer","runAddRelationWorkflow","workflow","_add_link_workflow","selectandcopy","copyLayer","isVector","help","closeVectorTools","$nextTick","addVectorRelation","LayerTypes","VECTOR","_layerType","updateSelectRelations","selectall","some","select","editAttributesRelations","steps","multi","_createWorkflowOptions","getLayer","getFeatureById","addRelationAndLink","relationAttributesSubset","fields","flatMap","indexOf","_createDataTable","relationTable","DataTable","autoWidth","columnDefs","orderable","targets","destroy","order","pageLength","responsive","scrollCollapse","scrollResize","scrollX","hide","search","draw","destroyTable","updateTable","updateNewRelationId","_new_relations_ids","clientid","newrelation","tools","ts","split","replace","onCommit","_ref11","_ref11$new_relations","new_relations","relationLayer","getEditingLayerById","child","new","getRelationFeatureValue","featureId","_relationLayerId","enableDOMElements","querySelectorAll","contains","remove","addTools","capabilities","Vue","observable","icon","getTools","isPointGeometryType","getGeometryType","tool","getOperator","flat","relationtool","VM","relationfeature","selectStyle","setAndUnsetSelectedFeaturesStyle","dialog","confirm","res","unique_fields","Stack","getCurrent","pushDelete","uniqueFieldsValues","Set","removeFeature","isNew","w","getUid","getContextService","updateWorkflows","getFieldsWithValues","rf","currentRelationFeatureId","setModal","_workflow","movevertex","movefeature","unwatch","$watch","unbindEscKeyUp","bindEscKeyUp","getParents","setUpdate","force","_this8","_ref16","_ref16$isVector","hideContent","_options$context","context","fatherField","fatherValue","relationField","getRelationFieldsFromRelation","_relations","keyRelationFeatureChange","_outputs$relationFeat","relationFeatures","newFeatures","originalFeatures","setRelationFieldValue","_ref17","field","newFeature","set","parentFeature","updateFeature","session","pushUpdate","getParent","editable","evt","Observable","unByKey","_relations2","rollbackDependecies","linkRelation","getRelationFeatures","getLayersDependencyFeatures","_this9","operator","filterType","link","_getRelationFieldsFro2","ownField","excludeFeatures","reduce","accumulator","rField","values","getCurrentFeature","response","showContent","linked","beforeRun","originalRelation","rel","_ref20","_ref21","findIndex","rF","warning","closeUserMessage","toString","parentLayer","pk","isPkField","isEditingFieldEditable","father","getInputs","parent","excludeFields","_ref22","_ref23","_ref24","every","relationsLength","fieldrequired","_this10","isFieldRequired","show_add_link","_","beforeCreate","delayType","geometryType","_this11","self","bind","QUERYABLE","GEOLAYER","isSameBaseGeometryType","isMultiGeometry","getExternalLayers","getSource","getFeatures","toLowerCase","localeCompare","addExternalLayerKey","_ref26","_type","externalLayer","loadEventuallyRelationValuesForInputs","getEditingCapabilities","_Layer$LayerTypes$TAB","TABLE","backbuttonlabel","run","addTableFeature","_ref27","_this12","$promisify","editingLayer","getEditingLayer","_ref28","_ref29","addInteraction","picked","_x12","_x13","addStep","description","setUserMessageStepDone","registerEscKeyEvent","_this13","_ref31","_feature","_ref32","PickFeaturesInteraction","convertToGeometry","coordinate","query_point_tolerance","getCurrentProject","getQueryPointTolerance","multilayers","_x17","_x16","chooseFeatureFromFeatures","getEditingFields","attr","setTemporaryId","addFeature","pushAdd","showUserMessage","closable","autoclose","activated","mapExtent","getMapBBOX","runEventHandler","getRelationId","component","deactivated","zoomToExtent","margin-bottom","margin-left","toUpperCase","placeholder","modifiers","create","src","align","align-self","padding","checked","change","padding-top","$$i","$$a","$$el","$$c","$set","slice","_obj","toggled","aria-hidden","isMedia","getMediaType","mime_type","pop","getFieldType","../eventbus","../g3wsdk/workflow/step","../g3wsdk/workflow/workflow","../interactions/pickfeaturesinteraction","../utils/addTableFeature","../utils/chooseFeatureFromFeatures","../utils/convertToGeometry","../utils/getEditingLayerById","../utils/getLayersDependencyFeatures","../utils/getRelationFieldsFromRelation","../utils/getRelationId","../utils/isSameBaseGeometryType","../utils/setAndUnsetSelectedFeaturesStyle","../utils/updateWorkflows","../workflows","7","_typeof","_cloneFeature","_getRelationsInEditing","Media_Field","constructor","Fields","media_field","g3w-media","dataTable","showTool","cap","outerHeight","showValue","headers","h","isMediaField","header","input","save","isrelation","_linkFeatures","cancel","deleteFeature","uid","element","relationinediting","getChildren","getRelationsInEditing","getRelations","getArray","result","rows","row","_x","copyFeature","cloneFeature","__gis3w_feature_uid","setDataTable","editFeature","_feature2","linkFeature","addindex","disableSideBar","max-width","margin-right","../utils/cloneFeature","../utils/getRelationsInEditing","8","getResolutionFromScale","snapInteraction","helpmessage","snapAll","editDisabled","startstopediting","hasRelations","dependencies","changingtools","canEdit","showtoolsoftool","toolsoftool","isLayerReady","ready","toolboxCursor","get_tool_title","language","$emit","fitZoomToScale","goToRes","getCenter","_constraints","scale","getMapUnits","toggleEditing","toggleTool","toggleFilterByRelation","_initSnap","snapFeatures","Collection","snapEvents","snapToolboxes","snapUnwatches","activeSnapInteraction","checkedAll","removeInteraction","extend","olKey","getFeaturesCollection","addSnapFeatures","settersAndKeys","addFeatures","onbefore","getState","setShowSnapAll","_unloadSnap","event","showSnapAll","interaction","Snap","state.activetool","messages","state.editing.on","state.toolsoftool","newTools","oldTools","onChange","mobile","isMobile","toolboxactive","geolayer","background","pull-right","g3w-icon-toggled","panel-body","cursor","preventDefault","9","completeStep","buttonnext","dynamic","getFontClass","10","Session","ChangesManager","_createClass","Constructor","protoProps","staticProps","defineProperties","descriptor","Flow","_classCallCheck","instance","Queque","task","tasks","reverse","shift","counter","queques","end","micro","Deferred","getContext","getSteps","runStep","runMicroTasks","setMessages","getLength","onDone","fail","onError","clearQueques","isRunning","base","inherit","G3WObject","Actions","fnc","opposite","execute","object","items","_g3wsdk$core$G3WObjec","_inherits","subClass","superClass","ReferenceError","__proto__","getPrototypeOf","setters","_editor","started","getfeatures","_allfeatures","saveChangesOnServer","maxSteps","current","_states","_constrains","_history","Proxy","prop","__add","getRelationStates","__getRelationStates","insertState","__insertState","removeState","deleteState","removeStates","removeChangesFromHistory","insertStates","__insertStates","__undo","clearHistory","__redo","setItemsFeatureIds","__setItemsFeatureIds","__getState","getFirstState","__getFirstState","getLastState","getLastHistoryState","getCurrentState","__getCurrentState","getCurrentStateIndex","__getCurrentStateIndex","__canCommit","__canUndo","__canRedo","__commit","register","setPrototypeOf","historyId","action","newItems","own","stateId","s","Registry","unregister","uniqueId","Date","now","setProperties","removeNotEditableProperties","getEditingNotEditableFields","unset","oldFeature","is_new","ids","getCommitItems","states","newFeat","oldFeat","revert","rollback","unshift","temporarychange","setChanges","itemsToCommit","commitObj","lockids","isRelation","sessionRelation","getLockIds","GeoJSONFormat","format","GeoJSON","itemObj","writeFeatureObject","childs_properties","getChild","getFather","_ref4$layerId","MapLayersStoresRegistry","is3DGeometry","geometry","set3DGeometryType","_ref5$ids","_ref5$relations","_ref5$__esPromise","__esPromise","_response$response$ne","applyCommitResponse","idx","_this14","getLastStateId","relationStates","_state","_this15","_checkSessionItems","_this16","_this17","unsetnewid","setId","_this18","currentState","_this19","currentStateIndex","checkCommitItems","commitItem","_this20","isDeleted","isUpdated","_item","isAdded","sessions","_sessions","setSession","getSessions","../../utils/promisify","11","12","_toolbox","_possibleConstructorReturn","FeaturesStore","OlFeaturesStore","_features","dispatchEvent","removeAt","insertAt","opts","Editor","_featuresstore","_layer","_ref5$","ToolBox","rFeature","ff","childField","clearState","addLockIds","new_lockids","_commit","relationId","getRelationByFatherChildren","getFatherField","getChildField","_started","_filter","bbox","getFeaturesStore","resetEditingSource","doRequest","is_cached","extent","containsExtent","../../toolboxes/toolbox","13","_editor2","_deprecated","constant","DEFAULT_EDITING_CAPABILITIES","SessionsRegistry","Task","WorkflowsStack","../deprecated","./editing/editor","./workflow/step","./workflow/workflow","14","_options","_run","_stop","_inputs","_context","_outputs","running","usermessagesteps","escKeyPressEventHandler","setSteps","onRun","onStop","_tools","root","events","getMap","_pointerMoveCursor","getTargetElement","forEachFeatureAtPixel","pixel","_steps","setUserMessageSteps","_isContentChild","saveChange","callback","unbind","escKeyUpHandler","setInputs","setContext","_workflow$_toolsoftoo","toolsOfTools","snap","measure","removeMeasureInteraction","_toolsoftool","emit","__stop","MESSAGES","15","_promise","_child","_stackIndex","runOnce","_messages","_userMessageSteps","setUserMessagesSteps","helpMessage","_stepIndex","messagesSteps","getUserMessageSteps","addChild","getStackIndex","clearUserMessagesSteps","__run","isChild","position","size","hooks","body","clearMessages","_x8","_x9","_ref5$tools","setToolsOfTools","feats","keyCode","workflows","getFirst","getLast","getAt","../../components/UserMessage.vue","./step","16","close_editing_panel","errors","no_layers","some_layers","editing_changes","editing_data","editing_attributes","edit_relation","back_to_relations","no_relations_found","relation_data","relation_already_added","list_of_relations_feature","tooltip","edit_layer","edit","copy","pastefeaturesfromotherlayers","addpart","deletepart","merge","add_feature","delete_feature","move_feature","update_vertex","update_feature","update_multi_features","update_multi_features_relations","copyfeaturefromexternallayer","snapall","select_elements","select_element","edit_table","draw_new_feature","action_confirm","double_click_delete","edit_feature_vertex","move","select_feature_to_relation","show_edit_feature_form","pick_feature","insert_attributes_feature","draw_part","draw_geometry","selectSHIFT","selectDrawBox","selectDrawBoxAtLeast2Feature","selectPoint","selectPointSHIFT","selectMultiPointSHIFT","selectMultiPointSHIFTAtLeast2Feature","copyCTRL","selectStartVertex","selectToPaste","draw_split_line","featureslockbyotheruser","splitted","nosplittedfeature","press_esc","offline","delete_feature_relations","unlink_relation","commit_feature","toolbox_has_relation","saved","saved_local","loading_data","constraints","enable_editing","pdf","header_relation","header_add","header_update_delete","loading_table_data","copy_and_paste_from_other_layer_mandatory_fields","no_feature_selected","select_min_2_features","draw_or_copy","copy_feature_from_other_layer","form","tooltips","back_to_father","add_relation","link_relation","open_relation_tools","buttons","save_and_back","save_and_back_table","copyfeaturefromotherlayer","edit_attributes","copyfeaturefromprojectlayer","17","editing_multiple_relations","filter_by_relation","toolbox_has_no_geometry","18","19","20","_it2","_interopRequireDefault","_en2","_fi2","_se2","_fr2","_de2","_ro2","_pl2","it","en","fi","se","fr","de","ro","pl","./de","./en","./fi","./fr","./it","./pl","./ro","./se","21","save_table","22","23","24","25","_ref39","_rollback","allSettled","_ref40","_ref46","_ref45","_ref43","_ref41","_ref41$","del","_ref41$$relations","has_features","_ref42","_x23","_ref44","XHR","url","getUrl","params","vector","at","setGeometry","_x24","_x25","_i18n","_i18n2","_createFeature","_addPartToMultigeometries","G3W_FID","_g3wsdk$core$i18n","_g3wsdk$core$layer","LayersStore","MapLayersStoreRegistry","_g3wsdk$core$plugin","Plugin","PluginService","_g3wsdk$core$utils","Panel","serverErrorParser","parsers","Server","_g3wsdk$ol$utils","getScaleFromResolution","_ref34","_class","fontClasses","className","toolboxes","_toolboxes","layers_in_error","formComponents","subscribers","showToolboxesExcluded","cb","editableLayers","start-editing","show-relation-editing","start_editing","before","after","show_errors","editFeatureKey","panel","currentLayout","getCurrentLayoutName","unwatchLayout","layout","__current","layoutName","onMapControlToggled","isClickMap","getActiveTool","setService","subscribe","unsubscribe","addToolBox","resetAPIDefault","getSessionById","setApplicationEditingConstraints","undoRedoLayerUniqueFieldValues","undoRedoRelationUniqueFieldValues","stopEditing","startEditing","addLayerFeature","_init","setHookLoading","setApi","api","addNewFeature","createFeature","commitChanges","getMapService","updateLayerFeature","deleteLayerFeature","hidePanel","hideEditingPanel","showPanel","setSaveConfig","addFormComponents","addLayersStore","queryable","TOC_ORDER","getLayerForEditing","vectorurl","project_type","status","filter_expression","usecompleter","layer_id","has_filter","filter_fields","relation_reference","_options$values","getFilterData","fformatter","_options$values2","_response","getDataTable","ordering","orderbyvalue","fatherId","isChildEditable","vectorjoin_id","getColor","setColor","getLayersStore","addLayers","getFathers","isReady","_setupGUI","setReady","registerPlugin","gid","fid","tb","showEditingPanel","once","toolBox","getEditingConstraints","units","parseInt","getView","getResolution","setResolution","geom","addPartTool","op","_w","zoomToGeometry","addfeature","addPartToMultigeometries","setOperator","addToolGroup","sub","sessionItems","undoItems","relationSessionItems","redoItems","_ref19","disableClickMapControls","_ref22$plugin","_ref22$toolboxes","toolboxIds","setEditingConstraints","commitpromises","refreshMap","_ref25","_ref25$modal","_ref25$close","close","success","has_changes","serverError","SAVE","CANCEL","CLOSEMODAL","propsData","$mount","closeButton","curr","prev","currLayerId","relationsIds","has_relations","GIVE_ME_A_NAME","lock","featureid","online2","textMessage","_ref29$sessionItems","has_change","oldVal","newVal","_ref30","_ref32$","_x11","disablemapcontrols","setTitle","_x14","_ref36","_ref35","nofeatures","nofeatures_field","showgoback","saveAll","_ref37","_ref37$mode","_ref37$cb","_ref37$modal","_ref38","_ref38$components","internalPanel","resourcesUrl","closePanel","removeTools","removeLayersStore","setCurrentLayout","./components/Changes.vue","./components/Editing.vue","./g3wsdk","./g3wsdk/workflow/step","./g3wsdk/workflow/workflow","./i18n","./toolboxes/toolbox","./utils/addPartToMultigeometries","./utils/createFeature","./utils/getEditingLayerById","./utils/promisify","./utils/setAndUnsetSelectedFeaturesStyle","./workflows","26","_ol$interaction$Point","featuresAtPixel","getFeaturesAtPixel","layerFilter","hitTolerance","any","handleDownEvent","handleUpEvent","handleMoveEvent","Pointer","27","_createEditingDataOptions","_setLayerUniqueFieldValues","_chooseFeature","_evaluateExpressionFields","_getNotEditableFieldsNoPkValues","_getDeltaXY","_getRelationsInEditingByFeature","_isPointOnVertex","_handleSplitFeature","_splitFeatures","_dissolve","SelectElementsStep","PickFeatureStep","GEOMETRY_TYPES","removeZValueToOLFeatureGeometry","debounce","_ref47","is_line","is_poly","is_table","iconGeometry","is_point","isLineGeometryType","isPolygonGeometryType","_start","__clearHistory","__getLastHistoryState","_session","__startSession","__stopSession","__getFeatures","__saveChangesOnServer","isStarted","__isStarted","__getHistory","__getEditor","__push","__pushDelete","__save","__pushAdd","__pushUpdate","__rollback","__rollbackDependecies","__undoSession","__redoSession","__getCommitItems","__clearSession","customTitle","toolboxheader","toolmessages","isFather","_unregisterStartSettersEventsKey","_getFeaturesOption","_enabledtools","_disabledtools","getEditingConstrains","chooseFeature","validate","getRelationsInEditingByFeature","ismobile","condition","_ref7$features","enable","updatelayers","checkGeometry","BASELAYER","catalogService","_ref8$tool","openFormStep","originalLayer","vueInstance","showModalDialog","ok","$destroy","Draw","isPointOnVertex","drawend","edge","to","_evt$feature$getGeome","_evt$feature$getGeome2","x","y","deltaXY","getDeltaXY","featuresLength","promisesDefaultEvaluation","translate","_coordinates","_deltaXY","getEditingMediaFields","evaluateExpressionFields","noteditablefieldsvalues","getNotEditableFieldsNoPkValues","finally","originaLayer","originalFeature","geometries","MULTIPOLYGON","getPolygons","MULTILINE","MULTILINESTRING","getLineStrings","MULTIPOINT","getPoints","Vector","getPixelFromCoordinate","tempLayer","getStyle","addLayer","found","_geometries","g","removeLayer","draw_line","freehandCondition","never","isSplitted","splittedGeometries","splitFeatures","splittedGeometriesLength","handleSplitFeature","choose","dissolve","has_same_geom","disabledtoolsoftools","getMessages","Function","_startTool","_stopTool","originalState","_getFeaturesEvent","constraint","startResolve","_olStartKeysEvent","unwatches","inEditing","registerEvents","constraintFeatureFilter","createEditingDataOptions","in_editing","showZoomCursor","getCurrentToggledMapControl","cursorClass","setMouseCursor","getViewport","applicationConstraint","_options$toolboxheade","_options$startstopedi","_options$changingtool","unKeyLock","setEnablesDisablesTools","onceafter","subtitle","handlerAfterSessionGetFeatures","_handleScaleConstraint","setFeaturesOptions","setLayerUniqueFieldValues","stopLoading","setEditing","_x15","is_started","isMapHidden","startLoading","disableCanEditEvent","k","uw","enableTools","clearToolboxMessages","_stopSessionChildren","_ref30$ids","_ref30$relations","_ref30$__esPromise","_x18","setMessage","setEnable","keyChangeResolution","_ref32$tools","_ref32$options","_options$editing_cons","editing_constraints","_ref33$tools","_ref33$excludetools","excludetools","_ref33$options","_options$editing_cons2","UPDATEONEFEATUREONLYTOOLSID","update_tools","toolsId","_tools$enabled","disableTools","_tools$disabled","_ref34$options","_options$active","disabledtools","_state$toolsoftool","_deactivetools","getHelpMessage","getRunningStep","activeTool","removeAllListeners","checkSessionItems","_this21","_feature3","_this22","_feature4","_this23","_this24","_this25","_this26","_this27","getContentLength","relationsId","addRelationId","_x30","_this28","_startOp","hideSidebar","showSidebar","_x32","_x33","_x34","_this29","../components/CopyFeaturesFromOtherLayers.vue","../utils/addPartToMultigeometries","../utils/checkSessionItems","../utils/chooseFeature","../utils/createEditingDataOptions","../utils/dissolve","../utils/evaluateExpressionFields","../utils/getDeltaXY","../utils/getNotEditableFieldsNoPkValues","../utils/getRelationsInEditingByFeature","../utils/handleSplitFeature","../utils/isPointOnVertex","../utils/setLayerUniqueFieldValues","../utils/splitFeatures","../utils/unlinkRelation","28","setCoordinates","./promisify","29","addRemoveToMultipleSelectFeatures","selIndex","_originalStyle","_setFeaturesSelectedStyle","setFeaturesSelectedStyle","setStyle","../utils/setFeaturesSelectedStyle","30","createNewFeature","get_default_value","31","coords","c1","c2","poly","_coords","32","33","34","_ref$features","comp","../components/ChooseFeatureToEdit.vue","35","cloneNew","36","addZValueToOLFeatureGeometry","cloned","__layerId","convertSingleMultiGeometry","_g3wsdk$core$geoutils","37","38","39","_ref$index","_ref$clone","parser","jsts","io","OL3Parser","jstsdissolvedFeatureGeometry","baseFeature","baseFeatureGeometry","baseFeatureGeometryType","lineMerger","operation","linemerge","LineMerger","addLineString","GeometryFactory","createLineString","read","mergedLineString","getMergedLineStrings","toArray","union","dissolvedFeatureGeometry","write","dissolvedFeatureGeometryType","dissolvedFeatureGeometryCoordinates","40","exclude","default_expression","apply_on_update","inputService","handleDefaultExpressionFormInput","qgs_layer_id","parentData","_getParentFormData","getParentFormData","handleFilterExpressionFormInput","./getParentFormData","41","_getCoordinates","42","43","kv","kv_field","44","getFormFields","savedfeatureFnc","unique_values","unique","_value","current_values","v","sortNumericArray","sortAlphabeticallyArray","has","exclude_values","_handleMulti","sensitivity","ascending","stringify","forceNull","45","all","setLoading","_getRelationFieldsFro","featureValues","46","47","_Workflow$Stack$getPa","_Workflow$Stack$getPa2","48","getRelation1_1ChildFeature","childFeatureStore","fatherFormRelationField","fatherLayerId","childLayerId","locked","oncebefore","createFilterFormInputs","search_endpoint","49","_fatherField","_childField","50","childId","51","_ref$relations","52","relationsinediting","fatherLayer","relationLayerId","valid","53","handleRelation1_1LayerFields","_ref2$features","_ref2$fields","newChild","childFeature","fieldsUpdated","isNewChildFeature","getPrefix","54","_ref2$splittedGeometr","oriFeature","splittedGeometry","_newFeature","55","56","57","listenRelation1_1FieldChange","ONE","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_ret","relationLockFeatures","editableRelatedFatherChild","formField","_getRelation1_1ChildFeature","_relationLockFeatures","return","./getRelation1_1ChildFeature","58","console","59","selectOriginalStyleHandle","originalStyle","_inputs$features","is_single","60","_getSelectedStyle","selectedStyle","createSelectedStyle","61","getWidgetData","join","62","splitfeature","splitFeature","63","_ref$dialog","unlink","./updateWorkflows","64","65","_getFormFields","_handleRelation1_1LayerFields","_listenRelation1_1FieldChange","_addRemoveToMultipleSelectFeatures","Component","AreaInteraction","LengthInteraction","createMeasureTooltip","removeMeasureTooltip","originalGeometryType","getEditingGeometryType","getOLGeometry","drawInteraction","finishCondition","drawstart","drawingFeature","addEventListener","_delKeyRemoveLastPoint","_add","setActive","measureInteraction","projection","getProjection","drawColor","removeLastPoint","removeEventListener","_snap","_modifyInteraction","Modify","deleteCondition","modifystart","modifyend","getExtent","isGeometryChange","changeKey","Translate","translatestart","translateend","_multi","layerName","formService","setLoadingContent","_originalFeatures","setInput","getLayerEditingFormStructure","showForm","crumb","dataid","isnew","context_inputs","formStructure","hasFormStructure","headerComponent","_saveAll","template","disableContent","getLastStep","saveDefaultExpressionFieldsNotDependencies","setFieldsWithValues","getFields","getBackButtonLabel","cbk","eventButtons","false","handleRelation","getRelationById","setCurrentComponentById","_x10","addComponents","_originalFeature","setContextService","_unwatchs","disableSidebar","is_parent_table","isType","contextService","closeForm","resetCurrentLayout","_Object$assign","content","internalComponent","_selectInteractions","single","multipleselectfeatures","_vectorLayer","geometryFunction","createBox","getFeaturesInExtent","dragbox","DragBox","shiftKeyOnly","forEachFeatureIntersectingExtent","chain","../components/FormRelation.vue","../components/Table.vue","../utils/addRemoveToMultipleSelectFeatures","../utils/getFormFields","../utils/getParentFormData","../utils/handleRelation1_1LayerFields","../utils/listenRelation1_1FieldChange","66"],"mappings":"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"}