{"version":3,"file":"../../../plugin.js","sources":["plugin.js"],"sourcesContent":["/** START: g3w-client/src/plugins/_version.js */\n(function() {\n  const plugins = window && window.initConfig && window.initConfig.group && window.initConfig.group.plugins;\n  if (plugins) {\n    plugins[\"editing\"] = Object.assign(plugins[\"editing\"] || {},\n      {\n        version : \"3.8.0-alpha.2\",\n        hash    : \"d9e7573\",\n        branch  : \"issue_98\",\n      });\n  }\n})();\n/** END: g3w-client/src/plugins/_version.js */\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nvar inserted = exports.cache = {}\n\nfunction noop () {}\n\nexports.insert = function (css) {\n  if (inserted[css]) return noop\n  inserted[css] = true\n\n  var elem = document.createElement('style')\n  elem.setAttribute('type', 'text/css')\n\n  if ('textContent' in elem) {\n    elem.textContent = css\n  } else {\n    elem.styleSheet.cssText = css\n  }\n\n  document.getElementsByTagName('head')[0].appendChild(elem)\n  return function () {\n    document.getElementsByTagName('head')[0].removeChild(elem)\n    inserted[css] = false\n  }\n}\n\n},{}],2:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\"summary[data-v-57374b92]{display:list-item;font-weight:700;padding:.5em;cursor:pointer;background-color:rgba(255,255,0,.25);font-size:medium;user-select:none}ul[data-v-57374b92]{list-style:none;padding-left:0}ul>li[data-v-57374b92]{margin-bottom:8px}ins[data-v-57374b92]{background-color:lime;text-decoration-line:none}del[data-v-57374b92]{background-color:tomato}dl[data-v-57374b92]{display:grid;grid-template:auto/.5fr 1fr;margin-bottom:0;word-break:break-all}dt[data-v-57374b92]{background:#fee}dd[data-v-57374b92]{background:#f1f2f4}dd[data-v-57374b92],dt[data-v-57374b92]{margin:0;padding:.3em .5em;border-top:1px solid #fff}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _areCoordinatesEqual = require('../utils/areCoordinatesEqual');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nexports.default = {\n\n  name: \"changes\",\n\n  props: {\n    commits: {\n      type: Object,\n      required: true\n    },\n    layer: {\n      type: Object,\n      required: true\n    },\n    relation: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data: function data() {\n    return {\n      features: this.layer.readFeatures(),\n      efeatures: this.layer.readEditingFeatures() };\n  },\n\n\n  methods: {\n    getFormattedValue: function getFormattedValue(feat, key) {\n      if (!feat) {\n        return;\n      }\n\n      if ('geometry' === key && feat.get(key)) {\n        return '(' + feat.get(key).getFlatCoordinates().length / 2 + ')';\n      }\n      return (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n        layerId: this.layer.getId(),\n        feature: feat,\n        property: key\n      });\n    },\n    getValue: function getValue(item, key) {\n      return this.getFormattedValue(this.getFeature(item), key);\n    },\n    getEditingValue: function getEditingValue(item, key) {\n      return this.getFormattedValue(this.getEditingFeature(item), key);\n    },\n    hasValue: function hasValue(item, key) {\n      var feat = this.getFeature(item);\n      var efeat = this.getEditingFeature(item);\n      return !(feat && efeat && null === feat.get(key) && null === efeat.get(key) || feat && !efeat && null === feat.get(key));\n    },\n    getId: function getId(item) {\n      return item.id || item;\n    },\n    getEditingFeature: function getEditingFeature(item) {\n      var id = this.getId(item);\n      return this.efeatures.find(function (f) {\n        return id === f.getId();\n      });\n    },\n    getFeature: function getFeature(item) {\n      var id = this.getId(item);\n      return this.features.find(function (f) {\n        return id === f.getId();\n      });\n    },\n    getType: function getType(item) {\n      var feat = this.getEditingFeature(item) || this.getFeature(item);\n      return feat && feat.getGeometry && feat.getGeometry() ? feat.getGeometry().getType() : '';\n    },\n    isEdited: function isEdited(item, key) {\n      var feat = this.getFeature(item);\n      var efeat = this.getEditingFeature(item);\n      if ([feat, efeat].includes(undefined)) {\n        return false;\n      }\n      if (this.getType(item) && 'geometry' === key) {\n        return !(0, _areCoordinatesEqual.areCoordinatesEqual)({ feature: feat, coordinates: efeat.get(key).getCoordinates() });\n      }\n      return efeat.get(key) !== feat.get(key);\n    },\n    getAttrs: function getAttrs(item) {\n      var feat = this.getEditingFeature(item) || this.getFeature(item);\n      return Object.entries(feat ? feat.getProperties() : {}).sort(function (a, b) {\n        return a[0] > b[0];\n      });\n    },\n    getLayerById: function getLayerById(id) {\n      return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').service.getLayerById(id);\n    }\n  },\n\n  mounted: function () {\n    var _ref = _asyncToGenerator(function* () {\n      this.$refs.value.filter(function (d) {\n        return !d.textContent;\n      }).forEach(function (d) {\n        return d.innerHTML = '<i><code>&lt;empty&gt;</code></i>';\n      });\n    });\n\n    function mounted() {\n      return _ref.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.relation)?_c('h4',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin:pre\",value:('editing.messages.commit.header_relation'),expression:\"'editing.messages.commit.header_relation'\",arg:\"pre\"}],staticClass:\"skin-color g3w-long-text\",staticStyle:{\"font-weight\":\"bold\",\"margin\":\"15px 0\"}},[_vm._v(\": \"+_vm._s(_vm.layer.getName()))]):_vm._e(),_vm._v(\" \"),_vm._l((Object.keys(_vm.commits).filter(function (c) { return _vm.commits[c].length; })),function(c){return [_c('h4',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin:pre\",value:((\"editing.messages.commit.\" + c)),expression:\"`editing.messages.commit.${c}`\",arg:\"pre\"}]},[_vm._v(\" (\"+_vm._s(_vm.commits[c].length)+\") \")]),_vm._v(\" \"),_c('divider'),_vm._v(\" \"),_c('ul',_vm._l((_vm.commits[c]),function(item){return _c('li',[_c('details',[_c('summary',[_vm._v(_vm._s(_vm.getType(item))+\" #\"+_vm._s(_vm.getId(item)))]),_vm._v(\" \"),_vm._l((_vm.getAttrs(item)),function(ref){\nvar key = ref[0];\nvar val = ref[1];\nreturn [(_vm.hasValue(item, key))?_c('dl',[_c('dt',[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"),_c('dd',[(_vm.isEdited(item, key))?[_c('del',{ref:\"value\",refInFor:true},[_vm._v(_vm._s(_vm.getValue(item, key)))]),_vm._v(\" ‚Üê \"),_c('ins',{ref:\"value\",refInFor:true},[_vm._v(_vm._s(_vm.getEditingValue(item, key)))])]:_c('span',{ref:\"value\",refInFor:true},[_vm._v(_vm._s(_vm.getEditingValue(item, key) || _vm.getValue(item, key)))]),_vm._v(\" \"),('geometry' === key)?_c('i',[_c('code',[_vm._v(\"<coords>\")])]):_vm._e()],2)]):_vm._e()]})],2)])}),0)]}),_vm._v(\" \"),_vm._l((Object.entries(_vm.commits.relations)),function(ref){\nvar id = ref[0];\nvar commits = ref[1];\nreturn _c('changes',{attrs:{\"commits\":{\n      add:       commits.add,\n      update:    commits.update,\n      delete:    commits.delete,\n      relations: commits.relations\n    },\"relation\":true,\"layer\":_vm.getLayerById(id)}})})],2)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-57374b92\"\n\n},{\"../utils/areCoordinatesEqual\":31,\"../utils/getFeatureTableFieldValue\":42,\"vueify/lib/insert-css\":1}],3:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".choose-and-zoom-to-feature[data-v-4e020450]{display:flex;flex-direction:column;justify-content:space-between}#editing-layers-choose-feature .editing-choose-feature-radio-input[data-v-4e020450]{align-items:center;padding:5px;position:relative;display:flex;justify-content:space-between;border-bottom:1px solid #eee}.ztf[data-v-4e020450]{padding-left:3px;font-size:1.3em;cursor:pointer;margin-top:10px}.magic-radio+label[data-v-4e020450]{color:transparent}.feature-attributes[data-v-4e020450]{overflow-x:auto;display:flex}.feature-attributes>div[data-v-4e020450]{display:flex;flex-direction:column;justify-content:space-between;padding:5px}.f-attr[data-v-4e020450]{font-weight:700;margin-bottom:10px}.f-val[data-v-4e020450]{align-self:start;white-space:nowrap}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar GUI = g3wsdk.gui.GUI;\nexports.default = {\n\n  name: 'choosefeature',\n\n  data: function data() {\n    return {\n      feature: this.$options.feature\n    };\n  },\n\n\n  methods: {\n    selectFeature: function selectFeature(feature) {\n      this.feature.splice(0);\n      this.feature.push(feature);\n    },\n    getAttributesFeature: function getAttributesFeature(feature) {\n      var properties = feature.getProperties();\n      return this.$options.attributes.map(function (_ref) {\n        var label = _ref.label,\n            name = _ref.name;\n        return { attribute: label, value: properties[name] };\n      });\n    },\n    zoomToFeature: function zoomToFeature(feature) {\n      var map = GUI.getService('map');\n      map.zoomToFeatures([feature], { highlight: true, duration: 1000 });\n    }\n  },\n\n  mounted: function mounted() {\n    GUI.closeContent();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editing-layers-choose-feature\"}},_vm._l((_vm.$options.features),function(feature,index){return _c('div',{staticClass:\"editing-choose-feature-radio-input\"},[_c('section',{staticClass:\"choose-and-zoom-to-feature\"},[_c('div',[_c('input',{staticClass:\"magic-radio\",attrs:{\"id\":(\"choose_feature_\" + index),\"name\":\"radio\",\"type\":\"radio\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectFeature(feature)}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"choose_feature_\" + index)}},[_vm._v(\"id\")])]),_vm._v(\" \"),_c('div',{staticClass:\"ztf skin-color\",class:_vm.g3wtemplate.font['marker'],on:{\"click\":function($event){$event.stopPropagation();return _vm.zoomToFeature(feature)}}})]),_vm._v(\" \"),_c('section',{staticClass:\"feature-attributes\"},_vm._l((_vm.getAttributesFeature(feature)),function(ref){\nvar attribute = ref.attribute;\nvar value = ref.value;\nreturn _c('div',[_c('span',{staticClass:\"f-attr\"},[_vm._v(_vm._s(attribute))]),_vm._v(\" \"),_c('span',{staticClass:\"f-val\"},[_vm._v(_vm._s(value))])])}),0)])}),0)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-4e020450\"\n\n},{\"vueify/lib/insert-css\":1}],4:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-other-layers-features[data-v-11cf85ac]{overflow:auto}.edit-multi-features[data-v-11cf85ac]{display:flex;justify-content:flex-end}.edit-multi-features>label[data-v-11cf85ac]{color:#000}.layer-title[data-v-11cf85ac]{font-weight:700;font-size:1.2em}.copy-features-for-layer-content[data-v-11cf85ac]{overflow-x:auto}.ztf[data-v-11cf85ac]{padding:0 5px 15px;font-size:1.1em;cursor:pointer;margin-right:5px}.GIVE_ME_A_NAME_1[data-v-11cf85ac]{padding:5px;position:relative;display:flex;align-items:baseline;border-bottom:1px solid #eee}.GIVE_ME_A_NAME_2[data-v-11cf85ac]{display:flex;flex-direction:column;border-right:1px solid #eee}.GIVE_ME_A_NAME_2 .magic-checkbox+label[data-v-11cf85ac]{color:#fff}.feature-attributes[data-v-11cf85ac]{display:flex;flex-direction:column;padding:10px}.f-attr[data-v-11cf85ac]{font-weight:700;margin-bottom:10px}.f-value[data-v-11cf85ac]{align-self:start}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar G3W_FID = g3wsdk.constant.G3W_FID;\nvar GUI = g3wsdk.gui.GUI;\nvar getAlphanumericPropertiesFromFeature = g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature;\nvar MapLayersStoreRegistry = g3wsdk.core.map.MapLayersStoreRegistry;\nvar resizeMixin = g3wsdk.gui.vue.Mixins.resizeMixin;\nexports.default = {\n\n  name: 'Copyfeaturesfromotherlayers',\n\n  mixins: [resizeMixin],\n\n  data: function data() {\n    return {\n      selectedFeatures: this.$options.selectedFeatures,\n      disabled: true,\n      _height: 0\n    };\n  },\n\n\n  computed: {\n    showEditAttributes: function showEditAttributes() {\n      return Object.values(this.$options.layers).reduce(function (sum, _ref) {\n        var features = _ref.features;\n\n        sum = sum + features.length;\n        return sum;\n      }, 0) > 1;\n    }\n  },\n\n  methods: {\n    resize: function resize() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        return _this.$data._height = window.innerHeight - 200;\n      });\n    },\n    getAttributesFeature: function getAttributesFeature(feature, layerId) {\n      var _$options$layers$laye = this.$options.layers[layerId],\n          external = _$options$layers$laye.external,\n          fields = _$options$layers$laye.fields;\n\n      var props = getAlphanumericPropertiesFromFeature(feature.getProperties());\n      return props.filter(function (prop) {\n        return prop !== G3W_FID;\n      }).map(function (attr) {\n        return {\n          attribute: external ? attr : fields.find(function (f) {\n            return f.name === attr;\n          }).label,\n          value: feature.get(attr)\n        };\n      });\n    },\n    selectFeature: function selectFeature(feature) {\n      var selected = this.selectedFeatures.find(function (f) {\n        return f === feature;\n      });\n      if (selected) {\n        this.selectedFeatures = this.selectedFeatures.filter(function (f) {\n          return f !== feature;\n        });\n      } else {\n        this.selectedFeatures.push(feature);\n      }\n      this.disabled = this.selectedFeatures.length < 2;\n      this.$options.editAttributes.state = !this.disabled && this.$options.editAttributes.state;\n    },\n    getLayerTitle: function getLayerTitle(layerId) {\n      var layer = MapLayersStoreRegistry.getLayerById(layerId);\n      return layer ? layer.getTitle() : GUI.getService('map').getLayerById(layerId).get('name');\n    },\n    zoomToFeature: function zoomToFeature(feature) {\n      GUI.getService('map').zoomToFeatures([feature], { highlight: true, duration: 1000 });\n    }\n  },\n\n  beforeCreate: function beforeCreate() {\n    this.delayType = 'debounce';\n  },\n  mounted: function mounted() {\n    GUI.closeContent();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editing-layers-features\"},[(_vm.showEditAttributes)?_c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.disabled),expression:\"disabled\"}],staticClass:\"edit-multi-features\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.$options.editAttributes.state),expression:\"$options.editAttributes.state\"}],staticClass:\"magic-checkbox\",attrs:{\"id\":\"g3w_edit_attributes_of_select_feature_from_layer\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.$options.editAttributes.state)?_vm._i(_vm.$options.editAttributes.state,null)>-1:(_vm.$options.editAttributes.state)},on:{\"change\":function($event){var $$a=_vm.$options.editAttributes.state,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.$options.editAttributes, \"state\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.$options.editAttributes, \"state\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.$options.editAttributes, \"state\", $$c)}}}}),_vm._v(\" \"),_c('label',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.modal.tools.copyfeaturefromotherlayer.edit_attributes'),expression:\"'editing.modal.tools.copyfeaturefromotherlayer.edit_attributes'\"}],attrs:{\"for\":\"g3w_edit_attributes_of_select_feature_from_layer\"}})]):_vm._e(),_vm._v(\" \"),_c('section',{staticClass:\"g3w-editing-other-layers-features\",style:({height: ((_vm.$data._height) + \"px\")})},_vm._l((Object.keys(_vm.$options.layers)),function(layerId){return _c('div',[_c('div',{staticClass:\"layer-title skin-color\"},[_vm._v(_vm._s(_vm.getLayerTitle(layerId)))]),_vm._v(\" \"),_c('divider'),_vm._v(\" \"),_c('div',{staticClass:\"copy-features-for-layer-content\"},_vm._l((_vm.$options.layers[layerId].features),function(feature,index){return _c('div',{staticClass:\"GIVE_ME_A_NAME_1\"},[_c('div',{staticClass:\"GIVE_ME_A_NAME_2\"},[_c('div',{class:['ztf', 'skin-color', _vm.g3wtemplate.font['marker']],on:{\"click\":function($event){$event.stopPropagation();return _vm.zoomToFeature(feature)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.steps.help.select_elements'),expression:\"'plugins.editing.steps.help.select_elements'\",arg:\"right\",modifiers:{\"create\":true}}]},[_c('input',{staticClass:\"magic-checkbox\",attrs:{\"id\":(layerId + \"_\" + index + \"_select_feature_from_layer\"),\"type\":\"checkbox\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectFeature(feature)}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(layerId + \"_\" + index + \"_select_feature_from_layer\")}},[_vm._v(\" \"+_vm._s(feature.getId() || 0))])])]),_vm._v(\" \"),_vm._l((_vm.getAttributesFeature(feature, layerId)),function(ref){\nvar attribute = ref.attribute;\nvar value = ref.value;\nreturn _c('div',{staticClass:\"feature-attributes\"},[_c('span',{staticClass:\"f-attr\"},[_vm._v(_vm._s(attribute))]),_vm._v(\" \"),_c('span',{staticClass:\"f-value\"},[_vm._v(_vm._s(value))])])})],2)}),0)],1)}),0)])}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-11cf85ac\"\n\n},{\"vueify/lib/insert-css\":1}],5:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".copy-features-for-layer-content[data-v-bf3e3ac0]{overflow-x:auto}.copy-features-for-layer-content>div[data-v-bf3e3ac0]{padding:5px;position:relative;display:flex;align-items:baseline;border-bottom:1px solid #eee}.copy-features-for-layer-content .col-1[data-v-bf3e3ac0]{display:flex;flex-direction:column;border-right:1px solid #eee}.feature-attributes[data-v-bf3e3ac0]{display:flex;flex-direction:column;padding:10px}.f-attr[data-v-bf3e3ac0]{font-weight:700;margin-bottom:10px}.f-value[data-v-bf3e3ac0]{align-self:start}.copy-features-for-layer-content .ztf[data-v-bf3e3ac0]{padding:0 5px 15px;font-size:1.1em;cursor:pointer;margin-right:5px}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getProjectLayerFeatureById = require('../utils/getProjectLayerFeatureById');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar G3W_FID = g3wsdk.constant.G3W_FID;\nvar getAlphanumericPropertiesFromFeature = g3wsdk.core.geoutils.getAlphanumericPropertiesFromFeature;\nvar removeZValueToOLFeatureGeometry = g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar MapLayersStoreRegistry = g3wsdk.core.map.MapLayersStoreRegistry;\nvar GUI = g3wsdk.gui.GUI;\nexports.default = {\n\n  name: 'Copyfeaturesfromotherlayers',\n\n  data: function data() {\n    return {\n      features: this.$options.inputs.features || [],\n      selectfeature: null,\n      selectedFeatures: this.$options.selectedFeatures || [],\n      inputs: this.$options.inputs,\n      context: this.$options.context,\n      promise: this.$options.promise,\n      copyLayer: this.$options.copyLayer,\n      external: this.$options.external,\n      isVector: this.$options.isVector\n    };\n  },\n\n\n  methods: {\n    getAttributesFeature: function getAttributesFeature(feature) {\n      var fields = this.$options.external ? null : CatalogLayersStoresRegistry.getLayerById(this.$options.copyLayer.getId()).getFields();\n\n      var props = getAlphanumericPropertiesFromFeature(feature.getProperties());\n      return props.filter(function (prop) {\n        return prop !== G3W_FID;\n      }).map(function (attr) {\n        return {\n          attribute: fields ? fields.find(function (f) {\n            return f.name === attr;\n          }).label : attr,\n          value: feature.get(attr)\n        };\n      });\n    },\n    getLayerTitle: function getLayerTitle(layerId) {\n      return MapLayersStoreRegistry.getLayerById(layerId).getTitle();\n    },\n    zoomToFeature: function zoomToFeature(feature) {\n      var map = GUI.getService('map');\n      map.zoomToFeatures([feature], { highlight: true, duration: 1000 });\n    }\n  },\n\n  watch: {\n    selectfeature: function selectfeature(feature) {\n      this.selectedFeatures.splice(0, 1, feature);\n    },\n    selectedFeatures: function selectedFeatures(features) {\n      this.dialog.find('button.btn-success').prop('disabled', features.length === 0);\n    }\n  },\n\n  mounted: function () {\n    var _ref = _asyncToGenerator(function* () {\n      var _this = this;\n\n      var inputs = this.$options.inputs;\n      var context = this.$options.context;\n      var d = this.$options.promise;\n      var copyLayer = this.$options.copyLayer;\n      var external = this.$options.external;\n      var isVector = this.$options.isVector;\n      var layerId = inputs.layer.getId();\n      var attributes = inputs.layer.getEditingFields().filter(function (attribute) {\n        return !attribute.pk;\n      });\n      var source = inputs.layer.getEditingLayer().getSource();\n\n      this.dialog = GUI.showModalDialog({\n        title: tPlugin('editing.modal.tools.copyfeaturefromprojectlayer.title'),\n        className: 'modal-left',\n        closeButton: false,\n        message: this.$el,\n        buttons: {\n          cancel: {\n            label: 'Cancel',\n            className: 'btn-danger',\n            callback: function callback() {\n              d.reject();\n            }\n          },\n          ok: {\n            label: 'Ok',\n            className: 'btn-success',\n            callback: function () {\n              var _ref2 = _asyncToGenerator(function* () {\n                var features = [];\n                var isThereEmptyFieldRequiredNotDefined = false;\n                if (_this.selectedFeatures.length) {\n                  var selectedFeature = _this.selectedFeatures[0];\n                  var createFeatureWithPropertiesOfSelectedFeature = function createFeatureWithPropertiesOfSelectedFeature(properties) {\n                    attributes.forEach(function (_ref3) {\n                      var name = _ref3.name,\n                          _ref3$validate$requir = _ref3.validate.required,\n                          required = _ref3$validate$requir === undefined ? false : _ref3$validate$requir;\n\n                      var value = properties[name] || null;\n                      isThereEmptyFieldRequiredNotDefined = isThereEmptyFieldRequiredNotDefined || value === null && required;\n                      selectedFeature.set(name, value);\n                    });\n                    var feature = new Feature({\n                      feature: selectedFeature,\n                      properties: attributes.map(function (attribute) {\n                        return attribute.name;\n                      })\n                    });\n\n                    inputs.layer.getEditingNotEditableFields().find(function (field) {\n                      if (inputs.layer.isPkField(field)) {\n                        feature.set(field, null);\n                      }\n                    });\n\n                    removeZValueToOLFeatureGeometry({\n                      feature: feature\n                    });\n                    feature.setTemporaryId();\n                    source.addFeature(feature);\n                    features.push(feature);\n                    context.session.pushAdd(layerId, feature, false);\n                  };\n\n                  if (isVector) {\n                    if (external) {\n                      createFeatureWithPropertiesOfSelectedFeature(selectedFeature.getProperties());\n                    } else {\n                      try {\n                        var layerProjectFeature = yield (0, _getProjectLayerFeatureById.getProjectLayerFeatureById)({\n                          layerId: copyLayer.getId(),\n                          fid: selectedFeature.get(G3W_FID)\n                        });\n                        if (layerProjectFeature) {\n                          createFeatureWithPropertiesOfSelectedFeature(layerProjectFeature.properties);\n                        }\n                      } catch (err) {\n                        console.warn(err);\n                      }\n                    }\n                  } else {}\n                }\n                if (features.length && features.length === 1) {\n                  inputs.features.push(features[0]);\n                } else {\n                  if (isThereEmptyFieldRequiredNotDefined) {\n                    GUI.showUserMessage({\n                      type: 'warning',\n                      message: 'plugins.editing.messages.copy_and_paste_from_other_layer_mandatory_fields',\n                      autoclose: true,\n                      duration: 2000\n                    });\n                  }\n                  inputs.features.push(features);\n                }\n                features.forEach(function (feature) {\n                  return _this.service.fireEvent('addfeature', feature);\n                });\n                d.resolve(inputs);\n              });\n\n              function callback() {\n                return _ref2.apply(this, arguments);\n              }\n\n              return callback;\n            }()\n          }\n        }\n      });\n      this.dialog.find('button.btn-success').prop('disabled', true);\n    });\n\n    function mounted() {\n      return _ref.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editing-layers-features\"},[_c('div',{staticClass:\"copy-features-for-layer-content\"},_vm._l((_vm.features),function(feature,index){return _c('div',[_c('div',{staticClass:\"col-1\"},[_c('div',{staticClass:\"ztf skin-color\",class:_vm.g3wtemplate.font['marker'],on:{\"click\":function($event){$event.stopPropagation();return _vm.zoomToFeature(feature)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.steps.help.select_elements'),expression:\"'plugins.editing.steps.help.select_elements'\",arg:\"right\",modifiers:{\"create\":true}}]},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectfeature),expression:\"selectfeature\"}],staticClass:\"magic-radio\",attrs:{\"id\":(_vm.layerId + \"_\" + index + \"_select_feature_from_layer\"),\"name\":\"radio\",\"type\":\"radio\"},domProps:{\"value\":feature,\"checked\":_vm._q(_vm.selectfeature,feature)},on:{\"change\":function($event){_vm.selectfeature=feature}}}),_vm._v(\" \"),_c('label',{staticStyle:{\"color\":\"#FFF\"},attrs:{\"for\":(_vm.layerId + \"_\" + index + \"_select_feature_from_layer\")}},[_vm._v(_vm._s(index))])])]),_vm._v(\" \"),_vm._l((_vm.getAttributesFeature(feature)),function(ref){\nvar attribute = ref.attribute;\nvar value = ref.value;\nreturn _c('div',{staticClass:\"feature-attributes\"},[_c('span',{staticClass:\"f-attr\"},[_vm._v(_vm._s(attribute))]),_vm._v(\" \"),_c('span',{staticClass:\"f-value\"},[_vm._v(_vm._s(value))])])})],2)}),0)])}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-bf3e3ac0\"\n\n},{\"../utils/getProjectLayerFeatureById\":47,\"vueify/lib/insert-css\":1}],6:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-panel .editing-button .editing-icon{background-color:#3a4448;color:#222d32;font-size:1.8em;padding:10px;margin:5px;width:45px;height:45px;border-radius:30%;text-align:center}.g3w-editing-panel .editing-button.enabled .editing-icon{background-color:#fff;box-shadow:0 0 5px rgba(0,0,0,.7)}.g3w-editing-panel .editing-button{cursor:not-allowed}.g3w-editing-panel .editing-button.enabled{cursor:pointer}.g3w-editing-panel .editbtn{border-radius:30%;padding:10px;display:inline-block;opacity:.4;box-shadow:0 1px 1px 0 rgba(0,0,0,.1),0 1px 4px 0 rgba(0,0,0,.3)}.g3w-editing-panel .editbtn.enabled{opacity:1;cursor:pointer}.g3w-editing-panel .editbtn.enabled.toggled{box-shadow:0 0;background-color:#ddd}\\n.g3w-editing-panel[data-v-921d0ae8]{margin-bottom:50px}#onlineofflinemessage[data-v-921d0ae8]{margin-bottom:5px;padding:5px;border-radius:3px;background-color:orange;color:#fff;font-weight:700}.commitbar[data-v-921d0ae8]{display:flex;justify-content:flex-end;margin-bottom:5px}.commitbar>div[data-v-921d0ae8]:first-of-type{margin-right:auto}#g3w-select-editable-layers-content[data-v-921d0ae8]{margin-bottom:10px;font-weight:700}#g3w-select-editable-layers-content label[data-v-921d0ae8]{color:#fff!important}#g3w-select-editable-layers-to-show[data-v-921d0ae8]{cursor:pointer}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _Toolbox = require('./Toolbox.vue');\n\nvar _Toolbox2 = _interopRequireDefault(_Toolbox);\n\nvar _promisify = require('../utils/promisify');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar GUI = g3wsdk.gui.GUI;\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    ApplicationService = _g3wsdk$core.ApplicationService;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\nexports.default = {\n\n  name: 'Editing',\n\n  data: function data() {\n    return {\n      state: this.$options.service.state,\n      service: this.$options.service,\n      resourcesurl: this.$options.resourcesurl,\n      showcommitbar: this.$options.showcommitbar,\n      saving: false,\n      layersInEditing: 0,\n      editingButtonsEnabled: true,\n\n      selectedlayers: [],\n\n      editinglayers: Object.entries(g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getEditableLayers()).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            id = _ref2[0],\n            layer = _ref2[1];\n\n        return { id: id, name: layer.getName(), title: layer.getTitle() };\n      })\n    };\n  },\n\n\n  components: {\n    toolbox: _Toolbox2.default\n  },\n\n  transitions: {\n    'addremovetransition': 'showhide'\n  },\n\n  methods: {\n    updateFilterLayers: function updateFilterLayers() {\n      var layers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (layers.length > 0) {\n        this._selectedlayers = this.selectedlayers;\n        this.selectedlayers = layers;\n      } else {\n        this.selectedlayers = this._selectedlayers;\n        this._selectedlayers = layers;\n      }\n\n      $(this.$refs.selectlayers).val(this.selectedlayers).trigger('change');\n    },\n    updateLayersInEditing: function updateLayersInEditing(bool) {\n      this.layersInEditing += bool ? 1 : -1;\n    },\n    undo: function undo() {\n      if (this.canUndo) {\n        this.service.undo();\n      }\n    },\n    redo: function redo() {\n      if (this.canRedo) {\n        this.service.redo();\n      }\n    },\n    commit: function commit(toolboxId) {\n      var _this = this;\n\n      if (!this.canCommit) {\n        return;\n      }\n\n      this.saving = true;\n      this.service.commit({\n        toolbox: this.service.getToolBoxById(toolboxId),\n        modal: false\n      }).always(function () {\n        return _this.saving = false;\n      });\n    },\n    startToolBox: function () {\n      var _ref3 = _asyncToGenerator(function* (toolboxId) {\n        var _this2 = this;\n\n        var toolbox = this.service.getToolBoxById(toolboxId);\n        if (ApplicationState.online && toolbox.canEdit()) {\n          var dirtyId = toolbox.getDependencies().find(function (id) {\n            return _this2.service.getToolBoxById(id).isDirty();\n          });\n          if (dirtyId) {\n            try {\n              yield this.commitDirtyToolBoxes(dirtyId);\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n          toolbox.start();\n        }\n      });\n\n      function startToolBox(_x2) {\n        return _ref3.apply(this, arguments);\n      }\n\n      return startToolBox;\n    }(),\n    stopToolBox: function stopToolBox(toolboxId) {\n      var toolbox = this.service.getToolBoxById(toolboxId);\n      if (toolbox.state.editing.history.commit) {\n        this.service.commit().always(function () {\n          return toolbox.stop();\n        });\n      } else {\n        toolbox.stop();\n      }\n    },\n    saveToolBox: function saveToolBox(toolboxId) {\n      this.service.getToolBoxById(toolboxId).save();\n    },\n    startActiveTool: function () {\n      var _ref4 = _asyncToGenerator(function* (toolId, toolboxId) {\n        if (this.state.toolboxidactivetool && toolboxId !== this.state.toolboxidactivetool) {\n          var _toolbox = yield this.commitDirtyToolBoxes(this.state.toolboxidactivetool);\n          if (_toolbox) {\n            _toolbox.stopActiveTool();\n          }\n        }\n        var toolbox = this.service.getToolBoxById(toolboxId);\n        this.state.toolboxidactivetool = toolboxId;\n        toolbox.setActiveTool(toolbox.getToolById(toolId));\n      });\n\n      function startActiveTool(_x3, _x4) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return startActiveTool;\n    }(),\n    stopActiveTool: function stopActiveTool(toolboxId) {\n      this.service.getToolBoxById(toolboxId).stopActiveTool();\n    },\n    setSelectedToolbox: function () {\n      var _ref5 = _asyncToGenerator(function* (toolboxId) {\n        var toolbox = this.service.getToolBoxById(toolboxId);\n        var toolboxes = this.service.getToolBoxes();\n        var selected = toolboxes.find(function (t) {\n          return t.isSelected();\n        });\n        if (selected) {\n          selected.setSelected(false);\n          selected.clearMessage();\n        }\n\n        toolbox.setSelected(true);\n\n        this.state.toolboxselected = toolbox;\n      });\n\n      function setSelectedToolbox(_x5) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return setSelectedToolbox;\n    }(),\n    commitDirtyToolBoxes: function () {\n      var _ref6 = _asyncToGenerator(function* (layerId) {\n        var service = this.service;\n        var toolbox = service.getToolBoxById(layerId);\n\n        if (!toolbox.isDirty() || !toolbox.hasDependencies()) {\n          return toolbox;\n        }\n\n        try {\n          yield (0, _promisify.promisify)(service.commit({ toolbox: toolbox }));\n          return toolbox;\n        } catch (e) {\n          yield (0, _promisify.promisify)(toolbox.revert());\n          toolbox.getDependencies().forEach(function (layerId) {\n            if (service.getLayerById(layerId).getChildren().indexOf(layerId) !== -1) {\n              service.getToolBoxById(layerId).revert();\n            }\n          });\n          return Promise.reject(toolbox);\n        }\n      });\n\n      function commitDirtyToolBoxes(_x6) {\n        return _ref6.apply(this, arguments);\n      }\n\n      return commitDirtyToolBoxes;\n    }(),\n    _enableEditingButtons: function _enableEditingButtons(bool) {\n      this.editingButtonsEnabled = !bool;\n    },\n    registerOnLineOffLineEvent: function registerOnLineOffLineEvent() {\n      var _this3 = this;\n\n      this.unByKeys = this.unByKeys || [];\n\n      if (ApplicationState.online) {\n        this.checkOfflineChanges({ unlock: true });\n      }\n\n      this.unByKeys.push({\n        owner: ApplicationService,\n        setter: 'offline',\n        key: ApplicationService.onafter('offline', function () {})\n      });\n\n      this.unByKeys.push({\n        owner: ApplicationService,\n        setter: 'online',\n        key: ApplicationService.onafter('online', function () {\n          return _this3.checkOfflineChanges({ modal: false }).catch(function (e) {\n            return GUI.notify.error(e);\n          });\n        })\n      });\n    },\n    checkOfflineChanges: function checkOfflineChanges() {\n      var _this4 = this;\n\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$modal = _ref7.modal,\n          modal = _ref7$modal === undefined ? true : _ref7$modal,\n          _ref7$unlock = _ref7.unlock,\n          unlock = _ref7$unlock === undefined ? false : _ref7$unlock;\n\n      return new Promise(function (resolve, reject) {\n        var changes = ApplicationService.getOfflineItem('EDITING_CHANGES');\n\n        if (!changes) {\n          return;\n        }\n        var promises = [];\n        var layerIds = [];\n\n        setTimeout(function () {\n          for (var layerId in changes) {\n            layerIds.push(layerId);\n            var toolbox = _this4.service.getToolBoxById(layerId);\n            var commitItems = changes[layerId];\n            promises.push(_this4.service.commit({\n              toolbox: toolbox,\n              commitItems: commitItems,\n              modal: modal\n            }));\n          }\n\n          $.when.apply(_this4.service, promises).then(function () {\n            return resolve();\n          }).fail(function (error) {\n            return reject(error);\n          }).always(function () {\n            unlock && layerIds.forEach(function (layerId) {\n              _this4.service.getLayerById(layerId).unlock();\n            });\n\n            ApplicationService.setOfflineItem('EDITING_CHANGES');\n          });\n        }, 1000);\n      });\n    }\n  },\n\n  computed: {\n    message: function message() {\n      return \"\";\n    },\n    canCommit: function canCommit() {\n      return 'default' === this.state.saveConfig.mode && this.state.toolboxselected && this.state.toolboxselected.state.editing.history.commit && this.editingButtonsEnabled;\n    },\n    canUndo: function canUndo() {\n      var canUndo = this.state.toolboxselected && this.state.toolboxselected.state.editing.history.undo && this.editingButtonsEnabled;\n\n      this.service.fireEvent('canUndo', canUndo);\n\n      return canUndo;\n    },\n    canRedo: function canRedo() {\n      var canRedo = this.state.toolboxselected && this.state.toolboxselected.state.editing.history.redo && this.editingButtonsEnabled;\n\n      this.service.fireEvent('canRedo', canRedo);\n\n      return canRedo;\n    },\n    django_admin_url: function django_admin_url() {\n      var config = ApplicationService.getConfig();\n      var user = config.user;\n      return user.is_superuser ? new URL('/django-admin/editing/g3weditingfeaturelock/', initConfig.baseurl) : false;\n    }\n  },\n\n  watch: {\n    canCommit: function canCommit(bool) {\n      ApplicationService.registerLeavePage({ bool: bool });\n    },\n    layersInEditing: function layersInEditing(n) {\n      document.getElementsByClassName('close-pane-button')[0].classList[0 === n ? 'remove' : 'add']('g3w-disabled');\n    },\n    selectedlayers: function selectedlayers(layers) {\n      var has_layers = layers.length > 0;\n\n      var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n\n      this.editinglayers.forEach(function (_ref8) {\n        var id = _ref8.id;\n\n        var toolbox = service.getToolBoxById(id);\n        var is_commit = has_layers && toolbox.state.editing.history.commit;\n        var is_selected = -1 !== layers.indexOf(id);\n\n        toolbox.setShow(has_layers ? is_selected : true);\n\n        if (has_layers && !is_selected && is_commit) {\n          service.commit({ toolbox: toolbox }).always(function () {\n            return toolbox.stop();\n          });\n        }\n\n        if (has_layers && !is_selected && !is_commit) {\n          toolbox.stop();\n        }\n      });\n    }\n  },\n\n  created: function created() {\n\n    this._selectedlayers = [];\n\n    this.appState = ApplicationState;\n\n    this.registerOnLineOffLineEvent();\n\n    GUI.closeContent();\n\n    this.state.open = false;\n    CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).forEach(function (layer) {\n      return layer.setInEditing(true);\n    });\n\n    GUI.on('opencontent', this._enableEditingButtons);\n    GUI.on('closeform', this._enableEditingButtons);\n    GUI.on('closecontent', this._enableEditingButtons);\n  },\n  beforeDestroy: function () {\n    var _ref9 = _asyncToGenerator(function* () {\n      var _this5 = this;\n\n      this.service.stop();\n\n      this.state.open = false;\n      CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).forEach(function (layer) {\n        return layer.setInEditing(false);\n      });\n\n      GUI.off('opencontent', this._enableEditingButtons);\n      GUI.off('closeform', this._enableEditingButtons);\n      GUI.off('closecontent', this._enableEditingButtons);\n\n      this.unByKeys.forEach(function (_ref10) {\n        var owner = _ref10.owner,\n            setter = _ref10.setter,\n            key = _ref10.key;\n        return owner.un(setter, key);\n      });\n\n      this.service.fireEvent('closeeditingpanel');\n\n      var layerIdChanges = Object.keys(this.state.featuresOnClose);\n      if (layerIdChanges.length) {\n        var inputs = {\n          layers: [],\n          fids: [],\n          formatter: 1\n        };\n        layerIdChanges.forEach(function (layerId) {\n          var fids = [].concat(_toConsumableArray(_this5.state.featuresOnClose[layerId]));\n          if (fids.length) {\n            var layer = CatalogLayersStoresRegistry.getLayerById(layerId);\n            inputs.layers.push(layer);\n            inputs.fids.push(fids);\n          }\n        });\n\n        var promise = inputs.layers.length ? DataRouterService.getData('search:layersfids', {\n          inputs: inputs,\n          outputs: {\n            title: 'plugins.editing.editing_changes',\n            show: { loading: false }\n          }\n        }) : Promise.resolve();\n        try {\n          yield promise;\n        } catch (err) {}\n      }\n\n      this.state.featuresOnClose = {};\n\n      this.service.getToolBoxes().forEach(function (toolbox) {\n        return toolbox.resetDefault();\n      });\n\n      this.state.uniqueFieldsValues = {};\n    });\n\n    function beforeDestroy() {\n      return _ref9.apply(this, arguments);\n    }\n\n    return beforeDestroy;\n  }()\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g3w-editing-panel\"},[_c('bar-loader',{attrs:{\"loading\":_vm.saving}}),_vm._v(\" \"),(_vm.layersInEditing > 0)?_c('helpdiv',{staticStyle:{\"font-weight\":\"bold\"},attrs:{\"message\":\"plugins.editing.close_editing_panel.message\"}}):_vm._e(),_vm._v(\" \"),(!_vm.appState.online)?_c('div',{attrs:{\"id\":\"onlineofflinemessage\"}},[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.messages.offline'),expression:\"'editing.messages.offline'\"}]})]):_vm._e(),_vm._v(\" \"),(_vm.showcommitbar)?_c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.saving),expression:\"saving\"}],staticClass:\"commitbar\"},[_c('div',{class:['editing-button', (_vm.canCommit ? 'enabled' : '')],on:{\"click\":function($event){$event.stopPropagation();return _vm.commit($event)}}},[_c('span',{class:['editing-icon', _vm.g3wtemplate.font['save']]})]),_vm._v(\" \"),_c('div',{class:['editing-button', (_vm.canUndo ? 'enabled': '')],on:{\"click\":function($event){$event.stopPropagation();return _vm.undo($event)}}},[_c('span',{class:['editing-icon', _vm.g3wtemplate.font['arrow-left']]})]),_vm._v(\" \"),_c('div',{class:['editing-button', (_vm.canRedo ? 'enabled' : '')],on:{\"click\":function($event){$event.stopPropagation();return _vm.redo($event)}}},[_c('span',{class:['editing-icon', _vm.g3wtemplate.font['arrow-right']]})])]):_c('div',{staticStyle:{\"height\":\"10px\"}}),_vm._v(\" \"),(_vm.state.showselectlayers && _vm.state.toolboxes.length > 1)?_c('div',{staticClass:\"skin-color\",attrs:{\"id\":\"g3w-select-editable-layers-content\"}},[_c('label',{directives:[{name:\"t\",rawName:\"v-t\",value:('Layers'),expression:\"'Layers'\"}],attrs:{\"for\":\"g3w-select-editable-layers-to-show\"}}),_vm._v(\" \"),_c('select',{directives:[{name:\"select2\",rawName:\"v-select2\",value:('selectedlayers'),expression:\"'selectedlayers'\"}],ref:\"selectlayers\",attrs:{\"id\":\"g3w-select-editable-layers-to-show\",\"multiple\":\"multiple\",\"clear\":\"true\"}},_vm._l((_vm.editinglayers),function(editinglayer){return _c('option',{key:editinglayer.id,domProps:{\"value\":editinglayer.id}},[_vm._v(_vm._s(editinglayer.name))])}),0)]):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"toolboxes\"}},_vm._l((_vm.state.toolboxes),function(toolbox){return _c('toolbox',{key:toolbox.id,attrs:{\"state\":toolbox,\"resourcesurl\":_vm.resourcesurl},on:{\"setselectedtoolbox\":_vm.setSelectedToolbox,\"starttoolbox\":_vm.startToolBox,\"stoptoolbox\":_vm.stopToolBox,\"savetoolbox\":_vm.saveToolBox,\"setactivetool\":_vm.startActiveTool,\"stopactivetool\":_vm.stopActiveTool,\"on-editing\":_vm.updateLayersInEditing,\"update-filter-layers\":_vm.updateFilterLayers}})}),1),_vm._v(\" \"),(_vm.django_admin_url)?_c('a',{attrs:{\"href\":_vm.django_admin_url,\"target\":\"_blank\"}},[_vm._v(\"üîí Locked features\")]):_vm._e()],1)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-921d0ae8\"\n\n},{\"../utils/promisify\":57,\"./Toolbox.vue\":9,\"vueify/lib/insert-css\":1}],7:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-new-relation-vector-type[data-v-6dc0e49c]{margin-bottom:5px;font-weight:700}.relation_header_title[data-v-6dc0e49c]{font-weight:700;font-size:1.3em;align-items:center}.relation_header_title[data-v-6dc0e49c],.relation_header_tools[data-v-6dc0e49c]{width:100%;display:flex;background-color:#fff}.g3w-editing-relations-add-link-tools[data-v-6dc0e49c]{display:flex;justify-content:flex-end}.relation_vector_tools[data-v-6dc0e49c]{display:flex;flex-direction:column;border:2px solid #eee;background-color:#fff;padding:10px}#g3w-select-editable-layers-content[data-v-6dc0e49c]{flex-grow:1;display:flex;flex-direction:column}#search-box[data-v-6dc0e49c]{margin-right:auto}.relation_body[data-v-6dc0e49c]{padding:0}.g3wform-relation-table[data-v-6dc0e49c]{width:100%}.close_vector_relation_tool[data-v-6dc0e49c]{align-self:self-end}.close_vector_relation_tool>.g3w-icon[data-v-6dc0e49c]{font-weight:700;cursor:pointer}.divider[data-v-6dc0e49c]{display:block;position:relative;padding:0;margin-bottom:5px;height:0;width:100%;max-height:0;font-size:1px;line-height:0;clear:both;border:none;border-bottom:2px solid #eee}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _workflow2 = require('../g3wsdk/workflow/workflow');\n\nvar _step = require('../g3wsdk/workflow/step');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('../utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _promisify = require('../utils/promisify');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _convertFeaturesGeometryToGeometryTypeOfLayer = require('../utils/convertFeaturesGeometryToGeometryTypeOfLayer');\n\nvar _addTableFeature = require('../utils/addTableFeature');\n\nvar _updateParentWorkflows = require('../utils/updateParentWorkflows');\n\nvar _getRelationId = require('../utils/getRelationId');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nvar _pickfeaturesinteraction = require('../interactions/pickfeaturesinteraction');\n\nvar _eventbus = require('../eventbus');\n\nvar _workflows = require('../workflows');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\nvar Geometry = g3wsdk.core.geometry.Geometry;\nvar isSameBaseGeometryType = g3wsdk.core.geoutils.isSameBaseGeometryType;\nvar t = g3wsdk.core.i18n.tPlugin;\nvar Layer = g3wsdk.core.layer.Layer;\nvar toRawType = g3wsdk.core.utils.toRawType;\nvar GUI = g3wsdk.gui.GUI;\nvar FormService = g3wsdk.gui.vue.services.FormService;\nvar _g3wsdk$gui$vue$Mixin = g3wsdk.gui.vue.Mixins,\n    fieldsMixin = _g3wsdk$gui$vue$Mixin.fieldsMixin,\n    resizeMixin = _g3wsdk$gui$vue$Mixin.resizeMixin,\n    mediaMixin = _g3wsdk$gui$vue$Mixin.mediaMixin;\nvar _g3wsdk$ol$interactio = g3wsdk.ol.interactions,\n    PickFeatureInteraction = _g3wsdk$ol$interactio.PickFeatureInteraction,\n    PickCoordinatesInteraction = _g3wsdk$ol$interactio.PickCoordinatesInteraction;\n\n\nObject.entries({\n  Workflow: _workflow2.Workflow,\n  Step: _step.Step,\n  OpenFormStep: _workflows.OpenFormStep,\n  OpenTableStep: _workflows.OpenTableStep,\n  AddFeatureStep: _workflows.AddFeatureStep,\n  ModifyGeometryVertexStep: _workflows.ModifyGeometryVertexStep,\n  MoveFeatureStep: _workflows.MoveFeatureStep\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nvar color = 'rgb(255,89,0)';\n\nvar SELECTED_STYLES = {\n  'Point': new ol.style.Style({ image: new ol.style.Circle({ radius: 8, fill: new ol.style.Fill({ color: color }) }) }),\n  'MultiPoint': new ol.style.Style({ image: new ol.style.Circle({ radius: 8, fill: new ol.style.Fill({ color: color }) }) }),\n  'Linestring': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }) }),\n  'MultiLinestring': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }) }),\n  'Polygon': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }), fill: new ol.style.Fill({ color: color }) }),\n  'MultiPolygon': new ol.style.Style({ stroke: new ol.style.Stroke({ width: 8, color: color }), fill: new ol.style.Fill({ color: color }) })\n};\n\nexports.default = {\n\n  mixins: [mediaMixin, fieldsMixin, resizeMixin],\n\n  name: 'g3w-relation',\n\n  data: function data() {\n    return {\n      loading: false,\n      show_vector_tools: false,\n      disabled: false,\n      copylayerid: null,\n      copyFeatureLayers: [],\n      active: false,\n      value: null,\n      placeholdersearch: t('editing.search') + ' ...',\n      resourcesurl: GUI.getResourcesUrl()\n    };\n  },\n\n\n  methods: {\n    resize: function resize() {\n      if (!(this.active && 'none' !== this.$el.style.display)) {\n        return;\n      }\n\n      var table = this.$refs.relation_body.querySelector('div.dataTables_scrollBody');\n\n      if (table) {\n        table.style.height = ((document.querySelector('.g3wform_body') || {}).offsetHeight || 0) - ((document.querySelector('.g3wform_footer') || {}).offsetHeight || 0) - ((this.$refs.relation_header_title || {}).offsetHeight || 0) - ((this.$refs.relation_header_tools || {}).offsetHeight || 0) - ((this.$el.querySelector('.dataTables_scrollHead') || {}).offsetHeight || 0) - ((this.$el.querySelector('.dataTables_paginate.paging_simple_numbers') || {}).offsetHeight || 0) - ((document.querySelector('.editing-save-all-form') || {}).offsetHeight || 0) - ((this.isVectorRelation && this.show_vector_tools && this.$refs.relation_vector_tools || {}).offsetHeight || 0) + 'px';\n      }\n\n      if (this.relationsTable) {\n        this.relationsTable.columns.adjust();\n      }\n    },\n    copyFeatureFromOtherLayer: function copyFeatureFromOtherLayer() {\n      var _this = this;\n\n      var copyLayer = this.copyFeatureLayers.find(function (layer) {\n        return layer.id === _this.copylayerid;\n      });\n      var external = copyLayer.external;\n      var layer = external ? GUI.getService('map').getLayerById(this.copylayerid) : CatalogLayersStoresRegistry.getLayerById(this.copylayerid);\n\n      this.runAddRelationWorkflow({\n        workflow: !!(external || layer.isGeoLayer()) ? new this._add_link_workflow.selectandcopy({\n          copyLayer: layer,\n          isVector: true,\n          external: external,\n          help: 'editing.steps.help.copy'\n        }) : undefined,\n        isVector: !!(external || layer.isGeoLayer())\n      });\n    },\n    closeVectorTools: function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        this.show_vector_tools = false;\n        yield this.$nextTick();\n        this.resize();\n      });\n\n      function closeVectorTools() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return closeVectorTools;\n    }(),\n    addVectorRelation: function addVectorRelation() {\n      this.runAddRelationWorkflow({\n        workflow: new this._add_link_workflow.add(),\n        isVector: Layer.LayerTypes.VECTOR === this._layerType\n      });\n      this.show_vector_tools = false;\n    },\n    addRelationAndLink: function () {\n      var _ref4 = _asyncToGenerator(function* () {\n        if (this.isVectorRelation) {\n          this.show_vector_tools = !this.show_vector_tools;\n          yield this.$nextTick();\n          this.resize();\n        } else {\n          this.runAddRelationWorkflow({\n            workflow: new this._add_link_workflow.add(),\n            isVector: Layer.LayerTypes.VECTOR === this._layerType\n          });\n        }\n      });\n\n      function addRelationAndLink() {\n        return _ref4.apply(this, arguments);\n      }\n\n      return addRelationAndLink;\n    }(),\n    relationAttributesSubset: function relationAttributesSubset(relation) {\n      return relation.fields.map(function (_ref5) {\n        var label = _ref5.label,\n            name = _ref5.name,\n            value = _ref5.value;\n        return { name: name, label: label, value: value };\n      }).flatMap(function (_ref6) {\n        var name = _ref6.name,\n            label = _ref6.label,\n            value = _ref6.value;\n        return Array.isArray(value) ? [] : [{ name: name, label: label, value: value }];\n      });\n    },\n    getValue: function getValue(value) {\n      if (value && 'Object' === toRawType(value)) {\n        value = value.value;\n      } else if ('string' == typeof value && 0 === value.indexOf('_new_')) {\n        value = null;\n      }\n      this.value = value;\n      return value;\n    },\n    _createDataTable: function _createDataTable() {\n      var _this2 = this;\n\n      this.relationsTable = $(this.$refs.relationTable).DataTable({\n        autoWidth: false,\n        columnDefs: [{ orderable: false, targets: [0, 1] }],\n        destroy: true,\n        order: [2, 'asc'],\n        pageLength: 10,\n        responsive: true,\n        scrollCollapse: true,\n        scrollResize: true,\n        scrollX: true\n      });\n\n      $(\".dataTables_filter, .dataTables_length\").hide();\n\n      $('#filterRelation').on('keyup', function () {\n        _this2.relationsTable.search($(_this2).val()).draw();\n      });\n    },\n    destroyTable: function destroyTable() {\n      if (this.relationsTable) {\n        this.relationsTable = this.relationsTable.destroy();\n        this.relationsTable = null;\n        $('#filterRelation').off();\n      }\n    },\n    updateTable: function () {\n      var _ref7 = _asyncToGenerator(function* () {\n        var _this3 = this;\n\n        this.destroyTable();\n        yield this.$nextTick();\n        this._createDataTable();\n        setTimeout(function () {\n          return _this3.resize();\n        });\n      });\n\n      function updateTable() {\n        return _ref7.apply(this, arguments);\n      }\n\n      return updateTable;\n    }(),\n    updateNewRelationId: function updateNewRelationId() {\n      var _this4 = this;\n\n      this._new_relations_ids.forEach(function (_ref8) {\n        var clientid = _ref8.clientid,\n            id = _ref8.id;\n\n        var newrelation = _this4.relations.find(function (r) {\n          return clientid === r.id;\n        });\n        if (newrelation) {\n          newrelation.id = id;\n\n          (_this4.tools.find(function (ts) {\n            return ts.find(function (t) {\n              return t.id.split(clientid + '_').length > 1;\n            });\n          }) || []).forEach(function (t) {\n            return t.id = t.id.replace(clientid + '_', id + '_');\n          });\n        }\n      });\n    },\n    onCommit: function onCommit(_ref9) {\n      var _ref9$new_relations = _ref9.new_relations,\n          new_relations = _ref9$new_relations === undefined ? {} : _ref9$new_relations;\n\n      var relationLayer = (0, _getEditingLayerById.getEditingLayerById)(this.relation.child);\n\n      if (new_relations[relationLayer.getId()] && Array.isArray(new_relations[relationLayer.getId()].new)) {\n        this._new_relations_ids = [].concat(_toConsumableArray(this._new_relations_ids || []), _toConsumableArray(new_relations[relationLayer.getId()].new.map(function (_ref10) {\n          var clientid = _ref10.clientid,\n              id = _ref10.id;\n          return { clientid: clientid, id: id };\n        })));\n      }\n    },\n    onInputChange: function onInputChange(input) {\n      var _this5 = this;\n\n      var _getRelationFieldsFro = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n        layerId: this._relationLayerId,\n        relation: this.relation\n      }),\n          ownField = _getRelationFieldsFro.ownField,\n          relationField = _getRelationFieldsFro.relationField;\n\n      if (false === (this.parent.editable.length > 0 && relationField.find(function (rField) {\n        return rField === input.name;\n      }))) {\n        return;\n      }\n\n      this.parent.values[input.name] = input.value;\n\n      this.relations.map(function (r) {\n        return r.fields.find(function (f) {\n          return -1 !== ownField.indexOf(f.name);\n        });\n      }).filter(Boolean).forEach(function (field) {\n        field.value = _this5.parent.values[field.name];\n        var relation = _this5.getLayer().getEditingSource().getFeatureById(relation.id);\n        var oRelation = relation.clone();\n        relation.set(field.name, input.value);\n        if (!relation.isNew()) {\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getToolBoxById(_this5._relationLayerId).getSession().pushUpdate(_this5._relationLayerId, relation, oRelation);\n        }\n      });\n    },\n    getRelationFeatureValue: function getRelationFeatureValue(featureId, property) {\n      return (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n        layerId: this._relationLayerId,\n        feature: this.getLayer().getEditingSource().getFeatureById(featureId),\n        property: property\n      });\n    },\n    enableDOMElements: function enableDOMElements() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      document.querySelectorAll('.editing-save-all-form').forEach(function (c) {\n        if (bool && c.classList.contains('g3w-disabled')) {\n          c.classList.remove('g3w-disabled');\n        }\n        if (!bool && !c.querySelector('.save-all-icon').classList.contains('g3w-disabled')) {\n          c.classList.add('g3w-disabled');\n        }\n      });\n      document.querySelectorAll('.g3w-editing-relations-add-link-tools, .g3wform_footer').forEach(function (c) {\n        return c.classList.toggle('g3w-disabled', !bool);\n      });\n    },\n    addTools: function addTools(id) {\n      var _this6 = this;\n\n      var tools = [this.capabilities.includes('change_attr_feature') && {\n        state: Vue.observable({\n          icon: 'editAttributes.png',\n          id: id + '_editattributes',\n          name: 'editing.tools.update_feature',\n          enabled: true,\n          active: false\n        }),\n        type: 'editfeatureattributes'\n      }, this.capabilities.includes('delete_feature') && {\n        state: Vue.observable({\n          icon: 'deleteTableRow.png',\n          id: id + '_deletefeature',\n          name: 'editing.tools.delete_feature',\n          enabled: true,\n          active: false\n        }),\n        type: 'deletefeature'\n      }, this.capabilities.includes('change_feature') && Layer.LayerTypes.VECTOR === this._layerType && g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getToolBoxById(this._relationLayerId).getTools().filter(function (t) {\n        return Geometry.isPointGeometryType(_this6.getLayer().getGeometryType()) ? 'movefeature' === t.getId() : ['movefeature', 'movevertex'].includes(t.getId());\n      }).map(function (tool) {\n        return {\n          state: Vue.observable(_extends({}, tool, { id: id + '_' + tool.id })),\n          type: tool.getOperator().type\n        };\n      })].flat().filter(Boolean);\n\n      this.tools.push(tools);\n\n      return tools;\n    },\n    startTool: function () {\n      var _ref11 = _asyncToGenerator(function* (relationtool, index) {\n        var _this7 = this;\n\n        try {\n          relationtool.active = !relationtool.active;\n\n          if (!relationtool.active) {\n            return Promise.resolve();\n          }\n\n          this.tools.forEach(function (tools) {\n            tools.forEach(function (t) {\n              if (relationtool.id !== t.id) {\n                t.active = false;\n              }\n            });\n          });\n\n          yield _eventbus.VM.$nextTick();\n\n          var d = {};\n          var promise = new Promise(function (resolve, reject) {\n            Object.assign(d, { resolve: resolve, reject: reject });\n          });\n\n          var is_vector = Layer.LayerTypes.VECTOR === this._layerType;\n          var relation = this.relations[index];\n          var toolId = relationtool.id.split(relation.id + '_')[1];\n          var relationfeature = this.getLayer().getEditingSource().getFeatureById(relation.id);\n          var featurestore = this.getLayer().getEditingSource();\n          var selectStyle = is_vector && SELECTED_STYLES[this.getLayer().getGeometryType()];\n          var options = this._createWorkflowOptions({ features: [relationfeature] });\n\n          if ('deletefeature' === toolId) {\n\n            (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: promise, inputs: { features: [relationfeature], layer: this.getLayer() }, style: selectStyle });\n\n            GUI.dialog.confirm(t(\"editing.messages.delete_feature\"), function (res) {\n              if (res) {\n                _workflow2.Workflow.Stack.getCurrent().getSession().pushDelete(_this7._relationLayerId, relationfeature);\n                _this7.relations.splice(index, 1);\n                _this7.tools.splice(index, 1);\n                var layerId = _this7._relationLayerId;\n                var relationLayerId = _this7.parent.layerId;\n                var feature = relationfeature;\n                var layer = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[relationLayerId];\n                var fields = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[layerId];\n\n                if (undefined === layer || undefined === fields) {\n                  return;\n                }\n\n                if (undefined === layer.__uniqueFieldsValuesRelations) {\n                  layer.__uniqueFieldsValuesRelations = {};\n                }\n\n                Object.keys(feature.getProperties()).forEach(function (property) {\n                  if (undefined === layer.__uniqueFieldsValuesRelations[layerId]) {\n                    layer.__uniqueFieldsValuesRelations[layerId] = {};\n                  }\n\n                  if (undefined !== fields[property]) {\n                    var values = new Set(fields[property]);\n                    values.delete(feature.get(property));\n                    layer.__uniqueFieldsValuesRelations[layerId][property] = values;\n                  }\n                });\n\n                featurestore.removeFeature(relationfeature);\n\n                if (relationfeature.isNew() && undefined === _workflow2.Workflow.Stack._workflows.find(function (w) {\n                  return w.getSession().state.changes.filter(function (_ref12) {\n                    var feature = _ref12.feature;\n                    return relationfeature.getUid() !== feature.getUid();\n                  }).length > 0;\n                })) {\n                  _workflow2.Workflow.Stack._workflows.filter(function (w) {\n                    return w.getContextService() instanceof FormService;\n                  }).forEach(function (w) {\n                    return setTimeout(function () {\n                      return w.getContextService().state.update = false;\n                    });\n                  });\n                } else {\n                  (0, _updateParentWorkflows.updateParentWorkflows)();\n                }\n                d.resolve(res);\n              }\n\n              if (!res) {\n                d.reject();\n              }\n            });\n          }\n\n          if ('editattributes' === toolId) {\n            var workflow = new _workflow2.Workflow({ type: 'edittablefeature', steps: [new _workflows.OpenFormStep({ selectStyle: selectStyle })] });\n\n            try {\n              yield (0, _promisify.promisify)(workflow.start(options));\n\n              this.getLayer().getFieldsWithValues(relationfeature, { relation: true }).forEach(function (f) {\n                relation.fields.forEach(function (rf) {\n                  if (rf.name === f.name) {\n                    rf.value = f.value;\n                  }\n                });\n              });\n              d.resolve(true);\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n\n            workflow.stop();\n          }\n\n          if (['movevertex', 'movefeature'].includes(toolId) && this.currentRelationFeatureId !== relationfeature.getId()) {\n            this.currentRelationFeatureId = relationfeature.getId();\n            GUI.getService('map').zoomToFeatures([relationfeature]);\n          }\n\n          if (['movevertex', 'movefeature'].includes(toolId)) {\n            GUI.setModal(false);\n            this.enableDOMElements(false);\n            var _workflow = new _workflow2.Workflow({\n              type: relationtool.type,\n              steps: [new {\n                'movevertex': _workflows.ModifyGeometryVertexStep,\n                'movefeature': _workflows.MoveFeatureStep\n              }[toolId]({ selectStyle: selectStyle })]\n            });\n\n            var unwatch = _eventbus.VM.$watch(function () {\n              return relationtool.active;\n            }, function (bool) {\n              if (!bool) {\n                _this7.enableDOMElements(true);\n                GUI.setModal(true);\n                _workflow.unbindEscKeyUp();\n                _workflow.stop();\n                unwatch();\n                d.reject(false);\n              }\n            });\n\n            _workflow.bindEscKeyUp(function () {\n              GUI.setModal(true);\n              unwatch();\n              d.reject(false);\n            });\n\n            try {\n              yield (0, _promisify.promisify)(_workflow.start(options));\n\n              _workflow2.Workflow.Stack.getParents().filter(function (w) {\n                return w.getContextService().setUpdate;\n              }).forEach(function (w) {\n                return w.getContextService().setUpdate(true, { force: true });\n              });\n              d.resolve(true);\n              setTimeout(function () {\n                return _this7.startTool(relationtool, index);\n              });\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n\n            _workflow.unbindEscKeyUp();\n            _workflow.stop();\n            unwatch();\n          }\n\n          try {\n            yield promise;\n          } catch (e) {\n            console.trace('START TOOL FAILED', e);\n            return Promise.reject(e);\n          } finally {\n            relationtool.active = false;\n          }\n        } catch (e) {\n          console.warn(e);\n        }\n      });\n\n      function startTool(_x2, _x3) {\n        return _ref11.apply(this, arguments);\n      }\n\n      return startTool;\n    }(),\n    getLayer: function getLayer() {\n      return (0, _getEditingLayerById.getEditingLayerById)(this._relationLayerId);\n    },\n    runAddRelationWorkflow: function () {\n      var _ref13 = _asyncToGenerator(function* () {\n        var _this8 = this;\n\n        var _ref14 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            workflow = _ref14.workflow,\n            _ref14$isVector = _ref14.isVector,\n            isVector = _ref14$isVector === undefined ? false : _ref14$isVector;\n\n        if (isVector) {\n          GUI.setModal(false);\n          GUI.hideContent(true);\n        }\n\n        var options = this._createWorkflowOptions();\n\n        var _getRelationFieldsFro2 = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n          layerId: this._relationLayerId,\n          relation: this.relation\n        }),\n            ownField = _getRelationFieldsFro2.ownField,\n            relationField = _getRelationFieldsFro2.relationField;\n\n        try {\n          var _relations;\n\n          var outputs = yield (0, _promisify.promisify)(workflow.start(options));\n\n          if (isVector) {\n            workflow.bindEscKeyUp();\n          }\n\n          var _outputs$relationFeat = outputs.relationFeatures,\n              newFeatures = _outputs$relationFeat.newFeatures,\n              originalFeatures = _outputs$relationFeat.originalFeatures;\n\n          var setRelationFieldValue = function setRelationFieldValue(_ref15) {\n            var oIndex = _ref15.oIndex,\n                value = _ref15.value;\n\n            newFeatures.forEach(function (newFeature, i) {\n              newFeature.set(ownField[oIndex], value);\n              if (options.parentFeature.isNew()) {\n                originalFeatures[i].set(ownField[oIndex], value);\n              }\n              _this8.getLayer().getEditingSource().updateFeature(newFeature);\n              options.context.session.pushUpdate(_this8._relationLayerId, newFeature, originalFeatures[i]);\n            });\n          };\n\n          Object.entries(this.parent.values).forEach(function (_ref16) {\n            var _ref17 = _slicedToArray(_ref16, 2),\n                field = _ref17[0],\n                value = _ref17[1];\n\n            return setRelationFieldValue({ value: value, oIndex: relationField.findIndex(function (f) {\n                return field === f;\n              }) });\n          });\n\n          if (options.parentFeature.isNew() && this.parent.editable.length > 0) {\n            var keyRelationFeatureChange = options.parentFeature.on('propertychange', function (evt) {\n              if (options.parentFeature.isNew()) {\n                if (relationField.find(evt.key)) {\n                  setRelationFieldValue({\n                    oIndex: relationField.findIndex(function (rField) {\n                      return evt.key === rField;\n                    }),\n                    value: evt.target.get(evt.key)\n                  });\n                }\n              } else {\n                ol.Observable.unByKey(keyRelationFeatureChange);\n              }\n            });\n          }\n\n          (_relations = this.relations).push.apply(_relations, _toConsumableArray((newFeatures || []).map(function (f) {\n            return { id: f.getId(), fields: _this8.getLayer().getFieldsWithValues(f, { relation: true }) };\n          })));\n        } catch (inputs) {\n          console.warn(inputs);\n\n          if (inputs && inputs.relationFeatures) {\n            var _relations2;\n\n            (_relations2 = this.relations).push.apply(_relations2, _toConsumableArray((inputs.relationFeatures.newFeatures || []).map(function (f) {\n              return { id: f.getId(), fields: _this8.getLayer().getFieldsWithValues(f, { relation: true }) };\n            })));\n          }\n\n          options.context.session.rollbackDependecies([this._relationLayerId]);\n        }\n\n        workflow.stop();\n\n        if (isVector) {\n          workflow.unbindEscKeyUp();\n          GUI.hideContent(false);\n          GUI.setModal(true);\n        }\n      });\n\n      function runAddRelationWorkflow() {\n        return _ref13.apply(this, arguments);\n      }\n\n      return runAddRelationWorkflow;\n    }(),\n    linkRelation: function () {\n      var _ref18 = _asyncToGenerator(function* () {\n        var _this9 = this;\n\n        this.disabled = true;\n\n        var is_vector = Layer.LayerTypes.VECTOR === this._layerType;\n        var workflow = new this._add_link_workflow.link(is_vector ? {\n          selectStyle: SELECTED_STYLES[this.getLayer().getGeometryType()]\n        } : {});\n        var options = this._createWorkflowOptions();\n\n        var _getRelationFieldsFro3 = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n          layerId: this._relationLayerId,\n          relation: this.relation\n        }),\n            ownField = _getRelationFieldsFro3.ownField,\n            relationField = _getRelationFieldsFro3.relationField;\n\n        options.context.excludeFeatures = relationField.reduce(function (accumulator, rField, index) {\n          accumulator[ownField[index]] = _this9.parent.values[rField];\n          return accumulator;\n        }, {});\n\n        if (is_vector) {\n          GUI.setModal(false);\n        }\n\n        var feature = _workflow2.Workflow.Stack.getCurrent().getCurrentFeature();\n\n        var getRelationFeatures = function getRelationFeatures() {\n          return (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(_this9.parent.layerId, {\n            relations: [_this9.relation],\n            feature: feature,\n            operator: 'not',\n            filterType: is_vector ? 'bbox' : 'fid'\n          });\n        };\n\n        var response = {\n          promise: undefined,\n          showContent: false\n        };\n\n        if (is_vector) {\n          options.context.beforeRun = _asyncToGenerator(function* () {\n            yield new Promise(function (resolve) {\n              return setTimeout(resolve);\n            });\n            yield getRelationFeatures();\n          });\n\n          workflow.bindEscKeyUp();\n\n          response = {\n            promise: workflow.start(options),\n            showContent: true\n          };\n\n          this.enableDOMElements(false);\n        } else {\n          yield getRelationFeatures();\n        }\n\n        var linked = false;\n\n        try {\n          var outputs = yield (0, _promisify.promisify)(response.promise || workflow.start(options));\n\n          (outputs.features || []).forEach(function (relation) {\n            if (undefined === _this9.relations.find(function (rel) {\n              return rel.id === relation.getId();\n            })) {\n              linked = linked || true;\n              var originalRelation = relation.clone();\n              Object.entries(_this9.parent.values).forEach(function (_ref20) {\n                var _ref21 = _slicedToArray(_ref20, 2),\n                    field = _ref21[0],\n                    value = _ref21[1];\n\n                relation.set(ownField[relationField.findIndex(function (rF) {\n                  return field === rF;\n                })], value);\n              });\n              _workflow2.Workflow.Stack.getCurrent().getSession().pushUpdate(_this9._relationLayerId, relation, originalRelation);\n              _this9.relations.push({\n                fields: _this9.getLayer().getFieldsWithValues(relation, { relation: true }),\n                id: relation.getId()\n              });\n            } else {\n              GUI.notify.warning(t(\"editing.relation_already_added\"));\n            }\n          });\n        } catch (e) {\n          console.warn(e);\n          options.context.session.rollbackDependecies([this._relationLayerId]);\n        }\n\n        if (is_vector) {\n          this.enableDOMElements(true);\n        }\n\n        if (response.showContent) {\n          GUI.closeUserMessage();\n          workflow.unbindEscKeyUp();\n        }\n\n        if (linked) {\n          (0, _updateParentWorkflows.updateParentWorkflows)();\n        }\n\n        workflow.stop();\n\n        this.disabled = false;\n      });\n\n      function linkRelation() {\n        return _ref18.apply(this, arguments);\n      }\n\n      return linkRelation;\n    }(),\n    unlinkRelation: function (_unlinkRelation) {\n      function unlinkRelation(_x6) {\n        return _unlinkRelation.apply(this, arguments);\n      }\n\n      unlinkRelation.toString = function () {\n        return _unlinkRelation.toString();\n      };\n\n      return unlinkRelation;\n    }(function (index) {\n      var dialog = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      return unlinkRelation({\n        layerId: this.layerId,\n        relation: this.relation,\n        relations: this.relations,\n        index: index,\n        dialog: dialog\n      });\n    }),\n    _createWorkflowOptions: function _createWorkflowOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var fields = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({\n        layerId: this._relationLayerId,\n        relation: this.relation\n      });\n      var parent = Object.entries(this.parent.values);\n      return {\n        parentFeature: _workflow2.Workflow.Stack.getCurrent().getCurrentFeature(),\n        context: {\n          session: _workflow2.Workflow.Stack.getCurrent().getSession(),\n          excludeFields: fields.ownField,\n          fatherValue: parent.map(function (_ref22) {\n            var _ref23 = _slicedToArray(_ref22, 2),\n                _ = _ref23[0],\n                value = _ref23[1];\n\n            return value;\n          }),\n          fatherField: parent.map(function (_ref24) {\n            var _ref25 = _slicedToArray(_ref24, 1),\n                field = _ref25[0];\n\n            return fields.ownField[fields.relationField.findIndex(function (rField) {\n              return field === rField;\n            })];\n          })\n        },\n        inputs: {\n          features: options.features || [],\n          layer: this.getLayer()\n        }\n      };\n    }\n  },\n\n  computed: {\n    relationsLength: function relationsLength() {\n      return this.relations.length;\n    },\n    fieldrequired: function fieldrequired() {\n      var _this10 = this;\n\n      return (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: this._relationLayerId, relation: this.relation }).ownField.some(function (field) {\n        return (0, _getEditingLayerById.getEditingLayerById)(_this10._relationLayerId).isFieldRequired(field);\n      });\n    },\n    show_add_link: function show_add_link() {\n      return 0 === this.relations.length || 'ONE' !== this.relation.type;\n    }\n  },\n\n  watch: {\n    relations: function relations(_) {\n      var updatedrelations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (0 === updatedrelations.length) {\n        this.destroyTable();\n      } else {\n        this.updateNewRelationId();\n        this.updateTable();\n      }\n    },\n    show_vector_tools: function show_vector_tools(bool) {\n      this.enableDOMElements(!bool);\n      this.disabled = bool;\n    }\n  },\n\n  beforeCreate: function beforeCreate() {\n    this.delayType = 'debounce';\n  },\n  created: function created() {\n    var _this11 = this,\n        _Layer$LayerTypes$TAB;\n\n    var relationLayer = (0, _getEditingLayerById.getEditingLayerById)(this.relation.child);\n\n    this._new_relations_ids = [];\n\n    this.onCommit = this.onCommit.bind(this);\n\n    g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').on('commit', this.onCommit);\n\n    this.isVectorRelation = Layer.LayerTypes.VECTOR === relationLayer.getType();\n\n    if (this.isVectorRelation) {\n      var geometryType = relationLayer.getGeometryType();\n      this.copyFeatureLayers = [].concat(_toConsumableArray(CatalogLayersStoresRegistry.getLayers().filter(function (l) {\n        return l.isGeoLayer() && l.getGeometryType && l.getGeometryType() && _this11.relation.father !== l.getId() && (l.getGeometryType() === geometryType || isSameBaseGeometryType(l.getGeometryType(), geometryType) && Geometry.isMultiGeometry(geometryType));\n      }).map(function (l) {\n        return {\n          id: l.getId(),\n          name: l.getName(),\n          external: false\n        };\n      })), _toConsumableArray(GUI.getService('map').getExternalLayers().filter(function (l) {\n        var features = l.getSource().getFeatures();\n\n        if (!(features && features.length > 0) || features && features[0] && !features[0].getGeometry()) {\n          return false;\n        }\n        var type = features[0].getGeometry().getType();\n        return geometryType === type || isSameBaseGeometryType(geometryType, type);\n      }).map(function (l) {\n        return {\n          id: l.get('id'),\n          name: l.get('name'),\n          external: true\n        };\n      }))).sort(function (a, b) {\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n      });\n    }\n\n    this.copylayerid = this.copyFeatureLayers.length ? this.copyFeatureLayers[0].id : null;\n\n    this.loadEventuallyRelationValuesForInputs = false;\n\n    var parentLayer = _workflow2.Workflow.Stack.getCurrent().getLayer();\n\n    this.currentRelationFeatureId = null;\n\n    this._relationLayerId = this.relation.child === this.layerId ? this.relation.father : this.relation.child;\n\n    this._layerType = this.getLayer().getType();\n\n    var fatherFields = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: this.layerId, relation: this.relation }).ownField;\n\n    var pk = fatherFields.find(function (f) {\n      return parentLayer.isPkField(f);\n    });\n\n    this.parent = {\n      layerId: this.layerId,\n\n      editable: fatherFields.filter(function (f) {\n        return parentLayer.isEditingFieldEditable(f);\n      }),\n\n      pk: pk,\n\n      values: fatherFields.reduce(function (father, field) {\n        var feature = _workflow2.Workflow.Stack.getCurrent().getCurrentFeature();\n\n        var fields = _workflow2.Workflow.Stack.getCurrent().getInputs().fields;\n        return Object.assign(father, _defineProperty({}, field, field === pk && feature.isNew() ? feature.getId() : fields ? fields.find(function (f) {\n          return field === f.name;\n        }).value : feature.get(field)));\n      }, {})\n    };\n\n    this.capabilities = parentLayer.getEditingCapabilities();\n\n    this.tools = [];\n\n    this._add_link_workflow = (_Layer$LayerTypes$TAB = {}, _defineProperty(_Layer$LayerTypes$TAB, Layer.LayerTypes.TABLE, {\n      link: function link() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow(_extends({}, options, {\n          type: 'edittable',\n          backbuttonlabel: 'plugins.editing.form.buttons.save_and_back_table',\n          steps: [new _workflows.OpenTableStep()]\n        }));\n      },\n      add: function add() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow(_extends({}, options, {\n          type: 'addtablefeature',\n          steps: [new _step.Step({ help: 'editing.steps.help.new', run: _addTableFeature.addTableFeature }), new _workflows.OpenFormStep()]\n        }));\n      }\n    }), _defineProperty(_Layer$LayerTypes$TAB, Layer.LayerTypes.VECTOR, {\n      link: function link() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow({\n          type: 'linkrelation',\n          steps: [new _step.Step(_extends({}, options, {\n            help: \"editing.steps.help.select_feature_to_relation\",\n            run: function run(inputs, context) {\n              var _this12 = this;\n\n              return $.Deferred(function () {\n                var _ref26 = _asyncToGenerator(function* (d) {\n                  GUI.setModal(false);\n                  var editingLayer = inputs.layer.getEditingLayer();\n                  _this12._originalLayerStyle = editingLayer.getStyle();\n\n                  try {\n\n                    if (context.beforeRun && 'function' === typeof context.beforeRun) {\n                      yield (0, _promisify.promisify)(context.beforeRun());\n                    }\n\n                    var features = editingLayer.getSource().getFeatures();\n\n                    if (context.excludeFeatures) {\n                      features = features.filter(function (feature) {\n                        return Object.entries(context.excludeFeatures).reduce(function (bool, _ref27) {\n                          var _ref28 = _slicedToArray(_ref27, 2),\n                              field = _ref28[0],\n                              value = _ref28[1];\n\n                          return bool && feature.get(field) != value;\n                        }, true);\n                      });\n                    }\n                    _this12._stopPromise = $.Deferred();\n\n                    (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({\n                      promise: _this12._stopPromise.promise(),\n                      inputs: { layer: inputs.layer, features: features },\n                      style: _this12.selectStyle\n                    });\n\n                    _this12.addInteraction(new PickFeatureInteraction({ layers: [editingLayer], features: features }), {\n                      'picked': function picked(e) {\n                        inputs.features.push(e.feature);\n                        GUI.setModal(true);\n                        d.resolve(inputs);\n                      }\n                    });\n                  } catch (e) {\n                    console.warn(e);\n                    d.reject(e);\n                  }\n                });\n\n                return function (_x12) {\n                  return _ref26.apply(this, arguments);\n                };\n              }()).promise();\n            },\n            stop: function stop() {\n              GUI.setModal(true);\n              this._originalLayerStyle = null;\n              if (this._stopPromise) {\n                this._stopPromise.resolve(true);\n              }\n              return true;\n            }\n          }))]\n        });\n      },\n\n      add: function add() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new _workflow2.Workflow(_extends({}, options, {\n          type: 'addfeature',\n          steps: [new _workflows.AddFeatureStep(_extends({}, options, { tools: ['snap', 'measure'] })), new _workflows.OpenFormStep(options)]\n        }));\n      },\n\n      selectandcopy: function selectandcopy() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return new _workflow2.Workflow({\n          type: 'selectandcopyfeaturesfromotherlayer',\n          steps: [new _step.Step(_extends({}, options, {\n            help: \"editing.steps.help.pick_feature\",\n            run: function run(inputs, context) {\n              var _this13 = this;\n\n              if (!options.copyLayer) {\n                return $.Deferred(function (d) {\n                  return d.resolve();\n                }).promise();\n              }\n              return $.Deferred(function () {\n                var _ref29 = _asyncToGenerator(function* (d) {\n                  var features = [];\n                  var geometryType = inputs.layer.getGeometryType();\n\n                  yield new Promise(function () {\n                    var _ref30 = _asyncToGenerator(function* (resolve) {\n                      if (!options.isVector) {\n                        return resolve();\n                      }\n                      _this13.addInteraction(options.external ? new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: options.copyLayer }) : new PickCoordinatesInteraction(), {\n                        'picked': function () {\n                          var _ref31 = _asyncToGenerator(function* (e) {\n                            try {\n                              features = (0, _convertFeaturesGeometryToGeometryTypeOfLayer.convertFeaturesGeometryToGeometryTypeOfLayer)({\n                                geometryType: geometryType,\n                                features: (options.external ? [{ features: e.features }] : yield DataRouterService.getData('query:coordinates', {\n                                  inputs: {\n                                    coordinates: e.coordinate,\n                                    query_point_tolerance: ProjectsRegistry.getCurrentProject().getQueryPointTolerance(),\n                                    layerIds: [options.copyLayer.getId()],\n                                    multilayers: false\n                                  },\n                                  outputs: null\n                                }))[0].features\n                              });\n                            } catch (e) {\n                              console.warn(e);\n                              d.reject(e);\n                            } finally {\n                              resolve();\n                            }\n                          });\n\n                          function picked(_x17) {\n                            return _ref31.apply(this, arguments);\n                          }\n\n                          return picked;\n                        }()\n                      });\n                    });\n\n                    return function (_x16) {\n                      return _ref30.apply(this, arguments);\n                    };\n                  }());\n                  if (features.length) {\n                    inputs.features = features;\n                    d.resolve(inputs);\n                  } else {\n                    GUI.showUserMessage({\n                      type: 'warning',\n                      message: 'plugins.editing.messages.no_feature_selected',\n                      closable: false,\n                      autoclose: true\n                    });\n                    d.reject();\n                  }\n                });\n\n                return function (_x15) {\n                  return _ref29.apply(this, arguments);\n                };\n              }()).promise();\n            }\n          })), new _step.Step(_extends({}, options, {\n            help: \"editing.steps.help.draw_new_feature\",\n            run: function run(inputs, context) {\n              var _this14 = this;\n\n              return $.Deferred(function (d) {\n                return new (Vue.extend(require('../components/CopyFeaturesFromOtherProjectLayer.vue')))({\n                  inputs: inputs,\n                  context: context,\n                  promise: d,\n                  service: _this14,\n                  copyLayer: options.copyLayer,\n                  external: options.external,\n                  isVector: options.isVector\n                });\n              }).promise();\n            }\n          })), new _workflows.OpenFormStep(options)],\n          registerEscKeyEvent: true\n        });\n      }\n    }), _Layer$LayerTypes$TAB)[this._layerType];\n\n    this.relations.forEach(function (r) {\n      return _this11.addTools(r.id);\n    });\n\n    try {\n      var formservice = g3wsdk.gui.GUI.getCurrentContent().content.getService();\n      formservice.getEventBus().$on('changeinput', this.onInputChange.bind(this));\n    } catch (e) {\n      console.warn(e);\n    }\n  },\n  activated: function () {\n    var _ref32 = _asyncToGenerator(function* () {\n      if (this.isVectorRelation) {\n        this.mapExtent = GUI.getService('map').getMapBBOX();\n      }\n\n      this.show_vector_tools = false;\n\n      if (!this.loadEventuallyRelationValuesForInputs) {\n        this.loading = true;\n\n        try {\n          yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({\n            type: 'show-relation-editing',\n            id: (0, _getRelationId.getRelationId)({ layerId: this.layerId, relation: this.relation }),\n            component: this\n          });\n        } catch (e) {\n          console.warn(e);\n        }\n\n        this.loading = false;\n\n        this.loadEventuallyRelationValuesForInputs = true;\n      }\n\n      this.active = true;\n\n      yield this.$nextTick();\n\n      if (!this.relationsTable && this.relations.length > 0) {\n        this._createDataTable();\n      }\n\n      this.resize();\n    });\n\n    function activated() {\n      return _ref32.apply(this, arguments);\n    }\n\n    return activated;\n  }(),\n  deactivated: function deactivated() {\n    this.destroyTable();\n    this.active = false;\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.loadEventuallyRelationValuesForInputs = true;\n\n    g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').off('commit', this.onCommit);\n\n    if (this.isVectorRelation && null !== this.currentRelationFeatureId) {\n      GUI.getService('map').zoomToExtent(this.mapExtent);\n      this.mapExtent = null;\n    }\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"margin-bottom\":\"5px\"}},[_c('bar-loader',{attrs:{\"loading\":_vm.loading}}),_vm._v(\" \"),_c('div',{ref:\"relation_header_title\",staticClass:\"relation_header_title box-header with-border skin-color\"},[_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.edit_relation'),expression:\"'editing.edit_relation'\"}]}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"2px\"}},[_vm._v(\": \"+_vm._s(_vm.relation.name.toUpperCase()))])]),_vm._v(\" \"),_c('div',{ref:\"relation_header_tools\",staticClass:\"relation_header_tools box-header with-border\"},[_c('div',{attrs:{\"id\":\"search-box\"}},[(_vm.relationsLength)?_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"filterRelation\",\"placeholder\":_vm.placeholdersearch}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"g3w-editing-relations-add-link-tools\"},[(_vm.capabilities.includes('change_attr_feature'))?_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:bottom.create\",value:('plugins.editing.form.relations.tooltips.link_relation'),expression:\"'plugins.editing.form.relations.tooltips.link_relation'\",arg:\"bottom\",modifiers:{\"create\":true}}],staticClass:\"g3w-icon add-link\",class:[{ 'disabled': !_vm.show_add_link }, _vm.g3wtemplate.font['link']],attrs:{\"align\":\"center\"},on:{\"click\":function($event){$event.stopPropagation();_vm.show_add_link ? _vm.linkRelation() : null}}}):_vm._e(),_vm._v(\" \"),(_vm.capabilities.includes('add_feature'))?_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:bottom.create\",value:('plugins.editing.form.relations.tooltips.add_relation'),expression:\"'plugins.editing.form.relations.tooltips.add_relation'\",arg:\"bottom\",modifiers:{\"create\":true}}],staticClass:\"g3w-icon add-link pull-right\",class:[{ 'disabled' : !_vm.show_add_link }, _vm.g3wtemplate.font['plus']],on:{\"click\":function($event){_vm.show_add_link ? _vm.addRelationAndLink() : null}}}):_vm._e()])]),_vm._v(\" \"),(_vm.show_vector_tools)?_c('section',{ref:\"relation_vector_tools\",staticClass:\"relation_vector_tools\"},[_c('span',{staticClass:\"close_vector_relation_tool\",on:{\"click\":function($event){$event.stopPropagation();return _vm.closeVectorTools($event)}}},[_c('i',{staticClass:\"g3w-icon skin-color\",class:_vm.g3wtemplate.font['close']})]),_vm._v(\" \"),_c('div',[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.draw_new_feature'),expression:\"'editing.relation.draw_new_feature'\"}],staticClass:\"g3w-editing-new-relation-vector-type\"}),_vm._v(\" \"),_c('button',{staticClass:\"btn skin-button\",staticStyle:{\"width\":\"100%\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addVectorRelation($event)}}},[_c('i',{class:_vm.g3wtemplate.font['pencil']})])]),_vm._v(\" \"),(_vm.copyFeatureLayers.length > 0)?_c('section',[_c('span',{staticClass:\"divider\"}),_vm._v(\" \"),_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.draw_or_copy'),expression:\"'editing.relation.draw_or_copy'\"}],staticStyle:{\"align-self\":\"center\"}}),_vm._v(\" \"),_c('span',{staticClass:\"divider\"}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"g3w-select-editable-layers-content\"}},[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.copy_feature_from_other_layer'),expression:\"'editing.relation.copy_feature_from_other_layer'\"}],staticClass:\"g3w-editing-new-relation-vector-type\"}),_vm._v(\" \"),_c('select',{directives:[{name:\"select2\",rawName:\"v-select2\",value:('copylayerid'),expression:\"'copylayerid'\"}],attrs:{\"id\":\"g3w-select-editable-layers-to-copy\"}},_vm._l((_vm.copyFeatureLayers),function(layer){return _c('option',{key:layer.id,domProps:{\"value\":layer.id}},[_vm._v(_vm._s(layer.name))])}),0),_vm._v(\" \"),_c('button',{staticClass:\"btn skin-button\",on:{\"click\":function($event){$event.stopPropagation();return _vm.copyFeatureFromOtherLayer($event)}}},[_c('i',{class:_vm.g3wtemplate.font['clipboard']})])])]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.disabled),expression:\"disabled\"}],ref:\"relation_body\",staticClass:\"relation_body box-body\"},[(_vm.relationsLength > 0 && !_vm.update)?_c('table',{ref:\"relationTable\",staticClass:\"table g3wform-relation-table table-striped\"},[_c('thead',[_c('tr',[_c('th',{directives:[{name:\"t\",rawName:\"v-t\",value:('tools'),expression:\"'tools'\"}]}),_vm._v(\" \"),_c('th'),_vm._v(\" \"),_vm._l((_vm.relationAttributesSubset(_vm.relations[0])),function(attribute){return _c('th',[_vm._v(_vm._s(attribute.label))])})],2)]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.relations),function(relation,index){return _c('tr',{key:relation.id,staticClass:\"featurebox-header\"},[_c('td',[_c('div',{staticStyle:{\"display\":\"flex\"}},_vm._l(((_vm.tools[index] || _vm.addTools(_vm.relations[index].id))),function(tool){\nvar _obj;\nreturn _c('div',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:top.create\",value:((\"plugins.\" + (tool.name))),expression:\"`plugins.${tool.name}`\",arg:\"top\",modifiers:{\"create\":true}}],key:tool.id,class:( _obj = { enabled: true, 'toggled': tool.active }, _obj[(\"editbtn \" + (tool.id))] = true, _obj ),on:{\"click\":function($event){$event.stopPropagation();return _vm.startTool(tool, index)}}},[_c('img',{attrs:{\"height\":\"20px\",\"width\":\"20px\",\"src\":(_vm.resourcesurl + \"images/\" + (tool.icon))}})])}),0)]),_vm._v(\" \"),_c('td',{staticClass:\"action-cell\"},[(!_vm.fieldrequired && _vm.capabilities.includes('change_attr_feature'))?_c('div',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.form.relations.tooltips.unlink_relation'),expression:\"'plugins.editing.form.relations.tooltips.unlink_relation'\",arg:\"right\",modifiers:{\"create\":true}}],staticClass:\"g3w-mini-relation-icon g3w-icon\",class:_vm.g3wtemplate.font['unlink'],attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.unlinkRelation(index)}}}):_vm._e()]),_vm._v(\" \"),_vm._l((_vm.relationAttributesSubset(relation)),function(attribute){return _c('td',[(_vm.isMedia(attribute.value) && _vm.getValue(attribute.value))?_c('div',{staticClass:\"preview\"},[_c('a',{attrs:{\"href\":_vm.getValue(attribute.value),\"target\":\"_blank\"}},[_c('div',{staticClass:\"previewtype\",class:_vm.getMediaType(attribute.value.mime_type).type},[_c('i',{staticClass:\"fa-2x\",class:_vm.g3wtemplate.font[_vm.getMediaType(attribute.value.mime_type).type]})])]),_vm._v(\" \"),_c('div',{staticClass:\"filename\"},[_vm._v(_vm._s(_vm.getValue(attribute.value).split('/').pop()))])]):(['photo', 'link'].includes(_vm.getFieldType(attribute)))?_c('a',{attrs:{\"href\":_vm.getValue(attribute.value),\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.getValue(attribute.value))+\"\\n              \")]):_c('span',[_vm._v(_vm._s(_vm.getValue(_vm.getRelationFeatureValue(relation.id, attribute.name))))])])})],2)}),0)]):_vm._e()])],1)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-6dc0e49c\"\n\n},{\"../components/CopyFeaturesFromOtherProjectLayer.vue\":5,\"../eventbus\":12,\"../g3wsdk/workflow/step\":15,\"../g3wsdk/workflow/workflow\":16,\"../interactions/pickfeaturesinteraction\":26,\"../utils/addTableFeature\":30,\"../utils/convertFeaturesGeometryToGeometryTypeOfLayer\":36,\"../utils/getEditingLayerById\":41,\"../utils/getFeatureTableFieldValue\":42,\"../utils/getLayersDependencyFeatures\":44,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/getRelationId\":50,\"../utils/promisify\":57,\"../utils/setAndUnsetSelectedFeaturesStyle\":58,\"../utils/updateParentWorkflows\":62,\"../workflows\":63,\"vueify/lib/insert-css\":1}],8:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".g3w-editing-table table.dataTable tbody td{padding:3px 5px}\\n.editing_table_title[data-v-232b9cc2]{margin-top:0;margin-bottom:2px;font-size:1.5em;font-weight:700;color:var(--skin-color)}#table-editing-tools[data-v-232b9cc2]{display:flex;justify-content:space-between}#table-editing-tools i[data-v-232b9cc2]{margin:5px}#buttons button.btn[data-v-232b9cc2]{font-weight:700!important;min-width:80px}.table_editing_footer_buttons[data-v-232b9cc2]{position:absolute;bottom:10px;width:100%;display:flex;justify-content:center}.editing_table_header_content[data-v-232b9cc2]{display:flex;justify-content:space-between;align-items:baseline}.editing_table_relation_messagge[data-v-232b9cc2]{margin-bottom:10px;font-size:1.3em;background-color:#f5f5f5;padding:3px;border-radius:3px;font-weight:700}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _step = require('../g3wsdk/workflow/step');\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _workflows = require('../workflows');\n\nvar _cloneFeature = require('../utils/cloneFeature');\n\nvar _getRelationsInEditing = require('../utils/getRelationsInEditing');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nvar _addTableFeature = require('../utils/addTableFeature');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\nvar GUI = g3wsdk.gui.GUI;\nvar resizeMixin = g3wsdk.gui.vue.Mixins.resizeMixin;\n\nvar Media_Field = g3wsdk.gui.vue.Fields.media_field;\n\nObject.entries({\n  Workflow: _workflow.Workflow,\n  OpenFormStep: _workflows.OpenFormStep\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nexports.default = {\n\n  name: 'Table',\n\n  mixins: [resizeMixin],\n\n  components: {\n    'g3w-media': Media_Field\n  },\n\n  data: function data() {\n    return {\n      dataTable: null,\n      show: true,\n      state: this.$options.service.state\n    };\n  },\n\n\n  methods: {\n    showTool: function showTool(type) {\n      return undefined !== this.state.capabilities.find(function (cap) {\n        return cap === type;\n      });\n    },\n    resize: function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        if (this.$el.style.display === 'none') {\n          return;\n        }\n\n        yield this.$nextTick();\n\n        $('#editing_table  div.dataTables_scrollBody').height($(\".content\").height() - $('.close-panel-block').outerHeight() - $('#editing_table  div.dataTables_scrollHeadInner').outerHeight() - $('.editing_table_title').outerHeight() - $('.editing_table_header').outerHeight() - $('.editing_table_relation_messagge').outerHeight() - $('.dataTables_length').outerHeight() - $('.dataTables_paginate.paging_simple_numbers').outerHeight() - $('.dataTables_info').outerHeight() - $('.dataTables_filter').outerHeight() - $('.table_editing_footer_buttons').outerHeight() - $('#editing_table .dataTables_paginate.paging_simple_numbers').outerHeight());\n\n        if (this.dataTable) {\n          this.dataTable.columns.adjust();\n        }\n      });\n\n      function resize() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return resize;\n    }(),\n    showValue: function showValue(key) {\n      return !!this.state.headers.find(function (h) {\n        return h.name === key;\n      });\n    },\n    isMediaField: function isMediaField(name) {\n      var isMedia = false;\n      for (var i = 0; i < this.state.headers.length; i++) {\n        var header = this.state.headers[i];\n        if (header.name === name && header.input.type === 'media') {\n          isMedia = true;\n          break;\n        }\n      }\n      return isMedia;\n    },\n    stop: function stop() {\n      this.state.promise.reject();\n    },\n    save: function save() {\n      var _this = this;\n\n      this.state.isrelation ? this.state.promise.resolve({ features: (this._linkFeatures || []).map(function (i) {\n          return _this.state.features[i];\n        }) }) : this.state.promise.resolve();\n    },\n    cancel: function cancel() {\n      this.state.promise.reject();\n    },\n    deleteFeature: function () {\n      var _ref4 = _asyncToGenerator(function* (uid) {\n        var _this2 = this;\n\n        var element = $('#editing_table table tr#' + uid);\n\n        var layer = this.state.inputs.layer;\n        var layerId = layer.getId();\n        var childRelations = layer.getChildren();\n        var relationinediting = childRelations.length && (0, _getRelationsInEditing.getRelationsInEditing)({\n          layerId: layerId,\n          relations: layer.getRelations().getArray()\n        }).length > 0;\n\n        try {\n          yield new Promise(function (resolve, reject) {\n            GUI.dialog.confirm('<h4>' + tPlugin('editing.messages.delete_feature') + '</h4>\\n              <div style=\"font-size:1.2em;\">' + (relationinediting ? tPlugin('editing.messages.delete_feature_relations') : '') + '</div>', function (result) {\n              if (result) {\n                var index = _this2.state.features.findIndex(function (f) {\n                  return f.getUid() === uid;\n                });\n                var feature = _this2.state.features[index];\n                var session = _this2.state.context.session;\n                var _layerId = _this2.state.inputs.layer.getId();\n                _this2.state.inputs.layer.getEditingSource().removeFeature(feature);\n                session.pushDelete(_layerId, feature);\n                _this2.state.rows.splice(index, 1);\n                resolve();\n              } else {\n                reject();\n              }\n            });\n          });\n\n          this.dataTable.row(element).remove().draw();\n\n          yield this.$nextTick();\n        } catch (e) {\n          console.warn(e);\n        }\n      });\n\n      function deleteFeature(_x) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return deleteFeature;\n    }(),\n    copyFeature: function () {\n      var _ref5 = _asyncToGenerator(function* (uid) {\n        var _this3 = this;\n\n        yield new Promise(function (resolve, reject) {\n          var feature = (0, _cloneFeature.cloneFeature)(_this3.state.features.find(function (f) {\n            return f.getUid() === uid;\n          }), _this3.state.inputs.layer.getEditingLayer());\n\n          _this3.state.workflow = new _workflow.Workflow({\n            type: 'addtablefeature',\n            steps: [new _step.Step({ help: 'editing.steps.help.new', run: _addTableFeature.addTableFeature }), new _workflows.OpenFormStep()]\n          });\n          _this3.state.inputs.features.push(feature);\n          _this3.state.workflow.start({\n            context: _this3.state.context,\n            inputs: _this3.state.inputs\n          }).then(function (outputs) {\n            var feature = outputs.features[outputs.features.length - 1];\n            var newFeature = {};\n            Object.entries(_this3.state.rows[0]).forEach(function (_ref6) {\n              var _ref7 = _slicedToArray(_ref6, 2),\n                  key = _ref7[0],\n                  value = _ref7[1];\n\n              newFeature[key] = (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n                layerId: _this3.state.layerId,\n                feature: feature,\n                property: key\n              });\n            });\n            newFeature.__gis3w_feature_uid = feature.getUid();\n            _this3.state.rows.push(newFeature);\n            resolve(newFeature);\n          }).fail(reject).always(function () {\n            _this3.state.workflow.stop();\n\n            console.log('here we are');\n          });\n        });\n\n        this.show = false;\n        this.dataTable.destroy();\n\n        yield this.$nextTick();\n\n        this.show = true;\n\n        yield this.$nextTick();\n\n        this.setDataTable();\n      });\n\n      function copyFeature(_x2) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return copyFeature;\n    }(),\n    editFeature: function editFeature(uid) {\n      var _this4 = this;\n\n      var index = this.state.features.findIndex(function (f) {\n        return f.getUid() === uid;\n      });\n\n      var feature = this.state.features[index];\n\n      this.state.workflow = new _workflow.Workflow({ type: 'edittablefeature', steps: [new _workflows.OpenFormStep()] });\n\n      var inputs = this.state.inputs;\n\n      inputs.features.push(feature);\n\n      this.state.workflow.start({\n        context: this.state.context,\n        inputs: inputs\n      }).then(function (outputs) {\n        var feature = outputs.features[outputs.features.length - 1];\n        Object.entries(_this4.state.rows[index]).forEach(function (_ref8) {\n          var _ref9 = _slicedToArray(_ref8, 2),\n              key = _ref9[0],\n              _ = _ref9[1];\n\n          _this4.state.rows[index][key] = (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({\n            layerId: _this4.state.layerId,\n            feature: feature,\n            property: key\n          });\n        });\n      }).fail(console.warn).always(function () {\n        return _this4.state.workflow.stop();\n      });\n    },\n    linkFeature: function linkFeature(index, evt) {\n      if (evt.target.checked) {\n        this._linkFeatures.push(index);\n      } else {\n        this._linkFeatures = this._linkFeatures.filter(function (addindex) {\n          return addindex !== index;\n        });\n      }\n    },\n    getValue: function getValue(value) {\n      if (value && 'object' === (typeof value === 'undefined' ? 'undefined' : _typeof(value)) && Object === value.constructor) {\n        value = value.value;\n      } else if ('string' == typeof value && 0 === value.indexOf('_new_')) {\n        value = null;\n      }\n      return value;\n    },\n    setDataTable: function setDataTable() {\n      this.dataTable = $('#editing_table table').DataTable({\n        columnDefs: [{ orderable: false, targets: 0 }],\n        order: [1, 'asc'],\n        pageLength: 10,\n        scrollCollapse: true,\n        scrollResize: true,\n        scrollX: true\n      });\n      this.resize();\n    }\n  },\n\n  beforeCreate: function beforeCreate() {\n    this.delayType = 'debounce';\n\n    GUI.disableSideBar(true);\n\n    GUI.showUserMessage({\n      type: 'loading',\n      message: 'plugins.editing.messages.loading_table_data',\n      autoclose: false,\n      closable: false\n    });\n  },\n  mounted: function () {\n    var _ref10 = _asyncToGenerator(function* () {\n\n      yield this.$nextTick();\n\n      if (this.state.isrelation) {\n        this._linkFeatures = [];\n      }\n\n      this.setDataTable();\n\n      this.resize();\n\n      setTimeout(function () {\n        return GUI.closeUserMessage();\n      }, 300);\n    });\n\n    function mounted() {\n      return _ref10.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  beforeDestroy: function beforeDestroy() {\n    this.cancel();\n    this._linkFeatures = null;\n    this.dataTable.destroy();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g3w-editing-table\",attrs:{\"id\":\"editing_table\"}},[_c('div',{ref:\"editing_table_header\",staticClass:\"editing_table_header\"},[_c('div',{staticClass:\"editing_table_header_content\"},[_c('h3',{staticClass:\"editing_table_title\"},[_vm._v(_vm._s(_vm.state.title))])]),_vm._v(\" \"),(_vm.state.isrelation)?_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.relation.table.info'),expression:\"'editing.relation.table.info'\"}],staticClass:\"editing_table_relation_messagge\"}):_vm._e()]),_vm._v(\" \"),(_vm.show)?_c('table',{staticClass:\"display\",staticStyle:{\"width\":\"100%\"}},[_c('thead',[_c('tr',[(!_vm.state.isrelation)?_c('th',{staticStyle:{\"max-width\":\"60px\"}}):_vm._e(),_vm._v(\" \"),(_vm.state.isrelation)?_c('th'):_vm._e(),_vm._v(\" \"),_vm._l((_vm.state.headers),function(header){return _c('th',[_vm._v(_vm._s(header.label))])})],2)]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.state.rows),function(feature,index){return _c('tr',{key:feature.__gis3w_feature_uid,attrs:{\"id\":feature.__gis3w_feature_uid}},[(!_vm.state.isrelation)?_c('td',[_c('div',{attrs:{\"id\":\"table-editing-tools\"}},[_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.table.edit'),expression:\"'plugins.editing.table.edit'\",arg:\"right\",modifiers:{\"create\":true}}]},[(_vm.showTool('change_attr_feature'))?_c('i',{staticClass:\"g3w-icon\",class:_vm.g3wtemplate.font['pencil'],staticStyle:{\"color\":\"#30cce7\"},attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.editFeature(feature.__gis3w_feature_uid)}}}):_vm._e()]),_vm._v(\" \"),_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.table.copy'),expression:\"'plugins.editing.table.copy'\",arg:\"right\",modifiers:{\"create\":true}}]},[(_vm.showTool('add_feature'))?_c('i',{staticClass:\"g3w-icon\",class:_vm.g3wtemplate.font['copy-paste'],staticStyle:{\"color\":\"#d98b14\",\"padding\":\"5px 7px 5px 7px\"},attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.copyFeature(feature.__gis3w_feature_uid)}}}):_vm._e()]),_vm._v(\" \"),_c('span',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.table.delete'),expression:\"'plugins.editing.table.delete'\",arg:\"right\",modifiers:{\"create\":true}}]},[(_vm.showTool('delete_feature'))?_c('i',{staticClass:\"g3w-icon\",class:_vm.g3wtemplate.font['trash-o'],staticStyle:{\"color\":\"red\"},attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteFeature(feature.__gis3w_feature_uid)}}}):_vm._e()])])]):_vm._e(),_vm._v(\" \"),(_vm.state.isrelation)?_c('td',[_c('input',{staticClass:\"magic-checkbox\",attrs:{\"id\":(\"relation__\" + index),\"type\":\"checkbox\"},on:{\"change\":function($event){return _vm.linkFeature(index, $event)}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"relation__\" + index)}})]):_vm._e(),_vm._v(\" \"),_vm._l((feature),function(value,key){return (_vm.showValue(key))?_c('td',{key:key},[(_vm.getValue(value) && _vm.isMediaField(key))?_c('g3w-media',{attrs:{\"state\":value}}):_c('p',[_vm._v(_vm._s(_vm.getValue(value)))])],1):_vm._e()})],2)}),0)]):_vm._e(),_vm._v(\" \"),_c('div',{ref:\"table_editing_footer_buttons\",staticClass:\"table_editing_footer_buttons\",attrs:{\"id\":\"buttons\"}},[_c('button',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(_vm.state.isrelation ? 'editing.form.buttons.save_and_back' : 'editing.form.buttons.save'),expression:\"state.isrelation ? 'editing.form.buttons.save_and_back' : 'editing.form.buttons.save'\"}],staticClass:\"btn btn-success\",staticStyle:{\"margin-right\":\"10px\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.save($event)}}}),_vm._v(\" \"),_c('button',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.form.buttons.cancel'),expression:\"'editing.form.buttons.cancel'\"}],staticClass:\"btn btn-danger\",on:{\"click\":function($event){$event.stopPropagation();return _vm.cancel($event)}}})])])}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-232b9cc2\"\n\n},{\"../g3wsdk/workflow/step\":15,\"../g3wsdk/workflow/workflow\":16,\"../utils/addTableFeature\":30,\"../utils/cloneFeature\":35,\"../utils/getFeatureTableFieldValue\":42,\"../utils/getRelationsInEditing\":51,\"../workflows\":63,\"vueify/lib/insert-css\":1}],9:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".panel.mobile[data-v-8b2c66b2]{margin-bottom:5px}.panel.mobile .panel-heading[data-v-8b2c66b2]{display:flex;justify-content:space-between}.panel.mobile .panel-heading .panel-title[data-v-8b2c66b2]{margin-top:auto;margin-bottom:auto}.panel.mobile .panel-heading .start-editing[data-v-8b2c66b2]{margin:auto;margin-right:0;padding:6px}.panel.mobile .tools-content .editbtn[data-v-8b2c66b2]{padding:9px}.panel.mobile .toolbox .panel-body[data-v-8b2c66b2]{padding:5px!important}.toolbox_help_message[data-v-8b2c66b2]{font-weight:lighter}.toolbox[data-v-8b2c66b2]{padding-bottom:5px}.panel[data-v-8b2c66b2]{border:0!important;margin-bottom:8px}.panel-heading[data-v-8b2c66b2]{padding:5px 10px;width:100%}.toolboxselected[data-v-8b2c66b2]{box-shadow:0 0 0 3px var(--skin-color)}.panel:not(.toolboxselected) .info[data-v-8b2c66b2]{opacity:.4}.panel:not(.toolboxactive) .panel-heading[data-v-8b2c66b2]{border-radius:3px;filter:grayscale(.8)}.panel:not(.geolayer) .panel-body[data-v-8b2c66b2]{padding-top:0}.panel.toolboxactive:not(.geolayer) .editbtn.start-editing[data-v-8b2c66b2]{color:#fff!important}.panel:not(.geolayer) .panel-heading[data-v-8b2c66b2]{color:#3a4448}.editbtn.start-editing[data-v-8b2c66b2]{padding:13px;color:currentColor!important;font-size:1.1em;margin:0}.panel-title[data-v-8b2c66b2]{font-weight:700;word-break:break-word;padding:8px 0;display:inline-block}#toolsoftoolcontainer[data-v-8b2c66b2]{display:flex;flex-direction:column;margin:5px;padding:5px;border-radius:5px}.info[data-v-8b2c66b2]{color:#000}.info>i[data-v-8b2c66b2]{color:#007bff;padding-right:2px}.info+.tools-content[data-v-8b2c66b2]{margin-top:1em}.filter-by-relation[data-v-8b2c66b2]{margin-right:5px;cursor:pointer;color:currentColor!important}.tools-content[data-v-8b2c66b2]{display:flex;flex-wrap:wrap;gap:10px}.message[data-v-8b2c66b2]{margin-bottom:5px;font-size:1.1em;color:#000;margin-top:5px}.snap-tool[data-v-8b2c66b2]{display:flex}.snap-tool label>b[data-v-8b2c66b2]{color:#222d32!important}.tools-of-tool-snap[data-v-8b2c66b2]{display:flex;width:100%;justify-content:space-between}.tools-of-tool-snap label span[data-v-8b2c66b2]{color:#222d32!important}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar GUI = g3wsdk.gui.GUI;\nvar Layer = g3wsdk.core.layer.Layer;\n\n\nvar snapInteraction = void 0;\n\nexports.default = {\n\n  name: 'Toolbox',\n\n  props: ['state', 'resourcesurl'],\n\n  data: function data() {\n    return {\n      active: false,\n      helpmessage: null,\n      toggled: false,\n      snapAll: false\n    };\n  },\n\n\n  computed: {\n    editDisabled: function editDisabled() {\n      return this.state.loading && !this.state.startstopediting;\n    },\n    hasRelations: function hasRelations() {\n      return this.state.editing.dependencies.length > 0;\n    },\n    loading: function loading() {\n      return this.state.loading || this.state.changingtools;\n    },\n    canEdit: function canEdit() {\n      return this.state.editing.canEdit;\n    },\n    father: function father() {\n      return this.state.editing.father && !!this.state.editing.dependencies.length;\n    },\n    showtoolsoftool: function showtoolsoftool() {\n      return !!this.state.toolsoftool.length;\n    },\n    isLayerReady: function isLayerReady() {\n      return this.state.layer.state.editing.ready;\n    }\n  },\n\n  methods: {\n    select: function select() {\n      if (this.isLayerReady && !this.state.selected) {\n        this.$emit('setselectedtoolbox', this.state.id);\n      }\n    },\n    toggleEditing: function toggleEditing() {\n      this.select();\n      if (this.state.layer.state.editing.ready && !this.state.loading) {\n        this.$emit(this.state.editing.on ? 'stoptoolbox' : 'starttoolbox', this.state.id);\n      }\n    },\n    toggleTool: function toggleTool(toolId) {\n      if (undefined !== toolId) {\n        this.$emit('setactivetool', toolId, this.state.id);\n      } else {\n        this.$emit('stopactivetool', this.state.id);\n      }\n      this.select();\n    },\n    toggleFilterByRelation: function toggleFilterByRelation() {\n      this.toggled = !this.toggled;\n      this.$emit('update-filter-layers', this.toggled ? [this.state.id].concat(_toConsumableArray(this.state.editing.dependencies)) : []);\n    },\n    _initSnap: function _initSnap() {\n      var _this = this;\n\n      var tool = (this.state.toolsoftool || []).find(function (tool) {\n        return 'snap' === tool.type;\n      });\n\n      if (!tool) {\n        return;\n      }\n\n      this.snapFeatures = new ol.Collection();\n\n      this.snapEvents = [];\n\n      this.snapToolboxes = [];\n\n      this.snapUnwatches = [];\n\n      this.$watch(function () {\n        return tool.options.checked;\n      }, function () {\n        return _this.activeSnapInteraction();\n      });\n      this.$watch(function () {\n        return tool.options.checkedAll;\n      }, function () {\n        return _this.activeSnapInteraction();\n      });\n\n      this.$watch(function () {\n        return tool.options.active;\n      }, function () {\n        if (tool.options.active) {\n          _this.activeSnapInteraction();\n        } else if (snapInteraction) {\n          GUI.getService('map').removeInteraction(snapInteraction);\n        }\n      });\n\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayers().filter(function (layer) {\n        return Layer.LayerTypes.VECTOR === layer.getType();\n      }).forEach(function (layer) {\n        var toolbox = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getToolBoxById(layer.getId());\n        var source = toolbox.getLayer().getEditingSource();\n\n        _this.snapFeatures.extend(source.readFeatures());\n\n        _this.snapEvents.push({\n          source: source,\n          olKey: source.getFeaturesCollection().on('add', function (evt) {\n            return _this.addSnapFeatures([evt.element]);\n          }),\n          settersAndKeys: {\n            'addFeatures': source.onbefore('addFeatures', _this.addSnapFeatures),\n            'addFeature': source.onbefore('addFeature', _this.addSnapFeatures),\n            'clear': source.onbefore('clear', function () {\n              source.readFeatures().forEach(function (f) {\n                return _this.snapFeatures.remove(f);\n              });\n            })\n          }\n        });\n\n        if (tool.options.layerId !== layer.getId()) {\n          var editing = toolbox.getState().editing;\n          _this.snapUnwatches.push(_this.$watch(function () {\n            return editing.on;\n          }, _this.setShowSnapAll));\n          _this.snapToolboxes.push(editing);\n        }\n      });\n\n      this.setShowSnapAll();\n    },\n    _unloadSnap: function _unloadSnap() {\n      if (!snapInteraction) {\n        return;\n      }\n\n      try {\n        this.snapEvents.forEach(function (d) {\n          Object.keys(d.settersAndKeys).forEach(function (event) {\n            d.source.un(event, d.settersAndKeys[event]);\n          });\n          ol.Observable.unByKey(d.olKey);\n        });\n        this.snapUnwatches.forEach(function (unwatch) {\n          return unwatch();\n        });\n\n        snapInteraction = null;\n\n        this.snapUnwatches = null;\n        this.snapToolboxes = null;\n        this.snapEvents = null;\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    addSnapFeatures: function addSnapFeatures(features) {\n      this.snapFeatures.extend(features);\n    },\n    setShowSnapAll: function setShowSnapAll() {\n      var tool = (this.state.toolsoftool || []).find(function (tool) {\n        return 'snap' === tool.type;\n      });\n      if (tool) {\n        this.snapAll = !!this.snapToolboxes.find(function (editing) {\n          return editing.on;\n        });\n        tool.options.checkedAll = tool.options.showSnapAll ? tool.options.checkedAll : false;\n      }\n    },\n    activeSnapInteraction: function activeSnapInteraction() {\n      var map = GUI.getService('map');\n      var tool = (this.state.toolsoftool || []).find(function (tool) {\n        return 'snap' === tool.type;\n      });\n\n      if (snapInteraction) {\n        map.removeInteraction(snapInteraction);\n      }\n\n      snapInteraction = null;\n\n      if ((tool.options.checked || tool.options.checkedAll) && tool.options.active) {\n        snapInteraction = new ol.interaction.Snap({\n          source: !tool.options.checkedAll && tool.options.checked && tool.options.source,\n          features: tool.options.checkedAll && this.snapFeatures });\n        map.addInteraction(snapInteraction);\n      }\n    }\n  },\n\n  watch: {\n    'state.activetool': function () {\n      var _ref = _asyncToGenerator(function* (tool) {\n        yield this.$nextTick();\n        this.helpmessage = tool && (tool.messages.help || tool.name);\n      });\n\n      function stateActivetool(_x) {\n        return _ref.apply(this, arguments);\n      }\n\n      return stateActivetool;\n    }(),\n    'state.editing.on': function stateEditingOn(bool) {\n      this.$emit('on-editing', bool);\n    },\n    'state.toolsoftool': function stateToolsoftool(newTools, oldTools) {\n      if (!newTools.length) {\n        oldTools.filter(function (t) {\n          return 'measure' === t.type;\n        }).forEach(function (t) {\n          return t.options.onChange(false);\n        });\n        this._unloadSnap();\n      } else {\n        this._initSnap();\n      }\n    }\n  },\n\n  created: function created() {\n    this.$emit('canEdit', { id: this.state.id });\n  },\n  mounted: function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      yield this.$nextTick();\n    });\n\n    function mounted() {\n      return _ref2.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  beforeDestroy: function beforeDestroy() {\n    this._unloadSnap();\n  }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state.show),expression:\"state.show\"}],staticClass:\"toolbox\",attrs:{\"id\":'id_toolbox_' + _vm.state.id}},[_c('div',{staticClass:\"panel\",class:{\n      'mobile':          _vm.isMobile(),\n      'toolboxselected': _vm.state.selected,\n      'toolboxactive':   _vm.state.editing.on,\n      'geolayer': _vm.state.layer.isGeoLayer(),\n    },on:{\"click\":function($event){$event.stopPropagation();return _vm.select($event)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLayerReady),expression:\"!isLayerReady\"}],staticClass:\"bar-loader\"}),_vm._v(\" \"),(_vm.state.toolboxheader)?_c('div',{staticClass:\"panel-heading container\",style:({ background: _vm.state.color})},[(_vm.father)?_c('i',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.tooltip.filter_by_relation'),expression:\"'plugins.editing.tooltip.filter_by_relation'\",arg:\"right\",modifiers:{\"create\":true}}],class:'filter-by-relation ' + _vm.g3wtemplate.font['relation'],on:{\"click\":_vm.toggleFilterByRelation}}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"panel-title\"},[_vm._v(_vm._s(_vm.state.title))]),_vm._v(\" \"),_c('i',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:(_vm.editDisabled),expression:\"editDisabled\"},{name:\"t-tooltip\",rawName:\"v-t-tooltip:left.create\",value:('plugins.editing.tooltip.edit_layer'),expression:\"'plugins.editing.tooltip.edit_layer'\",arg:\"left\",modifiers:{\"create\":true}}],staticClass:\"start-editing editbtn skin-tooltip-left\",class:( _obj = {\n          'pull-right':       !_vm.isMobile(),\n          'enabled':          _vm.isLayerReady,\n          'g3w-icon-toggled': _vm.state.editing.on\n        }, _obj[_vm.g3wtemplate.font[_vm.state.editing.on ? 'checkmark' : 'pencil']] = true, _obj ),on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleEditing($event)}}})]):_vm._e(),_vm._v(\" \"),_c('bar-loader',{attrs:{\"loading\":_vm.loading}}),_vm._v(\" \"),(!_vm.state.changingtools && _vm.state.editing.on)?_c('div',{directives:[{name:\"disabled\",rawName:\"v-disabled\",value:((!_vm.isLayerReady || !_vm.canEdit) ),expression:\"(!isLayerReady || !canEdit) \"}],staticClass:\"panel-body\"},[(!_vm.state.layer.isGeoLayer())?_c('div',{staticClass:\"info\"},[_c('i',{class:_vm.g3wtemplate.font['info']}),_vm._v(\" \"),_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.messages.toolbox_has_no_geometry'),expression:\"'editing.messages.toolbox_has_no_geometry'\"}]}),_vm._v(\" \"),_c('divider')],1):_vm._e(),_vm._v(\" \"),(_vm.hasRelations)?_c('div',{staticClass:\"info\"},[_c('i',{class:_vm.g3wtemplate.font['info']}),_vm._v(\" \"),_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.messages.toolbox_has_relation'),expression:\"'editing.messages.toolbox_has_relation'\"}]}),_vm._v(\" \"),_c('divider')],1):_vm._e(),_vm._v(\" \"),(_vm.state.message)?_c('div',{staticStyle:{\"color\":\"#000\"}},[_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(_vm.state.message),expression:\"state.message\"}],staticClass:\"text-justify\"}),_vm._v(\" \"),_c('divider')],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tools-content\"},_vm._l((_vm.state.tools),function(tool){\n        var _obj;\nreturn (tool.visible)?_c('div',{key:tool.id,class:( _obj = { 'enabled' : tool.enabled, 'toggled' : tool.active }, _obj[(\"editbtn \" + (tool.id))] = true, _obj ),on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();tool.enabled && _vm.toggleTool(tool.active ? undefined : tool.id)}}},[_c('img',{directives:[{name:\"t-title\",rawName:\"v-t-title:plugin\",value:((\"\" + (tool.name))),expression:\"`${tool.name}`\",arg:\"plugin\"}],attrs:{\"height\":\"25\",\"width\":\"25\",\"src\":_vm.resourcesurl + 'images/' + tool.icon}})]):_vm._e()}),0),_vm._v(\" \"),_c('div',{staticClass:\"message\",attrs:{\"id\":(\"id_toolbox_messages_\" + (_vm.state.id))}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showtoolsoftool)?_c('div',{attrs:{\"id\":\"toolsoftoolcontainer\"}},[_vm._l((_vm.state.toolsoftool),function(tool){return [('measure' === tool.type)?_c('div',{staticClass:\"snap-tool\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tool.options.checked),expression:\"tool.options.checked\"}],staticClass:\"magic-checkbox snap_tools_of_tools\",attrs:{\"id\":\"g3w_editing_show_measure_tool\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(tool.options.checked)?_vm._i(tool.options.checked,null)>-1:(tool.options.checked)},on:{\"change\":[function($event){var $$a=tool.options.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(tool.options, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(tool.options, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(tool.options, \"checked\", $$c)}},function () { return tool.options.onChange(tool.options.checked); }]}}),_vm._v(\" \"),_c('label',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.toolsoftool.measure'),expression:\"'plugins.editing.toolsoftool.measure'\",arg:\"right\",modifiers:{\"create\":true}}],attrs:{\"for\":\"g3w_editing_show_measure_tool\"}},[_c('b',{class:_vm.g3wtemplate.font['measure']})])]):('snap' === tool.type)?_c('div',{staticClass:\"tools-of-tool-snap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tool.options.checked),expression:\"tool.options.checked\"}],staticClass:\"magic-checkbox snap_tools_of_tools\",attrs:{\"type\":\"checkbox\",\"id\":(\"snap_\" + (_vm.state.id))},domProps:{\"checked\":Array.isArray(tool.options.checked)?_vm._i(tool.options.checked,null)>-1:(tool.options.checked)},on:{\"change\":function($event){var $$a=tool.options.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(tool.options, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(tool.options, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(tool.options, \"checked\", $$c)}}}}),_vm._v(\" \"),_c('label',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:right.create\",value:('plugins.editing.toolsoftool.snap'),expression:\"'plugins.editing.toolsoftool.snap'\",arg:\"right\",modifiers:{\"create\":true}}],attrs:{\"for\":(\"snap_\" + (_vm.state.id))}},[_c('span',{class:_vm.g3wtemplate.font['magnete']})]),_vm._v(\" \"),(_vm.snapAll)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tool.options.checkedAll),expression:\"tool.options.checkedAll\"}],staticClass:\"magic-checkbox snap_tools_of_tools\",attrs:{\"type\":\"checkbox\",\"id\":(\"snap_all_\" + (_vm.state.id))},domProps:{\"checked\":Array.isArray(tool.options.checkedAll)?_vm._i(tool.options.checkedAll,null)>-1:(tool.options.checkedAll)},on:{\"change\":function($event){var $$a=tool.options.checkedAll,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(tool.options, \"checkedAll\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(tool.options, \"checkedAll\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(tool.options, \"checkedAll\", $$c)}}}}):_vm._e(),_vm._v(\" \"),(_vm.snapAll)?_c('label',{directives:[{name:\"t-tooltip\",rawName:\"v-t-tooltip:left.create\",value:('plugins.editing.toolsoftool.snapall'),expression:\"'plugins.editing.toolsoftool.snapall'\",arg:\"left\",modifiers:{\"create\":true}}],attrs:{\"for\":(\"snap_all_\" + (_vm.state.id))}},[_c('span',{class:_vm.g3wtemplate.font['magnete']}),_vm._v(\" \"),_c('b',{class:_vm.g3wtemplate.font['layers']})]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('divider')]})],2):_vm._e()]),_vm._v(\" \"),(_vm.helpmessage)?_c('div',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(_vm.helpmessage),expression:\"helpmessage\"}],staticClass:\"toolbox_help_message\"}):_vm._e()],1)]):_vm._e()],1)])}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-8b2c66b2\"\n\n},{\"vueify/lib/insert-css\":1}],10:[function(require,module,exports){\nvar __vueify_style_dispose__ = require(\"vueify/lib/insert-css\").insert(\".steps-list[data-v-4a3d26b0]{align-self:flex-start;list-style:none;padding:10px;margin-bottom:0}li[data-v-4a3d26b0]{margin-bottom:5px}li.done[data-v-4a3d26b0]{font-weight:700;color:green}li.done>.description[data-v-4a3d26b0]{font-weight:700}.dynamic-step[data-v-4a3d26b0]{padding:10px;font-size:1.2em}.button-step[data-v-4a3d26b0]{display:inline-flex;align-items:center}.button-step[data-v-4a3d26b0],button.btn-success[data-v-4a3d26b0]{font-weight:700;align-self:normal}\")\n;(function(){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n\n  data: function data() {\n    return { steps: {} };\n  },\n\n  methods: {\n    completeStep: function completeStep(step) {\n      step.done = true;\n      step.buttonnext.done();\n    }\n  }\n\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"steps-list\"},_vm._l((_vm.steps),function(step,id){return _c('li',{key:id,class:{ 'done': step.done },style:({ display: step.buttonnext && 'inline-flex' })},[(step.buttonnext)?_c('span',{staticClass:\"button-step\"},[_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(step.description),expression:\"step.description\"}],staticClass:\"description\"}),_vm._v(\" \"),(step.dynamic)?_c('span',{staticClass:\"dynamic-step\"},[_vm._v(_vm._s(step.dynamic))]):_vm._e(),_vm._v(\" \"),_c('button',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:('editing.workflow.next'),expression:\"'editing.workflow.next'\"}],class:'btn btn-success' + (step.buttonnext.disabled ? ' g3w-disabled' : '' ),on:{\"click\":function($event){return _vm.completeStep(step)}}})]):[_c('i',{class:_vm.g3wtemplate.getFontClass(step.done ? 'success' : 'empty-circle')}),_vm._v(\" \"),_c('span',{directives:[{name:\"t-plugin\",rawName:\"v-t-plugin\",value:(step.description),expression:\"step.description\"}]})]],2)}),0)}\n__vue__options__.staticRenderFns = []\n__vue__options__._scopeId = \"data-v-4a3d26b0\"\n\n},{\"vueify/lib/insert-css\":1}],11:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Session = exports.ChangesManager = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.Flow = Flow;\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Class Flow of workflow step by step\n * \n * ORIGINAL SOURCE: g3w-client/src/core/workflow/flow.js@v3.9.1\n * ORIGINAL SOURCE: g3w-client/src/core/workflow/queque.js@v3.9.1\n */\nfunction Flow() {\n  console.warn('[G3W-CLIENT] g3wsdk.core.workflow.Flow is deprecated');\n\n  var Queque = function () {\n    function Queque() {\n      _classCallCheck(this, Queque);\n\n      this.tasks = [];\n    }\n\n    _createClass(Queque, [{\n      key: 'addTask',\n      value: function addTask(task) {\n        this.tasks.push(task);\n      }\n    }, {\n      key: 'run',\n      value: function run() {\n        var reverse = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        while (this.tasks.length) {\n          var task = reverse ? this.tasks.pop() : this.tasks.shift();task();\n        }\n      }\n    }, {\n      key: 'flush',\n      value: function flush() {\n        return this.tasks.splice(0);\n      }\n    }, {\n      key: 'getLength',\n      value: function getLength() {\n        return this.tasks.length;\n      }\n    }, {\n      key: 'clear',\n      value: function clear() {\n        this.run();this.tasks = [];\n      }\n    }]);\n\n    return Queque;\n  }();\n\n  var steps = [];\n  var inputs = void 0;\n  var counter = 0;\n  var context = null;\n  var d = void 0;\n  var _workflow = void 0;\n  this.queques = {\n    end: new Queque(),\n    micro: new Queque()\n  };\n  //start workflow\n  this.start = function (workflow) {\n    d = $.Deferred();\n    if (counter > 0) {\n      console.log(\"reset workflow before restarting\");\n    }\n    _workflow = workflow;\n    inputs = workflow.getInputs();\n    context = workflow.getContext();\n    steps = workflow.getSteps();\n    // check if there are steps\n    if (steps && steps.length) {\n      //run step (first)\n      this.runStep(steps[0], inputs, context);\n    }\n    // return a promise that will be reolved if all step go right\n    return d.promise();\n  };\n\n  //run step\n  this.runStep = function (step, inputs) {\n    var _this = this;\n\n    //run step that run task\n    _workflow.setMessages({\n      help: step.state.help\n    });\n    var runMicroTasks = this.queques.micro.getLength();\n    step.run(inputs, context, this.queques).then(function (outputs) {\n      runMicroTasks && _this.queques.micro.run();\n      _this.onDone(outputs);\n    }).fail(function (error) {\n      return _this.onError(error);\n    });\n  };\n\n  //check if all step are resolved\n  this.onDone = function (outputs) {\n    counter++;\n    if (counter === steps.length) {\n      counter = 0;\n      d.resolve(outputs);\n      return;\n    }\n    this.runStep(steps[counter], outputs);\n  };\n\n  // in case of error\n  this.onError = function (err) {\n    counter = 0;\n    this.clearQueques();\n    d.reject(err);\n  };\n\n  // stop flow\n  this.stop = function () {\n    var d = $.Deferred();\n    steps[counter].isRunning() ? steps[counter].stop() : null;\n    this.clearQueques();\n    if (counter > 0) {\n      // set counter to 0\n      counter = 0;\n      // reject flow\n      d.reject();\n    } else {\n      //reject to force rollback session\n      d.resolve();\n    }\n    return d.promise();\n  };\n\n  this.clearQueques = function () {\n    this.queques.micro.clear();\n    this.queques.end.clear();\n  };\n\n  g3wsdk.core.utils.base(this);\n}\n\ng3wsdk.core.utils.inherit(Flow, g3wsdk.core.G3WObject);\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/services/editing.js@v3.9.1\n */\nvar ChangesManager = exports.ChangesManager = {\n  /** known actions */\n  Actions: {\n    'add': {\n      fnc: 'addFeature',\n      opposite: 'delete'\n    },\n    'delete': {\n      fnc: 'removeFeature',\n      opposite: 'add'\n    },\n    'update': {\n      fnc: 'updateFeature',\n      opposite: 'update'\n    }\n  },\n  /* apply changes to features (undo/redo) */\n  execute: function execute(object, items, reverse) {\n    console.warn('[G3W-CLIENT] g3wsdk.core.workflow.ChangesManager is deprecated');\n    var fnc = void 0;\n    var feature = void 0;\n    items.forEach(function (item) {\n      feature = item.feature;\n      if (reverse) {\n        // change to opposite\n        feature[ChangesManager.Actions[feature.getState()].opposite]();\n      }\n      // get method from object\n      fnc = ChangesManager.Actions[feature.getState()].fnc;\n      object[fnc](feature);\n    });\n  }\n};\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n */\n\nvar Session = exports.Session = function (_g3wsdk$core$G3WObjec) {\n  _inherits(Session, _g3wsdk$core$G3WObjec);\n\n  function Session() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Session);\n\n    console.warn('[G3W-CLIENT] g3wsdk.core.workflow.Session is deprecated');\n\n    var _this2 = _possibleConstructorReturn(this, (Session.__proto__ || Object.getPrototypeOf(Session)).call(this, options));\n\n    _this2.setters = {\n\n      /**\n       * Start session\n       */\n      start: function start() {\n        var _this3 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return $.Deferred(function () {\n          var _ref = _asyncToGenerator(function* (d) {\n            try {\n              var features = yield (0, _promisify.promisify)(_this3._editor.start(options));\n              _this3.state.started = true;\n              d.resolve(features);\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n          });\n\n          return function (_x4) {\n            return _ref.apply(this, arguments);\n          };\n        }()).promise();\n      },\n\n\n      /**\n       * stop session\n       */\n      stop: function stop() {\n        var _this4 = this;\n\n        return $.Deferred(function () {\n          var _ref2 = _asyncToGenerator(function* (d) {\n            var canStop = _this4.state.started || _this4.state.getfeatures;\n            if (!canStop) {\n              return d.resolve();\n            }\n            try {\n              yield (0, _promisify.promisify)(_this4._editor.stop());\n              _this4.clear();\n              d.resolve();\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n          });\n\n          return function (_x5) {\n            return _ref2.apply(this, arguments);\n          };\n        }()).promise();\n      },\n\n\n      /**\n       * Get features from server (by editor)\n       */\n      getFeatures: function getFeatures() {\n        var _this5 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        return $.Deferred(function () {\n          var _ref3 = _asyncToGenerator(function* (d) {\n            if (_this5._allfeatures) {\n              return d.resolve([]);\n            }\n            _this5._allfeatures = !options.filter;\n            try {\n              var features = yield (0, _promisify.promisify)(_this5._editor.getFeatures(options));\n              _this5.state.getfeatures = true;\n              d.resolve(features);\n            } catch (e) {\n              console.warn(e);\n              d.reject(e);\n            }\n          });\n\n          return function (_x7) {\n            return _ref3.apply(this, arguments);\n          };\n        }()).promise();\n      },\n\n\n      /**\n       * Hook to get informed that are saved on server\n       * \n       * @param commitItems\n       */\n      saveChangesOnServer: function saveChangesOnServer(commitItems) {}\n    };\n\n    _this2.state = {\n      id: options.id,\n      started: false,\n      getfeatures: false,\n      /** maximum \"buffer history\" lenght for undo/redo */\n      maxSteps: 10,\n      /** current state of history (useful for undo /redo) */\n      current: null,\n      /** temporary change not save on history */\n      changes: []\n    };\n\n    /**\n     * Array of states of a layer in editing\n     * {\n     * _states: [\n     *     {\n     *       id: unique key\n     *       state: [state] // example: history contsins features state\n     *                      // array because a tool can apply changes to more than one features at time (split di una feature)\n     *     },\n     *     {\n     *       id: unique key\n     *       state: [state]\n     *     },\n     *   ]\n     *     ....\n     *\n     *  _current: unique key // usefult to undo redo\n     *\n     *\n     */\n    _this2._states = [];\n\n    /** reactive state of history */\n    _this2._constrains = {\n      commit: false,\n      undo: false,\n      redo: false\n    },\n\n    // editor\n    _this2._editor = options.editor;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this2._history = {\n      id: _this2.state.id,\n      state: new Proxy({}, { get: function get(_, prop) {\n          return _this2._constrains[prop];\n        } }),\n      add: _this2.__add.bind(_this2),\n      getRelationStates: _this2.__getRelationStates.bind(_this2),\n      insertState: _this2.__insertState.bind(_this2),\n      removeState: _this2.deleteState.bind(_this2),\n      removeStates: _this2.removeChangesFromHistory.bind(_this2),\n      insertStates: _this2.__insertStates.bind(_this2),\n      undo: _this2.__undo.bind(_this2),\n      clear: _this2.clearHistory.bind(_this2),\n      redo: _this2.__redo.bind(_this2),\n      setItemsFeatureIds: _this2.__setItemsFeatureIds.bind(_this2),\n      getState: _this2.__getState.bind(_this2),\n      getFirstState: _this2.__getFirstState.bind(_this2),\n      getLastState: _this2.getLastHistoryState.bind(_this2),\n      getCurrentState: _this2.__getCurrentState.bind(_this2),\n      getCurrentStateIndex: _this2.__getCurrentStateIndex.bind(_this2),\n      canCommit: _this2.__canCommit.bind(_this2),\n      canUndo: _this2.__canUndo.bind(_this2),\n      canRedo: _this2.__canRedo.bind(_this2),\n      commit: _this2.__commit.bind(_this2)\n    };\n\n    // register this session on session registry\n    _this2.register();\n    return _this2;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n   * \n   * check if was done an update (update are array contains two items, old and new value)\n   *\n   * @since g3w-client-plugin-editing@v3.8.0\n   */\n\n\n  _createClass(Session, [{\n    key: '_checkSessionItems',\n    value: function _checkSessionItems(historyId, items, action) {\n      /**\n       * action: <reffererd to array index>\n       *  0: undo;\n       *  1: redo;\n       **/\n      var newItems = {\n        own: [], //array of changes of layer of the current session\n        dependencies: {} // dependencies\n      };\n\n      items.forEach(function (item) {\n        if (Array.isArray(item)) {\n          item = item[action];\n        }\n        // check if belong to session\n        if (historyId === item.layerId) {\n          newItems.own.push(item);\n        } else {\n          newItems.dependencies[item.layerId] = newItems.dependencies[item.layerId] || {\n            own: [],\n            dependencies: {}\n          };\n          newItems.dependencies[item.layerId].own.push(item);\n        }\n      });\n\n      return newItems;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.state.id;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {*|null}\n     */\n\n  }, {\n    key: 'getLastHistoryState',\n    value: function getLastHistoryState() {\n      return this._states.length ? this._states[this._states.length - 1] : null;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getLastStateId',\n    value: function getLastStateId() {\n      return this.getLastHistoryState().id;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param stateId\n     */\n\n  }, {\n    key: 'deleteState',\n    value: function deleteState(stateId) {\n      var i = this._states.findIndex(function (s) {\n        return s.id === stateId;\n      });\n      console.assert(i >= 0, 'invalid stateId ' + stateId);\n      if (this.state.current === stateId) {\n        this.state.current = this._states.length > 1 ? this._states[i - 1].id : null;\n      }\n      this._states.splice(i, 1);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'register',\n    value: function register() {\n      Session.Registry.register(this);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'unregister',\n    value: function unregister() {\n      Session.Registry.unregister(this.getId());\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isStarted',\n    value: function isStarted() {\n      return this.state.started;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getEditor',\n    value: function getEditor() {\n      return this._editor;\n    }\n\n    /**\n     * @param editor\n     */\n\n  }, {\n    key: 'setEditor',\n    value: function setEditor(editor) {\n      this._editor = editor;\n    }\n\n    /**\n     * Save temporary changes to the layer in history instance and feature store\n     * \n     * @param options\n     */\n\n  }, {\n    key: 'save',\n    value: function save() {\n      var _this6 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      //fill history\n      var d = $.Deferred();\n      // add temporary modify to history\n      if (this.state.changes.length) {\n        var uniqueId = options.id || Date.now();\n        this._history.add(uniqueId, this.state.changes).then(function () {\n          // clear to temporary changes\n          _this6.state.changes = [];\n          // resolve if unique id\n          d.resolve(uniqueId);\n        });\n      } else {\n        d.resolve(null);\n      }\n      return d.promise();\n    }\n\n    /**\n     * @param feature\n     */\n\n  }, {\n    key: 'updateTemporaryChanges',\n    value: function updateTemporaryChanges(feature) {\n      this.state.changes.forEach(function (c) {\n        return c.feature.setProperties(feature.getProperties());\n      });\n    }\n\n    /**\n     * Add temporary feature\n     * \n     * @param layerId \n     * @param feature \n     * @param removeNotEditableProperties  \n     */\n\n  }, {\n    key: 'pushAdd',\n    value: function pushAdd(layerId, feature) {\n      var removeNotEditableProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      /**\n       * @TODO check if it need to deprecate it. All properties are need\n       * Please take care of this to understand\n       * In case of removeNotEditableProperties true, remove not editable field\n       * from feature properties\n       */\n      var editor = layerId === this.getId() ? this._editor : Session.Registry.getSession(layerId).getEditor();\n\n      // remove not editable proprierties from feature\n      if (removeNotEditableProperties) {\n        (editor.getLayer().getEditingNotEditableFields() || []).forEach(function (f) {\n          return feature.unset([f]);\n        });\n      }\n\n      var newFeature = feature.clone();\n\n      this.push({ layerId: layerId, feature: newFeature.add() });\n\n      return newFeature;\n    }\n\n    /**\n     * Delete temporary feature\n     * \n     * @param layerId \n     * @param feature \n     */\n\n  }, {\n    key: 'pushDelete',\n    value: function pushDelete(layerId, feature) {\n      this.push({ layerId: layerId, feature: feature.delete() });\n      return feature;\n    }\n\n    /**\n     * Add temporary feature changes\n     * \n     * @param layerId\n     * @param newFeature\n     * @param oldFeature\n     */\n\n  }, {\n    key: 'pushUpdate',\n    value: function pushUpdate(layerId, newFeature, oldFeature) {\n      // get index of temporary changes\n      var is_new = newFeature.isNew();\n      var i = is_new && this.state.changes.findIndex(function (c) {\n        return layerId === c.layerId && c.feature.getId() === newFeature.getId();\n      });\n\n      // in case of new feature\n      if (is_new && i >= 0) {\n        var feature = newFeature.clone();\n        feature.add();\n        this.state.changes[i].feature = feature;\n        return;\n      }\n\n      this.push({ layerId: layerId, feature: newFeature.update() }, { layerId: layerId, feature: oldFeature.update() });\n    }\n\n    /**\n     * @param stateIds\n     */\n\n  }, {\n    key: 'removeChangesFromHistory',\n    value: function removeChangesFromHistory() {\n      var _this7 = this;\n\n      var stateIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      (stateIds || []).forEach(function (s) {\n        return _this7.deleteState(s);\n      });\n    }\n\n    /**\n     * @returns { Object } state ids\n     */\n\n  }, {\n    key: 'moveRelationStatesOwnSession',\n    value: function moveRelationStatesOwnSession() {\n      var ids = {};\n\n      var _getCommitItems = this.getCommitItems(),\n          relations = _getCommitItems.relations;\n\n      for (var id in relations) {\n        var states = this._history.getRelationStates(id);\n        Session.Registry.getSession(id)._history.insertStates(states);\n        ids[id] = states.map(function (s) {\n          return s.id;\n        });\n      }\n      return ids;\n    }\n\n    /**\n     * Add temporary features that will be added with save method\n     * \n     * @param { { layerId: string, feature: * } } NewFeat \n     * @param { { layerId: string, feature: * } } OldFeat\n     */\n\n  }, {\n    key: 'push',\n    value: function push(newFeat, oldFeat) {\n      this.state.changes.push(oldFeat ? [oldFeat, newFeat] : newFeat); // check is set old (edit)\n    }\n\n    /**\n     * Revert (cancel) all changes in history and clean session\n     */\n\n  }, {\n    key: 'revert',\n    value: function revert() {\n      var _this8 = this;\n\n      var d = $.Deferred();\n      this._editor.revert().then(function () {\n        _this8.clearHistory();\n        d.resolve();\n      });\n      return d.promise();\n    }\n\n    /**\n     * @param changes\n     */\n\n  }, {\n    key: 'rollback',\n    value: function rollback(changes) {\n      // skip when..\n      if (changes) {\n        return this._editor.rollback(changes);\n      }\n\n      // Handle temporary changes of layer\n      var d = $.Deferred();\n      var id = this.getId();\n      changes = {\n        own: [],\n        dependencies: {}\n      };\n      this.state.changes.forEach(function (c) {\n        var change = Array.isArray(c) ? c[0] : c;\n        if (change.layerId === id) {\n          changes.own.push(change);\n        } else {\n          if (!changes.dependencies[change.layerId]) {\n            changes.dependencies[change.layerId] = [];\n          }\n          // FILO\n          changes.dependencies[change.layerId].unshift(change);\n        }\n      });\n\n      this._editor.rollback(changes.own).then(function () {\n        for (var _id in changes.dependencies) {\n          Session.Registry.getSession(_id).rollback(changes.dependencies[_id]);\n        }\n        d.resolve(changes.dependencies);\n      });\n\n      this.state.changes = [];\n\n      return d.promise();\n    }\n\n    /**\n     * Rollback child changes of current session\n     * \n     * @param ids [array of child layer id]\n     */\n\n  }, {\n    key: 'rollbackDependecies',\n    value: function rollbackDependecies() {\n      var _this9 = this;\n\n      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      ids.forEach(function (id) {\n        var changes = [];\n        _this9.state.changes = _this9.state.changes.filter(function (temporarychange) {\n          if (temporarychange.layerId === id) {\n            changes.push(temporarychange);\n            return false;\n          }\n        });\n        changes.length && Session.Registry.getSession(id).rollback(changes);\n      });\n    }\n\n    /**\n     * undo method\n     * \n     * @param items \n     */\n\n  }, {\n    key: 'undo',\n    value: function undo(items) {\n      items = items || this._history.undo();\n      this._editor.setChanges(items.own, true);\n      this._history.canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * redo method\n     * \n     * @param items \n     */\n\n  }, {\n    key: 'redo',\n    value: function redo(items) {\n      items = items || this._history.redo();\n      this._editor.setChanges(items.own, true);\n      this._history.canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * Serialize commit\n     * \n     * @returns {{ add: *[], update: *[], relations: {}, delete: *[] }} JSON Object for a commit body send to server\n     */\n\n  }, {\n    key: 'getCommitItems',\n    value: function getCommitItems() {\n      var _this10 = this;\n\n      var itemsToCommit = this._history.commit();\n      var id = this.getId();\n      var state = void 0;\n      var layer = void 0;\n      var commitObj = {\n        add: [], // features to add\n        update: [], // features to update\n        delete: [], // features to delete\n        relations: {} // relation features\n      };\n      // key is a layer id that has changes to apply\n      for (var key in itemsToCommit) {\n        var isRelation = false; //set relation to false\n        var items = itemsToCommit[key];\n        // case key (layer id) is not equal to id (current layer id on editing)\n        if (key !== id) {\n          isRelation = true; //set true because these changes belong to features relation items\n          var sessionRelation = Session.Registry.getSession(key);\n          //check lock ids of relation layer\n          var lockids = sessionRelation ? sessionRelation.getEditor().getLockIds() : [];\n          //create a relations object\n          commitObj.relations[key] = {\n            lockids: lockids,\n            add: [],\n            update: [],\n            delete: [],\n            relations: {} //@since v3.7.1\n          };\n          layer = commitObj.relations[key];\n        } else {\n          layer = commitObj;\n        }\n\n        items.forEach(function (item) {\n          //check state of feature item\n          state = item.getState();\n          var GeoJSONFormat = new ol.format.GeoJSON();\n          switch (state) {\n            //item needs to be deleted\n            case 'delete':\n              //check if is new. If is new mean is not present on server\n              //so no need to say to server to delete it\n              if (!item.isNew()) {\n                layer.delete.push(item.getId());\n              }\n              break;\n            default:\n              //convert feature to json ex. {geometry:{tye: 'Point'}, properties:{}.....}\n              var itemObj = GeoJSONFormat.writeFeatureObject(item);\n              //get properties\n              var childs_properties = item.getProperties();\n              for (var p in itemObj.properties) {\n                // in case the value of property is an object\n                if (itemObj.properties[p] && _typeof(itemObj.properties[p]) === 'object' && itemObj.properties[p].constructor === Object) {\n                  //need to get value from value attribute object\n                  itemObj.properties[p] = itemObj.properties[p].value;\n                }\n                // @TODO explain when this condition happen\n                if (undefined === itemObj.properties[p] && childs_properties[p]) {\n                  itemObj.properties[p] = childs_properties[p];\n                }\n              }\n              // in case of add it have to remove not editable properties\n              layer[item.isNew() ? 'add' : item.getState()].push(itemObj);\n              break;\n          }\n        });\n        // check in case of no edit remove relation key\n        if (isRelation && layer.add.length === 0 //no relation features to add\n        && layer.update.length === 0 //no relation features to update\n        && layer.delete.length === 0 //no relation features to delete\n        ) {\n            delete commitObj.relations[key];\n          }\n      }\n\n      // Remove deep relations from current layer (commitObj) that are not relative to that layer\n      var relations = Object.keys(commitObj.relations || {});\n      relations.filter(function (id) {\n        return undefined === _this10._editor.getLayer().getRelations().getArray().find(function (r) {\n          return id === r.getChild();\n        });\n      }) // child relations\n      .map(function (id) {\n        commitObj.relations[Session.Registry.getSession(id).getEditor().getLayer().getRelations().getArray().find(function (r) {\n          return -1 !== relations.indexOf(r.getFather());\n        }) // parent relation layer\n        .getFather()].relations[id] = commitObj.relations[id];\n        return id;\n      }).forEach(function (id) {\n        return delete commitObj.relations[id];\n      });\n\n      return commitObj;\n    }\n\n    /**\n     * Set geometry: {type} of geojson to a 3D type if needed\n     * \n     * @param layerId\n     * @param commitItems\n     */\n\n  }, {\n    key: 'set3DGeometryType',\n    value: function set3DGeometryType() {\n      var _this11 = this;\n\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$layerId = _ref4.layerId,\n          layerId = _ref4$layerId === undefined ? this.getId() : _ref4$layerId,\n          commitItems = _ref4.commitItems;\n\n      var relations = commitItems.relations;\n\n      var editingLayer = MapLayersStoresRegistry.getLayerById(layerId).getEditingLayer();\n      // check id there is editing layer and if is a vector layer\n      if (editingLayer && g3wsdk.core.layer.Layer.LayerTypes.VECTOR === editingLayer.getType()) {\n        // get Geometry type layer\n        var geometryType = editingLayer.getGeometryType();\n        // if is a 3D layer i set on geoJON before send it to server\n        if (g3wsdk.core.geoutils.Geometry.is3DGeometry(geometryType)) {\n          ['add', 'update'].forEach(function (action) {\n            return commitItems[action].forEach(function (feature) {\n              return feature.geometry.type = geometryType;\n            });\n          });\n        }\n      }\n      // the same control of relations layers\n      Object.keys(relations).forEach(function (layerId) {\n        return _this11.set3DGeometryType({\n          layerId: layerId,\n          commitItems: relations[layerId]\n        });\n      });\n    }\n\n    /**\n     * Commit changes on server (save)\n     * \n     * @param opts.ids\n     * @param opts.items\n     * @param opts.relations\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit() {\n      var _this12 = this;\n\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$ids = _ref5.ids,\n          ids = _ref5$ids === undefined ? null : _ref5$ids,\n          items = _ref5.items,\n          _ref5$relations = _ref5.relations,\n          relations = _ref5$relations === undefined ? true : _ref5$relations,\n          _ref5$__esPromise = _ref5.__esPromise,\n          __esPromise = _ref5$__esPromise === undefined ? false : _ref5$__esPromise;\n\n      var d = $.Deferred();\n\n      var commit = void 0; // committed items\n\n      // skip when ..\n      if (ids) {\n        commit = this._history.commit(ids);\n        this.clearHistory(ids);\n        return d.promise();\n      }\n\n      commit = items || this.getCommitItems(this._history.commit());\n\n      if (!relations) {\n        commit.relations = {};\n      }\n\n      this._editor.commit(commit).then(function (response) {\n\n        // skip when response is null or undefined and response.result is false\n        if (!(response && response.result)) {\n          d.reject(response);\n          return;\n        }\n\n        var _response$response$ne = response.response.new_relations,\n            new_relations = _response$response$ne === undefined ? {} : _response$response$ne; // check if new relations are saved on server\n\n        // sync server data with local data\n\n        for (var id in new_relations) {\n          Session.Registry.getSession(id) // get session of relation by id\n          .getEditor().applyCommitResponse({ // apply commit response to current editing relation layer\n            response: new_relations[id],\n            result: true\n          });\n        }\n\n        _this12.clearHistory();\n\n        _this12.saveChangesOnServer(commit); // dispatch setter event.\n\n        // ES6 promises only accept a single response\n        if (__esPromise) {\n          d.resolve({ commit: commit, response: response });\n        } else {\n          d.resolve(commit, response);\n        }\n      }).fail(function (err) {\n        return d.reject(err);\n      });\n\n      return d.promise();\n    }\n\n    /**\n     * Clear all things bind to session\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._allfeatures = false;\n      this.state.started = false;\n      this.state.getfeatures = false;\n      this.clearHistory();\n    }\n\n    /**\n     * @returns history\n     */\n\n  }, {\n    key: 'getHistory',\n    value: function getHistory() {\n      return this._history;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param ids since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'clearHistory',\n    value: function clearHistory(ids) {\n      var _this13 = this;\n\n      if (ids) {\n        this._states.forEach(function (state, idx) {\n          if (ids.indexOf(state.id) !== -1) {\n            if (_this13.state.current && _this13.state.current === state.id()) {\n              _this13._history.undo();\n            }\n            _this13._states.splice(idx, 1);\n          }\n        });\n      } else {\n        // clear all\n        this._states = [];\n        this.state.current = null;\n        this._constrains.commit = false;\n        this._constrains.redo = false;\n        this._constrains.undo = false;\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param uniqueId\n     * @param items\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__add',\n    value: function __add(uniqueId, items) {\n      var _this14 = this;\n\n      //state object is an array of feature/features changed in a transaction\n      var d = $.Deferred();\n      // before insert an item into the history\n      // check if are at last state step (no redo was done)\n      // If we are in the middle of undo, delete all changes\n      // in the history from the current \"state\" so if it\n      // can create a new history\n      if (null === this.state.current) {\n        this._states = [{ id: uniqueId, items: items }];\n      } else {\n        if (this._states.length > 0 && this.state.current < this.getLastStateId()) {\n          this._states = this._states.filter(function (s) {\n            return s.id <= _this14.state.current;\n          });\n        }\n        this._states.push({ id: uniqueId, items: items });\n      }\n\n      this.state.current = uniqueId;\n      // set internal state\n      this._history.canUndo();\n      this._history.canCommit();\n      this._history.canRedo();\n      // return unique id key\n      // it can be used in save relation\n      d.resolve(uniqueId);\n      return d.promise();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param layerId\n     * @param clear\n     * \n     * @returns { Array }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getRelationStates',\n    value: function __getRelationStates(layerId) {\n      var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref6$clear = _ref6.clear,\n          clear = _ref6$clear === undefined ? false : _ref6$clear;\n\n      var relationStates = [];\n      for (var i = 0; i < this._states.length; i++) {\n        var state = this._states[i];\n        var items = state.items.filter(function (item) {\n          return (Array.isArray(item) ? item[0].layerId : item.layerId) === layerId;\n        });\n        if (items.length > 0) {\n          relationStates.push({ id: state.id, items: items });\n        }\n      }\n      return relationStates;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param state\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__insertState',\n    value: function __insertState(state) {\n      var stateId = state.id;\n      var index = this._states.length;\n      for (var i = 0; i < this._states.length; i++) {\n        var _state = this._states[i];\n        if (_state.id > stateId) {\n          index = i;\n          break;\n        } else if (_state.id === stateId) {\n          index = -1;\n          break;\n        }\n      }\n      if (index > -1) {\n        if (this.state.current < stateId) {\n          this.state.current = stateId;\n        }\n        this._states.splice(index, 0, state);\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param states\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__insertStates',\n    value: function __insertStates() {\n      var states = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      for (var i = 0; i < states.length; i++) {\n        this._history.insertState(states[i]);\n      }\n      this._history.canCommit();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * undo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__undo',\n    value: function __undo() {\n      var _this15 = this;\n\n      var items = void 0;\n      if (this.state.current === this._history.getFirstState().id) {\n        this.state.current = null;\n        items = this._states[0].items;\n      } else {\n        this._states.find(function (state, idx) {\n          if (state.id === _this15.state.current) {\n            items = _this15._states[idx].items;\n            _this15.state.current = _this15._states[idx - 1].id;\n            return true;\n          }\n        });\n      }\n      items = this._checkSessionItems(this._history.id, items, 0);\n      // set internal state\n      this._history.canUndo();\n      this._history.canCommit();\n      this._history.canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * redo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__redo',\n    value: function __redo() {\n      var _this16 = this;\n\n      var items = void 0;\n      // if not set get first state\n      if (!this.state.current) {\n        items = this._states[0].items;\n        // set current to first\n        this.state.current = this._states[0].id;\n      } else {\n        this._states.find(function (state, idx) {\n          if (_this16.state.current === state.id) {\n            _this16.state.current = _this16._states[idx + 1].id;\n            items = _this16._states[idx + 1].items;\n            return true;\n          }\n        });\n      }\n      items = this._checkSessionItems(this._history.id, items, 1);\n      // set internal state\n      this._history.canUndo();\n      this._history.canCommit();\n      this._history.canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param { Array } unsetnewids\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__setItemsFeatureIds',\n    value: function __setItemsFeatureIds() {\n      var _this17 = this;\n\n      var unsetnewids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      unsetnewids.forEach(function (unsetnewid) {\n        _this17._states.forEach(function (state) {\n          state.items.forEach(function (item) {\n            var feature = item.feature.getId() === unsetnewid.clientid && item.feature;\n            if (feature) {\n              feature.setId(unsetnewid.id);\n            }\n          });\n        });\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param id\n     * \n     * @returns {T}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getState',\n    value: function __getState(id) {\n      return this._states.find(function (s) {\n        return s.id === id;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {*|null}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getFirstState',\n    value: function __getFirstState() {\n      return this._states.length ? this._states[0] : null;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {null}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getCurrentState',\n    value: function __getCurrentState() {\n      var _this18 = this;\n\n      var currentState = null;\n      if (this.state.current && this._states.length) {\n        currentState = this._states.find(function (state) {\n          return _this18.state.current === state.id;\n        });\n      }\n      return currentState;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @returns { number | null } index of current state\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getCurrentStateIndex',\n    value: function __getCurrentStateIndex() {\n      var _this19 = this;\n\n      var currentStateIndex = null;\n      if (this.state.current && this._states.length) {\n        this._states.forEach(function (state, idx) {\n          if (_this19.state.current === state.id) {\n            currentStateIndex = idx;\n            return false;\n          }\n        });\n      }\n      return currentStateIndex;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @returns { boolean } true if we can commit\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canCommit',\n    value: function __canCommit() {\n      var checkCommitItems = this._history.commit();\n      var canCommit = false;\n      for (var layerId in checkCommitItems) {\n        var commitItem = checkCommitItems[layerId];\n        canCommit = canCommit || commitItem.length > 0;\n      }\n      this._constrains.commit = canCommit;\n      return this._constrains.commit;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canUdo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canUndo',\n    value: function __canUndo() {\n      var steps = this._states.length - 1 - this._history.getCurrentStateIndex();\n      this._constrains.undo = null !== this.state.current && this.state.maxSteps > steps;\n      return this._constrains.undo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canRedo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canRedo',\n    value: function __canRedo() {\n      this._constrains.redo = this.getLastHistoryState() && this.getLastStateId() != this.state.current || null === this.state.current && this._states.length > 0;\n      return this._constrains.redo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * get all changes to send to server (mandare al server)\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__commit',\n    value: function __commit() {\n      var _this20 = this;\n\n      var commitItems = {};\n      var statesToCommit = this._states.filter(function (s) {\n        return s.id <= _this20.state.current;\n      });\n      statesToCommit.forEach(function (state) {\n        state.items.forEach(function (item) {\n          var add = true;\n          if (Array.isArray(item)) {\n            item = item[1];\n          }\n          if (commitItems[item.layerId]) {\n            commitItems[item.layerId].forEach(function (commitItem, index) {\n              // check if already inserted feature\n              if (commitItem.getUid() === item.feature.getUid()) {\n                if (item.feature.isNew() && !commitItem.isDeleted() && item.feature.isUpdated()) {\n                  var _item = item.feature.clone();\n                  _item.add();\n                  commitItems[item.layerId][index] = _item;\n                } else if (item.feature.isNew() && item.feature.isDeleted()) {\n                  commitItems[item.layerId].splice(index, 1);\n                } else if (item.feature.isUpdated() || item.feature.isDeleted()) {\n                  commitItems[item.layerId][index] = item.feature;\n                }\n                add = false;\n                return false;\n              }\n            });\n          }\n          if (add) {\n            var feature = item.feature;\n            var layerId = item.layerId;\n            if (!(!feature.isNew() && feature.isAdded())) {\n              if (!commitItems[layerId]) {\n                commitItems[layerId] = [];\n              }\n              commitItems[layerId].push(feature);\n            }\n          }\n        });\n      });\n      return commitItems;\n    }\n  }]);\n\n  return Session;\n}(g3wsdk.core.G3WObject);\n\n/** @type { Object<string, Session> } */\n\n\nvar sessions = {};\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/store/sessions.js@v3.9.1\n *\n * Store user session (login / logout)\n *\n * @since g3w-client-plugin-editing@v3.8.0\n */\nSession.Registry = {\n  _sessions: sessions,\n  register: function register(session) {\n    sessions[session.getId()] = session;\n  },\n  unregister: function unregister(id) {\n    delete sessions[id];\n  },\n  getSession: function getSession(id) {\n    return sessions[id];\n  },\n  setSession: function setSession(id, session) {\n    sessions[id] = session;\n  },\n  getSessions: function getSessions() {\n    return sessions;\n  },\n  clear: function clear() {\n    Object.keys(sessions).forEach(Session.Registry.unregister);\n  }\n};\n\n},{\"../../utils/promisify\":64}],12:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @file shared vue instance used to watch object changes or to emit events\n * \n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar VM = exports.VM = new Vue();\n\nexports.default = { VM: VM };\n\n},{}],13:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _toolbox = require('../../toolboxes/toolbox');\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ORIGINAL SOURCE: g3w-client/src/core/editing/editor.js@v3.9.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @since g3w-client-plugin-editing@v3.8.x\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    G3WObject = _g3wsdk$core.G3WObject;\nvar _g3wsdk$core$layer$fe = g3wsdk.core.layer.features,\n    FeaturesStore = _g3wsdk$core$layer$fe.FeaturesStore,\n    OlFeaturesStore = _g3wsdk$core$layer$fe.OlFeaturesStore;\nvar Layer = g3wsdk.core.layer.Layer;\n\n/**\n * Editor Class: bind editor to layer to do main actions\n *\n * @param config\n *\n * @constructor\n */\n\nvar Editor = function (_G3WObject) {\n  _inherits(Editor, _G3WObject);\n\n  function Editor() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Editor);\n\n    /**\n     * Setter hooks.\n     */\n    var _this = _possibleConstructorReturn(this, (Editor.__proto__ || Object.getPrototypeOf(Editor)).call(this));\n\n    _this.setters = {\n      save: function save() {\n        this._layer.save();\n      },\n      addFeature: function addFeature(feature) {\n        this._featuresstore.addFeature(feature);\n      },\n      updateFeature: function updateFeature(feature) {\n        this._featuresstore.updateFeature(feature);\n      },\n      deleteFeature: function deleteFeature(feature) {\n        this._featuresstore.deleteFeature(feature);\n      },\n      setFeatures: function setFeatures() {\n        var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        this._featuresstore.setFeatures(features);\n      },\n\n      /**\n       * Get features from server method.\n       * Used when vector Layer's bbox is contained into an already requested bbox (so no a new request is done).\n       *\n       * @param { number[] } options.filter.bbox bounding box Array [xmin, ymin, xmax, ymax]\n       *\n       * @returns { boolean } whether can perform a server request\n       */\n      getFeatures: function getFeatures() {\n        var _this2 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        // skip when ..\n        if (!ApplicationState.online || this._allfeatures) {\n          return $.Deferred(function (d) {\n            return d.resolve();\n          });\n        }\n\n        return (0, _promisify.$promisify)(function () {\n          var _ref = _asyncToGenerator(function* (d) {\n\n            var doRequest = true; // default --> perform request\n\n            var _ref2 = options.filter || {},\n                bbox = _ref2.bbox;\n\n            var is_vector = bbox && Layer.LayerTypes.VECTOR === _this2._layer.getType();\n\n            // first request --> need to perform request\n            if (is_vector && null === _this2._filter.bbox) {\n              _this2._filter.bbox = bbox; // store bbox\n              doRequest = true;\n            }\n\n            // subsequent requests --> check if bbox is contained into an already requested bbox\n            else if (is_vector) {\n                var is_cached = ol.extent.containsExtent(_this2._filter.bbox, bbox);\n                if (!is_cached) {\n                  _this2._filter.bbox = ol.extent.extend(_this2._filter.bbox, bbox);\n                }\n                doRequest = !is_cached;\n              }\n\n            /** @TODO simplfy nested promises */\n            if (doRequest) {\n              var features = yield (0, _promisify.promisify)(_this2._layer.getFeatures(options));\n              // add features from server\n              _this2._featuresstore.addFeatures((features || []).map(function (f) {\n                return f.clone();\n              }));\n              _this2._allfeatures = !options.filter;\n              return features;\n            }\n          });\n\n          return function (_x4) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }\n    };\n\n    /**\n     * Filter to getFeaturerequest\n     */\n    _this._filter = {\n      bbox: null\n    };\n\n    /**\n     * @FIXME add description\n     */\n    _this._allfeatures = false;\n\n    /**\n     * Referred layer\n     */\n    _this._layer = options.layer;\n\n    /**\n     * Store editing features\n     * \n     * @type { FeaturesStore | OlFeaturesStore }\n     */\n    _this._featuresstore = Layer.LayerTypes.TABLE === _this._layer.getType() ? new FeaturesStore() : new OlFeaturesStore();\n\n    /**\n     * Whether editor is active or not\n     *\n     * @type { boolean }\n     */\n    _this._started = false;\n\n    return _this;\n  }\n\n  /**\n   * Get editing source layer feature\n   * \n   * @returns { FeaturesStore | OlFeaturesStore }\n   */\n\n\n  _createClass(Editor, [{\n    key: 'getEditingSource',\n    value: function getEditingSource() {\n      return this._featuresstore;\n    }\n\n    /**\n     * get Source\n     */\n\n  }, {\n    key: 'getSource',\n    value: function getSource() {\n      this._layer.getSource();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/services/editing.js@v3.9.1\n     * \n     * Apply changes to source features (undo/redo)\n     * \n     * @param items\n     * @param { boolean } reverse whether change to opposite\n     */\n\n  }, {\n    key: 'setChanges',\n    value: function setChanges() {\n      var _this3 = this;\n\n      var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      /** known actions */\n      var Actions = {\n        'add': { fnc: 'addFeature', opposite: 'delete' },\n        'delete': { fnc: 'removeFeature', opposite: 'add' },\n        'update': { fnc: 'updateFeature', opposite: 'update' }\n      };\n      items.forEach(function (item) {\n        if (reverse) {\n          item.feature[Actions[item.feature.getState()].opposite]();\n        }\n        // get method from object\n        _this3._featuresstore[Actions[item.feature.getState()].fnc](item.feature);\n      });\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getLayer',\n    value: function getLayer() {\n      return this._layer;\n    }\n\n    /**\n     * @param layer\n     */\n\n  }, {\n    key: 'setLayer',\n    value: function setLayer(layer) {\n      return this._layer = layer;\n    }\n\n    /**\n     * revert (cancel) all changes in history and clean session\n     */\n\n  }, {\n    key: 'revert',\n    value: function revert() {\n      var _this4 = this;\n\n      return (0, _promisify.$promisify)(function () {\n        _this4._featuresstore.setFeatures((_this4._layer.readFeatures() || []).map(function (f) {\n          return f.clone();\n        }));\n      });\n    }\n\n    /**\n     * Rollback changes\n     * \n     * @param changes\n     * \n     * @returns {*}\n     */\n\n  }, {\n    key: 'rollback',\n    value: function rollback() {\n      var _this5 = this;\n\n      var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      return (0, _promisify.$promisify)(function () {\n        return _this5.setChanges(changes, true);\n      });\n    }\n\n    /**\n     * Apply response data from server in case of new inserted feature\n     *\n     * @param response.response.new            array of new ids\n     * @param response.response.new.clientid   temporary id created by client __new__\n     * @param response.response.new.id         the new id created and stored on server\n     * @param response.response.new.properties properties of the feature saved on server\n     * @param response.response.new_lockids    array of new lockIds\n     * \n     * @param relations\n     */\n\n  }, {\n    key: 'applyCommitResponse',\n    value: function applyCommitResponse() {\n      var _this6 = this;\n\n      var response = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var relations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\n      // skip when no response and response.result is false\n      if (!(response && response.result)) {\n        return;\n      }\n\n      response.response.new.forEach(function () {\n        var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            clientid = _ref3.clientid,\n            id = _ref3.id,\n            properties = _ref3.properties;\n\n        var feature = _this6._featuresstore.getFeatureById(clientid);\n\n        feature.setId(id); // set new id\n        feature.setProperties(properties);\n\n        relations.forEach(function (relation) {\n          // handle relations (if provided)\n          Object.entries(relation).forEach(function (_ref4) {\n            var _ref5 = _slicedToArray(_ref4, 2),\n                relationId = _ref5[0],\n                _ref5$ = _ref5[1],\n                options = _ref5$ === undefined ? {} : _ref5$;\n\n            var is_pk = options.fatherField.find(function (d) {\n              return _this6._layer.isPkField(d);\n            }); // check if parent field is a Primary Key\n            // handle value to relation field saved on server\n            if (is_pk) {\n              var field = options.childField[options.fatherField.indexOf(is_pk)]; // relation field to overwrite\n              var source = _toolbox.ToolBox.get(relationId).getSession().getEditor().getEditingSource(); // get source of editing layer.\n              (options.ids || []).forEach(function (id) {\n                // loop relation ids\n                var feature = source.getFeatureById(id);\n                if (feature) {\n                  feature.set(field.name, field.value); // set father feature `value` and `name`\n                }\n              });\n            }\n          });\n        });\n      });\n\n      var features = this.readEditingFeatures();\n\n      features.forEach(function (f) {\n        return f.clearState();\n      }); // reset state of the editing features (update, new etc..)\n\n      this._layer.setFeatures([].concat(_toConsumableArray(features))); // substitute layer features with actual editing features (\"cloned\" to prevent layer actions duplicates, eg. addFeatures)\n\n      this.addLockIds(response.response.new_lockids); // add lock ids\n    }\n\n    /**\n     * @param lockids locks be added to current layer\n     *\n     * @since 3.9.0\n     */\n\n  }, {\n    key: 'addLockIds',\n    value: function addLockIds(lockids) {\n      this._layer.getSource().addLockIds(lockids);\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getLockIds',\n    value: function getLockIds() {\n      return this._layer.getSource().getLockIds();\n    }\n\n    /**\n     * Run after server has applied changes to origin resource\n     *\n     * @param commit commit items\n     *\n     * @returns jQuery promise\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit(_commit) {\n      var _this7 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var relations = [];\n\n        // check if there are commit relations binded to new feature\n        if (_commit.add.length) {\n          relations = Object.keys(_commit.relations).map(function (relationId) {\n            var relation = _this7._layer.getRelations().getRelationByFatherChildren(_this7._layer.getId(), relationId);\n            return _defineProperty({}, relationId, {\n              ids: [].concat(_toConsumableArray(_commit.relations[relationId].add.map(function (r) {\n                return r.id;\n              })), _toConsumableArray(_commit.relations[relationId].update.map(function (r) {\n                return r.id;\n              }))),\n              fatherField: relation.getFatherField(), // father Fields <Array>\n              childField: relation.getChildField() // child Fields <Array>\n            });\n          });\n        }\n\n        /** @TODO simplfy nested promises */\n        var r = yield (0, _promisify.promisify)(_this7._layer.commit(_commit));\n        _this7.applyCommitResponse(r, relations);\n        return r;\n      }));\n    }\n\n    /**\n     * start editing\n     */\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      /** @TODO simplfy nested promises */\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var features = yield (0, _promisify.promisify)(_this8.getFeatures(options)); // load layer features based on filter type\n        _this8._started = true; // if all ok set to started\n        return features; // features are already inside featuresstore\n      }));\n    }\n\n    /**\n     * Read features (action to layer)\n     */\n\n  }, {\n    key: 'readFeatures',\n    value: function readFeatures() {\n      return this._layer.readFeatures();\n    }\n\n    /**\n     * @returns features stored in editor featurestore\n     */\n\n  }, {\n    key: 'readEditingFeatures',\n    value: function readEditingFeatures() {\n      return this._featuresstore.readFeatures();\n    }\n\n    /**\n     * stop editor\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this9 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var response = yield (0, _promisify.promisify)(_this9._layer.unlock());\n        _this9.clear();\n        return response;\n      }));\n    }\n\n    /**\n     * @returns { boolean } whether has started editor \n     */\n\n  }, {\n    key: 'isStarted',\n    value: function isStarted() {\n      return this._started;\n    }\n\n    /**\n     * Method to clear all filled variable\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._started = false;\n      this._filter.bbox = null;\n      this._allfeatures = false;\n\n      this._featuresstore.clear();\n      this._layer.getFeaturesStore().clear();\n\n      // vector layer\n      if (this._layer.getType() === Layer.LayerTypes.VECTOR) {\n        this._layer.resetEditingSource(this._featuresstore.getFeaturesCollection());\n      }\n    }\n  }]);\n\n  return Editor;\n}(G3WObject);\n\nexports.default = Editor;\n\n},{\"../../toolboxes/toolbox\":27,\"../../utils/promisify\":57}],14:[function(require,module,exports){\nvar _editor = require('./editing/editor');\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _step = require('./workflow/step');\n\nvar _deprecated = require('../deprecated');\n\nvar _workflow = require('./workflow/workflow');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Editing APIs will be removed from core after g3w-client@v.4.x\n */\nif (window.g3wsdk.core.editing || window.g3wsdk.core.workflow || window.g3wsdk.constant.DEFAULT_EDITING_CAPABILITIES || g3wsdk.version < '4') {\n  console.warn('Editing APIs will be removed from g3wsdk after v4.x');\n}\n\n/**\n * @FIXME add description\n */\nwindow.g3wsdk.core.editing = {\n  Session: _deprecated.Session,\n  SessionsRegistry: _deprecated.Session.Registry,\n  Editor: _editor2.default,\n  ChangesManager: _deprecated.ChangesManager\n};\n\n/**\n * Default editing capabilities\n *\n * @type {string[]}\n */\nwindow.g3wsdk.constant.DEFAULT_EDITING_CAPABILITIES = ['add_feature', 'change_feature', 'change_attr_feature', 'delete_feature'];\n\n/**\n * @FIXME add description\n */\nwindow.g3wsdk.core.workflow = {\n  Task: _step.Step,\n  Step: _step.Step,\n  Flow: _deprecated.Flow,\n  Workflow: _workflow.Workflow,\n  WorkflowsStack: _workflow.Workflow.Stack\n};\n\n},{\"../deprecated\":11,\"./editing/editor\":13,\"./workflow/step\":15,\"./workflow/workflow\":16}],15:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Step = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ORIGINAL SOURCE: g3w-client/src/core/workflow/step.js@v3.9.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @since g3w-client-plugin-editing@v3.8.x\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar G3WObject = g3wsdk.core.G3WObject;\nvar isPointGeometryType = g3wsdk.core.geoutils.Geometry.isPointGeometryType;\nvar Layer = g3wsdk.core.layer.Layer;\nvar GUI = g3wsdk.gui.GUI;\n\n/**\n * @param options.input\n * @param options.context\n * @param options.task\n * @param options.outputs\n * @param options.escKeyPressEventHandler\n * @param options.id\n * @param options.name\n * @param options.help\n * @param options.message\n */\n\nvar Step = exports.Step = function (_G3WObject) {\n  _inherits(Step, _G3WObject);\n\n  function Step() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Step);\n\n    var _this = _possibleConstructorReturn(this, (Step.__proto__ || Object.getPrototypeOf(Step)).call(this));\n\n    _this._options = options;\n\n    _this._run = (options.run || _this.run || _asyncToGenerator(function* () {\n      return true;\n    })).bind(_this);\n    _this._stop = (options.stop || _this.stop || _asyncToGenerator(function* () {\n      return true;\n    })).bind(_this);\n\n    /**\n     * @FIXME add description\n     */\n    _this._inputs = options.inputs || null;\n\n    /**\n     * @FIXME add description\n     */\n    _this._context = options.context || null;\n\n    /**\n     * @FIXME add description\n     */\n    _this._outputs = options.outputs || null;\n\n    /**\n     * Dynamic state of step\n     */\n    _this.state = {\n      id: options.id || null,\n      name: options.name || null,\n      help: options.help || null, // help to show what the user has to do\n      running: false, // running\n      error: null, // error\n      message: options.message || null, // message\n      /**\n       * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n       * \n       * @since g3w-client-plugin-editing@v3.8.0\n       */\n      usermessagesteps: {}\n    };\n\n    _this.registerEscKeyEvent(options.escKeyPressEventHandler);\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this.selectStyle = options.selectStyle;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.steps) {\n      _this.setSteps(options.steps);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetask.js@v3.7.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addfeaturestep.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.onRun) {\n      _this.on('run', options.onRun);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetask.js@v3.7.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addfeaturestep.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.onStop) {\n      _this.on('run', options.onStop);\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    if (options.tools) {\n      _this._tools = options.tools;\n    }\n\n    return _this;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n   * \n   * Set and get task usefult properties used to run\n   * \n   * @since g3w-client-plugin-editing@v3.8.0\n   */\n\n\n  _createClass(Step, [{\n    key: 'setInputs',\n    value: function setInputs(inputs) {\n      this._inputs = this.inputs = inputs;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getInputs',\n    value: function getInputs() {\n      return this._inputs;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param context\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setContext',\n    value: function setContext(context) {\n      return this._context = this.context = context;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getContext',\n    value: function getContext() {\n      return this.context;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * Revert task\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'revert',\n    value: function revert() {\n      console.log('Revert to implement ');\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'panic',\n    value: function panic() {\n      console.log('Panic to implement ..');\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param task\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setRoot',\n    value: function setRoot(task) {\n      this.state.root = task;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @returns { Object }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getUserMessageSteps',\n    value: function getUserMessageSteps() {\n      return this.state.usermessagesteps;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param steps\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setUserMessageSteps',\n    value: function setUserMessageSteps() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.state.usermessagesteps = steps;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * \n     * @param type\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setUserMessageStepDone',\n    value: function setUserMessageStepDone(type) {\n      if (type) {\n        this.state.usermessagesteps[type].done = true;\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addInteraction',\n    value: function addInteraction(interaction) {\n      var _this2 = this;\n\n      var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      GUI.getService('map').addInteraction(interaction);\n      Object.entries(events).forEach(function (e) {\n        return interaction.on(e[0], e[1]);\n      });\n      this.on('stop', function () {\n        return _this2.removeInteraction(interaction);\n      });\n      return interaction;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'removeInteraction',\n    value: function removeInteraction(interaction) {\n      setTimeout(function () {\n        return GUI.getService('map').removeInteraction(interaction);\n      }); // timeout needed to work around an Openlayers issue\n    }\n\n    /**\n     * @TODO code implementation\n     *\n     * Get editing type from editing config\n     *\n     * @returns { null }\n     */\n\n  }, {\n    key: 'getEditingType',\n    value: function getEditingType() {\n      return null;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'registerPointerMoveCursor',\n    value: function registerPointerMoveCursor() {\n      GUI.getService('map').getMap().on(\"pointermove\", this._pointerMoveCursor);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'unregisterPointerMoveCursor',\n    value: function unregisterPointerMoveCursor() {\n      GUI.getService('map').getMap().un(\"pointermove\", this._pointerMoveCursor);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @param evt\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_pointerMoveCursor',\n    value: function _pointerMoveCursor(evt) {\n      this.getTargetElement().style.cursor = this.forEachFeatureAtPixel(evt.pixel, function () {\n        return true;\n      }) ? 'pointer' : '';\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @param steps\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setSteps',\n    value: function setSteps() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._steps = steps;\n      this.setUserMessageSteps(steps);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @returns { Object }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getSteps',\n    value: function getSteps() {\n      return this._steps;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getMap',\n    value: function getMap() {\n      return GUI.getService('map').getMap();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     *\n     * Disable sidebar\n     *\n     * @param {Boolean} bool\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'disableSidebar',\n    value: function disableSidebar() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!this._isContentChild) {\n        GUI.disableSideBar(bool);\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     *\n     * @param event\n     * @param options\n     *\n     * @returns {*}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'fireEvent',\n    value: function fireEvent(event) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').fireEvent(event, options);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * Handle single task\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'saveSingle',\n    value: function saveSingle(input, context) {\n      context.session.save().then(function () {\n        return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').saveChange();\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * Cancel single task\n     *\n     * @param input\n     * @param context\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'cancelSingle',\n    value: function cancelSingle(input, context) {\n      context.session.rollback();\n    }\n\n    /**\n     * Bind interrupt event on keys escape pressed\n     * \n     * @param evt.key\n     * @param evt.data.callback\n     * @param evt.data.task\n     */\n\n  }, {\n    key: 'escKeyUpHandler',\n    value: function escKeyUpHandler(evt) {\n      if ('Escape' === evt.key) {\n        evt.data.callback({ task: evt.data.task });\n      }\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'unbindEscKeyUp',\n    value: function unbindEscKeyUp() {\n      $(document).unbind('keyup', this.escKeyUpHandler);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'bindEscKeyUp',\n    value: function bindEscKeyUp() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      $(document).on('keyup', { callback: callback, task: this }, this.escKeyUpHandler);\n    }\n\n    /**\n     * @listens run\n     * @listens stop\n     */\n\n  }, {\n    key: 'registerEscKeyEvent',\n    value: function registerEscKeyEvent(callback) {\n      var _this3 = this;\n\n      if (callback) {\n        this.on('run', function () {\n          return _this3.bindEscKeyUp(callback);\n        });\n        this.on('stop', function () {\n          return _this3.unbindEscKeyUp();\n        });\n      }\n    }\n\n    /**\n     * \n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     * \n     * Start task\n     * \n     * @param inputs\n     * @param context\n     * \n     * @returns jQuery promise\n     * \n     * @fires run\n     */\n\n  }, {\n    key: '__run',\n    value: function __run(inputs, context) {\n      var _this4 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        _this4.setInputs(inputs);\n        _this4.setContext(context);\n\n        var step = _this4;\n        var toolsOfTools = {\n\n          snap: {\n            type: 'snap',\n            options: {\n              checkedAll: false,\n              checked: false,\n              active: true,\n              run: function run(_ref4) {\n                var layer = _ref4.layer;\n\n                this.active = true;\n                this.layerId = layer.getId();\n                this.source = layer.getEditingLayer().getSource();\n              },\n              stop: function stop() {\n                this.active = false;\n              }\n            }\n          },\n\n          measure: {\n            type: 'measure',\n            options: {\n              checked: false,\n              run: function run() {\n                var _this5 = this;\n\n                setTimeout(function () {\n                  _this5.onChange(_this5.checked);\n                });\n              },\n              stop: function stop() {\n                step.removeMeasureInteraction();\n                this.onChange(false);\n              },\n              onChange: function onChange(bool) {\n                this.checked = bool;\n                step[bool ? 'addMeasureInteraction' : 'removeMeasureInteraction']();\n              }\n            }\n          }\n\n        };\n\n        if (_this4._tools && 0 === _this4._workflow._toolsoftool.length) {\n          var _workflow$_toolsoftoo;\n\n          (_workflow$_toolsoftoo = _this4._workflow._toolsoftool).push.apply(_workflow$_toolsoftoo, _toConsumableArray(_this4._tools.filter(function (tool) {\n            return 'measure' !== tool || Layer.LayerTypes.VECTOR === inputs.layer.getType() && !isPointGeometryType(inputs.layer.getGeometryType());\n          }).map(function (tool) {\n            return toolsOfTools[tool];\n          })));\n        }\n\n        if (_this4._tools) {\n          _this4._workflow._toolsoftool.forEach(function (t) {\n            return t.options.run({ layer: inputs.layer });\n          });\n          _this4._workflow.emit('settoolsoftool', _this4._workflow._toolsoftool);\n        }\n\n        _this4.emit('run', { inputs: inputs, context: context });\n\n        try {\n          _this4.state.running = true; // change state to running\n          return yield (0, _promisify.promisify)(_this4._run(inputs, context));\n        } catch (e) {\n          console.warn(e);\n          _this4.state.error = e;\n          return Promise.reject(e);\n        } finally {\n          _this4.__stop();\n        }\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/task.js@v3.9.1\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n     *\n     * Stop step\n     *\n     * @fires stop\n     */\n\n  }, {\n    key: '__stop',\n    value: function __stop() {\n      this._stop(this._inputs, this._context); // stop task\n      this.state.running = false; // remove running state\n      if (this._workflow) {\n        this._workflow._toolsoftool.forEach(function (t) {\n          return t.options.stop();\n        });\n      }\n      this.emit('stop');\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.state.id;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getName',\n    value: function getName() {\n      return this.state.name;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getHelp',\n    value: function getHelp() {\n      return this.state.help;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getError',\n    value: function getError() {\n      return this.state.error;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getMessage',\n    value: function getMessage() {\n      return this.state.message;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'isRunning',\n    value: function isRunning() {\n      return this.state.running;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getTask',\n    value: function getTask() {\n      return this;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'setOutputs',\n    value: function setOutputs(outputs) {\n      this._outputs = outputs;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getOutputs',\n    value: function getOutputs() {\n      return this._outputs;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @param step\n     * @param tools\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setToolsOfTools',\n    value: function setToolsOfTools(workflow) {\n      var tools = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      this._workflow = workflow;\n      this._tools = tools;\n    }\n  }]);\n\n  return Step;\n}(G3WObject);\n\n/**\n * @FIXME add description\n */\n\n\nStep.MESSAGES = {\n  help: null\n};\n\n},{\"../../utils/promisify\":57}],16:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Workflow = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _step = require('./step');\n\nvar _promisify = require('../../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * @file\n * \n * ORIGINAL SOURCE: g3w-client/src/core/workflow/workflow.js@v3.9.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n * \n * @since g3w-client-plugin-editing@v3.8.x\n */\n\nvar GUI = g3wsdk.gui.GUI;\nvar G3WObject = g3wsdk.core.G3WObject;\n\n/**\n * Workflow Class (manage flow of steps)\n *\n * @param options.inputs\n * @param options.context\n * @param options.flow\n * @param options.steps\n * @param options.runOnce\n * @param options.backbuttonlabel\n */\n\nvar Workflow = exports.Workflow = function (_G3WObject) {\n  _inherits(Workflow, _G3WObject);\n\n  function Workflow() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Workflow);\n\n    /** @since g3w-client-plugin-editing@v3.8.0*/\n    var _this = _possibleConstructorReturn(this, (Workflow.__proto__ || Object.getPrototypeOf(Workflow)).call(this));\n\n    _this._type = undefined !== options.type ? options.type : null;\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this._options = options;\n\n    /**\n     * @FIXME add description\n     */\n    _this._promise = null;\n\n    /**\n     * Mandatory inputs to work with editing\n     */\n    _this._inputs = undefined !== options.inputs ? options.inputs : null;\n\n    /**\n     * @FIXME add description\n     */\n    _this._context = undefined !== options.context ? options.context : null;\n\n    /**\n     * All steps of flow\n     */\n    _this._steps = options.steps || [];\n\n    /**\n     * Whether is child of another workflow\n     */\n    _this._child = null;\n\n    /**\n     * stack workflowindex\n     */\n    _this._stackIndex = null;\n\n    /**\n     * Stop when flow stop\n     */\n    _this.runOnce = options.runOnce || false;\n\n    /**\n     * @FIXME add description\n     */\n    _this._messages = _step.Step.MESSAGES;\n\n    /**\n     * Store user messages steps to show when workflow\n     * use a mandatory steps (ex. select: {description}, merge: {description}}\n     */\n    _this._userMessageSteps = {};\n\n    if (_this._steps.length > 0) {\n      _this.setUserMessagesSteps(_this._steps);\n    }\n\n    /**\n     * Holds back button label (in case of child workflow)\n     * \n     * @since 3.9.0\n     */\n    _this.backbuttonlabel = undefined !== options.backbuttonlabel ? options.backbuttonlabel : null;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    _this.helpMessage = options.helpMessage ? { help: options.helpMessage } : null;\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    _this._toolsoftool = [];\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    if (true === options.registerEscKeyEvent) {\n      _this.registerEscKeyEvent();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/workflow/flow.js@v3.9.1\n     * \n     * Current flow step\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n    _this._stepIndex = 0;\n\n    return _this;\n  }\n\n  /**\n   *\n   * @param steps\n   */\n\n\n  _createClass(Workflow, [{\n    key: 'setUserMessagesSteps',\n    value: function setUserMessagesSteps(steps) {\n      this._userMessageSteps = steps.reduce(function (messagesSteps, step) {\n        return _extends({}, messagesSteps, step.getUserMessageSteps() || {});\n      }, {});\n    }\n\n    /**\n     * Check if it is in same type\n     *\n     * @param {String | Array.<string[]>} type\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'isType',\n    value: function isType(type) {\n      var _this2 = this;\n\n      if (Array.isArray(type)) {\n        return Boolean(type.find(function (t) {\n          return t === _this2._type;\n        }));\n      }\n      return type === this._type;\n    }\n\n    /**\n     * @returns { * }\n     */\n\n  }, {\n    key: 'getContextService',\n    value: function getContextService() {\n      return this.getContext().service;\n    }\n\n    /**\n     * @param service\n     */\n\n  }, {\n    key: 'setContextService',\n    value: function setContextService(service) {\n      this.getContext().service = service;\n    }\n\n    /**\n     * @returns { null | * }\n     */\n\n  }, {\n    key: 'getStackIndex',\n    value: function getStackIndex() {\n      return this._stackIndex;\n    }\n\n    /**\n     * @param workflow\n     */\n\n  }, {\n    key: 'addChild',\n    value: function addChild(workflow) {\n      if (this._child) {\n        this._child.addChild(workflow);\n      } else {\n        this._child = workflow;\n      }\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'removeChild',\n    value: function removeChild() {\n      if (this._child) {\n        Workflow.Stack.removeAt(this._child.getStackIndex());\n      }\n      this._child = null;\n    }\n\n    /**\n     * @param input.key\n     * @param input.value\n     */\n\n  }, {\n    key: 'setInput',\n    value: function setInput(_ref) {\n      var key = _ref.key,\n          value = _ref.value;\n\n      this._inputs[key] = value;\n    }\n\n    /**\n     * @returns { null | * }\n     */\n\n  }, {\n    key: 'getInputs',\n    value: function getInputs() {\n      return this._inputs;\n    }\n\n    /**\n     * @param context\n     */\n\n  }, {\n    key: 'setContext',\n    value: function setContext(context) {\n      this._context = context;\n    }\n\n    /**\n     * @returns { * | {} | null }\n     */\n\n  }, {\n    key: 'getContext',\n    value: function getContext() {\n      return this._context;\n    }\n\n    /**\n     * @param step\n     */\n\n  }, {\n    key: 'addStep',\n    value: function addStep(step) {\n      this._steps.push(step);\n    }\n\n    /**\n     * @param steps\n     */\n\n  }, {\n    key: 'setSteps',\n    value: function setSteps() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      this._steps = steps;\n      this.setUserMessagesSteps(steps);\n    }\n\n    /**\n     * @returns { * | Array }\n     */\n\n  }, {\n    key: 'getSteps',\n    value: function getSteps() {\n      return this._steps;\n    }\n\n    /**\n     * @param index\n     * \n     * @returns { * }\n     */\n\n  }, {\n    key: 'getStep',\n    value: function getStep(index) {\n      return this._steps[index];\n    }\n\n    /**\n     * @param messages\n     */\n\n  }, {\n    key: 'setMessages',\n    value: function setMessages(messages) {\n      Object.assign(this._messages, messages);\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'getMessages',\n    value: function getMessages() {\n      return this._messages;\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'clearMessages',\n    value: function clearMessages() {\n      this._messages.help = null;\n      if (Object.keys(this._userMessageSteps).length) {\n        this.clearUserMessagesSteps();\n      }\n    }\n\n    /**\n     * @returns { * | null }\n     */\n\n  }, {\n    key: 'getLastStep',\n    value: function getLastStep() {\n      return this._steps.length ? this._steps[this._steps.length - 1] : null;\n    }\n\n    /**\n     * @returns { Step }\n     */\n\n  }, {\n    key: 'getRunningStep',\n    value: function getRunningStep() {\n      return this._steps.find(function (step) {\n        return step.isRunning();\n      });\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'reject',\n    value: function reject() {\n      if (this._promise) {\n        this._promise.reject();\n      }\n      this.emit('reject');\n    }\n\n    /**\n     * @FIXME add description\n     */\n\n  }, {\n    key: 'resolve',\n    value: function resolve() {\n      if (this._promise) {\n        this._promise.resolve();\n      }\n    }\n  }, {\n    key: 'runStep',\n    value: function () {\n      var _ref2 = _asyncToGenerator(function* (step, inputs) {\n        try {\n          this.setMessages({ help: step.state.help });\n          var outputs = yield (0, _promisify.promisify)(step.__run(inputs, this.getContext()));\n          // onDone ‚Üí check if all step is resolved\n          this._stepIndex++;\n          if (this._stepIndex === this.getSteps().length) {\n            this._stepIndex = 0;\n            return outputs;\n          } else {\n            return this.runStep(this.getSteps()[this._stepIndex], outputs);\n          }\n        } catch (e) {\n          this._stepIndex = 0;\n          return Promise.reject(e);\n        }\n      });\n\n      function runStep(_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return runStep;\n    }()\n\n    /**\n     * Start workflow\n     * \n     * @param options.inputs\n     * @param options.context\n     * @param options.flow\n     * @param options.steps\n     * \n     * @fires start\n     */\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this3 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return $.Deferred(function () {\n        var _ref3 = _asyncToGenerator(function* (d) {\n          _this3._promise = d;\n          _this3._inputs = options.inputs;\n          _this3._context = options.context || {};\n\n          var isChild = _this3._context.isChild || false;\n\n          // stop child when a workflow is running \n          if (!isChild && Workflow.Stack.getLength() && Workflow.Stack.getCurrent() !== _this3) {\n            Workflow.Stack.getCurrent().addChild(_this3);\n          }\n\n          _this3._stackIndex = Workflow.Stack.push(_this3);\n          _this3._steps = options.steps || _this3._steps;\n\n          (_this3._steps || []).forEach(function (s) {\n            return s._workflow = _this3;\n          });\n\n          var showUserMessage = Object.keys(_this3._userMessageSteps).length;\n\n          if (showUserMessage) {\n            GUI.showUserMessage({\n              title: 'plugins.editing.workflow.title.steps',\n              type: 'tool',\n              position: 'left',\n              size: 'small',\n              closable: false,\n              hooks: {\n                body: _extends({}, require('../../components/UserMessage.vue'), {\n                  data: function data() {\n                    return {\n                      steps: _this3._userMessageSteps\n                    };\n                  }\n                })\n              }\n            });\n          }\n          //emit start\n          _this3.emit('start');\n\n          try {\n            console.assert(0 === _this3._stepIndex, 'reset workflow before restarting: ' + _this3._stepIndex);\n            //start flow of workflow\n            var outputs = yield _this3.runStep(_this3.getSteps()[_this3._stepIndex], _this3.getInputs());\n            if (showUserMessage) {\n              setTimeout(function () {\n                _this3.clearUserMessagesSteps();d.resolve(outputs);\n              }, 500);\n            } else {\n              d.resolve(outputs);\n            }\n          } catch (e) {\n            console.warn(e);\n            if (showUserMessage) {\n              _this3.clearUserMessagesSteps();\n            }\n            d.reject(e);\n          }\n\n          if (_this3.runOnce) {\n            _this3.stop();\n          }\n        });\n\n        return function (_x6) {\n          return _ref3.apply(this, arguments);\n        };\n      }()).promise();\n    }\n\n    /**\n     * Stop workflow during flow\n     * \n     * @fires stop\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this4 = this;\n\n      return $.Deferred(function () {\n        var _ref4 = _asyncToGenerator(function* (d) {\n          _this4._promise = null;\n\n          try {\n            // stop child workflow\n            if (_this4._child) {\n              yield (0, _promisify.promisify)(_this4._child.stop());\n            }\n          } catch (e) {\n            console.warn(e);\n          }\n\n          // ensure that child is always removed\n          _this4.removeChild();\n\n          Workflow.Stack.removeAt(_this4.getStackIndex());\n\n          // stop flow\n          try {\n            if (_this4.getSteps()[_this4._stepIndex].isRunning()) {\n              //clear messages steps\n              _this4.clearMessages();\n              //stop a current step\n              _this4.getSteps()[_this4._stepIndex].__stop();\n            }\n            // reset counter and reject flow\n            if (_this4._stepIndex > 0) {\n              _this4._stepIndex = 0;\n              d.reject();\n              return Promise.reject();\n            } else {\n              d.resolve();\n            }\n          } catch (e) {\n            console.warn(e);\n            d.reject(e);\n          }\n\n          _this4.emit('stop');\n        });\n\n        return function (_x7) {\n          return _ref4.apply(this, arguments);\n        };\n      }()).promise();\n    }\n\n    /**\n     * Reset user message steps\n     */\n\n  }, {\n    key: 'clearUserMessagesSteps',\n    value: function clearUserMessagesSteps() {\n      var _this5 = this;\n\n      Object.keys(this._userMessageSteps).forEach(function (type) {\n        var step = _this5._userMessageSteps[type];\n        step.done = false;\n        if (step.buttonnext) {\n          step.buttonnext.disabled = true;\n        }\n      });\n      GUI.closeUserMessage();\n    }\n\n    /**\n     * @since 3.9.0\n     */\n\n  }, {\n    key: 'setBackButtonLabel',\n    value: function setBackButtonLabel() {\n      var label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      this.backbuttonlabel = label;\n    }\n\n    /**\n     * @returns { null }\n     * \n     * @since 3.9.0\n     */\n\n  }, {\n    key: 'getBackButtonLabel',\n    value: function getBackButtonLabel() {\n      return this.backbuttonlabel;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @param step\n     * @param tools\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addToolsOfTools',\n    value: function addToolsOfTools(_ref5) {\n      var step = _ref5.step,\n          _ref5$tools = _ref5.tools,\n          tools = _ref5$tools === undefined ? [] : _ref5$tools;\n\n      step.setToolsOfTools(this, tools);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setHelpMessage',\n    value: function setHelpMessage(message) {\n      this.helpMessage = { help: message };\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getHelpMessage',\n    value: function getHelpMessage() {\n      return this.helpMessage;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getFeatures',\n    value: function getFeatures() {\n      return this.getInputs().features;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'startFromLastStep',\n    value: function startFromLastStep(options) {\n      this.setSteps([this.getSteps().pop()]);\n      return this.start(options);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getCurrentFeature',\n    value: function getCurrentFeature() {\n      var feats = this.getFeatures();\n      return feats[feats.length - 1];\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.getInputs().layer;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getSession',\n    value: function getSession() {\n      return this.getContext().session;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * bind interupt event\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'escKeyUpHandler',\n    value: function escKeyUpHandler(evt) {\n      if (evt.keyCode === 27) {\n        evt.data.workflow.reject();\n        evt.data.callback();\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'unbindEscKeyUp',\n    value: function unbindEscKeyUp() {\n      $(document).unbind('keyup', this.escKeyUpHandler);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'bindEscKeyUp',\n    value: function bindEscKeyUp() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      $(document).on('keyup', { workflow: this, callback: callback }, this.escKeyUpHandler);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editingworkflow.js@v3.7.1\n     * \n     * @since g3w-client-editing@v3.8.0\n     */\n\n  }, {\n    key: 'registerEscKeyEvent',\n    value: function registerEscKeyEvent(callback) {\n      var _this6 = this;\n\n      this.on('start', function () {\n        return _this6.bindEscKeyUp(callback);\n      });\n      this.on('stop', function () {\n        return _this6.unbindEscKeyUp();\n      });\n    }\n  }]);\n\n  return Workflow;\n}(G3WObject);\n\n/** @type { Workflow[] } */\n\n\nvar workflows = [];\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/services/workflow.js@v3.9.1\n * \n * Store all activated workflows\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nWorkflow.Stack = {\n  _workflows: workflows,\n  push: function push(workflow) {\n    return workflows.includes(workflow) ? workflows.indexOf(workflow) : workflows.push(workflow) - 1;\n  },\n  getParent: function getParent() {\n    return workflows.slice(-2)[0];\n  },\n  getParents: function getParents() {\n    return workflows.slice(0, -1);\n  },\n  pop: function pop() {\n    return workflows.pop();\n  },\n  getLength: function getLength() {\n    return workflows.length;\n  },\n  getFirst: function getFirst() {\n    return workflows[0];\n  },\n  getCurrent: function getCurrent() {\n    return Workflow.Stack.getLast();\n  },\n  getLast: function getLast() {\n    return workflows.slice(-1)[0];\n  },\n  removeAt: function removeAt(i) {\n    workflows.splice(i, 1);\n  },\n  insertAt: function insertAt(i, w) {\n    workflows[i] = w;\n  },\n  getAt: function getAt(i) {\n    return workflows[i];\n  },\n  clear: function clear() {\n    while (workflows.length) {\n      workflows.pop().stop();\n    }\n  }\n};\n\n},{\"../../components/UserMessage.vue\":10,\"../../utils/promisify\":57,\"./step\":15}],17:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Es tritt ein Fehler auf. Es ist nicht m√∂glich, Layer zu bearbeiten\",\n    some_layers: \"Es tritt ein Fehler auf: Es ist nicht m√∂glich, einige Layer zu bearbeiten\"\n  },\n  search: \"Suche\",\n  editing_changes: \"√Ñnderungen bearbeiten\",\n  editing_data: \"Layer bearbeiten\",\n  editing_attributes: \"Attribute bearbeiten\",\n  relations: \"Relationen\",\n  edit_relation: \"Relation bearbeiten\",\n  back_to_relations: \"Zur√ºck zu Relationen\",\n  no_relations_found: \"Keine Relationen gefunden\",\n  relation_data: \"Relationsdaten\",\n  relation_already_added: \"Relation bereits hinzugef√ºgt\",\n  list_of_relations_feature: \"Liste der Relations-Features \",\n  tooltip: {\n    edit_layer: \"Layer bearbeiten\"\n  },\n  toolbox: {\n    title: 'bearbeiten'\n  },\n  table: {\n    edit: \"Feature bearbeiten\",\n    copy: \"Kopie erstellen\",\n    delete: \"Feature l√∂schen\"\n  },\n  tools: {\n    copy: \"Features kopieren\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Teil zu Multipart hinzuf√ºgen\",\n    deletepart: \"Teil aus Multipart l√∂schen\",\n    merge: \"Feature aufl√∂sen\",\n    split: \"Feature trennen\",\n    add_feature: \"Feature hinzuf√ºgen\",\n    delete_feature: \"Feature l√∂schen\",\n    move_feature: \"Feature verschieben\",\n    update_vertex: \"Feature vertex aktualisieren\",\n    update_feature: \"Feature-Attribut aktualisieren\",\n    update_multi_features: \"Attribute ausgew√§hlter Features aktualisieren\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Messung anzeigen\",\n    snap: \"Snap Layer\",\n    snapall: \"Snap auf alle Layer\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Features ausw√§hlen\",\n      select_element: \"Feature ausw√§hlen\",\n      copy: \"Neue Kopie der ausgew√§hlten Features erstellen\",\n      merge: \"Features aufl√∂sen\",\n      split: \"Feature trennen\",\n      new: \"Neues Feature erstellen\",\n      edit_table: \"Features der Tabelle bearbeiten\",\n      draw_new_feature: \"Feature auf Karte zeichnen\",\n      action_confirm: \"Aktion best√§tigen\",\n      double_click_delete: \"Zu l√∂schendes Feature auf der Karte ausw√§hlen\",\n      edit_feature_vertex: \"√Ñndern oder Hinzuf√ºgen eines Eckpunktes auf dem ausgew√§hlten Feature\",\n      move: \"Ausgew√§hltes Feature verschieben\",\n      select_feature_to_relation: \"Feature ausw√§hlen, welches die Relation verkn√ºpft\",\n      show_edit_feature_form: \"Feature-Formular zum Bearbeiten von Attributen anzeigen\",\n      pick_feature: \"Zu √§nderndes Feature auf der Karte ausw√§hlen\",\n      insert_attributes_feature: \"Attribute des Features einf√ºgen\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Zum Ausw√§hlen auf ein Feature klicken',\n      draw_part: \"Neues Teil zeichnen\",\n      draw_geometry: \"Geometrie zeichnen\",\n      merge: 'Feature zum Aufl√∂sen ausw√§hlen',\n      selectSHIFT: 'Features ausw√§hlen indem ein Rechteck mit SHIFT gezeichnet wird',\n      selectDrawBox: \"Features ausw√§hlen, indem man ein Rechteck mit zwei gegen√ºberliegenden Eckpunkten zeichnet\",\n      selectDrawBoxAtLeast2Feature: \"Mindestens Features ausw√§hlen, indem man ein Rechteck mit zwei gegen√ºberliegenden Eckpunkten zeichnet\",\n      selectPoint: \"Zum Ausw√§hlen auf ein Feature klicken\",\n      selectPointSHIFT: 'Features ausw√§hlen, indem ein Rechteck mit SHIFT gezeichnet wird (Multifeatures) oder auf ein Feature klicken',\n      selectMultiPointSHIFT: 'Features ausw√§hlen, indem man ein Rechteck zeichnet und SHIFT dr√ºckt oder auf ein Feature klickt',\n      selectMultiPointSHIFTAtLeast2Feature: 'Mindestens 2 Features ausw√§hlen und mit SHIFT ein Rechteck zeichnen oder auf ein Feature klicken',\n      copyCTRL: 'Kopieren ausgew√§hlter Features mit CTRL+C',\n      selectStartVertex: 'Start-Eckpunkt der ausgew√§hlten Features ausw√§hlen',\n      selectToPaste: 'Den Punkt ausw√§hlen, an dem die ausgew√§hlten Features eingef√ºgt werden sollen',\n      draw_split_line: \"Eine Linie zeichnen, um das ausgew√§hlte Feature zu teilen\"\n    },\n    title: {\n      steps: 'Schritte'\n    },\n    next: 'Weiter'\n  },\n  messages: {\n    featureslockbyotheruser: \"Einige Geometrien/Datens√§tze k√∂nnen nicht bearbeitet werden, da sie von anderen Benutzern bearbeitet werden\",\n    splitted: \"Getrennt\",\n    nosplittedfeature: \"Feature nicht getrennt\",\n    press_esc: \"Mit ESC zur√ºck\",\n    online: \"Wieder ONLINE. Jetzt kann man die √Ñnderungen in der Datenbank speichern\",\n    offline: \"OFFLINE. Alle √Ñnderungen werden lokal gespeichert\",\n    delete_feature: \"Soll das ausgew√§hlte Feature gel√∂scht werden?\",\n    delete_feature_relations: \"Wenn ein Feature Verkn√ºpfungen beinhaltet, werden diese Relationen verwaist. Wir schlagen vor, diese Relationen zu behandeln, bevor das Feature gel√∂scht wird\",\n    unlink_relation: \"Soll die Verkn√ºpfung aufgehoben werden?\",\n    commit_feature: \"Zusammenfassung der √Ñnderungen\",\n    toolbox_has_relation: \"Diese Ebene ist Teil einer Beziehung\",\n    saved: \"Daten erfolgreich gespeichert\",\n    saved_local: \"Daten erfolgreich lokal gespeichert\",\n    loading_data: \"Daten laden\",\n    saving: \"Daten werden gespeichert. Bitte warten ...\",\n    constraints: {\n      enable_editing: \"Bitte zoomen Sie hinein, um die Editier-Tools zu aktivieren \\nAktivierungsskala bei 1:\"\n    },\n    pdf: \"Dokumentenvorschau nicht verf√ºgbar. Bitte hier klicken \",\n    commit: {\n      header: \"Die folgende Liste zeigt alle zu √ºbernehmenden √Ñnderungen.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Hinzufgef√ºgt</b> Die Anzahl der hinzugef√ºgten Features anzeigen\",\n      header_update_delete: \"<b>Bearbeitet</b> und <b>Gel√∂scht</b> Die Liste der Feature-ID anzeigen\",\n      add: \"Hinzugef√ºgt\",\n      delete: \"Gel√∂scht\",\n      update: \"Bearbeitet\"\n    },\n    loading_table_data: \"Datentabelle wird erstellt. Bitte warten ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"Vor dem Speichern m√ºssen alle Pflichtfelder des eingegebenen features ausgef√ºllt werden\",\n    no_feature_selected: \"Keine feature ausgew√§hlt\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>W\\xE4hlen Sie Relationen aus, um sie mit dem aktuellen Feature zu verkn\\xFCpfen.</div>\"\n    },\n    draw_new_feature: \"Zeichnen Sie eine neue feature\",\n    draw_or_copy: \"oder\",\n    copy_feature_from_other_layer: \"Kopieren Sie feature aus einer anderen layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Zur√ºck zur Bearbeitung des Vaters\",\n        add_relation: \"Neue Relation erstellen und verkn√ºpfen\",\n        link_relation: \"Eine Relation zu diesem Feature herstellen\",\n        open_relation_tools: \"Relationstools anzeigen\",\n        unlink_relation: \"Relation trennen\"\n      }\n    },\n    buttons: {\n      save: \"Einf√ºgung/Bearbeiten\",\n      save_and_back: \"Speichern und zur√ºck\",\n      save_and_back_table: \"Speichern und zur√ºck\",\n      cancel: \"√Ñnderungen ignorieren\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select feature/s\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select one feature\"\n      }\n    }\n  }\n};\n\n},{}],18:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"An error occurs. It's no possible to edit layers\",\n    some_layers: \"An error occurs: It's no possible to edit some layers\",\n    editing_multiple_relations: 'Editing multiple relationships is not currently supported'\n  },\n  search: \"Search\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Editing Layers\",\n  editing_attributes: \"Editing attributes\",\n  relations: \"Relations\",\n  edit_relation: \"Edit relation\",\n  back_to_relations: \"Back to Relations\",\n  no_relations_found: \"No relations found\",\n  relation_data: \"Relation data\",\n  relation_already_added: \"Relation already added\",\n  list_of_relations_feature: \"List of relations feature \",\n  tooltip: {\n    edit_layer: \"Edit Layer\",\n    filter_by_relation: \"Filter layers by relation\"\n  },\n  toolbox: {\n    title: 'Edit'\n  },\n  table: {\n    edit: \"Edit feature\",\n    copy: \"Create a copy\",\n    delete: \"Delete feature\"\n  },\n  tools: {\n    copy: \"Copy features\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Add part to multipart\",\n    deletepart: \"Delete part from multipart\",\n    merge: \"Dissolve features\",\n    split: \"Split Feature\",\n    add_feature: \"Add feature\",\n    delete_feature: \"Delete feature\",\n    move_feature: \"Move feature\",\n    update_vertex: \"Update feature vertex\",\n    update_feature: \"Update feature attribute\",\n    update_multi_features: \"Update attributes of selected features\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Select features\",\n      select_element: \"Select feature\",\n      copy: \"Create new copy of selected features\",\n      merge: \"Dissolve features\",\n      split: \"Split Feature\",\n      new: \"Create new feature\",\n      edit_table: \"Edit table features\",\n      draw_new_feature: \"Draw feature on map\",\n      action_confirm: \"Confirm action\",\n      double_click_delete: \"Select feature on map to delete\",\n      edit_feature_vertex: \"Modify or add a vertex on selected feature\",\n      move: \"Move selected feature\",\n      select_feature_to_relation: \"Select feature that you bind relation\",\n      show_edit_feature_form: \"Show feature form to edit attributes\",\n      pick_feature: \"Select feature on map to modify\",\n      insert_attributes_feature: \"Insert attributes of the feature\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Click on feature to select',\n      draw_part: \"Draw new part\",\n      draw_geometry: \"Draw geometry\",\n      merge: 'Select featurewhere dissolve',\n      selectSHIFT: 'Select features drawing a rectangle pressing SHIFT',\n      selectDrawBox: \"Select features drawing a rectangle by two point of opposite corners\",\n      selectDrawBoxAtLeast2Feature: \"Select at least features drawing a rectangle by two point of opposite corners\",\n      selectPoint: \"Click on feature to select\",\n      selectPointSHIFT: 'Select features drawing a rectangle pressing SHIFT (multifeatures) or click on one feature',\n      selectMultiPointSHIFT: 'Select features drawing a rectangle pressing SHIFT or click on feature',\n      selectMultiPointSHIFTAtLeast2Feature: 'Select at least 2 features drawing a rectangle pressing SHIFT or click on feature',\n      copyCTRL: 'Copy selected features using CTRL+C',\n      selectStartVertex: 'Select starting vertex of selected features',\n      selectToPaste: 'Select the point where paste the features selected',\n      draw_split_line: \"Draw a line to split selected feature\"\n    },\n    title: {\n      steps: 'Steps'\n    },\n    next: 'Next'\n  },\n  messages: {\n    featureslockbyotheruser: \"Some geometries/records are not editable because in editing by other user\",\n    splitted: \"Splitted\",\n    nosplittedfeature: \"Feature not spitted\",\n    press_esc: \"Press ESC to back\",\n    online: \"Back ONLINE. Now you can save your changes on database\",\n    offline: \"You are OFFLINE. All changes are saved locally\",\n    delete_feature: \"Do you want delete selected feature ?\",\n    delete_feature_relations: \"If feature has bindings relations, these relations become orphans. We suggest to handle these relations before detele this feature\",\n    unlink_relation: \"Do you want unlink relation?\",\n    commit_feature: \"Summary of changes\",\n    toolbox_has_no_geometry: \"this layer has no geometry\",\n    toolbox_has_relation: \"this layer is part of a relation\",\n    saved: \"Data saved successfully\",\n    saved_local: \"Data saved locally successfully\",\n    loading_data: \"Loading data\",\n    saving: \"Saving data. Please wait ...\",\n    constraints: {\n      enable_editing: \"Please Zoom In to enable editing tools \\nActivation scale at 1:\"\n    },\n    pdf: \"Document preview not available. Please click here \",\n    commit: {\n      header: \"The following list show all changes to commit.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Added</b> show the number of features added\",\n      header_update_delete: \"<b>Modified</b> and <b>Deleted</b> show the list of features id\",\n      add: \"Added\",\n      delete: \"Deleted\",\n      update: \"Updated\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Select relations to link it to current editing feature.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Create and link new relation\",\n        link_relation: \"Join a relation to this feature\",\n        open_relation_tools: \"Show relation tools\",\n        unlink_relation: \"Unlink relation\"\n      }\n    },\n    buttons: {\n      save: \"Insert/Edit\",\n      save_and_back: \"Save and Back\",\n      save_and_back_table: \"Save and Back\",\n      cancel: \"Ignore Changes\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select feature/s\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],19:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Tapahtui virhe. Tasoja ei ole mahdollista muokata.\",\n    some_layers: \"Tapahtui virhe. Jotkin tasot eiv√§t ole muokattavissa.\"\n  },\n  search: \"Haku\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Muokataan tasoja\",\n  editing_attributes: \"Muokataan attribuutteja\",\n  relations: \"Relaatiot\",\n  edit_relation: \"Muokkaa relaatiota\",\n  back_to_relations: \"Takaisin relaatioihin\",\n  no_relations_found: \"Relaatioita ei l√∂ytynyt\",\n  relation_data: \"Relaation tiedot\",\n  relation_already_added: \"Relaatio on jo lis√§tty\",\n  list_of_relations_feature: \"Lista relaation ominaisuuksista\",\n  tooltip: {\n    edit_layer: \"Muokkaa tasoa\"\n  },\n  toolbox: {\n    title: 'Muokkaa'\n  },\n  table: {\n    edit: \"Muokkaa ominaisuutta\",\n    copy: \"Luo kopio\",\n    delete: \"Poista ominaisuus\"\n  },\n  tools: {\n    copy: \"Kopio ominaisuuksia\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Lis√§√§ osa\",\n    deletepart: \"Poista osa\",\n    merge: \"Yhdist√§ ominaisuudet\",\n    split: \"Leikkaa ominaisuus\",\n    add_feature: \"Lis√§√§ ominaisuus\",\n    delete_feature: \"Poista ominaisuus\",\n    move_feature: \"Siirr√§ ominaisuutta\",\n    update_vertex: \"P√§ivit√§ pisteen ominaisuutta\",\n    update_feature: \"P√§ivit√§ ominaisuus\",\n    update_multi_features: \"Muokkaa valittujen ominaisuuksien attribuutteja\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Valitse ominaisuudet\",\n      select_element: \"Valitse ominaisuus\",\n      copy: \"Luo kopio valituista ominaisuuksista\",\n      merge: \"Yhdist√§ ominaisuudet\",\n      split: \"Leikkaa ominaisuus\",\n      new: \"Luo uusi ominaisuus\",\n      edit_table: \"Muuta taulun ominaisuuksia\",\n      draw_new_feature: \"Piirr√§ ominaisuus kartalle\",\n      action_confirm: \"Hyv√§ksy toiminto\",\n      double_click_delete: \"Valitse poistettava ominaisuus kartalta\",\n      edit_feature_vertex: \"Muuta pistett√§ tai lis√§√§ piste valittuun ominaisuuteen\",\n      move: \"Siirr√§ valittu ominaisuus\",\n      select_feature_to_relation: \"Valitse relaatio\",\n      show_edit_feature_form: \"N√§yt√§ ominaisuuslomake muokataksesi attribuutteja\",\n      pick_feature: \"Valitse muokattava ominaisuus kartalta\",\n      insert_attributes_feature: \"Lis√§√§ ominaisuuden attribuutit\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Valitse ominaisuus',\n      draw_part: \"Piirr√§ uusi osa\",\n      merge: 'Valitse ominaisuus yhdist√§√§ksesi',\n      draw_geometry: \"Piirr√§ geometria\",\n      selectSHIFT: 'Paina SHIFT, jos haluat valita kohteita suorakulmiovalinnalla.', //Tero 10.12.2020\n      selectDrawBox: \"Piirr√§ suorakulmio, jonka si√§lt√§ kohteet valitaan \", //Tero 10.12.2020\n      selectDrawBoxAtLeast2Feature: \"Piirr√§ suorakulmio, jonka si√§lt√§ kohteet v√§hint√§√§n 2 valitaan \",\n      selectPoint: \"Valitse ominaisuus\",\n      selectPointSHIFT: 'Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksitt√§inen ominaisuus.',\n      selectMultiPointSHIFT: 'Paina SHIFT, jos haluat valita ominaisuuksia suorakulmiovalinnalla, tai valitse yksitt√§inen ominaisuus.',\n      selectMultiPointSHIFTAtLeast2Feature: 'Paina SHIFT, jos haluat valita v√§hint√§√§n 2 ominaisuuksia suorakulmiovalinnalla, tai valitse yksitt√§inen ominaisuus.',\n      copyCTRL: 'CTRL+C, voit kopioida valitut ominaisuudet.', //Tero 10.12.2020\n      selectStartVertex: 'Osoita valittujen ominaisuuksien alkupiste.',\n      selectToPaste: 'Valitse kohta, johon liit√§t valitut ominaisuudet.',\n      draw_split_line: \"Piirr√§ viiva, jonka mukaan valittu ominaisuus jaetaan.\"\n    },\n    title: {\n      steps: 'Vaiheet'\n    },\n    next: \"Seuraava\"\n  },\n  messages: {\n    featureslockbyotheruser: \"Some features are locked by another user\",\n    splitted: \"Jaettu\",\n    nosplittedfeature: \"Ominaisuutta ei jaettu\",\n    press_esc: \"Paina ESC palataksesi\",\n    online: \"Yhteys muodostettu. Muutokset voidaan tallentaa tietokantaan.\",\n    offline: \"Olet offline-tilassa. Muutokset tallennetaan paikallisesti\",\n    delete_feature: \"Haluatko poistaa valitun ominaisuuden?\",\n    delete_feature_relations: \"Mik√§li ominaisuudella on sitovia relaatioita, n√§ist√§ relaatiosta tulee orpoja. Suosittelemme k√§sittelem√§√§n n√§m√§ relaatiot ennen poistamista\",\n    unlink_relation: \"Haluatko poistaa relaation?\",\n    commit_feature: \"Yhteenveto muutoksista\",\n    toolbox_has_relation: \"t√§m√§ kerros on osa relaatiota\",\n    saved: \"Tiedot tallennettu onnistuneesti\",\n    saved_local: \"Tiedot on tallennettu onnistuneesti paikallisesti.\",\n    loading_data: \"Ladataan tietoja\",\n    saving: \"Tallentaan tietoja. Odota...\",\n    constraints: {\n      enable_editing: \"L√§henn√§ ottaaksesi muokkausty√∂kalut k√§ytt√∂√∂n \\nAktivointi mittakaava 1:\"\n    },\n    pdf: \"Dokumentin esikatselu ei ole saatavilla. Paina t√§st√§ \",\n    commit: {\n      header: \"Seuraava luettelo n√§ytt√§√§ kaikki muutokset.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Lis√§tty</b> n√§yt√§ lis√§ttyjen ominaisuuksien lukum√§√§r√§\",\n      header_update_delete: \"<b>Muokattu</b> ja <b>Poistettu</b> N√§yt√§ list√§ ominaisuuksien id:st√§\",\n      add: \"Lis√§tty\",\n      delete: \"Poistettu\",\n      update: \"Muokattu\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Valitse relaatiota linkitt\\xE4\\xE4ksesi ne muokattavaan ominaisuuteen.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Luo ja linkit√§ uusi relaatio\",\n        link_relation: \"Liit√§ relaatio t√§h√§n ominaisuuteen\",\n        open_relation_tools: \"N√§yt√§ relaatioty√∂kalut\",\n        unlink_relation: \"Poista relaatio\"\n      }\n    },\n    buttons: {\n      save: \"Lis√§√§/muokkaa\",\n      save_and_back: \"Tallenna ja palaa\",\n      save_and_back_table: \"Tallenna ja palaa\",\n      cancel: \"Peruuta\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select feature/s\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],20:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Une erreur s'est produite lors du chargement des layers dans l'√©dition.\",\n    some_layers: \"Une erreur s'est produite lors du chargement de certaines layers dans l'√©dition.\"\n  },\n  search: \"Recherche\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Modifier les donnes\",\n  editing_attributes: \"Modifier les attributs\",\n  relations: \"Relations\",\n  edit_relation: \"Modifier la relation\",\n  back_to_relations: \"Retour aux relations\",\n  no_relations_found: \"Il n'y a pas de relations\",\n  relation_data: \"Donn√©es sur les relations\",\n  relation_already_added: \"Relation d√©j√† pr√©sente\",\n  list_of_relations_feature: \"Lister les relations de la fonctionnalit√©\",\n  tooltip: {\n    edit_layer: \"Modifier le layer\"\n  },\n  toolbox: {\n    title: 'Modifier'\n  },\n  table: {\n    edit: \"Modifier fonctionnalit√©s\",\n    copy: \"Cr√©er une copie\",\n    delete: \"Supprimer la fonctionnalit√©\"\n  },\n  tools: {\n    copy: \"Copier les fonctionnalit√©s\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"Ajouter une pi√®ce √† la g√©om√©trie\",\n    deletepart: \"Supprimer la partie de la g√©om√©trie\",\n    merge: \"Dissoudre les fonctionnalit√©s\",\n    split: \"Couper la fonctionnalit√©\",\n    add_feature: \"Ajouter une fonctionnalit√©\",\n    delete_feature: \"Supprimer la fonctionnalit√©\",\n    move_feature: \"D√©placez la fonctionnalit√©\",\n    update_vertex: \"Mettre √† jour les sommets des fonctionnalit√©s\",\n    update_feature: \"Modifier les attributs des fonctionnalit√©s\",\n    update_multi_features: \"Modifier les attributs des fonctionnalit√©s s√©lectionn√©es\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"S√©lectionner les fonctionnalit√©s\",\n      select_element: \"S√©lectionner une fonctionnalit√©\",\n      copy: \"Cr√©er une copie des fonctionnalit√©s s√©lectionn√©es\",\n      merge: \"Dissoudre les fonctionnalit√©s\",\n      split: \"Couper la fonctionnalit√©\",\n      new: \"Cr√©er une nouvelle fonctionnalit√©\",\n      edit_table: \"Modifier les fonctionnalit√©s de la table\",\n      draw_new_feature: \"Dessiner une fonctionnalit√© sur la carte\",\n      action_confirm: \"Confirmer l'action\",\n      double_click_delete: \"S√©lectionner la fonctionnalit√© sur la carte √† supprimer\",\n      edit_feature_vertex: \"Modifier ou ajouter un sommet √† la fonctionnalit√© s√©lectionn√©e\",\n      move: \"D√©placer la fonctionnalit√© s√©lectionn√©e\",\n      select_feature_to_relation: \"S√©lectionner la fonctionnalit√© que vous souhaitez mettre en relation\",\n      show_edit_feature_form: \"Afficher le formulaire de la fonctionnalit√© permettant de modifier les attributs\",\n      pick_feature: \"S√©lectionner l'√©l√©ment de la carte √† modifier\",\n      insert_attributes_feature: \"Ins√©rer les attributs de la fonctionnalit√©\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Cliquer sur la fonctionnalit√© √† s√©lectionner',\n      draw_part: \"Dessiner la nouvelle partie\",\n      draw_geometry: \"Dessiner la g√©om√©trie\",\n      merge: 'S√©lectionner la fonction √† introduire en fondu',\n      selectPoint: \"Cliquer sur la fonctionnalit√© pour la s√©lectionner\",\n      selectSHIFT: 'S√©lectionner des fonctionnalit√©s en maintenant la touche SHIFT enfonc√©e',\n      selectDrawBox: \"S√©lectionner les fonctionnalit√©s en dessinant un rectangle par la cr√©ation des deux points de la diagonale\",\n      selectDrawBoxAtLeast2Feature: \"S√©lectionner au moins 2 fonctionnalit√©s en dessinant un rectangle par la cr√©ation des deux points de la diagonale\",\n      selectPointSHIFT: 'S√©lectionner des caract√©ristiques en maintenant la touche SHIFT enfonc√©e (multi-s√©lection) ou en cliquant sur une seule caract√©ristique',\n      selectMultiPointSHIFT: 'S√©lectionner des fonctionnalit√©s en maintenant la touche SHIFT appuy√©e ou en cliquant sur la fonctionnalit√© individuelle',\n      selectMultiPointSHIFTAtLeast2Feature: 'S√©lectionner au moins 2 fonctionnalit√©s en maintenant la touche SHIFT appuy√©e ou en cliquant sur la fonctionnalit√© individuelle',\n      copyCTRL: 'Copier les fonctionnalit√©s s√©lectionn√©es avec CTRL+C',\n      selectStartVertex: 'S√©lectionner le sommet de d√©part des fonctionnalit√©s choisies',\n      selectToPaste: 'S√©lectionner le point o√π les fonctionnalit√©s s√©lectionn√©es seront coll√©es',\n      draw_split_line: \"Tracez une ligne pour couper la fonctionnalit√© s√©lectionn√©e\"\n    },\n    title: {\n      steps: '√âtapes'\n    },\n    next: 'Suivant'\n  },\n  messages: {\n    featureslockbyotheruser: \"Certaines g√©om√©tries/enregistrements ne sont pas modifiables car ils ont √©t√© modifi√©s par un autre utilisateur\",\n    splitted: \"Fonctionnalit√©(s) divis√©(es)\",\n    nosplittedfeature: \"La (les) fonctionnalit√©(s) n‚Äôa (n'ont) pas √©t√© divis√©(es)\",\n    press_esc: \"Appuyez sur ESC pour revenir\",\n    online: \"Vous √™tes √† nouveau EN LIGNE. Vous pouvez enregistrer les modifications de fa√ßon permanente\",\n    offline: \"Vous √™tes HORS LIGNE. Toutes les modifications seront enregistr√©es temporairement en local\",\n    delete_feature: \"Voulez-vous supprimer la fonctionnalit√© s√©lectionn√©e ?\",\n    delete_feature_relations: \"La suppression d'une fonctionnalit√© avec des relations associ√©es laissera ces relations orphelines. Il est recommand√© de g√©rer ces relations avant de supprimer la fonctionnalit√©\",\n    unlink_relation: \"Voulez-vous d√©tacher la relation ?\",\n    commit_feature: \"Sommaire des changements\",\n    toolbox_has_relation: \"cette couche fait partie d'une relation\",\n    saved: \"Les donn√©es ont √©t√© enregistr√©es correctement\",\n    saved_local: \"Les donn√©es ont √©t√© correctement sauvegard√©es localement\",\n    loading_data: \"Chargement des donn√©es\",\n    saving: \"Sauvegarde des donn√©es. Veuillez patienter ...\",\n    constraints: {\n      enable_editing: \"Augmenter le niveau de zoom pour permettre l'√©dition \\nEchelle de d√©clenchement 1 :\"\n    },\n    pdf: \"Aper√ßu du document non disponible. Cliquez ici \",\n    commit: {\n      header: \"La liste ci-dessous montre toutes les modifications qui seront enregistr√©es.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Ajouts</b> indique le nombre de fonctionnalit√©s ajout√©es\",\n      header_update_delete: \"<b>Modifi√©</b> e <b>Supprim√©</b> liste les ids\",\n      add: \"Ajout√©\",\n      delete: \"Supprim√©\",\n      update: \"Modifi√©\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"Avant d'enregistrer, il est n√©cessaire de remplir tous les champs obligatoires du features saisi\",\n    no_feature_selected: \"Aucune feature s√©lectionn√©e\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>S\\xE9lectionner les relations pour les associer \\xE0 l'\\xE9l\\xE9ment en cours d'\\xE9dition.</div>\"\n    },\n    draw_new_feature: \"Dessiner une nouvelle feature\",\n    draw_or_copy: \"ou\",\n    copy_feature_from_other_layer: \"Copier feature d'une autre layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Cr√©er et ajouter une nouvelle relation\",\n        link_relation: \"Associer une relation existante √† cette fonctionnalit√©\",\n        open_relation_tools: \"Outils de relation ouverte\",\n        unlink_relation: \"Annuler la relation\"\n      }\n    },\n    buttons: {\n      save: \"Ins√©rer/Modifier\",\n      save_and_back: \"Sauvegarder et retourner au parent\",\n      save_and_back_table: \"Sauvegarder et et revenir en arri√®re\",\n      cancel: \"Ignorer modifications\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select feature/s\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],21:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _it = require('./it');\n\nvar _it2 = _interopRequireDefault(_it);\n\nvar _en = require('./en');\n\nvar _en2 = _interopRequireDefault(_en);\n\nvar _fi = require('./fi');\n\nvar _fi2 = _interopRequireDefault(_fi);\n\nvar _se = require('./se');\n\nvar _se2 = _interopRequireDefault(_se);\n\nvar _fr = require('./fr');\n\nvar _fr2 = _interopRequireDefault(_fr);\n\nvar _de = require('./de');\n\nvar _de2 = _interopRequireDefault(_de);\n\nvar _ro = require('./ro');\n\nvar _ro2 = _interopRequireDefault(_ro);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  it: _it2.default,\n  en: _en2.default,\n  fi: _fi2.default,\n  se: _se2.default,\n  fr: _fr2.default,\n  de: _de2.default,\n  ro: _ro2.default\n};\n\n},{\"./de\":17,\"./en\":18,\"./fi\":19,\"./fr\":20,\"./it\":22,\"./ro\":23,\"./se\":24}],22:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"Per terminare clicca su ogni segno di spunta\"\n  },\n  errors: {\n    no_layers: \"Si √® verificato un errore nel caricamento dei layers in editing.\",\n    some_layers: \"Si √® verificato un errore nel caricamento di alcuni layers in editing\",\n    editing_multiple_relations: 'Le modifica di relazioni multiple non √® attualmente supportata'\n  },\n  search: \"Cerca\",\n  editing_changes: \"Modifiche Editing\",\n  editing_data: \"Modifica dati\",\n  editing_attributes: \"Edita attributi\",\n  relations: \"Relazioni\",\n  edit_relation: \"Edita relazione\",\n  back_to_relations: \"Ritorna alle Relazioni\",\n  no_relations_found: \"Non ci sono relazioni\",\n  relation_data: \"Dati relativi alla relazione\",\n  relation_already_added: \"Relazione gi√† presente\",\n  list_of_relations_feature: \"Elenco Relazioni della feature \",\n  tooltip: {\n    edit_layer: \"Modifica livello\",\n    filter_by_relation: \"Filtra i livelli per relazione\"\n  },\n  toolbox: {\n    title: 'Edita'\n  },\n  table: {\n    edit: \"Edita feature\",\n    copy: \"Crea una copia\",\n    delete: \"Cancella feature\"\n  },\n  tools: {\n    copy: \"Copia elementi\",\n    pastefeaturesfromotherlayers: \"Incolla elemento da altro livello\",\n    addpart: \"Aggiungi parte alla geometria\",\n    deletepart: \"Cancella parte dalla geometria\",\n    merge: \"Dissolvi elementi\",\n    split: \"Dividi elementi\",\n    add_feature: \"Aggiungi elemento\",\n    delete_feature: \"Elimina elemento\",\n    move_feature: \"Muovi elemento\",\n    update_vertex: \"Aggiorna vertici elemento\",\n    update_feature: \"Modifica attributi elemento\",\n    update_multi_features: \"Modifica gli attributi degli elementi selezionati\",\n    copyfeaturefromexternallayer: \"Crea elemento da un livello esterno\"\n  },\n  toolsoftool: {\n    measure: \"Visualizza misura\",\n    snap: \"Snap sul layer\",\n    snapall: \"Snap su tutti i layer\"\n  },\n  steps: {\n    help: {\n      select_elements: \"Seleziona le geometrie\",\n      select_element: \"Seleziona l'elemento\",\n      copy: \"Crea una copia degli elementi selezionati\",\n      merge: \"Dissolvi elementi\",\n      split: \"Dvidi elemento\",\n      new: \"Crea un nuovo elemento\",\n      edit_table: \"Modifica gli elementi della tabella\",\n      draw_new_feature: \"Disegna la nuova geometria\",\n      action_confirm: \"Conferma azione\",\n      double_click_delete: \"Seleziona la geometria sulla mappa da cancellare\",\n      edit_feature_vertex: \"Modifica o aggiungi un vertice alla geometria selezionata\",\n      move: \"Muovi la geometria selezionata\",\n      select_feature_to_relation: \"Seleziona la geometria che vuoi mettere in relazione\",\n      show_edit_feature_form: \"Mostra il modulo per modificare gli attributi del'elemento\",\n      pick_feature: \"Seleziona la geometria da modificare dalla mappa\",\n      insert_attributes_feature: \"Inserisci gli attributi dell'elemento\"\n    }\n  },\n\n  workflow: {\n    steps: {\n      select: 'Seleziona una geometria',\n      draw_part: \"Disegna il nuovo elemento da aggiungere alla geometria\",\n      draw_geometry: \"Disegna la geometria\",\n      merge: 'Seleziona la geometria su cui dissolvere',\n      selectPoint: \"Clicca sulla geometria per selezionarla\",\n      selectSHIFT: 'Seleziona le geometrie tenedo premuto il tasto SHIFT',\n      selectDrawBox: \"Seleziona le geometrie disegnando un rettangolo mediante la creazione dei due punti della diagonale\",\n      selectDrawBoxAtLeast2Feature: \"Seleziona almeno 2 geometrie disegnando un rettangolo mediante la creazione dei due punti della diagonale\",\n      selectPointSHIFT: 'Seleziona le geometrie <br><sub><code>MAIUSC+DRAG</code> seleziona pi√π elementi in un area</sub>',\n      selectMultiPointSHIFT: 'Seleziona le geometrie <br><sub><code>SHIFT+DRAG</code> seleziona pi√π elementi in un area</sub>',\n      selectMultiPointSHIFTAtLeast2Feature: 'Seleziona almeno 2 geometrie <br><sub><code>SHIFT+DRAG</code> seleziona pi√π elementi in un area</sub>',\n      copyCTRL: 'Copia le geometrie selezionate con CTRL+C',\n      selectStartVertex: 'Seleziona il vertice di partenza',\n      selectToPaste: 'Seleziona il punto dove verranno incollate le geometrie',\n      draw_split_line: \"Disegna una linea per dividere la geometria selezionata\"\n    },\n    title: {\n      steps: 'Passi'\n    },\n    next: 'Avanti'\n  },\n  messages: {\n    featureslockbyotheruser: \"Ci sono alcune geometrie/records non editabili perch√® in modifica da altri utenti\",\n    splitted: \"Feature(s) splittata(e)\",\n    nosplittedfeature: \"La(e) feature(s) non √® stata splittata\",\n    press_esc: \"Premi ESC per tornare indietro\",\n    online: \"Ora sei di nuovo ONLINE. Puoi slavare le modifiche in modo permanente\",\n    offline: \"Sei OFFLINE. Tutte le modifiche saranno salvate temporaneamente in locale\",\n    delete_feature: \"Vuoi eliminare l'elemento selezionato?\",\n    delete_feature_relations: \"Cancellando una feature con relazioni associate, tale relazioni rimarranno orfane. Si consiglia di gestire tali relazioni prima di cancellare la feature\",\n    unlink_relation: \"Vuoi staccare la relazione?\",\n    commit_feature: \"Riepilogo modifiche\",\n    toolbox_has_no_geometry: \"questo livello non ha geometria\",\n    toolbox_has_relation: \"questo livello fa parte di una relazione\",\n    saved: \"I dati sono stati salvati correttamente\",\n    saved_local: \"I dati sono stati salvati correttamente in locale\",\n    loading_data: \"Caricamento dati\",\n    saving: \"Salvataggio dati in corso. Attendere ...\",\n    constraints: {\n      enable_editing: \"Aumentare il livello di zoom per abilitare l'editing \\nScala di attivazione 1:\"\n    },\n    pdf: \"Anteprima del documento non disponibile. Clicca qui \",\n    commit: {\n      header: \"La lista sotto riporta tutte le modifiche che verranno salvate.\",\n      header_relation: \"Relazione\",\n      header_add: \"<b>Aggiunte</b> riporta il numero delle features aggiunte\",\n      header_update_delete: \"<b>Modificate</b> e <b>Cancellate</b> riporta la lista degli id\",\n      add: \"Aggiunte\",\n      delete: \"Cancellate\",\n      update: \"Aggiornate\"\n    },\n    loading_table_data: \"Costruzione tabella dati in corso. Attendere ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"Necessario compilare eventuali campi obbligatori sulle features incollate prima del salvataggio\",\n    no_feature_selected: \"Nessuna feature selezionata\",\n    select_min_2_features: 'Seleziona come minimo due features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Seleziona le relazioni per associarle alla feature in editing.</div>\"\n    },\n    draw_new_feature: \"Disegna nuova geometria\",\n    draw_or_copy: \"oppure\",\n    copy_feature_from_other_layer: \"Copia geometria da altro layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Torna ad editare il padre\",\n        add_relation: \"Crea ed aggiungi nuova relazione\",\n        link_relation: \"Associa una relazione esistente a questa feature\",\n        open_relation_tools: \"Apri strumenti relatione\",\n        unlink_relation: \"Annulla relazione\"\n      }\n    },\n    buttons: {\n      save: \"Inserisci/Modifica\",\n      save_table: 'Modifica',\n      save_and_back: \"Salva e torna al padre\",\n      save_and_back_table: \"Salva e torna indietro\",\n      cancel: \"Ignora Modifiche\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Seleziona feature/s\",\n        edit_attributes: \"Edita attributi delle features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Seleziona una feature\"\n      }\n    }\n  }\n};\n\n},{}],23:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Avem o eroare. Straturile nu sunt editabile\",\n    some_layers: \"Avem o eroare: Anumite straturi nu se pot edita\"\n  },\n  search: \"CautƒÉ\",\n  editing_changes: \"Modificare schimbƒÉri\",\n  editing_data: \"Modificare straturi\",\n  editing_attributes: \"Modificare atribute\",\n  relations: \"Rela»õii\",\n  edit_relation: \"ModificƒÉ rela»õia\",\n  back_to_relations: \"√énapoi la Rela»õii\",\n  no_relations_found: \"Nu am gƒÉsit rela»õii\",\n  relation_data: \"Date rela»õii\",\n  relation_already_added: \"Rela»õie adƒÉugatƒÉ deja\",\n  list_of_relations_feature: \"Lista rela»õii entitatea \",\n  tooltip: {\n    edit_layer: \"ModificƒÉ strat\"\n  },\n  toolbox: {\n    title: 'ModificƒÉ'\n  },\n  table: {\n    edit: \"ModificƒÉ entitate\",\n    copy: \"CreeazƒÉ o copie\",\n    delete: \"EliminƒÉ entitatea\"\n  },\n  tools: {\n    copy: \"CopiazƒÉ entitƒÉ»õile\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"AdaugƒÉ o parte la multiparte\",\n    deletepart: \"EliminƒÉ partea din multiparte\",\n    merge: \"Dizolvare entitƒÉ»õi\",\n    split: \"Divizare Entitate\",\n    add_feature: \"AdaugƒÉ entitate\",\n    delete_feature: \"Eliminare entitate\",\n    move_feature: \"MutƒÉ entitate\",\n    update_vertex: \"ActualizeazƒÉ vertec»ôii entitƒÉ»õii\",\n    update_feature: \"ActualizeazƒÉ atributul entitƒÉ»õii\",\n    update_multi_features: \"ActualizeazƒÉ atributele entitƒÉ»õilor selectate\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"AratƒÉ mƒÉsurƒÉtorile\",\n    snap: \"Acro»ôare strat\",\n    snapall: \"Acro»ôare pe toate straturile\"\n  },\n  steps: {\n    help: {\n      select_elements: \"SelecteazƒÉ entitƒÉ»õi\",\n      select_element: \"SelecteazƒÉ entitate\",\n      copy: \"CreeazƒÉ o nouƒÉ copie a entitƒÉ»õilor selectate\",\n      merge: \"DizolvƒÉ entitƒÉ»õile\",\n      split: \"Divizare Entitate\",\n      new: \"CreeazƒÉ o entitate\",\n      edit_table: \"ModificƒÉ entitƒÉ»õile tabelare\",\n      draw_new_feature: \"DeseneazƒÉ entitate pe hartƒÉ\",\n      action_confirm: \"ConfirmƒÉ ac»õiunea\",\n      double_click_delete: \"SelecteazƒÉ entitatea de eliminat din hartƒÉ\",\n      edit_feature_vertex: \"ModificƒÉ sau adaugƒÉ un vertex la entitatea selectatƒÉ\",\n      move: \"MutƒÉ entitatea selectatƒÉ\",\n      select_feature_to_relation: \"SelecteazƒÉ entitate pentru rela»õionare\",\n      show_edit_feature_form: \"AratƒÉ formularul entitƒÉ»õii pentru modificƒÉri\",\n      pick_feature: \"SelecteazƒÉ entitƒÉ»õile de modificat din hartƒÉ\",\n      insert_attributes_feature: \"InsereazƒÉ atributele entitƒÉ»õii\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'Click pe entitate pentru a o selecta',\n      draw_part: \"DeseneazƒÉ o parte nouƒÉ\",\n      draw_geometry: \"Desena»õi geometria\",\n      merge: 'SelecteazƒÉ partea de dizolvat',\n      selectSHIFT: 'SelecteazƒÉ entitƒÉ»õi prin desen triunghi apƒÉs√¢nd SHIFT',\n      selectDrawBox: \"SelecteazƒÉ entitƒÉ»õi desen√¢nd un dreptunghi prin douƒÉ puncte opuse\",\n      selectDrawBoxAtLeast2Feature: \"SelecteazƒÉ cel pu»õin 2 entitƒÉ»õi prin desenul unui dreptunghi\",\n      selectPoint: \"Click pe entitate pentru selectare\",\n      selectPointSHIFT: 'SelecteazƒÉ entitƒÉ»õi prin desen dreptunghi apƒÉs√¢nd SHIFT (multientitƒÉ»õi) sau prin click pe entitate',\n      selectMultiPointSHIFT: 'SelecteazƒÉ entitƒÉ»õi prin desen dreptunghi apƒÉs√¢nd SHIFT sau prin click pe entitate',\n      selectMultiPointSHIFTAtLeast2Feature: 'SelecteazƒÉ cel pu»õin 2 entitƒÉ»õi prin desen dreptunghi apƒÉs√¢nd SHIFT sau prin click pe entitate',\n      copyCTRL: 'CopiazƒÉ entitƒÉ»õile selectate folosint CTRL+C',\n      selectStartVertex: 'SelecteazƒÉ vertexul de start a entitƒÉ»õilor selectate',\n      selectToPaste: 'SelecteazƒÉ punctul unde sƒÉ lipim entitƒÉ»õile selectate',\n      draw_split_line: \"DeseneazƒÉ o linie pentru a diviza entitatea selectatƒÉ\"\n    },\n    title: {\n      steps: 'Pa»ôi'\n    },\n    next: 'UrmƒÉtorul'\n  },\n  messages: {\n    featureslockbyotheruser: \"Unele geometrii/√ÆnregistrƒÉri nu sunt editabile deoarece sunt editate de cƒÉtre alt utilizator\",\n    splitted: \"Divizat\",\n    nosplittedfeature: \"Entitate nedivizatƒÉ\",\n    press_esc: \"ESC pentru √Ænapoi\",\n    online: \"√énapoi ONLINE. Acum se pot salva schimbƒÉrile\",\n    offline: \"OFFLINE. SchimbƒÉrile sunt salvate local\",\n    delete_feature: \"»òterg entitatea selectatƒÉ?\",\n    delete_feature_relations: \"DacƒÉ entitatea are rela»õii care trimit la ea, acele rela»õii devin orfane. SugerƒÉm sƒÉ vƒÉ ocupa»õi de acele elemente √Ænainte sƒÉ elimina»õi aceastƒÉ entitate.\",\n    unlink_relation: \"Dore»ôti sƒÉ elimina»õi legƒÉtura cu rela»õia?\",\n    commit_feature: \"Rezumatul modificƒÉrilor\",\n    toolbox_has_relation: \"acest strat face parte dintr-o rela»õie\",\n    saved: \"Datele sunt salvate\",\n    saved_local: \"Datele s-au salvat local\",\n    loading_data: \"Datele se √ÆncarcƒÉ.\",\n    saving: \"SalvƒÉm datele. A»ôtepta»õi ...\",\n    constraints: {\n      enable_editing: \"Pentru a activa Modificare face»õi zoom la \\nScara de activare 1:\"\n    },\n    pdf: \"Previzualizarea documentului nu este disponibilƒÉ. Click aici \",\n    commit: {\n      header: \"Lista cu toate modificƒÉrile.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>AdƒÉugate</b> aratƒÉ nr. de entitƒÉ»õi adƒÉugate\",\n      header_update_delete: \"<b>Modificate</b> »ôi <b>»òterse</b> aratƒÉ lista de id-uri de entitƒÉ»õi\",\n      add: \"AdƒÉugate\",\n      delete: \"Eliminate\",\n      update: \"Modificate\"\n    },\n    loading_table_data: \"√éncƒÉrcƒÉm tabelul de date ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"√énainte de a salva, este necesar sƒÉ completa»õi toate c√¢mpurile obligatorii ale entitƒÉ»õi introduse\",\n    no_feature_selected: \"Nicio feature selectatƒÉ\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>Selecteaz\\u0103 rela\\u021Biile pentru a face leg\\u0103tura cu entitatea curent\\u0103.</div>\"\n    },\n    draw_new_feature: \"Desena»õi o nouƒÉ feature\",\n    draw_or_copy: \"sau\",\n    copy_feature_from_other_layer: \"Copia»õi feature dintr-un alt layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"√énapoi la modificƒÉrile entitƒÉ»õii pƒÉrinte\",\n        add_relation: \"CreeazƒÉ »ôi fƒÉ legƒÉtura unei rela»õii noi\",\n        link_relation: \"LeagƒÉ o rela»õie de entitate\",\n        open_relation_tools: \"AratƒÉ instrumentele pentru rela»õii\",\n        unlink_relation: \"EliminƒÉ legƒÉtura la rela»õie\"\n      }\n    },\n    buttons: {\n      save: \"Insera»õi/Edita»õi\",\n      save_and_back: \"SalveazƒÉ »ôi dƒÉ √Ænapoi\",\n      save_and_back_table: \"SalveazƒÉ »ôi dƒÉ √Ænapoi\",\n      cancel: \"Ignora»õi modificƒÉrile\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select feature/s\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],24:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  close_editing_panel: {\n    message: \"To close editing form need to exit from editing layer\"\n  },\n  errors: {\n    no_layers: \"Ett fel uppstod. Niv√•erna kan inte redigeras.\",\n    some_layers: \"Ett fel uppstod. Vissa niv√•er kan inte redigeras.\"\n  },\n  search: \"S√∂kning\",\n  editing_changes: \"Editing Changes\",\n  editing_data: \"Niv√•erna redigeras\",\n  editing_attributes: \"Attributen redigeras\",\n  relations: \"Relationer\",\n  edit_relation: \"Redigera relationen\",\n  back_to_relations: \"Tillbaka till relationerna\",\n  no_relations_found: \"Inga relationer hittades\",\n  relation_data: \"Relationsuppgifter\",\n  relation_already_added: \"Relationen har redan lagts till\",\n  list_of_relations_feature: \"Lista p√• relationens egenskaper\",\n  tooltip: {\n    edit_layer: \"Redigera niv√•n\"\n  },\n  toolbox: {\n    title: 'Redigera'\n  },\n  table: {\n    edit: \"Redigera egenskap\",\n    copy: \"Skapa en kopia\",\n    delete: \"Ta bort egenskap\"\n  },\n  tools: {\n    copy: \"Kopiera egenskaper\",\n    pastefeaturesfromotherlayers: \"Paste features from other layer\",\n    addpart: \"L√§gg till del\",\n    deletepart: \"Ta bort del\",\n    merge: \"Sl√• samman egenskaper\",\n    split: \"Dela upp egenskap\",\n    add_feature: \"L√§gg till egenskap\",\n    delete_feature: \"Ta bort egenskap\",\n    move_feature: \"Flytta egenskap\",\n    update_vertex: \"Uppdatera punktens egenskap\",\n    update_feature: \"Uppdatera egenskap\",\n    update_multi_features: \"√Ñndra attributen f√∂r de valda funktionerna\",\n    copyfeaturefromexternallayer: \"Create Feature from added layer\"\n  },\n  toolsoftool: {\n    measure: \"Show measure\",\n    snap: \"Snap layer\",\n    snapall: \"Snap to all layers\"\n  },\n  steps: {\n    help: {\n      select_elements: \"V√§lj egenskaper\",\n      select_element: \"V√§lj egenskapalitse ominaisuus\",\n      copy: \"Skapa kopia av valda egenskaper\",\n      merge: \"Sl√• samman egenskaper\",\n      split: \"Dela upp egenskap\",\n      new: \"Skapa ny egenskap\",\n      edit_table: \"√Ñndra egenskaper i tabellen\",\n      draw_new_feature: \"Piirr√§ ominaisuus kartalle\",\n      action_confirm: \"Godk√§nn funktionen\",\n      double_click_delete: \"V√§lj funktionen som du vill ta bort p√• kartan\",\n      edit_feature_vertex: \"√Ñndra punkten eller l√§gg till punkten till den valda egenskapen\",\n      move: \"Flytta den valda egenskapen\",\n      select_feature_to_relation: \"V√§lj relation\",\n      show_edit_feature_form: \"Visa egenskapsformul√§ret f√∂r redigering av attribut\",\n      pick_feature: \"V√§lj funktion p√• kartan f√∂r att √§ndras\",\n      insert_attributes_feature: \"L√§gg till egenskapens attribut\"\n    }\n  },\n  workflow: {\n    steps: {\n      select: 'V√§lj egenskap',\n      draw_part: \"Rita ny del\",\n      draw_geometry: \"Rita geometri\",\n      merge: 'V√§lj egenskap att sl√• samman',\n      selectSHIFT: 'Tryck SHIFT, om du vill v√§lja objekt med hj√§lp av rektangel.', //Tero 10.12.2020\n      selectDrawBox: \"Rita upp den rektangel inom vilken objekten v√§ljs \", //Tero 10.12.2020\n      selectDrawBoxAtLeast2Feature: \"Rita rektangeln inom vilken minst tv√• objekt √§r markerade \",\n      selectPoint: \"V√§lj egenskap\",\n      selectPointSHIFT: 'Tryck SHIFT, om du vill v√§lja objekt med hj√§lp av rektangel, eller v√§lj en enskild egenskap.',\n      selectMultiPointSHIFT: 'Tryck SHIFT, om du vill v√§lja objekt med hj√§lp av rektangel, eller v√§lj en enskild egenskap.',\n      selectMultiPointSHIFTAtLeast2Feature: 'Tryck p√• SKIFT f√∂r att v√§lja minst tv√• objekt med en rektangel eller v√§lj en enda egenskap. ',\n      copyCTRL: 'CTRL+C, du kan kopiera valda egenskaper.', //Tero 10.12.2020\n      selectStartVertex: 'Visa startpunkten f√∂r valda egenskaper.',\n      selectToPaste: 'V√§lj punkt till vilken de valda egenskaperna ska fogas.',\n      draw_split_line: \"Rita en linje enligt vilken den valda egenskapen ska uppdelas.\"\n    },\n    title: {\n      steps: 'Skeden'\n    },\n    next: \"N√§sta\"\n  },\n  messages: {\n    featureslockbyotheruser: \"Jotkut geometriat/tietueet eiv√§t ole muokattavissa, koska muut k√§ytt√§j√§t muokkaavat niit√§\",\n    splitted: \"Uppdelad\",\n    nosplittedfeature: \"Egenskapen har inte delats upp\",\n    press_esc: \"Tryck ESC f√∂r att g√• tillbaka\",\n    online: \"F√∂rbindelsen har uppr√§ttats. √Ñndringar kan sparas i databasen.\",\n    offline: \"Du √§r i offline-l√§ge. √Ñndringarna sparas lokalt\",\n    delete_feature: \"Vill du ta bort den valda egenskapen?\",\n    delete_feature_relations: \"Om egenskapen saknar bindande relationer blir dessa relationer f√∂r√§ldral√∂sa. Vi rekommenderar att du behandlar dessa relationer innan du l√§mnar programmet\",\n    unlink_relation: \"Vill du ta bort relationen?\",\n    commit_feature: \"Sammanfattning av √§ndringar\",\n    toolbox_has_relation: \"detta lager √§r en del av en relation\",\n    saved: \"Uppgifterna sparades\",\n    saved_local: \"Uppgifterna sparades lokalt.\",\n    loading_data: \"Uppgifterna laddas\",\n    saving: \"Uppgifterna sparas. V√§nta...\",\n    constraints: {\n      enable_editing: \"Zooma in f√∂r att b√∂rja anv√§nda redigeringsverktyg \\nAktivering skala 1:\"\n    },\n    pdf: \"F√∂rhandsgranskning av dokument √§r inte tillg√§nglig. Tryck h√§r\",\n    commit: {\n      header: \"F√∂ljande lista visar alla √§ndringar.\",\n      header_relation: \"Relation\",\n      header_add: \"<b>Tillagda</b> visar antalet egenskaper som lagts till\",\n      header_update_delete: \"<b>Redigerad</b> och <b>Borttagen</b> Visa en lista p√• egenskapernas id\",\n      add: \"har lagts till\",\n      delete: \"Borttagen\",\n      update: \"Redigerad\"\n    },\n    loading_table_data: \"Building Data Table. Please wait ...\",\n    copy_and_paste_from_other_layer_mandatory_fields: \"It is necessary to fill in any mandatory fields on the features pasted before saving\",\n    no_feature_selected: \"No feature selected\",\n    select_min_2_features: 'Select at least 2 features'\n  },\n  relation: {\n    table: {\n      info: \"<div>V\\xE4lj relation f\\xF6r l\\xE4nkning till egenskap som ska redigeras.</div>\"\n    },\n    draw_new_feature: \"Draw new feature\",\n    draw_or_copy: \"or\",\n    copy_feature_from_other_layer: \"Copy feature from other layer\"\n  },\n  form: {\n    relations: {\n      tooltips: {\n        back_to_father: \"Back to edit father\",\n        add_relation: \"Skapa och l√§nka ny relation\",\n        link_relation: \"Foga relationen till denna egenskap\",\n        open_relation_tools: \"Visa relationsverktyg\",\n        unlink_relation: \"Ta bort relation\"\n      }\n    },\n    buttons: {\n      save: \"Infoga/Redigera\",\n      save_and_back: \"Spara och g√• tillbaka\",\n      save_and_back_table: \"Spara och g√• tillbaka\",\n      cancel: \"Ignorera √§ndringar\"\n    }\n  },\n  modal: {\n    tools: {\n      copyfeaturefromotherlayer: {\n        title: \"Select feature/s\",\n        edit_attributes: \"Edit attributes of pasted features in multiple mode\"\n      },\n      copyfeaturefromprojectlayer: {\n        title: \"Select a feature\"\n      }\n    }\n  }\n};\n\n},{}],25:[function(require,module,exports){\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _rollback = function () {\n  var _ref37 = _asyncToGenerator(function* () {\n    var relations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    return Promise.allSettled(Object.entries(relations).flatMap(function (_ref38) {\n      var _ref39 = _slicedToArray(_ref38, 2),\n          layerId = _ref39[0],\n          _ref39$ = _ref39[1],\n          add = _ref39$.add,\n          del = _ref39$.delete,\n          update = _ref39$.update,\n          _ref39$$relations = _ref39$.relations,\n          relations = _ref39$$relations === undefined ? {} : _ref39$$relations;\n\n      var source = (0, _getEditingLayerById.getEditingLayerById)(layerId).getEditingSource();\n      var has_features = source.readFeatures().length > 0; // check if the relation layer has some features\n      // get original values\n      return [].concat(_toConsumableArray((has_features && add || []).map(function () {\n        var _ref41 = _asyncToGenerator(function* (_ref40) {\n          var id = _ref40.id;\n\n          source.removeFeature(source.getFeatureById(id));\n        });\n\n        return function (_x21) {\n          return _ref41.apply(this, arguments);\n        };\n      }())), _toConsumableArray((has_features && update || []).map(function () {\n        var _ref43 = _asyncToGenerator(function* (_ref42) {\n          var id = _ref42.id;\n\n          var f = yield (0, _getProjectLayerFeatureById.getProjectLayerFeatureById)({ layerId: layerId, fid: id });\n          var feature = source.getFeatureById(id);\n          feature.setProperties(f.properties);\n          feature.setGeometry(f.geometry);\n        });\n\n        return function (_x22) {\n          return _ref43.apply(this, arguments);\n        };\n      }())), _toConsumableArray(del.map(function () {\n        var _ref44 = _asyncToGenerator(function* (id) {\n          var f = yield (0, _getProjectLayerFeatureById.getProjectLayerFeatureById)({ layerId: layerId, fid: id });\n          var feature = new ol.Feature({ geometry: f.geometry });\n          feature.setProperties(f.properties);\n          feature.setId(id);\n          // need to add again to source because it is for relation layer is locked\n          source.addFeature(new Feature({ feature: feature }));\n        });\n\n        return function (_x23) {\n          return _ref44.apply(this, arguments);\n        };\n      }())), [_rollback(relations)]);\n    }));\n  });\n\n  return function _rollback() {\n    return _ref37.apply(this, arguments);\n  };\n}();\n\nrequire('./g3wsdk');\n\nvar _i18n = require('./i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _workflow = require('./g3wsdk/workflow/workflow');\n\nvar _step = require('./g3wsdk/workflow/step');\n\nvar _promisify = require('./utils/promisify');\n\nvar _createFeature = require('./utils/createFeature');\n\nvar _getProjectLayerFeatureById = require('./utils/getProjectLayerFeatureById');\n\nvar _getEditingLayerById = require('./utils/getEditingLayerById');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('./utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _addPartToMultigeometries = require('./utils/addPartToMultigeometries');\n\nvar _workflows = require('./workflows');\n\nvar _toolbox = require('./toolboxes/toolbox');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar G3W_FID = g3wsdk.constant.G3W_FID;\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    ApplicationService = _g3wsdk$core.ApplicationService;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar _g3wsdk$core$i18n = g3wsdk.core.i18n,\n    t = _g3wsdk$core$i18n.t,\n    tPlugin = _g3wsdk$core$i18n.tPlugin;\nvar _g3wsdk$core$layer = g3wsdk.core.layer,\n    Layer = _g3wsdk$core$layer.Layer,\n    LayersStore = _g3wsdk$core$layer.LayersStore;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar MapLayersStoreRegistry = g3wsdk.core.map.MapLayersStoreRegistry;\nvar _g3wsdk$core$plugin = g3wsdk.core.plugin,\n    Plugin = _g3wsdk$core$plugin.Plugin,\n    PluginService = _g3wsdk$core$plugin.PluginService;\nvar noop = g3wsdk.core.utils.noop;\nvar GUI = g3wsdk.gui.GUI;\nvar Panel = g3wsdk.gui.vue.Panel;\nvar serverErrorParser = g3wsdk.core.errors.parsers.Server;\nvar Geometry = g3wsdk.core.geometry.Geometry;\nvar _g3wsdk$ol$utils = g3wsdk.ol.utils,\n    getScaleFromResolution = _g3wsdk$ol$utils.getScaleFromResolution,\n    getResolutionFromScale = _g3wsdk$ol$utils.getResolutionFromScale;\n\n\nObject.entries({\n  Workflow: _workflow.Workflow,\n  OpenFormStep: _workflows.OpenFormStep,\n  AddFeatureStep: _workflows.AddFeatureStep,\n  ToolBox: _toolbox.ToolBox\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nnew (function (_Plugin) {\n  _inherits(_class, _Plugin);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Global plugin state\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, {\n      name: 'editing',\n      i18n: _i18n2.default,\n      fontClasses: [{ name: 'measure', className: \"fas fa-ruler-combined\" }, { name: 'magnete', className: \"fas fa-magnet\" }, { name: 'clipboard', className: \"fas fa-clipboard\" }]\n    }));\n\n    _this.state = {\n      open: false, // check if panel is open or not\n      toolboxes: [],\n      _toolboxes: [], // TODO: `state._toolboxes` vs `state.toolboxes` ?\n      toolboxselected: null,\n      toolboxidactivetool: null,\n      /** @since g3w-client-plugin-editing@v3.6.2 */\n      showselectlayers: true, // whether to show selected layers on editing panel\n      message: null,\n      relations: [],\n      sessions: {}, // store all sessions\n      layers_in_error: false,\n      formComponents: {}, // plugin components\n      subscribers: {},\n      constraints: { // editing contraints (layer, filter, ..) to get features\n        toolboxes: {},\n        showToolboxesExcluded: true\n      },\n      featuresOnClose: {}, // layers fatures to result when close editing (KEY LAYERID, VALUES ARRAY OF FEATURE FID CHANGES OR ADDED)\n      uniqueFieldsValues: {}, // store unique fields values for each layer\n      saveConfig: { // store configuration of how save/commit changes to server\n        mode: \"default\", // default, autosave\n        modal: false,\n        messages: undefined, // object to set custom message\n        cb: {\n          done: function done() {}, // function executed after commit change done\n          error: function error() {} // function executed after commit changes error\n        }\n      },\n      editableLayers: {},\n      events: {\n        'start-editing': {},\n        'show-relation-editing': {},\n        layer: {\n          start_editing: {\n            before: {},\n            after: {}\n          }\n        }\n      },\n      show_errors: false,\n      editFeatureKey: undefined,\n      panel: null, // editing panel\n      currentLayout: ApplicationService.getCurrentLayoutName(),\n      unwatchLayout: new Vue().$watch(function () {\n        return ApplicationState.gui.layout.__current;\n      }, function (layoutName) {\n        return _this.state.currentLayout = layoutName !== _this.getName() ? layoutName : _this.state.currentLayout;\n      }),\n      onMapControlToggled: function onMapControlToggled(_ref3) {\n        var target = _ref3.target;\n\n        target.isToggled() && target.isClickMap() && _this.state.toolboxselected && _this.state.toolboxselected.getActiveTool() && _this.state.toolboxselected.stopActiveTool();\n      }\n    };\n\n    // BACKOMP v3.x\n    _this.setService(Object.assign(new PluginService(), {\n      state: _this.state,\n      config: _this.config,\n      getSession: _this.getSession.bind(_this),\n      getFeature: _this.getFeature.bind(_this),\n      subscribe: _this.subscribe.bind(_this),\n      unsubscribe: _this.unsubscribe.bind(_this),\n      fireEvent: _this.fireEvent.bind(_this),\n      undo: _this.undo.bind(_this),\n      redo: _this.redo.bind(_this),\n      getEditingLayer: _this.getEditingLayer.bind(_this),\n      addToolBox: _this.addToolBox.bind(_this),\n      runEventHandler: _this.runEventHandler.bind(_this),\n      resetDefault: _this.resetDefault.bind(_this),\n      resetAPIDefault: _this.resetAPIDefault.bind(_this),\n      getLayers: _this.getLayers.bind(_this),\n      getLayerById: _this.getLayerById.bind(_this),\n      getToolBoxById: _this.getToolBoxById.bind(_this),\n      getSessionById: _this.getSessionById.bind(_this),\n      setApplicationEditingConstraints: _this.setApplicationEditingConstraints.bind(_this),\n      getToolBoxes: _this.getToolBoxes.bind(_this),\n      getEditableLayers: _this.getEditableLayers.bind(_this),\n      stop: _this.stop.bind(_this),\n      saveChange: _this.saveChange.bind(_this),\n      commit: _this.commit.bind(_this),\n      undoRedoLayerUniqueFieldValues: _this.undoRedoLayerUniqueFieldValues.bind(_this),\n      undoRedoRelationUniqueFieldValues: _this.undoRedoRelationUniqueFieldValues.bind(_this),\n      stopEditing: _this.stopEditing.bind(_this),\n      startEditing: _this.startEditing.bind(_this),\n      addLayerFeature: _this.addLayerFeature.bind(_this)\n    }));\n\n    // set map control toggle event\n    GUI.getService('map').on('mapcontrol:toggled', _this.state.onMapControlToggled);\n\n    _this._init();\n    return _this;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n   * \n   * @since g3w-client-plugin-editing@v3.8.0\n   */\n\n\n  _createClass(_class, [{\n    key: '_init',\n    value: function () {\n      var _ref4 = _asyncToGenerator(function* () {\n        var _this2 = this;\n\n        // skip when no editable layer\n        if (!CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).length) {\n          return;\n        }\n\n        this.setHookLoading({ loading: true });\n\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1 */\n        this.service.setApi({\n          api: {\n            getSession: this.getSession.bind(this),\n            getFeature: this.getFeature.bind(this),\n            subscribe: this.subscribe.bind(this),\n            unsubscribe: this.unsubscribe.bind(this),\n            getToolBoxById: this.getToolBoxById.bind(this),\n            addNewFeature: _createFeature.createFeature,\n            commitChanges: this.commit.bind(this),\n            setApplicationEditingConstraints: this.setApplicationEditingConstraints.bind(this),\n            getMapService: function getMapService() {\n              return GUI.getService('map');\n            },\n            updateLayerFeature: noop,\n            deleteLayerFeature: noop,\n            addLayerFeature: this.addLayerFeature.bind(this),\n            hidePanel: this.hideEditingPanel.bind(this),\n            resetDefault: this.resetAPIDefault.bind(this),\n            startEditing: this.startEditing.bind(this),\n            stopEditing: this.stopEditing.bind(this),\n            showPanel: this.showPanel.bind(this),\n            setSaveConfig: this.setSaveConfig.bind(this),\n            addFormComponents: this.addFormComponents.bind(this)\n          }\n        });\n\n        // add editing layer store to mapstoreregistry\n        MapLayersStoreRegistry.addLayersStore(new LayersStore({ id: 'editing', queryable: false }));\n\n        this.state.editableLayers = {};\n        this.state._toolboxes = [];\n        this.state.toolboxes = [];\n\n        // loop over editable layers\n        (yield Promise.allSettled(CatalogLayersStoresRegistry.getLayers({ EDITABLE: true }).map(function (l) {\n          return l.getLayerForEditing({\n            vectorurl: _this2.config.vectorurl,\n            project_type: _this2.config.project_type\n          });\n        }))).forEach(function (response) {\n\n          // skip on http error\n          if ('fulfilled' !== response.status) {\n            _this2.state.layers_in_error = true;\n            return;\n          }\n\n          var layer = response.value;\n\n          _this2.state.editableLayers[layer.getId()] = layer;\n\n          /**\n           * attach layer widgets event: get data from api when a field of a layer\n           * is related to a wgis form widget (ex. relation reference, value map, etc..)\n           */\n          layer.getEditingFields().filter(function (field) {\n            return field.input && 'select_autocomplete' === field.input.type && !field.input.options.filter_expression && !field.input.options.usecompleter;\n          })\n          /** @TODO need to avoid to call the same fnc to same event many times to avoid waste server request time */\n          .forEach(function (field) {\n            return ['start-editing', 'show-relation-editing'].forEach(function (type) {\n              var id = layer.getId();\n              _this2.state.events[type][id] = _this2.state.events[type][id] || [];\n              _this2.state.events[type][id].push(_asyncToGenerator(function* () {\n                var options = field.input.options;\n\n                // remove all values\n                options.loading.state = 'loading';\n                options.values = [];\n\n                var relationLayer = options.layer_id && CatalogLayersStoresRegistry.getLayerById(options.layer_id);\n                var has_filter = [undefined, null].indexOf(options.filter_fields || []) > -1 || 0 === (options.filter_fields || []).length;\n\n                try {\n\n                  // relation reference widget + no filter set\n                  if (options.relation_reference && has_filter) {\n                    var _response = yield layer.getFilterData({ fformatter: field.name }); // get data with fformatter\n                    if (_response && _response.data) {\n                      var _options$values;\n\n                      // response data is an array ok key value objects\n                      (_options$values = options.values).push.apply(_options$values, _toConsumableArray(_response.data.map(function (_ref6) {\n                        var _ref7 = _slicedToArray(_ref6, 2),\n                            value = _ref7[0],\n                            key = _ref7[1];\n\n                        return { key: key, value: value };\n                      })));\n                      options.loading.state = 'ready';\n                      _this2.fireEvent('autocomplete', { field: field, data: [_response.data] });\n                      return options.values;\n                    }\n                  }\n\n                  // value map widget\n                  if (relationLayer) {\n                    var _response2 = yield (0, _promisify.promisify)(relationLayer.getDataTable({ ordering: options.key }));\n                    if (_response2 && _response2.features) {\n                      var _options$values2;\n\n                      (_options$values2 = options.values).push.apply(_options$values2, _toConsumableArray((_response2.features || []).map(function (feature) {\n                        return {\n                          key: feature.properties[options.key],\n                          value: feature.properties[options.value]\n                        };\n                      })));\n                      options.loading.state = 'ready';\n                      _this2.fireEvent('autocomplete', { field: field, features: _response2.features });\n                      return options.values;\n                    }\n                  }\n\n                  /** @TODO check if deprecated */\n                  var features = [];\n                  options.loading.state = 'ready';\n                  _this2.fireEvent('autocomplete', { field: field, features: features });\n                  return features;\n                } catch (e) {\n                  console.warn(e);\n                  options.loading.state = 'error';\n                  return Promise.reject(e);\n                }\n              }));\n            });\n          });\n\n          _this2.state.sessions[layer.getId()] = null;\n        });\n\n        var i = 0;\n        this.getLayers().forEach(function (editingLayer) {\n          /**\n           * set 1:1 relations fields editable\n           * \n           * Check if layer has relation 1:1 (type ONE) and if fields\n           *\n           * belong to relation where child layer is editable\n           *\n           * @since g3w-client-plugin-editing@v3.7.0\n           */\n          var fatherId = editingLayer.getId(); // father layer\n          CatalogLayersStoresRegistry.getLayerById(fatherId).getRelations().getArray().filter(function (relation) {\n            return 'ONE' === relation.getType() && fatherId === relation.getFather();\n          }) // 'ONE' == join 1:1 + father layerId is a father of relation\n          .forEach(function (relation) {\n            var isChildEditable = undefined !== _this2.getLayerById(relation.getChild()); // check if child layerId is editable (in editing)\n            _this2.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n              return f.vectorjoin_id && f.vectorjoin_id === relation.getId();\n            }) // father layer fields (in editing)\n            .forEach(function (field) {\n              field.editable = field.editable && isChildEditable;\n            }); // current editable boolean value + child editable layer\n          });\n          // Set editing layer color and toolbox style\n          if (!editingLayer.getColor()) {\n            editingLayer.setColor(editingLayer.isGeoLayer() ? [\"#C43C39\", \"#d95f02\", \"#91522D\", \"#7F9801\", \"#0B2637\", \"#8D5A99\", \"#85B66F\", \"#8D2307\", \"#2B83BA\", \"#7D8B8F\", \"#E8718D\", \"#1E434C\", \"#9B4F07\", '#1b9e77', \"#FF9E17\", \"#7570b3\", \"#204B24\", \"#9795A3\", \"#C94F44\", \"#7B9F35\", \"#373276\", \"#882D61\", \"#AA9039\", \"#F38F3A\", \"#712333\", \"#3B3A73\", \"#9E5165\", \"#A51E22\", \"#261326\", \"#e4572e\", \"#29335c\", \"#f3a712\", \"#669bbc\", \"#eb6841\", \"#4f372d\", \"#cc2a36\", \"#00a0b0\", \"#00b159\", \"#f37735\", \"#ffc425\"][i++ % 40] : '#fff');\n          }\n        });\n\n        // after add layers to layerstore\n        MapLayersStoreRegistry.getLayersStore('editing').addLayers(this.getLayers());\n\n        // create toolboxes\n        this.getLayers().forEach(function (l) {\n          return _this2.addToolBox(new _toolbox.ToolBox(l));\n        });\n\n        // create toolboxes dependencies tree\n        this.state._toolboxes.forEach(function (toolbox) {\n          var layer = toolbox.getLayer();\n          toolbox.setFather(layer.isFather());\n          // get toolbox editing dependencies\n          toolbox.state.editing.dependencies = [].concat(_toConsumableArray(layer.getChildren()), _toConsumableArray(layer.getFathers())).filter(function (layerName) {\n            return undefined !== _this2.getLayerById(layerName);\n          });\n          if (layer.isFather() && toolbox.hasDependencies()) {\n            var layerRelations = layer.getRelations().getRelations();\n            for (var relationName in layerRelations) {\n              toolbox.addRelation(layerRelations[relationName]);\n            }\n          }\n        });\n\n        yield GUI.isReady();\n        this._setupGUI();\n\n        this.setHookLoading({ loading: false });\n        this.setApi(this.service.getApi());\n        this.setReady(true);\n      });\n\n      function _init() {\n        return _ref4.apply(this, arguments);\n      }\n\n      return _init;\n    }()\n\n    // setup plugin interface\n\n  }, {\n    key: '_setupGUI',\n    value: function () {\n      var _ref8 = _asyncToGenerator(function* () {\n        var _this3 = this;\n\n        // skip when ..\n        if (!this.registerPlugin(this.config.gid) || false === this.config.visible) {\n          return;\n        }\n\n        /**\n         * ORIGINAL SOURCE: g3w-client-plugin/toolboxes/toolboxesfactory.js@v3.7.1\n         *\n         * Register query result action: edit selected feature from query results\n         */\n        this.state.editFeatureKey = GUI.getService('queryresults').onafter('editFeature', _asyncToGenerator(function* () {\n          var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n              layer = _ref10.layer,\n              feature = _ref10.feature;\n\n          var fid = feature.attributes[G3W_FID] || feature.id;\n\n          if (undefined === fid) {\n            return;\n          }\n\n          _this3.getToolBoxes().forEach(function (tb) {\n            return tb.setShow(layer.id === tb.getId());\n          });\n          _this3.showEditingPanel();\n\n          _this3.state.showselectlayers = false;\n\n          _this3.subscribe('closeeditingpanel', function () {\n            _this3.state.showselectlayers = true;return { once: true };\n          });\n\n          var toolBox = _this3.getToolBoxById(layer.id);\n          //set selected\n          toolBox.setSelected(true);\n          var session = toolBox.getSession();\n\n          var _toolBox$getEditingCo = toolBox.getEditingConstraints(),\n              scale = _toolBox$getEditingCo.scale; // get scale constraint from setting layer\n\n          var w = void 0;\n\n          // start toolbox (filtered by feature id)\n          try {\n            // check map scale after zoom to feature\n            // if currentScale is more that scale constraint set by layer editing\n            // needs to go to scale setting by layer editing constraint\n            if (scale) {\n              var units = GUI.getService('map').getMapUnits();\n              var map = GUI.getService('map').getMap();\n              var currentScale = parseInt(getScaleFromResolution(map.getView().getResolution(), GUI.getService('map').getMapUnits()));\n              if (currentScale > scale) {\n                map.getView().setResolution(getResolutionFromScale(scale, units));\n              }\n            }\n\n            yield (0, _promisify.promisify)(toolBox.start({ filter: { fids: fid } }));\n\n            var _layer = toolBox.getLayer();\n            var source = _layer.getEditingLayer().getSource();\n            var is_vector = _layer.getType() === Layer.LayerTypes.VECTOR;\n\n            // get feature from an Editing layer source (with styles)\n            var features = is_vector ? source.getFeatures() : source.readFeatures();\n            var _feature = features.find(function (f) {\n              return fid == f.getId();\n            });\n\n            // skip when not feature is get from server\n            if (!_feature) {\n              return;\n            }\n\n            var geom = _feature.getGeometry();\n\n            // feature has geometry ‚Üí zoom to geometry\n            if (geom) {\n              GUI.getService('map').zoomToGeometry(geom);\n            }\n\n            _this3.state.toolboxselected = toolBox;\n\n            var addPartTool = is_vector && !geom && toolBox.getTools().find(function (t) {\n              return 'addPart' === t.getId();\n            });\n\n            // check if layer is single geometry. Need to show and change behaviour\n            if (addPartTool && !Geometry.isMultiGeometry(_layer.getGeometryType())) {\n              addPartTool.visible = true;\n            }\n\n            // add geometry when vector layer feature has no geometry\n            if (addPartTool) {\n              //get workflow\n              var op = addPartTool.getOperator();\n              var _w = new _workflow.Workflow({\n                type: 'drawgeometry',\n                helpMessage: 'editing.workflow.steps.draw_geometry',\n                steps: [new _workflows.AddFeatureStep({\n                  add: false,\n                  steps: {\n                    addfeature: {\n                      description: 'editing.workflow.steps.draw_geometry'\n                    }\n                  },\n                  onRun: function onRun(_ref11) {\n                    var inputs = _ref11.inputs,\n                        context = _ref11.context;\n\n                    _w.emit('settoolsoftool', [{\n                      type: 'snap',\n                      options: {\n                        layerId: inputs.layer.getId(),\n                        source: inputs.layer.getEditingLayer().getSource(),\n                        active: true\n                      }\n                    }]);\n                    _w.emit('active', ['snap']);\n                  },\n                  onStop: function onStop() {\n                    return _w.emit('deactive', ['snap']);\n                  }\n                }),\n                // add part to multi geometries\n                new _step.Step({ run: _addPartToMultigeometries.addPartToMultigeometries })],\n                registerEscKeyEvent: true\n              });\n\n              addPartTool.setOperator(_w);\n\n              _this3.subscribe('closeeditingpanel', function () {\n                addPartTool.setOperator(op);\n                addPartTool.visible = Geometry.isMultiGeometry(_layer.getGeometryType());\n              });\n            }\n\n            /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editnopickmapfeatureattributesworkflow.js@v3.7.1 */\n            w = new _workflow.Workflow({\n              type: 'editnopickmapfeatureattributes',\n              runOnce: true,\n              helpMessage: 'editing.tools.update_feature',\n              steps: [new _workflows.OpenFormStep()]\n            });\n\n            yield (0, _promisify.promisify)(w.start({\n              inputs: { layer: _layer, features: [_feature] },\n              context: { session: session }\n            }));\n\n            yield (0, _promisify.promisify)(session.save());\n\n            _this3.saveChange();\n          } catch (e) {\n            console.warn(e);\n            session.rollback();\n            //set select only here otherwise is show editing constraint\n            toolBox.setSelected(false);\n            _this3.state.toolboxselected = null;\n          } finally {\n            w.stop();\n          }\n        }));\n\n        this.config.name = this.config.name || \"plugins.editing.editing_data\";\n        this.addToolGroup({ position: 0, title: 'EDITING' });\n        this.addTools({\n          action: this.showEditingPanel,\n          offline: false,\n          icon: 'pencil'\n        }, { position: 0, title: 'EDITING' });\n      });\n\n      function _setupGUI() {\n        return _ref8.apply(this, arguments);\n      }\n\n      return _setupGUI;\n    }()\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     * \n     * Get session\n     *\n     * @param layerId\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getSession',\n    value: function getSession() {\n      var _ref12 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref12.layerId;\n\n      return this.getToolBoxById(layerId).getSession();\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     *\n     * @param layerId\n     *\n     * @returns Feature in editing\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getFeature',\n    value: function getFeature() {\n      var _ref13 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref13.layerId;\n\n      return this.getToolBoxById(layerId).getActiveTool().getLayer().features[0];\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     * \n     * Subscribe handler function on event\n     *\n     * @param event\n     * @param { Function } fnc\n     *\n     * @returns { Function } function\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(event, fnc) {\n      if (!this.state.subscribers[event]) this.state.subscribers[event] = [];\n      if (!this.state.subscribers[event].find(function (subscribe) {\n        return subscribe === fnc;\n      })) this.state.subscribers[event].push(fnc);\n      return fnc;\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.8\n     * \n     * Unsubscribe handler function on event\n     *\n     * @param event\n     * @param fnc\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(event, fnc) {\n      this.state.subscribers[event] = this.state.subscribers[event].filter(function (subscribe) {\n        return subscribe !== fnc;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param event\n     * @param options\n     *\n     * @returns { Promise<unknown> }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'fireEvent',\n    value: function () {\n      var _ref14 = _asyncToGenerator(function* (event) {\n        var _this4 = this;\n\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        if (this.state.subscribers[event]) {\n          this.state.subscribers[event].forEach(function (fnc) {\n            var response = fnc(options);\n            if (response && response.once) {\n              _this4.unsubscribe(event, fnc);\n            }\n          });\n        }\n      });\n\n      function fireEvent(_x5) {\n        return _ref14.apply(this, arguments);\n      }\n\n      return fireEvent;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Undo method\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var _this5 = this;\n\n      var session = this.state.toolboxselected.getSession();\n      var layerId = session.getId();\n      var sessionItems = session.getLastHistoryState().items;\n\n      this.undoRedoLayerUniqueFieldValues({\n        layerId: layerId,\n        sessionItems: sessionItems,\n        action: 'undo'\n      });\n\n      var undoItems = session.undo();\n\n      this.undoRedoRelationUniqueFieldValues({\n        relationSessionItems: undoItems,\n        action: 'undo'\n      });\n\n      // undo relations\n      Object.entries(undoItems).forEach(function (_ref15) {\n        var _ref16 = _slicedToArray(_ref15, 2),\n            toolboxId = _ref16[0],\n            items = _ref16[1];\n\n        _this5.getToolBoxById(toolboxId).getSession().undo(items);\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'redo',\n    value: function redo() {\n      var _this6 = this;\n\n      var session = this.state.toolboxselected.getSession();\n      var layerId = session.getId();\n      var sessionItems = session.getLastHistoryState().items;\n      this.undoRedoLayerUniqueFieldValues({\n        layerId: layerId,\n        sessionItems: sessionItems,\n        action: 'redo'\n      });\n      var redoItems = session.redo();\n\n      this.undoRedoRelationUniqueFieldValues({\n        relationSessionItems: redoItems,\n        action: 'redo'\n      });\n\n      // redo relations\n      Object.entries(redoItems).forEach(function (_ref17) {\n        var _ref18 = _slicedToArray(_ref17, 2),\n            toolboxId = _ref18[0],\n            items = _ref18[1];\n\n        _this6.getToolBoxById(toolboxId).getSession().redo(items);\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param id\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getEditingLayer',\n    value: function getEditingLayer(id) {\n      return this.state.editableLayers[id].getEditingLayer();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param toolbox\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addToolBox',\n    value: function addToolBox(toolbox) {\n      this.state._toolboxes.push(toolbox);\n      this.state.sessions[toolbox.getId()] = toolbox.getSession(); // add session\n      this.state.toolboxes.push(toolbox.state);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } handler\n     * @param handler.type\n     * @param handler.id\n     *\n     * @returns { Promise<void> }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'runEventHandler',\n    value: function () {\n      var _ref19 = _asyncToGenerator(function* () {\n        var _ref20 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            type = _ref20.type,\n            id = _ref20.id;\n\n        if (this.state.events[type] && this.state.events[type][id]) {\n          yield Promise.allSettled(this.state.events[type][id].map(function (fnc) {\n            return fnc();\n          }));\n        }\n      });\n\n      function runEventHandler() {\n        return _ref19.apply(this, arguments);\n      }\n\n      return runEventHandler;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Reset default values\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'resetDefault',\n    value: function resetDefault() {\n      this.state.saveConfig = {\n        mode: \"default\", // default, autosave\n        modal: false,\n        messages: undefined, // object to set a custom message\n        cb: {\n          done: function done() {}, // function Called after save\n          error: function error() {} // function called affect commit error\n        }\n      };\n      GUI.getService('map').disableClickMapControls(false);\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Reset default toolbox state modified by other plugin\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'resetAPIDefault',\n    value: function resetAPIDefault() {\n      var _ref21 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref21$plugin = _ref21.plugin,\n          plugin = _ref21$plugin === undefined ? true : _ref21$plugin,\n          _ref21$toolboxes = _ref21.toolboxes,\n          toolboxes = _ref21$toolboxes === undefined ? true : _ref21$toolboxes;\n\n      if (toolboxes) {\n        this.getToolBoxes().forEach(function (tb) {\n          tb.resetDefault();\n        });\n      }\n      if (plugin) {\n        this.resetDefault();\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @returns { Array }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getLayers',\n    value: function getLayers() {\n      return Object.values(this.state.editableLayers);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { string } layerId\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getLayerById',\n    value: function getLayerById(layerId) {\n      return this.state.editableLayers[layerId];\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { string } toolboxId\n     *\n     * @returns {*}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getToolBoxById',\n    value: function getToolBoxById(toolboxId) {\n      return this.state._toolboxes.find(function (tb) {\n        return tb.getId() === toolboxId;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Get layer session by id (layer id is the same of session)\n     *\n     * @param id\n     *\n     * @returns {*}\n     *\n     * @since g3w-client-plugin-editing@v3.7.0\n     */\n\n  }, {\n    key: 'getSessionById',\n    value: function getSessionById(id) {\n      return this.state.sessions[id];\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Method to apply filter editing contsraint to toolbox editing\n     * Apply filter editing contsraint to toolbox editing\n     *\n     * @param constraints\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setApplicationEditingConstraints',\n    value: function setApplicationEditingConstraints() {\n      var _this7 = this;\n\n      var constraints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { showToolboxesExcluded: true, toolboxes: {} };\n\n      this.state.constraints = _extends({}, this.state.constraints, constraints);\n\n      var toolboxes = constraints.toolboxes,\n          showToolboxesExcluded = constraints.showToolboxesExcluded;\n\n      var toolboxIds = Object.keys(toolboxes);\n      if (false === showToolboxesExcluded) {\n        this.state.toolboxes.forEach(function (toolbox) {\n          return toolbox.show = toolboxIds.indexOf(toolbox.id) !== -1;\n        });\n      }\n      toolboxIds.forEach(function (toolboxId) {\n        return _this7.getToolBoxById(toolboxId).setEditingConstraints(toolboxes[toolboxId]);\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @returns { Array }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getToolBoxes',\n    value: function getToolBoxes() {\n      return this.state._toolboxes;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @returns {*|{}}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'getEditableLayers',\n    value: function getEditableLayers() {\n      return this.state.editableLayers;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Stop editing\n     *\n     * @returns { Promise<unknown> }\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'stop',\n    value: function () {\n      var _ref22 = _asyncToGenerator(function* () {\n        var _this8 = this;\n\n        var commitpromises = [];\n        this.state._toolboxes.forEach(function (toolbox) {\n          // check if temp changes are waiting to save on server\n          if (toolbox.getSession().getHistory().state.commit) {\n            // ask to commit before exit\n            commitpromises.push(_this8.commit({ toolbox: toolbox, modal: true }));\n          }\n        });\n        try {\n          yield (0, _promisify.promisify)($.when.apply(this, commitpromises));\n        } catch (e) {\n          console.warn(e);\n        }\n        this.state._toolboxes.forEach(function (toolbox) {\n          return toolbox.stop();\n        });\n        this.state.toolboxselected = null;\n        this.state.toolboxidactivetool = null;\n        this.state.message = null;\n        GUI.getService('map').refreshMap();\n      });\n\n      function stop() {\n        return _ref22.apply(this, arguments);\n      }\n\n      return stop;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Function called very single change saved temporary\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'saveChange',\n    value: function () {\n      var _ref23 = _asyncToGenerator(function* () {\n        if ('autosave' === this.state.saveConfig.mode) {\n          return this.commit({ modal: false }); // set to not show modal ask window\n        }\n      });\n\n      function saveChange() {\n        return _ref23.apply(this, arguments);\n      }\n\n      return saveChange;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * Commit and save changes on server persistently\n     *\n     * @param { Object } commit\n     * @param commit.toolbox\n     * @param commit.commitItems\n     * @param commit.messages\n     * @param commit.done\n     * @param { boolean } commit.modal\n     * @param { boolean } commit.close\n     *\n     * @returns jQuery promise\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit() {\n      var _this10 = this;\n\n      var _ref24 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          toolbox = _ref24.toolbox,\n          commitItems = _ref24.commitItems,\n          _ref24$modal = _ref24.modal,\n          modal = _ref24$modal === undefined ? true : _ref24$modal,\n          _ref24$close = _ref24.close,\n          close = _ref24$close === undefined ? false : _ref24$close;\n\n      var messages = Object.assign({ success: { message: \"plugins.editing.messages.saved\", autoclose: true }, error: {} }, this.state.saveConfig.messages || {});\n      toolbox = toolbox || this.state.toolboxselected;\n      var layer = toolbox.getLayer();\n      var items = commitItems;\n      commitItems = commitItems || toolbox.getSession().getCommitItems();\n      var online = ApplicationState.online;\n      var has_changes = [].concat(_toConsumableArray(commitItems.add || []), _toConsumableArray(commitItems.delete || []), _toConsumableArray(commitItems.update || []), _toConsumableArray(Object.keys(commitItems.relations || {}))).length;\n      var workflow = void 0,\n          dialog = void 0,\n          serverError = void 0;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n\n        // skip when there is nothing to save\n        if (!has_changes) {\n          GUI.showUserMessage({ type: 'info', message: 'Nothing to save', autoclose: true, closable: false });\n          return toolbox;\n        }\n\n        try {\n\n          // show commit modal window\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8 */\n          if (modal) {\n            workflow = new _workflow.Workflow({\n              type: 'commitfeatures',\n              steps: [\n              // confirm step\n              new _step.Step({\n                run: function run(inputs) {\n                  var _this9 = this;\n\n                  return $.Deferred(function (d) {\n                    var dialog = GUI.dialog.dialog({\n                      message: inputs.message,\n                      title: tPlugin(\"editing.messages.commit_feature\") + ': \"' + inputs.layer.getName() + '\"',\n                      buttons: _extends({\n                        SAVE: { className: \"btn-success\", callback: function callback() {\n                            d.resolve(inputs);\n                          },\n                          label: t(\"save\") },\n                        CANCEL: { className: \"btn-danger\", callback: function callback() {\n                            d.reject();\n                          },\n                          label: t(inputs.close ? \"exitnosave\" : \"annul\") }\n                      }, inputs.close ? { CLOSEMODAL: { className: \"btn-primary\", callback: function callback() {\n                            dialog.modal('hide');\n                          },\n                          label: t(\"annul\") } } : {})\n                    });\n                    if (inputs.features) {\n                      (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: d.promise(), inputs: inputs, style: _this9.selectStyle });\n                    }\n                  }).promise();\n                }\n              })]\n            });\n\n            yield (0, _promisify.promisify)(workflow.start({\n              inputs: {\n                close: close,\n                layer: layer,\n                message: new (Vue.extend(require('./components/Changes.vue')))({\n                  propsData: {\n                    commits: commitItems,\n                    layer: layer\n                  } }).$mount().$el\n              }\n            }));\n\n            yield (0, _promisify.promisify)(workflow.stop());\n\n            //in case of online application\n            if (online) {\n              dialog = GUI.dialog.dialog({\n                message: '<h4 class=\"text-center\">\\n                          <i style=\"margin-right: 5px;\" class=' + GUI.getFontClass('spinner') + '></i>' + tPlugin('editing.messages.saving') + '\\n                        </h4>',\n                closeButton: false\n              });\n            }\n          }\n\n          var data = !online && _defineProperty({}, toolbox.getSession().getId(), commitItems);\n          //get current offline editing changes\n          var changes = !online && ApplicationService.getOfflineItem('EDITING_CHANGES');\n\n          // handle offline changes\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8 */\n          Object.keys(changes || {}).forEach(function (layerId) {\n            var currLayerId = Object.keys(data)[0];\n\n            // check if previous changes are made in the same layer or in relationlayer of current\n            var current = null;\n\n            if (data[layerId]) {\n              current = data;\n            } else if (data[currLayerId].relations[layerId]) {\n              current = data[currLayerId].relations;\n            }\n\n            // check if in the last changes\n            var relationsIds = !current && Object.keys(changes[layerId].relations || {});\n            var has_relations = !current && relationsIds.length > 0;\n            var GIVE_ME_A_NAME = !current && has_relations && relationsIds.includes(currLayerId);\n\n            // apply changes\n            if (current || GIVE_ME_A_NAME) {\n              var id = current ? layerId : currLayerId;\n              var curr = current ? current : data;\n              var prev = current ? changes : changes[layerId].relations;\n              curr[id].add = [].concat(_toConsumableArray(curr[id].add), _toConsumableArray(curr[id].add));\n              curr[id].delete = [].concat(_toConsumableArray(curr[id].delete), _toConsumableArray(curr[id].delete));\n              (prev[id].update || []).filter(function (update) {\n                return !curr[id].update.find(function (u) {\n                  return u.id === update.id;\n                });\n              }).forEach(function (update) {\n                return curr[id].update.unshift(update);\n              });\n              (prev[id].lockids || []).filter(function (lock) {\n                return !curr[id].lockids.find(function (l) {\n                  return l.featureid === lock.featureid;\n                });\n              }).forEach(function (lock) {\n                return curr[id].update.unshift(lock);\n              });\n            }\n\n            if (GIVE_ME_A_NAME) {\n              changes[layerId].relations[currLayerId] = data[currLayerId];\n              data = changes;\n            }\n            if (!current && !has_relations) {\n              data[layerId] = changes[layerId];\n            }\n          });\n\n          if (!online) {\n\n            GUI.showUserMessage({\n              type: 'success',\n              message: \"plugins.editing.messages.saved_local\",\n              autoclose: true\n            });\n            toolbox.getSession().clearHistory();\n          }\n\n          // check if the application is online\n\n          var _ref27 = online ? yield (0, _promisify.promisify)(toolbox.getSession().commit({ items: items || commitItems, __esPromise: true })) : {},\n              commit = _ref27.commit,\n              response = _ref27.response;\n\n          //check if is online and there are some commit items\n\n\n          var online2 = online && commit;\n\n          var result = online2 && response.result;\n\n          if (result && messages && messages.success) {\n            // hide saving dialog\n            if (dialog) {\n              dialog.modal('hide');\n            }\n\n            GUI.showUserMessage({\n              type: 'success',\n              message: messages.success.message || \"plugins.editing.messages.saved\",\n              duration: 2000,\n              autoclose: undefined !== messages.success.autoclose ? messages.success.autoclose : true\n            });\n          }\n\n          // In the case of vector layer need to refresh map commit changes\n          if (result && Layer.LayerTypes.VECTOR === layer.getType()) {\n            GUI.getService('map').refreshMap({ force: true });\n          }\n\n          if (online) {\n            _this10.state.saveConfig.cb.done(toolbox);\n          }\n\n          // add items when close editing to results to show changes\n          var layerId = result && toolbox.getId();\n\n          if (layerId) {\n            _this10.state.featuresOnClose[layerId] = _this10.state.featuresOnClose[layerId] || new Set();\n          }\n\n          if (result) {\n            [].concat(_toConsumableArray(response.response.new.map(function (n) {\n              return n.id;\n            })), _toConsumableArray(commit.update.map(function (u) {\n              return u.id;\n            }))).forEach(function (fid) {\n              return _this10.state.featuresOnClose[layerId].add(fid);\n            });\n          }\n\n          // @since 3.7.2 - click on save all disk icon (editing form relation)\n          if (result) {\n            _this10.emit('commit', response.response);\n          }\n\n          // result is false. An error occurs\n          if (online2 && !result) {\n            serverError = true;\n            throw response;\n          }\n        } catch (e) {\n          console.warn(e);\n\n          // hide saving dialog\n          if (dialog) {\n            dialog.modal('hide');\n          }\n\n          // rollback relations\n          if (modal) {\n            try {\n              yield _rollback(commitItems.relations);\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n\n          // parse server error\n          if (serverError || modal) {\n            var message = online ? messages.error.message || new serverErrorParser({ error: e.errors || e || {} }).parse({ type: 'String' }) : e;\n\n            GUI.showUserMessage({\n              type: 'alert',\n              message: message,\n              textMessage: online ? !messages.error.message : true,\n              autoclose: online ? undefined !== messages.error.autoclose ? messages.error.autoclose : false : false\n            });\n\n            _this10.state.saveConfig.cb.error(toolbox, message);\n          }\n\n          return Promise.reject(toolbox);\n        }\n        return toolbox;\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } opts\n     * @param { string } opts.layerId\n     * @param { Array }  opts.sessionItems\n     * @param opts.action\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'undoRedoLayerUniqueFieldValues',\n    value: function undoRedoLayerUniqueFieldValues(_ref28) {\n      var _this11 = this;\n\n      var layerId = _ref28.layerId,\n          _ref28$sessionItems = _ref28.sessionItems,\n          sessionItems = _ref28$sessionItems === undefined ? [] : _ref28$sessionItems,\n          action = _ref28.action;\n\n\n      // if not set\n      if (undefined === this.state.uniqueFieldsValues[layerId]) {\n        return;\n      }\n\n      sessionItems.forEach(function (item) {\n\n        Object.keys(_this11.state.uniqueFieldsValues[layerId]).forEach(function (name) {\n          var is_array = Array.isArray(item);\n          var oldVal = void 0,\n              newVal = void 0;\n          if (is_array) {\n            // 0 = old feature, 1 = new feature\n            var has_change = item[1].feature.get(name) != item[0].feature.get(name);\n            // update feature that contains \"new\" and \"old\" values of feature\n            oldVal = has_change ? action === 'undo' ? item[1].feature.get(name) : item[0].feature.get(name) : undefined;\n            newVal = has_change ? action === 'undo' ? item[0].feature.get(name) : item[1].feature.get(name) : undefined;\n          } else {\n            oldVal = 'add' === item.feature.getState() ? item.feature.get(name) : undefined;\n            newVal = 'delete' === item.feature.getState() ? item.feature.get(name) : undefined;\n          }\n          // delete layer unique field value\n          if (undefined !== oldVal) {\n            _this11.state.uniqueFieldsValues[layerId][name].delete(oldVal);\n          }\n          // add layer unique field value\n          if (undefined !== newVal) {\n            _this11.state.uniqueFieldsValues[layerId][name].add(newVal);\n          }\n        });\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } opts\n     * @param opts.relationSessionItems\n     * @param opts.action\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'undoRedoRelationUniqueFieldValues',\n    value: function undoRedoRelationUniqueFieldValues(_ref29) {\n      var _this12 = this;\n\n      var relationSessionItems = _ref29.relationSessionItems,\n          action = _ref29.action;\n\n      Object.entries(relationSessionItems).forEach(function (_ref30) {\n        var _ref31 = _slicedToArray(_ref30, 2),\n            layerId = _ref31[0],\n            _ref31$ = _ref31[1],\n            sessionItems = _ref31$.own,\n            relationSessionItems = _ref31$.dependencies;\n\n        _this12.undoRedoLayerUniqueFieldValues({\n          layerId: layerId,\n          sessionItems: sessionItems,\n          action: action\n        });\n        _this12.undoRedoRelationUniqueFieldValues({\n          relationSessionItems: relationSessionItems,\n          action: action\n        });\n      });\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Stop editing on layerId\n     *\n     * @param layerId\n     * @param options\n     *\n     * @returns { Promise<unknown> }\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'stopEditing',\n    value: function () {\n      var _ref32 = _asyncToGenerator(function* (layerId) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        return (0, _promisify.promisify)(this.getToolBoxById(layerId).stop(options));\n      });\n\n      function stopEditing(_x11) {\n        return _ref32.apply(this, arguments);\n      }\n\n      return stopEditing;\n    }()\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Start editing API\n     *\n     * @param layerId\n     * @param { Object } options\n     * @param { boolean } [options.selected=true]\n     * @param { boolean } [options.disablemapcontrols=false]\n     * @param { boolean } [options.showselectlayers=true]\n     * @param options.title\n     *\n     * @returns { Promise<unknown> }\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'startEditing',\n    value: function () {\n      var _ref33 = _asyncToGenerator(function* (layerId) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        options.selected = undefined === options.selected ? true : options.selected;\n        options.showselectlayers = undefined === options.showselectlayers ? true : options.showselectlayers;\n        options.disablemapcontrols = undefined === options.disablemapcontrols ? false : options.showselectlayers;\n        // get toolbox related to layer id\n        var toolbox = this.getToolBoxById(layerId);\n        // set show select layers input visibility\n        this.state.showselectlayers = options.showselectlayers;\n        // skip when ..\n        if (!toolbox) {\n          return Promise.reject();\n        }\n        // set selected\n        toolbox.setSelected(options.selected);\n        // set seletcted toolbox\n        if (options.selected) {\n          this.state.toolboxselected = toolbox;\n        }\n        if (options.title) {\n          toolbox.setTitle(options.title);\n        }\n        // start editing toolbox (options contain also filter type)\n        data = yield (0, _promisify.promisify)(toolbox.start(options));\n        // disablemapcontrols in conflict\n        if (options.disablemapcontrols) {\n          GUI.getService('map').disableClickMapControls(true);\n        }\n        // opts contain information about start editing has features loaded\n        return data ? { toolbox: toolbox, data: data } : toolbox;\n      });\n\n      function startEditing(_x14) {\n        return _ref33.apply(this, arguments);\n      }\n\n      return startEditing;\n    }()\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Add Feature\n     *\n     * @param { Object } opts\n     * @param opts.layerId\n     * @param opts.feature\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'addLayerFeature',\n    value: function addLayerFeature() {\n      var _this13 = this;\n\n      var _ref34 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref34.layerId,\n          feature = _ref34.feature;\n\n      // skip when mandatory params are missing\n      if (undefined === feature || undefined === layerId) {\n        return Promise.reject();\n      }\n      return new Promise(function (resolve, reject) {\n        var layer = _this13.getLayerById(layerId);\n        // get session\n        var session = _this13.getSessionById(layerId);\n        // exclude an eventually attribute pk (primary key) not editable (mean autoincrement)\n        var attributes = layer.getEditingFields().filter(function (attr) {\n          return !(attr.pk && !attr.editable);\n        });\n        // start session (get no features but set layer in editing)\n        session.start({\n          filter: {\n            nofeatures: true, // no feature\n            nofeatures_field: attributes[0].name // get first field in editing form\n          },\n          editing: true\n        });\n\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/easyaddfeatureworkflow.js@v3.7.1 */\n        // create workflow\n        var workflow = new _workflow.Workflow({\n          type: 'addfeature',\n          steps: [new _workflows.OpenFormStep({\n            push: true,\n            showgoback: false,\n            saveAll: false\n          })]\n        });\n\n        var stop = function stop(cb) {\n          workflow.stop();\n          session.stop();\n          return cb();\n        };\n\n        try {\n          //check if feature has property of layer\n          attributes.forEach(function (a) {\n            if (undefined === feature.get(a.name)) {\n              feature.set(a.name, null);\n            }\n          });\n\n          //set feature as g3w feature\n          feature = new Feature({ feature: feature, properties: attributes.map(function (a) {\n              return a.name;\n            }) });\n          //set new\n          feature.setTemporaryId();\n\n          // add to session and source as new feature\n          session.pushAdd(layerId, feature, false);\n          layer.getEditingLayer().getSource().addFeature(feature);\n\n          //start workflow\n          workflow.start({\n            inputs: { layer: layer, features: [feature] },\n            context: { session: session }\n          }).then(function () {\n            session.save();\n            _this13.commit({ modal: false, toolbox: _this13.getToolBoxById(layerId) }).then(function () {\n              return stop(resolve);\n            }).fail(function () {\n              return stop(reject);\n            });\n          }).fail(function () {\n            return stop(reject);\n          });\n        } catch (e) {\n          console.warn(e);\n          reject();\n        }\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n     * \n     * @param { Object } save\n     * @param save.mode     - default or autosave\n     * @param save.cb       - object contain done/error two functions\n     * @param save.modal    - Boolean true or false to show to ask\n     * @param save.messages - object success or error\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setSaveConfig',\n    value: function setSaveConfig() {\n      var _ref35 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref35$mode = _ref35.mode,\n          mode = _ref35$mode === undefined ? 'default' : _ref35$mode,\n          _ref35$cb = _ref35.cb,\n          cb = _ref35$cb === undefined ? {} : _ref35$cb,\n          _ref35$modal = _ref35.modal,\n          modal = _ref35$modal === undefined ? false : _ref35$modal,\n          messages = _ref35.messages;\n\n      Object.assign(this.state.saveConfig, { mode: mode, modal: modal, messages: messages, cb: _extends({}, this.state.saveConfig.cb, cb) });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8 \n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'addFormComponents',\n    value: function addFormComponents() {\n      var _ref36 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          layerId = _ref36.layerId,\n          _ref36$components = _ref36.components,\n          components = _ref36$components === undefined ? [] : _ref36$components;\n\n      this.state.formComponents[layerId] = (this.state.formComponents[layerId] || []).concat(components);\n    }\n\n    /**\n     * [API Method] ORIGINAL SOURCE: g3w-client-plugin-editing/api/index.js@v3.7.1\n     *\n     * Show editing panel\n     *\n     * @param options\n     * @param options.toolboxes\n     *\n     * @since g3w-client-plugin-editing@v3.7.2\n     */\n\n  }, {\n    key: 'showPanel',\n    value: function showPanel() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (options.toolboxes && Array.isArray(options.toolboxes)) {\n        this.getToolBoxes().forEach(function (tb) {\n          return tb.setShow(-1 !== options.toolboxes.indexOf(tb.getId()));\n        });\n      }\n      this.showEditingPanel(options);\n    }\n\n    /**\n     * Show editing panel toolbars\n     * \n     * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/editing.js.js@v3.6\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/panel.js.js@v3.6\n     */\n\n  }, {\n    key: 'showEditingPanel',\n    value: function showEditingPanel() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this.getLayers().length > 0) {\n        this.state.panel = new Panel(_extends({}, opts, {\n          id: \"editing-panel\",\n          title: opts.title || \"plugins.editing.editing_data\",\n          internalPanel: new (Vue.extend(require('./components/Editing.vue')))({\n            service: this,\n            resourcesurl: opts.resourcesUrl || GUI.getResourcesUrl(),\n            showcommitbar: undefined !== opts.showcommitbar ? opts.showcommitbar : true\n          })\n        }));\n        GUI.showPanel(this.state.panel);\n        if (!this.state.show_errors && this.state.layers_in_error) {\n          GUI.showUserMessage({ type: 'warning', message: 'plugins.editing.errors.some_layers', closable: true });\n          this.state.show_errors = true;\n        }\n      } else {\n        GUI.showUserMessage({ type: 'alert', message: 'plugins.editing.errors.no_layers' });\n      }\n      return this.state.panel;\n    }\n  }, {\n    key: 'hideEditingPanel',\n    value: function hideEditingPanel() {\n      if (null !== this.state.panel) {\n        GUI.closePanel();\n        this.state.panel = null;\n      }\n    }\n  }, {\n    key: 'unload',\n    value: function unload() {\n      this.hideEditingPanel();\n      if (this.config.visible) {\n        this.removeTools();\n      }\n      this.state.unwatchLayout();\n      MapLayersStoreRegistry.removeLayersStore(MapLayersStoreRegistry.getLayersStore('editing'));\n      _toolbox.ToolBox.clear();\n      // turn off events\n      GUI.getService('map').off('mapcontrol:toggled', this.state.onMapControlToggled);\n      // unregister query result action\n      GUI.getService('queryresults').un('editFeature', this.state.editFeatureKey);\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'setCurrentLayout',\n    value: function setCurrentLayout() {\n      ApplicationService.setCurrentLayout(this.getName());\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'resetCurrentLayout',\n    value: function resetCurrentLayout() {\n      ApplicationService.setCurrentLayout(this.state.currentLayout);\n    }\n  }]);\n\n  return _class;\n}(Plugin))();\n\n},{\"./components/Changes.vue\":2,\"./components/Editing.vue\":6,\"./g3wsdk\":14,\"./g3wsdk/workflow/step\":15,\"./g3wsdk/workflow/workflow\":16,\"./i18n\":21,\"./toolboxes/toolbox\":27,\"./utils/addPartToMultigeometries\":28,\"./utils/createFeature\":38,\"./utils/getEditingLayerById\":41,\"./utils/getProjectLayerFeatureById\":47,\"./utils/promisify\":57,\"./utils/setAndUnsetSelectedFeaturesStyle\":58,\"./workflows\":63}],26:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @see https://openlayers.org/en/v5.3.0/apidoc/module-ol_interaction_Pointer.html\n */\nvar PickFeaturesInteraction = exports.PickFeaturesInteraction = function (_ol$interaction$Point) {\n  _inherits(PickFeaturesInteraction, _ol$interaction$Point);\n\n  function PickFeaturesInteraction() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PickFeaturesInteraction);\n\n    var features = []; // picked features\n\n    var featuresAtPixel = function featuresAtPixel() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          pixel = _ref.pixel,\n          map = _ref.map;\n\n      return map.getFeaturesAtPixel(pixel, {\n        layerFilter: function layerFilter(l) {\n          return l === options.layer;\n        },\n        hitTolerance: isMobile && isMobile.any ? 10 : 0\n      });\n    };\n\n    return _possibleConstructorReturn(this, (PickFeaturesInteraction.__proto__ || Object.getPrototypeOf(PickFeaturesInteraction)).call(this, {\n      handleDownEvent: function handleDownEvent(e) {\n        features = featuresAtPixel(e);\n        return features;\n      },\n      handleUpEvent: function handleUpEvent(e) {\n        if (features && features.length) {\n          this.dispatchEvent({ type: 'picked', features: features, coordinate: e.coordinate, layer: options.layer });\n        }\n        return true;\n      },\n      handleMoveEvent: function handleMoveEvent(e) {\n        e.map.getTargetElement().style.cursor = featuresAtPixel(e) ? 'pointer' : '';\n      }\n    }));\n  }\n\n  return PickFeaturesInteraction;\n}(ol.interaction.Pointer);\n\n},{}],27:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ToolBox = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _eventbus = require('../eventbus');\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _step = require('../g3wsdk/workflow/step');\n\nvar _createEditingDataOptions = require('../utils/createEditingDataOptions');\n\nvar _setLayerUniqueFieldValues = require('../utils/setLayerUniqueFieldValues');\n\nvar _getRelationsInEditing = require('../utils/getRelationsInEditing');\n\nvar _getRelationId = require('../utils/getRelationId');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('../utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _chooseFeature = require('../utils/chooseFeature');\n\nvar _cloneFeature = require('../utils/cloneFeature');\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _getNotEditableFieldsNoPkValues = require('../utils/getNotEditableFieldsNoPkValues');\n\nvar _getDeltaXY = require('../utils/getDeltaXY');\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _convertFeaturesGeometryToGeometryTypeOfLayer = require('../utils/convertFeaturesGeometryToGeometryTypeOfLayer');\n\nvar _getProjectLayerFeatureById = require('../utils/getProjectLayerFeatureById');\n\nvar _addTableFeature = require('../utils/addTableFeature');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _getRelationsInEditingByFeature = require('../utils/getRelationsInEditingByFeature');\n\nvar _isPointOnVertex = require('../utils/isPointOnVertex');\n\nvar _handleSplitFeature = require('../utils/handleSplitFeature');\n\nvar _addPartToMultigeometries = require('../utils/addPartToMultigeometries');\n\nvar _checkSessionItems = require('../utils/checkSessionItems');\n\nvar _promisify = require('../utils/promisify');\n\nvar _unlinkRelation = require('../utils/unlinkRelation');\n\nvar _workflows = require('../workflows');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nObject.entries({\n  Workflow: _workflow.Workflow,\n  OpenFormStep: _workflows.OpenFormStep,\n  SelectElementsStep: _workflows.SelectElementsStep,\n  PickFeatureStep: _workflows.PickFeatureStep,\n  MoveFeatureStep: _workflows.MoveFeatureStep,\n  ModifyGeometryVertexStep: _workflows.ModifyGeometryVertexStep,\n  OpenTableStep: _workflows.OpenTableStep,\n  AddFeatureStep: _workflows.AddFeatureStep\n}).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n\n  return console.assert(undefined !== v, k + ' is undefined');\n});\n\nvar G3W_FID = g3wsdk.constant.G3W_FID;\nvar _g3wsdk$core = g3wsdk.core,\n    ApplicationState = _g3wsdk$core.ApplicationState,\n    G3WObject = _g3wsdk$core.G3WObject;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar Geometry = g3wsdk.core.geometry.Geometry;\nvar _g3wsdk$core$geoutils = g3wsdk.core.geoutils,\n    dissolve = _g3wsdk$core$geoutils.dissolve,\n    isSameBaseGeometryType = _g3wsdk$core$geoutils.isSameBaseGeometryType,\n    multiGeometryToSingleGeometries = _g3wsdk$core$geoutils.multiGeometryToSingleGeometries,\n    singleGeometriesToMultiGeometry = _g3wsdk$core$geoutils.singleGeometriesToMultiGeometry,\n    splitFeatures = _g3wsdk$core$geoutils.splitFeatures;\nvar removeZValueToOLFeatureGeometry = g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\nvar Layer = g3wsdk.core.layer.Layer;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar _g3wsdk$core$utils = g3wsdk.core.utils,\n    debounce = _g3wsdk$core$utils.debounce,\n    toRawType = _g3wsdk$core$utils.toRawType;\nvar GUI = g3wsdk.gui.GUI;\nvar getScaleFromResolution = g3wsdk.ol.utils.getScaleFromResolution;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin/toolboxes/toolsfactory.js@v3.7.1\n */\n\nvar ToolBox = exports.ToolBox = function (_G3WObject) {\n  _inherits(ToolBox, _G3WObject);\n\n  function ToolBox(layer) {\n    _classCallCheck(this, ToolBox);\n\n    var _this = _possibleConstructorReturn(this, (ToolBox.__proto__ || Object.getPrototypeOf(ToolBox)).call(this));\n\n    var is_vector = [undefined, Layer.LayerTypes.VECTOR].includes(layer.getType());\n    var geometryType = is_vector && layer.getGeometryType();\n    var is_point = is_vector && Geometry.isPointGeometryType(geometryType);\n    var is_line = is_vector && Geometry.isLineGeometryType(geometryType);\n    var is_poly = is_vector && Geometry.isPolygonGeometryType(geometryType);\n    var is_table = Layer.LayerTypes.TABLE === layer.getType();\n    var isMultiGeometry = geometryType && Geometry.isMultiGeometry(geometryType);\n    var iconGeometry = is_vector && (is_point ? 'Point' : is_line ? 'Line' : 'Polygon');\n\n    _this._start = false;\n\n    var uniqueFields = layer.getEditingFields().filter(function (f) {\n      return f.input && 'unique' === f.input.type;\n    }).reduce(function (fields, f) {\n      fields[f.name] = f;return fields;\n    }, {});\n\n    /**\n     * unique fields type\n     */\n    _this.uniqueFields = Object.keys(uniqueFields).length ? uniqueFields : null;\n\n    /** constraint loading features to a filter set */\n    _this.constraints = { filter: null, show: null, tools: [] };\n\n    /** reactive state of history */\n    _this._constrains = { commit: false, undo: false, redo: false };\n\n    /**\n     * Array of states of a layer in editing\n     * {\n     * _states: [\n     *     {\n     *       id: unique key\n     *       state: [state] // example: history contsins features state\n     *                      // array because a tool can apply changes to more than one features at time (split di una feature)\n     *     },\n     *     {\n     *       id: unique key\n     *       state: [state]\n     *     },\n     *   ]\n     *     ....\n     *\n     *  _current: unique key // usefult to undo redo\n     *\n     *\n     */\n    _this._states = [];\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this._history = {\n      id: layer.getId(),\n      state: new Proxy({}, { get: function get(_, prop) {\n          return _this._constrains[prop];\n        } }),\n      add: _this.__add.bind(_this),\n      undo: _this.__undo.bind(_this),\n      clear: _this.__clearHistory.bind(_this),\n      redo: _this.__redo.bind(_this),\n      getState: _this.__getState.bind(_this),\n      getLastState: _this.__getLastHistoryState.bind(_this),\n      commit: _this.__commit.bind(_this)\n    };\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     */\n    _this._session = Object.assign(new G3WObject({ setters: {\n        start: function start() {\n          var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          return (0, _promisify.$promisify)(_this.__startSession(options));\n        },\n        stop: function stop() {\n          return (0, _promisify.$promisify)(_this.__stopSession());\n        },\n        getFeatures: function getFeatures() {\n          var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          return (0, _promisify.$promisify)(_this.__getFeatures(options));\n        },\n        saveChangesOnServer: function saveChangesOnServer(commitItems) {\n          return _this.__saveChangesOnServer(commitItems);\n        }\n      } }), {\n      _history: _this._history,\n      state: new Proxy({}, { get: function get(_, prop) {\n          return _this.state.editing.session[prop];\n        } }),\n      getId: function getId() {\n        return layer.getId();\n      },\n      getLastHistoryState: _this.__getLastHistoryState.bind(_this),\n      isStarted: _this.__isStarted.bind(_this),\n      getHistory: _this.__getHistory.bind(_this),\n      getEditor: _this.__getEditor.bind(_this),\n      push: _this.__push.bind(_this),\n      pushDelete: _this.__pushDelete.bind(_this),\n      save: _this.__save.bind(_this),\n      pushAdd: _this.__pushAdd.bind(_this),\n      pushUpdate: _this.__pushUpdate.bind(_this),\n      revert: _this.revert.bind(_this),\n      rollback: _this.__rollback.bind(_this),\n      rollbackDependecies: _this.__rollbackDependecies.bind(_this),\n      undo: _this.__undoSession.bind(_this),\n      redo: _this.__redoSession.bind(_this),\n      getCommitItems: _this.__getCommitItems.bind(_this),\n      commit: _this.save.bind(_this),\n      clear: _this.__clearSession.bind(_this),\n      clearHistory: _this.__clearHistory.bind(_this)\n    });\n\n    // register this session on session registry\n    ToolBox._sessions[layer.getId()] = _this;\n\n    /** @type { 'create' | 'update_attributes' | 'update_geometry' | delete' | undefined } undefined means all possible tools base on type */\n    var capabilities = layer.getEditingCapabilities() || [];\n\n    _this.state = {\n      layer: layer,\n      id: layer.getId(),\n      changingtools: false, // whether to show tools during change phase\n      show: true, // whether to show the toolbox if we need to filtered\n      color: layer.getColor() || 'blue',\n      title: ' ' + layer.getTitle() || \"Edit Layer\",\n      customTitle: false,\n      loading: false,\n      enabled: false,\n      toolboxheader: true,\n      startstopediting: true,\n      message: null,\n      toolmessages: { help: null },\n      toolsoftool: [],\n      selected: false,\n      activetool: null,\n      editing: {\n        session: {\n          id: new Proxy({}, { get: function get() {\n              return _this.state.id;\n            } }),\n          started: false,\n          getfeatures: false,\n          /** maximum \"buffer history\" lenght for undo/redo */\n          maxSteps: 10,\n          /** current state of history (useful for undo /redo) */\n          current: null,\n          /** temporary change not save on history */\n          changes: []\n        },\n        history: _this._history.state,\n        on: false,\n        dependencies: [],\n        relations: [],\n        father: false,\n        canEdit: true\n      },\n      /** @since g3w-client-plugin-editing@v3.7.0 store key events setters */\n      _unregisterStartSettersEventsKey: [],\n      _getFeaturesOption: {},\n      _layerType: layer.getType() || Layer.LayerTypes.VECTOR,\n      _enabledtools: undefined,\n      _disabledtools: undefined,\n      _constraints: layer.getEditingConstrains() || {},\n      _tools: [\n      // Add Feature\n      is_vector && capabilities.includes('add_feature') && {\n        id: 'addfeature',\n        type: ['add_feature'],\n        name: 'editing.tools.add_feature',\n        icon: 'add' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addfeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addfeature',\n          steps: [new _workflows.AddFeatureStep({ layer: layer, tools: ['snap', 'measure'] }), new _workflows.OpenFormStep({ layer: layer })]\n        })\n      },\n      // Edit Attributes Feature\n      is_vector && capabilities.includes('change_attr_feature') && {\n        id: 'editattributes',\n        type: ['change_attr_feature'],\n        name: 'editing.tools.update_feature',\n        icon: 'editAttributes.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editfeatureattributesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          helpMessage: 'editing.tools.update_feature',\n          type: 'editfeatureattributes',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }), new _workflows.OpenFormStep()]\n        })\n      },\n      // Delete Feature\n      is_vector && capabilities.includes('delete_feature') && {\n        id: 'deletefeature',\n        type: ['delete_feature'],\n        name: 'editing.tools.delete_feature',\n        icon: 'delete' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/deletefeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'deletefeature',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }),\n          // delete feature\n          new _step.Step({\n            help: \"editing.steps.help.double_click_delete\",\n            run: function run(inputs, context) {\n              return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n                var layerId = inputs.layer.getId();\n                var feature = inputs.features[0];\n\n                // get all relations of the current editing layer that are in editing\n                // and filter relations\n                // get relation layer id that are in relation with layerId (current layer in editing)\n                // get fields of relation layer that are in relation with layerId\n                // Exclude relation child layer that has at least one\n                // editing field required because when unlink relation feature from\n                // delete father, when try to commit update relation, we receive an error\n                // due missing value /null to required field.\n                var relations = (0, _getRelationsInEditing.getRelationsInEditing)({\n                  layerId: layerId,\n                  relations: inputs.layer.getRelations() ? inputs.layer.getRelations().getArray() : []\n                }).filter(function (relation) {\n                  return (0, _getEditingLayerById.getEditingLayerById)((0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation })).getEditingFields() //get editing field of relation layer\n                  .filter(function (f) {\n                    return (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ relation: relation, layerId: (0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation }) }).ownField.includes(f.name);\n                  }) //filter only relation fields\n                  .every(function (f) {\n                    return !f.validate.required;\n                  });\n                } // check required\n                );\n\n                // promise return features relations and add to relation layer child\n                if (relations.length > 0) {\n                  yield (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(layerId, { feature: feature, relations: relations });\n                }\n\n                inputs.features = [feature];\n\n                // Unlink relation features related to layer id\n                (0, _getRelationsInEditingByFeature.getRelationsInEditingByFeature)({ layerId: layerId, relations: relations, feature: feature }).forEach(function (_ref4) {\n                  var relation = _ref4.relation,\n                      relations = _ref4.relations;\n\n                  relations.forEach(function (r) {\n                    return (0, _unlinkRelation.unlinkRelation)({ layerId: layerId, relation: relation, relations: relations, index: 0, dialog: false });\n                  });\n                });\n\n                context.session.pushDelete(layerId, feature);\n\n                return inputs;\n              }));\n            }\n          }),\n          // confirm step\n          new _step.Step({\n            run: function run(inputs) {\n              var _this2 = this;\n\n              return $.Deferred(function (d) {\n                var editingLayer = inputs.layer.getEditingLayer();\n                var feature = inputs.features[0];\n                var layerId = inputs.layer.getId();\n                GUI.dialog.confirm('<h4>' + tPlugin('editing.messages.delete_feature') + '</h4>' + '<div style=\"font-size:1.2em;\">' + (inputs.layer.getChildren().length && (0, _getRelationsInEditing.getRelationsInEditing)({ layerId: layerId, relations: inputs.layer.getRelations().getArray() }).length ? tPlugin('editing.messages.delete_feature_relations') : '') + '</div>', function (result) {\n                  if (!result) {\n                    d.reject(inputs);\n                    return;\n                  }\n                  editingLayer.getSource().removeFeature(feature);\n                  // Remove unique values from unique fields of a layer (when deleting a feature)\n                  var fields = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[layerId];\n                  if (fields) {\n                    Object.keys(feature.getProperties()).filter(function (field) {\n                      return undefined !== fields[field];\n                    }).forEach(function (field) {\n                      return fields[field].delete(feature.get(field));\n                    });\n                  }\n                  d.resolve(inputs);\n                });\n                if (inputs.features) {\n                  (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: d.promise(), inputs: inputs, style: _this2.selectStyle });\n                }\n              }).promise();\n            }\n          })]\n        })\n      },\n      // Edit vertex Feature\n      (is_line || is_poly) && capabilities.includes('change_feature') && {\n        id: 'movevertex',\n        type: ['change_feature'],\n        name: \"editing.tools.update_vertex\",\n        icon: \"moveVertex.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/modifygeometryvertexworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'modifygeometryvertex',\n          helpMessage: 'editing.tools.update_vertex',\n          steps: [new _workflows.PickFeatureStep({ layer: layer }), new _step.Step({ run: _chooseFeature.chooseFeature }), new _workflows.ModifyGeometryVertexStep({ tools: ['snap', 'measure'] })]\n        })\n      },\n      // Edit Attributes to Multi features\n      is_vector && capabilities.includes('change_attr_feature') && {\n        id: 'editmultiattributes',\n        type: ['change_attr_feature'],\n        name: \"editing.tools.update_multi_features\",\n        icon: \"multiEditAttributes.png\",\n        once: true,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/editmultifeatureattributesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'editmultiattributes',\n          helpMessage: 'editing.tools.update_multi_features',\n          registerEscKeyEvent: true,\n          steps: [new _workflows.SelectElementsStep({\n            type: 'multiple',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectDrawBoxAtLeast2Feature' : 'selectMultiPointSHIFTAtLeast2Feature'),\n                buttonnext: {\n                  disabled: true,\n                  condition: function condition(_ref5) {\n                    var _ref5$features = _ref5.features,\n                        features = _ref5$features === undefined ? [] : _ref5$features;\n                    return features.length < 2;\n                  },\n                  done: function done() {\n                    _workflow.Workflow.Stack.getCurrent().clearUserMessagesSteps();\n                  }\n                },\n                dynamic: 0,\n                done: false\n              }\n            }\n          }), new _workflows.OpenFormStep({ multi: true })]\n        })\n      },\n      // Move Feature\n      is_vector && capabilities.includes('change_feature') && {\n        id: 'movefeature',\n        type: ['change_feature'],\n        name: 'editing.tools.move_feature',\n        icon: 'move' + iconGeometry + '.png',\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/movefeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'movefeature',\n          helpMessage: 'editing.tools.move_feature',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }), new _workflows.MoveFeatureStep()]\n        })\n      },\n      // Copy Feature from another layer\n      is_vector && capabilities.includes('add_feature') && {\n        id: 'copyfeaturesfromotherlayer',\n        type: ['add_feature'],\n        name: \"editing.tools.pastefeaturesfromotherlayers\",\n        icon: \"pasteFeaturesFromOtherLayers.png\",\n        once: true,\n        enable: function () {\n          var map = GUI.getService('map');\n          var layerId = layer.getId();\n          var geometryType = layer.getGeometryType();\n          var selection = map.defaultsLayers.selectionLayer.getSource();\n          var data = {\n            bool: false,\n            tool: undefined\n          };\n          // check selected feature layers\n          var selected = function selected() {\n            var enabled = data.bool && selection.getFeatures().filter(function (f) {\n              var type = f.getGeometry() && f.getGeometry().getType();\n              return f.__layerId !== layerId && isSameBaseGeometryType(geometryType, type) && (geometryType === type || Geometry.isMultiGeometry(geometryType) || !Geometry.isMultiGeometry(type));\n            }).length > 0;\n            data.tool.enabled = enabled;\n            return enabled;\n          };\n          return function (_ref6) {\n            var bool = _ref6.bool,\n                _ref6$tool = _ref6.tool,\n                tool = _ref6$tool === undefined ? {} : _ref6$tool;\n\n            data.tool = tool;\n            data.bool = bool;\n            selection[bool ? 'on' : 'un']('addfeature', selected);\n            selection[bool ? 'on' : 'un']('removefeature', selected);\n            return selected();\n          };\n        }(),\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/copyfeaturesfromotherlayerworkflow.js@v3.7.1 */\n        op: function () {\n          var openFormStep = new _workflows.OpenFormStep({ layer: layer, help: 'editing.steps.help.copy' });\n          return new _workflow.Workflow({\n            layer: layer,\n            type: 'copyfeaturesfromotherlayer',\n            steps: [new _step.Step({\n              layer: layer,\n              help: 'editing.steps.help.draw_new_feature',\n              run: function run(inputs, context) {\n                var _this3 = this;\n\n                var d = $.Deferred();\n                var originalLayer = inputs.layer;\n                var geometryType = originalLayer.getGeometryType();\n                var layerId = originalLayer.getId();\n                //get attributes/properties from current layer in editing\n                var attributes = originalLayer.getEditingFields().filter(function (attribute) {\n                  return !attribute.pk;\n                });\n                var session = context.session;\n                var editingLayer = originalLayer.getEditingLayer();\n                var source = editingLayer.getSource();\n                // get features from selection features\n                var features = (0, _convertFeaturesGeometryToGeometryTypeOfLayer.convertFeaturesGeometryToGeometryTypeOfLayer)({\n                  geometryType: geometryType,\n                  features: GUI.getService('map').defaultsLayers.selectionLayer.getSource().getFeatures().filter(function (f) {\n                    return f.__layerId !== layerId;\n                  })\n                });\n                var selectedFeatures = [];\n\n                /**\n                 * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/selectcopyotherlayersfeatures.js.js@v3.6\n                 */\n                var layers = {};\n                (features || []).forEach(function (f) {\n                  if (undefined === layers[f.__layerId]) {\n                    var external = !CatalogLayersStoresRegistry.getLayerById(f.__layerId);\n                    layers[f.__layerId] = {\n                      external: external,\n                      fields: !external && CatalogLayersStoresRegistry.getLayerById(f.__layerId).getFields(),\n                      features: []\n                    };\n                  }\n                  layers[f.__layerId].features.push(f);\n                });\n\n                //set reactive\n                var editAttributes = Vue.observable({\n                  state: false\n                });\n                var vueInstance = new (Vue.extend(require('../components/CopyFeaturesFromOtherLayers.vue')))({\n                  layers: layers,\n                  selectedFeatures: selectedFeatures,\n                  editAttributes: editAttributes\n                });\n\n                var message = vueInstance.$mount().$el;\n                var dialog = GUI.showModalDialog({\n                  title: tPlugin('editing.modal.tools.copyfeaturefromotherlayer.title'),\n                  className: 'modal-left',\n                  closeButton: false,\n                  message: message,\n                  buttons: {\n                    cancel: {\n                      label: 'Cancel',\n                      className: 'btn-danger',\n                      callback: function callback() {\n                        d.reject();\n                      }\n                    },\n                    ok: {\n                      label: 'Ok',\n                      className: 'btn-success',\n                      callback: function () {\n                        var _ref7 = _asyncToGenerator(function* () {\n                          var features = [];\n                          var isThereEmptyFieldRequiredNotDefined = false;\n                          var promisesFeatures = [];\n                          selectedFeatures.forEach(function (selectedFeature) {\n                            /**\n                             * check if the layer belongs to project or not\n                             */\n                            if (CatalogLayersStoresRegistry.getLayerById(selectedFeature.__layerId)) {\n                              promisesFeatures.push((0, _getProjectLayerFeatureById.getProjectLayerFeatureById)({\n                                layerId: selectedFeature.__layerId,\n                                fid: selectedFeature.get(G3W_FID)\n                              }));\n                            } else {\n                              promisesFeatures.push({\n                                properties: selectedFeature.getProperties()\n                              });\n                            }\n                          });\n\n                          (yield Promise.allSettled(promisesFeatures)).forEach(function (_ref8, index) {\n                            var status = _ref8.status,\n                                layerFeature = _ref8.value;\n\n                            if (status === \"fulfilled\") {\n                              var selectedFeature = selectedFeatures[index];\n                              // Check if there is an empty filed required not defined\n                              isThereEmptyFieldRequiredNotDefined = undefined !== attributes.find(function (_ref9) {\n                                var name = _ref9.name,\n                                    _ref9$validate$requir = _ref9.validate.required,\n                                    required = _ref9$validate$requir === undefined ? false : _ref9$validate$requir;\n                                return undefined === layerFeature.properties[name] && required;\n                              });\n\n                              var feature = new Feature({\n                                feature: selectedFeature,\n                                properties: attributes.map(function (attribute) {\n                                  return attribute.name;\n                                })\n                              });\n\n                              //@TODO check better way\n                              //Set undefined property to null otherwise on commit\n                              // property are lost\n                              attributes.forEach(function (_ref10) {\n                                var name = _ref10.name;\n\n                                if (undefined === feature.get(name)) {\n                                  feature.set(name, null);\n                                }\n                              });\n\n                              originalLayer.getEditingNotEditableFields().find(function (field) {\n                                if (originalLayer.isPkField(field)) {\n                                  feature.set(field, null);\n                                }\n                              });\n                              //remove eventually Z Values\n                              removeZValueToOLFeatureGeometry({\n                                feature: feature\n                              });\n                              feature.setTemporaryId();\n                              source.addFeature(feature);\n                              features.push(feature);\n                              session.pushAdd(layerId, feature, false);\n                            }\n                          });\n                          //check if features selected are more than one\n                          if (features.length > 1) {\n                            if (editAttributes.state && openFormStep) {\n                              openFormStep.updateMulti(true);\n                            } else {\n                              if (isThereEmptyFieldRequiredNotDefined) {\n                                GUI.showUserMessage({\n                                  type: 'warning',\n                                  message: 'plugins.editing.messages.copy_and_paste_from_other_layer_mandatory_fields',\n                                  autoclose: true,\n                                  duration: 2000\n                                });\n                              }\n                            }\n                          }\n                          features.forEach(function (feature) {\n                            inputs.features.push(feature);\n                            _this3.fireEvent('addfeature', feature);\n                          });\n                          vueInstance.$destroy();\n                          d.resolve(inputs);\n                        });\n\n                        function callback() {\n                          return _ref7.apply(this, arguments);\n                        }\n\n                        return callback;\n                      }()\n                    }\n                  }\n                });\n                dialog.find('button.btn-success').prop('disabled', true);\n                vueInstance.$watch('selectedFeatures', function (features) {\n                  return dialog.find('button.btn-success').prop('disabled', features.length === 0);\n                });\n                return d.promise();\n              }\n            }), openFormStep],\n            registerEscKeyEvent: true\n          });\n        }()\n      },\n      // Copy Feature from layer\n      is_vector && capabilities.includes('add_feature') && {\n        id: 'copyfeatures',\n        type: ['add_feature'],\n        name: \"editing.tools.copy\",\n        icon: 'copy' + iconGeometry + '.png',\n        once: true,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/copyfeaturesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'copyfeatures',\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            help: 'editing.steps.help.copy',\n            type: ApplicationState.ismobile ? 'single' : 'multiple',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectPoint' : 'selectPointSHIFT'),\n                done: false\n              }\n            }\n          }, true),\n          // get vertex\n          layer.getGeometryType().indexOf('Point') >= 0 ? undefined : new _step.Step({\n            layer: layer,\n            help: 'editing.steps.help.select',\n            steps: {\n              from: {\n                description: 'editing.workflow.steps.selectStartVertex',\n                done: false\n              }\n            },\n            run: function run(inputs) {\n              var _this4 = this;\n\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              this._stopPromise = this._stopPromise;\n              return $.Deferred(function (d) {\n                if (!inputs.features.length) {\n                  return d.reject('no feature');\n                }\n                _this4._stopPromise = $.Deferred();\n\n                /** @since g3w-client-plugin-editing@v3.8.0 */\n                (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: _this4._stopPromise, inputs: inputs, style: _this4.selectStyle });\n\n                _this4.addInteraction(new ol.interaction.Draw({ type: 'Point', condition: function condition(e) {\n                    return inputs.features.some(function (f) {\n                      return (0, _isPointOnVertex.isPointOnVertex)({ feature: f, coordinates: e.coordinate });\n                    });\n                  } }), {\n                  'drawend': function drawend(e) {\n                    inputs.coordinates = e.feature.getGeometry().getCoordinates();\n                    _this4.setUserMessageStepDone('from');\n                    d.resolve(inputs);\n                  }\n                });\n                _this4.addInteraction(new ol.interaction.Snap({ edge: false, features: new ol.Collection(inputs.features) }));\n              }).promise();\n            },\n            stop: function stop() {\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              this._stopPromise.resolve(true);\n            }\n          }),\n          // move elements\n          new _step.Step({\n            layer: layer,\n            help: \"editing.steps.help.select_vertex_to_paste\",\n            steps: {\n              to: {\n                description: 'editing.workflow.steps.selectToPaste',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              var _this5 = this;\n\n              return $.Deferred(function (d) {\n                var layer = inputs.layer,\n                    features = inputs.features,\n                    coordinates = inputs.coordinates;\n\n                var source = layer.getEditingLayer().getSource();\n                var layerId = layer.getId();\n                var session = context.session;\n\n                /** @since g3w-client-plugin-editing@v3.8.0 */\n                (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: d, inputs: inputs, style: _this5.selectStyle });\n\n                _this5.addInteraction(new ol.interaction.Draw({ type: 'Point', features: new ol.Collection() }), {\n                  'drawend': function drawend(evt) {\n                    var _evt$feature$getGeome = evt.feature.getGeometry().getCoordinates(),\n                        _evt$feature$getGeome2 = _slicedToArray(_evt$feature$getGeome, 2),\n                        x = _evt$feature$getGeome2[0],\n                        y = _evt$feature$getGeome2[1];\n\n                    var deltaXY = coordinates ? (0, _getDeltaXY.getDeltaXY)({ x: x, y: y, coordinates: coordinates }) : null;\n                    var featuresLength = features.length;\n                    var promisesDefaultEvaluation = [];\n\n                    var _loop = function _loop(i) {\n                      var feature = (0, _cloneFeature.cloneFeature)(features[i], layer);\n                      if (deltaXY) {\n                        feature.getGeometry().translate(deltaXY.x, deltaXY.y);\n                      } else {\n                        var _coordinates = feature.getGeometry().getCoordinates();\n                        var _deltaXY = (0, _getDeltaXY.getDeltaXY)({ x: x, y: y, coordinates: _coordinates });\n                        feature.getGeometry().translate(_deltaXY.x, _deltaXY.y);\n                      }\n                      // set media fields to null\n                      layer.getEditingMediaFields({}).forEach(function (f) {\n                        return feature.set(f, null);\n                      });\n                      /**\n                       * evaluated geometry expression\n                       */\n                      promisesDefaultEvaluation.push((0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }));\n                    };\n\n                    for (var i = 0; i < featuresLength; i++) {\n                      _loop(i);\n                    }\n                    Promise.allSettled(promisesDefaultEvaluation).then(function (promises) {\n                      return promises.forEach(function (_ref11) {\n                        var status = _ref11.status,\n                            feature = _ref11.value;\n\n\n                        /**\n                         * @todo improve client core to handle this situation on session.pushAdd not copy pk field not editable only\n                         */\n                        var noteditablefieldsvalues = (0, _getNotEditableFieldsNoPkValues.getNotEditableFieldsNoPkValues)({ layer: layer, feature: feature });\n                        var newFeature = session.pushAdd(layerId, feature);\n                        // after pushAdd need to set not edit\n                        if (Object.entries(noteditablefieldsvalues).length) {\n                          Object.entries(noteditablefieldsvalues).forEach(function (_ref12) {\n                            var _ref13 = _slicedToArray(_ref12, 2),\n                                field = _ref13[0],\n                                value = _ref13[1];\n\n                            return newFeature.set(field, value);\n                          });\n                        }\n\n                        //need to add to editing layer source newFeature\n                        source.addFeature(newFeature);\n\n                        inputs.features.push(newFeature);\n                      });\n                    }).finally(function () {\n                      _this5.setUserMessageStepDone('to');\n                      d.resolve(inputs);\n                    });\n                  }\n                });\n\n                _this5.addInteraction(new ol.interaction.Snap({ source: source, edge: false }));\n              }).promise();\n            }\n          })].filter(Boolean),\n          registerEscKeyEvent: true\n        })\n      },\n      // Add part to MultiGeometry Feature\n      is_vector && capabilities.includes('add_feature') && capabilities.includes('change_feature') && {\n        id: 'addPart',\n        type: ['add_feature', 'change_feature'],\n        name: \"editing.tools.addpart\",\n        icon: \"addPart.png\",\n        once: true,\n        visible: isMultiGeometry,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addparttomultigeometriesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addparttomultigeometries',\n          helpMessage: 'editing.tools.addpart',\n          steps: [new _workflows.PickFeatureStep({\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.select',\n                done: false\n              }\n            }\n          }), new _step.Step({\n            run: _chooseFeature.chooseFeature,\n            help: 'editing.steps.help.select_element'\n          }), new _workflows.AddFeatureStep({\n            layer: layer,\n            help: 'editing.steps.help.select_element',\n            add: false,\n            steps: {\n              addfeature: {\n                description: 'editing.workflow.steps.draw_part',\n                done: false\n              }\n            },\n            tools: ['snap', 'measure']\n          }),\n          // add part to multi geometries\n          new _step.Step({\n            layer: layer,\n            help: 'editing.steps.help.select_element',\n            run: _addPartToMultigeometries.addPartToMultigeometries\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Remove part from MultiGeometry Feature\n      is_vector && capabilities.includes('change_feature') && {\n        id: 'deletePart',\n        type: ['change_feature'],\n        name: \"editing.tools.deletepart\",\n        icon: \"deletePart.png\",\n        visible: isMultiGeometry,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/deletepartfrommultigeometriesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'deletepartfrommultigeometries',\n          steps: [new _workflows.PickFeatureStep(), new _step.Step({ run: _chooseFeature.chooseFeature }),\n          // delete part from multi geometries\n          new _step.Step({\n            layer: layer,\n            run: function run(inputs, context) {\n              var _this6 = this;\n\n              return $.Deferred(function (d) {\n                var originaLayer = inputs.layer;\n                var editingLayer = inputs.layer.getEditingLayer();\n                var layerId = originaLayer.getId();\n                var session = context.session;\n                var features = inputs.features,\n                    coordinate = inputs.coordinate;\n\n                var feature = features[0];\n                var originalFeature = feature.clone();\n                var geometry = feature.getGeometry();\n                var geometries = multiGeometryToSingleGeometries(geometry);\n                var source = new ol.source.Vector({ features: geometries.map(function (geometry) {\n                    return new ol.Feature(geometry);\n                  }) });\n                var map = _this6.getMap();\n                var pixel = map.getPixelFromCoordinate(coordinate);\n                var tempLayer = new ol.layer.Vector({\n                  source: source,\n                  style: editingLayer.getStyle()\n                });\n\n                map.addLayer(tempLayer);\n\n                map.once('postrender', function () {\n                  var found = false;\n                  //need to call map.forEachFeatureAtPixel and not this.forEachFeatureAtPixel\n                  //because we use arrow function, and it referred this to outside context\n                  map.forEachFeatureAtPixel(pixel, function (_feature) {\n                    if (!found) {\n                      source.removeFeature(_feature);\n                      if (source.getFeatures().length) {\n                        var newGeometry = singleGeometriesToMultiGeometry(source.getFeatures().map(function (feature) {\n                          return feature.getGeometry();\n                        }));\n                        feature.setGeometry(newGeometry);\n                        /**\n                         * evaluated geometry expression\n                         */\n                        (0, _evaluateExpressionFields.evaluateExpressionFields)({\n                          inputs: inputs,\n                          context: context,\n                          feature: feature\n                        }).finally(function () {\n                          session.pushUpdate(layerId, feature, originalFeature);\n                          d.resolve(inputs);\n                        });\n                        /**\n                         * end of evaluated\n                         */\n                      } else {\n                        editingLayer.getSource().removeFeature(feature);\n                        session.pushDelete(layerId, feature);\n                        d.resolve(inputs);\n                      }\n                      found = true;\n                    }\n                  }, {\n                    layerFilter: function layerFilter(layer) {\n                      return layer === tempLayer;\n                    },\n\n                    hitTolerance: 1\n                  });\n                  //need to call map.forEachFeatureAtPixel and not this.forEachFeatureAtPixel\n                  //because we use arrow function, and it referred this to outside context\n                  map.removeLayer(tempLayer);\n                  tempLayer = null;\n                });\n              }).promise();\n            }\n          })],\n          helpMessage: 'editing.tools.deletepart'\n        })\n      },\n      // Split Feature\n      (is_line || is_poly) && capabilities.includes('change_feature') && {\n        id: 'splitfeature',\n        type: ['change_feature'],\n        name: \"editing.tools.split\",\n        icon: \"splitFeatures.png\",\n        once: true,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/splitfeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'splitfeature',\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            help: 'editing.steps.help.split',\n            type: ApplicationState.ismobile ? 'single' : 'multiple',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectPoint' : 'selectPointSHIFT'),\n                done: false\n              }\n            }\n          }, true),\n          // split feature\n          new _step.Step({\n            layer: layer,\n            help: '',\n            steps: {\n              draw_line: {\n                description: 'editing.workflow.steps.draw_split_line',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              var _this7 = this;\n\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              this._stopPromise = this._stopPromise;\n\n              var d = $.Deferred();\n              var source = inputs.layer.getEditingLayer().getSource();\n\n              /** @since g3w-client-plugin-editing@v3.8.0 */\n              this._stopPromise = $.Deferred();\n              (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: this._stopPromise, inputs: inputs, style: this.selectStyle });\n\n              this.addInteraction(new ol.interaction.Draw({\n                type: 'LineString',\n                features: new ol.Collection(),\n                freehandCondition: ol.events.condition.never\n              }), {\n                'drawend': function () {\n                  var _ref14 = _asyncToGenerator(function* (e) {\n                    var isSplitted = false;\n                    var splittedGeometries = splitFeatures({\n                      splitfeature: e.feature,\n                      features: inputs.features\n                    });\n                    var splittedGeometriesLength = splittedGeometries.length;\n\n                    var _loop2 = function* _loop2(i) {\n                      if (splittedGeometries[i].geometries.length > 1) {\n                        isSplitted = true;\n                        yield (0, _handleSplitFeature.handleSplitFeature)({\n                          feature: inputs.features.find(function (f) {\n                            return f.getUid() === splittedGeometries[i].uid;\n                          }),\n                          context: context,\n                          splittedGeometries: splittedGeometries[i].geometries,\n                          inputs: inputs,\n                          session: context.session\n                        });\n                      }\n                    };\n\n                    for (var i = 0; i < splittedGeometriesLength; i++) {\n                      yield* _loop2(i);\n                    }\n\n                    if (isSplitted) {\n                      GUI.showUserMessage({\n                        type: 'success',\n                        message: 'plugins.editing.messages.splitted',\n                        autoclose: true\n                      });\n                    } else {\n                      GUI.showUserMessage({\n                        type: 'warning',\n                        message: 'plugins.editing.messages.nosplittedfeature',\n                        autoclose: true\n                      });\n                    }\n\n                    /** @since g3w-client-plugin-editing@v3.8.0 */\n                    //resolve select style feature\n                    _this7._stopPromise.resolve(true);\n\n                    //need to set timeout promise, because at the end of the workflow all user messages are cleared\n                    yield new Promise(function (r) {\n                      return setTimeout(r, 1000);\n                    });\n\n                    d[isSplitted ? 'resolve' : 'reject'](inputs);\n                  });\n\n                  function drawend(_x3) {\n                    return _ref14.apply(this, arguments);\n                  }\n\n                  return drawend;\n                }()\n              });\n\n              this.addInteraction(new ol.interaction.Snap({ source: source, edge: true }));\n\n              return d.promise();\n            }\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Merge features in one\n      (is_line || is_poly) && capabilities.includes('change_feature') && {\n        id: 'mergefeatures',\n        type: ['change_feature'],\n        name: \"editing.tools.merge\",\n        icon: \"mergeFeatures.png\",\n        once: true,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/mergefeaturesworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'mergefeatures',\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            type: 'bbox',\n            help: 'editing.steps.help.merge',\n            steps: {\n              select: {\n                description: 'editing.workflow.steps.' + (ApplicationState.ismobile ? 'selectDrawBox' : 'selectSHIFT'),\n                done: false\n              }\n            }\n          }, true),\n          // merge features\n          new _step.Step({\n            layer: layer,\n            help: 'editing.steps.help.merge',\n            steps: {\n              choose: {\n                description: 'editing.workflow.steps.merge',\n                done: false\n              }\n            },\n            run: function run(inputs, context) {\n              return $.Deferred(function (d) {\n                var layer = inputs.layer,\n                    features = inputs.features;\n\n                var editingLayer = layer.getEditingLayer();\n                var source = editingLayer.getSource();\n                var layerId = layer.getId();\n                var session = context.session;\n\n                if (features.length < 2) {\n                  GUI.showUserMessage({\n                    type: 'warning',\n                    message: 'plugins.editing.messages.select_min_2_features',\n                    autoclose: true\n                  });\n                  d.reject();\n                } else {\n                  (0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: features, inputs: inputs }).then(function () {\n                    var _ref15 = _asyncToGenerator(function* (feature) {\n                      var index = features.findIndex(function (_feature) {\n                        return feature === _feature;\n                      });\n                      var originalFeature = feature.clone();\n                      var newFeature = dissolve({ features: features, index: index });\n\n                      if (newFeature) {\n                        try {\n                          yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: newFeature });\n                        } catch (err) {\n                          console.warn(err);\n                        }\n                        session.pushUpdate(layerId, newFeature, originalFeature);\n                        features.filter(function (_feature) {\n                          return _feature !== feature;\n                        }).forEach(function (deleteFeature) {\n                          session.pushDelete(layerId, deleteFeature);\n                          source.removeFeature(deleteFeature);\n                        });\n                        inputs.features = [feature];\n                        d.resolve(inputs);\n                      } else {\n                        GUI.showUserMessage({\n                          type: 'warning',\n                          message: 'plugins.editing.messages.no_feature_selected',\n                          autoclose: true\n                        });\n                        d.reject();\n                      }\n                    });\n\n                    return function (_x4) {\n                      return _ref15.apply(this, arguments);\n                    };\n                  }()).catch(function () {\n                    d.reject();\n                  });\n                }\n              }).promise();\n            }\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Copy Features from external layer\n      (is_line || is_poly) && capabilities.includes('add_feature') && {\n        id: 'copyfeaturefromexternallayer',\n        type: ['add_feature'],\n        name: \"editing.tools.copyfeaturefromexternallayer\",\n        icon: \"copyPolygonFromFeature.png\",\n        once: true,\n        visible: function visible(tool) {\n          var map = GUI.getService('map');\n          var type = _this.getLayer().getGeometryType();\n          var has_same_geom = function has_same_geom(layer) {\n            // check if tool is visible and the layer is a Vector\n            var features = 'VECTOR' === layer.getType() && layer.getSource().getFeatures();\n            return features && features.length ? isSameBaseGeometryType(features[0].getGeometry().getType(), type) : true;\n          };\n          map.onbefore('loadExternalLayer', function (layer) {\n            return !tool.visible && (tool.visible = has_same_geom(layer));\n          });\n          map.onafter('unloadExternalLayer', function (layer) {\n            var features = tool.visible && 'VECTOR' === layer.getType() && layer.getSource().getFeatures();\n            if (features && features.length && isSameBaseGeometryType(features[0].getGeometry().getType(), type)) {\n              tool.visible = map.getExternalLayers().find(function (l) {\n                return undefined !== has_same_geom(l);\n              });\n            }\n          });\n          return false;\n        },\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addfeaturefrommapvectorlayersworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addfeaturefrommapvectorlayers',\n          steps: [new _workflows.SelectElementsStep({\n            layer: layer,\n            type: 'external',\n            help: 'editing.steps.help.copy'\n          }, false), new _workflows.OpenFormStep({\n            layer: layer,\n            help: 'editing.steps.help.copy'\n          })],\n          registerEscKeyEvent: true\n        })\n      },\n      // Add Table feature (alphanumerical layer - No geometry)\n      is_table && capabilities.includes('add_feature') && {\n        id: 'addfeature',\n        type: ['add_feature'],\n        name: \"editing.tools.add_feature\",\n        icon: \"addTableRow.png\",\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/addtablefeatureworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'addtablefeature',\n          steps: [new _step.Step({ help: 'editing.steps.help.new', run: _addTableFeature.addTableFeature }), new _workflows.OpenFormStep()]\n        })\n      },\n      // Edit Table feature (alphanumerical layer - No geometry)\n      is_table && capabilities.includes('delete_feature') && capabilities.includes('change_attr_feature') && {\n        id: 'edittable',\n        type: ['delete_feature', 'change_attr_feature'],\n        name: \"editing.tools.update_feature\",\n        icon: \"editAttributes.png\",\n        once: true,\n        /** ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/edittableworkflow.js@v3.7.1 */\n        op: new _workflow.Workflow({\n          layer: layer,\n          type: 'edittable',\n          backbuttonlabel: 'plugins.editing.form.buttons.save_and_back_table',\n          steps: [new _workflows.OpenTableStep()]\n        })\n      }].filter(Boolean).map(function (tool) {\n        return Object.assign(new G3WObject(), tool);\n      })\n    };\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     */\n    _this.state._tools.forEach(function (tool) {\n      Object.assign(tool, {\n        disabledtoolsoftools: [],\n        enabled: false,\n        active: false,\n        message: null,\n        messages: tool.op.getMessages(),\n        visible: tool.visible instanceof Function ? tool.visible(tool) : undefined !== tool.visible ? tool.visible : true,\n        state: new Proxy({}, { get: function get(_, prop) {\n            return tool[prop];\n          }, set: function set(_, prop, value) {\n            tool[prop] = value;return true;\n          } }),\n        start: _this._startTool.bind(_this, tool),\n        stop: _this._stopTool.bind(_this, tool),\n        getId: function getId() {\n          return tool.id;\n        },\n        getOperator: function getOperator() {\n          return tool.op;\n        },\n        setOperator: function setOperator(op) {\n          return tool.op = op;\n        }\n      });\n    });\n\n    Object.assign(_this.state, {\n      tools: _this.state._tools,\n      /** original value of state in case of custom changes */\n      originalState: {\n        title: _this.state.title,\n        toolsoftool: [].concat(_toConsumableArray(_this.state.toolsoftool))\n      }\n    });\n\n    // BACKOMP v3.x\n    _this.originalState = _this.state.originalState;\n\n    // get informed when save on server\n    if (_this.uniqueFields) {\n      _this.getFieldUniqueValuesFromServer();\n      _this._resetOnSaveChangesOnServer = true;\n    }\n\n    //event features\n    _this._getFeaturesEvent = { event: null, fnc: null };\n    return _this;\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n   * \n   * @param { string } layerId\n   *\n   */\n\n\n  _createClass(ToolBox, [{\n    key: '_stopSessionChildren',\n    value: function _stopSessionChildren(layerId) {\n      var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n      var layer = service.getLayerById(layerId);\n      (0, _getRelationsInEditing.getRelationsInEditing)({\n        layerId: layerId,\n        relations: layer.getRelations() ? layer.getRelations().getArray() : []\n      }).filter(function (relation) {\n        return relation.getFather() === layerId;\n      }).forEach(function (relation) {\n        var relationId = (0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation });\n        // In case of no editing is started (click on pencil of relation layer) need to stop (unlock) features\n        if (!service.getToolBoxById(relationId).inEditing()) {\n          service.state.sessions[relationId].stop();\n        }\n      });\n    }\n\n    /**\n     * @returns toolbox state\n     */\n\n  }, {\n    key: 'getState',\n    value: function getState() {\n      return this.state;\n    }\n\n    /**\n     * @param bool\n     */\n\n  }, {\n    key: 'setShow',\n    value: function setShow() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.state.show = bool;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.state.layer;\n    }\n\n    /**\n     * @param bool\n     */\n\n  }, {\n    key: 'setFather',\n    value: function setFather(bool) {\n      this.state.editing.father = bool;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isFather',\n    value: function isFather() {\n      return this.state.editing.father;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     *\n     * Revert (cancel) all changes in history and clean session\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'revert',\n    value: function revert() {\n      var _this8 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        yield (0, _promisify.promisify)(_this8.state.layer.getEditor().revert());\n        _this8.__clearHistory();\n      }));\n    }\n\n    /**\n     * @param relation\n     */\n\n  }, {\n    key: 'addRelation',\n    value: function addRelation(relation) {\n      this.state.editing.relations.push(relation);\n    }\n\n    /**\n     * @returns {[]}\n     */\n\n  }, {\n    key: 'getDependencies',\n    value: function getDependencies() {\n      return this.state.editing.dependencies;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'hasDependencies',\n    value: function hasDependencies() {\n      return this.state.editing.dependencies.length > 0;\n    }\n\n    /**\n     * @param reset\n     */\n\n  }, {\n    key: 'getFieldUniqueValuesFromServer',\n    value: function getFieldUniqueValuesFromServer() {\n      var _this9 = this;\n\n      var _ref17 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref17$reset = _ref17.reset,\n          reset = _ref17$reset === undefined ? false : _ref17$reset;\n\n      this.state.layer.getWidgetData({\n        type: 'unique',\n        fields: Object.values(this.uniqueFields).map(function (field) {\n          return field.name;\n        }).join()\n      }).then(function (response) {\n        Object.entries(response.data).forEach(function (_ref18) {\n          var _ref19 = _slicedToArray(_ref18, 2),\n              fieldName = _ref19[0],\n              values = _ref19[1];\n\n          if (reset) {\n            _this9.uniqueFields[fieldName].input.options.values.splice(0);\n          }\n          values.forEach(function (value) {\n            return _this9.uniqueFields[fieldName].input.options.values.push(value);\n          });\n        });\n      }).fail(console.warn);\n    }\n\n    /**\n     * Create getFeatures options\n     * \n     * @param filter\n     */\n\n  }, {\n    key: 'setFeaturesOptions',\n    value: function setFeaturesOptions() {\n      var _ref20 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          filter = _ref20.filter;\n\n      if (filter) {\n        // in case of no features filter request check if no features_filed is present otherwise it get first field\n        if (filter.nofeatures) {\n          filter.nofeatures_field = filter.nofeatures_field || this.state.layer.getEditingFields()[0].name;\n        }\n        this.state._getFeaturesOption = {\n          filter: filter,\n          editing: true,\n          registerEvents: false\n        };\n        // in case of constraint attribute set the filter as constraint\n        if (filter.constraint) {\n          this.constraintFeatureFilter = filter;\n        }\n      } else {\n        this.state._getFeaturesOption = (0, _createEditingDataOptions.createEditingDataOptions)(Layer.LayerTypes.TABLE === this.state._layerType ? 'all' : 'bbox', { layerId: this.getId() });\n      }\n    }\n\n    /**\n     * @param constraints\n     */\n\n  }, {\n    key: 'setEditingConstraints',\n    value: function setEditingConstraints() {\n      var _this10 = this;\n\n      var constraints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      Object.keys(constraints).forEach(function (c) {\n        return _this10.constraints[c] = constraints[c];\n      });\n    }\n\n    //added option object to start method to have a control by other plugin how\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this11 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return $.Deferred(function () {\n        var _ref21 = _asyncToGenerator(function* (d) {\n          var id = _this11.getId();\n          var applicationConstraint = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.constraints.toolboxes[id];\n          var _options$toolboxheade = options.toolboxheader,\n              toolboxheader = _options$toolboxheade === undefined ? true : _options$toolboxheade,\n              _options$startstopedi = options.startstopediting,\n              startstopediting = _options$startstopedi === undefined ? true : _options$startstopedi,\n              _options$showtools = options.showtools,\n              showtools = _options$showtools === undefined ? true : _options$showtools,\n              _options$changingtool = options.changingtools,\n              changingtools = _options$changingtool === undefined ? false : _options$changingtool,\n              tools = options.tools,\n              filter = options.filter;\n\n\n          _this11.state.changingtools = changingtools;\n          if (tools) {\n            _this11.setEnablesDisablesTools(tools);\n          }\n          _this11.state.toolboxheader = toolboxheader;\n          _this11.state.startstopediting = startstopediting;\n\n          filter = applicationConstraint && applicationConstraint.filter || _this11.constraints.filter || filter;\n\n          //register lock features to show a message\n          var unKeyLock = _this11.state.layer.getFeaturesStore().onceafter('featuresLockedByOtherUser', function () {\n            GUI.showUserMessage({\n              type: 'warning',\n              subtitle: _this11.state.layer.getName().toUpperCase(),\n              message: 'plugins.editing.messages.featureslockbyotheruser'\n            });\n          });\n\n          //add featuresLockedByOtherUser setter\n          _this11.state._unregisterStartSettersEventsKey.push(function () {\n            return _this11.state.layer.getFeaturesStore().un('featuresLockedByOtherUser', unKeyLock);\n          });\n\n          // check if can we edit based on scale contraint (vector layer)\n          if (_this11.state._constraints.scale) {\n            //unwatch selected\n            var map = GUI.getService('map').getMap();\n            //set message of scale constraint\n            var message = ('' + tPlugin('editing.messages.constraints.enable_editing') + _this11.state._constraints.scale).toUpperCase();\n            //check if you can edit\n            _this11.state.editing.canEdit = getScaleFromResolution(map.getView().getResolution()) <= _this11.state._constraints.scale;\n\n            GUI.setModal(!_this11.state.editing.canEdit, message);\n            yield new Promise(function (resolve) {\n              //listen to change resolution\n              var key = map.getView().on('change:resolution', function (evt) {\n                _this11.state.editing.canEdit = getScaleFromResolution(evt.target.getResolution()) <= _this11.state._constraints.scale;\n                if (_this11.state.editing.canEdit) {\n                  resolve();\n                }\n                GUI.setModal(_this11.state.selected && !_this11.state.editing.canEdit, message);\n              });\n\n              var unwatch = _eventbus.VM.$watch(function () {\n                return _this11.state.selected;\n              }, {\n                immediate: true,\n                handler: function handler(bool) {\n                  return GUI.setModal(bool && !_this11.state.editing.canEdit, message);\n                }\n              });\n\n              _this11.state._unregisterStartSettersEventsKey.push(function () {\n                //remove modal resolution\n                GUI.setModal(false);\n                //remove event listener on change resolution\n                ol.Observable.unByKey(key);\n                //set can edit true\n                _this11.state.editing.canEdit = true;\n                //unwatch select state\n                unwatch();\n              });\n\n              //if click on start toolbox can edit and is selected\n              if (_this11.state.editing.canEdit && _this11.state.selected) {\n                resolve();\n              }\n            });\n          }\n\n          // set filterOptions\n          _this11.setFeaturesOptions({ filter: filter });\n\n          var handlerAfterSessionGetFeatures = function () {\n            var _ref22 = _asyncToGenerator(function* (promise) {\n              _this11.emit('start-editing');\n              yield (0, _setLayerUniqueFieldValues.setLayerUniqueFieldValues)(_this11.getId());\n              yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({ type: 'start-editing', id: id });\n              try {\n                var features = yield (0, _promisify.promisify)(promise);\n                _this11.stopLoading();\n                _this11.setEditing(true);\n                yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({ type: 'get-features-editing', id: id, options: { features: features } });\n                d.resolve({ features: features });\n              } catch (e) {\n                console.warn(e);\n                GUI.notify.error(e.message);\n                yield g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').runEventHandler({ type: 'error-editing', id: id, error: e });\n                _this11.stop();\n                _this11.stopLoading();\n                d.reject(e);\n              }\n            });\n\n            return function handlerAfterSessionGetFeatures(_x11) {\n              return _ref22.apply(this, arguments);\n            };\n          }();\n\n          var is_started = !!_this11.__isStarted();\n\n          //@TODO need to explain better\n          var GIVE_ME_A_NAME = ApplicationState.ismobile && GUI.getService('map').isMapHidden() && Layer.LayerTypes.VECTOR === _this11.state._layerType;\n\n          if (!is_started && GIVE_ME_A_NAME) {\n            _this11.setEditing(true);\n            GUI.getService('map').onceafter('setHidden', function () {\n              setTimeout(function () {\n                _this11._start = true;\n                _this11.startLoading();\n                _this11.setFeaturesOptions({ filter: filter });\n                _this11._session.start(_this11.state._getFeaturesOption).then(handlerAfterSessionGetFeatures).fail(function () {\n                  return _this11.setEditing(false);\n                });\n              }, 300);\n            });\n          }\n\n          /** @TODO merge the following condtions? */\n\n          if (!is_started && !GIVE_ME_A_NAME) {\n            _this11._start = true;\n            _this11.startLoading();\n            _this11._session.start(_this11.state._getFeaturesOption).then(handlerAfterSessionGetFeatures);\n          }\n\n          if (is_started && !_this11._start) {\n            _this11.startLoading();\n            _this11._session.getFeatures(_this11.state._getFeaturesOption).then(handlerAfterSessionGetFeatures);\n            _this11._start = true;\n          }\n\n          if (is_started) {\n            _this11.setEditing(true);\n          }\n        });\n\n        return function (_x10) {\n          return _ref21.apply(this, arguments);\n        };\n      }()).promise();\n    }\n  }, {\n    key: 'startLoading',\n\n\n    /**\n     *\n     */\n    value: function startLoading() {\n      this.state.loading = true;\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'stopLoading',\n    value: function stopLoading() {\n      this.state.loading = false;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this12 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        if (_this12.disableCanEditEvent) {\n          _this12.disableCanEditEvent();\n        }\n\n        _this12.state._unregisterStartSettersEventsKey.forEach(function (fnc) {\n          return fnc();\n        });\n        _this12.state._unregisterStartSettersEventsKey = [];\n\n        var is_started = !!_this12.__isStarted();\n\n        if (!is_started) {\n          _this12.setSelected(false);\n          return true;\n        }\n\n        if (!ApplicationState.online) {\n          return;\n        }\n\n        var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n        var layerId = _this12.state.id;\n\n        // Check if father relation is editing and has commit feature\n        var fathersInEditing = service.getLayerById(layerId).getFathers().filter(function (id) {\n          var toolbox = service.getToolBoxById(id);\n          if (toolbox && toolbox.inEditing() && toolbox.isDirty()) {\n            //get a temporary relations object and check if layerId has some changes\n            return Object.keys(toolbox.getSession().getCommitItems() || {}).find(function (id) {\n              return layerId === id;\n            });\n          }\n        });\n\n        if (fathersInEditing.length > 0) {\n          _this12.stopActiveTool();\n          _this12.state.editing.on = false;\n          _this12.enableTools(false);\n          _this12.clearToolboxMessages();\n          // unregister get features event\n          if (Layer.LayerTypes.VECTOR === _this12.state._layerType) {\n            GUI.getService('map').getMap().un(_this12._getFeaturesEvent.event, _this12._getFeaturesEvent.fnc);\n          }\n          _this12._stopSessionChildren(_this12.state.id);\n          _this12.setSelected(false);\n          // clear layer unique field values\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[_this12.getId()] = {};\n          return;\n        }\n\n        try {\n          yield (0, _promisify.promisify)(_this12._session.stop());\n          _this12._start = false;\n          _this12.state.editing.on = false;\n          _this12.state.enabled = false;\n\n          _this12.stopLoading();\n          _this12.state._getFeaturesOption = {};\n          _this12.stopActiveTool();\n          _this12.enableTools(false);\n          _this12.clearToolboxMessages();\n          _this12.setSelected(false);\n          _this12.emit('stop-editing');\n\n          // clear layer unique field values\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.uniqueFieldsValues[_this12.getId()] = {};\n\n          return true;\n        } catch (e) {\n          console.warn(e);\n          return Promise.reject(e);\n        } finally {\n          _this12.setSelected(false);\n        }\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Commit changes on server (save)\n     * \n     * @param opts.ids\n     * @param opts.items\n     * @param opts.relations\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: 'save',\n    value: function save() {\n      var _this13 = this;\n\n      var _ref24 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref24$ids = _ref24.ids,\n          ids = _ref24$ids === undefined ? null : _ref24$ids,\n          items = _ref24.items,\n          _ref24$relations = _ref24.relations,\n          relations = _ref24$relations === undefined ? true : _ref24$relations,\n          _ref24$__esPromise = _ref24.__esPromise,\n          __esPromise = _ref24$__esPromise === undefined ? false : _ref24$__esPromise;\n\n      var d = $.Deferred();\n\n      var commit = void 0; // committed items\n\n      // skip when ..\n      if (ids) {\n        commit = this.__commit(ids);\n        this.__clearHistory(ids);\n        return d.promise();\n      }\n\n      commit = items || this.__getCommitItems(this.__commit());\n\n      if (!relations) {\n        commit.relations = {};\n      }\n\n      this.state.layer.getEditor().commit(commit).then(function (response) {\n\n        // skip when response is null or undefined and response.result is false\n        if (!(response && response.result)) {\n          d.reject(response);\n          return;\n        }\n\n        var _response$response$ne = response.response.new_relations,\n            new_relations = _response$response$ne === undefined ? {} : _response$response$ne; // check if new relations are saved on server\n\n        // sync server data with local data\n\n        for (var id in new_relations) {\n          ToolBox.get(id) // get session of relation by id\n          .getSession().getEditor().applyCommitResponse({ // apply commit response to current editing relation layer\n            response: new_relations[id],\n            result: true\n          });\n        }\n\n        _this13.__clearHistory();\n\n        _this13._session.saveChangesOnServer(commit); // dispatch setter event.\n\n        // ES6 promises only accept a single response\n        if (__esPromise) {\n          d.resolve({ commit: commit, response: response });\n        } else {\n          d.resolve(commit, response);\n        }\n      }).fail(function (err) {\n        return d.reject(err);\n      });\n\n      return d.promise();\n    }\n\n    /**\n     * @returns {*|{}}\n     */\n\n  }, {\n    key: 'getEditingConstraints',\n    value: function getEditingConstraints() {\n      return this.state._constraints;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'canEdit',\n    value: function canEdit() {\n      return this.state.editing.canEdit;\n    }\n\n    /**\n     * @param message\n     */\n\n  }, {\n    key: 'setMessage',\n    value: function setMessage(message) {\n      this.state.message = message;\n    }\n\n    /**\n     * @returns {null}\n     */\n\n  }, {\n    key: 'getMessage',\n    value: function getMessage() {\n      return this.state.message;\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'clearMessage',\n    value: function clearMessage() {\n      this.setMessage(null);\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'clearToolboxMessages',\n    value: function clearToolboxMessages() {\n      this.state.toolmessages.help = null;\n      this.clearMessage();\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.state.id;\n    }\n\n    /**\n     * @returns {string}\n     */\n\n  }, {\n    key: 'getTitle',\n    value: function getTitle() {\n      return this.state.title;\n    }\n\n    /**\n     * @param title\n     */\n\n  }, {\n    key: 'setTitle',\n    value: function setTitle(title) {\n      this.state.customTitle = true;\n      this.state.title = title;\n    }\n\n    /**\n     * @returns {string}\n     */\n\n  }, {\n    key: 'getColor',\n    value: function getColor() {\n      return this.state.color;\n    }\n\n    /**\n     * Enable toolbox\n     * \n     * @param bool\n     */\n\n  }, {\n    key: 'setEditing',\n    value: function setEditing() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.setEnable(bool);\n      this.state.editing.on = bool;\n      this.enableTools(bool);\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'inEditing',\n    value: function inEditing() {\n      return this.state.editing.on;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isEnabled',\n    value: function isEnabled() {\n      return this.state.enabled;\n    }\n\n    /**\n     * @param bool\n     * \n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'setEnable',\n    value: function setEnable() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this.state.enabled = bool;\n      return this.state.enabled;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isLoading',\n    value: function isLoading() {\n      return this.state.loading;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'isDirty',\n    value: function isDirty() {\n      return this.state.editing.history.commit;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isSelected',\n    value: function isSelected() {\n      return this.state.selected;\n    }\n\n    /**\n     * @param bool\n     */\n\n  }, {\n    key: 'setSelected',\n    value: function setSelected() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this.state.selected = bool;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getTools',\n    value: function getTools() {\n      return this.state._tools;\n    }\n\n    /**\n     * @param toolId\n     * \n     * @returns {*|number|bigint|T|T} tool by id\n     */\n\n  }, {\n    key: 'getToolById',\n    value: function getToolById(toolId) {\n      return this.state._tools.find(function (tool) {\n        return toolId === tool.getId();\n      });\n    }\n\n    /**\n     * @param toolId\n     */\n\n  }, {\n    key: 'setEnableTool',\n    value: function setEnableTool(toolId) {\n      this.state._tools.find(function (tool) {\n        return tool.getId() === toolId;\n      }).state.enabled = true;\n    }\n\n    /**\n     * Set tools bases on add\n     * editing_constraints : true // follow the tools related toi editing conttraints configuration\n     * \n     * @see g3w-client-plugin-sispi-worksite\n     */\n\n  }, {\n    key: 'setAddEnableTools',\n    value: function setAddEnableTools() {\n      var _ref25 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref25$tools = _ref25.tools,\n          tools = _ref25$tools === undefined ? {} : _ref25$tools,\n          _ref25$options = _ref25.options,\n          options = _ref25$options === undefined ? { editing_constraints: true } : _ref25$options;\n\n      var _options$editing_cons = options.editing_constraints,\n          editing_constraints = _options$editing_cons === undefined ? false : _options$editing_cons;\n\n\n      this.setEnablesDisablesTools({\n        enabled: this.state._tools.filter(function (tool) {\n          return editing_constraints ? tool.type.includes('add_feature') : ['addfeature', 'editattributes', 'movefeature', 'movevertex'].includes(tool.getId());\n        }).map(function (tool) {\n          return { id: tool.getId(), options: tools[tool.getId()] };\n        })\n      });\n\n      this.enableTools(true);\n    }\n\n    /**\n     * Set tools bases on update\n     * \n     * @see g3w-client-plugin-sispi-worksite\n     */\n\n  }, {\n    key: 'setUpdateEnableTools',\n    value: function setUpdateEnableTools(_ref26) {\n      var _ref26$tools = _ref26.tools,\n          tools = _ref26$tools === undefined ? {} : _ref26$tools,\n          _ref26$excludetools = _ref26.excludetools,\n          excludetools = _ref26$excludetools === undefined ? [] : _ref26$excludetools,\n          _ref26$options = _ref26.options,\n          options = _ref26$options === undefined ? { editing_constraints: true } : _ref26$options;\n      var _options$editing_cons2 = options.editing_constraints,\n          editing_constraints = _options$editing_cons2 === undefined ? false : _options$editing_cons2;\n\n      var UPDATEONEFEATUREONLYTOOLSID = ['editattributes', 'movefeature', 'movevertex'];\n      var update_tools = this.state._tools.filter(function (tool) {\n        // exclude\n        if (-1 !== excludetools.indexOf(tool.getId())) {\n          return false;\n        }\n        return editing_constraints ? tool.type.find(function (type) {\n          return type === 'change_feature' || type === 'change_attr_feature';\n        }) : -1 !== UPDATEONEFEATUREONLYTOOLSID.indexOf(tool.getId());\n      }).map(function (tool) {\n        var id = tool.getId();\n        return { id: id, options: tools[id] };\n      });\n\n      this.setEnablesDisablesTools({ enabled: update_tools });\n      this.enableTools(true);\n    }\n\n    /**\n     * Set enable tools\n     *\n     * @param tools\n     */\n\n  }, {\n    key: 'setEnablesDisablesTools',\n    value: function setEnablesDisablesTools(tools) {\n      var _this14 = this;\n\n      if (tools) {\n        this.state.changingtools = true;\n        // Check if tools is an array\n        var _tools$enabled = tools.enabled,\n            enableTools = _tools$enabled === undefined ? [] : _tools$enabled,\n            _tools$disabled = tools.disabled,\n            disableTools = _tools$disabled === undefined ? [] : _tools$disabled;\n\n\n        var toolsId = enableTools.length ? [] : this.state._tools.map(function (tool) {\n          return tool.getId();\n        });\n\n        enableTools.forEach(function (_ref27) {\n          var id = _ref27.id,\n              _ref27$options = _ref27.options,\n              options = _ref27$options === undefined ? {} : _ref27$options;\n\n          //check if id of tool passed as argument is right\n          var tool = _this14.getToolById(id);\n          if (tool) {\n            var _options$active = options.active,\n                active = _options$active === undefined ? false : _options$active;\n            // set tool options\n\n            tool.messages = options.messages || tool.messages;\n            tool.visible = undefined !== options.visible ? options.visible : true;\n            tool.enabled = undefined !== options.enabled ? options.enabled : false;\n            tool.disabledtoolsoftools = undefined !== options.disabledtoolsoftools ? options.disabledtoolsoftools : [];\n            if (tool.visible) {\n              toolsId.push(id);\n            }\n            if (active) {\n              _this14.setActiveTool(tool);\n            }\n            if (_this14.state._enabledtools === undefined) {\n              _this14.state._enabledtools = [];\n            }\n            _this14.state._enabledtools.push(tool);\n          }\n        });\n        //disabled and visible\n        disableTools.forEach(function (_ref28) {\n          var id = _ref28.id,\n              options = _ref28.options;\n\n          var tool = _this14.getToolById(id);\n          if (tool) {\n            if (_this14.state._disabledtools === undefined) {\n              _this14.state._disabledtools = [];\n            }\n            _this14.state._disabledtools.push(id);\n            //add it toi visible tools\n            toolsId.push(id);\n          }\n        });\n        //set not visible all remain\n        this.state._tools.forEach(function (tool) {\n          return !toolsId.includes(tool.getId()) && (tool.visible = false);\n        });\n        this.state.changingtools = false;\n      }\n    }\n  }, {\n    key: 'enableTools',\n\n\n    /**\n     * @param {*} bool whehter enable all tools\n     */\n    value: function enableTools() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      var tools = this.state._enabledtools || this.state._tools;\n      var disabledtools = this.state._disabledtools || [];\n      tools.forEach(function (tool) {\n        var enabled = undefined !== tool.enable ? tool.enable : bool;\n        tool.enabled = bool && disabledtools.length ? disabledtools.indexOf(tool.getId()) === -1 : toRawType(enabled) === 'Boolean' ? enabled : enabled({ bool: bool, tool: tool });\n        if (!bool) {\n          tool.active = bool;\n        }\n      });\n    }\n\n    /**\n     * @param tool\n     */\n\n  }, {\n    key: 'setActiveTool',\n    value: function setActiveTool(tool) {\n      var _this15 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        try {\n          yield (0, _promisify.promisify)(_this15.stopActiveTool(tool));\n\n          _this15.state.toolsoftool.splice(0);\n          _this15.state.activetool = tool;\n\n          var workflow = tool.getOperator();\n\n          if (workflow) {\n            // filter eventually disable tools of tools\n            workflow.once('settoolsoftool', function (ts) {\n              var _state$toolsoftool;\n\n              return (_state$toolsoftool = _this15.state.toolsoftool).push.apply(_state$toolsoftool, _toConsumableArray((ts || []).filter(function (t) {\n                return !tool.disabledtoolsoftools.includes(t.type);\n              })));\n            });\n            workflow.once('start', function (ts) {\n              return _this15.state.toolsoftool.forEach(function (t) {\n                return (ts || []).includes(t.type) && (t.options.active = true);\n              });\n            });\n            workflow.once('stop', function (ts) {\n              return _this15._deactivetools(tool, ts);\n            });\n            workflow.once('reject', function (ts) {\n              return _this15._deactivetools(tool, ts);\n            });\n          }\n\n          tool.start();\n\n          // set tool messages\n          var messages = _this15.state.activetool.getOperator().getHelpMessage() || _this15.state.activetool.getOperator().getRunningStep() ? _this15.state.activetool.messages : null;\n          _this15.state.toolmessages.help = messages && messages.help || null;\n        } catch (e) {\n          console.warn(e);\n        }\n      }));\n    }\n\n    /**\n     * @since g3w-client-plugin-editing@v3.8.0 \n     */\n\n  }, {\n    key: '_deactivetools',\n    value: function _deactivetools(tool) {\n      var tools = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      // in case of deactivate tool and current active tool, it was clicked\n      if (tool === this.state.activetool) {\n        this.state.activetool = null;\n        this.state.toolsoftool.splice(0);\n      }\n      this.state.toolsoftool.forEach(function (t) {\n        return tools.includes(t.type) && (t.options.active = false);\n      });\n    }\n\n    /**\n     * @returns {null}\n     */\n\n  }, {\n    key: 'getActiveTool',\n    value: function getActiveTool() {\n      return this.state.activetool;\n    }\n\n    /**\n     * @param tool\n     * \n     * @returns {*}\n     */\n\n  }, {\n    key: 'stopActiveTool',\n    value: function stopActiveTool(tool) {\n      var _this16 = this;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var activeTool = _this16.getActiveTool();\n        if (tool && (!activeTool || tool === activeTool)) {\n          tool.removeAllListeners();\n          return;\n        }\n        activeTool.removeAllListeners();\n        try {\n          yield (0, _promisify.promisify)(activeTool.stop(true));\n          _this16.state.toolsoftool.splice(0);\n          _this16.state.toolmessages.help = null;\n          _this16.state.activetool = null;\n        } catch (e) {\n          console.warn(e);\n        }\n      }));\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getSession',\n    value: function getSession() {\n      return this._session;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n  }, {\n    key: 'getEditor',\n    value: function getEditor() {\n      return this.state.layer.getEditor();\n    }\n\n    /**\n     * Reset default values\n     */\n\n  }, {\n    key: 'resetDefault',\n    value: function resetDefault() {\n      this.state.title = this.state.originalState.title;\n      this.state.toolboxheader = true;\n      this.state.startstopediting = true;\n      this.constraints = {\n        filter: null,\n        show: null,\n        tools: []\n      };\n\n      if (this.state._enabledtools) {\n        this.state._enabledtools = undefined;\n        this.enableTools();\n        this.state._tools.forEach(function (tool) {\n          tool.visible = true;\n          tool.enabled = false;\n          tool.messages = tool.op.getMessages();\n          tool.disabledtoolsoftools = []; //reset disabled tools eventually set by other\n        });\n      }\n      this.state._disabledtools = null;\n      this.setShow(true);\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @param uniqueId\n     * @param items\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__add',\n    value: function __add(uniqueId, items) {\n      var _this17 = this;\n\n      //state object is an array of feature/features changed in a transaction\n      var d = $.Deferred();\n      // before insert an item into the history\n      // check if are at last state step (no redo was done)\n      // If we are in the middle of undo, delete all changes\n      // in the history from the current \"state\" so if it\n      // can create a new history\n      if (null === this.state.editing.session.current) {\n        this._states = [{ id: uniqueId, items: items }];\n      } else {\n        if (this._states.length > 0 && this.state.editing.session.current < this._states.at(-1).id) {\n          this._states = this._states.filter(function (s) {\n            return s.id <= _this17.state.editing.session.current;\n          });\n        }\n        this._states.push({ id: uniqueId, items: items });\n      }\n\n      this.state.editing.session.current = uniqueId;\n      // set internal state\n      this.__canUndo();\n      this.__canCommit();\n      this.__canRedo();\n      // return unique id key\n      // it can be used in save relation\n      d.resolve(uniqueId);\n      return d.promise();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * undo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__undo',\n    value: function __undo() {\n      var _this18 = this;\n\n      var items = void 0;\n      if (this.state.editing.session.current === this._states[0].id) {\n        this.state.editing.session.current = null;\n        items = this._states[0].items;\n      } else {\n        this._states.find(function (state, idx) {\n          if (state.id === _this18.state.editing.session.current) {\n            items = _this18._states[idx].items;\n            _this18.state.editing.session.current = _this18._states[idx - 1].id;\n            return true;\n          }\n        });\n      }\n      items = (0, _checkSessionItems.checkSessionItems)(this._history.id, items, 0);\n      // set internal state\n      this.__canUndo();\n      this.__canCommit();\n      this.__canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * redo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__redo',\n    value: function __redo() {\n      var _this19 = this;\n\n      var items = void 0;\n      // if not set get first state\n      if (!this.state.editing.session.current) {\n        items = this._states[0].items;\n        // set current to first\n        this.state.editing.session.current = this._states[0].id;\n      } else {\n        this._states.find(function (state, idx) {\n          if (_this19.state.editing.session.current === state.id) {\n            _this19.state.editing.session.current = _this19._states[idx + 1].id;\n            items = _this19._states[idx + 1].items;\n            return true;\n          }\n        });\n      }\n      items = (0, _checkSessionItems.checkSessionItems)(this._history.id, items, 1);\n      // set internal state\n      this.__canUndo();\n      this.__canCommit();\n      this.__canRedo();\n      return items;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param id\n     * \n     * @returns {T}\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getState',\n    value: function __getState(id) {\n      return this._states.find(function (s) {\n        return s.id === id;\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * @returns { boolean } true if we can commit\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canCommit',\n    value: function __canCommit() {\n      var checkCommitItems = this.__commit();\n      var canCommit = false;\n      for (var layerId in checkCommitItems) {\n        var commitItem = checkCommitItems[layerId];\n        canCommit = canCommit || commitItem.length > 0;\n      }\n      this._constrains.commit = canCommit;\n      return this._constrains.commit;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canUdo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canUndo',\n    value: function __canUndo() {\n      var _this20 = this;\n\n      var currentStateIndex = null;\n      if (this.state.editing.session.current && this._states.length) {\n        this._states.forEach(function (state, idx) {\n          if (_this20.state.editing.session.current === state.id) {\n            currentStateIndex = idx;\n            return false;\n          }\n        });\n      };\n      var steps = this._states.length - 1 - currentStateIndex;\n      this._constrains.undo = null !== this.state.editing.session.current && this.state.editing.session.maxSteps > steps;\n      return this._constrains.undo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * canRedo method\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__canRedo',\n    value: function __canRedo() {\n      this._constrains.redo = this._states.at(-1) && this._states.at(-1).id != this.state.editing.session.current || null === this.state.editing.session.current && this._states.length > 0;\n      return this._constrains.redo;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     *\n     * get all changes to send to server (mandare al server)\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__commit',\n    value: function __commit() {\n      var _this21 = this;\n\n      var commitItems = {};\n      var statesToCommit = this._states.filter(function (s) {\n        return s.id <= _this21.state.editing.session.current;\n      });\n      statesToCommit.forEach(function (state) {\n        state.items.forEach(function (item) {\n          var add = true;\n          if (Array.isArray(item)) {\n            item = item[1];\n          }\n          if (commitItems[item.layerId]) {\n            commitItems[item.layerId].forEach(function (commitItem, index) {\n              // check if already inserted feature\n              if (commitItem.getUid() === item.feature.getUid()) {\n                if (item.feature.isNew() && !commitItem.isDeleted() && item.feature.isUpdated()) {\n                  var _item = item.feature.clone();\n                  _item.add();\n                  commitItems[item.layerId][index] = _item;\n                } else if (item.feature.isNew() && item.feature.isDeleted()) {\n                  commitItems[item.layerId].splice(index, 1);\n                } else if (item.feature.isUpdated() || item.feature.isDeleted()) {\n                  commitItems[item.layerId][index] = item.feature;\n                }\n                add = false;\n                return false;\n              }\n            });\n          }\n          if (add) {\n            var _feature2 = item.feature;\n            var layerId = item.layerId;\n            if (!(!_feature2.isNew() && _feature2.isAdded())) {\n              if (!commitItems[layerId]) {\n                commitItems[layerId] = [];\n              }\n              commitItems[layerId].push(_feature2);\n            }\n          }\n        });\n      });\n      return commitItems;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @returns {*|null}\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getLastHistoryState',\n    value: function __getLastHistoryState() {\n      return this._states.at(-1) || null;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__isStarted',\n    value: function __isStarted() {\n      return this.state.editing.session.started;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getHistory',\n    value: function __getHistory() {\n      return this._history;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getEditor',\n    value: function __getEditor() {\n      return this.state.layer.getEditor();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Add temporary features that will be added with save method\n     * \n     * @param { { layerId: string, feature: * } } NewFeat \n     * @param { { layerId: string, feature: * } } OldFeat\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__push',\n    value: function __push(newFeat, oldFeat) {\n      this.state.editing.session.changes.push(oldFeat ? [oldFeat, newFeat] : newFeat); // check is set old (edit)\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Delete temporary feature\n     * \n     * @param layerId\n     * @param feature\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__pushDelete',\n    value: function __pushDelete(layerId, feature) {\n      this.__push({ layerId: layerId, feature: feature.delete() });\n      return feature;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Save temporary changes to the layer in history instance and feature store\n     * \n     * @param options\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__save',\n    value: function __save() {\n      var _this22 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      // fill history\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        // add temporary modify to history\n        if (_this22.state.editing.session.changes.length) {\n          var uniqueId = options.id || Date.now();\n          yield (0, _promisify.promisify)(_this22.__add(uniqueId, _this22.state.editing.session.changes));\n          // clear to temporary changes\n          _this22.state.editing.session.changes = [];\n          // resolve if unique id\n          return uniqueId;\n        }\n        return null;\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Add temporary feature\n     * \n     * @param layerId \n     * @param feature \n     * @param removeNotEditableProperties\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__pushAdd',\n    value: function __pushAdd(layerId, feature) {\n      var removeNotEditableProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      /**\n       * @TODO check if it need to deprecate it. All properties are need\n       * Please take care of this to understand\n       * In case of removeNotEditableProperties true, remove not editable field\n       * from feature properties\n       */\n      var editor = layerId === this.state.layer.getId() ? this.state.layer.getEditor() : ToolBox.get(layerId).getSession().getEditor();\n\n      // remove not editable proprierties from feature\n      if (removeNotEditableProperties) {\n        (editor.getLayer().getEditingNotEditableFields() || []).forEach(function (f) {\n          return feature.unset([f]);\n        });\n      }\n\n      var newFeature = feature.clone();\n\n      this.__push({ layerId: layerId, feature: newFeature.add() });\n\n      return newFeature;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Add temporary feature changes\n     * \n     * @param layerId\n     * @param newFeature\n     * @param oldFeature\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__pushUpdate',\n    value: function __pushUpdate(layerId, newFeature, oldFeature) {\n      // get index of temporary changes\n      var is_new = newFeature.isNew();\n      var i = is_new && this.state.editing.session.changes.findIndex(function (c) {\n        return layerId === c.layerId && c.feature.getId() === newFeature.getId();\n      });\n\n      // in case of new feature\n      if (is_new && i >= 0) {\n        var _feature3 = newFeature.clone();\n        _feature3.add();\n        this.state.editing.session.changes[i].feature = _feature3;\n        return;\n      }\n\n      this.__push({ layerId: layerId, feature: newFeature.update() }, { layerId: layerId, feature: oldFeature.update() });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     *\n     * @param changes\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__rollback',\n    value: function __rollback(changes) {\n      var _this23 = this;\n\n      // skip when..\n      if (changes) {\n        return this.state.layer.getEditor().rollback(changes);\n      }\n\n      // Handle temporary changes of layer\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        var id = _this23.state.layer.getId();\n        changes = { own: [], dependencies: {} };\n\n        _this23.state.editing.session.changes.forEach(function (c) {\n          var change = Array.isArray(c) ? c[0] : c;\n          if (change.layerId === id) {\n            changes.own.push(change);\n          } else {\n            changes.dependencies[change.layerId] = changes.dependencies[change.layerId] || [];\n            // FILO\n            changes.dependencies[change.layerId].unshift(change);\n          }\n        });\n\n        try {\n          yield (0, _promisify.promisify)(_this23.state.layer.getEditor().rollback(changes.own));\n          for (var _id in changes.dependencies) {\n            ToolBox.get(_id).getSession().rollback(changes.dependencies[_id]);\n          }\n          return changes.dependencies;\n        } catch (e) {\n          console.warn(e);\n        } finally {\n          _this23.state.editing.session.changes = [];\n        }\n      }));\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Rollback child changes of current session\n     * \n     * @param ids [array of child layer id]\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__rollbackDependecies',\n    value: function __rollbackDependecies() {\n      var _this24 = this;\n\n      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      ids.forEach(function (id) {\n        var changes = [];\n        _this24.state.editing.session.changes = _this24.state.editing.session.changes.filter(function (temporarychange) {\n          if (temporarychange.layerId === id) {\n            changes.push(temporarychange);\n            return false;\n          }\n        });\n        if (changes.length) {\n          ToolBox.get(id).getSession().rollback(changes);\n        }\n      });\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     *\n     * undo method\n     * \n     * @param items\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__undoSession',\n    value: function __undoSession(items) {\n      items = items || this.__undo();\n      this.state.layer.getEditor().setChanges(items.own, true);\n      this.__canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * redo method\n     * \n     * @param items\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__redoSession',\n    value: function __redoSession(items) {\n      items = items || this.__redo();\n      this.state.layer.getEditor().setChanges(items.own, true);\n      this.__canCommit();\n      return items.dependencies;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Serialize commit\n     * \n     * @returns {{ add: *[], update: *[], relations: {}, delete: *[] }} JSON Object for a commit body send to server\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__getCommitItems',\n    value: function __getCommitItems() {\n      var _this25 = this;\n\n      var itemsToCommit = this.__commit();\n      var id = this.state.layer.getId();\n      var state = void 0;\n      var layer = void 0;\n      var commitObj = {\n        add: [], // features to add\n        update: [], // features to update\n        delete: [], // features to delete\n        relations: {} // relation features\n      };\n      // key is a layer id that has changes to apply\n      for (var key in itemsToCommit) {\n        var isRelation = false; //set relation to false\n        var items = itemsToCommit[key];\n        // case key (layer id) is not equal to id (current layer id on editing)\n        if (key !== id) {\n          isRelation = true; //set true because these changes belong to features relation items\n          var sessionRelation = ToolBox.get(key).getSession();\n          //check lock ids of relation layer\n          var lockids = sessionRelation ? sessionRelation.getEditor().getLockIds() : [];\n          //create a relations object\n          commitObj.relations[key] = {\n            lockids: lockids,\n            add: [],\n            update: [],\n            delete: [],\n            relations: {} //@since v3.7.1\n          };\n          layer = commitObj.relations[key];\n        } else {\n          layer = commitObj;\n        }\n\n        items.forEach(function (item) {\n          //check state of feature item\n          state = item.getState();\n          var GeoJSONFormat = new ol.format.GeoJSON();\n          // item needs to be deleted\n          if ('delete' === state) {\n            //check if is new. If is new mean is not present on server\n            //so no need to say to server to delete it\n            if (!item.isNew()) {\n              layer.delete.push(item.getId());\n            }\n            return;\n          }\n          //convert feature to json ex. {geometry:{tye: 'Point'}, properties:{}.....}\n          var itemObj = GeoJSONFormat.writeFeatureObject(item);\n          //get properties\n          var childs_properties = item.getProperties();\n          for (var p in itemObj.properties) {\n            // in case the value of property is an object\n            if (itemObj.properties[p] && _typeof(itemObj.properties[p]) === 'object' && itemObj.properties[p].constructor === Object) {\n              //need to get value from value attribute object\n              itemObj.properties[p] = itemObj.properties[p].value;\n            }\n            // @TODO explain when this condition happen\n            if (undefined === itemObj.properties[p] && childs_properties[p]) {\n              itemObj.properties[p] = childs_properties[p];\n            }\n          }\n          // in case of add it have to remove not editable properties\n          layer[item.isNew() ? 'add' : item.getState()].push(itemObj);\n        });\n        // check in case of no edit remove relation key\n        if (isRelation && layer.add.length === 0 //no relation features to add\n        && layer.update.length === 0 //no relation features to update\n        && layer.delete.length === 0 //no relation features to delete\n        ) {\n            delete commitObj.relations[key];\n          }\n      }\n\n      // Remove deep relations from current layer (commitObj) that are not relative to that layer\n      var relations = Object.keys(commitObj.relations || {});\n      relations.filter(function (id) {\n        return undefined === _this25.state.layer.getEditor().getLayer().getRelations().getArray().find(function (r) {\n          return id === r.getChild();\n        });\n      }) // child relations\n      .map(function (id) {\n        commitObj.relations[ToolBox.get(id).getSession().getEditor().getLayer().getRelations().getArray().find(function (r) {\n          return -1 !== relations.indexOf(r.getFather());\n        }) // parent relation layer\n        .getFather()].relations[id] = commitObj.relations[id];\n        return id;\n      }).forEach(function (id) {\n        return delete commitObj.relations[id];\n      });\n\n      return commitObj;\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/session.js@v3.9.1\n     * \n     * Clear all things bind to session\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__clearSession',\n    value: function __clearSession() {\n      this._allfeatures = false;\n      this.state.editing.session.started = false;\n      this.state.editing.session.getfeatures = false;\n      this.__clearHistory();\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n     * \n     * @param ids since g3w-client-plugin-editing@v3.8.0\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '__clearHistory',\n    value: function __clearHistory(ids) {\n      var _this26 = this;\n\n      if (ids) {\n        this._states.forEach(function (state, idx) {\n          if (ids.indexOf(state.id) !== -1) {\n            if (_this26.state.editing.session.current && _this26.state.editing.session.current === state.id()) {\n              _this26.__undo();\n            }\n            _this26._states.splice(idx, 1);\n          }\n        });\n      } else {\n        // clear all\n        this._states = [];\n        this.state.editing.session.current = null;\n        this._constrains.commit = false;\n        this._constrains.redo = false;\n        this._constrains.undo = false;\n      }\n    }\n\n    /**\n     * Start session\n     */\n\n  }, {\n    key: '__startSession',\n    value: function () {\n      var _ref33 = _asyncToGenerator(function* () {\n        var _this27 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        try {\n          var features = yield (0, _promisify.promisify)(this.state.layer.getEditor().start(options));\n          this.state.editing.session.started = true;\n          return features;\n        } catch (e) {\n          console.warn(e);\n          return Promise.reject(e);\n        } finally {\n          if (!options.registerEvents) {\n            return;\n          }\n          this.state._getFeaturesOption = options;\n          // register get features event (only in case filter bbox)\n          if (Layer.LayerTypes.VECTOR === this.state._layerType && this.state._getFeaturesOption.filter.bbox) {\n            var fnc = function fnc() {\n              //added ApplicationState.online\n              if (ApplicationState.online && _this27.state.editing.canEdit && 0 === GUI.getContentLength()) {\n                _this27.state._getFeaturesOption.filter.bbox = GUI.getService('map').getMapBBOX();\n                _this27.state.loading = true;\n                _this27._session.getFeatures(_this27.state._getFeaturesOption).then(function (promise) {\n                  return promise.then(function () {\n                    return _this27.state.loading = false;\n                  });\n                });\n              }\n            };\n            this._getFeaturesEvent.event = 'moveend';\n            this._getFeaturesEvent.fnc = debounce(fnc, 300);\n            GUI.getService('map').getMap().on('moveend', this._getFeaturesEvent.fnc);\n          }\n          if (Layer.LayerTypes.VECTOR === options.type && GUI.getContentLength()) {\n            GUI.once('closecontent', function () {\n              setTimeout(function () {\n                GUI.getService('map').getMap().dispatchEvent(_this27._getFeaturesEvent.event);\n              });\n            });\n          }\n        }\n      });\n\n      function __startSession() {\n        return _ref33.apply(this, arguments);\n      }\n\n      return __startSession;\n    }()\n\n    /**\n     * Stop session\n     */\n\n  }, {\n    key: '__stopSession',\n    value: function () {\n      var _ref34 = _asyncToGenerator(function* () {\n        try {\n          if (this.state.editing.session.started || this.state.editing.session.getfeatures) {\n            yield (0, _promisify.promisify)(this.state.layer.getEditor().stop());\n            this.__clearSession();\n          }\n        } catch (e) {\n          console.warn(e);\n          return Promise.reject(e);\n        } finally {\n          if (!this.inEditing()) {\n            return;\n          }\n          if (ApplicationState.online) {\n            this._stopSessionChildren(this.state.id);\n          }\n          // unregister get features event\n          if (this.state._getFeaturesOption.registerEvents && Layer.LayerTypes.VECTOR === this.state._layerType) {\n            GUI.getService('map').getMap().un(this._getFeaturesEvent.event, this._getFeaturesEvent.fnc);\n          }\n        }\n      });\n\n      function __stopSession() {\n        return _ref34.apply(this, arguments);\n      }\n\n      return __stopSession;\n    }()\n\n    /**\n     * Get features from server (by editor)\n     */\n\n  }, {\n    key: '__getFeatures',\n    value: function () {\n      var _ref35 = _asyncToGenerator(function* () {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        if (!this._allfeatures) {\n          this._allfeatures = !options.filter;\n          var features = yield (0, _promisify.promisify)(this.state.layer.getEditor().getFeatures(options));\n          this.state.editing.session.getfeatures = true;\n          return features;\n        }\n        return [];\n      });\n\n      function __getFeatures() {\n        return _ref35.apply(this, arguments);\n      }\n\n      return __getFeatures;\n    }()\n\n    /**\n     * Hook to get informed that are saved on server\n     */\n\n  }, {\n    key: '__saveChangesOnServer',\n    value: function __saveChangesOnServer(commitItems) {\n      if (this._resetOnSaveChangesOnServer) {\n        this.getFieldUniqueValuesFromServer({ reset: true });\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_startTool',\n    value: function _startTool(tool) {\n      var _this28 = this;\n\n      if (tool.getOperator()) {\n        tool.active = true;\n        setTimeout(_asyncToGenerator(function* () {\n          return yield _this28._startOp(tool, {\n            inputs: { layer: _this28.getLayer(), features: [] },\n            context: { session: _this28._session }\n          }, !!GUI.getService('map').isMapHidden());\n        })); // prevent rendering change state\n      }\n    }\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_startOp',\n    value: function () {\n      var _ref37 = _asyncToGenerator(function* (tool, options, hideSidebar) {\n        // reset features\n        options.inputs.features = [];\n\n        if (hideSidebar) {\n          GUI.hideSidebar();\n        }\n\n        try {\n          yield (0, _promisify.promisify)(tool.op.start(options));\n          yield (0, _promisify.promisify)(this._session.save());\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').saveChange(); // after save temp change check if editing service has a autosave\n        } catch (e) {\n          console.warn(e);\n          if (hideSidebar) {\n            GUI.showSidebar();\n          }\n          this._session.rollback();\n        } finally {\n          if (!tool.once && Layer.LayerTypes.TABLE !== this.getLayer().getType()) {\n            yield this._startOp(tool, options, hideSidebar);\n          } else {\n            tool.stop();\n          }\n        }\n      });\n\n      function _startOp(_x24, _x25, _x26) {\n        return _ref37.apply(this, arguments);\n      }\n\n      return _startOp;\n    }()\n\n    /**\n     * ORIGINAL SOURCE: g3w-client-plugin-editing/toolboxes/tool.js@v3.7.1\n     * \n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n\n  }, {\n    key: '_stopTool',\n    value: function _stopTool(tool) {\n      var _this29 = this;\n\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n        if (!tool.getOperator()) {\n          tool.emit('stop', { session: _this29._session });\n          return;\n        }\n        try {\n          yield (0, _promisify.promisify)(tool.getOperator().stop(force));\n        } catch (e) {\n          console.warn(e);\n          _this29._session.rollback();\n        } finally {\n          tool.active = false;\n          tool.emit('stop', { session: _this29._session });\n        }\n      }));\n    }\n  }]);\n\n  return ToolBox;\n}(G3WObject);\n\n;\n\n/**\n * ORIGINAL SOURCE: g3w-client/src/store/sessions.js@v3.9.1\n *\n * Store editing sessions\n *\n * @since g3w-client-plugin-editing@v3.8.0\n */\nToolBox._sessions = {};\nToolBox.get = function (id) {\n  return ToolBox._sessions[id];\n};\nToolBox.clear = function () {\n  return Object.keys(sessions).forEach(function (id) {\n    return delete ToolBox._sessions[id];\n  });\n};\n\n},{\"../components/CopyFeaturesFromOtherLayers.vue\":4,\"../eventbus\":12,\"../g3wsdk/workflow/step\":15,\"../g3wsdk/workflow/workflow\":16,\"../utils/addPartToMultigeometries\":28,\"../utils/addTableFeature\":30,\"../utils/checkSessionItems\":32,\"../utils/chooseFeature\":33,\"../utils/chooseFeatureFromFeatures\":34,\"../utils/cloneFeature\":35,\"../utils/convertFeaturesGeometryToGeometryTypeOfLayer\":36,\"../utils/createEditingDataOptions\":37,\"../utils/evaluateExpressionFields\":39,\"../utils/getDeltaXY\":40,\"../utils/getEditingLayerById\":41,\"../utils/getLayersDependencyFeatures\":44,\"../utils/getNotEditableFieldsNoPkValues\":45,\"../utils/getProjectLayerFeatureById\":47,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/getRelationId\":50,\"../utils/getRelationsInEditing\":51,\"../utils/getRelationsInEditingByFeature\":52,\"../utils/handleSplitFeature\":54,\"../utils/isPointOnVertex\":55,\"../utils/promisify\":57,\"../utils/setAndUnsetSelectedFeaturesStyle\":58,\"../utils/setLayerUniqueFieldValues\":60,\"../utils/unlinkRelation\":61,\"../workflows\":63}],28:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addPartToMultigeometries = addPartToMultigeometries;\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _promisify = require('./promisify');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addparttomultigeometriestask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addparttomultigeometriesstep.js@v3.7.1\n * \n * @returns jQuery promise\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction addPartToMultigeometries(inputs, context) {\n  return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n    var layerId = inputs.layer.getId();\n    var feature = void 0;\n    var originalFeature = void 0;\n\n    // add part\n    if (inputs.features.length > 1) {\n      feature = inputs.features[0];\n      var geometry = feature.getGeometry();\n      originalFeature = feature.clone();\n      geometry.setCoordinates([].concat(_toConsumableArray(geometry.getCoordinates()), _toConsumableArray(inputs.features[1].getGeometry().getCoordinates())));\n    } else {\n      feature = inputs.layer.getEditingLayer().getSource().getFeatures()[0];\n      originalFeature = feature.clone();\n      feature.setGeometry(inputs.features[0].getGeometry());\n    }\n\n    // evaluated geometry expression\n    try {\n      yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature });\n    } catch (e) {\n      console.warn(e);\n    }\n\n    context.session.pushUpdate(layerId, feature, originalFeature);\n\n    inputs.features = [feature];\n    return inputs;\n  }));\n};\n\n},{\"../utils/evaluateExpressionFields\":39,\"./promisify\":57}],29:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addRemoveToMultipleSelectFeatures = addRemoveToMultipleSelectFeatures;\n\nvar _setFeaturesSelectedStyle = require('../utils/setFeaturesSelectedStyle');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/selectelementstask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/selectelementsstep.js@v3.7.1\n *\n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction addRemoveToMultipleSelectFeatures(features, inputs, selected, task) {\n  (features || []).forEach(function (f) {\n    var selIndex = selected.indexOf(f);\n    if (selIndex < 0) {\n      task._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)([f]);\n      selected.push(f);\n    } else {\n      selected.splice(selIndex, 1);\n      f.setStyle(task._originalStyle);\n    }\n    inputs.features = selected;\n  });\n\n  var steps = task.getSteps();\n  var buttonnext = steps.select.buttonnext;\n\n  buttonnext.disabled = buttonnext.condition ? buttonnext.condition({ features: selected }) : 0 === selected.length;\n\n  if (undefined !== steps.select.dynamic) {\n    steps.select.dynamic = selected.length;\n  }\n}\n\n},{\"../utils/setFeaturesSelectedStyle\":59}],30:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addTableFeature = addTableFeature;\n/**\n * @TODO remove reference to `this.getContext`\n * \n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetabletask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addtablefeaturestep.js@v3.7.1\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction addTableFeature(inputs, context) {\n  var feature = inputs.features.length > 0 ? inputs.features[inputs.features.length - 1] : inputs.layer.createNewFeature();\n\n  feature.setTemporaryId();\n\n  inputs.layer.getEditingLayer().getEditingSource().addFeature(feature);\n\n  context.session.pushAdd(inputs.layer.getId(), feature, false);\n\n  inputs.features.push(feature);\n\n  this.getContext().get_default_value = true;\n\n  return $.Deferred(function (d) {\n    return d.resolve(inputs, context);\n  }).promise();\n};\n\n},{}],31:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.areCoordinatesEqual = areCoordinatesEqual;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param feature\n * @param coordinates\n *\n * @returns { boolean }\n */\nfunction areCoordinatesEqual(_ref) {\n  var feature = _ref.feature,\n      coordinates = _ref.coordinates;\n\n  //get geometry from feature\n  var geometry = feature.getGeometry();\n  var type = geometry.getType();\n  var coords = function coords(c1, c2) {\n    return g3wsdk.core.geoutils.areCoordinatesEqual(c1, c2);\n  }; // whether element have same coordinates\n\n  switch (type) {\n    case 'Polygon':\n    case 'MultiLineString':\n      coordinates = _.flatMap(coordinates);\n      return _.flatMap(geometry.getCoordinates()).every(function (c, i) {\n        return coords(c, coordinates[i]);\n      });\n\n    case 'LineString':\n    case 'MultiPoint':\n      return geometry.getCoordinates().every(function (c, i) {\n        return coords(c, coordinates[i]);\n      });\n\n    case 'MultiPolygon':\n      // in case of add part or remove part\n      if (coordinates.length !== geometry.getPolygons().length) {\n        return false;\n      }\n      return geometry.getPolygons().some(function (poly, i) {\n        var _coords = _.flatMap(coordinates[i]);\n        return _.flatMap(poly.getCoordinates()).every(function (c, i) {\n          return coords(c, _coords[i]);\n        });\n      });\n\n    case 'Point':\n      return coords(coordinates, geometry.getCoordinates());\n\n    default:\n      return false;\n  }\n}\n\n},{}],32:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkSessionItems = checkSessionItems;\n/**\n   * ORIGINAL SOURCE: g3w-client/src/core/editing/history.js@v3.9.1\n   * \n   * check if was done an update (update are array contains two items, old and new value)\n   *\n   * @since g3w-client-plugin-editing@v3.8.0\n   */\nfunction checkSessionItems(historyId, items, action) {\n  /**\n   * action: <reffererd to array index>\n   *  0: undo;\n   *  1: redo;\n   **/\n  var newItems = {\n    own: [], //array of changes of layer of the current session\n    dependencies: {} // dependencies\n  };\n\n  items.forEach(function (item) {\n    if (Array.isArray(item)) {\n      item = item[action];\n    }\n    // check if belong to session\n    if (historyId === item.layerId) {\n      newItems.own.push(item);\n    } else {\n      newItems.dependencies[item.layerId] = newItems.dependencies[item.layerId] || {\n        own: [],\n        dependencies: {}\n      };\n      newItems.dependencies[item.layerId].own.push(item);\n    }\n  });\n\n  return newItems;\n}\n\n},{}],33:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chooseFeature = chooseFeature;\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _promisify = require('../utils/promisify');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/choosefeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/choosefeaturestep.js@v3.7.1\n * \n * @returns jQuery promise\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction chooseFeature(inputs) {\n  return (0, _promisify.$promisify)(_asyncToGenerator(function* () {\n    try {\n      if (1 !== inputs.features.length) {\n        var feature = yield (0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: inputs.features, inputs: inputs });\n        inputs.features = [feature];\n      }\n      return inputs;\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }));\n}\n\n},{\"../utils/chooseFeatureFromFeatures\":34,\"../utils/promisify\":57}],34:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chooseFeatureFromFeatures = chooseFeatureFromFeatures;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/g3w-editing-components/choosefeaturetoedit.js@v3.6\n * \n * @since g3w-client-plugin-editing@v3.5.13\n */\n\nfunction chooseFeatureFromFeatures(_ref) {\n  var _ref$features = _ref.features,\n      features = _ref$features === undefined ? [] : _ref$features,\n      inputs = _ref.inputs;\n\n  return new Promise(function (resolve, reject) {\n\n    var feature = [];\n\n    var comp = new (Vue.extend(require('../components/ChooseFeatureToEdit.vue')))({\n      features: Array.isArray(features) ? features : [],\n      feature: feature,\n      attributes: inputs.layer.getEditingFields().map(function (_ref2) {\n        var name = _ref2.name,\n            label = _ref2.label;\n        return { name: name, label: label };\n      })\n    });\n\n    var dialog = g3wsdk.gui.GUI.showModalDialog({\n      title: tPlugin('editing.modal.tools.copyfeaturefromprojectlayer.title'),\n      className: 'modal-left',\n      closeButton: false,\n      message: comp.$mount().$el,\n      buttons: {\n        cancel: { label: 'Cancel', className: 'btn-danger', callback: function callback() {\n            reject();\n          }\n        },\n        ok: { label: 'Ok', className: 'btn-success', callback: function callback() {\n            resolve(feature[0]);\n          }\n        }\n      }\n    });\n\n    dialog.find('button.btn-success').prop('disabled', true);\n\n    comp.$watch('feature', function (feature) {\n      return dialog.find('button.btn-success').prop('disabled', null === feature);\n    });\n  });\n};\n\n},{\"../components/ChooseFeatureToEdit.vue\":3}],35:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cloneFeature = cloneFeature;\n/**\n * Clone a feature by Primary Key\n * \n * @param { Feature } feature  to be cloned\n * @param { TableLayer } layer from which obtain the primary key field\n * \n * @returns { Feature }\n * \n * @since g3w-client-plugin-editing@v3.7.0\n */\nfunction cloneFeature(feature, layer) {\n  var clone = feature.cloneNew();\n  //check if layer has a primary key as field\n  var pk = layer && layer.getEditingFields().find(function (f) {\n    return f.pk;\n  }); // get PK field (of value-relation widget?)\n  /**\n   * In case of layer has a primary key field and is not editabe,\n   *  clone feature need to set pk value to null to avoid conflict\n   *  with already pk field value store on server*/\n  if (pk && false === pk.editable) {\n    clone.set(pk.name, null);\n  }\n  return clone;\n};\n\n},{}],36:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.convertFeaturesGeometryToGeometryTypeOfLayer = convertFeaturesGeometryToGeometryTypeOfLayer;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param features\n * @param geometryType\n *\n * @returns { Array } converted features\n */\nfunction convertFeaturesGeometryToGeometryTypeOfLayer(_ref) {\n  var _ref$features = _ref.features,\n      features = _ref$features === undefined ? [] : _ref$features,\n      geometryType = _ref.geometryType;\n\n  var converted = [];\n  features.forEach(function (f) {\n    var type = f.getGeometry() && f.getGeometry().getType();\n    if (geometryType === type) {\n      converted.push(f);\n    } else if (g3wsdk.core.geoutils.isSameBaseGeometryType(type, geometryType) && (g3wsdk.core.geometry.Geometry.isMultiGeometry(geometryType) || !g3wsdk.core.geometry.Geometry.isMultiGeometry(type))) {\n      var cloned = f.clone();\n      cloned.__layerId = f.__layerId;\n      cloned.setGeometry(g3wsdk.core.geoutils.convertSingleMultiGeometry(f.getGeometry(), geometryType));\n      converted.push(cloned);\n    }\n  });\n  return converted;\n};\n\n},{}],37:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createEditingDataOptions = createEditingDataOptions;\nvar GUI = g3wsdk.gui.GUI;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { 'all' | 'bbox' | 'field' | 'fid' | '1:1' } filterType\n * @param { Object } options\n * @param options.feature\n * @param options.relation\n * @param options.field\n * @param options.layerId\n * @param options.operator\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\n\nfunction createEditingDataOptions() {\n  var filterType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var filter = void 0;\n\n  switch (filterType) {\n\n    case 'all':\n      filter = undefined;\n      break;\n\n    case 'bbox':\n      filter = {\n        bbox: GUI.getService('map').getMapBBOX()\n      };\n      break;\n\n    case 'field':\n      filter = {\n        field: {\n          field: options.field,\n          type: 'editing'\n        }\n      };\n      break;\n\n    case 'fid':\n      if ('not' !== options.operator) {\n        // get relations of current feature\n        filter = {\n          fid: {\n            fid: options.feature.getId(),\n            layer: { id: options.layerId },\n            type: 'editing',\n            relation: options.relation.state,\n            formatter: 0 // 0 = retrieve stored value\n          }\n        };\n      }\n      break;\n\n    // relation 1:1\n    case '1:1':\n      filter = {\n        field: options.relation.getChildField()[0] + '|eq|' + options.feature.get(options.relation.getFatherField()[0]),\n        type: 'editing'\n      };\n      break;\n\n  }\n\n  return {\n    registerEvents: true, // usefult to get register vent on toolbox example mapmoveend\n    editing: true,\n    filter: filter\n  };\n};\n\n},{}],38:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFeature = createFeature;\nvar Feature = g3wsdk.core.layer.features.Feature;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Create a new feature\n *\n * @param layerId\n * @param options.geometry.type\n * @param options.geometry.coordinates\n *\n * @returns { Feature }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\n\nfunction createFeature(layerId) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var feature = new Feature();\n\n  if (options.geometry) {\n    feature.setGeometry(new ol.geom[options.geometry.type](options.geometry.coordinates));\n  }\n\n  feature.setProperties(options.properties);\n  feature.setTemporaryId();\n\n  var toolbox = this.getToolBoxById(layerId);\n  var editingLayer = toolbox.getLayer().getEditingLayer();\n  var session = toolbox.getSession();\n\n  editingLayer.getSource().addFeature(feature);\n  session.pushAdd(layerId, feature, false);\n\n  return feature;\n}\n\n},{}],39:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.evaluateExpressionFields = undefined;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param expression.inputs.layer\n * @param expression.context.excludeFields\n * @param expression.context.get_default_value\n * @param expression.feature\n *\n * @returns {Promise<void>}\n *\n * @since g3w-client-plugin-editing@v3.5.14\n */\nvar evaluateExpressionFields = exports.evaluateExpressionFields = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        inputs = _ref2.inputs,\n        context = _ref2.context,\n        feature = _ref2.feature;\n\n    var promises = []; // promises from expression evaluation\n\n    inputs.layer.getFieldsWithValues(feature, {\n      exclude: context.excludeFields,\n      get_default_value: undefined !== context.get_default_value ? context.get_default_value : false\n    }).forEach(function (field) {\n\n      // default expression\n      if (field.input.options.default_expression && (field.input.options.default_expression.apply_on_update || feature.isNew())) {\n        promises.push(new Promise(function () {\n          var _ref3 = _asyncToGenerator(function* (resolve, reject) {\n            try {\n              yield g3wsdk.core.input.inputService.handleDefaultExpressionFormInput({\n                field: field,\n                feature: feature,\n                qgs_layer_id: inputs.layer.getId(),\n                parentData: (0, _getParentFormData.getParentFormData)()\n              });\n              feature.set(field.name, field.value);\n              resolve(feature);\n            } catch (e) {\n              reject(e);\n            }\n          });\n\n          return function (_x2, _x3) {\n            return _ref3.apply(this, arguments);\n          };\n        }()));\n      }\n\n      // filter expression\n      if (field.input.options.filter_expression) {\n        promises.push(new Promise(function () {\n          var _ref4 = _asyncToGenerator(function* (resolve, reject) {\n            try {\n              yield g3wsdk.core.input.inputService.handleFilterExpressionFormInput({\n                field: field,\n                feature: feature,\n                qgs_layer_id: inputs.layer.getId(),\n                parentData: (0, _getParentFormData.getParentFormData)()\n              });\n              feature.set(field.name, field.value);\n              resolve(feature);\n            } catch (e) {\n              reject(e);\n            }\n          });\n\n          return function (_x4, _x5) {\n            return _ref4.apply(this, arguments);\n          };\n        }()));\n      }\n    });\n\n    yield Promise.allSettled(promises);\n\n    return feature;\n  });\n\n  return function evaluateExpressionFields() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _getParentFormData = require('./getParentFormData');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n;\n\n},{\"./getParentFormData\":46}],40:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDeltaXY = getDeltaXY;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/moveelementstask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/movelementsstep.js@v3.7.1\n *\n * @param { Object } delta\n * @param delta.x\n * @param delta.y\n * @param delta.coordinates\n * \n * @returns {{ x: number, y: number }}\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getDeltaXY() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      x = _ref.x,\n      y = _ref.y,\n      coordinates = _ref.coordinates;\n\n  var coords = _getCoordinates(coordinates);\n  return {\n    x: x - coords.x,\n    y: y - coords.y\n  };\n}\n\nfunction _getCoordinates(coords) {\n  return Array.isArray(coords[0]) ? _getCoordinates(coords[0]) : {\n    x: coords[0],\n    y: coords[1]\n  };\n}\n\n},{}],41:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEditingLayerById = getEditingLayerById;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getEditingLayerById(layerId) {\n  return g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayerById(layerId);\n}\n\n},{}],42:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFeatureTableFieldValue = getFeatureTableFieldValue;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Finalize \"formatter\" value for any kind of field\n *\n * @param { string }   opts.layerId\n * @param {ol.Feature} opts.feature\n * @param { string }   opts.property\n *\n * @returns (field.key) or (field.value)\n *\n * @since g3w-client-plugin-editing@v3.7.0\n */\nfunction getFeatureTableFieldValue() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      feature = _ref.feature,\n      property = _ref.property;\n\n  // get editable fields\n  var fields = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').getLayerById(layerId).config.editing.fields;\n\n  // get field value (raw)\n\n  var value = feature.get(property);\n\n  // get key-value fields implicated into: https://github.com/g3w-suite/g3w-client-plugin-editing/pull/64\n  var values = null !== value && (fields.filter(function (field) {\n    return ['select_autocomplete', 'select'].includes(field.input.type);\n  }) || []).reduce(function (kv, field) {\n    kv[field.name] = field.input.options.values;return kv;\n  }, {});\n\n  // get last key-value feature add to\n  var kv_field = values && values[property] && values[property].find(function (kv) {\n    return value == kv.value;\n  });\n\n  // return key for key-values fields (raw field value otherwise)\n  return kv_field ? kv_field.key : value;\n}\n\n},{}],43:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getFormFields = getFormFields;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Get form fields\n *\n * @param form.inputs.layer\n * @param form.inputs.features\n * @param form.context.excludeFields\n * @param form.context.get_default_value\n * @param form.isChild                   - whether is child form (ie. belongs to relation)\n * @param form.multi                     - in case of multi editing set all fields to null\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getFormFields() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      inputs = _ref.inputs,\n      context = _ref.context,\n      feature = _ref.feature,\n      _ref$isChild = _ref.isChild,\n      isChild = _ref$isChild === undefined ? false : _ref$isChild,\n      multi = _ref.multi;\n\n  var has_unique = false; // check for unique validation\n\n  var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n  var relationLayerId = _workflow.Workflow.Stack.getFirst().getInputs().layer.getId(); // root layerId (in case of child edit relation)\n  var layerId = inputs.layer.getId(); // current form layerId\n  var unique_values = []; // unique values by feature field\n\n  var fields = inputs.layer.getFieldsWithValues( // editing fields with values (in case of update)\n  feature, {\n    exclude: context.excludeFields,\n    get_default_value: undefined !== context.get_default_value ? context.get_default_value : false\n  });\n\n  fields.forEach(function (field) {\n    if (field.validate.unique && field.editable) {\n      has_unique = true;\n      unique_values.push({\n        field: field, // feature field\n        _value: feature.get(field.name) // feature field value (current in editing)\n      });\n    }\n  });\n\n  unique_values.forEach(function (_ref2) {\n    var _value = _ref2._value,\n        field = _ref2.field;\n\n    var current_values = void 0; // current editing feature add to\n\n    var relations = isChild && service.state.uniqueFieldsValues[relationLayerId] && service.state.uniqueFieldsValues[relationLayerId].__uniqueFieldsValuesRelations;\n    var has_values = relations && undefined !== relations && undefined !== relations[layerId] && undefined !== relations[layerId][field.name];\n\n    // child form --> belongs to relation (get child layer unique field values)\n    if (isChild && has_values) {\n      current_values = relations[layerId][field.name];\n    }\n\n    // root layer --> TODO: CHECK IF FIELD IS RELATED TO 1:1 RELATION\n    if (!isChild || !has_values) {\n      current_values = service.state.uniqueFieldsValues[layerId] ? service.state.uniqueFieldsValues[layerId][field.name] : [];\n    }\n\n    // convert \"current\" values to string (when not null or undefined)\n    current_values.forEach(function (value) {\n      field.validate.exclude_values.add([null, undefined].indexOf(value) === -1 ? '' + value : value);\n    });\n\n    // convert \"inputs\" values to string (when not null or undefined)\n    inputs.features.forEach(function (feature) {\n      var value = feature.get(field.name);\n      if ([null, undefined].indexOf(value) === -1) {\n        field.validate.exclude_values.add('' + value);\n      }\n    });\n\n    // remove current value from exclude_values\n    field.validate.exclude_values.delete(_value);\n  });\n\n  // skip when ..\n  if (!has_unique) {\n    return _handleMulti(fields, multi);\n  }\n\n  // Listen event method after close/save form\n  var savedfeatureFnc = function savedfeatureFnc() {\n    unique_values.forEach(function (_ref3) {\n      var _value = _ref3._value,\n          field = _ref3.field;\n\n      // skip when ...\n      if (_value === field.value) {\n        return;\n      }\n      var layer = isChild && service.state.uniqueFieldsValues[relationLayerId];\n\n      // relation form\n      if (layer) {\n        // change relation layer unique field values\n        layer.__uniqueFieldsValuesRelations = layer.__uniqueFieldsValuesRelations || {};\n        layer.__uniqueFieldsValuesRelations[layerId] = layer.__uniqueFieldsValuesRelations[layerId] || {};\n        var values = new Set(service.state.uniqueFieldsValues[layerId][field.name]);\n        values.delete(_value);\n        values.add(field.value);\n        layer.__uniqueFieldsValuesRelations[layerId][field.name] = values;\n      }\n\n      // root layer form \n      if (!layer && service.state.uniqueFieldsValues[layerId] && undefined !== service.state.uniqueFieldsValues[layerId][field.name]) {\n        // change layer unique field values\n        var _values = service.state.uniqueFieldsValues[layerId][field.name];\n        _values.delete(_value);\n        _values.add(field.value);\n      }\n    });\n\n    // Save temporary relation feature changes on father (root) layer feature \n    var relations = false === isChild && service.state.uniqueFieldsValues[layerId] && service.state.uniqueFieldsValues[layerId].__uniqueFieldsValuesRelations;\n\n    // skip when no relation unique fields values are stored\n    if (relations && undefined !== relations) {\n      Object.keys(relations).forEach(function (relationLayerId) {\n        Object.entries(relations[relationLayerId]).forEach(function (_ref4) {\n          var _ref5 = _slicedToArray(_ref4, 2),\n              fieldName = _ref5[0],\n              uniqueValues = _ref5[1];\n\n          service.state.uniqueFieldsValues[relationLayerId][fieldName] = uniqueValues;\n        });\n      });\n      // clear temporary relations unique fields values\n      if (service.state.uniqueFieldsValues[layerId]) {\n        delete service.state.uniqueFieldsValues[layerId].__uniqueFieldsValuesRelations;\n      }\n    }\n\n    return { once: true };\n  };\n\n  service.subscribe('savedfeature_' + layerId, savedfeatureFnc);\n  service.subscribe('closeform_' + layerId, function () {\n    service.unsubscribe('savedfeature_' + layerId, savedfeatureFnc);\n    // clear temporary relations unique fields values\n    if (service.state.uniqueFieldsValues[layerId]) {\n      delete service.state.uniqueFieldsValues[layerId].__uniqueFieldsValuesRelations;\n    }\n    return { once: true };\n  });\n\n  return _handleMulti(fields, multi);\n};\n\nfunction _handleMulti(fields, multi) {\n  if (multi) {\n    fields = fields.map(function (field) {\n      var f = JSON.parse(JSON.stringify(field));\n      f.value = null;\n      f.forceNull = true;\n      f.validate.required = false;\n      return f;\n    }).filter(function (field) {\n      return !field.pk;\n    });\n  }\n  return fields;\n}\n\n},{\"../g3wsdk/workflow/workflow\":16}],44:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLayersDependencyFeatures = undefined;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { string } layerId\n * @param opts\n *\n * @returns { Promise<Awaited<unknown>[]> }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar getLayersDependencyFeatures = exports.getLayersDependencyFeatures = function () {\n  var _ref = _asyncToGenerator(function* (layerId) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n\n    var layer = service.getLayerById(layerId);\n    var relations = opts.relations || layer.getChildren().length && layer.getRelations() && (0, _getRelationsInEditing.getRelationsInEditing)({ layerId: layerId, relations: layer.getRelations().getArray().filter(function (r) {\n        return r.getFather() === layerId;\n      }) }) || [];\n\n    var response = void 0;\n\n    try {\n      response = yield Promise.all(relations.map(function () {\n        var _ref2 = _asyncToGenerator(function* (relation) {\n\n          if (relation.setLoading) {\n            relation.setLoading(true);\n          } else {\n            relation.loading = true;\n          }\n\n          var id = (0, _getRelationId.getRelationId)({ layerId: layerId, relation: relation });\n\n          opts.relation = relation;\n          opts.layerId = layerId;\n          opts.filterType = 'ONE' === (relation.getType ? relation.getType() : relation.type) ? '1:1' : opts.filterType; // In a case of relation 1:1\n          var filterType = opts.filterType || 'fid';\n          var options = (0, _createEditingDataOptions.createEditingDataOptions)(filterType, opts);\n          var session = service.state.sessions[id];\n          var online = ApplicationState.online && session;\n          var toolbox = service.getToolBoxById(id);\n\n          // getLayersDependencyFeaturesFromSource\n\n          opts.operator = undefined !== opts.operator ? opts.operator : 'eq';\n\n          var _getRelationFieldsFro = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: id, relation: relation }),\n              ownField = _getRelationFieldsFro.ownField,\n              relationField = _getRelationFieldsFro.relationField;\n\n          var features = service.getLayerById(layerId).readEditingFeatures();\n          var featureValues = relationField.map(function (field) {\n            return opts.feature.get(field);\n          });\n\n          // try to get feature from source without server request\n          var find = (!ApplicationState.online || !session || session.isStarted()) && 'eq' === opts.operator && ownField.every(function (field, i) {\n            return features.find(function (f) {\n              return f.get(field) == featureValues[i];\n            });\n          });\n\n          toolbox.startLoading();\n\n          try {\n            if (online && !session.isStarted()) {\n              yield (0, _promisify.promisify)(session.start(options)); // start session and get features\n            } else if (online && !find) {\n              yield (0, _promisify.promisify)(session.getFeatures(options)); // request features from server\n            }\n          } catch (promise) {\n            try {\n              yield (0, _promisify.promisify)(promise);\n            } catch (e) {\n              console.warn(e, promise);\n            }\n          }\n\n          toolbox.stopLoading();\n\n          return id;\n        });\n\n        return function (_x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }()));\n    } catch (e) {\n      console.warn(e);\n    }\n\n    // at the end se loading false\n    relations.forEach(function (relation) {\n      if (relation.setLoading) {\n        relation.setLoading(false);\n      } else {\n        relation.loading = false;\n      }\n    });\n\n    return response;\n  });\n\n  return function getLayersDependencyFeatures(_x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _promisify = require('../utils/promisify');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _getRelationId = require('../utils/getRelationId');\n\nvar _getRelationsInEditing = require('../utils/getRelationsInEditing');\n\nvar _createEditingDataOptions = require('../utils/createEditingDataOptions');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar ApplicationState = g3wsdk.core.ApplicationState;\n\n},{\"../utils/createEditingDataOptions\":37,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/getRelationId\":50,\"../utils/getRelationsInEditing\":51,\"../utils/promisify\":57}],45:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNotEditableFieldsNoPkValues = getNotEditableFieldsNoPkValues;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param layer,\n * @param feature\n *\n * @returns Array of fields\n */\nfunction getNotEditableFieldsNoPkValues(_ref) {\n  var layer = _ref.layer,\n      feature = _ref.feature;\n\n  return layer.getEditingNotEditableFields().reduce(function (fields, field) {\n    fields[field] = layer.isPkField(field) ? null : feature.get(field); // NB: Primary Key fields need to be `null`\n    return fields;\n  }, {});\n}\n\n},{}],46:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getParentFormData = getParentFormData;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @returns { undefined | { feature: * , qgs_layer_id: * } }\n */\nfunction getParentFormData() {\n  // skip when ..\n  if (!(_workflow.Workflow.Stack.getLength() > 1)) {\n    return;\n  }\n\n  var _Workflow$Stack$getPa = _workflow.Workflow.Stack.getParent().getInputs(),\n      features = _Workflow$Stack$getPa.features,\n      layer = _Workflow$Stack$getPa.layer,\n      _Workflow$Stack$getPa2 = _Workflow$Stack$getPa.fields,\n      fields = _Workflow$Stack$getPa2 === undefined ? [] : _Workflow$Stack$getPa2;\n\n  // in case of temporary fields (setted by form) set temporary value to feature (cloned) parent\n\n\n  var feature = features[features.length - 1].clone();\n\n  fields.forEach(function (_ref) {\n    var name = _ref.name,\n        value = _ref.value;\n    feature.set(name, value);\n  });\n\n  return {\n    feature: feature,\n    qgs_layer_id: layer.getId()\n  };\n};\n\n},{\"../g3wsdk/workflow/workflow\":16}],47:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { Object } opts\n * @param { string } opts.layerId\n * @param opts.fid\n *\n * @returns {Promise<*>}\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar getProjectLayerFeatureById = exports.getProjectLayerFeatureById = function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var layerId = _ref.layerId,\n        fid = _ref.fid;\n\n    var feature = void 0;\n    try {\n      var response = yield XHR.get({\n        url: CatalogLayersStoresRegistry.getLayerById(layerId).getUrl('data'),\n        params: { fids: fid }\n      });\n      var features = getFeaturesFromResponseVectorApi(response);\n      if (features.length > 0) {\n        feature = features[0];\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n    return feature;\n  });\n\n  return function getProjectLayerFeatureById(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar XHR = g3wsdk.core.utils.XHR;\nvar getFeaturesFromResponseVectorApi = g3wsdk.core.geoutils.getFeaturesFromResponseVectorApi;\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{}],48:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelation1_1ChildFeature = undefined;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * @param { Object } opts\n * @param opts.relation\n * @param opts.fatherFormRelationField\n * \n * @returns {Promise<{feature: *, locked: boolean}>}\n * \n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar getRelation1_1ChildFeature = exports.getRelation1_1ChildFeature = function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var relation = _ref.relation,\n        fatherFormRelationField = _ref.fatherFormRelationField;\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n    var fatherLayerId = relation.getFather();\n    var childLayerId = relation.getChild(); // get relation child layer id\n    var childField = relation.getChildField()[0];\n\n    // lock feature false\n    var locked = false;\n    var feature = service.getLayerById(childLayerId).getEditingSource().readFeatures().find(function (f) {\n      return f.get(childField) === fatherFormRelationField.value;\n    });\n\n    //get feature from server and lock\n    if (undefined === feature) {\n\n      var childFeatureStore = service.getLayerById(childLayerId).getFeaturesStore();\n\n      var unByKey = childFeatureStore.oncebefore('featuresLockedByOtherUser', function (features) {\n        feature = features[0];\n      });\n\n      yield (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(fatherLayerId, {\n        feature: new ol.Feature(_defineProperty({}, fatherFormRelationField.name, fatherFormRelationField.value)),\n        relations: [relation]\n      });\n\n      //remove listener\n      childFeatureStore.un('featuresLockedByOtherUser', unByKey);\n\n      //in case of no locked check feature on source\n      if (undefined === feature) {\n\n        feature = service.getLayerById(childLayerId).getEditingSource().readFeatures().find(function (f) {\n          return f.get(childField) === fatherFormRelationField.value;\n        });\n      }\n    }\n\n    //not find on source need to check if exist\n    if (undefined === feature) {\n\n      try {\n        var layer = CatalogLayersStoresRegistry.getLayerById(childLayerId);\n\n        var _ref4 = yield DataRouterService.getData('search:features', { // get feature of relation layer based on value of relation field\n          inputs: {\n            layer: layer,\n            formatter: 0,\n            filter: g3wsdk.core.utils.createFilterFormInputs({\n              layer: layer,\n              search_endpoint: 'api',\n              inputs: [{\n                attribute: childField,\n                value: fatherFormRelationField.value\n              }]\n            }),\n            search_endpoint: 'api'\n          },\n          outputs: false\n        }),\n            data = _ref4.data;\n\n        if (data && data[0] && 1 === data[0].features.length) {\n          // NB: length == 1, due to 1:1 relation type\n          //locked\n          locked = true;\n          feature = data[0].features[0];\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n\n    //return\n    return {\n      feature: feature, //feature search\n      locked: locked //locked status\n    };\n  });\n\n  return function getRelation1_1ChildFeature(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\nvar DataRouterService = g3wsdk.core.data.DataRouterService;\n\n},{\"../utils/getLayersDependencyFeatures\":44}],49:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationFieldsFromRelation = getRelationFieldsFromRelation;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Based on layerId and relation, extract field of relation.\n * ownField are array of fields related to relation and belong to layerId\n * relationField area array of fields related to relation thar belong to other layer in relation with layerId\n * \n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relation\n *\n * @returns {{ ownField: [], relationField: [] }} `ownField` and `relationField` are Arrays since g3w-client-plugin-editing@v3.7.0\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationFieldsFromRelation() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      relation = _ref.relation;\n\n  /** @type { string } */\n  var childId = relation.getChild ? relation.getChild() : relation.child;\n  /** @type { Boolean } whether is a child */\n  var isChild = childId !== layerId;\n  /** @type { Array } of fields */\n  var _fatherField = relation.getFatherField ? relation.getFatherField() : relation.fatherField;\n  /** @type { Array } of fields */\n  var _childField = relation.getChildField ? relation.getChildField() : relation.childField;\n\n  return {\n    ownField: isChild ? _fatherField : _childField,\n    relationField: isChild ? _childField : _fatherField\n  };\n}\n\n},{}],50:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationId = getRelationId;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relation\n *\n * @returns the layer id of the other layer that is in relation with layerId\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationId() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      relation = _ref.relation;\n\n  var fatherId = relation.getFather ? relation.getFather() : relation.father;\n  var childId = relation.getChild ? relation.getChild() : relation.child;\n\n  return fatherId === layerId ? childId : fatherId;\n}\n\n},{}],51:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationsInEditing = getRelationsInEditing;\n\nvar _getRelationId = require('../utils/getRelationId');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relations\n *\n * @returns { Array }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationsInEditing(_ref) {\n  var layerId = _ref.layerId,\n      _ref$relations = _ref.relations,\n      relations = _ref$relations === undefined ? [] : _ref$relations;\n\n  var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n  return relations.filter(function (r) {\n    return service.getToolBoxById((0, _getRelationId.getRelationId)({ layerId: layerId, relation: r }));\n  });\n}\n\n},{\"../utils/getRelationId\":50}],52:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRelationsInEditingByFeature = getRelationsInEditingByFeature;\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * Get Relation in editing\n *\n * @param { Object } opts\n * @param opts.layerId\n * @param opts.relations\n * @param opts.feature\n *\n * @returns { Array }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction getRelationsInEditingByFeature() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      layerId = _ref.layerId,\n      _ref$relations = _ref.relations,\n      relations = _ref$relations === undefined ? [] : _ref$relations,\n      feature = _ref.feature;\n\n  var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n\n  var relationsinediting = [];\n  var relationinediting = void 0;\n  relations.forEach(function (relation) {\n    var child = relation.getChild ? relation.getChild() : relation.child;\n    var father = relation.getFatherField ? relation.getFatherField() : relation.fatherField;\n    var relationLayerId = child === layerId ? father : child; // get relation LayerId\n    //check if the layer is editable\n    if (service.getLayerById(relationLayerId)) {\n      var layer = service.getToolBoxById(relationLayerId).getLayer();\n      var fatherLayer = service.getLayerById(relation.getFather ? relation.getFather() : relation.father);\n\n      var _getRelationFieldsFro = (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ layerId: relationLayerId, relation: relation }),\n          ownField = _getRelationFieldsFro.ownField,\n          relationField = _getRelationFieldsFro.relationField;\n      // get features of relation child layers\n      // Loop relation fields\n      // In case of new feature, need to check if field is pk field\n\n\n      var values = relationField.map(function (field) {\n        return feature.isNew() && fatherLayer.isPkField(field) ? feature.getId() : feature.get(field);\n      });\n\n      relationinediting = {\n        relation: relation.getState(),\n        // get relation attributes by feature\n        relations: service.getLayerById(relationLayerId).readEditingFeatures().filter(function (feature) {\n          return ownField.every(function (field, i) {\n            return feature.get(field) == values[i];\n          });\n        }) // get relations by feature\n        .map(function (relation) {\n          return {\n            fields: layer.getFieldsWithValues(relation, { relation: true }),\n            id: relation.getId()\n          };\n        })\n      };\n      relationinediting.validate = {\n        valid: true\n      };\n      relationsinediting.push(relationinediting);\n    }\n  });\n  return relationsinediting;\n}\n\n},{\"../utils/getRelationFieldsFromRelation\":49}],53:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Handle layer relation 1:1 features related to feature\n *\n * @param opts.layerId Root layerId\n * @param opts.features Array of update/new features belong to Root layer\n * @param opts.fields Array of form fields father\n *\n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar handleRelation1_1LayerFields = exports.handleRelation1_1LayerFields = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        layerId = _ref2.layerId,\n        _ref2$features = _ref2.features,\n        features = _ref2$features === undefined ? [] : _ref2$features,\n        _ref2$fields = _ref2.fields,\n        fields = _ref2$fields === undefined ? [] : _ref2$fields,\n        task = _ref2.task;\n\n    // skip when no features\n    if (features.length === 0) {\n      return;\n    }\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing');\n\n    // Get layer relation 1:1\n    var promises = CatalogLayersStoresRegistry.getLayerById(layerId).getRelations().getArray().filter(function (relation) {\n      return 'ONE' === relation.getType();\n    }).map(function (relation) {\n      return new Promise(function () {\n        var _ref3 = _asyncToGenerator(function* (resolve) {\n          // skip when layer is not a father layer (1:1 relation)\n          if (layerId !== relation.getFather()) {\n            resolve();\n            return;\n          }\n          var fatherField = relation.getFatherField()[0];\n          var value = features[0].get(fatherField);\n\n          //no set father field value. No set\n          if (null === value) {\n            resolve();\n            return;\n          }\n\n          // check if child relation layer is editable (in editing)\n          var childLayerId = relation.getChild();\n          var childField = relation.getChildField()[0];\n          var source = service.getLayerById(childLayerId).getEditingSource();\n          var childFeature = void 0; // original child feature\n          var newChild = void 0; //eventually child feature cloned with changes\n\n          //check if child feature is already add to\n          childFeature = source.readFeatures().find(function (f) {\n            return f.get(childField) === value;\n          });\n\n          var fieldsUpdated = undefined !== service.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n            return f.vectorjoin_id && f.vectorjoin_id === relation.getId();\n          }).find(function (_ref4) {\n            var name = _ref4.name;\n            return fields.find(function (f) {\n              return f.name == name;\n            }).update;\n          });\n\n          var isNewChildFeature = undefined === childFeature;\n\n          //check if fields related to child are changed\n          if (fieldsUpdated) {\n            //Check if we need to create new child feature\n            if (isNewChildFeature) {\n              //create feature for child layer\n              childFeature = new g3wsdk.core.layer.features.Feature();\n              childFeature.setTemporaryId();\n              // set name attribute to `null`\n              CatalogLayersStoresRegistry.getLayerById(childLayerId).getEditingFields().forEach(function (field) {\n                return childFeature.set(field.name, null);\n              });\n              //set father field value\n              childFeature.set(childField, fields.find(function (f) {\n                return fatherField === f.name;\n              }).value);\n              //add feature to child source\n              source.addFeature(childFeature);\n              //new feature and child feature are the same\n              newChild = childFeature;\n            } else {\n              //is update\n              if (childFeature) {\n                //clone child Feature so all changes apply by father are set to clone new feature\n                newChild = childFeature.clone();\n              }\n            }\n\n            //check if there is a childFeature to save\n            if (childFeature) {\n              // Loop editable only field of father layerId when\n              // a child relation (1:1) is bind to current feature\n              var editiableRelatedFieldChild = service.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n                return f.vectorjoin_id && f.vectorjoin_id === relation.getId() && f.editable;\n              });\n\n              editiableRelatedFieldChild.forEach(function (field) {\n                return newChild.set(field.name.replace(relation.getPrefix(), ''), features[0].get(field.name));\n              });\n\n              // add relation new relation\n              if (isNewChildFeature) {\n\n                // check if father field is a Pk (Primary key) if feature is new\n                if (service.getLayerById(layerId).isPkField(fatherField)) {\n                  childFeature.set(childField, features[0].getId()); // set temporary\n                }\n\n                //if new need to add to session\n                task.getContext().session.pushAdd(childLayerId, newChild, false);\n              } else {\n                //need to update source child feature\n                source.updateFeature(newChild);\n                //need to update\n                task.getContext().session.pushUpdate(childLayerId, newChild, childFeature);\n              }\n            }\n          }\n\n          resolve();\n        });\n\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    });\n\n    yield Promise.allSettled(promises);\n  });\n\n  return function handleRelation1_1LayerFields() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{}],54:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleSplitFeature = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/splitfeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/splitfeaturestep.js@v3.7.1\n *\n * @param feature\n * @param inputs\n * @param context\n * @param splittedGeometries\n * \n * @returns {Promise<*[]>}\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar handleSplitFeature = exports.handleSplitFeature = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        feature = _ref2.feature,\n        inputs = _ref2.inputs,\n        context = _ref2.context,\n        _ref2$splittedGeometr = _ref2.splittedGeometries,\n        splittedGeometries = _ref2$splittedGeometr === undefined ? [] : _ref2$splittedGeometr;\n\n    var newFeatures = [];\n    var layer = inputs.layer;\n\n    var session = context.session;\n    var source = layer.getEditingLayer().getSource();\n    var layerId = layer.getId();\n    var oriFeature = feature.clone();\n    inputs.features = splittedGeometries.length ? [] : inputs.features;\n    var splittedGeometriesLength = splittedGeometries.length;\n\n    for (var index = 0; index < splittedGeometriesLength; index++) {\n      var splittedGeometry = splittedGeometries[index];\n      if (0 === index) {\n        /**\n         * check geometry evaluated expression\n         */\n        feature.setGeometry(splittedGeometry);\n        try {\n          yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature });\n        } catch (err) {\n          console.warn(err);\n        }\n\n        session.pushUpdate(layerId, feature, oriFeature);\n      } else {\n        yield* function* () {\n          var newFeature = (0, _cloneFeature.cloneFeature)(oriFeature, layer);\n          newFeature.setGeometry(splittedGeometry);\n\n          // set media fields to null\n          layer.getEditingMediaFields({}).forEach(function (f) {\n            return newFeature.set(f, null);\n          });\n\n          feature = new Feature({ feature: newFeature });\n\n          feature.setTemporaryId();\n\n          // evaluate geometry expression\n          try {\n            yield (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature });\n          } catch (e) {\n            console.warn(e);\n          }\n\n          /**\n           * @todo improve client core to handle this situation on sesssion.pushAdd not copy pk field not editable only\n           */\n          var noteditablefieldsvalues = (0, _getNotEditableFieldsNoPkValues.getNotEditableFieldsNoPkValues)({ layer: layer, feature: feature });\n\n          if (Object.entries(noteditablefieldsvalues).length) {\n            var _newFeature = session.pushAdd(layerId, feature);\n            Object.entries(noteditablefieldsvalues).forEach(function (_ref3) {\n              var _ref4 = _slicedToArray(_ref3, 2),\n                  field = _ref4[0],\n                  value = _ref4[1];\n\n              return _newFeature.set(field, value);\n            });\n            newFeatures.push(_newFeature);\n            //need to add features with no editable fields on layers source\n            source.addFeature(_newFeature);\n          } else {\n            newFeatures.push(session.pushAdd(layerId, feature));\n            //add feature to source\n            source.addFeature(feature);\n          }\n        }();\n      }\n      inputs.features.push(feature);\n    }\n\n    return newFeatures;\n  });\n\n  return function handleSplitFeature() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _cloneFeature = require('../utils/cloneFeature');\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _getNotEditableFieldsNoPkValues = require('../utils/getNotEditableFieldsNoPkValues');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar Feature = g3wsdk.core.layer.features.Feature;\n\n},{\"../utils/cloneFeature\":35,\"../utils/evaluateExpressionFields\":39,\"../utils/getNotEditableFieldsNoPkValues\":45}],55:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isPointOnVertex = isPointOnVertex;\n/**\n * @param feature\n * @param coordinates\n *\n * @returns { boolean }\n */\nfunction isPointOnVertex(_ref) {\n  var feature = _ref.feature,\n      coordinates = _ref.coordinates;\n\n  var geometry = feature.getGeometry();\n  var type = geometry.getType();\n  var coords = function coords(c) {\n    return g3wsdk.core.geoutils.areCoordinatesEqual(coordinates, c);\n  }; // whether element have same coordinates\n\n  switch (type) {\n    case 'Polygon':\n    case 'MultiLineString':\n      return _.flatMap(geometry.getCoordinates()).some(coords);\n\n    case 'LineString':\n    case 'MultiPoint':\n      return geometry.getCoordinates().some(coords);\n\n    case 'MultiPolygon':\n      return geometry.getPolygons().some(function (poly) {\n        return _.flatMap(poly.getCoordinates()).some(coords);\n      });\n\n    case 'Point':\n      return g3wsdk.core.geoutils.areCoordinatesEqual(coordinates, geometry.getCoordinates());\n\n    default:\n      return false;\n  }\n}\n\n},{}],56:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.listenRelation1_1FieldChange = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Listen changes on 1:1 relation fields (get child values from child layer)\n *\n * @param opts.layerId Current editing layer id\n * @param opts.fields Array of form fields of current editing layer\n *\n * @returns Array of watch function event to remove listen\n *\n * @since g3w-client-plugin-editing@v3.7.0\n */\nvar listenRelation1_1FieldChange = exports.listenRelation1_1FieldChange = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        layerId = _ref2.layerId,\n        _ref2$fields = _ref2.fields,\n        fields = _ref2$fields === undefined ? [] : _ref2$fields;\n\n    var unwatches = []; // unwatches field value (event change)\n\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n\n    var ONE = CatalogLayersStoresRegistry.getLayerById(layerId).getRelations().getArray().filter(function (relation) {\n      return 'ONE' === relation.getType();\n    });\n\n    // get all relation 1:1 of current layer\n\n    var _loop = function* _loop(relation) {\n\n      var childLayerId = relation.getChild(); // get relation child layer id\n      var fatherField = relation.getFatherField();\n      var relationLockFeatures = {}; //store value\n\n      // NB:\n      // need to check if editable when opening form task\n      // Not set this condition because maybe i ca be used this method\n      // on move task or other when current fatherFormRelationField, related to 1:1 relation\n      // it can be changed by default expression or in other way not only with form\n      var fatherFormRelationField = fields.find(function (f) {\n        return fatherField.includes(f.name);\n      }); // get father layer field (for each relation)\n      // skip when not relation field and not layer child is in editing\n      if (!(fatherFormRelationField && service.getLayerById(childLayerId))) {\n        return {\n          v: void 0\n        };\n      }\n\n      //store original editable property of fields relation to child layer relation\n      var editableRelatedFatherChild = service.getLayerById(relation.getFather()).getEditingFields().filter(function (f) {\n        return f.vectorjoin_id && f.vectorjoin_id === relation.getId();\n      }).reduce(function (accumulator, field) {\n        var formField = fields.find(function (f) {\n          return f.name === field.name;\n        });\n        accumulator[formField.name] = formField.editable;\n        return accumulator;\n      }, {});\n\n      fatherFormRelationField.input.options.loading.state = 'loading'; // show input bar loader\n\n      //get feature from child layer source\n      relationLockFeatures[fatherFormRelationField.value] = yield (0, _getRelation1_1ChildFeature.getRelation1_1ChildFeature)({\n        relation: relation,\n        fatherFormRelationField: fatherFormRelationField\n      });\n\n      fatherFormRelationField.input.options.loading.state = null; // show input bar loader\n\n      //if locked need to set editable to false\n      //can update child\n      if (relationLockFeatures[fatherFormRelationField.value].locked) {\n        Object.keys(editableRelatedFatherChild).forEach(function (fn) {\n          return fields.find(function (f) {\n            return f.name === fn;\n          }).editable = false;\n        });\n      }\n\n      //if not feature is on source child layer it mean it locked or not exist on server\n      //need to check\n\n      // listen for relation field changes (vue watcher)\n      unwatches.push(_eventbus.VM.$watch(function () {\n        return fatherFormRelationField.value;\n      }, function () {\n        var _ref3 = _asyncToGenerator(function* (value) {\n\n          // skip empty values\n          if (!value) {\n            fatherFormRelationField.input.options.loading.state = null;\n            fatherFormRelationField.editable = true;\n            return;\n          }\n\n          fatherFormRelationField.editable = false; // disable edit\n          fatherFormRelationField.input.options.loading.state = 'loading'; // show input bar loader\n\n          if (undefined === relationLockFeatures[fatherFormRelationField.value]) {\n            //get feature from child layer source\n            try {\n\n              relationLockFeatures[fatherFormRelationField.value] = yield (0, _getRelation1_1ChildFeature.getRelation1_1ChildFeature)({\n                relation: relation,\n                fatherFormRelationField: fatherFormRelationField\n              });\n            } catch (err) {\n              console.warn(err);\n            }\n          }\n\n          var _relationLockFeatures = relationLockFeatures[fatherFormRelationField.value],\n              feature = _relationLockFeatures.feature,\n              locked = _relationLockFeatures.locked;\n\n\n          Object.keys(editableRelatedFatherChild).forEach(function (fn) {\n            var field = fields.find(function (f) {\n              return f.name === fn;\n            });\n            //set editable property\n            field.editable = locked ? false : editableRelatedFatherChild[fn];\n            //need to check if feature is new and not locked ot not present on source\n            field.value = feature ? feature.get(field.name.replace(relation.getPrefix(), '')) : null;\n          });\n\n          // reset edit state\n          fatherFormRelationField.input.options.loading.state = null;\n          fatherFormRelationField.editable = true;\n        });\n\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }()));\n    };\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = ONE[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var relation = _step.value;\n\n        var _ret = yield* _loop(relation);\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return unwatches;\n  });\n\n  return function listenRelation1_1FieldChange() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _eventbus = require('../eventbus');\n\nvar _getRelation1_1ChildFeature = require('./getRelation1_1ChildFeature');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{\"../eventbus\":12,\"./getRelation1_1ChildFeature\":48}],57:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.promisify = promisify;\nexports.$promisify = $promisify;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * Migrate your consumer code away from jQuery promises.\n * \n * @param promise jquery promise\n */\nfunction promisify(promise) {\n  if (promise instanceof Promise) {\n    return promise;\n  }\n  if (!promise || !promise.then) {\n    console.trace(promise);\n    return Promise.reject('not a promise');\n  }\n  return new Promise(function (resolve, reject) {\n    promise.then(resolve).fail(reject);\n  });\n}\n\n/**\n * Migrate your consumer code away from jQuery promises.\n * \n * @param promise async function or ES6 promise \n */\nfunction $promisify(promise) {\n  if (undefined === promise) {\n    console.trace();\n    return $.Deferred(function (d) {\n      return d.reject('not a promise');\n    }).promise();\n  }\n  if (promise.always) {\n    return promise;\n  }\n  return $.Deferred(function () {\n    var _ref = _asyncToGenerator(function* (d) {\n      try {\n        d.resolve((yield promise instanceof Promise ? promise : promise()));\n      } catch (e) {\n        d.reject(e);\n      }\n    });\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }()).promise();\n}\n\n},{}],58:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAndUnsetSelectedFeaturesStyle = setAndUnsetSelectedFeaturesStyle;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _promisify = require('../utils/promisify');\n\nvar _setFeaturesSelectedStyle = require('../utils/setFeaturesSelectedStyle');\n\nvar Layer = g3wsdk.core.layer.Layer;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Method that set selected style to current editing features and\n * reset original style when workflow (tool) is done.\n * \n * @param promise jQuery promise\n * @param { Object } inputs\n * @param { ol.style.Style }  style\n */\n\nfunction setAndUnsetSelectedFeaturesStyle() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      promise = _ref.promise,\n      inputs = _ref.inputs,\n      style = _ref.style;\n\n  /** @FIXME temporary add in order to fix issue on pending promise (but which issue ?) */\n  var layer = inputs.layer,\n      _inputs$features = inputs.features,\n      features = _inputs$features === undefined ? [] : _inputs$features;\n\n  /**\n   * @TODO if coming from relation ( Workflow.Stack.getLength() > 1 )\n   *       no need setTimeout because we already it has selected style\n   *       so original is the same selected. In case of current layer\n   *       need to wait.\n   */\n\n  var selectOriginalStyleHandle = function selectOriginalStyleHandle() {\n    var originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(features, style);\n    (0, _promisify.promisify)(promise).finally(function () {\n      features.flat().forEach(function (feature) {\n        return feature.setStyle(originalStyle);\n      });\n    });\n  };\n\n  var is_vector = Layer.LayerTypes.VECTOR === layer.getType();\n  var is_single = _workflow.Workflow.Stack.getLength();\n\n  if (is_vector && is_single) {\n    setTimeout(function () {\n      selectOriginalStyleHandle();\n    });\n  } else if (is_vector) {\n    selectOriginalStyleHandle();\n  }\n}\n\n},{\"../g3wsdk/workflow/workflow\":16,\"../utils/promisify\":57,\"../utils/setFeaturesSelectedStyle\":59}],59:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setFeaturesSelectedStyle = setFeaturesSelectedStyle;\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Get selected style from \"extracted\" original feature style  \n * \n * @param feature\n * \n * @returns {{ originalStyle: *, selectedStyle: * }} selected style based on a geometry type\n */\nfunction getSelectedStyle(feature) {\n  return {\n    originalStyle: feature.getStyle(),\n    selectedStyle: feature.getGeometry() ? g3wsdk.core.geoutils.createSelectedStyle({ geometryType: feature.getGeometry().getType() }) : feature.getStyle()\n  };\n}\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/tasks/editingtask.js@v3.7.1\n * \n * Set selected style to feature and return original feature style\n * \n * @param { Array } features\n * @param { ol.style.Style } style  @since 3.8.0 custom select style\n * \n * @returns { ol.style.Style }\n */\nfunction setFeaturesSelectedStyle() {\n  var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var style = arguments[1];\n\n  if (features.length > 0) {\n    // copy feature from other layers when selecting multiple features\n    var arr = features.flat(); // flat nested features\n\n    var _getSelectedStyle = getSelectedStyle(arr[0]),\n        originalStyle = _getSelectedStyle.originalStyle,\n        selectedStyle = _getSelectedStyle.selectedStyle;\n\n    arr.forEach(function (feature) {\n      return feature.setStyle(style || selectedStyle);\n    });\n    return originalStyle;\n  }\n}\n\n},{}],60:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/editingservice.js@v3.7.8\n * \n * @param { string } layerId\n *\n * @returns { Promise<*> }\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nvar setLayerUniqueFieldValues = exports.setLayerUniqueFieldValues = function () {\n  var _ref = _asyncToGenerator(function* (layerId) {\n    var service = g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing'); //get editing service\n\n    var promises = [];\n    var layer = CatalogLayersStoresRegistry.getLayerById(layerId);\n    layer.getEditingFields().forEach(function (field) {\n      // skip when ..\n      if (!(field.validate.unique && undefined === (service.state.uniqueFieldsValues[layerId] ? service.state.uniqueFieldsValues[layerId][field.name] : []))) {\n        return;\n      }\n      promises.push(layer.getFilterData({ unique: field.name }).then(function () {\n        var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        if (undefined === service.state.uniqueFieldsValues[layerId]) {\n          service.state.uniqueFieldsValues[layerId] = {};\n        }\n        service.state.uniqueFieldsValues[layerId][field.name] = new Set(values);\n      }));\n    });\n    yield Promise.allSettled(promises);\n\n    return service.state.uniqueFieldsValues[layerId];\n  });\n\n  return function setLayerUniqueFieldValues(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar CatalogLayersStoresRegistry = g3wsdk.core.catalog.CatalogLayersStoresRegistry;\n\n},{}],61:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unlinkRelation = unlinkRelation;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _getRelationFieldsFromRelation = require('../utils/getRelationFieldsFromRelation');\n\nvar _updateParentWorkflows = require('../utils/updateParentWorkflows');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar GUI = g3wsdk.gui.GUI;\nvar tPlugin = g3wsdk.core.i18n.tPlugin;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/relationservice.js@v3.7.1\n * \n * Unlink relation\n * @param index\n * @param dialog\n * \n * @returns JQuery Promise\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\n\nfunction unlinkRelation(_ref) {\n  var layerId = _ref.layerId,\n      relation = _ref.relation,\n      relations = _ref.relations,\n      index = _ref.index,\n      _ref$dialog = _ref.dialog,\n      dialog = _ref$dialog === undefined ? true : _ref$dialog;\n\n  return $.Deferred(function (d) {\n    var unlink = function unlink() {\n      var id = relation.child === layerId ? relation.father : relation.child; // relation layer id\n      var feature = (0, _getEditingLayerById.getEditingLayerById)(id).getEditingSource().getFeatureById(relations[index].id);\n      var originalRelation = feature.clone();\n      // loop on ownField (Array field child relation)\n      (0, _getRelationFieldsFromRelation.getRelationFieldsFromRelation)({ relation: relation, layerId: id }).ownField.forEach(function (f) {\n        return feature.set(f, null);\n      });\n      _workflow.Workflow.Stack.getCurrent().getSession().pushUpdate(id, feature, originalRelation);\n      relations.splice(index, 1);\n      (0, _updateParentWorkflows.updateParentWorkflows)();\n      d.resolve(true);\n    };\n    if (dialog) {\n      GUI.dialog.confirm(tPlugin(\"editing.messages.unlink_relation\"), function (result) {\n        return result ? unlink() : d.reject(false);\n      });\n    } else {\n      unlink();\n    }\n  }).promise();\n}\n\n},{\"../g3wsdk/workflow/workflow\":16,\"../utils/getEditingLayerById\":41,\"../utils/getRelationFieldsFromRelation\":49,\"../utils/updateParentWorkflows\":62}],62:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateParentWorkflows = updateParentWorkflows;\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/services/relationservice.js@v3.7.1\n * \n * force parent workflow form service to update\n * update only when workflow has service (form service)\n * \n * @since g3w-client-plugin-editing@v3.8.0\n */\nfunction updateParentWorkflows() {\n  (_workflow.Workflow.Stack.getParents() || [_workflow.Workflow.Stack.getCurrent()]).forEach(function (w) {\n    return w.getContextService() && w.getContextService().setUpdate(true, { force: true });\n  });\n}\n\n},{\"../g3wsdk/workflow/workflow\":16}],63:[function(require,module,exports){\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectElementsStep = exports.PickFeatureStep = exports.OpenTableStep = exports.OpenFormStep = exports.MoveFeatureStep = exports.ModifyGeometryVertexStep = exports.AddFeatureStep = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _evaluateExpressionFields = require('../utils/evaluateExpressionFields');\n\nvar _getParentFormData = require('../utils/getParentFormData');\n\nvar _setFeaturesSelectedStyle = require('../utils/setFeaturesSelectedStyle');\n\nvar _setAndUnsetSelectedFeaturesStyle = require('../utils/setAndUnsetSelectedFeaturesStyle');\n\nvar _getFormFields = require('../utils/getFormFields');\n\nvar _chooseFeatureFromFeatures = require('../utils/chooseFeatureFromFeatures');\n\nvar _handleRelation1_1LayerFields = require('../utils/handleRelation1_1LayerFields');\n\nvar _listenRelation1_1FieldChange = require('../utils/listenRelation1_1FieldChange');\n\nvar _getLayersDependencyFeatures = require('../utils/getLayersDependencyFeatures');\n\nvar _getEditingLayerById = require('../utils/getEditingLayerById');\n\nvar _setLayerUniqueFieldValues = require('../utils/setLayerUniqueFieldValues');\n\nvar _getRelationsInEditingByFeature = require('../utils/getRelationsInEditingByFeature');\n\nvar _getFeatureTableFieldValue = require('../utils/getFeatureTableFieldValue');\n\nvar _addRemoveToMultipleSelectFeatures = require('../utils/addRemoveToMultipleSelectFeatures');\n\nvar _promisify = require('../utils/promisify');\n\nvar _pickfeaturesinteraction = require('../interactions/pickfeaturesinteraction');\n\nvar _workflow = require('../g3wsdk/workflow/workflow');\n\nvar _step = require('../g3wsdk/workflow/step');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _g3wsdk$core = g3wsdk.core,\n    G3WObject = _g3wsdk$core.G3WObject,\n    ApplicationState = _g3wsdk$core.ApplicationState;\nvar Geometry = g3wsdk.core.geometry.Geometry;\nvar _g3wsdk$core$geoutils = g3wsdk.core.geoutils,\n    convertSingleMultiGeometry = _g3wsdk$core$geoutils.convertSingleMultiGeometry,\n    isSameBaseGeometryType = _g3wsdk$core$geoutils.isSameBaseGeometryType;\nvar removeZValueToOLFeatureGeometry = g3wsdk.core.geoutils.Geometry.removeZValueToOLFeatureGeometry;\nvar Layer = g3wsdk.core.layer.Layer;\nvar Feature = g3wsdk.core.layer.features.Feature;\nvar GUI = g3wsdk.gui.GUI;\nvar Component = g3wsdk.gui.vue.Component;\nvar FormService = g3wsdk.gui.vue.services.FormService;\nvar _g3wsdk$ol$interactio = g3wsdk.ol.interactions.measure,\n    AreaInteraction = _g3wsdk$ol$interactio.AreaInteraction,\n    LengthInteraction = _g3wsdk$ol$interactio.LengthInteraction;\nvar _g3wsdk$ol$utils = g3wsdk.ol.utils,\n    createMeasureTooltip = _g3wsdk$ol$utils.createMeasureTooltip,\n    removeMeasureTooltip = _g3wsdk$ol$utils.removeMeasureTooltip;\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/addfeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/addfeaturestep.js@v3.7.1\n */\n\nvar AddFeatureStep = exports.AddFeatureStep = function (_Step) {\n  _inherits(AddFeatureStep, _Step);\n\n  function AddFeatureStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AddFeatureStep);\n\n    options.help = \"editing.steps.help.draw_new_feature\";\n\n    var _this = _possibleConstructorReturn(this, (AddFeatureStep.__proto__ || Object.getPrototypeOf(AddFeatureStep)).call(this, options));\n\n    _this._add = options.add === undefined ? true : options.add;\n\n    _this.drawInteraction;\n\n    _this.measeureInteraction;\n\n    _this.drawingFeature;\n\n    _this._snap = false === options.snap ? false : true;\n\n    /**\n     * Handle tasks that stops after `run(inputs, context)` promise (or if ESC key is pressed)\n     *\n     * @since g3w-client-plugin-editing@v3.8.0\n     */\n    _this._stopPromise;\n\n    /**\n     *\n     * @param event\n     * @returns {boolean|void}\n     * @private\n     * callback of pressing esc to remove last point drawed\n     */\n    _this._delKeyRemoveLastPoint = function (e) {\n      return e.keyCode === 46 && _this.removeLastPoint();\n    };\n\n    return _this;\n  }\n\n  _createClass(AddFeatureStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this2 = this;\n\n      //create promise to listen to pass to setAndUnsetSelectedFeaturesStyle\n      this._stopPromise = $.Deferred();\n\n      var d = $.Deferred();\n      var layerId = inputs.layer.getId();\n\n      // Skin when layer type is vector\n      if (Layer.LayerTypes.VECTOR !== inputs.layer.getType()) {\n        return d.promise();\n      }\n\n      /** @since g3w-client-plugin-editing@v3.8.0 */\n      (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: this._stopPromise, inputs: inputs, style: this.selectStyle });\n\n      var originalGeometryType = inputs.layer.getEditingGeometryType();\n\n      this.geometryType = Geometry.getOLGeometry(originalGeometryType);\n\n      var source = inputs.layer.getEditingLayer().getSource();\n      var attributes = inputs.layer.getEditingFields();\n\n      this.drawInteraction = this.addInteraction(new ol.interaction.Draw({\n        type: this.geometryType,\n        source: new ol.source.Vector(),\n        condition: this._options.condition || function () {\n          return true;\n        },\n        freehandCondition: ol.events.condition.never,\n        finishCondition: this._options.finishCondition || function () {\n          return true;\n        }\n      }), {\n        'drawstart': function drawstart(_ref) {\n          var feature = _ref.feature;\n\n          _this2.drawingFeature = feature;\n          document.addEventListener('keydown', _this2._delKeyRemoveLastPoint);\n        },\n        'drawend': function drawend(e) {\n          var feature = void 0;\n          if (_this2._add) {\n            attributes.forEach(function (attr) {\n              return e.feature.set(attr.name, null);\n            });\n            feature = new Feature({ feature: e.feature });\n            feature.setTemporaryId();\n            source.addFeature(feature);\n            context.session.pushAdd(layerId, feature, false);\n          } else {\n            feature = e.feature;\n          }\n          // set Z values based on layer Geometry\n          feature = Geometry.addZValueToOLFeatureGeometry({ feature: feature, geometryType: originalGeometryType });\n\n          inputs.features.push(feature);\n          _this2.getContext().get_default_value = true;\n          _this2.fireEvent('addfeature', feature); // emit event to get from subscribers\n          d.resolve(inputs);\n        }\n      });\n\n      this.drawInteraction.setActive(true);\n\n      return d.promise();\n    }\n\n    /**\n     * Method to add Measure\n     */\n\n  }, {\n    key: 'addMeasureInteraction',\n    value: function addMeasureInteraction() {\n      var is_line = Geometry.isLineGeometryType(this.geometryType);\n      var is_poly = Geometry.isPolygonGeometryType(this.geometryType);\n      if (!is_line && !is_poly) {\n        return;\n      }\n      this.measureInteraction = this.addInteraction(new (is_line ? LengthInteraction : AreaInteraction)({\n        projection: GUI.getService('map').getProjection(),\n        drawColor: 'transparent',\n        feature: this.drawingFeature\n      }));\n      this.measureInteraction.setActive(true);\n    }\n\n    /**\n     * Remove Measure Interaction\n     */\n\n  }, {\n    key: 'removeMeasureInteraction',\n    value: function removeMeasureInteraction() {\n      if (this.measureInteraction) {\n        this.measureInteraction.clear();\n        this.removeInteraction(this.measureInteraction);\n        this.measureInteraction = null;\n      }\n    }\n\n    /**\n     * Remove last point/vertex draw\n     */\n\n  }, {\n    key: 'removeLastPoint',\n    value: function removeLastPoint() {\n      try {\n        if (this.drawInteraction) {\n          this.drawInteraction.removeLastPoint();\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.removeInteraction(this.drawInteraction);\n      this.removeMeasureInteraction();\n      this.drawInteraction = null;\n      this.drawingFeature = null;\n      document.removeEventListener('keydown', this._delKeyRemoveLastPoint);\n      this._stopPromise.resolve(true);\n      return true;\n    }\n  }]);\n\n  return AddFeatureStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/modifygeometryvertextask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/modifygeometryvertexstep.js@v3.7.1\n */\n\n\nvar ModifyGeometryVertexStep = exports.ModifyGeometryVertexStep = function (_Step2) {\n  _inherits(ModifyGeometryVertexStep, _Step2);\n\n  function ModifyGeometryVertexStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ModifyGeometryVertexStep);\n\n    options.snap = undefined !== options.snap ? options.snap : true;\n    options.help = \"editing.steps.help.edit_feature_vertex\";\n\n    var _this3 = _possibleConstructorReturn(this, (ModifyGeometryVertexStep.__proto__ || Object.getPrototypeOf(ModifyGeometryVertexStep)).call(this, options));\n\n    _this3._originalStyle = null;\n\n    _this3._feature = null;\n\n    _this3.tooltip;\n    return _this3;\n  }\n\n  _createClass(ModifyGeometryVertexStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var newFeature = void 0,\n          originalFeature = void 0;\n      var d = $.Deferred();\n      var layerId = inputs.layer.getId();\n      var feature = this._feature = inputs.features[0];\n      this._originalStyle = inputs.layer.getEditingLayer().getStyle();\n      feature.setStyle(function () {\n        return [new ol.style.Style({\n          image: new ol.style.Circle({ radius: 5, fill: null, stroke: new ol.style.Stroke({ color: 'orange', width: 2 }) }),\n          geometry: function geometry(feature) {\n            return new ol.geom.MultiPoint( // in the case of multipolygon geometry\n            Geometry.isPolygonGeometryType(inputs.layer.getGeometryType()) && Geometry.isMultiGeometry(inputs.layer.getGeometryType()) ? feature.getGeometry().getCoordinates()[0][0] : feature.getGeometry().getCoordinates()[0]);\n          }\n        }), new ol.style.Style({ stroke: new ol.style.Stroke({ color: 'yellow', width: 4 }) })];\n      });\n      this._modifyInteraction = this.addInteraction(new ol.interaction.Modify({\n        features: new ol.Collection(inputs.features),\n        deleteCondition: this._options.deleteCondition\n      }), {\n        'modifystart': function modifystart(e) {\n          originalFeature = e.features.getArray()[0].clone();\n        },\n        'modifyend': function modifyend(e) {\n          var feature = e.features.getArray()[0];\n          if (feature.getGeometry().getExtent() !== originalFeature.getGeometry().getExtent()) {\n            (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }).finally(function () {\n              newFeature = feature.clone();\n              context.session.pushUpdate(layerId, newFeature, originalFeature);\n              inputs.features.push(newFeature);\n              d.resolve(inputs);\n            });\n          }\n        }\n      });\n      return d.promise();\n    }\n  }, {\n    key: 'addMeasureInteraction',\n    value: function addMeasureInteraction() {\n      var _this4 = this;\n\n      this._modifyInteraction.on('modifystart', function (e) {\n        _this4.tooltip = createMeasureTooltip({ map: _this4.getMap(), feature: e.features.getArray()[0] });\n      });\n    }\n  }, {\n    key: 'removeMeasureInteraction',\n    value: function removeMeasureInteraction() {\n      if (this.tooltip) {\n        removeMeasureTooltip(_extends({ map: this.getMap() }, this.tooltip));\n      }\n      this.tooltip = null;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this._feature.setStyle(this._originalStyle);\n      return true;\n    }\n  }]);\n\n  return ModifyGeometryVertexStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/movefeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/movefeaturestep.js@v3.7.1\n */\n\n\nvar MoveFeatureStep = exports.MoveFeatureStep = function (_Step3) {\n  _inherits(MoveFeatureStep, _Step3);\n\n  function MoveFeatureStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, MoveFeatureStep);\n\n    options.help = \"editing.steps.help.move\";\n\n    var _this5 = _possibleConstructorReturn(this, (MoveFeatureStep.__proto__ || Object.getPrototypeOf(MoveFeatureStep)).call(this, options));\n\n    _this5.drawInteraction = null;\n    _this5.promise; // need to be set here in case of picked features\n    return _this5;\n  }\n\n  _createClass(MoveFeatureStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this6 = this;\n\n      /** Need two different promises: One for stop() method and clean-selected feature,\n       * and another one for a run task. If we use the same promise, when stop a task without move feature,\n       * this.promise.resolve(), it fires also thenable method listens to resolve promise of a run task,\n       * that call stop task method.*/\n      this.promise = $.Deferred();\n      return $.Deferred(function (d) {\n        var layerId = inputs.layer.getId();\n        var originalFeature = null;\n        _this6.changeKey = null;\n        var isGeometryChange = false; // changed if geometry is changed\n        (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: _this6.promise, inputs: inputs, style: _this6.selectStyle });\n\n        _this6.addInteraction(new ol.interaction.Translate({\n          features: new ol.Collection(inputs.features),\n          hitTolerance: isMobile && isMobile.any ? 10 : 0 }), {\n          'translatestart': function translatestart(e) {\n            var feature = e.features.getArray()[0];\n            _this6.changeKey = feature.once('change', function () {\n              return isGeometryChange = true;\n            });\n            originalFeature = feature.clone();\n          },\n          'translateend': function translateend(e) {\n            ol.Observable.unByKey(_this6.changeKey);\n            var feature = e.features.getArray()[0];\n            if (isGeometryChange) {\n              // evaluated geometry expression\n              (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }).finally(function () {\n                context.session.pushUpdate(layerId, feature.clone(), originalFeature);\n                d.resolve(inputs);\n              });\n            } else {\n              d.resolve(inputs);\n            }\n          }\n        });\n      }).promise();\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.promise.resolve();\n      this.changeKey = null;\n    }\n  }]);\n\n  return MoveFeatureStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/openformtask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/openformstep.js@v3.7.1\n */\n\n\nvar OpenFormStep = exports.OpenFormStep = function (_Step4) {\n  _inherits(OpenFormStep, _Step4);\n\n  function OpenFormStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, OpenFormStep);\n\n    options.help = \"editing.steps.help.insert_attributes_feature\";\n\n    /**\n     * Show saveAll button\n     *\n     * @since v3.7\n     */\n    var _this7 = _possibleConstructorReturn(this, (OpenFormStep.__proto__ || Object.getPrototypeOf(OpenFormStep)).call(this, options));\n\n    _this7._saveAll = false === options.saveAll ? options.saveAll : _asyncToGenerator(function* () {});\n\n    /**\n     * Whether it can handle multi edit features\n     */\n    _this7._multi = options.multi || false;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this7.layerId;\n\n    /**\n     * whether form is coming from parent table component\n     */\n    _this7._isContentChild = false;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this7._features;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this7._originalFeatures;\n\n    /**\n     * @FIXME set a default value + add description\n     */\n    _this7.promise;\n\n    /**\n     * @since g3w-client-plugin-editing@v3.7.0\n     */\n    _this7._unwatchs = [];\n\n    return _this7;\n  }\n\n  /**\n   * @since v3.7\n   * @param bool\n   */\n\n\n  _createClass(OpenFormStep, [{\n    key: 'updateMulti',\n    value: function updateMulti() {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this._multi = bool;\n    }\n\n    /**\n     * @param inputs\n     * @param context\n     *\n     * @returns {*}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this8 = this;\n\n      return $.Deferred(function () {\n        var _ref3 = _asyncToGenerator(function* (d) {\n\n          _this8.promise = d;\n          _this8._isContentChild = _workflow.Workflow.Stack.getLength() > 1;\n          _this8.layerId = inputs.layer.getId();\n\n          GUI.setLoadingContent(false);\n\n          GUI.getService('map').disableClickMapControls(true);\n          (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: d, inputs: inputs, style: _this8.selectStyle });\n\n          if (!_this8._multi && Array.isArray(inputs.features[inputs.features.length - 1])) {\n            d.resolve();\n            return;\n          }\n\n          g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').setCurrentLayout();\n\n          var layerName = inputs.layer.getName();\n          _this8._features = _this8._multi ? inputs.features : [inputs.features[inputs.features.length - 1]];\n          _this8._originalFeatures = _this8._features.map(function (f) {\n            return f.clone();\n          });\n\n          // create a child relation feature set a father relation field value\n          if (_this8._isContentChild) {\n            context.fatherValue = context.fatherValue || []; // are array\n            (context.fatherField || []).forEach(function (field, i) {\n              _this8._features[0].set(field, context.fatherValue[i]);\n              _this8._originalFeatures[0].set(field, context.fatherValue[i]);\n            });\n          }\n\n          var fields = (0, _getFormFields.getFormFields)({\n            inputs: inputs,\n            context: context,\n            feature: _this8._features[0],\n            isChild: _this8._isContentChild,\n            multi: _this8._multi\n          });\n\n          // set fields. Useful getParentFormData\n          _workflow.Workflow.Stack.getCurrent().setInput({ key: 'fields', value: fields });\n\n          // whether disable relations editing (ref: \"editmultiattributes\")\n          var feature = !_this8._multi && inputs.features && inputs.features[inputs.features.length - 1];\n          var layerId = !_this8._multi && inputs.layer.getId();\n\n          // @since g3w-client-plugin-editing@v3.7.2\n          // skip relations that don't have a form structure\n          if (feature && !feature.isNew() && inputs.layer.getLayerEditingFormStructure()) {\n            yield (0, _getLayersDependencyFeatures.getLayersDependencyFeatures)(inputs.layer.getId(), {\n              // @since g3w-client-plugin-editin@v3.7.0\n              relations: inputs.layer.getRelations().getArray().filter(function (r) {\n                return inputs.layer.getId() === r.getFather() && // get only child relation features of current editing layer\n                (0, _getEditingLayerById.getEditingLayerById)(r.getChild()) && // child layer is in editing\n                'ONE' !== r.getType();\n              } // exclude ONE relation (Join 1:1)\n              ),\n              feature: feature,\n              filterType: 'fid'\n            });\n          }\n\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/form/editingform.js@v3.7.8 */\n          /** ORIGINAL SOURCE: g3w-client-plugin-editing/form/editingformservice.js@v3.7.8 */\n          var formService = GUI.showForm({\n            feature: _this8._originalFeatures[0],\n            title: \"plugins.editing.editing_attributes\",\n            name: layerName,\n            crumb: { title: layerName },\n            id: 'form_' + layerName,\n            dataid: layerName,\n            layer: inputs.layer,\n            isnew: _this8._originalFeatures.length > 1 ? false : _this8._originalFeatures[0].isNew(), // specify if is a new feature\n            parentData: (0, _getParentFormData.getParentFormData)(),\n            fields: fields,\n            context_inputs: _this8._multi ? false : { context: context, inputs: inputs },\n            formStructure: inputs.layer.hasFormStructure() && inputs.layer.getLayerEditingFormStructure() || undefined,\n            modal: true,\n            push: _this8._options.push || _this8._isContentChild, /** @since v3.7 force push content on top without clear previous content */\n            showgoback: undefined !== _this8._options.showgoback ? _this8._options.showgoback : !_this8._isContentChild, /** @since v3.7 force show back button */\n            /** @TODO make it straightforward: `headerComponent` vs `buttons` ? */\n            headerComponent: _this8._saveAll && {\n              template: /* html */'\\n          <section class=\"editing-save-all-form\">\\n            <bar-loader :loading=\"loading\"/>\\n            <div\\n              class = \"editing-button\"\\n              style = \"background-color: #fff; display: flex; justify-content: flex-end; width: 100%;\"\\n            >\\n              <span\\n                class               = \"save-all-icon\"\\n                v-disabled          = \"disabled\"\\n                @click.stop.prevent = \"saveAll\"\\n              >\\n                <i\\n                  class  = \"skin-color\"\\n                  :class = \"g3wtemplate.font[\\'save\\']\"\\n                  style  = \"font-size: 1.8em; padding: 5px; border-radius: 5px; cursor: pointer; box-shadow: 0 3px 5px rgba(0,0,0,0.5); margin: 5px;\"\\n                ></i>\\n              </span>\\n            </div>\\n          </section>',\n              name: 'Saveall',\n              /** @TODO figure out who populate these props (ie. core client code?) */\n              props: { update: { type: Boolean }, valid: { type: Boolean } },\n              data: function data() {\n                return {\n                  loading: false,\n                  enabled: _workflow.Workflow.Stack._workflows.slice(0, _workflow.Workflow.Stack.getLength() - 1).every(function (w) {\n                    var valid = (w.getContext().service instanceof FormService ? w.getContext().service.getState() : {}).valid;\n                    return valid || undefined === valid;\n                  })\n                };\n              },\n\n              computed: {\n                /** @returns {boolean} whether disable save all button (eg. when parent or current form is not valid/ updated) */\n                disabled: function disabled() {\n                  return !this.enabled || !(this.valid && this.update);\n                }\n              },\n              methods: {\n                saveAll: function () {\n                  var _ref4 = _asyncToGenerator(function* () {\n                    this.loading = true;\n                    yield Promise.allSettled([].concat(_toConsumableArray(_workflow.Workflow.Stack._workflows)).reverse().filter(function (w) {\n                      return \"function\" === typeof w.getLastStep()._saveAll;\n                    }) // need to filter only workflow that\n                    .map(function (w) {\n                      return new Promise(function () {\n                        var _ref5 = _asyncToGenerator(function* (resolve, reject) {\n                          var task = w.getLastStep();\n                          var fields = w.getContext().service.state.fields.filter(function (f) {\n                            return task._multi ? null !== f.value : true;\n                          });\n                          // skip when ..\n                          if (!fields.length) {\n                            return;\n                          }\n                          yield _workflow.Workflow.Stack.getCurrent().getContextService().saveDefaultExpressionFieldsNotDependencies();\n                          task._features.forEach(function (f) {\n                            return task.getInputs().layer.setFieldsWithValues(f, fields);\n                          });\n                          var newFeatures = task._features.map(function (f) {\n                            return f.clone();\n                          });\n                          if (task._isContentChild) {\n                            task.getInputs().relationFeatures = { newFeatures: newFeatures, originalFeatures: task._originalFeatures };\n                          }\n                          yield task.fireEvent('saveform', { newFeatures: newFeatures, originalFeatures: task._originalFeatures });\n                          newFeatures.forEach(function (f, i) {\n                            return task.getContext().session.pushUpdate(task.layerId, f, task._originalFeatures[i]);\n                          });\n                          yield (0, _handleRelation1_1LayerFields.handleRelation1_1LayerFields)({ layerId: task.layerId, features: newFeatures, fields: fields, task: task });\n                          task.fireEvent('savedfeature', newFeatures); // called after saved\n                          task.fireEvent('savedfeature_' + task.layerId, newFeatures); // called after saved using layerId\n                          task.getContext().session.save();\n                          return resolve();\n                        });\n\n                        return function (_x7, _x8) {\n                          return _ref5.apply(this, arguments);\n                        };\n                      }());\n                    }));\n                    try {\n                      yield (0, _promisify.promisify)(g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').service.commit({ modal: false }));\n                      _workflow.Workflow.Stack._workflows.forEach(function (w) {\n                        return w.getContext().service.setUpdate(false, { force: false });\n                      });\n                    } catch (e) {\n                      console.warn(e);\n                    }\n                    this.loading = false;\n                  });\n\n                  function saveAll() {\n                    return _ref4.apply(this, arguments);\n                  }\n\n                  return saveAll;\n                }()\n              }\n            },\n            buttons: [{\n              id: 'save',\n              title: _this8._isContentChild ? _workflow.Workflow.Stack.getParent().getBackButtonLabel() || \"plugins.editing.form.buttons.save_and_back\" // get custom back label from parent\n              : \"plugins.editing.form.buttons.save\",\n              type: \"save\",\n              class: \"btn-success\",\n              // save features\n              cbk: function () {\n                var _ref6 = _asyncToGenerator(function* (fields) {\n                  fields = _this8._multi ? fields.filter(function (field) {\n                    return null !== field.value;\n                  }) : fields;\n\n                  // skip when ..\n                  if (!fields.length) {\n                    GUI.setModal(false);\n                    d.resolve(inputs);\n                    return;\n                  }\n\n                  var newFeatures = [];\n\n                  // @since 3.5.15\n                  GUI.setLoadingContent(true);\n                  GUI.disableContent(true);\n\n                  yield _workflow.Workflow.Stack.getCurrent().getContextService().saveDefaultExpressionFieldsNotDependencies();\n\n                  GUI.setLoadingContent(false);\n                  GUI.disableContent(false);\n\n                  _this8._features.forEach(function (feature) {\n                    inputs.layer.setFieldsWithValues(feature, fields);\n                    newFeatures.push(feature.clone());\n                  });\n\n                  if (_this8._isContentChild) {\n                    inputs.relationFeatures = {\n                      newFeatures: newFeatures,\n                      originalFeatures: _this8._originalFeatures\n                    };\n                  }\n\n                  yield _this8.fireEvent('saveform', { newFeatures: newFeatures, originalFeatures: _this8._originalFeatures });\n\n                  newFeatures.forEach(function (f, i) {\n                    return context.session.pushUpdate(_this8.layerId, f, _this8._originalFeatures[i]);\n                  });\n\n                  // check and handle if layer has relation 1:1\n                  yield (0, _handleRelation1_1LayerFields.handleRelation1_1LayerFields)({\n                    layerId: _this8.layerId,\n                    features: newFeatures,\n                    fields: fields,\n                    task: _this8\n                  });\n\n                  GUI.setModal(false);\n\n                  _this8.fireEvent('savedfeature', newFeatures); // called after saved\n                  _this8.fireEvent('savedfeature_' + _this8.layerId, newFeatures); // called after saved using layerId\n                  // In case of save of child it means that child is updated so also parent\n                  if (_this8._isContentChild) {\n                    _workflow.Workflow.Stack.getParents().forEach(function (w) {\n                      return w.getContextService().setUpdate(true, { force: true });\n                    });\n                  }\n\n                  d.resolve(inputs);\n                });\n\n                function cbk(_x9) {\n                  return _ref6.apply(this, arguments);\n                }\n\n                return cbk;\n              }()\n            }, {\n              id: 'cancel',\n              title: \"plugins.editing.form.buttons.cancel\",\n              type: \"cancel\",\n              class: \"btn-danger\",\n              /// buttons in case of change\n              eventButtons: {\n                update: {\n                  false: {\n                    id: 'close',\n                    title: \"close\",\n                    type: \"cancel\",\n                    class: \"btn-danger\"\n                  }\n                }\n              },\n              cbk: function cbk() {\n                if (!_this8._isContentChild) {\n                  GUI.setModal(false);\n                  _this8.fireEvent('cancelform', inputs.features); // fire event cancel form to emit to subscrivers\n                }\n                d.reject(inputs);\n              }\n            }]\n          });\n\n          // overwrite click on relation\n          formService.handleRelation = function () {\n            var _ref7 = _asyncToGenerator(function* (e) {\n              // skip when multi editing\n              if (_this8._multi) {\n                GUI.showUserMessage({ type: 'info', message: 'plugins.editing.errors.editing_multiple_relations', duration: 3000, autoclose: true });\n                return;\n              }\n              GUI.setLoadingContent(true);\n              yield (0, _setLayerUniqueFieldValues.setLayerUniqueFieldValues)(inputs.layer.getRelationById(e.relation.name).getChild());\n              formService.setCurrentComponentById(e.relation.name);\n              GUI.setLoadingContent(false);\n            });\n\n            return function (_x10) {\n              return _ref7.apply(this, arguments);\n            };\n          }();\n\n          formService.addComponents([].concat(_toConsumableArray(g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').state.formComponents[layerId] || []), _toConsumableArray((0, _getRelationsInEditingByFeature.getRelationsInEditingByFeature)({\n            layerId: layerId,\n            relations: _this8._multi ? [] : inputs.layer.getRelations().getArray().filter(function (r) {\n              return r.getType() !== 'ONE' && r.getFather() === layerId;\n            }),\n            feature: _this8._multi ? false : inputs.features[inputs.features.length - 1]\n          }).map(function (_ref8) {\n            var relation = _ref8.relation,\n                relations = _ref8.relations;\n            return {\n              title: \"plugins.editing.edit_relation\",\n              name: relation.name,\n              id: relation.id,\n              header: false, // hide header form\n              component: Vue.extend({\n                mixins: [require('../components/FormRelation.vue')],\n                name: 'relation_' + Date.now(),\n                data: function data() {\n                  return { layerId: layerId, relation: relation, relations: relations };\n                }\n              })\n            };\n          }))));\n\n          // fire openform event\n          _this8.fireEvent('openform', {\n            layerId: _this8.layerId,\n            session: context.session,\n            feature: _this8._originalFeature,\n            formService: formService\n          });\n\n          // set context service to form Service in case of single task (ie. no workflow)\n          if (_workflow.Workflow.Stack.getCurrent()) {\n            _workflow.Workflow.Stack.getCurrent().setContextService(formService);\n          }\n\n          //listen eventually field relation 1:1 changes value\n          (0, _listenRelation1_1FieldChange.listenRelation1_1FieldChange)({ layerId: _this8.layerId, fields: fields }).then(function (d) {\n            return _this8._unwatchs = d;\n          });\n\n          _this8.disableSidebar(true);\n        });\n\n        return function (_x6) {\n          return _ref3.apply(this, arguments);\n        };\n      }()).promise();\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.disableSidebar(false);\n\n      //Check if form coming from the parent table component\n      var is_parent_table = false === this._isContentChild || // no child workflow\n\n      // case edit feature of a table (edit layer alphanumeric)\n      2 === _workflow.Workflow.Stack.getLength() && //open features table\n      _workflow.Workflow.Stack.getParent().isType('edittable');\n\n      // when the last feature of features is Array\n      // and is resolved without setting form service\n      // Ex. copy multiple features from another layer\n      if (is_parent_table) {\n        GUI.getService('map').disableClickMapControls(false);\n      }\n\n      var contextService = is_parent_table && _workflow.Workflow.Stack.getCurrent().getContextService();\n\n      // force update parent form update\n      if (contextService && false === this._isContentChild) {\n        contextService.setUpdate(false, { force: false });\n      }\n\n      GUI.closeForm({ pop: this.push || this._isContentChild });\n\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').resetCurrentLayout();\n\n      this.fireEvent('closeform');\n      this.fireEvent('closeform_' + this.layerId);\n\n      this.layerId = null;\n      this.promise = null;\n      this._unwatchs.forEach(function (unwatch) {\n        return unwatch();\n      });\n      this._unwatchs = [];\n    }\n  }]);\n\n  return OpenFormStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/opentabletask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/opentablestep.js@v3.7.1\n */\n\n\nvar OpenTableStep = exports.OpenTableStep = function (_Step5) {\n  _inherits(OpenTableStep, _Step5);\n\n  function OpenTableStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, OpenTableStep);\n\n    options.help = \"editing.steps.help.edit_table\";\n\n    return _possibleConstructorReturn(this, (OpenTableStep.__proto__ || Object.getPrototypeOf(OpenTableStep)).call(this, options));\n  }\n\n  /**\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/opentabletask.js@v3.7.1\n   * ORIGINAL SOURCE: g3w-client-plugin-editing/services/tableservice.js@v3.7.8\n   *\n   * @param inputs\n   * @param context\n   *\n   * @returns {*}\n   */\n\n\n  _createClass(OpenTableStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      // set current plugin layout (right content)\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').setCurrentLayout();\n\n      var d = $.Deferred();\n      this._isContentChild = _workflow.Workflow.Stack.getLength() > 1;\n\n      var features = inputs.layer.readEditingFeatures() || [];\n      var headers = (inputs.layer.getEditingFields() || []).filter(function (h) {\n        return features.length ? Object.keys(features[0].getProperties()).includes(h.name) : true;\n      });\n      this._isContentChild = _workflow.Workflow.Stack.getLength() > 1;\n      var excludeFields = this._isContentChild ? context.excludeFields || [] : [];\n      var service = Object.assign(new G3WObject(), { state: {\n          inputs: inputs,\n          context: context,\n          promise: d,\n          headers: headers, // column names\n          features: features,\n          rows: features.length > 0\n          // ordered properties\n          ? (excludeFields.length > 0 ? features.filter(function (feat) {\n            return !excludeFields.reduce(function (a, f, i) {\n              return a && context.fatherValue[i] === '' + feat.get(f);\n            }, true);\n          }) : features).map(function (f) {\n            return headers.map(function (h) {\n              return h.name;\n            }).reduce(function (props, header) {\n              var _Object$assign;\n\n              return Object.assign(props, (_Object$assign = {}, _defineProperty(_Object$assign, header, (0, _getFeatureTableFieldValue.getFeatureTableFieldValue)({ layerId: inputs.layer.getId(), feature: f, property: header })), _defineProperty(_Object$assign, '__gis3w_feature_uid', f.getUid()), _Object$assign));\n            }, {});\n          })\n          // features already bind to parent feature\n          : features,\n          title: '' + inputs.layer.getName() || 'Link relation',\n          isrelation: this._isContentChild,\n          capabilities: inputs.layer.getEditingCapabilities(),\n          layerId: inputs.layer.getId(),\n          workflow: null\n        } });\n\n      GUI.showContent({\n        content: new Component({\n          title: '' + inputs.layer.getName(),\n          push: this._isContentChild,\n          service: service,\n          state: service.state,\n          internalComponent: new (Vue.extend(require('../components/Table.vue')))({ service: service })\n        }),\n        push: this._isContentChild,\n        showgoback: false,\n        closable: false\n      });\n\n      return d.promise();\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.disableSidebar(false);\n      GUI[this._isContentChild ? 'popContent' : 'closeContent']();\n      //reset current plugin layout (right content) to application\n      g3wsdk.core.plugin.PluginsRegistry.getPlugin('editing').resetCurrentLayout();\n    }\n  }]);\n\n  return OpenTableStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/pickfeaturetask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/pickfeaturestep.js@v3.7.1\n */\n\n\nvar PickFeatureStep = exports.PickFeatureStep = function (_Step6) {\n  _inherits(PickFeatureStep, _Step6);\n\n  function PickFeatureStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PickFeatureStep);\n\n    options.help = \"editing.steps.help.pick_feature\";\n    options.highlight = options.highlight || false;\n    options.multi = options.multi || false;\n    return _possibleConstructorReturn(this, (PickFeatureStep.__proto__ || Object.getPrototypeOf(PickFeatureStep)).call(this, options));\n  }\n\n  _createClass(PickFeatureStep, [{\n    key: 'run',\n    value: function run(inputs) {\n      var _this11 = this;\n\n      return $.Deferred(function (d) {\n        _this11.addInteraction(new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: inputs.layer.getEditingLayer() }), {\n          'picked': function picked(e) {\n            if (0 === inputs.features.length) {\n              inputs.features = e.features;\n              inputs.coordinate = e.coordinate;\n            }\n            (0, _setAndUnsetSelectedFeaturesStyle.setAndUnsetSelectedFeaturesStyle)({ promise: d, inputs: inputs, style: _this11.selectStyle });\n\n            if (_this11._steps) {\n              _this11.setUserMessageStepDone('select');\n            }\n\n            d.resolve(inputs);\n          }\n        });\n      });\n    }\n  }]);\n\n  return PickFeatureStep;\n}(_step.Step);\n\n/**\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/tasks/selectelementstask.js@v3.7.1\n * ORIGINAL SOURCE: g3w-client-plugin-editing/workflows/steps/selectelementsstep.js@v3.7.1\n */\n\n\nvar SelectElementsStep = exports.SelectElementsStep = function (_Step7) {\n  _inherits(SelectElementsStep, _Step7);\n\n  function SelectElementsStep() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var chain = arguments[1];\n\n    _classCallCheck(this, SelectElementsStep);\n\n    options.help = options.help || \"editing.steps.help.select_elements\";\n\n    var _this12 = _possibleConstructorReturn(this, (SelectElementsStep.__proto__ || Object.getPrototypeOf(SelectElementsStep)).call(this, options));\n\n    _this12._selectInteractions = [];\n    _this12.multipleselectfeatures = [];\n    _this12._originalStyle;\n    _this12._vectorLayer;\n\n    if (chain) {\n      _this12.on('run', function () {\n        _this12.emit('next-step', g3wsdk.core.i18n.tPlugin(\"editing.steps.help.select_elements\"));\n      });\n    }\n    return _this12;\n  }\n\n  /**\n   *\n   * @param inputs\n   * @param context\n   * @returns {*}\n   */\n\n\n  _createClass(SelectElementsStep, [{\n    key: 'run',\n    value: function run(inputs, context) {\n      var _this13 = this;\n\n      var layer = inputs.layer;\n      var type = this._options.type || 'bbox'; // 'single' 'bbox' 'multiple';\n      var buttonnext = 'multiple' === type && !!this._steps.select.buttonnext;\n\n      return $.Deferred(function (d) {\n        var _selectInteractions;\n\n        var promise = d;\n\n        if (buttonnext) {\n          //check if it has already done handler function;\n          var done = _this13._steps.select.buttonnext.done;\n\n          _this13._steps.select.buttonnext.done = function () {\n            if (done && done instanceof Function) {\n              done();\n            }\n            promise.resolve(inputs);\n          };\n        }\n\n        var interactions = {};\n\n        // add single select interaction\n        if (['single', 'multiple'].includes(type)) {\n          interactions.single = new _pickfeaturesinteraction.PickFeaturesInteraction({ layer: layer.getEditingLayer() });\n          interactions.single.on('picked', function () {\n            var _ref10 = _asyncToGenerator(function* (_ref9) {\n              var features = _ref9.features;\n\n              var feature = void 0;\n              if (features.length > 1) {\n                try {\n                  feature = yield (0, _chooseFeatureFromFeatures.chooseFeatureFromFeatures)({ features: features, inputs: _this13.getInputs() });\n                } catch (e) {\n                  console.warn(e);\n                }\n              } else {\n                feature = features[0];\n              }\n              if (feature) {\n                inputs.features = [feature];\n                if (buttonnext) {\n                  (0, _addRemoveToMultipleSelectFeatures.addRemoveToMultipleSelectFeatures)([feature], inputs, _this13.multipleselectfeatures, _this13);\n                } else {\n                  _this13._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(inputs.features);\n                  if (_this13._steps) {\n                    _this13.setUserMessageStepDone('select');\n                  }\n                  promise.resolve(inputs);\n                }\n              }\n            });\n\n            return function (_x14) {\n              return _ref10.apply(this, arguments);\n            };\n          }());\n        }\n\n        // add multiple select interactions\n        if (['multiple', 'bbox'].includes(type) && ApplicationState.ismobile) {\n          _this13._vectorLayer = new ol.layer.Vector({ source: new ol.source.Vector({}) });\n          _this13.getMap().addLayer(_this13._vectorLayer);\n          interactions.multi = new ol.interaction.Draw({ type: 'Circle', source: _this13._vectorLayer.getSource(), geometryFunction: ol.interaction.Draw.createBox() });\n          interactions.multi.on('drawend', function (e) {\n            var features = layer.getEditingLayer().getSource().getFeaturesInExtent(e.feature.getGeometry().getExtent());\n            if (buttonnext) {\n              (0, _addRemoveToMultipleSelectFeatures.addRemoveToMultipleSelectFeatures)(features, inputs, _this13.multipleselectfeatures, _this13);\n            } else {\n              if (features.length > 0) {\n                inputs.features = features;\n                _this13._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(features);\n                if (_this13._steps) {\n                  _this13.setUserMessageStepDone('select');\n                }\n                setTimeout(function () {\n                  return promise.resolve(inputs);\n                }, 500);\n              } else {\n                promise.reject();\n              }\n            }\n          });\n        }\n\n        if (['multiple', 'bbox'].includes(type) && !ApplicationState.ismobile) {\n          interactions.dragbox = new ol.interaction.DragBox({ condition: ol.events.condition.shiftKeyOnly });\n          interactions.dragbox.on('boxend', function () {\n            var features = [];\n            var extent = interactions.dragbox.getGeometry().getExtent();\n\n            //https://openlayers.org/en/v5.3.0/apidoc/module-ol_source_Cluster-Cluster.html#forEachFeatureIntersectingExtent\n            layer.getEditingLayer().getSource().forEachFeatureIntersectingExtent(extent, function (f) {\n              features.push(f);\n            });\n\n            if (buttonnext) {\n              (0, _addRemoveToMultipleSelectFeatures.addRemoveToMultipleSelectFeatures)(features, inputs, _this13.multipleselectfeatures, _this13);\n            } else {\n              if (features.length > 0) {\n                inputs.features = features;\n                _this13._originalStyle = (0, _setFeaturesSelectedStyle.setFeaturesSelectedStyle)(features);\n                if (_this13._steps) {\n                  _this13.setUserMessageStepDone('select');\n                }\n                promise.resolve(inputs);\n              } else {\n                promise.reject();\n              }\n            }\n          });\n        }\n\n        // pick feature from external layer added to map\n        if ('external' === type) {\n          var geometryType = layer.getGeometryType();\n          var layerId = layer.getId();\n          var source = layer.getEditingLayer().getSource();\n\n          var _getContext = _this13.getContext(),\n              session = _getContext.session;\n\n          interactions.external = new _pickfeaturesinteraction.PickFeaturesInteraction({\n            layers: GUI.getService('map').getExternalLayers()\n            // filter external layer only vector - Exclude WMS\n            // same base geometry\n            .filter(function (l) {\n              var features = 'VECTOR' == l.getType() && l.getSource().getFeatures();\n              if (features.length > 0) {\n                return isSameBaseGeometryType(features[0].getGeometry().getType(), geometryType);\n              }\n              return true;\n            })\n          });\n          interactions.external.on('picked', function (e) {\n            if (!(e.features.length > 0)) {\n              promise.reject();\n              return;\n            }\n            var attributes = layer.getEditingFields();\n            var geometry = e.features[0].getGeometry();\n            if (geometry.getType() !== geometryType) {\n              e.feature.setGeometry(convertSingleMultiGeometry(geometry, geometryType));\n            }\n            var feature = new Feature({\n              feature: e.feature,\n              properties: attributes.map(function (attr) {\n                // set media attribute to null or attribute belong to layer but not present o feature copied\n                if (attr.pk || 'media' === attr.input.type || undefined === e.feature.get(attr.name)) {\n                  e.feature.set(attr.name, null);\n                }\n                return attr.name;\n              })\n            });\n\n            // evaluate Geometry Expression\n            (0, _evaluateExpressionFields.evaluateExpressionFields)({ inputs: inputs, context: context, feature: feature }).finally(function () {\n              removeZValueToOLFeatureGeometry({ feature: feature }); // remove eventually Z Values\n              feature.setTemporaryId();\n              source.addFeature(feature);\n              session.pushAdd(layerId, feature, false);\n              inputs.features.push(feature);\n              promise.resolve(inputs);\n            });\n          });\n        }\n\n        Object.values(interactions).forEach(function (i) {\n          return _this13.addInteraction(i);\n        });\n        (_selectInteractions = _this13._selectInteractions).push.apply(_selectInteractions, _toConsumableArray(Object.values(interactions)));\n      }).promise();\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this14 = this;\n\n      this._selectInteractions.forEach(function (i) {\n        return _this14.removeInteraction(i);\n      });\n\n      if (this._vectorLayer) {\n        this.getMap().removeLayer(this._vectorLayer);\n      }\n      // reset selected\n      this.getInputs().features.forEach(function (f) {\n        return f.setStyle(_this14._originalStyle);\n      });\n\n      this._originalStyle = null;\n      this._vectorLayer = null;\n      this._selectInteractions = [];\n      this.multipleselectfeatures = [];\n    }\n  }]);\n\n  return SelectElementsStep;\n}(_step.Step);\n\n},{\"../components/FormRelation.vue\":7,\"../components/Table.vue\":8,\"../g3wsdk/workflow/step\":15,\"../g3wsdk/workflow/workflow\":16,\"../interactions/pickfeaturesinteraction\":26,\"../utils/addRemoveToMultipleSelectFeatures\":29,\"../utils/chooseFeatureFromFeatures\":34,\"../utils/evaluateExpressionFields\":39,\"../utils/getEditingLayerById\":41,\"../utils/getFeatureTableFieldValue\":42,\"../utils/getFormFields\":43,\"../utils/getLayersDependencyFeatures\":44,\"../utils/getParentFormData\":46,\"../utils/getRelationsInEditingByFeature\":52,\"../utils/handleRelation1_1LayerFields\":53,\"../utils/listenRelation1_1FieldChange\":56,\"../utils/promisify\":57,\"../utils/setAndUnsetSelectedFeaturesStyle\":58,\"../utils/setFeaturesSelectedStyle\":59,\"../utils/setLayerUniqueFieldValues\":60}],64:[function(require,module,exports){\narguments[4][57][0].apply(exports,arguments)\n},{\"dup\":57}]},{},[25]);\n"],"names":["plugins","window","initConfig","group","Object","assign","version","hash","branch","r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","inserted","cache","noop","insert","css","elem","document","createElement","setAttribute","textContent","styleSheet","cssText","getElementsByTagName","appendChild","removeChild","2","_ref","_areCoordinatesEqual","_getFeatureTableFieldValue","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","defineProperty","default","name","props","commits","type","required","layer","relation","Boolean","data","features","readFeatures","efeatures","readEditingFeatures","methods","getFormattedValue","feat","get","getFlatCoordinates","getFeatureTableFieldValue","layerId","getId","feature","property","getValue","item","getFeature","getEditingValue","getEditingFeature","hasValue","efeat","id","find","getType","getGeometry","isEdited","includes","undefined","areCoordinatesEqual","coordinates","getCoordinates","getAttrs","entries","getProperties","sort","b","getLayerById","g3wsdk","core","plugin","PluginsRegistry","getPlugin","service","mounted","$refs","filter","d","forEach","innerHTML","__esModule","__vue__options__","options","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","staticClass","staticStyle","font-weight","margin","_v","_s","getName","_e","_l","keys","ref","refInFor","relations","attrs","add","update","delete","staticRenderFns","_scopeId","../utils/areCoordinatesEqual","../utils/getFeatureTableFieldValue","vueify/lib/insert-css","3","GUI","gui","$options","selectFeature","splice","push","getAttributesFeature","properties","attributes","map","label","attribute","zoomToFeature","getService","zoomToFeatures","highlight","duration","closeContent","index","on","click","$event","stopPropagation","for","class","g3wtemplate","font","4","G3W_FID","constant","getAlphanumericPropertiesFromFeature","geoutils","MapLayersStoreRegistry","resizeMixin","vue","Mixins","mixins","selectedFeatures","disabled","_height","computed","showEditAttributes","values","layers","reduce","sum","resize","_this","$nextTick","$data","innerHeight","_$options$layers$laye","external","fields","prop","attr","editAttributes","state","getLayerTitle","getTitle","beforeCreate","delayType","domProps","checked","Array","isArray","_i","change","$$i","$$a","$$el","target","$$c","$set","concat","slice","style","height","modifiers","create","5","_getProjectLayerFeatureById","CatalogLayersStoresRegistry","removeZValueToOLFeatureGeometry","tPlugin","Feature","catalog","Geometry","i18n","inputs","selectfeature","context","promise","copyLayer","isVector","getFields","watch","dialog","_ref2","getEditingFields","pk","source","getEditingLayer","getSource","showModalDialog","title","className","closeButton","message","$el","buttons","cancel","callback","ok","isThereEmptyFieldRequiredNotDefined","createFeatureWithPropertiesOfSelectedFeature","_ref3","_ref3$validate$requir","validate","selectedFeature","set","getEditingNotEditableFields","field","isPkField","setTemporaryId","addFeature","session","pushAdd","layerProjectFeature","yield","getProjectLayerFeatureById","fid","showUserMessage","autoclose","fireEvent","_q","color","../utils/getProjectLayerFeatureById","6","_slicedToArray","_Toolbox","_promisify","_ref9","_ref6","_ref5","_ref4","ApplicationState","ApplicationService","DataRouterService","arr","Symbol","iterator","sliceIterator","_arr","_n","_d","next","TypeError","_Toolbox2","obj","_g3wsdk$core","resourcesurl","showcommitbar","saving","layersInEditing","editingButtonsEnabled","selectedlayers","editinglayers","getEditableLayers","components","toolbox","transitions","addremovetransition","updateFilterLayers","_selectedlayers","$","selectlayers","val","trigger","updateLayersInEditing","bool","undo","canUndo","redo","canRedo","commit","toolboxId","canCommit","getToolBoxById","modal","always","startToolBox","_this2","online","canEdit","dirtyId","getDependencies","isDirty","commitDirtyToolBoxes","start","_x2","stopToolBox","editing","history","stop","saveToolBox","save","startActiveTool","toolId","toolboxidactivetool","_toolbox","stopActiveTool","setActiveTool","getToolById","_x3","_x4","setSelectedToolbox","selected","getToolBoxes","isSelected","setSelected","clearMessage","toolboxselected","_x5","hasDependencies","promisify","revert","getChildren","indexOf","_x6","_enableEditingButtons","registerOnLineOffLineEvent","_this3","unByKeys","checkOfflineChanges","unlock","owner","setter","onafter","catch","notify","_this4","_ref7","_ref7$modal","_ref7$unlock","promises","layerIds","changes","getOfflineItem","setTimeout","commitItems","when","fail","setOfflineItem","saveConfig","mode","django_admin_url","user","getConfig","is_superuser","URL","baseurl","registerLeavePage","getElementsByClassName","classList","has_layers","_ref8","is_commit","is_selected","setShow","created","appState","open","getLayers","EDITABLE","setInEditing","beforeDestroy","_this5","layerIdChanges","off","_ref10","un","featuresOnClose","fids","formatter","arr2","from","getData","outputs","show","loading","resetDefault","uniqueFieldsValues","showselectlayers","toolboxes","multiple","clear","editinglayer","setselectedtoolbox","starttoolbox","stoptoolbox","savetoolbox","setactivetool","stopactivetool","on-editing","update-filter-layers","href","../utils/promisify","./Toolbox.vue","7","_extends","_workflow2","_step","_setAndUnsetSelectedFeaturesStyle","_getRelationFieldsFromRelation","_getLayersDependencyFeatures","_getEditingLayerById","_convertFeaturesGeometryToGeometryTypeOfLayer","_addTableFeature","_updateParentWorkflows","_getRelationId","_pickfeaturesinteraction","_eventbus","_workflows","_ref32","_unlinkRelation","_ref18","_ref13","_ref11","isSameBaseGeometryType","Layer","toRawType","FormService","_g3wsdk$gui$vue$Mixin","fieldsMixin","PickFeatureInteraction","PickCoordinatesInteraction","SELECTED_STYLES","_defineProperty","enumerable","configurable","writable","_toConsumableArray","unlinkRelation","prototype","hasOwnProperty","geometry","utils","services","mediaMixin","_g3wsdk$ol$interactio","ol","interactions","Workflow","Step","OpenFormStep","OpenTableStep","AddFeatureStep","ModifyGeometryVertexStep","MoveFeatureStep","Point","Style","image","Circle","radius","fill","Fill","MultiPoint","Linestring","stroke","Stroke","width","MultiLinestring","Polygon","MultiPolygon","show_vector_tools","copylayerid","copyFeatureLayers","active","placeholdersearch","getResourcesUrl","table","display","relation_body","querySelector","offsetHeight","relation_header_title","relation_header_tools","isVectorRelation","relation_vector_tools","relationsTable","columns","adjust","copyFeatureFromOtherLayer","runAddRelationWorkflow","workflow","isGeoLayer","_add_link_workflow","selectandcopy","help","closeVectorTools","addVectorRelation","LayerTypes","VECTOR","_layerType","addRelationAndLink","relationAttributesSubset","flatMap","_createDataTable","relationTable","DataTable","autoWidth","columnDefs","orderable","targets","destroy","order","pageLength","responsive","scrollCollapse","scrollResize","scrollX","hide","search","draw","destroyTable","updateTable","updateNewRelationId","_new_relations_ids","clientid","newrelation","tools","ts","split","replace","onCommit","_ref9$new_relations","new_relations","relationLayer","getEditingLayerById","child","new","onInputChange","input","_getRelationFieldsFro","getRelationFieldsFromRelation","_relationLayerId","ownField","relationField","parent","editable","rField","getLayer","getEditingSource","getFeatureById","oRelation","clone","isNew","getSession","pushUpdate","getRelationFeatureValue","featureId","enableDOMElements","querySelectorAll","contains","remove","toggle","addTools","_this6","capabilities","Vue","observable","icon","enabled","getTools","isPointGeometryType","getGeometryType","tool","getOperator","flat","startTool","relationtool","_this7","VM","is_vector","relationfeature","featurestore","selectStyle","_createWorkflowOptions","setAndUnsetSelectedFeaturesStyle","confirm","res","Stack","getCurrent","pushDelete","relationLayerId","__uniqueFieldsValuesRelations","Set","removeFeature","w","_ref12","getUid","getContextService","updateParentWorkflows","steps","getFieldsWithValues","rf","currentRelationFeatureId","setModal","_workflow","movevertex","movefeature","unwatch","$watch","unbindEscKeyUp","bindEscKeyUp","getParents","setUpdate","force","_this8","_ref14","_ref14$isVector","hideContent","_getRelationFieldsFro2","setRelationFieldValue","_ref15","oIndex","newFeatures","newFeature","parentFeature","originalFeatures","updateFeature","_relations","keyRelationFeatureChange","_outputs$relationFeat","relationFeatures","_ref16","_ref17","findIndex","evt","Observable","unByKey","_relations2","rollbackDependecies","linkRelation","getRelationFeatures","getLayersDependencyFeatures","_this9","operator","filterType","link","_getRelationFieldsFro3","excludeFeatures","accumulator","getCurrentFeature","response","showContent","linked","beforeRun","originalRelation","rel","_ref20","_ref21","rF","warning","closeUserMessage","toString","excludeFields","fatherValue","_ref22","_ref23","fatherField","_ref24","relationsLength","fieldrequired","_this10","some","isFieldRequired","show_add_link","_","geometryType","_this11","parentLayer","bind","l","father","isMultiGeometry","getExternalLayers","getFeatures","toLowerCase","localeCompare","loadEventuallyRelationValuesForInputs","fatherFields","isEditingFieldEditable","getInputs","getEditingCapabilities","_Layer$LayerTypes$TAB","TABLE","backbuttonlabel","run","addTableFeature","_ref26","_this12","Deferred","editingLayer","_originalLayerStyle","getStyle","_ref27","_ref28","_stopPromise","addInteraction","picked","_x12","_ref29","_this13","_ref30","_ref31","PickFeaturesInteraction","convertFeaturesGeometryToGeometryTypeOfLayer","coordinate","query_point_tolerance","ProjectsRegistry","getCurrentProject","getQueryPointTolerance","multilayers","_x17","_x16","closable","_x15","_this14","extend","registerEscKeyEvent","getCurrentContent","content","getEventBus","$on","activated","mapExtent","getMapBBOX","runEventHandler","getRelationId","component","deactivated","zoomToExtent","margin-bottom","margin-left","toUpperCase","placeholder","align","align-self","_obj","toggled","src","aria-hidden","isMedia","getMediaType","mime_type","pop","getFieldType","../components/CopyFeaturesFromOtherProjectLayer.vue","../eventbus","../g3wsdk/workflow/step","../g3wsdk/workflow/workflow","../interactions/pickfeaturesinteraction","../utils/addTableFeature","../utils/convertFeaturesGeometryToGeometryTypeOfLayer","../utils/getEditingLayerById","../utils/getLayersDependencyFeatures","../utils/getRelationFieldsFromRelation","../utils/getRelationId","../utils/setAndUnsetSelectedFeaturesStyle","../utils/updateParentWorkflows","../workflows","8","_typeof","_cloneFeature","_getRelationsInEditing","Media_Field","constructor","Fields","media_field","g3w-media","dataTable","showTool","cap","outerHeight","showValue","headers","h","isMediaField","header","isrelation","_linkFeatures","deleteFeature","uid","element","relationinediting","getRelationsInEditing","getRelations","getArray","result","_layerId","rows","row","_x","copyFeature","cloneFeature","__gis3w_feature_uid","setDataTable","editFeature","console","warn","linkFeature","addindex","disableSideBar","max-width","padding","margin-right","../utils/cloneFeature","../utils/getRelationsInEditing","9","snapInteraction","helpmessage","snapAll","editDisabled","startstopediting","hasRelations","dependencies","changingtools","showtoolsoftool","toolsoftool","isLayerReady","ready","select","$emit","toggleEditing","toggleTool","toggleFilterByRelation","_initSnap","snapFeatures","Collection","snapEvents","snapToolboxes","snapUnwatches","activeSnapInteraction","checkedAll","removeInteraction","olKey","getFeaturesCollection","addSnapFeatures","settersAndKeys","addFeatures","onbefore","getState","setShowSnapAll","_unloadSnap","event","showSnapAll","interaction","Snap","state.activetool","messages","state.editing.on","state.toolsoftool","newTools","oldTools","onChange","mobile","isMobile","toolboxactive","geolayer","background","pull-right","g3w-icon-toggled","preventDefault","10","completeStep","buttonnext","dynamic","getFontClass","11","Session","ChangesManager","_createClass","Constructor","protoProps","staticProps","defineProperties","descriptor","Flow","_classCallCheck","instance","Queque","task","tasks","reverse","shift","counter","queques","end","micro","getContext","getSteps","runStep","runMicroTasks","setMessages","getLength","onDone","onError","clearQueques","isRunning","base","inherit","G3WObject","Actions","fnc","opposite","execute","object","items","_g3wsdk$core$G3WObjec","_inherits","subClass","superClass","self","ReferenceError","__proto__","getPrototypeOf","setters","_editor","started","getfeatures","_allfeatures","_x7","saveChangesOnServer","maxSteps","current","_states","_constrains","editor","_history","Proxy","__add","getRelationStates","__getRelationStates","insertState","__insertState","removeState","deleteState","removeStates","removeChangesFromHistory","insertStates","__insertStates","__undo","clearHistory","__redo","setItemsFeatureIds","__setItemsFeatureIds","__getState","getFirstState","__getFirstState","getLastState","getLastHistoryState","getCurrentState","__getCurrentState","getCurrentStateIndex","__getCurrentStateIndex","__canCommit","__canUndo","__canRedo","__commit","register","setPrototypeOf","historyId","action","newItems","own","stateId","s","Registry","unregister","uniqueId","Date","now","setProperties","removeNotEditableProperties","getEditor","unset","oldFeature","is_new","ids","getCommitItems","states","newFeat","oldFeat","rollback","unshift","_id","temporarychange","setChanges","itemsToCommit","commitObj","lockids","isRelation","sessionRelation","getLockIds","GeoJSONFormat","format","GeoJSON","itemObj","writeFeatureObject","childs_properties","getChild","getFather","_ref4$layerId","MapLayersStoresRegistry","is3DGeometry","set3DGeometryType","_ref5$ids","_ref5$relations","_ref5$__esPromise","__esPromise","_response$response$ne","applyCommitResponse","idx","getLastStateId","relationStates","_state","_this15","_checkSessionItems","_this16","_this17","unsetnewid","setId","_this18","currentState","_this19","currentStateIndex","checkCommitItems","commitItem","_this20","isDeleted","isUpdated","_item","isAdded","sessions","_sessions","setSession","getSessions","../../utils/promisify","12","13","_g3wsdk$core$layer$fe","FeaturesStore","OlFeaturesStore","Editor","_layer","_featuresstore","setFeatures","$promisify","doRequest","bbox","_filter","is_cached","extent","containsExtent","_started","relationId","_ref5$","is_pk","childField","ToolBox","clearState","addLockIds","new_lockids","_commit","getRelationByFatherChildren","getFatherField","getChildField","getFeaturesStore","resetEditingSource","../../toolboxes/toolbox","14","_editor2","_deprecated","DEFAULT_EDITING_CAPABILITIES","SessionsRegistry","Task","WorkflowsStack","../deprecated","./editing/editor","./workflow/step","./workflow/workflow","15","_options","_run","_stop","_inputs","_context","_outputs","running","usermessagesteps","escKeyPressEventHandler","setSteps","onRun","onStop","_tools","root","events","getMap","_pointerMoveCursor","getTargetElement","cursor","forEachFeatureAtPixel","pixel","_steps","setUserMessageSteps","_isContentChild","saveChange","unbind","escKeyUpHandler","setInputs","setContext","_workflow$_toolsoftoo","toolsOfTools","snap","measure","removeMeasureInteraction","_toolsoftool","emit","__stop","MESSAGES","16","_type","_promise","_child","_stackIndex","runOnce","_messages","_userMessageSteps","setUserMessagesSteps","helpMessage","_stepIndex","messagesSteps","getUserMessageSteps","addChild","removeAt","getStackIndex","clearUserMessagesSteps","__run","isChild","position","size","hooks","body","clearMessages","_ref5$tools","setToolsOfTools","feats","keyCode","workflows","getParent","getFirst","getLast","insertAt","getAt","../../components/UserMessage.vue","./step","17","close_editing_panel","errors","no_layers","some_layers","editing_changes","editing_data","editing_attributes","edit_relation","back_to_relations","no_relations_found","relation_data","relation_already_added","list_of_relations_feature","tooltip","edit_layer","edit","copy","pastefeaturesfromotherlayers","addpart","deletepart","merge","add_feature","delete_feature","move_feature","update_vertex","update_feature","update_multi_features","copyfeaturefromexternallayer","snapall","select_elements","select_element","edit_table","draw_new_feature","action_confirm","double_click_delete","edit_feature_vertex","move","select_feature_to_relation","show_edit_feature_form","pick_feature","insert_attributes_feature","draw_part","draw_geometry","selectSHIFT","selectDrawBox","selectDrawBoxAtLeast2Feature","selectPoint","selectPointSHIFT","selectMultiPointSHIFT","selectMultiPointSHIFTAtLeast2Feature","copyCTRL","selectStartVertex","selectToPaste","draw_split_line","featureslockbyotheruser","splitted","nosplittedfeature","press_esc","offline","delete_feature_relations","unlink_relation","commit_feature","toolbox_has_relation","saved","saved_local","loading_data","constraints","enable_editing","pdf","header_relation","header_add","header_update_delete","loading_table_data","copy_and_paste_from_other_layer_mandatory_fields","no_feature_selected","select_min_2_features","draw_or_copy","copy_feature_from_other_layer","form","tooltips","back_to_father","add_relation","link_relation","open_relation_tools","save_and_back","save_and_back_table","copyfeaturefromotherlayer","edit_attributes","copyfeaturefromprojectlayer","18","editing_multiple_relations","filter_by_relation","toolbox_has_no_geometry","19","20","21","_it2","_interopRequireDefault","_en2","_fi2","_se2","_fr2","_de2","_ro2","it","en","fi","se","fr","de","ro","./de","./en","./fi","./fr","./it","./ro","./se","22","save_table","23","24","25","_ref37","_rollback","allSettled","_ref38","_ref44","_ref43","_ref41","_ref39","_ref39$","del","_ref39$$relations","has_features","_ref40","_x21","_ref42","setGeometry","_x22","_x23","_i18n","_i18n2","_createFeature","_addPartToMultigeometries","_g3wsdk$core$i18n","_g3wsdk$core$layer","LayersStore","_g3wsdk$core$plugin","Plugin","PluginService","Panel","serverErrorParser","parsers","Server","_g3wsdk$ol$utils","getScaleFromResolution","getResolutionFromScale","_ref33","_ref19","_class","fontClasses","_toolboxes","layers_in_error","formComponents","subscribers","showToolboxesExcluded","cb","editableLayers","start-editing","show-relation-editing","start_editing","before","after","show_errors","editFeatureKey","panel","currentLayout","getCurrentLayoutName","unwatchLayout","layout","__current","layoutName","onMapControlToggled","isToggled","isClickMap","getActiveTool","setService","config","subscribe","unsubscribe","addToolBox","resetAPIDefault","getSessionById","setApplicationEditingConstraints","undoRedoLayerUniqueFieldValues","undoRedoRelationUniqueFieldValues","stopEditing","startEditing","addLayerFeature","_init","setHookLoading","setApi","api","addNewFeature","createFeature","commitChanges","getMapService","updateLayerFeature","deleteLayerFeature","hidePanel","hideEditingPanel","showPanel","setSaveConfig","addFormComponents","addLayersStore","queryable","getLayerForEditing","vectorurl","project_type","status","filter_expression","usecompleter","layer_id","has_filter","filter_fields","relation_reference","_options$values","_response","getFilterData","fformatter","_options$values2","_response2","getDataTable","ordering","fatherId","isChildEditable","vectorjoin_id","getColor","setColor","getLayersStore","addLayers","setFather","isFather","getFathers","layerName","relationName","layerRelations","addRelation","isReady","_setupGUI","getApi","setReady","registerPlugin","gid","visible","tb","showEditingPanel","once","toolBox","scale","getEditingConstraints","units","getMapUnits","parseInt","getView","getResolution","setResolution","geom","addPartTool","op","_w","_feature","zoomToGeometry","addfeature","description","addPartToMultigeometries","setOperator","addToolGroup","sessionItems","undoItems","relationSessionItems","redoItems","disableClickMapControls","_ref21$plugin","_ref21$toolboxes","toolboxIds","setEditingConstraints","commitpromises","getHistory","refreshMap","_ref24$modal","_ref24$close","close","success","has_changes","serverError","SAVE","CANCEL","CLOSEMODAL","propsData","$mount","curr","prev","currLayerId","relationsIds","has_relations","GIVE_ME_A_NAME","lock","featureid","online2","parse","textMessage","_ref28$sessionItems","has_change","oldVal","newVal","_ref31$","_x11","disablemapcontrols","setTitle","_x14","_ref34","nofeatures","nofeatures_field","showgoback","saveAll","_ref35","_ref35$mode","_ref35$cb","_ref35$modal","_ref36","_ref36$components","opts","internalPanel","resourcesUrl","closePanel","removeTools","removeLayersStore","setCurrentLayout","./components/Changes.vue","./components/Editing.vue","./g3wsdk","./g3wsdk/workflow/step","./g3wsdk/workflow/workflow","./i18n","./toolboxes/toolbox","./utils/addPartToMultigeometries","./utils/createFeature","./utils/getEditingLayerById","./utils/getProjectLayerFeatureById","./utils/promisify","./utils/setAndUnsetSelectedFeaturesStyle","./workflows","26","_ol$interaction$Point","featuresAtPixel","getFeaturesAtPixel","layerFilter","hitTolerance","any","handleDownEvent","handleUpEvent","dispatchEvent","handleMoveEvent","Pointer","27","_createEditingDataOptions","_setLayerUniqueFieldValues","_chooseFeature","_evaluateExpressionFields","_getNotEditableFieldsNoPkValues","_getDeltaXY","_chooseFeatureFromFeatures","_getRelationsInEditingByFeature","_isPointOnVertex","_handleSplitFeature","SelectElementsStep","PickFeatureStep","_g3wsdk$core$geoutils","dissolve","multiGeometryToSingleGeometries","singleGeometriesToMultiGeometry","splitFeatures","_g3wsdk$core$utils","debounce","is_line","is_poly","is_table","iconGeometry","openFormStep","selection","is_point","isLineGeometryType","isPolygonGeometryType","_start","uniqueFields","__clearHistory","__getLastHistoryState","_session","__startSession","__stopSession","__getFeatures","__saveChangesOnServer","isStarted","__isStarted","__getHistory","__getEditor","__push","__pushDelete","__save","__pushAdd","__pushUpdate","__rollback","__rollbackDependecies","__undoSession","__redoSession","__getCommitItems","__clearSession","customTitle","toolboxheader","toolmessages","activetool","_unregisterStartSettersEventsKey","_getFeaturesOption","_enabledtools","_disabledtools","_constraints","getEditingConstrains","chooseFeature","every","getRelationsInEditingByFeature","ismobile","condition","_ref5$features","multi","enable","defaultsLayers","selectionLayer","_ref6$tool","originalLayer","__layerId","vueInstance","promisesFeatures","layerFeature","_ref9$validate$requir","updateMulti","$destroy","Draw","isPointOnVertex","drawend","setUserMessageStepDone","edge","to","_evt$feature$getGeome","_evt$feature$getGeome2","x","y","deltaXY","getDeltaXY","featuresLength","promisesDefaultEvaluation","_loop","translate","_coordinates","_deltaXY","getEditingMediaFields","evaluateExpressionFields","noteditablefieldsvalues","getNotEditableFieldsNoPkValues","finally","originaLayer","originalFeature","geometries","Vector","getPixelFromCoordinate","tempLayer","addLayer","found","newGeometry","removeLayer","draw_line","freehandCondition","never","isSplitted","splittedGeometries","splitfeature","splittedGeometriesLength","handleSplitFeature","choose","chooseFeatureFromFeatures","has_same_geom","disabledtoolsoftools","getMessages","Function","_startTool","_stopTool","originalState","getFieldUniqueValuesFromServer","_resetOnSaveChangesOnServer","_getFeaturesEvent","inEditing","_ref17$reset","reset","getWidgetData","join","fieldName","registerEvents","constraint","constraintFeatureFilter","createEditingDataOptions","handlerAfterSessionGetFeatures","applicationConstraint","_options$toolboxheade","_options$startstopedi","_options$changingtool","showtools","unKeyLock","setEnablesDisablesTools","onceafter","subtitle","is_started","immediate","handler","setFeaturesOptions","setLayerUniqueFieldValues","stopLoading","setEditing","isMapHidden","startLoading","_x10","disableCanEditEvent","enableTools","clearToolboxMessages","_stopSessionChildren","_ref24$ids","_ref24$relations","_ref24$__esPromise","setMessage","setEnable","_ref25","_ref25$tools","_ref25$options","_options$editing_cons","editing_constraints","_ref26$tools","_ref26$excludetools","excludetools","_ref26$options","_options$editing_cons2","UPDATEONEFEATUREONLYTOOLSID","update_tools","toolsId","_tools$enabled","disableTools","_tools$disabled","_ref27$options","_options$active","disabledtools","_state$toolsoftool","_deactivetools","getHelpMessage","getRunningStep","activeTool","removeAllListeners","at","checkSessionItems","_this21","_feature2","_this22","_feature3","_this23","_this24","_this25","_this26","_this27","getContentLength","_this28","_startOp","hideSidebar","showSidebar","_x24","_x25","_x26","_this29","../components/CopyFeaturesFromOtherLayers.vue","../utils/addPartToMultigeometries","../utils/checkSessionItems","../utils/chooseFeature","../utils/chooseFeatureFromFeatures","../utils/createEditingDataOptions","../utils/evaluateExpressionFields","../utils/getDeltaXY","../utils/getNotEditableFieldsNoPkValues","../utils/getRelationsInEditingByFeature","../utils/handleSplitFeature","../utils/isPointOnVertex","../utils/setLayerUniqueFieldValues","../utils/unlinkRelation","28","setCoordinates","./promisify","29","addRemoveToMultipleSelectFeatures","selIndex","_originalStyle","_setFeaturesSelectedStyle","setFeaturesSelectedStyle","setStyle","../utils/setFeaturesSelectedStyle","30","createNewFeature","get_default_value","31","coords","c1","c2","getPolygons","poly","_coords","32","33","34","_ref$features","comp","../components/ChooseFeatureToEdit.vue","35","cloneNew","36","converted","cloned","convertSingleMultiGeometry","37","38","39","exclude","default_expression","apply_on_update","inputService","handleDefaultExpressionFormInput","qgs_layer_id","parentData","_getParentFormData","getParentFormData","handleFilterExpressionFormInput","./getParentFormData","40","_getCoordinates","41","42","kv","kv_field","43","getFormFields","savedfeatureFnc","_ref$isChild","has_unique","unique_values","unique","_value","current_values","has_values","exclude_values","_values","uniqueValues","_handleMulti","JSON","stringify","forceNull","44","all","setLoading","featureValues","45","46","_Workflow$Stack$getPa","_Workflow$Stack$getPa2","47","XHR","url","getUrl","params","getFeaturesFromResponseVectorApi","48","getRelation1_1ChildFeature","childFeatureStore","fatherFormRelationField","fatherLayerId","childLayerId","locked","oncebefore","createFilterFormInputs","search_endpoint","49","_fatherField","_childField","50","childId","51","_ref$relations","52","relationsinediting","fatherLayer","valid","53","handleRelation1_1LayerFields","_ref2$features","_ref2$fields","newChild","childFeature","fieldsUpdated","isNewChildFeature","getPrefix","54","_ref2$splittedGeometr","oriFeature","splittedGeometry","_newFeature","55","56","listenRelation1_1FieldChange","unwatches","ONE","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_ret","relationLockFeatures","v","editableRelatedFatherChild","formField","_getRelation1_1ChildFeature","_relationLockFeatures","return","./getRelation1_1ChildFeature","57","58","selectOriginalStyleHandle","originalStyle","_inputs$features","is_single","59","_getSelectedStyle","selectedStyle","createSelectedStyle","60","61","_ref$dialog","unlink","62","63","_getFormFields","_handleRelation1_1LayerFields","_listenRelation1_1FieldChange","_addRemoveToMultipleSelectFeatures","_possibleConstructorReturn","Component","AreaInteraction","LengthInteraction","createMeasureTooltip","removeMeasureTooltip","originalGeometryType","getEditingGeometryType","getOLGeometry","drawInteraction","finishCondition","drawstart","drawingFeature","addEventListener","_delKeyRemoveLastPoint","_add","addZValueToOLFeatureGeometry","setActive","measureInteraction","projection","getProjection","drawColor","removeLastPoint","removeEventListener","measeureInteraction","_snap","_modifyInteraction","Modify","deleteCondition","modifystart","modifyend","getExtent","isGeometryChange","changeKey","Translate","translatestart","translateend","_multi","formService","setLoadingContent","_features","_originalFeatures","setInput","getLayerEditingFormStructure","showForm","crumb","dataid","isnew","context_inputs","formStructure","hasFormStructure","headerComponent","_saveAll","template","getLastStep","saveDefaultExpressionFieldsNotDependencies","setFieldsWithValues","_x8","getBackButtonLabel","cbk","disableContent","_x9","eventButtons","false","handleRelation","getRelationById","setCurrentComponentById","addComponents","_originalFeature","setContextService","_unwatchs","disableSidebar","is_parent_table","isType","contextService","closeForm","resetCurrentLayout","_Object$assign","internalComponent","single","multipleselectfeatures","_vectorLayer","geometryFunction","createBox","getFeaturesInExtent","dragbox","DragBox","shiftKeyOnly","forEachFeatureIntersectingExtent","_selectInteractions","chain","../components/FormRelation.vue","../components/Table.vue","../utils/addRemoveToMultipleSelectFeatures","../utils/getFormFields","../utils/getParentFormData","../utils/handleRelation1_1LayerFields","../utils/listenRelation1_1FieldChange","64","dup"],"mappings":"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"}